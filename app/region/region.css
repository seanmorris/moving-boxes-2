.region {
	--widthPx: calc(1px * var(--width));
	--heightPx: calc(1px * var(--height));

	--widthNx: calc(-1px * var(--width));
	--heightNx: calc(-1px * var(--height));
		/*pointer-events: none;*/
}

.region.region-water .sprite {
	position: absolute;
	width: calc(1px * var(--width));
	height: calc(1px * var(--height));
	/*pointer-events: none;*/
}

.region.region-water .sprite {

	--bottomBoundary: -1px;

	top: calc(-1px * var(--height));
	bottom: var(--bottomBoundary);


	left: calc(max(0px, var(--leftBoundry)) + 16px);

	width:  calc(var(--viewportWidth));
	height: auto;

	background-attachment: fixed;
	z-index: 1001;
}

.region.region-water .region-color-wrapper {
	overflow: hidden;


	position: absolute;

	left:    0;
	right: 0;
	top:     0;
	bottom: 64px;
}

.region.region-water .region-color {
	background-color: rgba(0,128,255,0.25);
}

.region.region-water .region-filter-wrapper {
	overflow: hidden;
	position: absolute;
	left:    0;
	right: 0;
	top:     0;
	bottom: 64px;
}

.region.region-water .region-color,
.region.region-water .region-filter {
	position: absolute;

	left:    0;
	right: 0;
	top:     0;
	bottom: -64px;
}

.viewport:not(.displacement-off) .region.region-water .region-filter {
	backdrop-filter: invert(0);
	filter: url(#waves);
	z-index: -10000;
	transform: translate3d(0, 0, 0);
}

.region.region-water .sprite:after {
	content: '.';
	color: transparent;
	background-image: url(Sonic/water-surface-wave.png);
	position: absolute;

	width: 100%;
	opacity: min(var(--height), 0.5);
	height: 16px;

	background-position: 0px 0px;

	transform: translateY(-16px);

	/*animation:  100ms steps(1,end) infinite;
	background-position-x: 0px;
	background-position-y: 32px;*/
	animation-name: water-waves-frames, water-waves-flow;
	animation-timing-function: steps(3), linear;
	animation-iteration-count: infinite, infinite;
	animation-duration: 0.75s, 1.5s;

}

@keyframes water-waves-frames {
	0% {
		background-position-y: 0px;
	}
	100% {
		background-position-y: 48px;
	}
}

@keyframes water-waves-flow {
	0% {
		background-position-x: 0px;
	}
	100% {
		background-position-x: 32px;
	}
}
