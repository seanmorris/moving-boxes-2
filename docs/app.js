!function(){"use strict";var t="undefined"==typeof global?self:global;if("function"!=typeof t.require){var e={},r={},n={},i={}.hasOwnProperty,o=/^\.\.?(\/|$)/,a=function(t,e){for(var r,n=[],i=(o.test(e)?t+"/"+e:e).split("/"),a=0,s=i.length;a<s;a++)".."===(r=i[a])?n.pop():"."!==r&&""!==r&&n.push(r);return n.join("/")},s=function(t){return t.split("/").slice(0,-1).join("/")},c=function(e,n){var i,o={id:e,exports:{},hot:h&&h.createHot(e)};return r[e]=o,n(o.exports,(i=e,function(e){var r=a(s(i),e);return t.require(r,i)}),o),o.exports},l=function(t){var e=n[t];return e&&t!==e?l(e):t},u=function(t,n){null==n&&(n="/");var o=l(t);if(i.call(r,o))return r[o].exports;if(i.call(e,o))return c(o,e[o]);throw new Error("Cannot find module '"+t+"' from '"+n+"'")};u.alias=function(t,e){n[e]=t};var f=/\.[^.\/]+$/,p=/\/index(\.[^\/]+)?$/;u.register=u.define=function(t,o){if(t&&"object"==typeof t)for(var a in t)i.call(t,a)&&u.register(a,t[a]);else e[t]=o,delete r[t],function(t){if(f.test(t)){var e=t.replace(f,"");i.call(n,e)&&n[e].replace(f,"")!==e+"/index"||(n[e]=t)}if(p.test(t)){var r=t.replace(p,"");i.call(n,r)||(n[r]=t)}}(t)},u.list=function(){var t=[];for(var r in e)i.call(e,r)&&t.push(r);return t};var h=t._hmr&&new t._hmr(function(t,e){return l(a(s(t),e))},u,e,r);u._cache=r,u.hmr=h&&h.wrap,u.brunch=!0,t.require=u}}(),function(){"undefined"==typeof window||window;var t=function(t,e,r){var n={},i=function(e,r){try{return t(r+"/node_modules/"+e)}catch(t){if(-1===t.toString().indexOf("Cannot find module"))throw t;if(-1!==r.indexOf("node_modules")){var o=r.split("/"),a=o.lastIndexOf("node_modules"),s=o.slice(0,a).join("/");return i(e,s)}}return n};return function(o){if(o in e&&(o=e[o]),o){if("."!==o[0]&&r){var a=i(o,r);if(a!==n)return a}return t(o)}}};require.register("curvature/animate/Ease.js",function(e,r,n){r=t(r,{},"curvature"),function(){"use strict";function t(e){"@babel/helpers - typeof";return(t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(e)}Object.defineProperty(e,"__esModule",{value:!0}),e.Ease=void 0;var n=r("../base/Mixin"),i=r("../mixin/PromiseMixin");function o(e,r){for(var n=0;n<r.length;n++){var i=r[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,(o=i.key,void 0,"symbol"===t(a=function(e,r){if("object"!==t(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,r||"default");if("object"!==t(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===r?String:Number)(e)}(o,"string"))?a:String(a)),i)}var o,a}function a(t,e){return(a=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function s(e){var r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var n,i=c(e);if(r){var o=c(this).constructor;n=Reflect.construct(i,arguments,o)}else n=i.apply(this,arguments);return function(e,r){if(r&&("object"===t(r)||"function"==typeof r))return r;if(void 0!==r)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(e)}(this,n)}}function c(t){return(c=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var l=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&a(t,e)}(u,n.Mixin.with(i.PromiseMixin));var e,r,c,l=s(u);function u(t,e={}){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,u),(r=l.call(this)).interval=t,r.terminal=!1,r.initial=!1,r.timeout=!1,r.final=!1,r.canceled=!1,r.done=!1,r.calculate=!!(r.calculate||"calculate"in e)&&e.calculate,r.bounded=!("bounded"in e)||e.bounded,r.repeat="repeat"in e?e.repeat:1,r.reverse="reverse"in e&&e.reverse,r}return e=u,(r=[{key:"start",value:function(){this.done=!1,requestAnimationFrame(()=>{this.initial=Date.now(),this.terminal=this.initial+this.interval,this.repeat>=0&&(this.terminal=this.initial+this.interval*this.repeat,this.timeout=setTimeout(()=>{if(this.done)return this.reverse?0:1;this.done=!0,this[i.PromiseMixin.Accept](this.reverse?0:1)},this.interval*this.repeat))})}},{key:"cancel",value:function(){return this.done?this.final:(clearTimeout(this.timeout),this.final=this.current(),this.canceled=this.done=!0,this[i.PromiseMixin.Reject](this.final),this.final)}},{key:"fraction",value:function(){if(this.done)return this.reverse?0:1;if(!1===this.initial)return this.reverse?1:0;var t=Date.now()-this.initial;if(t/this.interval>=this.repeat)return this.reverse?0:1;var e=t%this.interval/this.interval;return this.reverse?1-e:e}},{key:"current",value:function(){var t=this.fraction();return this.calculate?this.calculate(t):t}}])&&o(e.prototype,r),c&&o(e,c),Object.defineProperty(e,"prototype",{writable:!1}),u}();e.Ease=l}()}),require.register("curvature/animate/ease/CubicInOut.js",function(e,r,n){r=t(r,{},"curvature"),function(){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.CubicInOut=void 0;var t=r("../Ease");function n(t){"@babel/helpers - typeof";return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function i(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,l(n.key),n)}}function o(t,e){return(o=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function a(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,i=c(t);if(e){var o=c(this).constructor;r=Reflect.construct(i,arguments,o)}else r=i.apply(this,arguments);return function(t,e){if(e&&("object"===n(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return s(t)}(this,r)}}function s(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function c(t){return(c=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function l(t){var e=function(t,e){if("object"!==n(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var i=r.call(t,e||"default");if("object"!==n(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===n(e)?e:String(e)}var u=function(e){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&o(t,e)}(f,t.Ease);var r,n,c,u=a(f);function f(...t){var e,r,n,i;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,f),e=u.call(this,...t),r=s(e),i=(t=>t<.5?4*t*t*t:(t-1)*(2*t-2)*(2*t-2)+1),(n=l(n="calculate"))in r?Object.defineProperty(r,n,{value:i,enumerable:!0,configurable:!0,writable:!0}):r[n]=i,e}return r=f,n&&i(r.prototype,n),c&&i(r,c),Object.defineProperty(r,"prototype",{writable:!1}),r}();e.CubicInOut=u}()}),require.register("curvature/animate/ease/QuintInOut.js",function(e,r,n){r=t(r,{},"curvature"),function(){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.QuintInOut=void 0;var t=r("../Ease");function n(t){"@babel/helpers - typeof";return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function i(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,l(n.key),n)}}function o(t,e){return(o=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function a(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,i=c(t);if(e){var o=c(this).constructor;r=Reflect.construct(i,arguments,o)}else r=i.apply(this,arguments);return function(t,e){if(e&&("object"===n(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return s(t)}(this,r)}}function s(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function c(t){return(c=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function l(t){var e=function(t,e){if("object"!==n(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var i=r.call(t,e||"default");if("object"!==n(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===n(e)?e:String(e)}var u=function(e){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&o(t,e)}(f,t.Ease);var r,n,c,u=a(f);function f(...t){var e,r,n,i;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,f),e=u.call(this,...t),r=s(e),i=(t=>t<.5?16*t*t*t*t*t:1+16*--t*t*t*t*t),(n=l(n="calculate"))in r?Object.defineProperty(r,n,{value:i,enumerable:!0,configurable:!0,writable:!0}):r[n]=i,e}return r=f,n&&i(r.prototype,n),c&&i(r,c),Object.defineProperty(r,"prototype",{writable:!1}),r}();e.QuintInOut=u}()}),require.register("curvature/base/Bag.js",function(e,r,n){r=t(r,{},"curvature"),function(){"use strict";function t(e){"@babel/helpers - typeof";return(t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(e)}Object.defineProperty(e,"__esModule",{value:!0}),e.Bag=void 0;var n=r("./Bindable"),i=r("./Mixin"),o=r("../mixin/EventTargetMixin");function a(e,r){for(var n=0;n<r.length;n++){var i=r[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,(o=i.key,void 0,"symbol"===t(a=function(e,r){if("object"!==t(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,r||"default");if("object"!==t(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===r?String:Number)(e)}(o,"string"))?a:String(a)),i)}var o,a}function s(t,e){return(s=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function c(e){var r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var n,i=l(e);if(r){var o=l(this).constructor;n=Reflect.construct(i,arguments,o)}else n=i.apply(this,arguments);return function(e,r){if(r&&("object"===t(r)||"function"==typeof r))return r;if(void 0!==r)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(e)}(this,n)}}function l(t){return(l=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var u=Symbol("Mapped"),f=Symbol("Has"),p=Symbol("Add"),h=Symbol("Remove"),g=Symbol("Delete"),d=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&s(t,e)}(y,i.Mixin.with(o.EventTargetMixin));var e,r,l,d=c(y);function y(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,y),(e=d.call(this)).changeCallback=t,e.content=new Map,e.current=0,e.length=0,e.list=n.Bindable.makeBindable([]),e.meta=Symbol("meta"),e.type=void 0,e}return e=y,(r=[{key:"has",value:function(t){return this[u]?this[u].has(t):this[f](t)}},{key:f,value:function(t){return this.content.has(t)}},{key:"add",value:function(t){return this[u]?this[u].add(t):this[p](t)}},{key:p,value:function(t){if(void 0===t||!(t instanceof Object))throw new Error("Only objects may be added to Bags.");if(this.type&&!(t instanceof this.type))throw console.error(this.type,t),new Error("Only objects of type ".concat(this.type," may be added to this Bag."));if(t=n.Bindable.make(t),!this.content.has(t)){var e=new CustomEvent("adding",{detail:{item:t}});if(this.dispatchEvent(e)){var r=(t=>Number(t))(this.current++);this.content.set(t,r),this.list[r]=t,this.changeCallback&&this.changeCallback(t,this.meta,y.ITEM_ADDED,r);var i=new CustomEvent("added",{detail:{item:t,id:r}});return this.dispatchEvent(i),this.length=this.size,r}}}},{key:"remove",value:function(t){return this[u]?this[u].remove(t):this[h](t)}},{key:h,value:function(t){if(void 0===t||!(t instanceof Object))throw new Error("Only objects may be removed from Bags.");if(this.type&&!(t instanceof this.type))throw console.error(this.type,t),new Error("Only objects of type ".concat(this.type," may be removed from this Bag."));if(t=n.Bindable.make(t),!this.content.has(t))return this.changeCallback&&this.changeCallback(t,this.meta,0,void 0),!1;var e=new CustomEvent("removing",{detail:{item:t}});if(this.dispatchEvent(e)){var r=this.content.get(t);delete this.list[r],this.content.delete(t),this.changeCallback&&this.changeCallback(t,this.meta,y.ITEM_REMOVED,r);var i=new CustomEvent("removed",{detail:{item:t,id:r}});return this.dispatchEvent(i),this.length=this.size,t}}},{key:"delete",value:function(t){if(this[u])return this[u].delete(t);this[g](t)}},{key:g,value:function(t){this.remove(t)}},{key:"map",value:function(t=(t=>t),e=(t=>t)){var r=new WeakMap,n=new y;return n[u]=this,this.addEventListener("added",i=>{var o=i.detail.item;if(e(o)&&!r.has(o)){var a=t(o);r.set(o,a),n[p](a)}}),this.addEventListener("removed",t=>{var e=t.detail.item;if(r.has(e)){var i=r.get(e);r.delete(e),n[h](i)}}),n}},{key:"size",get:function(){return this.content.size}},{key:"items",value:function(){return Array.from(this.content.entries()).map(t=>t[0])}}])&&a(e.prototype,r),l&&a(e,l),Object.defineProperty(e,"prototype",{writable:!1}),y}();e.Bag=d,Object.defineProperty(d,"ITEM_ADDED",{configurable:!1,enumerable:!1,writable:!0,value:1}),Object.defineProperty(d,"ITEM_REMOVED",{configurable:!1,enumerable:!1,writable:!0,value:-1})}()}),require.register("curvature/base/Bindable.js",function(e,r,n){r=t(r,{},"curvature"),function(){"use strict";function t(t,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,n(i.key),i)}}function r(t,e,r){return(e=n(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function n(t){var e=function(t,e){if("object"!==i(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==i(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===i(e)?e:String(e)}function i(t){"@babel/helpers - typeof";return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(e,"__esModule",{value:!0}),e.Bindable=void 0;var o=Symbol("ref"),a=Symbol("original"),s=Symbol("deck"),c=Symbol("binding"),l=Symbol("subBinding"),u=Symbol("bindingAll"),f=Symbol("isBindable"),p=Symbol("wrapping"),h=Symbol("Names"),g=Symbol("executing"),d=Symbol("stack"),y=(Symbol("object"),Symbol("wrapped")),b=Symbol("unwrapped"),v=Symbol("getProto"),m=Symbol("onGet"),w=Symbol("onAllGet"),S=Symbol("bindChain"),O=Symbol("Descriptors"),j=Symbol("Before"),x=Symbol("After"),P=Symbol("NoGetters"),k=Object.getPrototypeOf(Int8Array),_=Set.prototype[Symbol.iterator],R=Map.prototype[Symbol.iterator],M="object"===("undefined"==typeof globalThis?"undefined":i(globalThis))?globalThis:"object"===("undefined"==typeof window?"undefined":i(window))?window:"object"===("undefined"==typeof self?"undefined":i(self))?self:void 0,T=t=>"function"==typeof M.Map&&t instanceof M.Map||"function"==typeof M.Set&&t instanceof M.Set||"function"==typeof M.Node&&t instanceof M.Node||"function"==typeof M.WeakMap&&t instanceof M.WeakMap||"function"==typeof M.WeakSet&&t instanceof M.WeakSet||"function"==typeof M.ArrayBuffer&&t instanceof M.ArrayBuffer||"function"==typeof M.Promise&&t instanceof M.Promise||"function"==typeof M.File&&t instanceof M.File||"function"==typeof M.Event&&t instanceof M.Event||"function"==typeof M.CustomEvent&&t instanceof M.CustomEvent||"function"==typeof M.Gamepad&&t instanceof M.Gamepad||"function"==typeof M.ResizeObserver&&t instanceof M.ResizeObserver||"function"==typeof M.MutationObserver&&t instanceof M.MutationObserver||"function"==typeof M.PerformanceObserver&&t instanceof M.PerformanceObserver||"function"==typeof M.IntersectionObserver&&t instanceof M.IntersectionObserver||"function"==typeof M.IDBCursor&&t instanceof M.IDBCursor||"function"==typeof M.IDBCursorWithValue&&t instanceof M.IDBCursorWithValue||"function"==typeof M.IDBDatabase&&t instanceof M.IDBDatabase||"function"==typeof M.IDBFactory&&t instanceof M.IDBFactory||"function"==typeof M.IDBIndex&&t instanceof M.IDBIndex||"function"==typeof M.IDBKeyRange&&t instanceof M.IDBKeyRange||"function"==typeof M.IDBObjectStore&&t instanceof M.IDBObjectStore||"function"==typeof M.IDBOpenDBRequest&&t instanceof M.IDBOpenDBRequest||"function"==typeof M.IDBRequest&&t instanceof M.IDBRequest||"function"==typeof M.IDBTransaction&&t instanceof M.IDBTransaction||"function"==typeof M.IDBVersionChangeEvent&&t instanceof M.IDBVersionChangeEvent||"function"==typeof M.FileSystemFileHandle&&t instanceof M.FileSystemFileHandle||"function"==typeof M.RTCPeerConnection&&t instanceof M.RTCPeerConnection,E=function(){function e(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e)}var r,n,E;return r=e,E=[{key:"isBindable",value:function(t){return!(!t||!t[f])&&t[f]===e}},{key:"onDeck",value:function(t,e){return t[s].get(e)||!1}},{key:"ref",value:function(t){return t[o]||t||!1}},{key:"makeBindable",value:function(t){return this.make(t)}},{key:"shuck",value:function(t,r){r=r||new Map;var n=Object.create({});if(t instanceof k||t instanceof ArrayBuffer){var o=t.slice(0);return r.set(t,o),o}var s=Object.keys(t);for(var c in s){var l=s[c];if("___"!==l.substring(0,3)){var u=r.get(t[l]);if(u)n[l]=u;else if(t[l]!==t){if(t[l]&&"object"===i(t[l])){var f=t[l];e.isBindable(t[l])&&(f=t[l][a]),n[l]=this.shuck(f,r)}else n[l]=t[l];r.set(t[l],n[l])}else r.set(t[l],n),n[l]=n}}return e.isBindable(t)&&(delete n.bindTo,delete n.isBound),n}},{key:"make",value:function(t){if(!t||!["function","object"].includes(i(t)))return t;if(t[o])return t[o];if(t[f])return t;if(Object.isSealed(t)||Object.isFrozen(t)||!Object.isExtensible(t)||T(t))return t;Object.defineProperty(t,f,{configurable:!1,enumerable:!1,writable:!1,value:e}),Object.defineProperty(t,o,{configurable:!0,enumerable:!1,writable:!0,value:!1}),Object.defineProperty(t,a,{configurable:!1,enumerable:!1,writable:!1,value:t}),Object.defineProperty(t,s,{configurable:!1,enumerable:!1,writable:!1,value:new Map}),Object.defineProperty(t,c,{configurable:!1,enumerable:!1,writable:!1,value:Object.create(null)}),Object.defineProperty(t,l,{configurable:!1,enumerable:!1,writable:!1,value:new Map}),Object.defineProperty(t,u,{configurable:!1,enumerable:!1,writable:!1,value:new Set}),Object.defineProperty(t,g,{enumerable:!1,writable:!0}),Object.defineProperty(t,p,{enumerable:!1,writable:!0}),Object.defineProperty(t,d,{configurable:!1,enumerable:!1,writable:!1,value:[]}),Object.defineProperty(t,j,{configurable:!1,enumerable:!1,writable:!1,value:new Set}),Object.defineProperty(t,x,{configurable:!1,enumerable:!1,writable:!1,value:new Set}),Object.defineProperty(t,y,{configurable:!1,enumerable:!1,writable:!1,value:Object.preventExtensions(new Map)}),Object.defineProperty(t,b,{configurable:!1,enumerable:!1,writable:!1,value:Object.preventExtensions(new Map)}),Object.defineProperty(t,O,{configurable:!1,enumerable:!1,writable:!1,value:Object.preventExtensions(new Map)});var r=(n,o=null,a={})=>{var s=!1;if(Array.isArray(n)){var f=n.map(t=>r(t,o,a));return()=>f.forEach(t=>t())}if(n instanceof Function&&(a=o||{},o=n,s=!0),a.delay>=0&&(o=this.wrapDelayCallback(o,a.delay)),a.throttle>=0&&(o=this.wrapThrottleCallback(o,a.throttle)),a.wait>=0&&(o=this.wrapWaitCallback(o,a.wait)),a.frame&&(o=this.wrapFrameCallback(o,a.frame)),a.idle&&(o=this.wrapIdleCallback(o)),s){if(t[u].add(o),!("now"in a)||a.now)for(var p in t)o(t[p],p,t,!1);return()=>{t[u].delete(o)}}if(t[c][n]||(t[c][n]=new Set),a.children){var h=o;o=((...r)=>{var n=r[0],o=t[l].get(h);if(o&&(t[l].delete(h),o()),"object"===i(n)){var s=e.make(n);e.isBindable(s)&&t[l].set(h,s.bindTo((...t)=>h(...r,...t),Object.assign({},a,{children:!1}))),h(...r)}else h(...r)})}t[c][n].add(o),"now"in a&&!a.now||o(t[n],n,t,!1);var g=()=>{var e=t[l].get(o);e&&(t[l].delete(o),e()),t[c][n]&&t[c][n].has(o)&&t[c][n].delete(o)};return a.removeWith&&a.removeWith instanceof View&&a.removeWith.onRemove(()=>g),g};Object.defineProperty(t,"bindTo",{configurable:!1,enumerable:!1,writable:!1,value:r});Object.defineProperty(t,S,{configurable:!1,enumerable:!1,writable:!1,value:(e,r)=>{var n=e.split("."),i=n.shift(),o=n.slice(0),a=[];return a.push(t.bindTo(i,(t,e,n,i)=>{var s=o.join(".");0!==o.length?(void 0===t&&(t=n[e]=this.make({})),a=a.concat(t[S](s,r))):r(t,e,n,i)})),()=>a.forEach(t=>t())}}),Object.defineProperty(t,"___before",{configurable:!1,enumerable:!1,writable:!1,value:e=>(t[j].add(e),()=>t[j].delete(e))}),Object.defineProperty(t,"___after",{configurable:!1,enumerable:!1,writable:!1,value:e=>(t[x].add(e),()=>t[x].delete(e))});for(var n in Object.defineProperty(t,"isBound",{configurable:!1,enumerable:!1,writable:!1,value:()=>{if(t[u].size)return!0;for(var e of Object.values(t[c]))if(e.size)return!0;return!1}}),t)t[n]&&"object"===i(t[n])&&(t[n][o]||t[n]instanceof Promise||Object.isExtensible(t[n])&&!Object.isSealed(t[n])&&(T(t[n])||(t[n]=e.make(t[n]))));var E=t[O],C=t[y],A=t[d],B=Object.create(null);return B.set=((r,n,o)=>{if(o&&"object"===i(o)&&(o=e.make(o),r[n]===o))return!0;C.has(n)&&C.delete(n);var a=t[s],l=a.has(n),f=l&&a.get(n);if(l&&f===o)return!0;if(n.slice&&"___"===n.slice(-3))return!0;if(r[n]===o||"number"==typeof o&&isNaN(f)&&isNaN(o))return!0;for(var p of(a.set(n,o),t[u]))p(o,n,r,!1);if(n in t[c])for(var h of t[c][n])h(o,n,r,!1,r[n]);if(a.delete(n),M.File&&r instanceof M.File&&"lastModifiedDate"==n||Reflect.set(r,n,o),Array.isArray(r)&&t[c].length)for(var g in t[c].length)(0,t[c].length[g])(r.length,"length",r,!1,r.length);return!0}),B.construct=((r,n)=>{var i="constructor";for(var o of r[j])o(r,i,t[d],void 0,n);var s=e.make(new r[a](...n));for(var c of r[x])c(r,i,t[d],s,n);return s}),B.deleteProperty=((e,r)=>{var n=t[s];if(n.has(r))return!0;if(!(r in e))return!0;if(E.has(r)){var i=E.get(r);if(i&&!i.configurable)return!1;E.delete(r)}for(var o of(n.set(r,null),C.has(r)&&C.delete(r),t[u]))o(void 0,r,e,!0,e[r]);if(r in t[c])for(var a of t[c][r])a(void 0,r,e,!0,e[r]);return Reflect.deleteProperty(e,r),n.delete(r),!0}),t[P]||(B.getPrototypeOf=(e=>v in t?t[v]:Reflect.getPrototypeOf(e)),B.get=((r,n)=>{if(C.has(n))return C.get(n);if(n===o||n===a||"apply"===n||"isBound"===n||"bindTo"===n||"__proto__"===n||"constructor"===n)return t[n];var i;if(E.has(n)?i=E.get(n):(i=Object.getOwnPropertyDescriptor(t,n),E.set(n,i)),i&&!i.configurable&&!i.writable)return t[n];if(w in t)return t[w](n);if(m in t&&!(n in t))return t[m](n);if(i&&!i.configurable&&!i.writable)return C.set(n,t[n]),t[n];if("function"==typeof t[n]){if(h in t[n])return t[n];t[b].set(n,t[n]);var s=Object.getPrototypeOf(t)[n]===t[n],c=T(t)||"function"==typeof t[Symbol.iterator]&&"next"===n||"function"==typeof k&&t instanceof k||"function"==typeof EventTarget&&t instanceof EventTarget||"function"==typeof Date&&t instanceof Date||"function"==typeof R&&t.prototype===R||"function"==typeof _&&t.prototype===_?t:t[o],l=function(...e){for(var r of(t[g]=n,A.unshift(n),t[j]))r(t,n,A,t,e);var i;if(new.target)i=new(t[b].get(n))(...e);else{var o=t[b].get(n);i=s?o.apply(c||t,e):o(...e)}for(var a of t[x])a(t,n,A,t,e);return t[g]=null,A.shift(),i};(l[h]=l[h]||new WeakMap).set(t,n),l[w]=(e=>{var r=l[h].get(t);return t[r][e]});var u=e.make(l);return C.set(n,u),u}return t[n]})),Object.defineProperty(t,o,{configurable:!1,enumerable:!1,writable:!1,value:new Proxy(t,B)}),t[o]}},{key:"clearBindings",value:function(t){var e=(t=>(...e)=>e.map(t))(t=>Object.keys(t).map(e=>delete t[e]));t[u].clear(),e(t[y],t[c],t[x],t[j])}},{key:"resolve",value:function(t,e,r=!1){for(var n,o=e.split("."),a=o[0];o.length;){if(r&&1===o.length)return[this.make(t),o.shift(),a];(n=o.shift())in t&&t[n]&&"object"===i(t[n])||(t[n]=Object.create(null)),t=this.make(t[n])}return[this.make(t),n,a]}},{key:"wrapDelayCallback",value:function(t,e){return(...r)=>setTimeout(()=>t(...r),e)}},{key:"wrapThrottleCallback",value:function(t,e){return this.throttles.set(t,!1),(...r)=>{this.throttles.get(t,!0)||(t(...r),this.throttles.set(t,!0),setTimeout(()=>{this.throttles.set(t,!1)},e))}}},{key:"wrapWaitCallback",value:function(t,e){return(...r)=>{var n;(n=this.waiters.get(t))&&(this.waiters.delete(t),clearTimeout(n)),n=setTimeout(()=>t(...r),e),this.waiters.set(t,n)}}},{key:"wrapFrameCallback",value:function(t,e){return(...e)=>{requestAnimationFrame(()=>t(...e))}}},{key:"wrapIdleCallback",value:function(t){return(...e)=>{(window.requestIdleCallback||requestAnimationFrame)(()=>t(...e))}}}],(n=null)&&t(r.prototype,n),E&&t(r,E),Object.defineProperty(r,"prototype",{writable:!1}),e}();e.Bindable=E,r(E,"waiters",new WeakMap),r(E,"throttles",new WeakMap),Object.defineProperty(E,"OnGet",{configurable:!1,enumerable:!1,writable:!1,value:m}),Object.defineProperty(E,"NoGetters",{configurable:!1,enumerable:!1,writable:!1,value:P}),Object.defineProperty(E,"GetProto",{configurable:!1,enumerable:!1,writable:!1,value:v}),Object.defineProperty(E,"OnAllGet",{configurable:!1,enumerable:!1,writable:!1,value:w})}()}),require.register("curvature/base/Cache.js",function(e,r,n){r=t(r,{},"curvature"),function(){"use strict";function t(e){"@babel/helpers - typeof";return(t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(e)}function r(e,r){for(var n=0;n<r.length;n++){var i=r[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,(o=i.key,void 0,"symbol"===t(a=function(e,r){if("object"!==t(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,r||"default");if("object"!==t(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===r?String:Number)(e)}(o,"string"))?a:String(a)),i)}var o,a}Object.defineProperty(e,"__esModule",{value:!0}),e.Cache=void 0;var n=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}var e,n,i;return e=t,i=[{key:"store",value:function(t,e,r,n="standard"){var i=0;r&&(i=1e3*r+(new Date).getTime()),this.buckets||(this.buckets=new Map),this.buckets.has(n)||this.buckets.set(n,new Map);var o=new CustomEvent("cvCacheStore",{cancelable:!0,detail:{key:t,value:e,expiry:r,bucket:n}});document.dispatchEvent(o)&&this.buckets.get(n).set(t,{value:e,expiration:i})}},{key:"load",value:function(t,e=!1,r="standard"){var n=new CustomEvent("cvCacheLoad",{cancelable:!0,detail:{key:t,defaultvalue:e,bucket:r}});if(!document.dispatchEvent(n))return e;if(this.buckets&&this.buckets.has(r)&&this.buckets.get(r).has(t)){var i=this.buckets.get(r).get(t);if(0===i.expiration||i.expiration>(new Date).getTime())return this.buckets.get(r).get(t).value}return e}}],(n=null)&&r(e.prototype,n),i&&r(e,i),Object.defineProperty(e,"prototype",{writable:!1}),t}();e.Cache=n}()}),require.register("curvature/base/Config.js",function(e,r,n){r=t(r,{},"curvature"),function(){"use strict";function t(t,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,(o=i.key,void 0,"symbol"===n(a=function(t,e){if("object"!==n(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var i=r.call(t,e||"default");if("object"!==n(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(o,"string"))?a:String(a)),i)}var o,a}function n(t){"@babel/helpers - typeof";return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(e,"__esModule",{value:!0}),e.Config=void 0;var i={},o=r,a="object"===("undefined"==typeof globalThis?"undefined":n(globalThis))?globalThis:"object"===("undefined"==typeof window?"undefined":n(window))?window:"object"===("undefined"==typeof self?"undefined":n(self))?self:void 0;try{i=o("/Config").Config}catch(t){!0===a.devMode&&console.error(t),i={}}var s=function(){function e(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e)}var r,n,i;return r=e,i=[{key:"get",value:function(t){return this.configs[t]}},{key:"set",value:function(t,e){return this.configs[t]=e,this}},{key:"dump",value:function(){return this.configs}},{key:"init",value:function(...t){for(var e in t){var r=t[e];for(var n in"string"==typeof r&&(r=JSON.parse(r)),r){var i=r[n];return this.configs[n]=i}}return this}}],(n=null)&&t(r.prototype,n),i&&t(r,i),Object.defineProperty(r,"prototype",{writable:!1}),e}();e.Config=s,Object.defineProperty(s,"configs",{configurable:!1,enumerable:!1,writable:!1,value:i})}()}),require.register("curvature/base/Dom.js",function(e,r,n){r=t(r,{},"curvature"),function(){"use strict";function t(e){"@babel/helpers - typeof";return(t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(e)}function r(e,r){for(var n=0;n<r.length;n++){var i=r[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,(o=i.key,void 0,"symbol"===t(a=function(e,r){if("object"!==t(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,r||"default");if("object"!==t(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===r?String:Number)(e)}(o,"string"))?a:String(a)),i)}var o,a}Object.defineProperty(e,"__esModule",{value:!0}),e.Dom=void 0;var n=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}var e,n,i;return e=t,i=[{key:"mapTags",value:function(t,e,r,n,i){var o=[],a=!0;n&&(a=!1);var s=!1,c=globalThis.window,l=(c.Node,c.Element),u=c.NodeFilter,f=c.document.createTreeWalker(t,u.SHOW_ELEMENT|u.SHOW_TEXT,{acceptNode:(t,r)=>{if(!a){if(t!==n)return u.FILTER_SKIP;a=!0}return i&&t===i&&(s=!0),s?u.FILTER_SKIP:e?t instanceof l&&t.matches(e)?u.FILTER_ACCEPT:u.FILTER_SKIP:u.FILTER_ACCEPT}},!1);for(0;f.nextNode();)o.push(r(f.currentNode,f));return o}},{key:"dispatchEvent",value:function(t,e){t.dispatchEvent(e),this.mapTags(t,!1,t=>{t.dispatchEvent(e)})}}],(n=null)&&r(e.prototype,n),i&&r(e,i),Object.defineProperty(e,"prototype",{writable:!1}),t}();e.Dom=n}()}),require.register("curvature/base/Mixin.js",function(e,r,n){r=t(r,{},"curvature"),function(){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Mixin=void 0;var t=r("./Bindable");function n(t){"@babel/helpers - typeof";return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function i(t,e){return(i=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function o(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=c(t);if(e){var i=c(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return a(this,r)}}function a(t,e){if(e&&("object"===n(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return s(t)}function s(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function c(t){return(c=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function l(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function u(t,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,(o=i.key,void 0,"symbol"===n(a=function(t,e){if("object"!==n(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var i=r.call(t,e||"default");if("object"!==n(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(o,"string"))?a:String(a)),i)}var o,a}function f(t,e,r){return e&&u(t.prototype,e),r&&u(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}var p=Symbol("constructor"),h=(Symbol("mixinList"),function(){function e(){l(this,e)}return f(e,null,[{key:"from",value:function(t,...r){return function(c){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&i(t,e)}(p,t);var u=o(p);function p(...i){var o;l(this,p);var c=t.constructor?o=u.call(this,...i):null;for(var f of r)switch(f[e.Constructor]&&f[e.Constructor].apply(s(o)),n(f)){case"function":e.mixClass(f,p);break;case"object":e.mixObject(f,s(o))}return a(o,c)}return f(p)}()}},{key:"make",value:function(...t){var r=t.pop();return e.to(r,...t)}},{key:"to",value:function(t,...e){var r={};e.map(e=>{switch(n(e)){case"object":Object.assign(r,Object.getOwnPropertyDescriptors(e));break;case"function":Object.assign(r,Object.getOwnPropertyDescriptors(e.prototype))}delete r.constructor,Object.defineProperties(t.prototype,r)})}},{key:"with",value:function(...t){return this.from(function(){return f(function t(){l(this,t)})}(),...t)}},{key:"mixObject",value:function(t,e){for(var r of Object.getOwnPropertyNames(t))"function"!=typeof t[r]?e[r]=t[r]:e[r]=t[r].bind(e);for(var n of Object.getOwnPropertySymbols(t))"function"!=typeof t[n]?e[n]=t[n]:e[n]=t[n].bind(e)}},{key:"mixClass",value:function(t,e){for(var r of Object.getOwnPropertyNames(t.prototype))if(!["name","prototype","length"].includes(r)){var n=Object.getOwnPropertyDescriptor(e,r);n&&!n.writable||("function"==typeof t[r]?e.prototype[r]=t.prototype[r].bind(e.prototype):e.prototype[r]=t.prototype[r])}for(var i of Object.getOwnPropertySymbols(t.prototype))"function"==typeof t[i]?e.prototype[i]=t.prototype[i].bind(e.prototype):e.prototype[i]=t.prototype[i];var o=function(){if(["name","prototype","length"].includes(a))return"continue";var r=Object.getOwnPropertyDescriptor(e,a);if(r&&!r.writable)return"continue";if("function"!=typeof t[a])return e[a]=t[a],"continue";var n=e[a]||!1,i=t[a].bind(e);e[a]=((...t)=>(n&&n(...t),i(...t)))};for(var a of Object.getOwnPropertyNames(t))o();var s=function(){if("function"!=typeof t[c])return e.prototype[c]=t[c],"continue";var r=e[c]||!1,n=t[c].bind(e);e[c]=((...t)=>(r&&r(...t),n(...t)))};for(var c of Object.getOwnPropertySymbols(t))s()}},{key:"mix",value:function(e){for(var r={},n={},i=t.Bindable.makeBindable(e),o=function(t){var e=Object.getOwnPropertyNames(t.prototype),o=Object.getOwnPropertyNames(t),a=/^(before|after)__(.+)/,s=function(e){var n=e.match(a);if(n){switch(n[1]){case"before":i.___before((r,i,o,a,s)=>{if(i===n[2])return t[e].bind(a)(...s)});break;case"after":i.___after((r,i,o,a,s)=>{if(i===n[2])return t[e].bind(a)(...s)})}return"continue"}return r[e]?"continue":"function"!=typeof t[e]?"continue":void(r[e]=t[e])};for(var c of o)s(c);var l=function(e){var r=e.match(a);if(r){switch(r[1]){case"before":i.___before((n,i,o,a,s)=>{if(i===r[2])return t.prototype[e].bind(a)(...s)});break;case"after":i.___after((n,i,o,a,s)=>{if(i===r[2])return t.prototype[e].bind(a)(...s)})}return"continue"}return n[e]?"continue":"function"!=typeof t.prototype[e]?"continue":void(n[e]=t.prototype[e])};for(var u of e)l(u)},a=this;a&&a.prototype;a=Object.getPrototypeOf(a))o(a);for(var s in r)e[s]=r[s].bind(e);var c=function(t){e.prototype[t]=function(...e){return n[t].apply(this,e)}};for(var l in n)c(l);return i}}]),e}());e.Mixin=h,h.Constructor=p}()}),require.register("curvature/base/Pool.js",function(e,r,n){r=t(r,{},"curvature"),function(){"use strict";function t(e){"@babel/helpers - typeof";return(t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(e)}function r(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,i(n.key),n)}}function n(t,e,r){return(e=i(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function i(e){var r=function(e,r){if("object"!==t(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,r||"default");if("object"!==t(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===r?String:Number)(e)}(e,"string");return"symbol"===t(r)?r:String(r)}Object.defineProperty(e,"__esModule",{value:!0}),e.Pool=void 0;var o=function(){function t({max:e,init:r}){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),n(this,"backlog",[]),n(this,"running",new Set),n(this,"max",1),n(this,"init",t=>new Promise(t)),this.init=r||this.init,this.max=e||this.max}var e,i,o;return e=t,(i=[{key:"add",value:function(t){var e=()=>{if(this.running.delete(t),this.backlog.length){var r=this.backlog.shift();this.init(r).finally(e),this.running.add(r)}};this.running.size<this.max?(this.init(t).finally(e),this.running.add(t)):this.backlog.push(t)}}])&&r(e.prototype,i),o&&r(e,o),Object.defineProperty(e,"prototype",{writable:!1}),t}();e.Pool=o}()}),require.register("curvature/base/Router.js",function(e,r,n){r=t(r,{},"curvature"),function(){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Router=void 0;var t,n=r("./View"),i=(r("./Cache"),r("./Config")),o=r("./Routes");function a(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,i,o,a,s=[],c=!0,l=!1;try{if(o=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=o.call(r)).done)&&(s.push(n.value),s.length!==e);c=!0);}catch(t){l=!0,i=t}finally{try{if(!c&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(l)throw i}}return s}}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return s(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return s(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function s(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function c(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(i=n.key,void 0,"symbol"===l(o=function(t,e){if("object"!==l(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==l(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(i,"string"))?o:String(o)),n)}var i,o}function l(t){"@babel/helpers - typeof";return(l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var u=Symbol("NotFound"),f=Symbol("Internal"),p="object"===("undefined"==typeof globalThis?"undefined":l(globalThis))?globalThis:"object"===("undefined"==typeof window?"undefined":l(window))?window:"object"===("undefined"==typeof self?"undefined":l(self))?self:void 0;p.CustomEvent=null!==(t=p.CustomEvent)&&void 0!==t?t:p.Event;var h=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}var e,r,s;return e=t,s=[{key:"wait",value:function(t,e="DOMContentLoaded",r=document){r.addEventListener(e,()=>{this.listen(t)})}},{key:"listen",value:function(t,e=!1){this.listener=t||this.listener,this.routes=e||t.routes,Object.assign(this.query,this.queryOver({}));var r=e=>{e.preventDefault(),e.state&&"routedId"in e.state?(e.state.routedId<=this.routeCount?(this.history.splice(e.state.routedId),this.routeCount=e.state.routedId):e.state.routedId>this.routeCount&&(this.history.push(e.state.prev),this.routeCount=e.state.routedId),this.state=e.state):null!==this.prevPath&&this.prevPath!==location.pathname&&this.history.push(this.prevPath),this.isOriginLimited(location)?this.match(this.nextPath,t):this.match(location.pathname,t)};window.addEventListener("cvUrlChanged",r),window.addEventListener("popstate",r);var n=!this.isOriginLimited(location)&&location.pathname+location.search;!this.isOriginLimited(location)&&location.hash&&(n+=location.hash);var i={routedId:this.routeCount,url:location.pathname,prev:this.prevPath};this.isOriginLimited(location)||history.replaceState(i,null,location.pathname),this.go(!1!==n?n:"/")}},{key:"go",value:function(t,e=!1){var r=i.Config.get("title");r&&(document.title=r);var n={routedId:this.routeCount,prev:this.prevPath,url:location.pathname};-1===e?this.match(t,this.listener,!0):this.isOriginLimited(location)?this.nextPath=t:2===e&&location.pathname!==t?history.replaceState(n,null,t):location.pathname!==t&&history.pushState(n,null,t),(!e||e<0)&&(!1===e&&(this.path=null),e||("#"===t.substring(0,1)?window.dispatchEvent(new HashChangeEvent("hashchange")):window.dispatchEvent(new CustomEvent("cvUrlChanged")))),this.prevPath=t}},{key:"processRoute",value:function(t,e,r){return"function"==typeof t[e]?t[e].prototype instanceof n.View?new t[e](r):t[e](r):t[e]}},{key:"handleError",value:function(t,e,r,n,i,o,a,s){"undefined"!=typeof document&&document.dispatchEvent(new CustomEvent("cvRouteError",{detail:{error:t,path:o,prev:a,view:i,routes:e,selected:r}}));var c=p.devMode?"Unexpected error: "+String(t):"Unexpected error.";e[f]&&(n[f]=t,c=this.processRoute(e,f,n)),this.update(i,o,c,e,r,n,s)}},{key:"match",value:function(t,e,r=!1){var n=null,i=!1;if(!0===r&&(i=r),r&&"object"===l(r)&&(i=r.forceRefresh,n=r.event),"undefined"==typeof document||this.path!==t||i){var s="http://example.com";"undefined"!=typeof document&&(s=this.isOriginLimited(location)?s:location.origin,this.queryString=location.search);var c=new URL(t,s);t=this.path=c.pathname,"undefined"==typeof document&&(this.queryString=c.search);var f=this.prevPath,p=e&&e.args?e.args.content:null,h=this.routes||e&&e.routes||o.Routes.dump(),g=new URLSearchParams(this.queryString);for(var d in n&&n.request&&(this.request=n.request),Object.keys(this.query))delete this.query[d];for(var y of g){var b=a(y,2),v=b[0],m=b[1];this.query[v]=m}var w={},S=!1,O="";for(var j in"/"===t.substring(0,1)&&(t=t.substring(1)),t=t.split("/"),this.query)w[j]=this.query[j];t:for(var x in h){var P=x.split("/");if(!(P.length<t.length&&"*"!==P[P.length-1])){for(var k in P)if("%"==P[k].substr(0,1)){var _=null,R=/^%(\w+)\??/.exec(P[k]);if(R&&R[1]&&(_=R[1]),!_)throw new Error("".concat(P[k],' is not a valid argument segment in route "').concat(x,'"'));if(t[k])w[_]=t[k];else{if("?"!=P[k].substr(P[k].length-1,1))continue t;w[_]=""}}else if("*"!==P[k]&&t[k]!==P[k])continue t;S=x,O=h[x],"*"===P[P.length-1]&&(w.pathparts=t.slice(P.length-1));break}}var M=new CustomEvent("cvRouteStart",{cancelable:!0,detail:{path:t,prev:f,root:e,selected:S,routes:h}});if("undefined"==typeof document||document.dispatchEvent(M)){if(!i&&e&&p&&O instanceof Object&&p instanceof O&&!(O instanceof Promise)&&p.update(w))return e.args.content=p,!0;S in h||(h[S]=h[u]);try{return!1===(O=this.processRoute(h,S,w))&&(O=this.processRoute(h,u,w)),"undefined"==typeof document?O instanceof Promise?O:Promise.resolve(O):O instanceof Promise?O.then(r=>this.update(e,t,r,h,S,w,i)).catch(r=>{this.handleError(r,h,S,w,e,t,f,i)}):this.update(e,t,O,h,S,w,i)}catch(r){this.handleError(r,h,S,w,e,t,f,i)}}}}},{key:"update",value:function(t,e,r,i,o,a,s){if(t){var c=this.prevPath,l=new CustomEvent("cvRoute",{cancelable:!0,detail:{result:r,path:e,prev:c,view:t,routes:i,selected:o}});!1!==r&&(t.args.content instanceof n.View&&(t.args.content.pause(!0),t.args.content.remove()),document.dispatchEvent(l)&&(t.args.content=r),r instanceof n.View&&(r.pause(!1),r.update(a,s)));var u=new CustomEvent("cvRouteEnd",{cancelable:!0,detail:{result:r,path:e,prev:c,view:t,routes:i,selected:o}});document.dispatchEvent(u)}}},{key:"isOriginLimited",value:function({origin:t}){return"null"===t||"file://"===t}},{key:"queryOver",value:function(t={}){var e=new URLSearchParams(location.search),r={},n={};for(var i of e)n[i[0]]=i[1];return delete(r=Object.assign(r,n,t)).api,r}},{key:"queryToString",value:function(t={},e=!1){var r=[],n=t;for(var i in e||(n=this.queryOver(t)),n)""!==n[i]&&r.push(i+"="+encodeURIComponent(n[i]));return r.join("&")}},{key:"setQuery",value:function(t,e,r){var n=this.queryOver();n[t]=e,void 0===e&&delete n[t];var i=this.queryToString(n,!0);this.go(location.pathname+(i?"?"+i:"?"),r)}}],(r=null)&&c(e.prototype,r),s&&c(e,s),Object.defineProperty(e,"prototype",{writable:!1}),t}();e.Router=h,Object.defineProperty(h,"query",{configurable:!1,enumerable:!1,writable:!1,value:{}}),Object.defineProperty(h,"history",{configurable:!1,enumerable:!1,writable:!1,value:[]}),Object.defineProperty(h,"routeCount",{configurable:!1,enumerable:!1,writable:!0,value:0}),Object.defineProperty(h,"prevPath",{configurable:!1,enumerable:!1,writable:!0,value:null}),Object.defineProperty(h,"queryString",{configurable:!1,enumerable:!1,writable:!0,value:null}),Object.defineProperty(h,"InternalError",{configurable:!1,enumerable:!1,writable:!1,value:f}),Object.defineProperty(h,"NotFoundError",{configurable:!1,enumerable:!1,writable:!1,value:u})}()}),require.register("curvature/base/Routes.js",function(e,r,n){r=t(r,{},"curvature"),function(){"use strict";function t(e){"@babel/helpers - typeof";return(t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(e)}function n(e,r){for(var n=0;n<r.length;n++){var i=r[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,(o=i.key,void 0,"symbol"===t(a=function(e,r){if("object"!==t(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,r||"default");if("object"!==t(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===r?String:Number)(e)}(o,"string"))?a:String(a)),i)}var o,a}Object.defineProperty(e,"__esModule",{value:!0}),e.Routes=void 0;var i={},o=r,a=!1,s=()=>{if(!a){try{Object.assign(i,o("Routes").Routes||{})}catch(t){!0===globalThis.devMode&&console.warn(t)}a=!0}},c=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}var e,r,i;return e=t,i=[{key:"get",value:function(t){return s(),this.routes[t]}},{key:"dump",value:function(){return s(),this.routes}}],(r=null)&&n(e.prototype,r),i&&n(e,i),Object.defineProperty(e,"prototype",{writable:!1}),t}();e.Routes=c,Object.defineProperty(c,"routes",{configurable:!1,enumerable:!1,writable:!1,value:i})}()}),require.register("curvature/base/RuleSet.js",function(e,r,n){r=t(r,{},"curvature"),function(){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.RuleSet=void 0;r("./Dom");var t=r("./Tag"),n=r("./View");function i(t){"@babel/helpers - typeof";return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function o(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,i,o,a,s=[],c=!0,l=!1;try{if(o=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=o.call(r)).done)&&(s.push(n.value),s.length!==e);c=!0);}catch(t){l=!0,i=t}finally{try{if(!c&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(l)throw i}}return s}}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return a(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return a(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function a(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function s(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(o=n.key,void 0,"symbol"===i(a=function(t,e){if("object"!==i(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==i(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(o,"string"))?a:String(a)),n)}var o,a}var c=function(){function e(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e)}var r,i,a;return r=e,a=[{key:"add",value:function(t,e){return this.globalRules=this.globalRules||{},this.globalRules[t]=this.globalRules[t]||[],this.globalRules[t].push(e),this}},{key:"apply",value:function(t=document,e=null){for(var r in this.globalRules)for(var n in this.globalRules[r]){var i=this.globalRules[r][n],o=this.wrap(t,i,e),a=t.querySelectorAll(r);for(var s of a)o(s)}}},{key:"wait",value:function(t="DOMContentLoaded",e=document){var r=((t,e)=>()=>(e.removeEventListener(t,r),this.apply()))(t,e);e.addEventListener(t,r)}},{key:"wrap",value:function(e,r,i=null){var o=r;return(r instanceof n.View||r&&r.prototype&&r.prototype instanceof n.View)&&(o=(()=>r)),e=>{if(void 0===e.___cvApplied___&&Object.defineProperty(e,"___cvApplied___",{enumerable:!1,writable:!1,value:new WeakSet}),!e.___cvApplied___.has(r)){var a,s;i&&(a=s=i,i.viewList&&(s=i.viewList.parent));var c=new t.Tag(e,s,null,void 0,a),l=c.element.parentNode,u=c.element.nextSibling,f=o(c);if(!1!==f&&e.___cvApplied___.add(r),f instanceof HTMLElement&&(f=new t.Tag(f)),f instanceof t.Tag){if(!f.element.contains(c.element)){for(;c.element.firstChild;)f.element.appendChild(c.element.firstChild);c.remove()}u?l.insertBefore(f.element,u):l.appendChild(f.element)}f&&f.prototype&&f.prototype instanceof n.View&&(f=new f({},i)),f instanceof n.View&&(i&&(i.cleanup.push(()=>f.remove()),i.cleanup.push(i.args.bindTo((t,e,r)=>{r[e]=t,f.args[e]=t})),i.cleanup.push(f.args.bindTo((t,e,r,n)=>{r[e]=t,i.args[e]=t}))),c.clear(),f.render(c.element))}}}}],(i=[{key:"add",value:function(t,e){return this.rules=this.rules||{},this.rules[t]=this.rules[t]||[],this.rules[t].push(e),this}},{key:"apply",value:function(t=document,r=null){for(var n in e.apply(t,r),this.rules)for(var i in this.rules[n]){var o=this.rules[n][i],a=e.wrap(t,o,r),s=t.querySelectorAll(n);for(var c of s)a(c)}}},{key:"purge",value:function(){if(this.rules)for(var t of Object.entries(this.rules)){var e=o(t,2),r=e[0];e[1];if(this.rules[r])for(var n in this.rules[r])delete this.rules[r][n]}}}])&&s(r.prototype,i),a&&s(r,a),Object.defineProperty(r,"prototype",{writable:!1}),e}();e.RuleSet=c}()}),require.register("curvature/base/SetMap.js",function(e,r,n){r=t(r,{},"curvature"),function(){"use strict";function t(e){"@babel/helpers - typeof";return(t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(e)}function r(t,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,n(i.key),i)}}function n(e){var r=function(e,r){if("object"!==t(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,r||"default");if("object"!==t(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===r?String:Number)(e)}(e,"string");return"symbol"===t(r)?r:String(r)}Object.defineProperty(e,"__esModule",{value:!0}),e.SetMap=void 0;var i=function(){function t(){var e,r,i;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),e=this,r="_map",i=new Map,(r=n(r))in e?Object.defineProperty(e,r,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[r]=i}var e,i,o;return e=t,(i=[{key:"has",value:function(t){return this._map.has(t)}},{key:"get",value:function(t){return this._map.get(t)}},{key:"getOne",value:function(t){var e=this.get(t);for(var r of e)return r}},{key:"add",value:function(t,e){var r=this._map.get(t);return r||this._map.set(t,r=new Set),r.add(e)}},{key:"remove",value:function(t,e){var r=this._map.get(t);if(r){var n=r.delete(e);return r.size||this._map.delete(t),n}}},{key:"values",value:function(){return new Set(...[...this._map.values()].map(t=>[...t.values()]))}}])&&r(e.prototype,i),o&&r(e,o),Object.defineProperty(e,"prototype",{writable:!1}),t}();e.SetMap=i}()}),require.register("curvature/base/Tag.js",function(e,r,n){r=t(r,{},"curvature"),function(){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Tag=void 0;var t=r("./Bindable");function n(t){"@babel/helpers - typeof";return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function i(t,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,(o=i.key,void 0,"symbol"===n(a=function(t,e){if("object"!==n(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var i=r.call(t,e||"default");if("object"!==n(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(o,"string"))?a:String(a)),i)}var o,a}var o=Symbol("CurrentStyle"),a=function(t){if(this.node)for(var e in t){var r=String(t[e]);this[o].has(e)&&this[o].get(e)===t[e]||("-"===e[0]?this.node.style.setProperty(e,r):this.node.style[e]=r,void 0!==t[e]?this[o].set(e,t[e]):this[o].delete(e))}},s=function(t){return"function"==typeof this[t]?this[t]:this.node&&"function"==typeof this.node[t]?(...e)=>this.node[t](...e):"style"===t?this.proxy.style:this.node&&t in this.node?this.node[t]:this[t]},c=function(){function e(r,n,i,c,l){if(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),"string"==typeof r){var u=document.createRange().createContextualFragment(r);r=u.firstChild}this.element=t.Bindable.makeBindable(r),this.node=this.element,this.parent=n,this.direct=l,this.ref=i,this.index=c,this.cleanup=[],this[t.Bindable.OnAllGet]=s.bind(this),this[o]=new Map;var f=t.Bindable.make(a.bind(this));return Object.defineProperty(this,"style",{value:f}),this.proxy=t.Bindable.make(this),this.proxy.style.bindTo((t,e,r,n)=>{this[o].has(e)&&this[o].get(e)===t||(this.node.style[e]=t,n||void 0===t?this[o].delete(e):this[o].set(e,t))}),this.proxy.bindTo((t,e)=>{if("index"!==e)return e in r&&r[e]!==t&&(r[e]=t),!1}),this.proxy}var r,n,c;return r=e,(n=[{key:"attr",value:function(t){for(var e in t)void 0===t[e]?this.node.removeAttribute(e):null===t[e]?this.node.setAttribute(e,""):this.node.setAttribute(e,t[e]);return this}},{key:"remove",value:function(){var e;for(this.node&&this.node.remove(),t.Bindable.clearBindings(this);e=this.cleanup.shift();)e();if(this.clear(),this.node){var r=new Event("cvDomDetached");this.node.dispatchEvent(r),this.node=this.element=this.ref=this.parent=void 0}}},{key:"clear",value:function(){if(this.node)for(var t=new Event("cvDomDetached");this.node.firstChild;)this.node.firstChild.dispatchEvent(t),this.node.removeChild(this.node.firstChild)}},{key:"pause",value:function(t=!0){}},{key:"listen",value:function(t,e,r){var n=this.node;n.addEventListener(t,e,r);var i=()=>{n.removeEventListener(t,e,r)},o=()=>{i(),i=(()=>console.warn("Already removed!"))};return this.parent.onRemove(()=>o()),o}}])&&i(r.prototype,n),c&&i(r,c),Object.defineProperty(r,"prototype",{writable:!1}),e}();e.Tag=c}()}),require.register("curvature/base/Uuid.js",function(e,r,n){r=t(r,{},"curvature"),function(){"use strict";var t;function r(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,i(n.key),n)}}function n(t,e,r){return(e=i(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function i(t){var e=function(t,e){if("object"!==o(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==o(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===o(e)?e:String(e)}function o(t){"@babel/helpers - typeof";return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(e,"__esModule",{value:!0}),e.Uuid=void 0;var a=("object"===("undefined"==typeof globalThis?"undefined":o(globalThis))?globalThis:"object"===("undefined"==typeof window?"undefined":o(window))?window:"object"===("undefined"==typeof self?"undefined":o(self))?self:void 0).crypto;t=Symbol.toPrimitive;var s=function(){function e(t=null,r=4){if(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),n(this,"uuid",null),n(this,"version",4),t){if("string"!=typeof t&&!(t instanceof e)||!t.match(/[0-9A-Fa-f]{8}(-[0-9A-Fa-f]{4}){3}-[0-9A-Fa-f]{12}/))throw new Error('Invalid input for Uuid: "'.concat(t,'"'));this.version=r,this.uuid=t}else if(a&&"function"==typeof a.randomUUID)this.uuid=a.randomUUID();else{var i=a&&"function"==typeof a.randomUUID?()=>a.getRandomValues(new Uint8Array(1))[0]:()=>Math.trunc(256*Math.random());this.uuid=([1e7]+-1e3+-4e3+-8e3+-1e11).replace(/[018]/g,t=>(t^i()&15>>t/4).toString(16))}Object.freeze(this)}var i,o,s;return i=e,(o=[{key:t,value:function(){return this.toString()}},{key:"toString",value:function(){return this.uuid}},{key:"toJson",value:function(){return{version:this.version,uuid:this.uuid}}}])&&r(i.prototype,o),s&&r(i,s),Object.defineProperty(i,"prototype",{writable:!1}),e}();e.Uuid=s}()}),require.register("curvature/base/View.js",function(e,r,n){r=t(r,{},"curvature"),function(){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.View=void 0;var t=r("./Bindable"),n=r("./ViewList"),i=r("./Router"),o=r("./Uuid"),a=r("./Dom"),s=r("./Tag"),c=r("./Bag"),l=r("./RuleSet"),u=r("./Mixin"),f=r("../mixin/EventTargetMixin");function p(t){"@babel/helpers - typeof";return(p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function h(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,i,o,a,s=[],c=!0,l=!1;try{if(o=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=o.call(r)).done)&&(s.push(n.value),s.length!==e);c=!0);}catch(t){l=!0,i=t}finally{try{if(!c&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(l)throw i}}return s}}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return g(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return g(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function g(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function d(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(i=n.key,void 0,"symbol"===p(o=function(t,e){if("object"!==p(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==p(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(i,"string"))?o:String(o)),n)}var i,o}function y(t,e){return(y=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function b(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=m(t);if(e){var i=m(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===p(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return v(t)}(this,r)}}function v(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function m(t){return(m=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var w=Symbol("dontParse"),S=Symbol("expandBind"),O=Symbol("uuid"),j=function(e){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&y(t,e)}(P,u.Mixin.with(f.EventTargetMixin));var g,m,j,x=b(P);function P(e={},r=null){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,P),(n=x.call(this,e,r))[f.EventTargetMixin.Parent]=r,Object.defineProperty(v(n),"args",{value:t.Bindable.make(e)}),Object.defineProperty(v(n),O,{value:n.constructor.uuid()}),Object.defineProperty(v(n),"nodesAttached",{value:new c.Bag((t,e,r)=>{})}),Object.defineProperty(v(n),"nodesDetached",{value:new c.Bag((t,e,r)=>{})}),Object.defineProperty(v(n),"_onRemove",{value:new c.Bag((t,e,r)=>{})}),Object.defineProperty(v(n),"cleanup",{value:[]}),Object.defineProperty(v(n),"parent",{value:r,writable:!0}),Object.defineProperty(v(n),"views",{value:new Map}),Object.defineProperty(v(n),"viewLists",{value:new Map}),Object.defineProperty(v(n),"withViews",{value:new Map}),Object.defineProperty(v(n),"tags",{value:t.Bindable.make({})}),Object.defineProperty(v(n),"nodes",{value:t.Bindable.make([])}),Object.defineProperty(v(n),"timeouts",{value:new Map}),Object.defineProperty(v(n),"intervals",{value:new Map}),Object.defineProperty(v(n),"frames",{value:[]}),Object.defineProperty(v(n),"ruleSet",{value:new l.RuleSet}),Object.defineProperty(v(n),"preRuleSet",{value:new l.RuleSet}),Object.defineProperty(v(n),"subBindings",{value:{}}),Object.defineProperty(v(n),"templates",{value:{}}),Object.defineProperty(v(n),"postMapping",{value:new Set}),Object.defineProperty(v(n),"eventCleanup",{value:[]}),Object.defineProperty(v(n),"unpauseCallbacks",{value:new Map}),Object.defineProperty(v(n),"interpolateRegex",{value:/(\[\[((?:\$+)?[\w\.\|-]+)\]\])/g}),Object.defineProperty(v(n),"rendered",{value:new Promise((t,e)=>Object.defineProperty(v(n),"renderComplete",{value:t}))}),n.onRemove(()=>{n[f.EventTargetMixin.Parent]&&(n[f.EventTargetMixin.Parent]=null)}),n.controller=v(n),n.template="",n.firstNode=null,n.lastNode=null,n.viewList=null,n.mainView=null,n.preserve=!1,n.removed=!1,n.loaded=Promise.resolve(v(n)),n}return g=P,m=[{key:"_id",get:function(){return this[O]}},{key:"onFrame",value:function(t){var e=!1,r=()=>{e=!0},n=r=>{this.removed||e||(this.paused||t(Date.now()),requestAnimationFrame(n))};return requestAnimationFrame(()=>n(Date.now())),this.frames.push(r),r}},{key:"onNextFrame",value:function(t){return requestAnimationFrame(()=>t(Date.now()))}},{key:"onIdle",value:function(t){return requestIdleCallback(()=>t(Date.now()))}},{key:"onTimeout",value:function(t,e){var r={timeout:null,callback:null,time:t,fired:!1,created:(new Date).getTime(),paused:!1},n=()=>{e(),r.fired=!0,this.timeouts.delete(r.timeout)},i=setTimeout(n,t);return r.callback=n,r.timeout=i,this.timeouts.set(r.timeout,r),i}},{key:"clearTimeout",value:function(t){function e(e){return t.apply(this,arguments)}return e.toString=function(){return t.toString()},e}(function(t){if(this.timeouts.has(t)){var e=this.timeouts.get(t);clearTimeout(e.timeout),this.timeouts.delete(e.timeout)}})},{key:"onInterval",value:function(t,e){var r=setInterval(e,t);return this.intervals.set(r,{timeout:r,callback:e,time:t,paused:!1}),r}},{key:"clearInterval",value:function(t){if(this.intervals.has(t)){var e=this.intervals.get(t);clearTimeout(e.timeout),this.intervals.delete(e.timeout)}}},{key:"pause",value:function(t){if(void 0===t&&(this.paused=!this.paused),this.paused=t,this.paused){for(var e of this.timeouts){var r=h(e,2),n=(r[0],r[1]);n.fired?this.timeouts.delete(n.timeout):(clearTimeout(n.timeout),n.paused=!0,n.time=Math.max(0,n.time-(Date.now()-n.created)))}for(var i of this.intervals){var o=h(i,2),a=(o[0],o[1]);clearInterval(a.timeout),a.paused=!0}}else{for(var s of this.timeouts){var c=h(s,2),l=(c[0],c[1]);l.paused&&(l.fired?this.timeouts.delete(l.timeout):(l.timeout=setTimeout(l.callback,l.time),l.paused=!1))}for(var u of this.intervals){var f=h(u,2),p=(f[0],f[1]);p.paused&&(p.timeout=setInterval(p.callback,p.time),p.paused=!1)}for(var g of this.unpauseCallbacks){(0,h(g,2)[1])()}this.unpauseCallbacks.clear()}for(var d of this.viewLists){var y=h(d,2);y[0];y[1].pause(!!t)}for(var b in this.tags)if(Array.isArray(this.tags[b]))for(var v in this.tags[b])this.tags[b][v].pause(!!t);else this.tags[b].pause(!!t)}},{key:"render",value:function(t=null,e=null,r=null){var n=globalThis.window.document;if(t instanceof P&&(t=t.firstNode.parentNode),e instanceof P&&(e=e.firstNode),this.firstNode)return this.reRender(t,e,r);this.dispatchEvent(new CustomEvent("render"));var i,o="object"===p(this.template)&&"function"==typeof this.template.cloneNode,a=o||P.templates.has(this.template);if(i=a?o?this.template.cloneNode(!0):P.templates.get(this.template).cloneNode(!0):n.createRange().createContextualFragment(this.template),a||o||P.templates.set(this.template,i.cloneNode(!0)),this.mainView||this.preRuleSet.apply(i,this),this.mapTags(i),this.mainView||this.ruleSet.apply(i,this),!0===globalThis.devMode?(this.firstNode=n.createComment("Template ".concat(this._id," Start")),this.lastNode=n.createComment("Template ".concat(this._id," End"))):(this.firstNode=n.createTextNode(""),this.lastNode=n.createTextNode("")),this.nodes.push(this.firstNode,...Array.from(i.childNodes),this.lastNode),this.postRender(t),this.dispatchEvent(new CustomEvent("rendered")),this.dispatchAttach()){if(t){e?(t.insertBefore(this.firstNode,e),t.insertBefore(this.lastNode,e)):(t.appendChild(this.firstNode),t.appendChild(this.lastNode)),t.insertBefore(i,this.lastNode);var s=t.getRootNode();if(s.isConnected)this.attached(s,t),this.dispatchAttached(s,t,r);else if(r){var c=e=>{var n=t.getRootNode();this.attached(n,t),this.dispatchAttached(n,t,r),r.removeEventListener("attached",c)};r.addEventListener("attached",c)}}return this.renderComplete(this.nodes),this.nodes}}},{key:"dispatchAttach",value:function(){var t=globalThis.window.CustomEvent;return this.dispatchEvent(new t("attach",{cancelable:!0,target:this}))}},{key:"dispatchAttached",value:function(t,e,r){var n=globalThis.window.CustomEvent;for(var i of(this.dispatchEvent(new n("attached",{detail:{view:r||this,node:e,root:t,mainView:this}})),this.dispatchDomAttached(r),this.nodesAttached.items()))i(t,e)}},{key:"dispatchDomAttached",value:function(t){var e=globalThis.window,r=e.Node,n=e.CustomEvent;this.nodes.filter(t=>t.nodeType!==r.COMMENT_NODE).forEach(e=>{e.matches&&(e.dispatchEvent(new n("cvDomAttached",{target:e,detail:{view:t||this,mainView:this}})),a.Dom.mapTags(e,!1,(e,r)=>{e.matches&&e.dispatchEvent(new n("cvDomAttached",{target:e,detail:{view:t||this,mainView:this}}))}))})}},{key:"reRender",value:function(t,e,r){var n=globalThis.window.CustomEvent;if(this.dispatchEvent(new n("reRender"),{cancelable:!0,target:this,view:r})){var i=new DocumentFragment;if(this.firstNode.isConnected){var o=this.nodesDetached.items();for(var a in o)o[a]()}if(i.append(...this.nodes),t){e?(t.insertBefore(this.firstNode,e),t.insertBefore(this.lastNode,e)):(t.appendChild(this.firstNode),t.appendChild(this.lastNode)),t.insertBefore(i,this.lastNode),this.dispatchEvent(new n("reRendered"),{cancelable:!0,target:this,view:r});var s=t.getRootNode();s.isConnected&&(this.attached(s,t),this.dispatchAttached(s,t))}return this.nodes}}},{key:"mapTags",value:function(t){a.Dom.mapTags(t,!1,(t,e)=>{t[w]||(t=t.matches?(t=(t=(t=(t=(t=(t=(t=(t=(t=(t=(t=(t=(t=this.mapInterpolatableTag(t)).matches("[cv-template]")&&this.mapTemplateTag(t)||t).matches("[cv-slot]")&&this.mapSlotTag(t)||t).matches("[cv-prerender]")&&this.mapPrendererTag(t)||t).matches("[cv-link]")&&this.mapLinkTag(t)||t).matches("[cv-attr]")&&this.mapAttrTag(t)||t).matches("[cv-expand]")&&this.mapExpandableTag(t)||t).matches("[cv-ref]")&&this.mapRefTag(t)||t).matches("[cv-on]")&&this.mapOnTag(t)||t).matches("[cv-each]")&&this.mapEachTag(t)||t).matches("[cv-bind]")&&this.mapBindTag(t)||t).matches("[cv-with]")&&this.mapWithTag(t)||t).matches("[cv-if]")&&this.mapIfTag(t)||t).matches("[cv-view]")&&this.mapViewTag(t)||t:this.mapInterpolatableTag(t))!==e.currentNode&&(e.currentNode=t)}),this.postMapping.forEach(t=>t())}},{key:"mapExpandableTag",value:function(e){var r=e[S];r&&(r(),e[S]=!1);var n=h(t.Bindable.resolve(this.args,e.getAttribute("cv-expand"),!0),2),i=n[0],o=n[1];return e.removeAttribute("cv-expand"),i[o]||(i[o]={}),i[o]=t.Bindable.make(i[o]),this.onRemove(e[S]=i[o].bindTo((t,r,n,i,o)=>{i||void 0===t?e.removeAttribute(r,t):null!==t?e.setAttribute(r,t):e.setAttribute(r,"")})),e}},{key:"mapAttrTag",value:function(t){var e=this.compileAttrTag(t)(this);return t.replaceWith(e),e}},{key:"compileAttrTag",value:function(e){var r=e.getAttribute("cv-attr").split(/[,;]/).map(t=>t.split(":"));return e.removeAttribute("cv-attr"),n=>{var i=e.cloneNode(!0),o=function(){var e=r[a][1]||r[a][0],o=h(t.Bindable.resolve(n.args,e,!0),2),s=o[0],c=o[1],l=r[a][0];n.onRemove(s.bindTo(c,(t,e,r,n)=>{n||void 0===t?i.removeAttribute(l,t):null!==t?i.setAttribute(l,t):i.setAttribute(l,"")}))};for(var a in r)o();return i}}},{key:"mapInterpolatableTag",value:function(e){var r=this,n=this.interpolateRegex,i=globalThis.window,o=i.Node,a=i.document;if(e.nodeType===o.TEXT_NODE){var c=e.nodeValue;if(!this.interpolatable(c))return e;for(var l,u=0,g=function(){var n=l[2],i=!1,g=!1,d=n.split("|"),y=!1;if(d.length>1&&(y=r.stringTransformer(d.slice(1)),n=d[0]),"$$"===n.substr(0,2)&&(i=!0,g=!0,n=n.substr(2)),"$"===n.substr(0,1)&&(i=!0,n=n.substr(1)),"000"===n.substr(0,3))return expand=!0,n=n.substr(3),"continue";var b=c.substring(u,l.index);u=l.index+l[1].length;var v,m=a.createTextNode(b);m[w]=!0,e.parentNode.insertBefore(m,e),(v=i?a.createElement("div"):a.createTextNode(""))[w]=!0;var S=r.args,O=n;if(n.match(/\./)){var j=h(t.Bindable.resolve(r.args,n,!0),2);S=j[0],O=j[1]}if(e.parentNode.insertBefore(v,e),"object"!==p(S))return"break";var x=(S=t.Bindable.make(S)).bindTo(O,(t,n,a)=>{if(a[n]!==t&&(a[n]instanceof P||a[n]instanceof o||a[n]instanceof s.Tag)&&(a[n].preserve||a[n].remove()),v.nodeValue="",g&&!(t instanceof P)){var c,l=null!==(c=t)&&void 0!==c?c:"";(t=new P(r.args,r)).template=l}if(y&&(t=y(t)),t instanceof P){t[f.EventTargetMixin.Parent]=r,t.render(e.parentNode,v,r);var u=()=>{t.preserve||t.remove()};r.onRemove(u),t.onRemove(()=>r._onRemove.remove(u))}else t instanceof o?(e.parentNode.insertBefore(t,v),r.onRemove(()=>t.remove())):t instanceof s.Tag?t.node?(e.parentNode.insertBefore(t.node,v),r.onRemove(()=>t.remove())):t.remove():(t instanceof Object&&t.__toString instanceof Function&&(t=t.__toString()),i?v.innerHTML=t:v.nodeValue=t);v[w]=!0});r.onRemove(x)};l=n.exec(c);){var d=g();if("continue"!==d&&"break"===d)break}var y=c.substring(u),b=a.createTextNode(y);b[w]=!0,e.parentNode.insertBefore(b,e),e.nodeValue=""}else if(e.nodeType===o.ELEMENT_NODE)for(var v=function(){if(!r.interpolatable(e.attributes[m].value))return"continue";for(var i,o=0,a=e.attributes[m].value,s=e.attributes[m],c={},l=[];i=n.exec(a);)l.push(a.substring(o,i.index)),c[i[2]]||(c[i[2]]=[]),c[i[2]].push(l.length),l.push(i[1]),o=i.index+i[1].length;l.push(a.substring(o));var u=function(){var n=r.args,i=f,o=f.split("|"),a=!1,u=f;if(o.length>1&&(a=r.stringTransformer(o.slice(1)),i=o[0]),i.match(/\./)){var p=h(t.Bindable.resolve(r.args,i,!0),2);n=p[0],i=p[1]}c[u];r.onRemove(n.bindTo(i,(t,n,o,f)=>{for(var p in a&&(t=a(t)),c)for(var h in c[u])l[c[u][h]]=o[p],n===i&&(l[c[u][h]]=t);r.paused?r.unpauseCallbacks.set(s,()=>e.setAttribute(s.name,l.join(""))):e.setAttribute(s.name,l.join(""))}))};for(var f in c)u()},m=0;m<e.attributes.length;m++)v();return e}},{key:"mapRefTag",value:function(t){var e=h(t.getAttribute("cv-ref").split(":"),3),r=e[0],n=e[1],i=void 0===n?null:n,o=e[2],a=void 0===o?null:o,c=s.Tag;i&&(c=this.stringToClass(i)),t.removeAttribute("cv-ref"),Object.defineProperty(t,"___tag___",{enumerable:!1,writable:!0}),this.onRemove(()=>{t.___tag___=null,t.remove()});var l=this;this.viewList&&(l=this.viewList.parent);var u=new c(t,this,r,void 0,this);for(t.___tag___=u,this.tags[r]=u;l;){var f=this.args[a];if(void 0!==f?(l.tags[r]||(l.tags[r]=[]),l.tags[r][f]=u):l.tags[r]=u,!l.parent)break;l=l.parent}return t}},{key:"mapBindTag",value:function(e){var r=e.getAttribute("cv-bind"),n=this.args,i=r,o=null;if(r.match(/\./)){var c=h(t.Bindable.resolve(this.args,r,!0),3);n=c[0],i=c[1],o=c[2]}n!==this.args&&(this.subBindings[r]=this.subBindings[r]||[],this.onRemove(this.args.bindTo(o,()=>{for(;this.subBindings.length;)this.subBindings.shift()()})));var l=!1;"$"===i.substr(0,1)&&(i=i.substr(1),l=!0);var u=!1,p=n.bindTo(i,(t,r,n,i,o)=>{if((o instanceof P||o instanceof Node||o instanceof s.Tag)&&o!==t&&o.remove(),["INPUT","SELECT","TEXTAREA"].includes(e.tagName)){var c=e.getAttribute("type");if(c&&"checkbox"===c.toLowerCase())e.checked=!!t;else if(c&&"radio"===c.toLowerCase())e.checked=t==e.value;else if("file"!==c)if("SELECT"===e.tagName){var p=()=>{for(var r=0;r<e.options.length;r++){e.options[r].value==t&&(e.selectedIndex=r)}};p(),this.nodesAttached.add(p)}else e.value=null==t?"":t;u&&e.dispatchEvent(new CustomEvent("cvAutoChanged",{bubbles:!0})),u=!0}else if(t instanceof P){for(var h of e.childNodes)h.remove();t[f.EventTargetMixin.Parent]=this,t.render(e,null,this)}else if(t instanceof Node)e.insert(t);else if(t instanceof s.Tag)e.append(t.node);else if(l){if(e.innerHTML!==t){if(t=String(t),e.innerHTML===t.substring(0,e.innerHTML.length))e.innerHTML+=t.substring(e.innerHTML.length);else{for(var g of e.childNodes)g.remove();e.innerHTML=t}a.Dom.mapTags(e,!1,t=>t[w]=!0)}}else if(e.textContent!==t){for(var d of e.childNodes)d.remove();e.textContent=t}});n!==this.args&&this.subBindings[r].push(p),this.onRemove(p);var g=e.getAttribute("type"),d=e.getAttribute("multiple"),y=r=>{if(r.target===e)if(g&&"checkbox"===g.toLowerCase())e.checked?n[i]=r.target.getAttribute("value"):n[i]=!1;else if(r.target.matches("[contenteditable=true]"))n[i]=r.target.innerHTML;else if("file"===g&&d){var o=Array.from(r.target.files),a=n[i]||t.Bindable.onDeck(n,i);if(a&&o.length){var s=function(t){if(o[t]!==a[t])return o[t].toJSON=(()=>({name:file[t].name,size:file[t].size,type:file[t].type,date:file[t].lastModified})),a[t]=o[t],"break"};for(var c in o){if("break"===s(c))break}}else n[i]=o}else if("file"===g&&!d&&r.target.files.length){var l=r.target.files.item(0);l.toJSON=(()=>({name:l.name,size:l.size,type:l.type,date:l.lastModified})),n[i]=l}else n[i]=r.target.value};return"file"===g||"radio"===g?e.addEventListener("change",y):(e.addEventListener("input",y),e.addEventListener("change",y),e.addEventListener("value-changed",y)),this.onRemove(()=>{"file"===g||"radio"===g?e.removeEventListener("change",y):(e.removeEventListener("input",y),e.removeEventListener("change",y),e.removeEventListener("value-changed",y))}),e.removeAttribute("cv-bind"),e}},{key:"mapOnTag",value:function(t){return String(t.getAttribute("cv-on")).split(";").map(t=>t.split(":")).forEach(e=>{var r,n=(e=e.map(t=>t.trim())).length,i=String(e.shift()).trim(),o=String(e.shift()||i).trim(),a=String(e.shift()||"").trim(),s=[],c=/(\w+)(?:\(([$\w\s-'",]+)\))?/.exec(o);c&&(o=c[1].replace(/(^[\s\n]+|[\s\n]+$)/,""),c[2]&&(s=c[2].split(",").map(t=>t.trim()))),s.length||s.push("$event"),i&&1!==n||(i=o);for(var l=this,u=function(){var t=l.controller;return"function"==typeof t[o]?(r=((...e)=>{t[o](...e)}),"break"):"function"==typeof l[o]?(r=((...t)=>{l[o](...t)}),"break"):l.parent?void(l=l.parent):"break"};l;){if("break"===u())break}var f=e=>{var n=s.map(r=>{var n;return Number(r)==r?r:"event"===r||"$event"===r?e:"$view"===r?l:"$controller"===r?controller:"$tag"===r?t:"$parent"===r?this.parent:"$subview"===r?this:r in this.args?this.args[r]:(n=/^['"]([\w-]+?)["']$/.exec(r))?n[1]:void 0});if("function"!=typeof r)throw new Error("".concat(o," is not defined on View object.")+"\nTag:\n"+"".concat(t.outerHTML));r(...n)},p={};switch(a.includes("p")?p.passive=!0:a.includes("P")&&(p.passive=!1),a.includes("c")?p.capture=!0:a.includes("C")&&(p.capture=!1),a.includes("o")?p.once=!0:a.includes("O")&&(p.once=!1),i){case"_init":f();break;case"_attach":this.nodesAttached.add(f);break;case"_detach":this.nodesDetached.add(f);break;default:t.addEventListener(i,f,p),this.onRemove(()=>{t.removeEventListener(i,f,p)})}return[i,o,s]}),t.removeAttribute("cv-on"),t}},{key:"mapLinkTag",value:function(t){var e=t.getAttribute("cv-link");t.setAttribute("href",e);var r=r=>{r.preventDefault(),"http"!==e.substring(0,4)&&"//"!==e.substring(0,2)?i.Router.go(t.getAttribute("href")):globalThis.open(t.getAttribute("href",e))};return t.addEventListener("click",r),this.onRemove(((t,e)=>()=>{t.removeEventListener("click",e),t=void 0,e=void 0})(t,r)),t.removeAttribute("cv-link"),t}},{key:"mapPrendererTag",value:function(t){var e=t.getAttribute("cv-prerender"),r=globalThis.prerenderer||navigator.userAgent.match(/prerender/i);return t.removeAttribute("cv-prerender"),r&&(globalThis.prerenderer=globalThis.prerenderer||!0),("never"===e&&r||"only"===e&&!r)&&this.postMapping.add(()=>t.parentNode.removeChild(t)),t}},{key:"mapWithTag",value:function(e){var r=this,n=e.getAttribute("cv-with"),i=e.getAttribute("cv-carry"),o=e.getAttribute("cv-view");e.removeAttribute("cv-with"),e.removeAttribute("cv-carry"),e.removeAttribute("cv-view");var a=o?this.stringToClass(o):P,s=new DocumentFragment;[...e.childNodes].forEach(t=>s.appendChild(t));var c=[];i&&(c=i.split(",").map(t=>t.trim()));var l=this.args.bindTo(n,(n,i,o,l)=>{for(this.withViews.has(e)&&this.withViews.delete(e);e.firstChild;)e.removeChild(e.firstChild);var u=new a({},this);this.onRemove((t=>()=>{t.remove()})(u)),u.template=s;var f=function(){var t=r.args.bindTo(c[h],(t,e)=>{u.args[e]=t});u.onRemove(t),r.onRemove(()=>{t(),u.remove()})};for(var h in c)f();var g=function(){if("object"!==p(n))return"continue";var e=(n=t.Bindable.make(n)).bindTo(d,(t,e,r,n)=>{n?e in u.args&&delete u.args[e]:u.args[e]=t});u.args.bindTo(d,(t,e,r,i)=>{i?e in n&&delete n[e]:n[e]=t});r.onRemove(()=>{e(),n.isBound()||t.Bindable.clearBindings(n),u.remove()}),u.onRemove(()=>{e(),n.isBound()||t.Bindable.clearBindings(n)})};for(var d in n)g();u.render(e,null,this),this.withViews.set(e,u)});return this.onRemove(()=>{this.withViews.delete(e),l()}),e}},{key:"mapViewTag",value:function(t){var e=t.getAttribute("cv-view");t.removeAttribute("cv-view");var r=new DocumentFragment;[...t.childNodes].forEach(t=>r.appendChild(t));var n=e.split(":"),i=n.shift(),o=new(n.length?this.stringToClass(n[0]):P)(this.args,this);return this.views.set(t,o),this.views.set(i,o),this.onRemove(()=>{o.remove(),this.views.delete(t),this.views.delete(i)}),o.template=r,o.render(t,null,this),t}},{key:"mapEachTag",value:function(e){var r=e.getAttribute("cv-each"),i=e.getAttribute("cv-view");e.removeAttribute("cv-each"),e.removeAttribute("cv-view");var o=i?this.stringToClass(i):P,a=new DocumentFragment;[...e.childNodes].forEach(t=>a.appendChild(t));var s=h(r.split(":"),3),l=s[0],u=s[1],f=s[2],p=this.args,g=l;if(l.match(/\./)){var d=h(t.Bindable.resolve(this.args,l,!0),2);p=d[0],g=d[1]}var y=p.bindTo(g,(t,r,i,s,l)=>{t instanceof c.Bag&&(t=t.list),this.viewLists.has(e)&&this.viewLists.get(e).remove();var p=new n.ViewList(a,u,t,this,f,o),h=()=>p.remove();this.onRemove(h),p.onRemove(()=>this._onRemove.remove(h));var g=this.args.bindTo((t,e,r,n)=>{"_id"!==e&&(n?e in p.subArgs&&delete p.subArgs[e]:p.subArgs[e]=t)}),d=p.args.bindTo((t,e,r,n,i)=>{"_id"!==e&&"value"!==e&&"___"!==String(e).substring(0,3)&&(n?delete this.args[e]:e in this.args&&(this.args[e]=t))});for(p.onRemove(g),p.onRemove(d),this.onRemove(g),this.onRemove(d);e.firstChild;)e.removeChild(e.firstChild);this.viewLists.set(e,p),p.render(e,null,this)});return this.onRemove(y),e}},{key:"mapIfTag",value:function(e){var r=e,n=r.getAttribute("cv-view"),i=r.getAttribute("cv-if"),o=r.getAttribute("cv-is"),s=!1,l=!1;r.removeAttribute("cv-view"),r.removeAttribute("cv-if"),r.removeAttribute("cv-is");var u=n?this.stringToClass(n):P;"!"===i.substr(0,1)&&(i=i.substr(1),s=!0),"?"===i.substr(0,1)&&(i=i.substr(1),l=!0);var f=new DocumentFragment;[...r.childNodes].forEach(t=>f.appendChild(t));var p=this,g=new DocumentFragment,d=new u(this.args,p);d.tags.bindTo((t,e)=>this.tags[e]=t,{removeWith:this}),d.template=f;var y=p.args,b=i;if(i.match(/\./)){var v=h(t.Bindable.resolve(p.args,i,!0),2);y=v[0],b=v[1]}d.render(g,null,this);var m=y.bindTo(b,(t,r)=>{var n=t;l&&(t=null!==t&&void 0!==t),t instanceof c.Bag&&(t=t.list),Array.isArray(t)&&(t=!!t.length),null!==o&&(t=n==o),s&&(t=!t),t?(e.appendChild(g),[...g.childNodes].forEach(t=>a.Dom.mapTags(t,!1,(t,e)=>{t.matches&&t.dispatchEvent(new CustomEvent("cvDomAttached",{target:t,detail:{view:d||this,mainView:this}}))}))):(d.nodes.forEach(t=>g.appendChild(t)),a.Dom.mapTags(g,!1,(t,e)=>{t.matches&&new CustomEvent("cvDomDetached",{target:t,detail:{view:d||this,mainView:this}})}))},{children:Array.isArray(y[b])});p.onRemove(m);return p.onRemove(()=>{m(),p._onRemove.remove(m)}),this.onRemove(()=>{d.remove(),p!==this&&p.remove()}),e}},{key:"mapTemplateTag",value:function(t){var e=t.getAttribute("cv-template");t.removeAttribute("cv-template");var r=t.innerHTML;return P.templates.has(r)||P.templates.set(r,document.createRange().createContextualFragment(t.innerHTML)),this.templates[e]=P.templates.get(r),this.postMapping.add(()=>t.remove()),t}},{key:"mapSlotTag",value:function(t){var e=t.getAttribute("cv-slot"),r=this.templates[e];if(!r){for(var n=this;n&&!(r=n.templates[e]);)n=this.parent;if(!r)return void console.error("Template ".concat(e," not found."))}for(t.removeAttribute("cv-slot");t.firstChild;)t.firstChild.remove();return t.appendChild(r.cloneNode(!0)),t}},{key:"postRender",value:function(t){}},{key:"attached",value:function(t){}},{key:"interpolatable",value:function(t){return!!String(t).match(this.interpolateRegex)}},{key:"remove",value:function(t=!1){if(this.dispatchEvent(new CustomEvent("remove",{detail:{view:this},cancelable:!0}))){var e=()=>{for(var t in this.tags)Array.isArray(this.tags[t])?(this.tags[t]&&this.tags[t].forEach(t=>t.remove()),this.tags[t].splice(0)):(this.tags[t]&&this.tags[t].remove(),this.tags[t]=void 0);for(var e in this.nodes)this.nodes[e]&&this.nodes[e].dispatchEvent(new Event("cvDomDetached")),this.nodes[e]&&this.nodes[e].remove(),this.nodes[e]=void 0;this.nodes.splice(0),this.firstNode=this.lastNode=void 0};t?e():requestAnimationFrame(e);var r=this._onRemove.items();for(var n of r)n(),this._onRemove.remove(n);for(var i of this.cleanup)i&&i();for(var o of(this.cleanup.length=0,this.viewLists)){var a=h(o,2);a[0];a[1].remove()}for(var s of(this.viewLists.clear(),this.timeouts)){var c=h(s,2),l=(c[0],c[1]);clearTimeout(l.timeout),this.timeouts.delete(l.timeout)}for(var u of this.intervals)clearInterval(u);for(var f of(this.intervals.length=0,this.frames))f();this.frames.length=0,this.preRuleSet.purge(),this.ruleSet.purge(),this.removed=!0,this.dispatchEvent(new CustomEvent("removed",{detail:{view:this},cancelable:!0}))}}},{key:"findTag",value:function(t){for(var e in this.nodes){var r;if(this.nodes[e].querySelector){if(this.nodes[e].matches(t))return new s.Tag(this.nodes[e],this,void 0,void 0,this);if(r=this.nodes[e].querySelector(t))return new s.Tag(r,this,void 0,void 0,this)}}}},{key:"findTags",value:function(t){var e=this.nodes.filter(e=>e.matches&&e.matches(t)),r=this.nodes.filter(t=>t.querySelectorAll).map(e=>[...e.querySelectorAll(t)]).flat().map(t=>new s.Tag(t,this,void 0,void 0,this))||[];return e.concat(r)}},{key:"onRemove",value:function(t){t instanceof Event||this._onRemove.add(t)}},{key:"update",value:function(){}},{key:"beforeUpdate",value:function(t){}},{key:"afterUpdate",value:function(t){}},{key:"stringTransformer",value:function(t){return e=>{for(var r in t){for(var n=this,i=t[r];n&&!n[i];)n=n.parent;if(!n)return;e=n[t[r]](e)}return e}}},{key:"stringToClass",value:function(t){if(P.refClasses.has(t))return P.refClasses.get(t);var e=t.split("/"),n=e[e.length-1],i=r(t);return P.refClasses.set(t,i[n]),i[n]}},{key:"preventParsing",value:function(t){t[w]=!0}},{key:"toString",value:function(){return this.nodes.map(t=>t.outerHTML).join(" ")}},{key:"listen",value:function(t,e,r,n){if("string"==typeof t&&(n=r,r=e,e=t,t=this),t instanceof P)return this.listen(t.nodes,e,r,n);if(Array.isArray(t))return t.map(t=>this.listen(t,e,r,n));if(t instanceof s.Tag)return this.listen(t.element,e,r,n);t.addEventListener(e,r,n);var i=()=>t.removeEventListener(e,r,n),o=()=>{i(),i=(()=>{})};return this.onRemove(()=>o()),o}},{key:"detach",value:function(){for(var t in this.nodes)this.nodes[t].remove();return this.nodes}}],j=[{key:"from",value:function(t,e={},r=null){var n=new this(e,r);return n.template=t,n}},{key:"isView",value:function(){return P}},{key:"uuid",value:function(){return new o.Uuid}}],m&&d(g.prototype,m),j&&d(g,j),Object.defineProperty(g,"prototype",{writable:!1}),P}();e.View=j,Object.defineProperty(j,"templates",{value:new Map}),Object.defineProperty(j,"refClasses",{value:new Map})}()}),require.register("curvature/base/ViewList.js",function(e,r,n){r=t(r,{},"curvature"),function(){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ViewList=void 0;var t=r("./Bindable"),n=r("./SetMap"),i=r("./Bag");function o(t){"@babel/helpers - typeof";return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function a(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(i=n.key,void 0,"symbol"===o(a=function(t,e){if("object"!==o(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==o(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(i,"string"))?a:String(a)),n)}var i,a}var s=function(){function e(r,n,a,s,c=null,l=null){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),this.removed=!1,this.args=t.Bindable.makeBindable(Object.create(null)),this.args.value=t.Bindable.makeBindable(a||Object.create(null)),this.subArgs=t.Bindable.makeBindable(Object.create(null)),this.views=[],this.cleanup=[],this.viewClass=l,this._onRemove=new i.Bag,this.template=r,this.subProperty=n,this.keyProperty=c,this.tag=null,this.downDebind=[],this.upDebind=[],this.paused=!1,this.parent=s,this.viewCount=0,this.rendered=new Promise((t,e)=>{Object.defineProperty(this,"renderComplete",{configurable:!1,writable:!0,value:t})}),this.willReRender=!1,this.args.___before((t,e,r,n,i)=>{"bindTo"!=e&&(this.paused=!0)}),this.args.___after((t,e,r,n,i)=>{"bindTo"!=e&&(this.paused=r.length>1,this.reRender())});var u=this.args.value.bindTo((t,e,r,n)=>{if(!this.paused){var i=e;if("symbol"!==o(e))if(isNaN(e)&&(i="_"+e),n)for(var a in this.views[i]&&this.views[i].remove(!0),delete this.views[i],this.views)this.views[a]&&(isNaN(a)?this.views[a].args[this.keyProperty]=a.substr(1):this.views[a].args[this.keyProperty]=a);else this.views[i]?this.views[i]&&this.views[i].args&&(this.views[i].args[this.keyProperty]=e,this.views[i].args[this.subProperty]=t):!1===this.willReRender&&(this.willReRender=requestAnimationFrame(()=>{this.willReRender=!1,this.reRender()}))}});this._onRemove.add(u),Object.preventExtensions(this)}var r,s,c;return r=e,(s=[{key:"render",value:function(t){var e=this,r=[],n=function(n){n.viewList=e,n.render(t,null,e.parent),r.push(n.rendered.then(()=>n))};for(var i of this.views)n(i);this.tag=t,Promise.all(r).then(t=>this.renderComplete(t)),this.parent.dispatchEvent(new CustomEvent("listRendered",{detail:{detail:{key:this.subProperty,value:this.args.value}}}))}},{key:"reRender",value:function(){var t=this;if(!this.paused&&this.tag){var e=[],r=new n.SetMap;for(var i in this.views){var o=this.views[i];if(void 0!==o){var a=o.args[this.subProperty];r.add(a,o),e[i]=o}else e[i]=o}var s=[],c=new Set;this.downDebind.length&&this.downDebind.forEach(t=>t&&t()),this.upDebind.length&&this.upDebind.forEach(t=>t&&t()),this.upDebind.length=0,this.downDebind.length=0;var l=1/0,u=1/0,f=function(){var e=!1,n=p;if(isNaN(n)?n="_"+p:String(n).length&&(n=Number(n)),void 0!==t.args.value[p]&&r.has(t.args.value[p])){var i=r.getOne(t.args.value[p]);i&&(i.args[t.keyProperty]=p,s[n]=i,c.add(i),e=!0,isNaN(n)||(l=Math.min(l,n),n>0&&(u=Math.min(u,n))),r.remove(t.args.value[p],i))}if(!e){var o=Object.create(null),a=s[n]=new t.viewClass(o,t.parent);isNaN(n)||(l=Math.min(l,n),n>0&&(u=Math.min(u,n))),s[n].template=t.template,s[n].viewList=t,s[n].args[t.keyProperty]=p,s[n].args[t.subProperty]=t.args.value[p],t.upDebind[n]=o.bindTo(t.subProperty,(e,r,n,i)=>{var a=o[t.keyProperty];i?delete t.args.value[a]:t.args.value[a]=e}),t.downDebind[n]=t.subArgs.bindTo((t,e,r,n)=>{n?delete o[e]:o[e]=t});var f=()=>{t.upDebind.filter(t=>t).forEach(t=>t()),t.upDebind.length=0},h=()=>{t.downDebind.filter(t=>t).forEach(t=>t()),t.downDebind.length=0};a.onRemove(()=>{t._onRemove.remove(f),t._onRemove.remove(h),t.upDebind[n]&&t.upDebind[n](),t.downDebind[n]&&t.downDebind[n](),delete t.upDebind[n],delete t.downDebind[n]}),t._onRemove.add(f),t._onRemove.add(h),o[t.subProperty]=t.args.value[p]}};for(var p in this.args.value)f();for(var h in e)e[h]&&!c.has(e[h])&&e[h].remove(!0);if(Array.isArray(this.args.value)){var g=0===l&&void 0!==s[1]&&s.length>1||u===1/0?l:u,d=(t=0)=>{for(var e=s.length-t-1;e>g&&void 0===s[e];)e--;if(e<g)return Promise.resolve();if(s[e]===this.views[e]){if(s[e]&&!s[e].firstNode)return s[e].render(this.tag,s[e+1],this.parent),s[e].rendered.then(()=>d(Number(t)+1));return 0===t||t%500?d(Number(t)+1):new Promise(e=>requestAnimationFrame(()=>e(d(Number(t)+1))))}return s[e].render(this.tag,s[e+1],this.parent),this.views.splice(e,0,s[e]),s[e].rendered.then(()=>d(t+1))};this.rendered=d()}else{var y=[],b=Object.assign(Object.create(null),s),v=t=>parseInt(t)===t-0,m=Object.keys(s).sort((t,e)=>v(t)&&v(e)?Math.sign(t-e):v(t)||v(e)?!v(t)&&v(e)?-1:v(t)&&!v(e)?1:void 0:0),w=function(e){if(delete b[e],s[e].firstNode&&s[e]===t.views[e])return"continue";s[e].render(t.tag,null,t.parent),y.push(s[e].rendered.then(()=>s[e]))};for(var S of m)w(S);for(var O in b)delete this.args.views[O],b.remove(!0);this.rendered=Promise.all(y)}for(var j in s)isNaN(j)?s[j].args[this.keyProperty]=j.substr(1):s[j].args[this.keyProperty]=j;return this.views=Array.isArray(this.args.value)?[...s]:s,this.viewCount=c.size,c.clear(),this.willReRender=!1,this.rendered.then(()=>{this.parent.dispatchEvent(new CustomEvent("listRendered",{detail:{detail:{key:this.subProperty,value:this.args.value,tag:this.tag}}})),this.tag.dispatchEvent(new CustomEvent("listRendered",{detail:{detail:{key:this.subProperty,value:this.args.value,tag:this.tag}}}))}),this.rendered}}},{key:"pause",value:function(t=!0){for(var e in this.views)this.views[e].pause(t)}},{key:"onRemove",value:function(t){this._onRemove.add(t)}},{key:"remove",value:function(){for(var e in this.views)this.views[e]&&this.views[e].remove(!0);var r=this._onRemove.items();for(var n in r)this._onRemove.remove(r[n]),r[n]();for(;this.cleanup.length;)this.cleanup.pop()();for(this.views=[];this.tag&&this.tag.firstChild;)this.tag.removeChild(this.tag.firstChild);this.subArgs&&t.Bindable.clearBindings(this.subArgs),t.Bindable.clearBindings(this.args),this.removed=!0}}])&&a(r.prototype,s),c&&a(r,c),Object.defineProperty(r,"prototype",{writable:!1}),e}();e.ViewList=s}()}),require.register("curvature/input/Keyboard.js",function(e,r,n){r=t(r,{},"curvature"),function(){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Keyboard=void 0;var t=r("../base/Bindable");function n(t){"@babel/helpers - typeof";return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function i(t,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,(o=i.key,void 0,"symbol"===n(a=function(t,e){if("object"!==n(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var i=r.call(t,e||"default");if("object"!==n(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(o,"string"))?a:String(a)),i)}var o,a}var o=function(){function e(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),this.maxDecay=120,this.comboTime=500,this.listening=!1,this.focusElement=document.body,this[t.Bindable.NoGetters]=!0,Object.defineProperty(this,"combo",{value:t.Bindable.make([])}),Object.defineProperty(this,"whichs",{value:t.Bindable.make({})}),Object.defineProperty(this,"codes",{value:t.Bindable.make({})}),Object.defineProperty(this,"keys",{value:t.Bindable.make({})}),Object.defineProperty(this,"pressedWhich",{value:t.Bindable.make({})}),Object.defineProperty(this,"pressedCode",{value:t.Bindable.make({})}),Object.defineProperty(this,"pressedKey",{value:t.Bindable.make({})}),Object.defineProperty(this,"releasedWhich",{value:t.Bindable.make({})}),Object.defineProperty(this,"releasedCode",{value:t.Bindable.make({})}),Object.defineProperty(this,"releasedKey",{value:t.Bindable.make({})}),Object.defineProperty(this,"keyRefs",{value:t.Bindable.make({})}),document.addEventListener("keyup",t=>{this.listening&&(this.keys[t.key]>0||!this.focusElement||document.activeElement===this.focusElement||this.focusElement.contains(document.activeElement)&&!document.activeElement.matches("input,textarea"))&&(t.preventDefault(),this.releasedWhich[t.which]=Date.now(),this.releasedCode[t.code]=Date.now(),this.releasedKey[t.key]=Date.now(),this.whichs[t.which]=-1,this.codes[t.code]=-1,this.keys[t.key]=-1)}),document.addEventListener("keydown",t=>{this.listening&&(!this.focusElement||document.activeElement===this.focusElement||this.focusElement.contains(document.activeElement)&&!document.activeElement.matches("input,textarea"))&&(t.preventDefault(),t.repeat||(this.combo.push(t.code),clearTimeout(this.comboTimer),this.comboTimer=setTimeout(()=>this.combo.splice(0),this.comboTime),this.pressedWhich[t.which]=Date.now(),this.pressedCode[t.code]=Date.now(),this.pressedKey[t.key]=Date.now(),this.keys[t.key]>0||(this.whichs[t.which]=1,this.codes[t.code]=1,this.keys[t.key]=1)))});var r=t=>{for(var e in this.keys)this.keys[e]<0||(this.releasedKey[e]=Date.now(),this.keys[e]=-1);for(var r in this.codes)this.codes[r]<0||(this.releasedCode[r]=Date.now(),this.codes[r]=-1);for(var n in this.whichs)this.whichs[n]<0||(this.releasedWhich[n]=Date.now(),this.whichs[n]=-1)};window.addEventListener("blur",r),window.addEventListener("visibilitychange",()=>{"visible"!==document.visibilityState&&r()})}var r,n,o;return r=e,o=[{key:"get",value:function(){return this.instance=this.instance||t.Bindable.make(new this)}}],(n=[{key:"getKeyRef",value:function(e){return this.keyRefs[e]=this.keyRefs[e]||t.Bindable.make({})}},{key:"getKeyTime",value:function(t){var e=this.releasedKey[t],r=this.pressedKey[t];return r?!e||e<r?Date.now()-r:-1*(Date.now()-e):0}},{key:"getCodeTime",value:function(t){var e=this.releasedCode[t],r=this.pressedCode[t];return r?!e||e<r?Date.now()-r:-1*(Date.now()-e):0}},{key:"getWhichTime",value:function(t){var e=this.releasedWhich[t],r=this.pressedWhich[t];return r?!e||e<r?Date.now()-r:-1*(Date.now()-e):0}},{key:"getKey",value:function(t){return this.keys[t]?this.keys[t]:0}},{key:"getKeyCode",value:function(t){return this.codes[t]?this.codes[t]:0}},{key:"reset",value:function(){for(var t in this.keys)delete this.keys[t];for(var t in this.codes)delete this.codes[t];for(var t in this.whichs)delete this.whichs[t]}},{key:"update",value:function(){for(var t in this.keys)this.keys[t]>0?this.keys[t]++:this.keys[t]>-this.maxDecay?this.keys[t]--:delete this.keys[t];for(var t in this.codes){var e=this.releasedCode[t],r=this.pressedCode[t],n=this.getKeyRef(t);if(this.codes[t]>0){if(n.frames=this.codes[t]++,n.time=r?Date.now()-r:0,n.down=!0,!e||e<r)return;return-1*(Date.now()-e)}this.codes[t]>-this.maxDecay?(n.frames=this.codes[t]--,n.time=e-Date.now(),n.down=!1):(n.frames=0,n.time=0,n.down=!1,delete this.codes[t])}for(var t in this.whichs)this.whichs[t]>0?this.whichs[t]++:this.whichs[t]>-this.maxDecay?this.whichs[t]--:delete this.whichs[t]}}])&&i(r.prototype,n),o&&i(r,o),Object.defineProperty(r,"prototype",{writable:!1}),e}();e.Keyboard=o}()}),require.register("curvature/input/Sequence.js",function(e,r,n){r=t(r,{},"curvature"),function(){"use strict";function t(e){"@babel/helpers - typeof";return(t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(e)}Object.defineProperty(e,"__esModule",{value:!0}),e.Sequence=void 0;var n,i=r("../base/Bindable"),o=r("../base/Mixin"),a=r("../mixin/EventTargetMixin");function s(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,h(n.key),n)}}function c(t,e){return(c=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function l(e){var r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var n,i=f(e);if(r){var o=f(this).constructor;n=Reflect.construct(i,arguments,o)}else n=i.apply(this,arguments);return function(e,r){if(r&&("object"===t(r)||"function"==typeof r))return r;if(void 0!==r)throw new TypeError("Derived constructors may only return object or undefined");return u(e)}(this,n)}}function u(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function f(t){return(f=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function p(t,e,r){return(e=h(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function h(e){var r=function(e,r){if("object"!==t(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,r||"default");if("object"!==t(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===r?String:Number)(e)}(e,"string");return"symbol"===t(r)?r:String(r)}n=i.Bindable.NoGetters;var g=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&c(t,e)}(h,o.Mixin.with(a.EventTargetMixin));var e,r,i,f=l(h);function h({callback:t,keys:e,timing:r,gamepad:i}){var o;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,h),p(u(o=f.call(this)),n,!0),p(u(o),"lastTap",!1),p(u(o),"recent",[]),p(u(o),"callback",()=>{}),p(u(o),"timing",500),p(u(o),"keys","");var a=[t,r,e,i];return o.callback=a[0],o.timing=a[1],o.keys=a[2],o.gamepad=a[3],o}return e=h,(r=[{key:"check",value:function(t){var e=this.recent,r=Date.now();r+-this.lastTap>this.timing&&e.splice(0),e.push({code:t,time:Date.now()});var n=e.map(t=>t.code).join(","),i=this.keys.join(",");this.lastTap=r;var o=[];for(var a in e){e[a];var s=e.slice(a),c=s.map(t=>t.code).join(",");if(c===i.substr(0,c.length)){o.push(...s),this.dispatchEvent(new CustomEvent("advance",{detail:{matched:o,recent:e,keys:this.keys,length:s.length}}));break}}o.length?i===n.substr(-i.length)&&this.dispatchEvent(new CustomEvent("complete",{detail:{matched:o,recent:e,keys:this.keys,length:o.length}})):this.dispatchEvent(new CustomEvent("cancel",{detail:{matched:o,recent:e,keys:this.keys,length:o.length}}))}}])&&s(e.prototype,r),i&&s(e,i),Object.defineProperty(e,"prototype",{writable:!1}),h}();e.Sequence=g}()}),require.register("curvature/mixin/EventTargetMixin.js",function(e,r,n){r=t(r,{},"curvature"),function(){"use strict";function t(e){"@babel/helpers - typeof";return(t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(e)}Object.defineProperty(e,"__esModule",{value:!0}),e.EventTargetMixin=void 0;var n,i=r("../base/Mixin");function o(e,r,n){return(r=function(e){var r=function(e,r){if("object"!==t(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,r||"default");if("object"!==t(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===r?String:Number)(e)}(e,"string");return"symbol"===t(r)?r:String(r)}(r))in e?Object.defineProperty(e,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[r]=n,e}function a(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,i,o,a,s=[],c=!0,l=!1;try{if(o=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=o.call(r)).done)&&(s.push(n.value),s.length!==e);c=!0);}catch(t){l=!0,i=t}finally{try{if(!c&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(l)throw i}}return s}}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return s(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return s(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function s(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}var c=Symbol("EventTargetParent"),l=Symbol("CallHandler"),u=Symbol("Capture"),f=Symbol("Bubble"),p=(Symbol("Target"),Symbol("HandlersBubble")),h=Symbol("HandlersCapture"),g=(o(n={},i.Mixin.Constructor,function(){this[h]=new Map,this[p]=new Map}),o(n,"dispatchEvent",function(...t){var e=t[0];"string"==typeof e&&(e=new CustomEvent(e),t[0]=e),e.cvPath=e.cvPath||[],e.cvTarget=e.cvCurrentTarget=this;var r=this[u](...t);if(e.cancelable&&(!1===r||e.cancelBubble))return r;var n=[];if(this[h].has(e.type)){var i=this[h].get(e.type),o=[...i];o.forEach(t=>t.push(i)),n.push(...o)}if(this[p].has(e.type)){var s=this[p].get(e.type),g=[...s];g.forEach(t=>t.push(s)),n.push(...g)}for(var d of(n.push([()=>this[l](...t),{},null]),n)){var y=a(d,3),b=y[0],v=y[1],m=y[2];if(v.once&&m.delete(b),r=b(e),e.cancelable&&!1===r)break}return e.cancelable&&(e.cancelBubble||!1===r)||this[f](...t),this[c]||Object.freeze(e.cvPath),e.returnValue}),o(n,"addEventListener",function(t,e,r={}){!0===r&&(r={useCapture:!0});var n=p;r.useCapture&&(n=h),this[n].has(t)||this[n].set(t,new Map),this[n].get(t).set(e,r),r.signal&&r.signal.addEventListener("abort",n=>this.removeEventListener(t,e,r),{once:!0})}),o(n,"removeEventListener",function(t,e,r={}){!0===r&&(r={useCapture:!0});var n=p;r.useCapture&&(n=h),this[n].has(t)&&this[n].get(t).delete(e)}),o(n,u,function(...t){var e=t[0];if(e.cvPath.push(this),this[c]){var r=this[c][u](...t);if((!e.cancelable||!1!==r&&!e.cancelBubble)&&this[c][h].has(e.type)){e.cvCurrentTarget=this[c];var n=e.type,i=this[c][h].get(n);for(var o of i){var s=a(o,2),l=s[0];if(s[1].once&&i.delete(l),r=l(e),e.cancelable&&(!1===r||e.cancelBubble))break}return r}}}),o(n,f,function(...t){var e=t[0];if(e.bubbles&&this[c]&&!e.cancelBubble){if(!this[c][p].has(e.type))return this[c][f](...t);var r;e.cvCurrentTarget=this[c];e.type;var n=this[c][p].get(e.type);for(var i of n){var o=a(i,2),s=o[0];if(o[1].once&&n.delete(s),r=s(e),e.cancelable&&!1===r)return r}return r=this[c][l](...t),e.cancelable&&(!1===r||e.cancelBubble)?r:this[c][f](...t)}}),o(n,l,function(...t){var e=t[0];if(!e.defaultPrevented){var r="on".concat(e.type[0].toUpperCase()+e.type.slice(1));return"function"==typeof this[r]?this[r](e):void 0}}),n);e.EventTargetMixin=g,Object.defineProperty(g,"Parent",{value:c})}()}),require.register("curvature/mixin/PromiseMixin.js",function(e,r,n){r=t(r,{},"curvature"),function(){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.PromiseMixin=void 0;var t,n=r("../base/Mixin");function i(t){"@babel/helpers - typeof";return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function o(t,e,r){return(e=function(t){var e=function(t,e){if("object"!==i(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==i(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===i(e)?e:String(e)}(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var a=Symbol("Promise"),s=Symbol("Accept"),c=Symbol("Reject"),l=(o(t={},n.Mixin.Constructor,function(){this[a]=new Promise((t,e)=>{this[s]=t,this[c]=e})}),o(t,"then",function(...t){return this[a].then(...t)}),o(t,"catch",function(...t){return this[a].catch(...t)}),o(t,"finally",function(...t){return this[a].finally(...t)}),t);e.PromiseMixin=l,Object.defineProperty(l,"Reject",{value:c}),Object.defineProperty(l,"Accept",{value:s})}()}),require.register("curvature/model/Database.js",function(e,r,n){r=t(r,{},"curvature"),function(){"use strict";function t(e){"@babel/helpers - typeof";return(t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(e)}Object.defineProperty(e,"__esModule",{value:!0}),e.Database=void 0;var n=r("../base/Bindable"),i=r("../base/Mixin"),o=r("../mixin/EventTargetMixin");function a(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,i,o,a,s=[],c=!0,l=!1;try{if(o=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=o.call(r)).done)&&(s.push(n.value),s.length!==e);c=!0);}catch(t){l=!0,i=t}finally{try{if(!c&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(l)throw i}}return s}}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return s(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return s(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function s(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function c(t,e,r){return(e=u(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function l(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,u(n.key),n)}}function u(e){var r=function(e,r){if("object"!==t(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,r||"default");if("object"!==t(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===r?String:Number)(e)}(e,"string");return"symbol"===t(r)?r:String(r)}function f(t,e){return(f=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function p(e){var r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var n,i=g(e);if(r){var o=g(this).constructor;n=Reflect.construct(i,arguments,o)}else n=i.apply(this,arguments);return function(e,r){if(r&&("object"===t(r)||"function"==typeof r))return r;if(void 0!==r)throw new TypeError("Derived constructors may only return object or undefined");return h(e)}(this,n)}}function h(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function g(t){return(g=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var d=Symbol("BeforeWrite"),y=Symbol("AfterWrite"),b=Symbol("BeforeDelete"),v=Symbol("AfterDelete"),m=Symbol("BeforeInsert"),w=Symbol("AfterInsert"),S=Symbol("BeforeUpdate"),O=Symbol("AfterUpdate"),j=Symbol("BeforeRead"),x=Symbol("AfterRead"),P=Symbol("PrimaryKey"),k=Symbol("Connection"),_=Symbol("Instances"),R=(Symbol("HighWater"),Symbol("Metadata")),M=Symbol("Timers"),T=Symbol("Target"),E=(Symbol("Store"),Symbol("Each")),C=Symbol("Name"),A=Symbol("Bank"),B=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&f(t,e)}(g,i.Mixin.with(o.EventTargetMixin));var e,r,s,u=p(g);function g(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,g),e=u.call(this),Object.defineProperty(h(e),k,{value:t}),Object.defineProperty(h(e),C,{value:t.name}),Object.defineProperty(h(e),M,{value:{}}),Object.defineProperty(h(e),R,{value:{}}),Object.defineProperty(h(e),A,{value:{}}),e}return e=g,s=[{key:"open",value:function(t,e=0){return this[_][t]?this[_][t]:this[_][t]=new Promise((r,n)=>{var i=indexedDB.open(t,e);i.onerror=(t=>{g.dispatchEvent(new CustomEvent("error",{detail:{database:this[C],error:t,store:void 0,type:"read",subType:"select"}})),n(t)}),i.onsuccess=(t=>{var e=new this(t.target.result);r(e)}),i.onupgradeneeded=(t=>{var r=t.target.result;r.addEventListener("error",t=>console.error(t));for(var n=new this(r),i=t.oldVersion+1;i<=e;i+=1)n["_version_"+i](r,n,t)})})}},{key:"getPrimaryKey",value:function(t){return t[P]?t[P]:null}},{key:"destroyDatabase",value:function(){return new Promise((t,e)=>{var r=indexedDB.delete(dbName);r.onerror=(t=>{g.dispatchEvent(new CustomEvent("error",{detail:{database:dbName,error:t,type:"destroy"}})),e(t)}),r.onsuccess=(e=>{delete this[_][dbName],t(dbName)})})}}],(r=[{key:"select",value:function({store:t,index:e,range:r,ranges:n=[],direction:i="next",limit:o=0,offset:a=0,type:s=!1,origin:c,map:l}){var u=this[k].transaction(t,"readonly").objectStore(t),f=e?u.index(e):u;void 0===r||n&&n.length||(n=[r]);var p=[s,f,i,n,o,a,c,l],h=null;return{finally:t=>(h||(h=this[E](...p)(t=>t))).finally(t),catch:t=>(h||(h=this[E](...p)(t=>t))).catch(t),then:t=>(h||(h=this[E](...p)(t=>t))).then(t),each:t=>h||(h=this[E](...p)(t)),one:t=>h||(h=this[E](...Object.assign(p,[,,,,1]))(t))}}},{key:"insert",value:function(t,e,r={}){return this.inserts(c({},t,e),r)[0]}},{key:"inserts",value:function(t,e={}){var r=this,i=Object.keys(t),o=this[k].transaction(i,"readwrite"),s=[],c=function(){var t=(u=a(l,2))[0],i=u[1],c=o.objectStore(t),f=r[A][t]=r[A][t]||{},p=!0;Array.isArray(i)||(i=[i],p=!1);var h,d=i.map(i=>new Promise((a,s)=>{i=n.Bindable.make(i);var l={database:r,record:i,store:t,type:"write",subType:"insert",origin:e};l.key=g.getPrimaryKey(i);var u=new CustomEvent("write",{cancelable:!0,detail:l});if(r.dispatchEvent(u)){var p=i[g.BeforeWrite]?i[g.BeforeWrite](l):null,h=i[g.BeforeInsert]?i[g.BeforeInsert](l):null,d=c.add(Object.assign({},n.Bindable.shuck(i)));!1!==p&&!1!==h?(d.onerror=(t=>{r.dispatchEvent(new CustomEvent("writeError",{detail:l})),o.abort&&o.abort(),s(t)}),d.onsuccess=(n=>{var s=n.target.result;o.addEventListener("complete",n=>{if(c.autoIncrement&&(i.id=s),i[g.AfterInsert]&&i[g.AfterInsert](l),i[g.AfterWrite]&&i[g.AfterWrite](l),f[s]=i,i[P]=Symbol.for(s),a(i),r[R][t]||(r[R][t]=r.getStoreMeta(t,"store",{})),r[R][t]){var o=r.checkHighWaterMark(t,i),u=r.checkLowWaterMark(t,i),p=r[R][t],h=i[p.highWater];e.setHighWater&&o<h&&r.setHighWaterMark(t,i,e,"insert"),e.setLowWater&&u>h&&r.setLowWaterMark(t,i,e,"insert")}})})):o.abort&&o.abort()}else o.abort&&o.abort()}));h=p?Promise.all(d):d[0],s.push(h)};for(var l of Object.entries(t)){var u;c()}return s}},{key:"update",value:function(t,e,r={}){return this.updates(c({},t,[e]),r)[0]}},{key:"updates",value:function(t,e={}){var r=this,i=Object.keys(t),o=this[k].transaction(i,"readwrite"),s=[],c=function(){var t=(u=a(l,2))[0],i=u[1],c=o.objectStore(t),f=function(i){if(!i[P])throw Error("Value provided is not a DB record!");s.push(new Promise((a,s)=>{var l={database:r,key:g.getPrimaryKey(i),record:i,store:t,type:"write",subType:"update",origin:e},u=new CustomEvent("write",{cancelable:!0,detail:l});if(r.dispatchEvent(u)){var f=i[g.BeforeWrite]?i[g.BeforeWrite](l):null,p=i[g.BeforeUpdate]?i[g.BeforeUpdate](l):null;if(!1!==f&&!1!==p){var h=c.delete(i.id);h.onerror=(t=>{r.dispatchEvent(new CustomEvent("writeError",{detail:l})),s(t)}),h.onsuccess=(f=>{var p=c.put(Object.assign({},n.Bindable.shuck(i)));p.onerror=(t=>{r.dispatchEvent(new CustomEvent("writeError",{detail:l})),s(t)}),p.onsuccess=(n=>{a(u),o.oncomplete=(n=>{if(i[g.AfterInsert]&&i[g.AfterInsert](l),i[g.AfterWrite]&&i[g.AfterWrite](l),r[R][t]||(r[R][t]=r.getStoreMeta(t,"store",{})),r[R][t]){var o=r.checkHighWaterMark(t,i),a=r.checkLowWaterMark(t,i),s=r[R][t],c=i[s.highWater];e.setHighWater&&o<c&&r.setHighWaterMark(t,i,e,"insert"),e.setLowWater&&a>c&&r.setLowWaterMark(t,i,e,"insert")}})})})}else o.abort&&o.abort()}else o.abort&&o.abort()}))};for(var p of i)f(p)};for(var l of Object.entries(t)){var u;c()}return Promise.all(s).then(()=>o.commit&&o.commit()),s}},{key:"delete",value:function(t,e,r={}){return this.deletes(c({},t,[e]),r)[0]}},{key:"deletes",value:function(t,e={}){var r=this,n=Object.keys(t),i=this[k].transaction(n,"readwrite"),o=[],s=function(){var t=(l=a(c,2))[0],n=l[1],s=i.objectStore(t),u=function(n){if(!n[P])throw Error("Value provided is not a DB record!");o.push(new Promise((o,a)=>{var c={database:r,record:n,key:g.getPrimaryKey(n),store:t,type:"write",subType:"delete",origin:e},l=new CustomEvent("write",{cancelable:!0,detail:c});if(r.dispatchEvent(l))if(!1!==(n[g.BeforeDelete]?n[g.BeforeDelete](c):null)){var u=s.delete(n.id);u.onerror=(t=>{c.original=t;var e=new CustomEvent("writeError",{detail:c});r.dispatchEvent(e),a(t)}),u.onsuccess=(t=>{o(l),i.oncomplete=(t=>{n[P]=void 0,n[g.AfterDelete]&&n[g.AfterDelete](c),c.original=t})})}else i.abort&&i.abort();else i.abort&&i.abort()}))};for(var f of n)u(f)};for(var c of Object.entries(t)){var l;s()}return Promise.all(o).then(()=>i.commit&&i.commit()),o}},{key:"clear",value:function(t){return new Promise((e,r)=>{var n=this[k].transaction([t],"readwrite"),i=n.objectStore(t).clear(),o={database:this[C],store:t,type:"write",subType:"clear",origin:origin};i.onerror=(t=>{o.original=t;var e=new CustomEvent("writeError",{detail:o});this.dispatchEvent(e),r(t)}),i.onsuccess=(t=>{o.original=t;var r=new CustomEvent("write",{detail:o});this.dispatchEvent(r),n.commit&&n.commit(),e(r)})})}},{key:"listStores",value:function(){return[...this[k].objectStoreNames]}},{key:"listIndexes",value:function(t){return[...this[k].transaction([t]).objectStore(t).indexNames]}},{key:E,value:function(t,e,r,i,o,a,s,c){var l=(i,l)=>new Promise((u,f)=>{if(i instanceof IDBKeyRange);else if(Array.isArray(i))if(0===i.length)i=void 0;else if(1===i.length)i=IDBKeyRange.only(i[0]);else if(void 0===i[0]&&void 0===i[1])i=void 0;else if(void 0===i[0]){var p;i=IDBKeyRange.upperBound(i[1],null===(p=i[2])||void 0===p||p)}else if(void 0===i[1]){var h;i=IDBKeyRange.lowerBound(i[0],null!==(h=i[2])&&void 0!==h&&h)}else{var d,y;i=IDBKeyRange.bound(i[0],i[1],null!==(d=i[2])&&void 0!==d&&d,null===(y=i[3])||void 0===y||y)}else void 0!==i&&null!==i&&(i=IDBKeyRange.only(i));var b=0;e.openCursor(i,r).addEventListener("success",r=>{var i=r.target.result;if(!i)return u({record:null,result:null,index:b});var f=i.source,p=f.objectStore?f.objectStore.name:e.name;this[A][p]=this[A][p]||{};var h=this[A][p],d=i.primaryKey,y=t?t.from(i.value):i.value,v=n.Bindable.makeBindable(y),m={database:this[C],key:g.getPrimaryKey(v),record:y,store:e.name,type:"read",subType:"select",origin:s},w=y[g.BeforeRead]?y[g.BeforeRead](m):null;if(a>b++||!1===w)return i.continue();h[d]?Object.assign(h[d],y):(y[P]=Symbol.for(d),h[d]=y),m.record=y,h[d][g.AfterRead]&&h[d][g.AfterRead](m);if(this.dispatchEvent(new CustomEvent("read",{detail:m,cancelable:!0}))){var S=t?t.from(h[d]):h[d];S[P]=Symbol.for(d);var O=c?c(S):S,j=l?l(O,b):O;if(o&&b-a>=o)return a+=o,u({mapped:O,result:j,index:b})}i.continue()})}),u=[];i=i&&i.length?i.slice():[[]];var f=(t,e)=>(u.push(t),i.length?l(i.shift(),e).then(t=>f(t,e)):1===u.length?u[0]:u);return t=>l(i.shift(),t).then(e=>f(e,t))}},{key:"getObjectStores",value:function(t){return[...this[k].objectStoreNames]}},{key:"getStoreIndexes",value:function(t){var e=this[k].transaction([t],"readonly"),r=[...e.objectStore(t).indexNames];return e.abort(),r}},{key:"setStoreMeta",value:function(t,e,r){localStorage.setItem("::::cvdb::".concat(t,"::").concat(e),JSON.stringify(r))}},{key:"getStoreMeta",value:function(t,e,r=null){var n=localStorage.getItem("::::cvdb::".concat(t,"::").concat(e)),i=null!==n?JSON.parse(n):r;return null===i?r:i}},{key:"createObjectStore",value:function(t,e){var r=this[k].createObjectStore(t,e);return this.setStoreMeta(t,"store",e),r}},{key:"deleteObjectStore",value:function(t){return this[k].deleteObjectStore(t)}},{key:"checkHighWaterMark",value:function(t,e,r){return this.getStoreMeta(t,"highWater",0)}},{key:"setHighWaterMark",value:function(t,e,r,n){var i=e[this[R][t].highWater],o=this.getStoreMeta(t,"highWater",0);this.setStoreMeta(t,"highWater",i),this.dispatchEvent(new CustomEvent("highWaterMoved",{detail:{database:this[C],record:e,store:t,type:"highWaterMoved",subType:n,origin:r,oldValue:o,value:i}}))}},{key:"checkLowWaterMark",value:function(t,e,r){return this.getStoreMeta(t,"lowWater",1/0)}},{key:"setLowWaterMark",value:function(t,e,r,n){var i=e[this[R][t].highWater],o=this.getStoreMeta(t,"lowWater",null);this.setStoreMeta(t,"lowWater",i),this.dispatchEvent(new CustomEvent("lowWaterMoved",{detail:{database:this[C],record:e,store:t,type:"lowWaterMoved",subType:n,origin:r,oldValue:o,value:i}}))}}])&&l(e.prototype,r),s&&l(e,s),Object.defineProperty(e,"prototype",{writable:!1}),g}();e.Database=B,Object.defineProperty(B,_,{value:[]}),Object.defineProperty(B,"BeforeDelete",{value:b}),Object.defineProperty(B,"AfterDelete",{value:v}),Object.defineProperty(B,"BeforeWrite",{value:d}),Object.defineProperty(B,"AfterWrite",{value:y}),Object.defineProperty(B,"BeforeInsert",{value:m}),Object.defineProperty(B,"AfterInsert",{value:w}),Object.defineProperty(B,"BeforeUpdate",{value:S}),Object.defineProperty(B,"AfterUpdate",{value:O}),Object.defineProperty(B,"BeforeRead",{value:j}),Object.defineProperty(B,"AfterRead",{value:x}),Object.defineProperty(B,"PKSymbol",{value:P}),Object.defineProperty(B,"PrimaryKey",{value:P});try{Object.defineProperty(B,T,{value:new EventTarget})}catch(t){Object.defineProperty(B,T,{value:document.createDocumentFragment()})}var D=function(t){Object.defineProperty(B,t,{value:(...e)=>B[T][t](...e)})};for(var I of["addEventListener","removeEventListener","dispatchEvent"])D(I)}()}),require.register("curvature/model/Model.js",function(e,r,n){r=t(r,{},"curvature"),function(){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Model=void 0;var t=r("../base/Cache"),n=r("../base/Bindable"),i=r("./Database");function o(t){"@babel/helpers - typeof";return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function a(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,c(n.key),n)}}function s(t,e,r){return(e=c(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function c(t){var e=function(t,e){if("object"!==o(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==o(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===o(e)?e:String(e)}var l=Symbol("Changed"),u=Symbol("Deleted"),f=Symbol("Saved"),p=Symbol("Keys"),h=function(){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),s(this,"id",void 0),s(this,"class",void 0),Object.defineProperty(this,l,{value:n.Bindable.make({})}),Object.defineProperty(this,u,{writable:!0,value:!1}),Object.defineProperty(this,f,{writable:!0,value:!1}),Object.defineProperty(this,p,{writable:!0,value:new Set}),n.Bindable.make(this)}var r,c,h;return r=e,h=[{key:"keyProps",get:function(){return["id","class"]}},{key:"from",value:function(e,r=!1){var n=this.keyProps,i=n.map(t=>e[t]);i.unshift(this.name);var a=i.join("::"),s="models-by-type-and-publicId",c=t.Cache.load(a,!1,s),u=c||new this;for(var p of n){var h,g;u[p]=null!==(h=null!==(g=u[p])&&void 0!==g?g:e[p])&&void 0!==h?h:null}if(u.consume(e),!c){t.Cache.store(a,u,0,s);var d=!1;u.bindTo((t,e,r,n)=>{"symbol"!==o(e)&&t!==r[e]&&(u[l][e]=d,u[f]=!(d||!u[f]))}),0===Object.keys(u[l]).length&&(u[f]=r),d=!0}return u}}],(c=[{key:"consume",value:function(r,n=!1){var a=e.keyProps,s=(e,r)=>{if(r&&"object"===o(r)&&r.constructor.keyProps){var i=r.constructor.keyProps.map(t=>r[t]).join("::"),a=t.Cache.load(i,!1,"models-by-type-and-publicId");a&&(a.consume(r),r=a)}!n&&this[l][e]||(this[e]=r)};for(var c of(i.Database.PKSymbol in r&&s(i.Database.PKSymbol,r[i.Database.PKSymbol]),this[p]=new Set([...this[p],...Object.keys(this),...Object.keys(r)]),this[p]))!n&&this[l][c]||a.includes(c)||c in r&&s(c,r[c])}},{key:"changed",value:function(){this[f]=!1}},{key:"markDeleted",value:function(){for(var t in this[l])this[l][t]=!1;this[u]=!0,this[f]=!1}},{key:"markStored",value:function(){for(var t in this)this[l][t]=!1;this[u]=!1,this[f]=!0}},{key:"isSaved",value:function(){return this[f]}}])&&a(r.prototype,c),h&&a(r,h),Object.defineProperty(r,"prototype",{writable:!1}),e}();e.Model=h,Object.defineProperty(h,"Changed",{value:l}),Object.defineProperty(h,"Deleted",{value:u}),Object.defineProperty(h,"Saved",{value:f})}()}),require.register("curvature/net/Elicit.js",function(e,r,n){r=t(r,{},"curvature"),function(){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Elicit=void 0;var t=r("curvature/base/Mixin"),n=r("curvature/mixin/EventTargetMixin"),i=r("curvature/mixin/PromiseMixin");function o(t){"@babel/helpers - typeof";return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function a(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,f(n.key),n)}}function s(t,e){return(s=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function c(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=l(t);if(e){var i=l(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===o(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function l(t){return(l=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function u(t,e,r){return(e=f(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function f(t){var e=function(t,e){if("object"!==o(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==o(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===o(e)?e:String(e)}var p=Symbol("IterateDownload"),h=Symbol("Retry"),g=Symbol("HandleFirstByte"),d=Symbol("HandleProgress"),y=Symbol("HandleComplete"),b=Symbol("HandleHeaders"),v=Symbol("HandleClose"),m=Symbol("HandleError"),w=Symbol("HandleOpen"),S=Symbol("HandleFail"),O=Symbol("FetchDeferrer"),j=Symbol("LastChunkSize"),x=Symbol("LastChunkTime"),P=Symbol("Options"),k=Symbol("Fetch"),_=Symbol("Type"),R=Symbol("Url"),M=Symbol("RetriesLeft"),T=Symbol("TimeoutLeft"),E=Symbol("Timeout"),C=Symbol("Timer"),A=Symbol("Canecller"),B=Symbol("Caneclled"),D=Symbol("Paused"),I=Symbol("Received"),F=Symbol("Length"),L=Symbol("Opened"),N=Symbol("Closed"),z=Symbol("Start"),q=Symbol("First"),U=Symbol("End"),H=function(e){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&s(t,e)}(f,t.Mixin.with(n.EventTargetMixin,i.PromiseMixin));var r,o,l,u=c(f);function f(t,e={}){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,f),(r=u.call(this))[M]=e.retries||5,r[E]=e.timeout||4500,r[T]=e.maxTimeout||r[E]*r[M],r[O]=null,r[x]=0,r[j]=0,r[B]=!1,r[I]=0,r[D]=!1,r[N]=0,r[P]=Object.assign({},e),r[R]=t,e.defer?r[k]=new Promise(t=>r[O]=t):r.open(),r}return r=f,l=[{key:"pool",value:function(t){t.finally(()=>{if(this.running.delete(t),this.backlog.length){var e=this.backlog.shift();this.running.add(e),e.open()}}),this.running.size<5?(this.running.add(t),t.open()):this.backlog.push(t)}}],(o=[{key:"open",value:function(){if(!this[L]||this[N]){this[z]||(this[z]=Date.now()),this[A]=new AbortController,this[P].signal=this[A].signal,this[L]=Date.now(),this[N]=0,this[q]=0,this[k]=fetch(this[R],this[P]).then(t=>this[w](t)).catch(t=>this[m](t));this[C]=setTimeout(()=>{if(!this[q]){if(this[A].abort(),this[v](),this[T]=Math.max(0,this[T]-this[E]),this[T])return;this[S](new Error("Timed out."))}},this[E])}}},{key:"headers",value:function(){return this[k].then(({response:t,stream:e})=>t.headers)}},{key:"json",value:function(){return this[k].then(({response:t,stream:e})=>{return new Response(e,{headers:{"Content-Type":"application/json"}}).json()})}},{key:"text",value:function(){return this[k].then(({response:t,stream:e})=>{return new Response(e,{headers:{"Content-Type":this.type}}).text()})}},{key:"css",value:function(){return this.text().then(t=>{var e=new CSSStyleSheet;return e.replace(t),e})}},{key:"blob",value:function(){return this[k].then(({response:t,stream:e})=>{return new Response(e,{headers:{"Content-Type":t.headers.get("Content-Type")}}).blob()})}},{key:"objectUrl",value:function(){return this.blob().then(t=>URL.createObjectURL(t))}},{key:"dataUri",value:function(){return this.blob().then(t=>new Promise((e,r)=>{var n=new FileReader;n.onload=(t=>e(n.result)),n.onerror=(t=>r(n.error)),n.onabort=(t=>r(new Error("Read aborted"))),n.readAsDataURL(t)}))}},{key:"buffer",value:function(){return this[k].then(({response:t,stream:e})=>{return new Response(e,{headers:{"Content-Type":t.headers.get("Content-Type")}}).arrayBuffer()})}},{key:"bytes",value:function(){return this.buffer().then(t=>new Uint8Array(t))}},{key:"cancel",value:function(){this.emitCancelEvent()&&(this[A].abort(),this[B]=!0,this.emitCancelledEvent())}},{key:"pause",value:function(){this[U]||this[D]||this[N]||this.emitPauseEvent()&&(this[D]=!0,this.emitPausedEvent())}},{key:"unpause",value:function(){!this[U]&&this[D]&&this.emitUnpauseEvent()&&(this[D]=!1,this.emitUnpausedEvent())}},{key:"done",get:function(){return!!this[U]}},{key:"type",get:function(){return this[_]}},{key:"totalTime",get:function(){return this[U]?this[U]-this[z]:Date.now()-this[z]}},{key:"waitTime",get:function(){return this[q]?this[q]-this[L]:Date.now()-this[L]}},{key:"loadTime",get:function(){return this[L]?this[N]?this[N]-this[q]:Date.now()-this[q]:0}},{key:"speed",get:function(){return this[L]?((t=this[U]?this[U]-this[x]:Date.now()-this[x])||(t=.01),this[j]/t):0;var t}},{key:"received",get:function(){return this[I]}},{key:"length",get:function(){return this[F]}},{key:"isPaused",get:function(){return this[D]}},{key:p,value:function(t,e,r){this[d](r,0,null);var n=Date.now(),i=1,o=({done:t,value:o})=>t?(e.close(),this[y]()):(e.enqueue(o),this[I]+=o.length,this[q]||this[g](o),this[d](r,this[I],o),this[x]=n,this[j]=i,n=Date.now(),i=o.length,a()),a=()=>this[B]?t.cancel():this[D]?new Promise(t=>{setTimeout(()=>t(a()),100)}):t.read().then(t=>o(t)).catch(t=>this[m](t));return a()}},{key:h,value:function(){if(this.emitRetryEvent()&&!(this[M]<=0))return this[A].abort(),this[v](),this[I]=0,this[M]--,this.open()}},{key:w,value:function(t){var e=t.body.getReader(),r=this[F]||Number(t.headers.get("Content-Length")),n=this[n]||t.headers.get("Content-Type");this[F]=r,this[_]=n,this[b](t.headers),this[O]&&this[O](this[k]);var i=this;return{response:t,stream:new ReadableStream({start:function(t){i[p](e,t,r)}})}}},{key:v,value:function(){this[N]=Date.now(),this.emitCloseEvent()}},{key:b,value:function(t){this.emitHeadersEvent(t)}},{key:d,value:function(t,e,r){this.emitProgressEvent(t,e,r)}},{key:y,value:function(){this[U]=Date.now(),this[v](),this.emitCompleteEvent(),this[i.PromiseMixin.Accept]()}},{key:m,value:function(t){return console.warn("[".concat(t.constructor.name,"] ").concat(t.code,": ").concat(t.message),t),this.emitErrorEvent(t)?this[S](t):this[h]()}},{key:S,value:function(t){return this[U]=Date.now(),this[v](),this.emitFailEvent(t),this[i.PromiseMixin.Reject](t)}},{key:g,value:function(t){clearInterval(this[C]),this[q]=Date.now(),this.emitFirstByteEvent(t)}},{key:"emitProgressEvent",value:function(t,e,r){var n=t?e/t:0,i=this.totalTime,o=this.loadTime,a=this.waitTime,s=this.speed;return this.dispatchEvent(new CustomEvent("progress",{detail:{length:t,received:e,done:n,speed:s,loadTime:o,waitTime:a,totalTime:i,value:r}}))}},{key:"emitOpenEvent",value:function(){return this.dispatchEvent(new CustomEvent("open"))}},{key:"emitCloseEvent",value:function(){return this.dispatchEvent(new CustomEvent("close"))}},{key:"emitFirstByteEvent",value:function(t){return this.dispatchEvent(new CustomEvent("firstByte",{detail:{received:t}}))}},{key:"emitHeadersEvent",value:function(t){return this.dispatchEvent(new CustomEvent("headers",{detail:{headers:t}}))}},{key:"emitCompleteEvent",value:function(){return this.dispatchEvent(new CustomEvent("complete"))}},{key:"emitErrorEvent",value:function(){return this.dispatchEvent(new CustomEvent("error",{cancelable:this[M]>0}))}},{key:"emitRetryEvent",value:function(){return this.dispatchEvent(new CustomEvent("retry",{cancelable:!0}))}},{key:"emitFailEvent",value:function(){return this.dispatchEvent(new CustomEvent("fail"))}},{key:"emitPauseEvent",value:function(){return this.dispatchEvent(new CustomEvent("pause",{cancelable:!0}))}},{key:"emitPausedEvent",value:function(){this.dispatchEvent(new CustomEvent("paused"))}},{key:"emitUnpauseEvent",value:function(){return this.dispatchEvent(new CustomEvent("unpause",{cancelable:!0}))}},{key:"emitUnpausedEvent",value:function(){this.dispatchEvent(new CustomEvent("unpaused"))}},{key:"emitCancelEvent",value:function(){return this.dispatchEvent(new CustomEvent("cancel",{cancelable:!0}))}},{key:"emitCancelledEvent",value:function(){return this.dispatchEvent(new CustomEvent("cancelled"))}}])&&a(r.prototype,o),l&&a(r,l),Object.defineProperty(r,"prototype",{writable:!1}),f}();e.Elicit=H,u(H,"backlog",[]),u(H,"running",new Set)}()}),require.register("matrix-api/Matrix.js",function(e,r,n){r=t(r,{},"matrix-api"),function(){"use strict";function t(e){"@babel/helpers - typeof";return(t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(e)}Object.defineProperty(e,"__esModule",{value:!0}),e.Matrix=void 0;var n=r("curvature/base/Uuid"),i=r("curvature/base/Mixin"),o=r("curvature/mixin/EventTargetMixin");function a(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null==r)return;var n,i,o=[],a=!0,s=!1;try{for(r=r.call(t);!(a=(n=r.next()).done)&&(o.push(n.value),!e||o.length!==e);a=!0);}catch(t){s=!0,i=t}finally{try{a||null==r.return||r.return()}finally{if(s)throw i}}return o}(t,e)||s(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function s(t,e){if(t){if("string"==typeof t)return c(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?c(t,e):void 0}}function c(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function l(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function u(t,e){return(u=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function f(e){var r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var n,i=h(e);if(r){var o=h(this).constructor;n=Reflect.construct(i,arguments,o)}else n=i.apply(this,arguments);return function(e,r){if(r&&("object"===t(r)||"function"==typeof r))return r;if(void 0!==r)throw new TypeError("Derived constructors may only return object or undefined");return p(e)}(this,n)}}function p(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function h(t){return(h=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function g(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var d=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&u(t,e)}(d,i.Mixin["with"](o.EventTargetMixin));var e,r,c,h=f(d);function d(t){var e,r,i,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,d),g(p(i=h.call(this)),"ssoUuid",String(new n.Uuid)),g(p(i),"isLoggedIn",!1),g(p(i),"loggingIn",null),i.baseUrl=t||"https://matrix.org/_matrix",i.clientUrl="".concat(i.baseUrl,"/client/v3"),i.mediaUrl="".concat(i.baseUrl,"/media/v3"),i.profileCache=new Map,i.mediaCache=new Map,i.storage=null!==(e=o.storage)&&void 0!==e?e:globalThis.sessionStorage,i.interval=null!==(r=o.interval)&&void 0!==r&&r,i}return e=d,(r=[{key:"isLoggedIn",get:function(){this.isLoggedIn&&this.dispatchEvent(new CustomEvent("logged-in"));var t=this.storage.getItem("matrix:access-token")||"false";JSON.parse(t);return this.storage.getItem("matrix:access-token")}},{key:"initSso",value:function(t){var e=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:window;if(this.storage.getItem("matrix:access-token"))return this.isLoggedIn=!0,void this.dispatchEvent(new CustomEvent("logged-in"));var n=new URLSearchParams({redirectUrl:t}),i="login/sso/redirect?".concat(n),o=window.screenX+window.outerWidth/2+200,a=window.screenY+window.outerHeight/2-300,s="width=".concat(400,",height=").concat(600,",screenX=").concat(o,",screenY=").concat(a);r.open("".concat(this.clientUrl,"/").concat(i),"matrix-login-".concat(this.ssoUuid),s);r.addEventListener("message",function t(n){if(n.origin===location.origin&&n.source!==window&&"string"==typeof n.data){var i=JSON.parse(n.data);"s.sso.complete"===i.type&&(e.storage.setItem("matrix:access-token",JSON.stringify(i.data)),e.isLoggedIn=!0,e.dispatchEvent(new CustomEvent("logged-in")),r.removeEventListener("message",t))}})}},{key:"completeSso",value:function(t){var e={type:"m.login.token",token:t,txn_id:(1/Math.random()).toString(36)};fetch("".concat(this.clientUrl,"/").concat("login"),{method:"POST",body:JSON.stringify(e)}).then(function(t){return t.json()}).then(function(t){window.opener.postMessage(JSON.stringify({type:"s.sso.complete",data:t}),location.origin),window.close()})}},{key:"logIn",value:function(t){var e=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:window;return this.loggingIn||(this.loggingIn=new Promise(function(t){e.loggingIn=null,e.addEventListener("logged-in",function(e){t(e)},{once:!0})})),this.initSso(t,r),this.loggingIn}},{key:"logOut",value:function(){this.storage.removeItem("matrix:access-token"),this.isLoggedIn=!1,this.loggingIn=null,this.dispatchEvent(new CustomEvent("logged-out"))}},{key:"getGuestToken",value:function(){var t=this,e=this.storage.getItem("matrix:access-token")||"false",r=JSON.parse(e);if(r&&r.isGuest)return Promise.resolve(r);var n=new URLSearchParams({kind:"guest"}),i=fetch("".concat(this.clientUrl,"/register?").concat(n),{method:"POST",body:"{}"}).then(function(t){return t.json()});return i.then(function(e){e.isGuest=!0,t.isLoggedIn=!0,t.storage.setItem("matrix:access-token",JSON.stringify(e))}),i}},{key:"getToken",value:function(){var t=this.storage.getItem("matrix:access-token")||"false",e=JSON.parse(t);return e?Promise.resolve(e):matrix.getGuestToken()}},{key:"listenForServerEvents",value:function(){var t=this,e=JSON.parse(this.storage.getItem("matrix:access-token")||"false");if(!e)return Promise.reject("No access token found.");var r=new URLSearchParams({access_token:e.access_token}),n="".concat(this.clientUrl,"/events?").concat(r);fetch(n).then(function(t){return t.json()}).then(function(e){return t.streamServerEvents(e)})}},{key:"listenForRoomEvents",value:function(t,e){var r=this,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";if(!e||!e.cancelled){var i=JSON.parse(this.storage.getItem("matrix:access-token")||"false");if(!i)return Promise.reject("No access token found.");var o=new URLSearchParams({access_token:i.access_token,room_id:t,from:n}),a="".concat(this.clientUrl,"/events?").concat(o);return e=e||{cancelled:!1},fetch(a).then(function(t){return t.json()}).then(function(n){return r.streamServerEvents(n,t,e)}),e}}},{key:"streamServerEvents",value:function(t,e,r){var i=this;r&&r.cancelled||(this.interval?setTimeout(function(){e?i.listenForRoomEvents(e,r,t.end):i.listenForServerEvents()},this.interval):e?this.listenForRoomEvents(e,r,t.end):this.listenForServerEvents(),t.chunk&&t.chunk.forEach(function(t){var e={};t.event_id||(t.event_id="local:".concat(new n.Uuid)),Object.assign(e,t),i.dispatchEvent(new CustomEvent("matrix-event",{detail:e})),i.dispatchEvent(new CustomEvent(e.type,{detail:e}))}))}},{key:"getUserProfile",value:function(t){if(this.profileCache.has(t))return this.profileCache.get(t);var e=fetch("".concat(this.clientUrl,"/profile/").concat(t)).then(function(t){return t.json()});return this.profileCache.set(t,e),e}},{key:"getUserData",value:function(t){var e=JSON.parse(this.storage.getItem("matrix:access-token")||"false");if(!e)return Promise.reject("No access token found.");var r=new URLSearchParams({access_token:e.access_token});return fetch("".concat(this.clientUrl,"/user/").concat(e.user_id,"/account_data/").concat(t,"?").concat(r)).then(function(t){return t.json()})}},{key:"putUserData",value:function(t,e){var r=JSON.parse(this.storage.getItem("matrix:access-token")||"false");if(r){var n=new URLSearchParams({access_token:r.access_token}),i="".concat(this.clientUrl,"/user/").concat(r.user_id,"/account_data/").concat(t,"?").concat(n);return fetch(i,{method:"PUT",body:e}).then(function(t){if(!t.ok){var e=new Error("HTTP status code: "+t.status);throw e.status=t.status,e.response=t,e}return t}).then(function(t){return t.json()})}}},{key:"getMediaUrl",value:function(t){var e=new URL(t);return"".concat(this.mediaUrl,"/download/").concat(e.pathname.substr(2))}},{key:"getMedia",value:function(t){if(this.mediaCache.has(t))return this.mediaCache.get(t);var e=fetch(this.getMediaUrl(t)).then(function(t){return Promise.all([t.arrayBuffer(),t.headers.get("Content-type")])}).then(function(t){var e=a(t,2),r=e[0],n=e[1];return URL.createObjectURL(new Blob([r],{type:n}))});return this.mediaCache.set(t,e),e}},{key:"postMedia",value:function(t,e){var r=this.storage.getItem("matrix:access-token")||"false",n=JSON.parse(r);if(n){var i=new URLSearchParams({access_token:n.access_token}),o="".concat(this.mediaUrl,"/upload?").concat(i),a=new Headers({"Content-Type":t.type});return fetch(o,{method:"POST",headers:a,body:t}).then(function(t){return t.json()})}}},{key:"putEvent",value:function(t,e,r){var n=this.storage.getItem("matrix:access-token")||"false",i=JSON.parse(n);if(i){var o=new URLSearchParams({access_token:i.access_token}),a="".concat(this.clientUrl,"/rooms/").concat(t,"/send/").concat(e,"/").concat(Math.random().toString(36),"?").concat(o),s=g({method:"PUT",headers:new Headers({"Content-Type":"application/json"}),keepalive:!0,body:JSON.stringify(r)},"keepalive",!0);return fetch(a,s).then(function(t){return t.json()})}}},{key:"getEvent",value:function(t,e){var r=this.storage.getItem("matrix:access-token")||"false",n=JSON.parse(r);if(n){var i=new URLSearchParams({access_token:n.access_token}),o="".concat(this.clientUrl,"/rooms/").concat(t,"/event/").concat(e,"?").concat(i),a=new Headers({"Content-Type":"application/json"});return fetch(o,{method:"GET",headers:a}).then(function(t){return t.json()})}}},{key:"sync",value:function(){var t=this.storage.getItem("matrix:access-token")||"false",e=JSON.parse(t);if(!e)return Promise.resolve();var r=new URLSearchParams({full_state:!0,access_token:e.access_token}),n="".concat(this.clientUrl,"/sync?").concat(r);return fetch(n).then(function(t){return t.json()})}},{key:"getRoomState",value:function(t){var e=this.storage.getItem("matrix:access-token")||"false",r=JSON.parse(e);if(!r)return Promise.resolve();var n=new URLSearchParams({access_token:r.access_token}),i="".concat(this.clientUrl,"/rooms/").concat(t,"/state?").concat(n);return fetch(i).then(function(t){return t.json()})}},{key:"syncRoom",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;if(!this.isLoggedIn)return Promise.reject("Logged out.");var n=JSON.parse(this.storage.getItem("matrix:access-token")||"false");if(!n)return Promise.reject("No access token found.");var i=new URLSearchParams({access_token:n.access_token,room_id:t,dir:"b",from:e||"",filter:r?JSON.stringify(r):""}),o="".concat(this.clientUrl,"/rooms/").concat(t,"/messages?").concat(i),a=new AbortController,s=a.signal,c=function(){return a.abort()};this.addEventListener("logged-out",c,{once:!0});var l=fetch(o,{signal:s}).then(function(t){return t.json()});return l.finally(this.removeEventListener("logged-out",c)),l}},{key:"syncRoomHistory",value:function(t){var e=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null;return this.syncRoom(t,i,o).then(function(i){if(!e.isLoggedIn)return Promise.reject("Logged out.");var a=new CustomEvent("roomSyncFrame",{detail:{frame:i},cancelable:!0});if(e.dispatchEvent(a)){if(r&&i.chunk){var c,l=function(t,e){var r="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!r){if(Array.isArray(t)||(r=s(t))||e&&t&&"number"==typeof t.length){r&&(t=r);var n=0,i=function(){};return{s:i,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,c=!1;return{s:function(){r=r.call(t)},n:function(){var t=r.next();return a=t.done,t},e:function(t){c=!0,o=t},f:function(){try{a||null==r.return||r.return()}finally{if(c)throw o}}}}(i.chunk);try{for(l.s();!(c=l.n()).done;){var u=c.value;if(!e.isLoggedIn)return Promise.reject("Logged out.");if(n&&u.origin_server_ts<=n)return Promise.resolve();if(!1===r(u))return Promise.resolve()}}catch(t){l.e(t)}finally{l.f()}}return new Promise(function(a){var s;return setTimeout(function(){return a(i.chunk.length&&e.syncRoomHistory(t,r,n,i.end,o))},null!==(s=e.interval)&&void 0!==s?s:0)})}})}},{key:"getCurrentUserId",value:function(){var t=this.storage.getItem("matrix:access-token")||"false",e=JSON.parse(t);if(e)return e.user_id}},{key:"createRoom",value:function(t,e,r){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},i=JSON.stringify({name:t,topic:e,visibility:r,initial_state:n}),o=JSON.parse(this.storage.getItem("matrix:access-token")||"false");if(!o)return Promise.resolve();var a=new URLSearchParams({access_token:o.access_token}),s="".concat(this.clientUrl,"/createRoom?").concat(a);return fetch(s,{body:i,method:"POST"}).then(function(t){return t.json()})}},{key:"joinRoom",value:function(t){var e=JSON.parse(this.storage.getItem("matrix:access-token")||"false");if(!e)return Promise.reject("No access token found.");var r=new URLSearchParams({access_token:e.access_token});fetch("".concat(this.clientUrl,"/rooms/").concat(t,"/join?").concat(r),{method:"POST"}).then(function(t){return t.json()})}},{key:"leaveRoom",value:function(t){var e=JSON.parse(this.storage.getItem("matrix:access-token")||"false");if(!e)return Promise.reject("No access token found.");var r=new URLSearchParams({access_token:e.access_token});fetch("".concat(this.clientUrl,"/rooms/").concat(t,"/leave?").concat(r),{method:"POST"}).then(function(t){return t.json()})}},{key:"whoAmI",value:function(){var t=JSON.parse(this.storage.getItem("matrix:access-token")||"false");if(!t)return Promise.reject("No access token found.");var e=new URLSearchParams({access_token:t.access_token});return fetch("".concat(this.clientUrl,"/account/whoami?").concat(e)).then(function(t){return t.json()})}}])&&l(e.prototype,r),c&&l(e,c),Object.defineProperty(e,"prototype",{writable:!1}),d}();e.Matrix=d}()}),require.register("sixgram/Actions.js",function(e,r,n){r=t(r,{},"sixgram"),function(){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.HOME=e.LEAVE=e.ENTER=e.INSERT=e.IGNORE=void 0;e.IGNORE=0;e.INSERT=1;e.ENTER=2;e.LEAVE=3;e.HOME=4}()}),require.register("sixgram/Chunk.js",function(e,r,n){r=t(r,{},"sixgram"),function(){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Chunk=void 0;e.Chunk=function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.depth=0,this.match=null,this.type="normal",this.list=[]}}()}),require.register("sixgram/Parser.js",function(e,r,n){r=t(r,{},"sixgram"),function(){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Parser=void 0;var t=r("./Chunk"),n=r("./Actions");function i(t){return function(t){if(Array.isArray(t))return o(t)}(t)||function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return o(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return o(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function o(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function a(t){"@babel/helpers - typeof";return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function s(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var c=function(){function e(t,r){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),this.tokens=t||{},this.modes=r||{}}var r,o,c;return r=e,(o=[{key:"parse",value:function(e){if(this.index=0,this.mode="normal",this.stack=[],!(this.mode in this.modes))throw new Error("Mode ".concat(this.mode," does not exist on parser."),this);var r=new t.Chunk,o=this.modes[this.mode];for(r.type=this.mode;this.index<e.length;){var s=!1;for(var c in o){var l=this.tokens[c],u=l.exec(e.substr(this.index));if(u&&!(u.index>0)){if(!o[c])throw new Error('Invalid token type "'.concat(c,'" found in mode "').concat(this.mode,'".'));var f=u[0],p="object"===a(o[c])?o[c]:[o[c]];s=!0,this.index+=f.length;var h="normal";for(var g in p){var d=p[g];if("string"!=typeof d)switch(d){case n.INSERT:r.list.push(f);break;case n.ENTER:var y=new t.Chunk;y.depth=r.depth+1,y.match=f,y.groups=i(f.match(l)).slice(1),y.mode=h,y.type=c,r.list.push(y),this.stack.push(r),r=y;break;case n.LEAVE:this.stack.length&&(r=this.stack.pop(),this.mode=r.type,o=this.modes[this.mode]);break;case n.HOME:this.stack.splice(0),o=this.modes.normal}else{if(!(d in this.modes))throw new Error('Mode "'.concat(d,'" does not exist.'));this.mode=d,o=this.modes[this.mode],h=d}}break}}if(!s)break}if(this.stack.length)throw new Error("Did not return to top of stack!");return this.stack.shift()||r}}])&&s(r.prototype,o),c&&s(r,c),e}();e.Parser=c}()}),require.register("sixgram/Renderer.js",function(e,r,n){r=t(r,{},"sixgram"),function(){"use strict";function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}Object.defineProperty(e,"__esModule",{value:!0}),e.Renderer=void 0;var r=function(){function e(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),this.ops=t||{}}var r,n,i;return r=e,(n=[{key:"process",value:function(t){var e="";for(var r in t.list){var n=t.list[r];if(this.ops[t.type]){var i=this.ops[t.type](n,t);!1!==i&&(e+=i)}else!1!==n&&(e+=n)}return e}}])&&t(r.prototype,n),i&&t(r,i),e}();e.Renderer=r}()}),require.register("subspace-client/Channel.js",function(e,r,n){r=t(r,{},"subspace-client"),function(){"use strict";function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}Object.defineProperty(e,"__esModule",{value:!0}),e.Channel=void 0;var r=function(){function e(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e)}var r,n,i;return r=e,i=[{key:"scalar",value:function(t,e){var r=new Uint8Array(t).buffer;return"float"==e?new Float64Array(r)[0]:"Int32"==e?new Int32Array(r)[0]:void 0}},{key:"namePart",value:function(t,e){return t.split(":")[e]||null}},{key:"isWildcard",value:function(t){return/\*/.exec(t)}},{key:"isRange",value:function(t){}},{key:"containsRange",value:function(t){}},{key:"compareNames",value:function(t,e){var r,n,i=/^(\d+)\-?(\d+)?$/,o=[],a=t.toString().split(":"),s=e.toString().split(":"),c=a.length;c<s.length&&(c=s.length);for(var l=0;l<c;l++){if(a.length>l)r=a[l];else{if("*"!=a[a.length-1])return!1;r=a[a.length-1]}if(s.length>l)n=s[l];else{if("*"!=s[s.length-1])return!1;n=s[s.length-1]}var u="*"!==r?r:n;if(r!==n&&"*"!==r&&"*"!==n){var f=i.exec(r),p=i.exec(n);if(!f||!p)return!1;var h=f[1],g=f[1],d=p[1],y=p[1];if(f[2]&&(g=f[2]),p[2]&&(y=p[2]),h>=d&&g<=y?u="".concat(h,"-").concat(g):h<=d&&g>y?u="".concat(d,"-").concat(y):g<=y&&g>=d?u="".concat(d,"-").concat(g):h<=y&&h>=d&&(u="".concat(h,"-").concat(y)),y<=g&&y>=h)u="".concat(h,"-").concat(y);else{if(!(d<=g&&d>=h))return!1;u="".concat(d,"-").concat(g)}}o.push(u)}return o.join(":")}}],(n=null)&&t(r.prototype,n),i&&t(r,i),e}();e.Channel=r}()}),require.register("subspace-client/Socket.js",function(e,r,n){r=t(r,{},"subspace-client"),function(){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Socket=void 0;var t=r("./Channel");function n(t){"@babel/helpers - typeof";return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function i(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function o(t,e,r){return e&&i(t.prototype,e),r&&i(t,r),t}var a=function(){function e(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),this.socket=t,t.binaryType="arraybuffer",this.data={},this.listenerCount={},this.openQueue=[],this._onSend=[]}return o(e,null,[{key:"get",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return this.sockets||(this.sockets={}),!e&&this.sockets[t]||(this.sockets[t]=new this(new WebSocket(t))),this.sockets[t]}}]),o(e,[{key:"subscribe",value:function(e,r,i){var o=e.split(":"),a=o.shift(),s=o.join(":");r instanceof Function&&(i=r,r=s),s&&(s in this.listenerCount||(this.listenerCount[s]=0),this.listenerCount[s]++,this.send("sub ".concat(s)));var c=function(e,r,i,o){return function(a){var s={};try{if("string"==typeof a.data)s=JSON.parse(a.data);else if(a.data instanceof ArrayBuffer){var c=new Uint16Array(a.data,4,1)[0];if(!r||t.Channel.compareNames(r,c))return void o(a,a.data.slice(6),c,new Uint16Array(a.data,0,1)[0]?"user":"server",new Uint16Array(a.data,2,1)[0],null,{})}else if("message"!==e)return void o(a)}catch(t){return void("message"!==e&&o(a))}"object"===n(s)?(r||o(a,s.message,null,s.origin,s.originId,null,s),r&&"channel"in s&&t.Channel.compareNames(r,s.channel)&&o(a,s.message,s.channel,s.origin,s.originId,s.originalChannel,s)):""===i&&o(a,a.data,null,"server",0,null,s)}}(a,r,s,i);return this.socket.addEventListener(a,c),c}},{key:"unsubscribe",value:function(t,e){var r=t.split(":"),n=r.shift(),i=r.join(":");i&&(this.listenerCount[i]--,i in this.listenerCount&&this.listenerCount[i]>0||(this.socket.removeEventListener(n,e),this.send("unsub ".concat(i))))}},{key:"publish",value:function(t,e){if(t==parseInt(t)){e instanceof ArrayBuffer?e=new Uint8Array(e):e.byteLength?e=new Uint8Array(e.buffer):Array.isArray(e)||(e=[e]);var r=new Uint8Array(new Uint16Array([t]).buffer),n=new Uint8Array(r.byteLength+e.byteLength);return n.set(r,0),n.set(e,r.byteLength),void this.send(n)}this.send("pub ".concat(t," ").concat(e))}},{key:"say",value:function(t,e,r){var n=[],i=[];if(Array.isArray(e)?Object.assign(n,e):(e.cc||e.bcc)&&(Array.isArray(e.cc)&&Object.assign(n,e.cc),Array.isArray(e.bcc)&&Object.assign(i,e.bcc)),!n&&!i){var o="CANNOT STRINGIFY USERLIST";try{o=JSON.stringify(e)}catch(t){userlistString+=" "+t.message}throw error("Invalid userlist provided:"+o)}var a=n.length?"".concat(n.length," ").concat(n.join(" ")):"0",s=i.length?"".concat(i.length," ").concat(i.join(" ")):"0";this.send("say ".concat(t," ").concat(a," ").concat(s," ").concat(r))}},{key:"send",value:function(t){var e=this;if(this.socket.readyState!==this.socket.OPEN)return new Promise(function(r,n){var i,o=(i=o,function(t){for(;e.openQueue.length;){var n=e.openQueue.shift();e.send(n)}e.socket.removeEventListener("open",i),r()});e.socket.addEventListener("open",o),e.openQueue.unshift(t)});for(var r in this._onSend)this._onSend[r](t);return this.socket.send(t),Promise.resolve()}},{key:"onSend",value:function(t){this._onSend.push(t)}},{key:"close",value:function(t){this.socket.close()}},{key:"ping",value:function(){}},{key:"pong",value:function(){}}]),e}();e.Socket=a}()}),require.register("subspace-console/Console.js",function(e,r,n){r=t(r,{},"subspace-console"),function(){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Console=void 0;var t=r("curvature/base/View"),n=r("curvature/base/Bag"),i=r("./view/MeltingText"),o=r("./view/EchoMessage"),a=r("./Task"),s=r("./Path"),c=r("./ansi/Renderer"),l=r("./ansi/Parser");function u(t,e,r){return(u=v()?Reflect.construct:function(t,e,r){var n=[null];n.push.apply(n,e);var i=new(Function.bind.apply(t,n));return r&&y(i,r.prototype),i}).apply(null,arguments)}function f(t){return function(t){if(Array.isArray(t))return g(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||h(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function p(t){"@babel/helpers - typeof";return(p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function h(t,e){if(t){if("string"==typeof t)return g(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?g(t,e):void 0}}function g(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function d(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function y(t,e){return(y=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function b(t){var e=v();return function(){var r,n=m(t);if(e){var i=m(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===p(e)||"function"==typeof e))return e;return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function v(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}function m(t){return(m=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var w=function(e){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&y(t,e)}(w,t.View);var r,g,v,m=b(w);function w(){var t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,w),t=m.call(this,r);var i={init:!1,path:s.Path},o=Object.assign({},i,e);return t.template='<div class = "terminal [[inverted]]" cv-on = "click:focus(event)">\n\t<div class = "output" cv-each = "output:line:l" cv-ref = "output:curvature/base/Tag">\n\t\t<p>[[line]]</p>\n\t</div>\n\t<div class = "bottom">\n\t\t<div>[[prompt]]&nbsp;</div>\n\t\t<div>\n\t\t\t<form cv-on = "submit:cancel(event)">\n\t\t\t\t<textarea\n\t\t\t\t\tcv-bind = "input"\n\t\t\t\t\tcv-on   = ":keydown(event);:keyup(event)"\n\t\t\t\t\tcv-ref  = "input:curvature/base/Tag"\n\t\t\t\t\trow     = "1"\n\t\t\t\t></textarea>\n\t\t\t</form>\n\n\t\t\t<form cv-on = "submit:cancel(event)">\n\t\t\t\t<input\n\t\t\t\t\tautocomplete = "one-time-code"\n\t\t\t\t\tname    = "pw-input"\n\t\t\t\t\ttype    = "password"\n\t\t\t\t\tcv-bind = "input"\n\t\t\t\t\tcv-ref  = "password:curvature/base/Tag"\n\t\t\t\t\tcv-on   = ":keydown(event,false);:keyup(event,false)"\n\t\t\t\t/>\n\t\t\t</form>\n\n\t\t\t<input\n\t\t\t\tcv-on  = "input:fileLoaded(event)"\n\t\t\t\tcv-ref = "file:curvature/base/Tag"\n\t\t\t\tname   = "file-input"\n\t\t\t\ttype   = "file"\n\t\t\t\tstyle  = "display: none"\n\t\t\t/>\n\t\t</div>\n\t</div>\n</div>\n\n<div class = "scanlines"></div>\n',t.args.input="",t.args.output=[],t.args.inverted="",t.localEcho=!0,t.postToken=null,t.args.prompt="::",t.routes={},t.args.passwordMode=!1,t.tasks=[],t.external=e.external||[],t.taskList=new n.Bag,t.taskList.type=a.Task,t.max=10,t.historyCursor=-1,t.history=[],t.env=new Map,t.args.output.___after(function(e,r,n,i){"push"===r&&t.onNextFrame(function(){return t.scrollToBottom()})}),o.init&&t.runScript(o.init),t.scroller=o.scroller||document.body,t.path=o.path||{},t.originalInput="",t}return r=w,(g=[{key:"runCommand",value:function(t){var e=this;return 0!=this.historyCursor&&this.history.unshift(t),new Promise(function(r){var n;if("/"===t.substring(0,1)){if(!e.args.passwordMode){var i=new o.EchoMessage({message:t});e.args.output.push(i)}var s=e.unescape(t.substr(1));n=e.interpret(s)}else if(e.tasks.length){if(!e.args.passwordMode){var c=new o.EchoMessage({message:t,prompt:e.tasks[0].prompt});e.args.output.push(c)}var l=e.unescape(t);n=e.tasks[0].write(l)||Promise.resolve()}else{e.args.passwordMode||e.args.output.push(":: ".concat(t));var u=e.unescape(t);n=e.interpret(u)}n instanceof a.Task||n instanceof Promise||(n=Promise.resolve(n)),e.historyCursor=-1,e.originalInput=e.args.input="",n.then(function(t){return r(t)})}).catch(function(t){e.args.output.push("Unexpected error: ".concat(t))})}},{key:"runScript",value:function(t){var e=this;fetch(t+"?api=txt").then(function(t){return t.text()}).then(function(t){!function t(r){if(r.length){var n=r.shift();n&&"!"==n[0]?(e.args.output.push(n.substring(1)),t(r)):n?e.runCommand(n).then(function(){return t(r)}):t(r)}}(t.split("\n"))})}},{key:"postRender",value:function(){var t=this,e=this.tags.input.element,r=this.tags.password.element;this.args.bindTo("input",function(t){e.style.height="auto",e.style.height=e.scrollHeight+"px"},{frame:1}),this.args.bindTo("passwordMode",function(t){t?(e.style.display="none",r.style.display="unset"):(e.style.display="unset",r.style.display="none")}),this.args.bindTo("passwordMode",function(e){t.focus(null,e)},{frame:1})}},{key:"focus",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;t&&t.preventDefault(),t&&t.target&&t.target.matches("input,textarea")||window.getSelection().toString()||(e||this.args.passwordMode?this.tags.password.element.focus():this.tags.input.element.focus())}},{key:"interpret",value:function(t){var e=this;this.historyCursor=-1;var r,n=null,i=function(t,e){var r="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!r){if(Array.isArray(t)||(r=h(t))||e&&t&&"number"==typeof t.length){r&&(t=r);var n=0,i=function(){};return{s:i,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){r=r.call(t)},n:function(){var t=r.next();return a=t.done,t},e:function(t){s=!0,o=t},f:function(){try{a||null==r.return||r.return()}finally{if(s)throw o}}}}(t.split(/\s*\;\s*/));try{var o=function(){var t=r.value,i=e.pipe(t.split(/\s*\|\s*/));if(i){e.tasks.unshift(i);var o=function(t){var r=t.detail;if("object"===p(r))e.args.output.push(r);else{var n=i.outPrompt||i.prompt||e.args.prompt||"::",o=e.parseAnsi(r,n);e.args.output.push(o)}},a=function(t){console.error(t);var r=t.detail,n=i.errorPrompt||"!!",o=e.parseAnsi(r,n);e.args.output.push(o)};i.addEventListener("output",o),i.addEventListener("error",a),i.execute(),i.catch(function(t){return console.error(t)}),i.catch(function(t){return e.args.output.push("!! ".concat(t))}),e.args.prompt=i.prompt,i.finally(function(t){i.removeEventListener("error",a),i.removeEventListener("output",o),e.tasks.shift(),e.tasks.length?e.args.prompt=e.tasks[0].prompt:e.args.prompt="::"})}n=i};for(i.s();!(r=i.n()).done;)o()}catch(t){i.e(t)}finally{i.f()}return n}},{key:"pipe",value:function(t,e){var r=null,n=t.shift().trim().split(" "),o=n.shift().trim();if(!(o.length>1&&"?"==o.substr(-1))){if(o in this.path)r=u(this.path[o],[n,e,this].concat(f(this.external)));else switch(o){case"clear":this.args.output.splice(0);break;case"z":this.args.output.splice(0),this.args.output.push(new i.MeltingText({input:"!!!"}));break;case"commands":case"?":for(var a in this.args.output.push("   Subspace Console 0.29a ©2018-2021 Sean Morris"),this.path)this.args.output.push(" * ".concat(a," - ").concat(this.path[a].helpText)),this.path[a].useText&&this.args.output.push("   ".concat(this.path[a].useText)),this.args.output.push("  ");break;default:this.args.output.push("!! Bad command: ".concat(o))}return t.length?this.pipe(t,r):r}(o=o.substr(0,o.length-1))in this.path&&(this.args.output.push("?? ".concat(this.path[o].helpText)),this.args.output.push("?? ".concat(this.path[o].useText)))}},{key:"keydown",value:function(t,e){switch(t.key){case"Tab":if(e)break;t.preventDefault();break;case"Enter":t.ctrlKey||t.preventDefault()}}},{key:"keyup",value:function(t,e){var r=this;switch(t.key){case"ArrowDown":if(this.historyCursor--,this.historyCursor<=-1)return this.historyCursor=-1,void(this.args.input=this.originalInput);this.args.input=this.history[this.historyCursor],this.onNextFrame(function(){var t=r.tags.input.element;t.selectionStart=t.value.length,t.selectionEnd=t.value.length});break;case"ArrowUp":if(-1==this.historyCursor&&(this.originalInput=this.args.input),this.historyCursor++,this.historyCursor>=this.history.length)return void this.historyCursor--;this.args.input=this.history[this.historyCursor],this.onNextFrame(function(){var t=r.tags.input.element;t.selectionStart=t.value.length,t.selectionEnd=t.value.length});break;case"Escape":this.tasks.length&&(this.tasks[0].finally(function(){return r.args.output.push(":: Killed.")}),this.tasks[0].signal(a.Task.KILL)),this.args.passwordMode=!1;break;case"Tab":if(t.preventDefault(),!this.args.input)break;var n=this.args.input,i="";if("/"===this.args.input[0]){n=this.args.input.substr(1),i=this.args.input.substr(0,1);break}for(var o in this.path)if(!(o.length<n.length)&&n===o.substr(0,n.length)){this.args.input=i+o;break}break;case"Enter":if(t.ctrlKey)return;t.preventDefault(),this.runCommand(this.args.input),this.args.input="";break;default:this.historyCursor=-1,this.scrollToBottom()}}},{key:"cancel",value:function(t){t.preventDefault(),t.stopPropagation()}},{key:"scrollToBottom",value:function(){var t=(this.scroller===document.body?window:this.scroller)||window,e=this.scroller.scrollHeight;this.onNextFrame(function(){t.scrollTo({behavior:"smooth",left:0,top:e})})}},{key:"parseAnsi",value:function(e,r){e=e.replace(/</g,"&lt;").replace(/>/g,"&gt;");var n=new c.Renderer,i=l.Parser.parse(e),o=n.process(i);if(!r)return t.View.from('<span class ="ansi">'.concat(o,"</span>"));var a=r.replace(/</g,"&lt;").replace(/>/g,"&gt;");return t.View.from("".concat(a,' <span class ="ansi">').concat(o,"</span>"))}},{key:"unescape",value:function(t){return t.replace(/\\n/gm,"\n").replace(/\\r/gm,"\r").replace(/\\t/gm,"\t").replace(/\\e/gm,"").replace(/\\u001b/gm,"")}},{key:"write",value:function(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];for(var n=0,i=e;n<i.length;n++){var o=i[n];if("string"!=typeof o)this.args.output.push(o);else{var a=this.unescape(o),s=this.parseAnsi(a);this.args.output.push(s)}}}}])&&d(r.prototype,g),v&&d(r,v),w}();e.Console=w}()}),require.register("subspace-console/Path.js",function(e,r,n){r=t(r,{},"subspace-console"),function(){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Path=void 0;r("subspace-console/Task");e.Path={}}()}),require.register("subspace-console/Task.js",function(e,n,i){n=t(n,{},"subspace-console"),function(){"use strict";function t(e){"@babel/helpers - typeof";return(t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(e)}Object.defineProperty(e,"__esModule",{value:!0}),e.Task=void 0;n("curvature/base/Bindable");var i=n("curvature/base/Mixin"),o=n("./mixin/Target"),a=n("./mixin/TaskSignals");function s(t){return function(t){if(Array.isArray(t))return c(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return c(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return c(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function c(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function l(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function u(t,e){return(u=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function f(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=g(t);if(e){var i=g(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return p(this,r)}}function p(e,r){return!r||"object"!==t(r)&&"function"!=typeof r?h(e):r}function h(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function g(t){return(g=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function d(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var y=0,b=(Symbol("target"),Symbol("accept")),v=Symbol("reject"),m=Symbol("execute"),w=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&u(t,e)}(w,i.Mixin["with"](o.Target,a.TaskSignals));var e,n,c,g=f(w);function w(){var t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,w),d(h(t=g.call(this)),"title","Generic Task"),d(h(t),"prompt","::"),t.args=e,t.prev=r,t.term=n,t.status=-1,t.thread=new Promise(function(e,r){t[b]=e,t[v]=r}),t.id=y++,p(t,h(t))}return e=w,(n=[{key:"then",value:function(t){return this.thread.then(t)}},{key:"catch",value:function(t){return this.thread.catch(t)}},{key:"finally",value:function(t){return this.thread.finally(t)}},{key:"print",value:function(t){this.dispatchEvent(new CustomEvent("output",{detail:t}))}},{key:"printErr",value:function(t){this.dispatchEvent(new CustomEvent("error",{detail:t}))}},{key:"write",value:function(t){return this.main(t)}},{key:"signal",value:function(t){switch(this["signal::".concat(t)]&&this["signal::".concat(t)](),t){case"close":this.dispatchEvent(new CustomEvent("close"))&&(this.status>0?this[v]():this[b]());break;case"kill":this.status>0?this[v]():this[b]()}}},{key:"execute",value:function(){return this[m](this.prev)}},{key:m,value:function(){var t=this,e=function(e){var r=e.detail;return t.write(r)},n=this.init.apply(this,s(this.args)),i=this.prev;return i&&i.addEventListener("output",e),n instanceof Promise||(n=Promise.resolve(n)),i?(i[m](),Promise.allSettled([i,n]).finally(function(){return i.then(function(e){return t[b](e)}),i.catch(function(e){return t[v](r)}),i.removeEventListener("output",e),t.done()})):Promise.allSettled([n]).then(function(e){try{t.main(void 0),t[b]()}catch(e){t[v]()}t.done()})}},{key:"init",value:function(){}},{key:"main",value:function(){arguments.length>0&&void 0!==arguments[0]&&arguments[0]}},{key:"done",value:function(t){return this.status}}])&&l(e.prototype,n),c&&l(e,c),w}();e.Task=w}()}),require.register("subspace-console/ansi/Colors255.js",function(e,r,n){r=t(r,{},"subspace-console"),function(){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Colors255=void 0;e.Colors255={0:{r:0,g:0,b:0},1:{r:128,g:0,b:0},2:{r:0,g:128,b:0},3:{r:128,g:128,b:0},4:{r:0,g:0,b:128},5:{r:128,g:0,b:128},6:{r:0,g:128,b:128},7:{r:192,g:192,b:192},8:{r:128,g:128,b:128},9:{r:255,g:0,b:0},10:{r:0,g:255,b:0},11:{r:255,g:255,b:0},12:{r:0,g:0,b:255},13:{r:255,g:0,b:255},14:{r:0,g:255,b:255},15:{r:255,g:255,b:255},16:{r:0,g:0,b:0},17:{r:0,g:0,b:95},18:{r:0,g:0,b:135},19:{r:0,g:0,b:175},20:{r:0,g:0,b:215},21:{r:0,g:0,b:255},22:{r:0,g:95,b:0},23:{r:0,g:95,b:95},24:{r:0,g:95,b:135},25:{r:0,g:95,b:175},26:{r:0,g:95,b:215},27:{r:0,g:95,b:255},28:{r:0,g:135,b:0},29:{r:0,g:135,b:95},30:{r:0,g:135,b:135},31:{r:0,g:135,b:175},32:{r:0,g:135,b:215},33:{r:0,g:135,b:255},34:{r:0,g:175,b:0},35:{r:0,g:175,b:95},36:{r:0,g:175,b:135},37:{r:0,g:175,b:175},38:{r:0,g:175,b:215},39:{r:0,g:175,b:255},40:{r:0,g:215,b:0},41:{r:0,g:215,b:95},42:{r:0,g:215,b:135},43:{r:0,g:215,b:175},44:{r:0,g:215,b:215},45:{r:0,g:215,b:255},46:{r:0,g:255,b:0},47:{r:0,g:255,b:95},48:{r:0,g:255,b:135},49:{r:0,g:255,b:175},50:{r:0,g:255,b:215},51:{r:0,g:255,b:255},52:{r:95,g:0,b:0},53:{r:95,g:0,b:95},54:{r:95,g:0,b:135},55:{r:95,g:0,b:175},56:{r:95,g:0,b:215},57:{r:95,g:0,b:255},58:{r:95,g:95,b:0},59:{r:95,g:95,b:95},60:{r:95,g:95,b:135},61:{r:95,g:95,b:175},62:{r:95,g:95,b:215},63:{r:95,g:95,b:255},64:{r:95,g:135,b:0},65:{r:95,g:135,b:95},66:{r:95,g:135,b:135},67:{r:95,g:135,b:175},68:{r:95,g:135,b:215},69:{r:95,g:135,b:255},70:{r:95,g:175,b:0},71:{r:95,g:175,b:95},72:{r:95,g:175,b:135},73:{r:95,g:175,b:175},74:{r:95,g:175,b:215},75:{r:95,g:175,b:255},76:{r:95,g:215,b:0},77:{r:95,g:215,b:95},78:{r:95,g:215,b:135},79:{r:95,g:215,b:175},80:{r:95,g:215,b:215},81:{r:95,g:215,b:255},82:{r:95,g:255,b:0},83:{r:95,g:255,b:95},84:{r:95,g:255,b:135},85:{r:95,g:255,b:175},86:{r:95,g:255,b:215},87:{r:95,g:255,b:255},88:{r:135,g:0,b:0},89:{r:135,g:0,b:95},90:{r:135,g:0,b:135},91:{r:135,g:0,b:175},92:{r:135,g:0,b:215},93:{r:135,g:0,b:255},94:{r:135,g:95,b:0},95:{r:135,g:95,b:95},96:{r:135,g:95,b:135},97:{r:135,g:95,b:175},98:{r:135,g:95,b:215},99:{r:135,g:95,b:255},100:{r:135,g:135,b:0},101:{r:135,g:135,b:95},102:{r:135,g:135,b:135},103:{r:135,g:135,b:175},104:{r:135,g:135,b:215},105:{r:135,g:135,b:255},106:{r:135,g:175,b:0},107:{r:135,g:175,b:95},108:{r:135,g:175,b:135},109:{r:135,g:175,b:175},110:{r:135,g:175,b:215},111:{r:135,g:175,b:255},112:{r:135,g:215,b:0},113:{r:135,g:215,b:95},114:{r:135,g:215,b:135},115:{r:135,g:215,b:175},116:{r:135,g:215,b:215},117:{r:135,g:215,b:255},118:{r:135,g:255,b:0},119:{r:135,g:255,b:95},120:{r:135,g:255,b:135},121:{r:135,g:255,b:175},122:{r:135,g:255,b:215},123:{r:135,g:255,b:255},124:{r:175,g:0,b:0},125:{r:175,g:0,b:95},126:{r:175,g:0,b:135},127:{r:175,g:0,b:175},128:{r:175,g:0,b:215},129:{r:175,g:0,b:255},130:{r:175,g:95,b:0},131:{r:175,g:95,b:95},132:{r:175,g:95,b:135},133:{r:175,g:95,b:175},134:{r:175,g:95,b:215},135:{r:175,g:95,b:255},136:{r:175,g:135,b:0},137:{r:175,g:135,b:95},138:{r:175,g:135,b:135},139:{r:175,g:135,b:175},140:{r:175,g:135,b:215},141:{r:175,g:135,b:255},142:{r:175,g:175,b:0},143:{r:175,g:175,b:95},144:{r:175,g:175,b:135},145:{r:175,g:175,b:175},146:{r:175,g:175,b:215},147:{r:175,g:175,b:255},148:{r:175,g:215,b:0},149:{r:175,g:215,b:95},150:{r:175,g:215,b:135},151:{r:175,g:215,b:175},152:{r:175,g:215,b:215},153:{r:175,g:215,b:255},154:{r:175,g:255,b:0},155:{r:175,g:255,b:95},156:{r:175,g:255,b:135},157:{r:175,g:255,b:175},158:{r:175,g:255,b:215},159:{r:175,g:255,b:255},160:{r:215,g:0,b:0},161:{r:215,g:0,b:95},162:{r:215,g:0,b:135},163:{r:215,g:0,b:175},164:{r:215,g:0,b:215},165:{r:215,g:0,b:255},166:{r:215,g:95,b:0},167:{r:215,g:95,b:95},168:{r:215,g:95,b:135},169:{r:215,g:95,b:175},170:{r:215,g:95,b:215},171:{r:215,g:95,b:255},172:{r:215,g:135,b:0},173:{r:215,g:135,b:95},174:{r:215,g:135,b:135},175:{r:215,g:135,b:175},176:{r:215,g:135,b:215},177:{r:215,g:135,b:255},178:{r:215,g:175,b:0},179:{r:215,g:175,b:95},180:{r:215,g:175,b:135},181:{r:215,g:175,b:175},182:{r:215,g:175,b:215},183:{r:215,g:175,b:255},184:{r:215,g:215,b:0},185:{r:215,g:215,b:95},186:{r:215,g:215,b:135},187:{r:215,g:215,b:175},188:{r:215,g:215,b:215},189:{r:215,g:215,b:255},190:{r:215,g:255,b:0},191:{r:215,g:255,b:95},192:{r:215,g:255,b:135},193:{r:215,g:255,b:175},194:{r:215,g:255,b:215},195:{r:215,g:255,b:255},196:{r:255,g:0,b:0},197:{r:255,g:0,b:95},198:{r:255,g:0,b:135},199:{r:255,g:0,b:175},200:{r:255,g:0,b:215},201:{r:255,g:0,b:255},202:{r:255,g:95,b:0},203:{r:255,g:95,b:95},204:{r:255,g:95,b:135},205:{r:255,g:95,b:175},206:{r:255,g:95,b:215},207:{r:255,g:95,b:255},208:{r:255,g:135,b:0},209:{r:255,g:135,b:95},210:{r:255,g:135,b:135},211:{r:255,g:135,b:175},212:{r:255,g:135,b:215},213:{r:255,g:135,b:255},214:{r:255,g:175,b:0},215:{r:255,g:175,b:95},216:{r:255,g:175,b:135},217:{r:255,g:175,b:175},218:{r:255,g:175,b:215},219:{r:255,g:175,b:255},220:{r:255,g:215,b:0},221:{r:255,g:215,b:95},222:{r:255,g:215,b:135},223:{r:255,g:215,b:175},224:{r:255,g:215,b:215},225:{r:255,g:215,b:255},226:{r:255,g:255,b:0},227:{r:255,g:255,b:95},228:{r:255,g:255,b:135},229:{r:255,g:255,b:175},230:{r:255,g:255,b:215},231:{r:255,g:255,b:255},232:{r:8,g:8,b:8},233:{r:18,g:18,b:18},234:{r:28,g:28,b:28},235:{r:38,g:38,b:38},236:{r:48,g:48,b:48},237:{r:58,g:58,b:58},238:{r:68,g:68,b:68},239:{r:78,g:78,b:78},240:{r:88,g:88,b:88},241:{r:98,g:98,b:98},242:{r:108,g:108,b:108},243:{r:118,g:118,b:118},244:{r:128,g:128,b:128},245:{r:138,g:138,b:138},246:{r:148,g:148,b:148},247:{r:158,g:158,b:158},248:{r:168,g:168,b:168},249:{r:178,g:178,b:178},250:{r:188,g:188,b:188},251:{r:198,g:198,b:198},252:{r:208,g:208,b:208},253:{r:218,g:218,b:218},254:{r:228,g:228,b:228},255:{r:238,g:238,b:238}}}()}),require.register("subspace-console/ansi/Parser.js",function(e,r,n){r=t(r,{},"subspace-console"),function(){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Parser=void 0;var t=r("sixgram/Actions"),n=r("sixgram/Parser"),i={normal:{reset:[t.IGNORE,t.ENTER,t.LEAVE],escaped:[t.IGNORE,t.ENTER,t.LEAVE],graphics:[t.IGNORE,t.ENTER,t.LEAVE],characters:[t.INSERT]}},o=new n.Parser({reset:/\u001b\[(0);?m/,graphics:/\u001b\[(\d+);?(\d+)?;?([\d;]*)?./,escaped:/\\([^e])/,characters:/[\s\S]+?(?=\x1B|$)/},i);e.Parser=o}()}),require.register("subspace-console/ansi/Renderer.js",function(e,r,n){r=t(r,{},"subspace-console"),function(){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Renderer=void 0;var t=r("sixgram/Renderer"),n=r("./pallete"),i=r("./Colors255");function o(t){"@babel/helpers - typeof";return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function a(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null==r)return;var n,i,o=[],a=!0,s=!1;try{for(r=r.call(t);!(a=(n=r.next()).done)&&(o.push(n.value),!e||o.length!==e);a=!0);}catch(t){s=!0,i=t}finally{try{a||null==r.return||r.return()}finally{if(s)throw i}}return o}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return s(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return s(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function s(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function c(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function l(t,e){return(l=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function u(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=p(t);if(e){var i=p(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===o(e)||"function"==typeof e))return e;return f(t)}(this,r)}}function f(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function p(t){return(p=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var h="function"==typeof window.AudioContext&&new window.AudioContext;if(h){var g=h.createGain();g.connect(h.destination),g.gain.value=.1}var d=function(e){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&l(t,e)}(d,t.Renderer);var r,s,p,g=u(d);function d(){var t,e,r,n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,d),t=g.call(this,{normal:function(e,r){return t.setGraphicsMode(e,r)}}),e=f(t),n={},(r="style")in e?Object.defineProperty(e,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[r]=n,t}return r=d,(s=[{key:"reset",value:function(){for(var t=0,e=Object.entries(this.style);t<e.length;t++){var r=a(e[t],1)[0];delete this.style[r]}}},{key:"beep",value:function(){if(h){var t=h.createOscillator();t.connect(gainNode),t.frequency.value=840,t.type="square",t.start(h.currentTime),t.stop(h.currentTime+.2)}}},{key:"setGraphicsMode",value:function(t,e){if("string"==typeof t){if(""===t)return!1;for(var r="",s=0,c=Object.entries(this.style);s<c.length;s++){var l=a(c[s],2),u=l[0],f=l[1];r+="".concat(u,": ").concat(f,"; ")}return'<span class = "ansi" style = "'.concat(r,'">').concat(t,"</span>")}if("object"===o(t)){if("escaped"===t.type&&"a"===t.groups[0]&&this.beep(),"graphics"===t.type||"reset"===t.type)for(var p=0;p<t.groups.length;p++){var h=Number(t.groups[p]);if(""===t.groups[p])return!1;switch(h){case 0:for(var g in this.style)delete this.style[g];break;case 1:this.style.filter="contrast(1.25)",this.style["font-weight"]="bold",this.style.opacity=1;break;case 2:this.style.filter="brightness(0.85)",this.style["font-weight"]="light",this.style.opacity=.75;break;case 3:this.style["font-style"]="italic";break;case 4:this.style["text-decoration"]="underline";break;case 5:this.style.animation="var(--ansiBlink)";break;case 7:this.style.filter="invert(1)";break;case 8:this.style.filter="contrast(0.5)",this.style.opacity=.1;break;case 9:this.style["text-decoration"]="line-through";break;case 10:this.style["font-family"]="var(--base-font))";break;case 11:case 12:case 13:case 14:case 15:case 16:case 17:case 18:case 19:this.style["font-family"]="var(--alt-font-no-".concat(h,")");break;case 20:this.style["font-family"]="var(--alt-font-fraktur)",this.style["font-size"]="1.1rem";break;case 21:case 22:this.style["font-weight"]="initial";break;case 23:this.style["font-weight"]="initial",this.style["font-style"]="initial";break;case 24:this.style["text-decoration"]="none",this.style["font-family"]="sans-serif",this.style["font-size"]="12pt";break;case 25:this.style.animation="none";break;case 26:this.style["text-transform"]="full-width";break;case 27:this.style.filter="initial";break;case 28:this.style.opacity="initial";break;case 29:this.style["text-decoration"]="initial";break;case 30:this.style.color=n.pallete.black;break;case 31:this.style.color=n.pallete.red;break;case 32:this.style.color=n.pallete.green;break;case 33:this.style.color=n.pallete.yellow;break;case 34:this.style.color=n.pallete.blue;break;case 35:this.style.color=n.pallete.magenta;break;case 36:this.style.color=n.pallete.cyan;break;case 37:this.style.color=n.pallete.white;break;case 38:if(2==t.groups[1+p]){var d=a(t.groups[2+p].split(";"),3),y=d[0],b=d[1],v=d[2];this.style.color="rgb(".concat(y,",").concat(b,",").concat(v,")")}if(5==t.groups[1+p]){var m=i.Colors255[Number(t.groups[2+p])],w=m.r,S=m.g,O=m.b;this.style.color="rgb(".concat(w,",").concat(S,",").concat(O,")")}p+=2;break;case 39:this.style.color="var(--fgColor)";break;case 40:this.style["background-color"]=n.pallete.black;break;case 41:this.style["background-color"]=n.pallete.red;break;case 42:this.style["background-color"]=n.pallete.green;break;case 43:this.style["background-color"]=n.pallete.yellow;break;case 44:this.style["background-color"]=n.pallete.blue;break;case 45:this.style["background-color"]=n.pallete.magenta;break;case 46:this.style["background-color"]=n.pallete.cyan;break;case 47:this.style["background-color"]=n.pallete.white;break;case 48:if(2==t.groups[1+p]){var j=a(t.groups[2+p].split(";"),3),x=j[0],P=j[1],k=j[2];this.style["background-color"]="rgb(".concat(x,",").concat(P,",").concat(k,")")}if(5==t.groups[1+p]){var _=i.Colors255[Number(t.groups[2+p])],R=_.r,M=_.g,T=_.b;this.style["background-color"]="rgb(".concat(R,",").concat(M,",").concat(T,")")}p+=2;break;case 49:this.style["background-color"]="var(--bgColor)";break;case 50:this.style["text-transform"]="initial";break;case 51:this.style.border="1px solid currentColor";break;case 52:this.style.border="1px solid currentColor",this.style["border-radius"]="1em";break;case 53:this.style["text-decoration"]="overline";break;case 54:case 55:this.style.border="initial"}}return!1}}}])&&c(r.prototype,s),p&&c(r,p),d}();e.Renderer=d}()}),require.register("subspace-console/ansi/pallete.js",function(e,r,n){r=t(r,{},"subspace-console"),function(){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.pallete=void 0;e.pallete={black:"var(--ansi-black, #000000)",dBlack:"var(--ansi-black-dark, #343434)",bBlack:"var(--ansi-black-light, #888888)",red:"var(--ansi-red, #c0002c)",dRed:"var(--ansi-red-dark, #4a132b)",bRed:"var(--ansi-red-light, #ff7869)",green:"var(--ansi-green, #80a763)",dGreen:"var(--ansi-green-dark, #326f38)",bGreen:"var(--ansi-green-light, #93d393)",yellow:"var(--ansi-yellow, #e3c651)",dYellow:"var(--ansi-yellow-dark, #baa447)",bYellow:"var(--ansi-yellow-light, #fdc253)",blue:"var(--ansi-blue, #5485c0)",dBlue:"var(--ansi-blue-dark, #38577d)",bBlue:"var(--ansi-blue-light, #77aff2)",magenta:"var(--ansi-magenta, #C61B6E)",dMagenta:"var(--ansi-magenta-dark, #935894)",bMagenta:"var(--ansi-magenta-light, #bf83c0)",cyan:"var(--ansi-cyan, #57c2c0)",dCyan:"var(--ansi-cyan-dark, #2d5695)",bCyan:"var(--ansi-cyan-light, #cef6f5)",white:"var(--ansi-cyan, #e0e0e0)",dWhite:"var(--ansi-cyan-dark, #b0b0b0)",bWhite:"var(--ansi-cyan-light, #ffffff)"}}()}),require.register("subspace-console/mixin/Target.js",function(e,r,n){r=t(r,{},"subspace-console"),function(){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Target=void 0;var t,n=r("curvature/base/Mixin");function i(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var o=Symbol("target"),a=0,s=(i(t={},n.Mixin.Constructor,function(){try{this[o]=new EventTarget}catch(t){this[o]=document.createDocumentFragment()}this[o].x=a++}),i(t,"dispatchEvent",function(){var t;(t=this[o]).dispatchEvent.apply(t,arguments)}),i(t,"addEventListener",function(){var t;(t=this[o]).addEventListener.apply(t,arguments)}),i(t,"removeEventListener",function(){var t;(t=this[o]).removeEventListener.apply(t,arguments)}),t);e.Target=s}()}),require.register("subspace-console/mixin/TaskSignals.js",function(e,r,n){r=t(r,{},"subspace-console"),function(){"use strict";function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function r(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}Object.defineProperty(e,"__esModule",{value:!0}),e.TaskSignals=void 0;var n=function(){function e(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e)}var r,n,i;return r=e,(n=[{key:"signal::kill",value:function(){console.log("KILL!"),this.status>0?this[Reject]():this[Accept]()}},{key:"signal::close",value:function(){this.dispatchEvent(new CustomEvent("error",{detail:detail}))&&(this.status>0?this[Reject]():this[Accept]())}}])&&t(r.prototype,n),i&&t(r,i),e}();e.TaskSignals=n,r(n,"KILL","kill"),r(n,"CLOSE","close")}()}),require.register("subspace-console/view/EchoMessage.js",function(e,r,n){r=t(r,{},"subspace-console"),function(){"use strict";function t(e){"@babel/helpers - typeof";return(t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(e)}Object.defineProperty(e,"__esModule",{value:!0}),e.EchoMessage=void 0;var n=r("curvature/base/View");function i(t,e){return(i=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function o(e){var r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var n,i=a(e);if(r){var o=a(this).constructor;n=Reflect.construct(i,arguments,o)}else n=i.apply(this,arguments);return function(e,r){if(r&&("object"===t(r)||"function"==typeof r))return r;return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(e)}(this,n)}}function a(t){return(a=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var s=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&i(t,e)}(r,n.View);var e=o(r);function r(){var t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,r),(t=e.call(this,n)).args.prompt=t.args.prompt||"<<",t.template='<span>[[prompt]]&nbsp;</span><span class = "text">[[message]]</span>',t}return r}();e.EchoMessage=s}()}),require.register("subspace-console/view/MeltingText.js",function(e,r,n){r=t(r,{},"subspace-console"),function(){"use strict";function t(e){"@babel/helpers - typeof";return(t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(e)}Object.defineProperty(e,"__esModule",{value:!0}),e.MeltingText=void 0;var n=r("curvature/base/View");function i(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function o(t,e){return(o=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function a(e){var r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var n,i=s(e);if(r){var o=s(this).constructor;n=Reflect.construct(i,arguments,o)}else n=i.apply(this,arguments);return function(e,r){if(r&&("object"===t(r)||"function"==typeof r))return r;return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(e)}(this,n)}}function s(t){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var c=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&o(t,e)}(l,n.View);var e,r,s,c=a(l);function l(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,l),(e=c.call(this,t)).last=e.init=Date.now(),e.charUp=["̈́","̃","̀"],e.charMid=["̕","̛","̀","́","͘","̡","̢","̧","̨","̴","̵","̶","͏","͜","͝","͞","͟","͠","̸","̷","͡"],e.charDown=["̺","̻","̼","ͅ"],e.template='\n\t\t\t<div cv-bind = "output" class = "melting"></div>\n\t\t',e.args.input="Magic is no more than the art of employing consciously invisible means to produce visible effects. Will, love, and imagination are magic powers that everyone possesses; and whoever knows how to develop them to their fullest extent is a magician. Magic has but one dogma, namely, that the seen is the measure of the unseen\n",e.args.output="uh.",e.corruptors=[],e.maxMaxCorrupt=25,e.maxCorrupt=0,e.type="",e.onFrame(function(){e.typewriter(e.args.input)}),e.onInterval(64,function(){var t=window.getSelection();t.anchorOffset===t.focusOffset&&t.anchorNode===t.focusNode&&(e.args.output=e.corrupt(e.type))}),e.args.bindTo("input",function(t){e.type="",e.corruptors=[]}),e}return e=l,(r=[{key:"age",value:function(){return this.init-Date.now()}},{key:"lastFrame",value:function(){return this.last-Date.now()}},{key:"corrupt",value:function(t){if(1.15*t.length<this.args.input.length)return this.type;var e=t.split(""),r=function(t){return parseInt(Math.random()*t)};for(var n in r(1024)<256&&this.maxCorrupt<this.maxMaxCorrupt&&(this.maxCorrupt+=5),e)if(this.corruptors[n]=this.corruptors[n]||[],!e[n].match(/\W/)){var i=[this.charDown,this.charMid],o=i[r(i.length)];r(8192)<1&&this.corruptors[n].unshift(o[r(o.length)]),this.corruptors[n].length<this.maxCorrupt&&this.corruptors[n].unshift(o[r(o.length)]),r(2048)<1&&this.maxCorrupt>25&&this.corruptors[n].splice(5*r(5)),this.corruptors[n].push(this.corruptors[n].shift())}for(var a in e)this.corruptors[a]&&(e[a]+=this.corruptors[a].join(""));return e.join("")}},{key:"typewriter",value:function(t){return this.type=this.type||"",this.type===t||(this.type+=t.substr(this.type.length,1),this.onTimeout(150,function(){var t=window.scrollY+window.innerHeight;document.body.scrollHeight>t&&window.scrollTo({top:document.body.scrollHeight,left:0,behavior:"smooth"})}),!1)}}])&&i(e.prototype,r),s&&i(e,s),l}();e.MeltingText=c}()}),require.register("BackdropPalette.js",function(t,e,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BackdropPalette=void 0;var n=e("backdrop/MarbleGarden"),i=e("backdrop/ProtoLabrynth"),o=e("backdrop/Industrial"),a=e("backdrop/MysticCave"),s=e("backdrop/WestSideCloudy"),c=e("backdrop/WestSideDay"),l=e("backdrop/WestSide"),u=e("backdrop/AngelIsland"),f=e("backdrop/Wood"),p=e("backdrop/Underground"),h=e("backdrop/Moon"),g=e("backdrop/SouthRidge"),d=e("backdrop/MushroomHill"),y=e("backdrop/IceCap"),b=e("backdrop/City"),v=e("backdrop/DarkClouds"),m=e("backdrop/Overcast"),w=e("backdrop/ScrapBrainDark"),S=e("backdrop/PhazonMines"),O=e("backdrop/Desert");const j={"west-side-cloudy":s.WestSideCloudy,"west-side-day":c.WestSideDay,"west-side":l.WestSide,"angel-island":u.AngelIsland,wood:f.Wood,moon:h.Moon,"south-ridge":g.SouthRidge,"proto-labrynth":i.ProtoLabrynth,"marble-garden":n.MarbleGarden,industrial:o.Industrial,"mystic-cave":a.MysticCave,underground:p.Underground,"mushroom-hill":d.MushroomHill,"ice-cap":y.IceCap,city:b.City,"dark-clouds":v.DarkClouds,overcast:m.Overcast,"scrap-brain-dark":w.ScrapBrainDark,"phazon-mines":S.PhazonMines,desert:O.Desert};t.BackdropPalette=j}),require.register("Classifier.js",function(t,e,r){"use strict";function n(t){"@babel/helpers - typeof";return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(t,"__esModule",{value:!0}),t.Classifier=void 0;var i=e("curvature/base/Mixin"),o=e("curvature/mixin/EventTargetMixin");function a(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,i,o,a,s=[],c=!0,l=!1;try{if(o=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=o.call(r)).done)&&(s.push(n.value),s.length!==e);c=!0);}catch(t){l=!0,i=t}finally{try{if(!c&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(l)throw i}}return s}}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return s(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return s(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function s(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function c(t,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,(o=i.key,void 0,"symbol"===n(a=function(t,e){if("object"!==n(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var i=r.call(t,e||"default");if("object"!==n(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(o,"string"))?a:String(a)),i)}var o,a}function l(t,e){return(l=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function u(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,i=f(t);if(e){var o=f(this).constructor;r=Reflect.construct(i,arguments,o)}else r=i.apply(this,arguments);return function(t,e){if(e&&("object"===n(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function f(t){return(f=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}let p=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&l(t,e)}(f,i.Mixin.with(o.EventTargetMixin));var e,r,n,s=u(f);function f(t){var e;let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:(t,e)=>e instanceof t;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,f),(e=s.call(this)).compare=r,e.index=new Map,e.reverseIndex=new Map;for(const r in t)e.index.set(t[r],new Set);return e}return e=f,(r=[{key:"add",value:function(t){const e=new CustomEvent("adding",{detail:{object:t}});if(!this.dispatchEvent(e))return;this.reverseIndex.has(t)||this.reverseIndex.set(t,new Set);const r=this.reverseIndex.get(t),n=new Set;for(const e of this.index.entries()){var i=a(e,2);const o=i[0],s=i[1];this.compare(o,t)&&(n.add(o),r.add(o),s.add(t))}const o=new CustomEvent("added",{detail:{object:t,indexes:n}});this.dispatchEvent(o)}},{key:"remove",value:function(t){if(!this.reverseIndex.has(t))return;const e=new CustomEvent("removing",{detail:{object:t}});if(!this.dispatchEvent(e))return;const r=this.reverseIndex.get(t);for(const e of r)this.index.get(e).delete(t),r.delete(e);const n=new CustomEvent("added",{detail:{object:t,reverseIndex:r}});this.dispatchEvent(n)}},{key:"clear",value:function(){this.reverseIndex.clear(),this.index.clear()}},{key:"get",value:function(t){return this.index.get(t)}},{key:"count",value:function(t){return this.index.has(t)&&this.get(t).size}},{key:"has",value:function(t){return!!this.count(t)}}])&&c(e.prototype,r),n&&c(e,n),Object.defineProperty(e,"prototype",{writable:!1}),f}();t.Classifier=p}),require.register("Menu/ButtonSelect.js",function(t,e,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ButtonSelect=void 0;var n=e("curvature/base/View"),i=e("../ui/CharacterString");function o(t){"@babel/helpers - typeof";return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function a(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,p(n.key),n)}}function s(t,e){return(s=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function c(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=u(t);if(e){var i=u(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===o(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return l(t)}(this,r)}}function l(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function u(t){return(u=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function f(t,e,r){return(e=p(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function p(t){var e=function(t,e){if("object"!==o(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==o(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===o(e)?e:String(e)}let h=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&s(t,e)}(p,n.View);var e,r,o,u=c(p);function p(){var t;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,p);for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];return f(l(t=u.call(this,...r)),"template",'<div class = "button-select">[[prompt]] [[_button]] <button cv-on = "click:remove">exit</button></div>'),f(l(t),"buttons",["⓿","❶","❷","❸","❹","❺","❽","❾","❽","❿","⓫",null,"↑","↓","←","→"]),t}return e=p,(r=[{key:"onRendered",value:function(t){this.args.prompt=new i.CharacterString({value:"Select a button!",font:"small-menu-font"}),this.args._button=new i.CharacterString({value:"",font:"small-menu-font"})}},{key:"input",value:function(t){for(const e in t.buttons){if(e>100)continue;t.buttons[e].pressure&&(this.args._button.args.value=this.buttons[e],this.args.button=e)}}}])&&a(e.prototype,r),o&&a(e,o),Object.defineProperty(e,"prototype",{writable:!1}),p}();t.ButtonSelect=h}),require.register("Menu/CharacterPreview.js",function(t,e,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CharacterPreview=void 0;var n=e("curvature/base/View");function i(t){"@babel/helpers - typeof";return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function o(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,f(n.key),n)}}function a(t,e){return(a=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function s(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=l(t);if(e){var o=l(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===i(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return c(t)}(this,r)}}function c(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function l(t){return(l=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function u(t,e,r){return(e=f(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function f(t){var e=function(t,e){if("object"!==i(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==i(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===i(e)?e:String(e)}let p=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&a(t,e)}(f,n.View);var e,r,i,l=s(f);function f(){var t;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,f);for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];return u(c(t=l.call(this,...r)),"preserve",!0),u(c(t),"template",'<div class = "character-preview" data-character = "[[setting]]">\n\t<div class = "character"></div>\n\t<div class = "emeralds" cv-each = "emeralds:emerald">\n\t\t<img style = "--x:[[emerald.x]];--y:[[emerald.y]];" src = "/Sonic/emerald-[[emerald.type|suffix]][[emerald.color]]-mini.png" />\n\t</div>\n\t<div class = "rings"></div>\n\t<div class = "score"></div>\n</div>'),t}return e=f,(r=[{key:"onAttached",value:function(){const t="super",e=this.args.emeralds=[{x:0,y:0,type:t,color:"red-alt"},{x:0,y:0,type:t,color:"yellow"},{x:0,y:0,type:t,color:"green"},{x:0,y:0,type:t,color:"cyan"},{x:0,y:0,type:t,color:"white"},{x:0,y:0,type:t,color:"purple"},{x:0,y:0,type:t,color:"pink"}],r=e.length;this.onFrame(()=>{let t=0;if(r)for(const n of e){const e=Date.now()/400,i=t++*(2*Math.PI)/r+e;n.x=Math.cos(i),n.y=Math.sin(i)}})}},{key:"suffix",value:function(t){return t?`${t}-`:""}}])&&o(e.prototype,r),i&&o(e,i),Object.defineProperty(e,"prototype",{writable:!1}),f}();t.CharacterPreview=p}),require.register("Menu/DemoMenu.js",function(t,e,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DemoMenu=void 0;var n=e("../replay/ReplayDatabase"),i=e("../replay/Replay"),o=e("curvature/base/Router");const a=function(t,e,r){let n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;t.reset(),t.replayFrames=r.getIndexedFrames(),t.replayStart=t.replayFrames.get(n||r.firstFrame)||{},t.replay=r,t.maxReplayFrame=r.lastFrame,t.replayOffset=-1+r.firstFrame+n,o.Router.setQuery("demo",r.uuid),t.loadMap({mapUrl:r.map}).then(()=>{t.args.paused=!0,t.playback()})},s={subtext:"View error log.",children:function t(e,r){let o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return n.ReplayDatabase.open("replays",3).then(n=>{const s=i.Replay;let c="id",l=[];e.baseMap&&(c="map-id",l=[[e.baseMap,0],[e.baseMap,1/0]]);const u={store:"replays",index:c,direction:"prev",limit:10,offset:o,type:s,range:l},f={};return o||(f.Import={callback:()=>{const t=document.createElement("input");t.setAttribute("type","file"),t.click(),t.addEventListener("change",t=>{const e=t.target.files;for(const t of e)t.text().then(t=>{const e=JSON.parse(t);delete e.id,delete e.uuid;const r=i.Replay.from(e);delete r.id,n.insert("replays",r)})},{once:!0})}}),n.select(u).each(t=>{const i=t.lastFrame-t.firstFrame,o=`${String(Math.trunc(i/3600)).padStart(1,"0")}:${String(Math.trunc(i/60)%60).padStart(2,"0")}`;let s=`${o}] ${new Date(t.created).toLocaleString("en-US")}`,c=t.map;t.name&&(s=o+"] "+t.name,c=new Date(t.created).toLocaleString("en-US")+" "+t.map),f[s]={subtext:c,color:t.color,children:{Replay:{callback:()=>a(e,r,t)},"Skip to":{children:()=>{const n={};for(const i of t.keyFrames)n[`${String(Math.trunc(i/3600)).padStart(2,"0")}:${String(Math.trunc(i/60)%60).padStart(2,"0")}`]={callback:()=>a(e,r,t,i)};return console.log(n),n}},Options:{children:{Banners:{input:"boolean",revert:()=>e.args.replayBanners=!0,set:t=>e.args.replayBanners=t,get:()=>e.args.replayBanners},"Quick Exit":{input:"boolean",revert:()=>e.args.replayQuickExit=!1,set:t=>e.args.replayQuickExit=t,get:()=>e.args.replayQuickExit}}},Export:{callback:()=>{const e=new Blob([JSON.stringify(t)],{type:"text/json"}),r=URL.createObjectURL(e),n=document.createElement("a");n.href=r,n.download=`${t.name||t.uuid}.json`,n.click()}},Rename:{children:{name:{input:"string",set:e=>{t.name=e,n.update("replays",t)},get:()=>t.name},color:{input:"string",set:e=>{t.color=e,n.update("replays",t)},get:()=>t.color}}},Delete:{children:{No:{callback:()=>{r.back(1)}},Yes:{callback:()=>{delete f[s],n.delete("replays",t),r.back(2)}}}}}}}).then(n=>(n.mapped&&(f["Next 10"]={children:()=>t(e,r,o+10)}),f))})}};t.DemoMenu=s}),require.register("Menu/MainMenu.js",function(t,e,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MainMenu=void 0;var n=e("curvature/base/Bindable"),i=e("curvature/base/Router"),o=e("../audio/Bgm"),a=(e("../intro/Card"),e("../effects/Cylinder"),e("../effects/Pinch"),e("../effects/Twist"),e("./Menu")),s=(e("./SavestateMenu"),e("./SettingsMenu")),c=(e("../tileMap/TileMap"),e("../ui/CharacterString")),l=e("./CharacterPreview"),u=e("./ZoneSuffix"),f=e("../network/Lobby");function p(t){"@babel/helpers - typeof";return(p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function h(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,m(n.key),n)}}function g(){return(g="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=v(t)););return t}(t,e);if(n){var i=Object.getOwnPropertyDescriptor(n,e);return i.get?i.get.call(arguments.length<3?t:r):i.value}}).apply(this,arguments)}function d(t,e){return(d=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function y(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=v(t);if(e){var i=v(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===p(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return b(t)}(this,r)}}function b(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function v(t){return(v=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function m(t){var e=function(t,e){if("object"!==p(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==p(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===p(e)?e:String(e)}let w=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&d(t,e)}(O,a.Menu);var r,p,w,S=y(O);function O(t,r){var o,a,p,h;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,O),o=S.call(this,t,r),a=b(o),p="template",h=e("./main-menu.html"),(p=m(p))in a?Object.defineProperty(a,p,{value:h,enumerable:!0,configurable:!0,writable:!0}):a[p]=h,!o.args.initialPath.length&&i.Router.query.menuPath&&(o.args.initialPath=JSON.parse(i.Router.query.menuPath)),o.loggingIn=null,o.args.cardName="main-menu",o.args.haveToken=!1,o.args.listening=!1,o.args.joinGame=!1,o.args.hostGame=!1,o.args.copy="copy",o.font="small-menu-font",o.args.title=new c.CharacterString({font:o.font,value:"Sonic 3000"}),o.args.ok=new c.CharacterString({font:o.font,value:"⓿ ok"}),o.args.back=new c.CharacterString({font:o.font,value:"❶ back"}),o.args.revert=new c.CharacterString({font:o.font,value:"❸ default (hold)"}),o.args.select=new c.CharacterString({font:o.font,value:"✚ select"}),o.actsCleared={};const g={input:"select",options:["Sonic","Tails","Knuckles"],locked:["Robotnik","EggRobo","Mecha-Sonic","Seymour","Chalmers","Sean"],default:"Sonic",set:t=>o.parent.args.selectedChar=t,get:()=>o.parent.args.selectedChar||"Sonic"},d=n.Bindable.make({input:"select",tags:"inline",options:[],set:t=>o.parent.args.mainPallet=t,get:()=>{var t;return null!==(t=o.parent.args.mainPallet)&&void 0!==t?t:null}});d.set(o.parent.args.mainPallet||"Normal");const y=n.Bindable.make({Hue:{input:"number",tags:"inline",min:-180,max:180,subtext:"Rotate the color wheel.",revert:()=>r.customColor.h=0,set:t=>r.customColor.h=Number(t).toFixed(2),get:()=>r.customColor.h},Saturation:{input:"number",tags:"inline",min:0,max:2,step:.01,subtext:"Change the amount of color.",revert:()=>r.customColor.s=1,set:t=>r.customColor.s=Number(t).toFixed(2),get:()=>r.customColor.s},Value:{input:"number",tags:"inline",min:0,max:2,step:.01,subtext:"change the brightness.",revert:()=>r.customColor.v=1,set:t=>r.customColor.v=Number(t).toFixed(2),get:()=>r.customColor.v}});return o.onRemove(r.args.bindTo("selectedChar",t=>{r.loadSaves().then(()=>{switch(t){case"Sonic":d.options=["Normal","Santiago","Sequel","RedHot","White","Custom"];break;case"Tails":d.options=["SkyCamo","Copper","Patina","Arctic","Custom"];break;case"Knuckles":d.options=["Tails","Enerjak","Pink","Wechnia","Custom"];break;default:d.options=[]}if(t){const e=r.getCharacterState(t);d.options.length=d.options.length?1+Math.min(d.options.length,Object.keys(e.cleared).length):0}else d.options=[];d.options.length?d.available="available":d.available="hidden"})})),o.onRemove(r.args.bindTo("mainPallet",t=>{y.Hue.available=y.Saturation.available=y.Value.available="Custom"!==t?"hidden":"available"})),g.prefix=new l.CharacterPreview(g,o.parent),o.onRemove(()=>g.prefix.remove()),o.items=o.args.items={"Single Player":{available:"available",children:{Character:g,"Brooklyn Breakout Zone Act 1":{characters:["Sonic","Tails","Knuckles","Robotnik"],suffix:new u.ZoneSuffix({map:"/map/brooklyn-zone.json"},o.parent),callback:()=>{o.parent.loadMap({mapUrl:"/map/brooklyn-zone.json"}),o.accept()}},"Brooklyn Breakout Zone Act 2":{characters:["Sonic","Tails","Knuckles","Robotnik"],suffix:new u.ZoneSuffix({map:"/map/brooklyn-zone-2.json"},o.parent),callback:()=>{o.parent.loadMap({mapUrl:"/map/brooklyn-zone-2.json"}),o.accept()}},"Manic Harbor Zone Act 1":{characters:["Sonic","Tails","Knuckles","Robotnik"],suffix:new u.ZoneSuffix({map:"/map/manic-harbor-zone.json"},o.parent),callback:()=>{o.parent.loadMap({mapUrl:"/map/manic-harbor-zone.json"}),o.accept()}},"Manic Harbor Zone Act 2":{characters:["Sonic","Tails","Knuckles","Robotnik"],suffix:new u.ZoneSuffix({map:"/map/manic-harbor-zone-2.json"},o.parent),callback:()=>{o.parent.loadMap({mapUrl:"/map/manic-harbor-zone-2.json"}),o.accept()}},"Agorapolis Zone Act 1 Preview":{characters:["Sonic","Tails","Knuckles","Robotnik"],tags:"new",suffix:new u.ZoneSuffix({map:"/map/emerald-isle.json"},o.parent),callback:()=>{o.parent.loadMap({mapUrl:"/map/emerald-isle.json"}),o.accept()}},"Agorapolis Zone Act 2 Preview":{characters:["Sonic","Tails","Knuckles","Robotnik"],tags:"new",suffix:new u.ZoneSuffix({map:"/map/emerald-isle-2.json"},o.parent),callback:()=>{o.parent.loadMap({mapUrl:"/map/emerald-isle-2.json"}),o.accept()}},"Radical City Zone Act 1":{characters:["Sonic","Tails","Knuckles","Robotnik"],suffix:new u.ZoneSuffix({map:"/map/empty-zone.json"},o.parent),callback:()=>{o.parent.loadMap({mapUrl:"/map/empty-zone.json"}),o.accept()}},"Radical City Zone Act 2":{characters:["Sonic","Tails","Knuckles","Robotnik"],suffix:new u.ZoneSuffix({map:"/map/empty-zone-2.json"},o.parent),callback:()=>{o.parent.loadMap({mapUrl:"/map/empty-zone-2.json"}),o.accept()}},"Seaview Park Zone Act 1":{characters:["Sonic","Tails","Knuckles","Robotnik"],suffix:new u.ZoneSuffix({map:"/map/west-side-zone.json"},o.parent),callback:()=>{o.parent.loadMap({mapUrl:"/map/west-side-zone.json"}),o.accept()}},"Seaview Park Zone Act 2":{characters:["Sonic","Tails","Knuckles","Robotnik"],suffix:new u.ZoneSuffix({map:"/map/west-side-zone-2.json"},o.parent),callback:()=>{o.parent.loadMap({mapUrl:"/map/west-side-zone-2.json"}),o.accept()}},"Misty Ruins Zone Preview":{characters:["Sonic","Tails","Knuckles","Robotnik"],subtext:"Testing art, layout and physics for Misty Ruins Zone",callback:()=>{o.parent.loadMap({mapUrl:"/map/ruins-test.json"}),o.accept()}},"StratoRail Zone Preview":{characters:["Sonic","Tails","Knuckles","Robotnik"],subtext:"Testing art for Moon Zone",callback:()=>{o.parent.loadMap({mapUrl:"/map/pumpkin-test.json"}),o.accept()}},"Toxin Refinery Zone Preview":{characters:["Sonic","Tails","Knuckles","Robotnik"],tags:"new",subtext:"Testing art for Moon Zone",callback:()=>{o.parent.loadMap({mapUrl:"/map/chemical-test.json"}),o.accept()}},"Underground Zone Preview":{characters:["Sonic","Tails","Knuckles","Robotnik"],subtext:"Testing art, layout and physics for Underground Zone",callback:()=>{o.parent.loadMap({mapUrl:"/map/underground-test.json"}),o.accept()}},"Phazon Crater Preview":{characters:["Sonic","Tails","Knuckles","Robotnik"],tags:"new",subtext:"Testing art for Phazon Crater Zone",callback:()=>{o.parent.loadMap({mapUrl:"/map/phazon-test.json"}),o.accept()}},"Moon Zone Preview":{characters:["Sonic","Tails","Knuckles","Robotnik"],subtext:"Testing art for Moon Zone",callback:()=>{o.parent.loadMap({mapUrl:"/map/moon-test.json"}),o.accept()}}}},Multiplayer:{tags:"",children:{"Matrix Lobby":{tags:"new",callback:()=>{o.refreshConnection(),o.loggingIn?o.parent.matrixConnect():(o.loggingIn=o.parent.matrixConnect(!0),o.loggingIn.finally(()=>o.loggingIn=null),o.loggingIn.then(t=>{const e=new f.Lobby({roomId:o.parent.settings.matrixRoom},o.parent);o.args.override=e,o.args.override.onRemove(()=>{o.args.override=null,o.onNextFrame(()=>o.focusFirst())}),o.onRemove(()=>e.remove())}))}},"Peer to Peer":{children:{"Host a game":{callback:()=>{o.refreshConnection(),o.args.hostOutput="",o.args.hostGame=!0,o.args.copy="copy"}},"Join a game":{callback:()=>{o.refreshConnection(),o.args.joinOutput="",o.args.joinGame=!0,o.args.copy="copy",o.client.fullOffer().then(t=>{const e=JSON.stringify(t),r=`s3ktp://request/${btoa(e)}`;o.args.joinOutput=r,o.args.haveToken=!0})}}}}}},Settings:(0,s.SettingsMenu)(r),Graphics:{input:"select",tags:"inline",options:["High","Medium","Low","Very Low"],set:t=>r.settings.graphicsLevel=t,get:()=>r.settings.graphicsLevel},About:{callback:()=>{window.open("/about.html")}}},o}return r=O,(p=[{key:"clear",value:function(){this.args.input="",this.args.joinOutput="",this.args.hostOutput=""}},{key:"input",value:function(t){g(v(O.prototype),"input",this).call(this,t)}},{key:"disconnect",value:function(){this.server&&this.server.close(),this.client&&this.client.close(),this.server=null,this.client=null,this.parent.args.networked=!1,this.parent.args.chatBox=null,this.args.connected=!1,this.args.hostGame=!1,this.args.joinGame=!1,this.clear()}},{key:"back",value:function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;g(v(O.prototype),"back",this).call(this,t),this.disconnect()}},{key:"answer",value:function(){let t=this.args.input;const e=/^s3ktp:\/\/request\/(.+)/.exec(t);e&&(t=atob(e[1]));const r=JSON.parse(t),n=this.server.fullAnswer(r);return n.then(t=>{const e=JSON.stringify(t),r=`s3ktp://accept/${btoa(e)}`;this.args.hostOutput=r,this.args.haveToken=!0}),n}},{key:"acceptRtp",value:function(){let t=this.args.input;const e=/^s3ktp:\/\/accept\/(.+)/.exec(t);e&&(t=atob(e[1]));const r=JSON.parse(t);this.client.fullAccept(r)}},{key:"select",value:function(){this.args.hostGame?this.tags.hostOutput.select():this.args.joinGame&&this.tags.joinOutput.select()}},{key:"copy",value:function(){if(this.args.hostGame){if(!this.args.input)return;this.tags.hostOutput.select()}else if(this.args.joinGame){if(!this.args.joinOutput)return;this.tags.joinOutput.select()}document.execCommand("copy"),this.args.copy="copied!"}},{key:"paste",value:function(t){navigator.clipboard.readText().then(t=>{this.args.hostGame&&t.match(/^s3ktp:\/\/request\//)&&(this.args.input=t,this.answer().then(t=>{this.copy()})),this.args.joinGame&&t.match(/^s3ktp:\/\/accept\//)&&(this.args.input=t,this.acceptRtp())})}},{key:"refreshConnection",value:function(){this.server=this.parent.getServer(!0),this.client=this.parent.getClient(!0);const t=this.server,e=this.client,r=t=>{console.log("Peer connection opened!"),this.parent.loadMap({mapUrl:"/map/emerald-isle.json",networked:!0}).then(()=>console.log("Level started!"))},n=t=>{this.disconnect(t),this.server&&this.server.peerServer&&"closed"===this.server.peerServer.connectionState&&(console.log({server:this.server}),this.server=null),this.client&&this.client.peerClient&&"closed"===this.client.peerClient.connectionState&&(console.log({client:this.client}),this.client=null)};this.listen(t,"open",r,{once:!0}),this.listen(e,"open",r,{once:!0}),this.listen(t,"close",n,{once:!0}),this.listen(e,"close",n,{once:!0})}},{key:"play",value:function(){g(v(O.prototype),"play",this).call(this),o.Bgm.play("MENU_THEME",{loop:!0,interlude:!0});const t=this.done;return t.then(()=>this.onTimeout(250,()=>this.remove())),t}}])&&h(r.prototype,p),w&&h(r,w),Object.defineProperty(r,"prototype",{writable:!1}),O}();t.MainMenu=w}),require.register("Menu/Menu.js",function(t,e,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Menu=void 0;var n=e("curvature/base/Bindable"),i=e("../intro/Card"),o=(e("../effects/Cylinder"),e("../effects/Pinch"),e("../ui/CharacterString")),a=e("../audio/Sfx");function s(t){"@babel/helpers - typeof";return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function c(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,h(n.key),n)}}function l(t,e){return(l=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function u(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=p(t);if(e){var i=p(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===s(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return f(t)}(this,r)}}function f(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function p(t){return(p=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function h(t){var e=function(t,e){if("object"!==s(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==s(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===s(e)?e:String(e)}const g=Symbol("bindings");let d=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&l(t,e)}(y,i.Card);var r,s,p,d=u(y);function y(t,r){var i,o,a,s;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,y),t[n.Bindable.NoGetters]=!0,i=d.call(this,t,r),o=f(i),a="template",s=e("./main-menu.html"),(a=h(a))in o?Object.defineProperty(o,a,{value:s,enumerable:!0,configurable:!0,writable:!0}):o[a]=s,i[n.Bindable.NoGetters]=!0,i.font="small-menu-font",i.args.initialPath=[],i.args.cardName="menu",i.args.items={},i.args.pageLoop=!1,i.args.pageJump=7,i.currentItem=null,i.include="a, button, input, textarea, select, details, [tabindex]",i.exclude='[tabindex="-1"], .hidden',i.elements=new Map,i.onRemove(()=>r.focus()),i}return r=y,(s=[{key:"onRendered",value:function(t){this.listen(window,"focus",t=>this.refocus(t)),this.args.bindTo("items",t=>{for(const t in this.args.items){const e=this.args.items[t];e[g]&&[...e[g]].forEach(t=>t())}let e=0;for(const i in t){var r;const s=t[i];s[g]=null!==(r=s[g])&&void 0!==r?r:new Set,s.color=s.color||"var(--default-color)",s._index=e++,s._key=i,s._title=new o.CharacterString({value:i,font:this.font}),s._value=new o.CharacterString({value:"default",font:this.font});const c=t=>{if("boolean"===t.input)t._value.args.value=t.setting?"ON":"OFF",t._boolValue=t._value;else if("number"===t.input){var e;const r=n.Bindable.make(t);t.subType=null!==(e=t.subType)&&void 0!==e?e:"number",t[g].add(r.bindTo("setting",e=>t._value.args.value=e))}else if("string"===t.input);else if("select"===t.input)t._value.args.value=t.setting,t._selectValue=t._value;else if("output"===t.input){const e=n.Bindable.make(t);t[g].add(e.bindTo("setting",e=>t._value.args.value=e)),t[g].add(e.bindTo("setting",console.trace))}const r=n.Bindable.make(t);t[g].add(r.bindTo("setting",e=>t.set&&t.set(e)))};s.watch?s[g].add(s.watch[0].bindTo(s.watch[1],t=>{s.setting=s.watch[2]?s.watch[2](t):t,"number"===s.input&&a.Sfx.play("SWITCH_HIT"),c(s)})):s.get&&(s.setting=s.get(),c(s))}}),this.args.bindTo("items",t=>{if(t&&Object.keys(t).length&&(this.args.items&&(this.currentItem=null),this.tags.bound)){const t=this.findNext(this.currentItem,this.tags.bound.node);t&&this.focus(t)}},{wait:0})}},{key:"onAttached",value:function(t){const e=()=>{if(this.args.initialPath.length){const t=this.args.initialPath.shift();t in this.args.items&&(this.onTimeout(0,()=>this.run(this.args.items[t])),this.args.initialPath.length&&this.onTimeout(0,()=>e()))}else this.onNextFrame(()=>this.focusFirst())};this.onTimeout(0,()=>e())}},{key:"focusFirst",value:function(){if(!this.tags.bound)return;const t=this.findNext(null,this.tags.bound);t&&this.focus(t)}},{key:"refocus",value:function(t){this.onNextFrame(()=>{this.currentItem||this.focusFirst(),this.focus(this.currentItem,!0)})}},{key:"findNext",value:function(t,e){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;const n=e.querySelectorAll(this.include);if(!n.length)return;const i=[];let o=0,a=0;for(const e of n)e.matches(this.exclude)||(i.push(e),e===t&&(o=a),a++);if(!t)return i[0];if(Math.abs(r)>1&&!this.args.pageLoop){if(r+o<0)return i[0];if(r+o>=i.length)return i[i.length+-1]}if(r===-1/0)return i[0];if(r===1/0)return i[i.length+-1];let s=(o+r)%i.length;for(;s<0;)s+=i.length;return i[s]}},{key:"handleFocus",value:function(t){this.focus(t.target,!0)}},{key:"focus",value:function(t){let e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.currentItem&&this.currentItem.contains(t)&&this.currentItem!==t||document.activeElement===t&&this.currentItem===t||(this.currentItem&&this.blur(this.currentItem),t&&(this.currentItem=t,t.focus({preventScroll:!0}),t.scrollIntoView({behavior:e?"instant":"smooth",block:"center"}),t.classList.add("focused"),t.addEventListener("blur",()=>this.blur(t),{once:!0})))}},{key:"blur",value:function(t){t.classList.remove("focused"),t.blur()}},{key:"input",value:function(t){if(this.zeroMe=t,!this.tags.bound)return;if(this.args.override)return void this.args.override.input(t);let e,r=!1;t.buttons[0]&&1===t.buttons[0].time?(this.currentItem&&this.currentItem.click(),this.args.last="A",this.currentItem&&!this.currentItem.contains(document.activeElement)&&(e=this.currentItem),this.beep()):t.buttons[1]&&1===t.buttons[1].time?(document.activeElement&&"INPUT"===document.activeElement.tagName?document.activeElement.closest("li").focus():this.back(),this.args.last="B",this.beep()):t.buttons[3]&&30===t.buttons[3].time&&(this.currentItem&&this.currentItem.dispatchEvent(new MouseEvent("auxclick",{button:1})),this.args.last="Y",this.beep());const n=e=>t.buttons[e]&&(1===t.buttons[e].time||t.buttons[e].time>=90&&t.buttons[e].time%3==1||t.buttons[e].time>30&&t.buttons[e].time<90&&t.buttons[e].time%15==1);n(12)||t.axes[7]&&t.axes[7].magnitude<0&&t.axes[7].delta?(this.currentItem&&this.currentItem.previousElementSibling&&(r=!0),e=this.findNext(this.currentItem,this.tags.bound.node,-1),this.beep()):(n(13)||t.axes[7]&&t.axes[7].magnitude>0&&t.axes[7].delta)&&(this.currentItem&&this.currentItem.nextElementSibling&&(r=!0),e=this.findNext(this.currentItem,this.tags.bound.node,1),this.beep()),n(1022)?(e=this.findNext(this.currentItem,this.tags.bound.node,-this.args.pageJump),this.beep()):n(1023)&&(e=this.findNext(this.currentItem,this.tags.bound.node,this.args.pageJump),this.beep()),n(1024)?(e=this.findNext(this.currentItem,this.tags.bound.node,-1/0),this.beep()):n(1025)?(e=this.findNext(this.currentItem,this.tags.bound.node,1/0),this.beep()):n(14)||t.axes[6]&&t.axes[6].magnitude<0&&t.axes[6].delta?(this.currentItem&&this.contract(this.currentItem),this.beep()):(n(15)||t.axes[6]&&t.axes[6].magnitude>0&&t.axes[6].delta)&&(this.currentItem&&this.expand(this.currentItem),this.beep()),e&&this.focus(e,r)}},{key:"beep",value:function(){this.parent.args.audio&&a.Sfx.play("SWITCH_HIT")}},{key:"run",value:function(t,e){let r;if(e&&e.target)for(r=e.target;r&&r.matches;){if(r.matches("[data-click-barrier]"))return;if(r.matches("li"))break;r=r.parentNode}if(this.zeroMe&&this.zeroMe.zero(),"unavailable"!==t.available&&"hidden"!==t.available){if(e&&t.input){const n=e.target.closest("li");if("boolean"===t.input)return void this.toggle(e,t);if("string"===t.input){this.subFocusing=!0;const t=r.querySelector("input");return void(document.activeElement!==t?t.focus():n.focus())}this.onNextFrame(()=>this.focus(n))}if(t.callback&&t.callback(t,this),t.children){let e=t.children;this.args.classes=t.classes||"","function"==typeof t.children&&(e=t.children(this.parent,this)),e instanceof Promise||(e=Promise.resolve(e));const r=t._key,n=this.args.items,i={_title:new o.CharacterString({value:"back",font:"small-menu-font"}),callback:()=>{this.args.items=n,this.args.classes=n.classes||"",this.args.currentKey=n._title?n._title.args.value:"";const t=Object.keys(n).indexOf(r);this.onNextFrame(()=>{this.focusFirst(),this.onNextFrame(()=>{if(this.tags.bound){const e=this.findNext(this.currentItem,this.tags.bound.node,t>0?t:0);this.focus(e)}})})},_prev:n.back,color:"var(--back-color, var(--default-color))"};this.args.items={},e.catch(t=>{this.args.items.back=this.args.items.back||i}),e.then(e=>{this.args.items=e,this.args.currentKey=t._title.args.value,this.args.items.back=this.args.items.back||i,this.onNextFrame(()=>this.focusFirst())})}}}},{key:"altRun",value:function(t,e){e&&1===e.button&&t.revert&&(t.revert(t,this),t.get&&(t.setting=t.get()),"boolean"===t.input&&(t._value.args.value=t.setting?"ON":"OFF"),t.set&&t.set(t.setting))}},{key:"back",value:function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,e=this.args.items.back;for(let r=1;r<t&&(console.log(e),e._prev);r++)e=e._prev;e&&e.callback&&e.callback()}},{key:"expand",value:function(t){const e=t.querySelector("input"),r=t.getAttribute("data-title"),n=this.args.items[r];if(n)if("number"===n.input){let t=Number(n.setting)+(n.step||1);void 0!==n.max&&t>n.max&&(t=n.max),void 0!==n.min&&t<n.min&&(t=n.min),n.setting=t}else"boolean"===n.input?(n.setting=!n.setting,n._value.args.value=n.setting?"ON":"OFF"):n&&"select"===n.input?this.cycleSelect(n,r,1):e&&e.focus()}},{key:"contract",value:function(t){const e=t.getAttribute("data-title"),r=this.args.items[e];r&&("number"===r.input?(r.setting=Number(r.setting)-(r.step||1),r.setting<r.min&&(r.setting=r.min)):"boolean"===r.input?(r.setting=!r.setting,r._value.args.value=r.setting?"ON":"OFF"):r&&"select"===r.input?this.cycleSelect(r,e,-1):this.focus(t))}},{key:"keyup",value:function(t,e){if("Enter"===t.key||"Escape"===t.key)return this.subFocusing||this.currentItem.focus(),void(this.subFocusing=!1);if(["ArrowUp","ArrowDown"].includes(t.key)){t.preventDefault(),t.stopPropagation(),t.stopImmediatePropagation();const e={ArrowUp:-1,ArrowDown:1}[t.key];if("INPUT"===t.target.tagName){const t=this.findNext(this.currentItem,this.tags.bound.node,e);if(t)return void this.focus(t)}}}},{key:"change",value:function(t,e){const r=this.args.items[e];r&&(r.setting=t.target.value,this.selectListChanged(r,e),r.set(r.setting))}},{key:"toggle",value:function(t,e){t&&t.preventDefault(),e.setting=!e.setting,e._value.args.value=e.setting?"ON":"OFF"}},{key:"cancel",value:function(t){t.preventDefault()}},{key:"cycleSelect",value:function(t,e){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,n=!1,i=void 0,o=void 0;const a=[];if(Object.assign(a,t.options),-1===r)a.reverse();else if(1!==r)return;for(const e of a){var s;if(i=null!==(s=i)&&void 0!==s?s:e,e!==t.setting){if(n){t.setting=e,o=void 0;break}o=e}else n=!0}void 0!==o&&(t.setting=i),this.selectListChanged(t,e),t.set(t.setting)}},{key:"selectListRendered",value:function(t,e,r,n,i,o){if("select"===e.input){var a;e.setting=null!==(a=e.get?e.get():e.default)&&void 0!==a?a:void 0;let t=0;for(const r in e.options)e.options[r]===e.setting&&(t=r);void 0===e.setting&&e.options.length&&(t=0,e.setting=e.options[0]);const n=i.findTag("select");i.findTag("option");n.selectedIndex=t,e._value.args.value=e.setting,this.selectListChanged(e,r,!0)}else"boolean"===e.input&&e.element&&(e.element.selectedIndex=e.setting?0:1,e._value.args.value=e.setting?"ON":"OFF")}},{key:"selectListChanged",value:function(t,e){let r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if("boolean"===t.input?(t._value.args.value=t.setting?"ON":"OFF",this.selectListChanged(t,e,!0)):"select"===t.input&&t._value&&(t.locked&&t.locked.includes(t.setting)?t._value.args.value="Locked":t._value.args.value=t.setting),"Character"===e)for(const e of Object.values(this.args.items)){var n,i;e._available=null!==(n=null!==(i=e._available)&&void 0!==i?i:e.available)&&void 0!==n?n:"available",e.characters&&!e.characters.includes(t.setting)?e.available="unavailable":e.available=e._available}this.parent.args.audio&&!r&&this.beep()}}])&&c(r.prototype,s),p&&c(r,p),Object.defineProperty(r,"prototype",{writable:!1}),y}();t.Menu=d}),require.register("Menu/PauseMenu.js",function(t,e,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PauseMenu=void 0;e("../intro/Card"),e("../effects/Cylinder"),e("../effects/Pinch");var n=e("./Menu"),i=e("./SettingsMenu"),o=e("../ui/CharacterString");function a(t){"@babel/helpers - typeof";return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function s(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,h(n.key),n)}}function c(){return(c="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=p(t)););return t}(t,e);if(n){var i=Object.getOwnPropertyDescriptor(n,e);return i.get?i.get.call(arguments.length<3?t:r):i.value}}).apply(this,arguments)}function l(t,e){return(l=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function u(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=p(t);if(e){var i=p(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===a(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return f(t)}(this,r)}}function f(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function p(t){return(p=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function h(t){var e=function(t,e){if("object"!==a(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==a(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===a(e)?e:String(e)}let g=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&l(t,e)}(y,n.Menu);var r,a,g,d=u(y);function y(t,r){var n,a,s,c;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,y),n=d.call(this,t,r),a=f(n),s="template",c=e("./pause-menu.html"),(s=h(s))in a?Object.defineProperty(a,s,{value:c,enumerable:!0,configurable:!0,writable:!0}):a[s]=c,n.args.cardName="pause-menu",n.args.animation="",n.args.title=new o.CharacterString({value:"Sonic 3000",font:"small-menu-font"}),n.items=n.args.items={Continue:{subtext:"Return to gameplay.",callback:()=>r.unpauseGame()},Mute:{input:"boolean",subtext:"Mute all audio",revert:()=>r.args.audio=!0,watch:[r.args,"audio",t=>!t],set:t=>r.args.audio=!t},Settings:(0,i.SettingsMenu)(r),Graphics:{input:"select",options:["High","Medium","Low","Very Low"],set:t=>r.settings.graphicsLevel=t,get:()=>r.settings.graphicsLevel},Reset:{subtext:"Reset the run.",children:{"Last Checkpoint":{subtext:"Restart from the last checkpoint.",children:{No:{callback:()=>n.args.items.back.callback()},Yes:{callback:()=>{r.unpauseGame(),r.reset(),r.startLevel()}}}},"Level Start":{subtext:"Restart from the beginning of the act.",children:{No:{callback:()=>n.args.items.back.callback()},Yes:{callback:()=>{r.clearCheckpoints(),r.unpauseGame(),r.reset(),r.startLevel()}}}}}},Quit:{subtext:"Quit to the title screen.",children:{No:{callback:()=>n.args.items.back.callback()},Yes:{callback:()=>{n.args.items.back.callback(),r.clearCheckpoints(),r.unpauseGame(),r.quit()}}}}},n}return r=y,(a=[{key:"run",value:function(t,e){e.stopPropagation(),e.stopImmediatePropagation(),c(p(y.prototype),"run",this).call(this,t,e)}},{key:"input",value:function(t){if(t.buttons[1011]&&t.buttons[1011].active){const e=t.buttons[1011].time;(1===e||e>30&&e%15==1)&&(this.parent.focus(),this.parent.args.paused=1,this.args.hideMenu="pause-menu-hide")}this.args.hideMenu?t.buttons[9]&&t.buttons[9].active&&(this.args.hideMenu=""):c(p(y.prototype),"input",this).call(this,t),t.buttons[1012]&&t.buttons[1012].time>0?(this.parent.focus(),this.args.hideMenu="pause-menu-hide"):t.buttons[1020]&&t.buttons[1020].time>0&&(this.args.hideMenu="")}},{key:"reset",value:function(){this.args.items=this.items}}])&&s(r.prototype,a),g&&s(r,g),Object.defineProperty(r,"prototype",{writable:!1}),y}();t.PauseMenu=g}),require.register("Menu/SaveMenu.js",function(t,e,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SaveMenu=void 0;e("../save/SaveDatabase");t.SaveMenu=(t=>({children:{Save:{callback:()=>{if(!t.controlActor)return;const e=t.controlActor,r={currentMap:t.currentMap,character:e.args.canonical,checkpoint:t.getCheckpoint(e.args.id)};console.log(r),SavestateDatabase.open("savestates",1).then(t=>{t.insert("savestates",r).then(e=>{console.log(e);const r={store:"savestates",index:"id"};t.select(r).each(t=>console.log(t)).then(t=>console.log(t))})})}}}}))}),require.register("Menu/SavestateMenu.js",function(t,e,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SavestateMenu=void 0;var n=e("../save/SaveDatabase");function i(t){"@babel/helpers - typeof";return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function o(t,e,r){return(e=function(t){var e=function(t,e){if("object"!==i(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==i(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===i(e)?e:String(e)}(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}t.SavestateMenu=(t=>{const e={};return n.SaveDatabase.open("saves",1).then(r=>{const n={store:"saves",index:"created"};r.select(n).each(r=>{const n=r.id,i=r.character;e[`${n} ${i}`]={callback:()=>{console.log(r),t.setCheckpoint(r.currentMap,o({},i,r.checkpoint)),t.loadMap({mapUrl:r.currentMap})}}}).then(t=>console.log(t))}),{children:e}})}),require.register("Menu/SettingsMenu.js",function(t,e,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SettingsMenu=void 0;var n=e("./TraceMenu"),i=(e("../controller/GamepadConfig"),e("../intro/Series"),e("./ButtonSelect"),e("./DemoMenu"));t.SettingsMenu=(t=>({subtext:"Edit your configuration.",children:()=>{const e={Video:(t=>({classes:"right-align",subtext:"Video settings.",children:{"Motion Blur Effects":{input:"boolean",subtext:"Enable/Disable Motion Blur Effects",revert:()=>t.settings.blur=!0,set:e=>t.settings.blur=e,get:()=>t.settings.blur},"Displacement Effects":{input:"boolean",subtext:"Enable/Disable Displacement Effects",revert:()=>t.settings.displace=!0,set:e=>t.settings.displace=e,get:()=>t.settings.displace},Scaling:{input:"boolean",subtext:"Enable/Disable Scaling",revert:e=>t.settings.scaling=!0,set:e=>t.settings.scaling=e,get:()=>t.settings.scaling},Smoothing:{input:"boolean",subtext:"Enable/Disable Smoothing",revert:e=>t.settings.smoothing=!1,set:e=>t.settings.smoothing=e,get:()=>t.settings.smoothing},"Outline Thickness":{input:"number",subtext:"Change the Outline Thickness",revert:e=>t.settings.outline=1,set:e=>t.settings.outline=e,get:()=>t.settings.outline,step:.5,max:15,min:0},"Display HUD":{input:"boolean",subtext:"Enable/Disable the HUD",revert:e=>t.settings.showHud=!0,set:e=>t.settings.showHud=e,get:()=>t.settings.showHud},"FPS Meter":{input:"boolean",subtext:"Enable/Disable the FPS Meter",revert:e=>t.settings.showFps=!0,set:e=>t.settings.showFps=e,get:()=>t.settings.showFps},"Mute/Fullscreen":{input:"boolean",subtext:"Show the mute & fullscreen controls in the bottom right.",revert:e=>t.settings.shortcuts=!0,set:e=>t.settings.shortcuts=e,get:()=>t.settings.shortcuts}}}))(t),Audio:(t=>({subtext:"Audio settings.",children:{Mute:{input:"boolean",subtext:"Mute all audio",revert:()=>t.args.audio=!0,watch:[t.args,"audio",t=>!t],set:e=>t.args.audio=!e},"Music Volume":{input:"number",subType:"range",subtext:"Background music volume - 0% - 100%",revert:()=>t.settings.musicVol=t.defaults.musicVol,set:e=>t.settings.musicVol=e,get:()=>t.settings.musicVol,max:100,min:0},SFX:{input:"number",subType:"range",subtext:"Sound effect music volume - 0% - 100%",revert:()=>t.settings.sfxVol=t.defaults.sfxVol,set:e=>t.settings.sfxVol=e,get:()=>t.settings.sfxVol,max:100,min:0}}}))(t),Input:(t=>({subtext:"Input settings.",children:{"Output test":{input:"output",watch:[t.settings,"buttonTest"],set:e=>t.settings.buttonTest=e},"Button Font Test":{input:"select",options:["","⓿","❶","❷","❸","❹","❺","❻","❼","❽","❾","❿","⓫","✚","←","→","↑","↓","⬲","🡨","🡪","🡩","🡫","⟴","🡰","🡲","🡱","🡳"],set:e=>t.settings.buttonTest=e,get:()=>t.settings.buttonTest},Rumble:{input:"boolean",subtext:"Enable/Disable controller vibration",set:e=>t.settings.rumble=e,get:()=>t.settings.rumble}}}))(t),Network:(t=>({subtext:"Network settings.",children:{"Matrix Settings":{children:{"Matrix URL":{input:"string",subtext:"Matrix Server URL for lobby.",revert:()=>t.settings.matrixUrl=t.defaults.matrixUrl,set:e=>t.settings.matrixUrl=e,get:()=>t.settings.matrixUrl},Lobby:{input:"string",subtext:"Matrix Room for lobby.",revert:()=>t.settings.matrixRoom=t.defaults.matrixRoom,set:e=>t.settings.matrixRoom=e,get:()=>t.settings.matrixRoom}}},"ICE Servers":{children:{"ICE Server #1":{input:"string",subtext:"ICE candidate server.",revert:()=>t.settings.iceServer1=t.defaults.iceServer1,set:e=>t.settings.iceServer1=e,get:()=>t.settings.iceServer1},"ICE Server #2":{input:"string",subtext:"ICE candidate server.",revert:()=>t.settings.iceServer2=t.defaults.iceServer2,set:e=>t.settings.iceServer2=e,get:()=>t.settings.iceServer2}}}}}))(t),Traces:n.TraceMenu};return t.args.debugEnabled&&(e.Demos=i.DemoMenu,e.Costume={children:{Hue:{input:"number",min:-180,max:180,subtext:"Rotate the color wheel.",subType:"range",revert:()=>t.customColor.h=0,set:e=>t.customColor.h=Number(e).toFixed(2),get:()=>Number(t.customColor.h).toFixed(2)},Saturation:{input:"number",min:0,max:2,step:.01,subType:"range",subtext:"Rotate the color wheel.",revert:()=>t.customColor.s=1,set:e=>t.customColor.s=Number(e).toFixed(2),get:()=>Number(t.customColor.s).toFixed(2)},Value:{input:"number",min:0,max:2,step:.01,subType:"range",subtext:"Rotate the color wheel.",revert:()=>t.customColor.v=1,set:e=>t.customColor.v=Number(e).toFixed(2),get:()=>Number(t.customColor.v).toFixed(2)}}}),e}}))}),require.register("Menu/TraceMenu.js",function(t,e,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TraceMenu=void 0;var n=e("../trace/TraceDatabase"),i=e("../replay/ReplayDatabase"),o=e("../replay/Replay");const a={subtext:"View error log.",children:function t(e,r){let a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return n.TraceDatabase.open("traces",1).then(n=>{const s={store:"traces",index:"id",direction:"prev",limit:10,offset:a},c={};return n.select(s).each(t=>{const n={"Export Trace":{callback:()=>{const e=window.open();e.document.write(`${t.uuid}\n`+`${t.message}\n${t.local}\n`+`${t.buildTime}\n`+`${t.created}\n\n`+`${t.stack}\n`),e.document.body.style.whiteSpace="pre",e.document.body.style.fontFamily="monospace"}},"Export Replay":{callback:()=>{i.ReplayDatabase.open("replays",3).then(e=>{const r=o.Replay,n=t.replay,i={store:"replays",index:"uuid",offset:a,type:r,range:n};e.select(i).one(t=>{const e=new Blob([JSON.stringify(t)],{type:"text/json"}),r=URL.createObjectURL(e),n=document.createElement("a");n.href=r,n.download=`${t.name||t.uuid}.json`,n.click()})})}}};e.args.debugEnabled&&(n["View Replay"]={callback:()=>{i.ReplayDatabase.open("replays",3).then(n=>{const i=o.Replay,s=t.replay,c={store:"replays",index:"uuid",offset:a,type:i,range:s};console.log(t.replay),e.replayStart=e.replayFrames.get(replay.firstFrame),n.select(c).one(t=>{e.loadMap({mapUrl:t.map}).then(()=>{e.replay=t,e.replayFrames=t.getIndexedFrames(),e.maxReplayFrame=t.lastFrame,e.args.paused=-1,e.args.frameId=-1,e.args.started=!1,e.args.running=!1,e.playback(),e.replayOffset=-1+t.firstFrame,loaded&&r.back()})})})}}),c[`${t.id})${new Date(t.created).toLocaleString("en-US")}`]={subtext:t.message,children:n}}).then(n=>(n.mapped&&(c["Next 10"]={children:()=>t(e,r,a+10)}),c))})}};t.TraceMenu=a}),require.register("Menu/ZoneSuffix.js",function(t,e,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ZoneSuffix=void 0;var n=e("curvature/base/View"),i=e("../ui/CharacterString");function o(t){"@babel/helpers - typeof";return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function a(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,p(n.key),n)}}function s(t,e){return(s=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function c(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=u(t);if(e){var i=u(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===o(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return l(t)}(this,r)}}function l(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function u(t){return(u=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function f(t,e,r){return(e=p(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function p(t){var e=function(t,e){if("object"!==o(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==o(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===o(e)?e:String(e)}let h=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&s(t,e)}(p,n.View);var e,r,o,u=c(p);function p(t,e){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,p),f(l(r=u.call(this,t,e)),"preserve",!0),f(l(r),"template",'<div class = "zone-suffix">\n\t<div class = "row">\n\t\t\x3c!-- <div class = "checkpoint"></div> --\x3e\n\t\t<div class = "rings">[[rings]]</div>\n\t\t<div class = "time">[[time]]</div>\n\t\t<div class = "air">[[air]]</div>\n\t\t<div class = "score">[[score]]</div>\n\t</div>\n\t<div class = "row">\n\t\t<div class = "emblems" cv-each = "emblems:emblem">\n\t\t\t<img src = "/custom/hud-emblem.png" />\n\t\t</div>\n\t</div>\n</div>'),f(l(r),"font","small-menu-font"),e.loadSaves().then(t=>{const n=e.getZoneState(r.args.map),o=Math.floor(n.time/60),a=String(Math.ceil(n.time%60*1.67)).padEnd(2,"0"),s=String(n.time?o%60:0).padStart(2,"0"),c=n.time?Math.floor(o/60):0;r.args.emblems=n.emblems.slice(0,5),r.args.rings=new i.CharacterString({value:n.rings||0,font:r.font}),r.args.time=new i.CharacterString({value:`${c}:${s}.${a}`||"--",font:r.font}),r.args.air=new i.CharacterString({value:(100*Number(n.air||0)).toFixed(2)+"%",font:r.font}),r.args.score=new i.CharacterString({value:n.score||0,font:r.font}),console.log()}),r}return e=p,r&&a(e.prototype,r),o&&a(e,o),Object.defineProperty(e,"prototype",{writable:!1}),e}();t.ZoneSuffix=h}),require.register("Menu/main-menu.html",function(t,e,r){r.exports='<div class = "screen-card screen-card-[[cardName]] [[animation]]">\n\n\t<div class = "menu-scroller"></div>\n\n\t[[pinch]]\n\t[[twist]]\n\n\t<section class = "buttons">\n\t\t<span>[[select]]</span>\n\t\t<span>[[ok]]</span>\n\t\t<span>[[back]]</span>\n\t\t<span>[[revert]]</span>\n\t</section>\n\n\t<section class = "contents" cv-if = "!connected">\n\t\t<div class = "menu-container [[classes]]" data-current-menu = "[[currentKey]]">\n\t\t\t<div>[[title]]</div>\n\t\t\t<div>\n\t\t\t\t<ul cv-ref = "bound" cv-each = "items:item:title">\n\n\t\t\t\t\t<li data-title = "[[title]]" class = "[[item.available]]" cv-on = "click:run(item, event); auxclick:altRun(item, event); keyup(event, item):c" tabindex="0" data-tags = "[[item.tags]]">\n\t\t\t\t\t\t[[item.prefix]]\n\t\t\t\t\t\t<span class = "title">[[item._title]]</span>\n\t\t\t\t\t\t<span class = "subtext">[[item.subtext]]</span>\n\t\t\t\t\t\t<span cv-if = "item.input" cv-is = "output">\n\t\t\t\t\t\t\t<span data-wraps = "output">\n\t\t\t\t\t\t\t\t[[item._value]]\n\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t</span>\n\t\t\t\t\t\t<span cv-if = "item.input" cv-is = "string" class = "field">\n\t\t\t\t\t\t\t<span data-wraps = "string" data-click-barrier><input cv-ref = "string" cv-bind = "item.setting" cv-on = "keyup(event, item);input:change(event, title)" tabindex="-1" /></span>\n\t\t\t\t\t\t</span>\n\t\t\t\t\t\t<span cv-if = "item.input" cv-is = "number" class = "field">\n\t\t\t\t\t\t\t<span data-wraps = "number" data-click-barrier><input cv-ref = "number" cv-bind = "item.setting" type = "[[item.subType]]" cv-on = "keyup(event, item);change(event, title)" tabindex="-1" max = "[[item.max]]" min = "[[item.min]]" step = "[[item.step]]" title = "[[item.setting]]" /></span>\n\t\t\t\t\t\t\t<span cv-if = "item.subType" cv-is = "range">\n\t\t\t\t\t\t\t\t[[item._value]]\n\t\t\t\t\t\t\t\t\x3c!-- <span data-wraps = "number" data-click-barrier><input cv-ref = "number" cv-bind = "item.setting" type = "number" cv-on = "keyup(event, item);change(event, title)" tabindex="-1" max = "[[item.max]]" min = "[[item.min]]" step = "[[item.step]]" title = "[[item.setting]]" /></span> --\x3e\n\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t</span>\n\t\t\t\t\t\t<span cv-if = "item.input" cv-is = "boolean" class = "field">\n\t\t\t\t\t\t\t<span data-wraps = "select">\n\t\t\t\t\t\t\t\t[[item._boolValue]]\n\t\t\t\t\t\t\t\t<select\n\t\t\t\t\t\t\t\t\tcv-on    = "cvDomAttached:selectListRendered(event, item, title, $view, $subview, $parent);mousedown:cancel(event);input:change(event, title)" cv-ref = "boolean"\n\t\t\t\t\t\t\t\t\tcv-bind = "item.setting"\n\t\t\t\t\t\t\t\t\ttabindex="-1">\n\t\t\t\t\t\t\t\t<option value = "1">on</option>\n\t\t\t\t\t\t\t\t<option value = "0">off</option>\n\t\t\t\t\t\t\t</select></span>\n\t\t\t\t\t\t</span>\n\t\t\t\t\t\t<span cv-if = "item.input" cv-is = "select" class = "field">\n\t\t\t\t\t\t\t<span data-wraps = "select">\n\t\t\t\t\t\t\t\t[[item._selectValue]]\n\t\t\t\t\t\t\t\t<select\n\t\t\t\t\t\t\t\t\tcv-on    = "input:change(event, title); listRendered:selectListRendered(event, item, title, $view, $subview, $parent);"\n\t\t\t\t\t\t\t\t\tcv-ref   = "options"\n\t\t\t\t\t\t\t\t\tcv-bind  = "item.setting"\n\t\t\t\t\t\t\t\t\ttabindex = "-1"\n\t\t\t\t\t\t\t\t\tcv-each  = "item.options:option">\n\t\t\t\t\t\t\t\t\t<option value = "[[option]]">[[option]]</option>\n\t\t\t\t\t\t\t\t</select>\n\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t</span>\n\t\t\t\t\t\t[[item.suffix]]\n\t\t\t\t\t</li>\n\t\t\t\t</ul>\n\t\t\t</div>\n\t\t</div>\n\t</section>\n\n\t<section class = "contents" cv-if = "!connected">\n\t\t<section class = "contents" cv-if = "lobby">[[lobby]]</section>\n\t\t<section class = "contents" cv-if = "hostGame">\n\t\t\t<div class = "token-exchange" data-have-token = "[[haveToken]]">\n\t\t\t\t<label>\n\t\t\t\t\t<p>Input the token from your friend here.</p>\n\t\t\t\t\t<textarea cv-bind = "input" cv-on = "click:paste(event)"></textarea>\n\t\t\t\t\t<button cv-on = "click:answer">go!</button>\n\t\t\t\t</label>\n\n\t\t\t\t<label>\n\t\t\t\t\t<p>Send this token to your friend to get started.</p>\n\t\t\t\t\t<textarea cv-on = "click:copy" cv-ref = "hostOutput" cv-bind = "hostOutput" readonly = "true"></textarea>\n\t\t\t\t\t<button cv-on = "click:copy">[[copy]]</button>\n\t\t\t\t\t<div class = "close" cv-on = "click:disconnect"></div>\n\t\t\t\t</label>\n\t\t\t</div>\n\t\t</section>\n\n\t\t<section class = "contents" cv-if = "joinGame">\n\t\t\t<div class = "token-exchange">\n\t\t\t\t<label cv-if = "haveToken">\n\t\t\t\t\t<p>Send this token to your friend to get started.</p>\n\t\t\t\t\t<textarea cv-on = "click:copy" cv-ref = "joinOutput" cv-bind = "joinOutput" readonly = "true"></textarea>\n\t\t\t\t\t<button cv-on = "click:copy">[[copy]]</button>\n\t\t\t\t</label>\n\n\t\t\t\t<label cv-if = "haveToken">\n\t\t\t\t\t<p>Input the token they send back here.</p>\n\t\t\t\t\t<textarea cv-bind = "input" cv-on = "click:paste(event)"></textarea>\n\t\t\t\t\t<button cv-on = "click:acceptRtp">go!</button>\n\t\t\t\t\t<div class = "close" cv-on = "click:disconnect"></div>\n\t\t\t\t</label>\n\t\t\t</div>\n\t\t</section>\n\t</section>\n\t<section class = "override">[[override]]</section>\n</div>\n'}),require.register("Menu/menu.html",function(t,e,r){r.exports='<div class = "screen-card screen-card-[[cardName]] [[animation]]">\n\t<div class = "menu-scroller"></div>\n\t[[warp]]\n\t<div class = "menu-container" data-current-menu = "[[currentKey]]">\n\t\t<ul cv-ref = "bound" cv-each = "items:item:title">\n\t\t\t<li data-title = "[[title]]" class = "[[item.available]]" data-type = "[[item.input]]" data-sub-type = "[[item.subType]]" cv-on = "click:run(item, event);cvDomDetached:removeItem(item);focus:handleFocus(event)" tabindex="0">\n\t\t\t\t<span class = "title">[[item._title]]</span>\n\t\t\t\t<span class = "subtext">[[item.subtext]]</span>\n\t\t\t\t<span cv-if = "item.input" cv-is = "output">\n\t\t\t\t\t: <span data-wraps = "output"><span cv-ref = "output" cv-bind = "item.setting"></span></span>\n\t\t\t\t</span>\n\t\t\t\t<span cv-if = "item.input" cv-is = "string">\n\t\t\t\t\t: <span data-wraps = "string"><input cv-ref = "string" cv-bind = "item.setting" cv-on = "keyup(event);input:change(event)" tabindex="-1" /></span>\n\t\t\t\t</span>\n\t\t\t\t<span cv-if = "item.input" cv-is = "number">\n\t\t\t\t\t: <span data-wraps = "number"><input cv-ref = "number" cv-bind = "item.setting" type = "[[item.subType]]" cv-on = "keyup(event);change(event)" tabindex="-1" max = "[[item.max]]" min = "[[item.min]]" step = "[[item.step]]" title = "[[item.setting]]" /></span>\n\t\t\t\t</span>\n\t\t\t\t<span cv-if = "item.input" cv-is = "boolean">\n\t\t\t\t\t: <span data-wraps = "select"><select cv-on = "mousedown:cancel(event);change(event)" cv-ref = "boolean" cv-bind = "item.setting" tabindex="-1">\n\t\t\t\t\t\t<option value = "1">on</option>\n\t\t\t\t\t\t<option value = "0">off</option>\n\t\t\t\t\t</select></span>\n\t\t\t\t</span>\n\t\t\t\t<span cv-if = "item.input" cv-is = "select">\n\t\t\t\t\t: <span data-wraps = "select"><select cv-on = "change(event)" cv-ref = "select" cv-bind = "item.setting" tabindex="-1" cv-each = "options:option:o">\n\t\t\t\t\t\t<option value = "[[o]]">[[o]]</option>\n\t\t\t\t\t</select></span>\n\t\t\t\t</span>\n\t\t\t</li>\n\t\t</ul>\n\t</div>\n</div>\n'}),require.register("Menu/pause-menu.html",function(t,e,r){r.exports='<div class = "screen-card screen-card-[[cardName]] [[animation]] [[hideMenu]]">\n\n\t<div class = "menu-scroller"></div>\n\n\t[[warp]]\n\n\t<section class = "contents" cv-if = "!connected">\n\n\t\t<div class = "menu-container [[classes]]" data-current-menu = "[[currentKey]]">\n\n\t\t\t<div>[[title]]</div>\n\n\t\t\t<ul cv-ref = "bound" cv-each = "items:item:title">\n\n\t\t\t\t<li data-title = "[[title]]" class = "[[item.available]]" data-type = "[[item.input]]" data-sub-type = "[[item.subType]]" style = "--color:[[item.color]];" cv-on = "click:run(item, event):c; auxclick:altRun(item, event); keyup(event, item):c; focus:handleFocus(event);" tabindex="0">\n\t\t\t\t\t[[item.prefix]]\n\t\t\t\t\t<span class = "title">[[item._title]]</span>\n\t\t\t\t\t<span class = "subtext">[[item.subtext]]</span>\n\t\t\t\t\t<span cv-if = "item.input" cv-is = "output">\n\t\t\t\t\t\t: <span data-wraps = "output"><span cv-ref = "output" cv-bind = "item.setting"></span></span>\n\t\t\t\t\t</span>\n\t\t\t\t\t<span cv-if = "item.input" cv-is = "string" data-click-barrier>\n\t\t\t\t\t\t: <input cv-ref = "string" cv-bind = "item.setting" cv-on = "keyup(event, item);input:change(event)" tabindex="-1" />\n\t\t\t\t\t</span>\n\t\t\t\t\t<span cv-if = "item.input" cv-is = "number">\n\t\t\t\t\t\t: <span data-wraps = "number" data-click-barrier>\n\t\t\t\t\t\t\t<input cv-ref = "number" cv-bind = "item.setting" type = "[[item.subType]]" cv-on = "keyup(event, item);change(event)" tabindex="-1" max = "[[item.max]]" min = "[[item.min]]" step = "[[item.step]]" title = "[[item.setting]]"/>\n\t\t\t\t\t\t</span>\n\t\t\t\t\t</span>\n\t\t\t\t\t<span cv-if = "item.input" cv-is = "boolean">\n\t\t\t\t\t\t:\n\t\t\t\t\t\t<span data-wraps = "select">\n\t\t\t\t\t\t\t[[item._boolValue]]\n\t\t\t\t\t\t\t<select cv-on = "click:mousedown:cancel(event);change(event)" cv-ref = "boolean" cv-bind = "item.setting" tabindex="-1">\n\t\t\t\t\t\t\t\t<option value = "1">on</option>\n\t\t\t\t\t\t\t\t<option value = "0">off</option>\n\t\t\t\t\t\t\t</select>\n\t\t\t\t\t\t</span>\n\t\t\t\t\t</span>\n\t\t\t\t\t<span cv-if = "item.input" cv-is = "select" class = "field">\n\t\t\t\t\t\t:\n\t\t\t\t\t\t<span data-wraps = "select">\n\t\t\t\t\t\t\t[[item._selectValue]]\n\t\t\t\t\t\t\t<select\n\t\t\t\t\t\t\t\tcv-on    = "input:change(event, title); listRendered:selectListRendered(event, item, title, $view, $subview, $parent);"\n\t\t\t\t\t\t\t\tcv-ref   = "options"\n\t\t\t\t\t\t\t\tcv-bind  = "item.setting"\n\t\t\t\t\t\t\t\ttabindex = "-1"\n\t\t\t\t\t\t\t\tcv-each  = "item.options:option">\n\t\t\t\t\t\t\t\t<option value = "[[option]]">[[option]]</option>\n\t\t\t\t\t\t\t</select>\n\t\t\t\t\t\t</span>\n\t\t\t\t\t</span>\n\t\t\t\t\t[[item.suffix]]\n\t\t\t\t</li>\n\t\t</ul>\n\n\t\t</div>\n\n\t</section>\n\n\t<section class = "override">[[override]]</section>\n\n</div>\n'}),require.register("ObjectPalette.js",function(t,e,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ObjectPalette=void 0;e("./actor/PointActor");var n=e("./actor/LayerSwitch"),i=e("./region/Region"),o=e("./region/ShadeRegion"),a=(e("./region/BgShadeRegion"),e("./region/FgShadeRegion"),e("./region/WaterRegion")),s=e("./region/DarkRegion"),c=e("./region/LavaRegion"),l=e("./region/ToxicRegion"),u=e("./region/PhazonRegion"),f=e("./region/RollingRegion"),p=e("./region/SlidingRegion"),h=e("./region/GrindingRegion"),g=e("./region/ForceRegion"),d=e("./region/FrictionRegion"),y=e("./region/CorkscrewRegion"),b=e("./region/BossRegion"),v=e("./region/ExitRegion"),m=e("./region/LoadingRegion"),w=e("./region/ExplodingRegion"),S=e("./region/SwitchRegion"),O=e("./region/RainRegion"),j=e("./region/DebrisRegion"),x=e("./region/WaterfallRegion"),P=e("./region/KillRegion"),k=e("./region/VerticalRegion"),_=e("./region/VehicleRegion"),R=e("./region/DropVehicleRegion"),M=e("./region/PerspectiveRegion"),T=e("./actor/CompanionBlock"),E=e("./actor/QuestionBlock"),C=e("./actor/MarbleBlock"),A=e("./actor/BreakableBlock"),B=e("./actor/Stopper"),D=e("./actor/Zipline"),I=e("./actor/Block3d"),F=e("./actor/Block"),L=e("./actor/Tree"),N=e("./actor/Coconut"),z=e("./actor/Mushroom"),q=e("./actor/Door"),U=e("./actor/PlatformFlare"),H=e("./actor/GravityPad"),W=(e("./actor/Monitor"),e("./actor/monitor/WebMonitor")),G=e("./actor/monitor/RingMonitor"),$=e("./actor/monitor/TripleRingMonitor"),V=e("./actor/monitor/InfoMonitor"),K=e("./actor/monitor/SheildStarMonitor"),Y=e("./actor/monitor/SheildNormalMonitor"),J=e("./actor/monitor/SheildFireMonitor"),X=e("./actor/monitor/SheildWaterMonitor"),Z=e("./actor/monitor/SheildElectricMonitor"),Q=e("./actor/Bumper"),tt=e("./actor/Flipper"),et=e("./actor/SeeSaw"),rt=e("./actor/Cinematic"),nt=e("./actor/Tumbler"),it=e("./actor/Flickie"),ot=e("./actor/Bubbles"),at=e("./actor/Redz"),st=e("./actor/GuardBot"),ct=e("./actor/Sping"),lt=e("./actor/CrabMeat"),ut=e("./actor/BuzzBomber"),ft=e("./actor/MechaFroggy"),pt=e("./actor/DrainFly"),ht=e("./actor/GohlaBall"),gt=e("./actor/Voltorb"),dt=e("./actor/Balkiry"),yt=e("./actor/Jawz"),bt=e("./actor/SnailBot"),vt=e("./actor/Motobug"),mt=e("./actor/BFish"),wt=e("./actor/Grounder"),St=e("./actor/Scratch"),Ot=e("./actor/TechnoSqueak"),jt=e("./actor/Blastoid"),xt=e("./actor/Meanie"),Pt=e("./actor/SpringTurtle"),kt=e("./actor/Sparkle"),_t=e("./actor/Splats"),Rt=e("./actor/Relief"),Mt=e("./actor/Barnacle"),Tt=e("./actor/Skorp"),Et=e("./actor/RhinoBot"),Ct=e("./actor/Gator"),At=e("./actor/ButterDroid"),Bt=e("./actor/Catakiller"),Dt=e("./actor/CatakillerSegment"),It=e("./actor/EggTroid"),Ft=e("./actor/SpitFire"),Lt=e("./actor/SpitSteam"),Nt=e("./actor/Explosion"),zt=e("./actor/StarPost"),qt=e("./actor/ArrowSign"),Ut=e("./actor/Emerald"),Ht=e("./actor/FakeEmerald"),Wt=e("./actor/Window"),Gt=e("./actor/Spring"),$t=e("./actor/NotchSpring"),Vt=(e("./actor/BrokenMonitor"),e("./actor/BoostRing")),Kt=e("./actor/Ring"),Yt=e("./actor/Coin"),Jt=e("./actor/Emblem"),Xt=e("./actor/Apple"),Zt=e("./actor/AntiRing"),Qt=e("./actor/DropCage"),te=e("./actor/SlotMachine"),ee=e("./actor/WaterFall"),re=e("./actor/WaterJet"),ne=e("./actor/WaterSpout"),ie=e("./actor/PowerupGlow"),oe=e("./actor/Projectile"),ae=e("./actor/TextActor"),se=e("./actor/EggMobile"),ce=e("./actor/SnowBoard"),le=e("./actor/SkateBoard"),ue=e("./actor/DrillCar"),fe=e("./actor/Tornado"),pe=e("./actor/RailCar"),he=e("./actor/EggWalker"),ge=e("./actor/EggShuttle"),de=e("./actor/PogoSpring"),ye=e("./actor/NuclearSuperball"),be=e("./actor/Platformer"),ve=e("./actor/MechaSonic"),me=e("./actor/Eggrobo"),we=e("./actor/Eggman"),Se=e("./actor/Sonic"),Oe=e("./actor/Tails"),je=e("./actor/Knuckles"),xe=e("./actor/Seymour"),Pe=e("./actor/Chalmers"),ke=e("./actor/Sean"),_e=e("./actor/Big"),Re=e("./actor/Rocks"),Me=e("./actor/Switch"),Te=e("./actor/HeavyDutySwitch"),Ee=e("./actor/Balloon"),Ce=e("./actor/StarBalloon"),Ae=e("./actor/Spinner"),Be=e("./actor/HallBooster"),De=e("./actor/Springboard"),Ie=e("./actor/GrapplePoint"),Fe=e("./actor/WoodenCrate"),Le=e("./actor/SteelCrate"),Ne=e("./actor/ChaoCrate"),ze=e("./actor/UnbreakableCrate"),qe=e("./actor/Rocket"),Ue=e("./actor/Booster"),He=e("./actor/WindStone"),We=e("./actor/Skull"),Ge=e("./actor/Pumpkin"),$e=e("./actor/RoadBarrier"),Ve=e("./actor/CautionPanel"),Ke=e("./actor/Spikes"),Ye=e("./actor/SpikesSmall"),Je=e("./actor/Cone"),Xe=e("./actor/Fountain"),Ze=e("./actor/CautionSign"),Qe=e("./actor/RollingSign"),tr=e("./actor/Bell"),er=e("./actor/Torch"),rr=e("./actor/LightSource"),nr=e("./actor/Signpost"),ir=e("./actor/Umbrella"),or=e("./actor/Dish"),ar=e("./actor/RedEyeJet"),sr=e("./actor/MiniMace"),cr=e("./actor/MegaMace"),lr=e("./actor/Beelzebub"),ur=e("./actor/MiniBoss"),fr=e("./actor/PogoEgg"),pr=e("./actor/Magnet"),hr=e("./actor/Pulley"),gr=e("./actor/PulleySmall"),dr=e("./actor/Orb"),yr=e("./actor/OrbSmall"),br=e("./actor/Egg"),vr=e("./actor/Chao"),mr=e("./actor/EggShellTop"),wr=e("./actor/EggShellBottom"),Sr=e("./actor/BackdropSwapper"),Or=e("./actor/LayerController"),jr=e("./actor/WaterController"),xr=e("./actor/TilesetSwapper"),Pr=e("./actor/CutScene"),kr=(e("./actor/HtmlFrame"),e("./actor/Panel")),_r=e("./actor/Tester"),Rr=e("./actor/Cursor"),Mr=e("./actor/MouseIndicator"),Tr=e("./actor/Spawner"),Er=e("./actor/NeverBetter"),Cr=e("./actor/AsteroidLarge"),Ar=e("./actor/AsteroidMedium"),Br=e("./actor/AsteroidSmall"),Dr=e("./actor/Asteroid"),Ir=e("./actor/RocketPlatform"),Fr=e("./actor/PropellerPlatform"),Lr=e("./actor/HexNut"),Nr=e("./actor/SpinningFloat"),zr=e("./actor/Turtloid"),qr=e("./actor/CrossCannon"),Ur=e("./actor/ChaoDetailer"),Hr=e("./actor/Angel"),Wr=e("./actor/Flag"),Gr=e("./actor/GiantTire"),$r=e("./actor/TruckBody"),Vr=e("./actor/TruckCab"),Kr=e("./actor/Dolphin"),Yr=e("./actor/Herculad"),Jr=e("./actor/Chopper"),Xr=e("./actor/TrickRamp"),Zr=e("./actor/TwistRamp"),Qr=e("./actor/AirBomb"),tn=e("./actor/EggCapsule"),en=e("./actor/SpikeRing"),rn=e("./actor/ToxicBarrel"),nn=e("./actor/SpinBridge"),on=e("./actor/StoneAltar"),an=e("./actor/BouncyMushroom"),sn=e("./actor/NitroBooster"),cn=e("./actor/LavaBall");const ln={player:ye.NuclearSuperball,cinematic:rt.Cinematic,spring:Gt.Spring,"layer-switch":n.LayerSwitch,"layer-controller":Or.LayerController,"water-controller":jr.WaterController,"backdrop-swapper":Sr.BackdropSwapper,"tileset-swapper":xr.TilesetSwapper,"star-post":zt.StarPost,"arrow-sign":qt.ArrowSign,projectile:oe.Projectile,block3d:I.Block3d,block:F.Block,tree:L.Tree,coconut:N.Coconut,mushroom:z.Mushroom,door:q.Door,"platform-flare":U.PlatformFlare,"gravity-pad":H.GravityPad,"q-block":E.QuestionBlock,"marble-block":C.MarbleBlock,"companion-block":T.CompanionBlock,"breakable-block":A.BreakableBlock,stopper:B.Stopper,zipline:D.Zipline,bumper:Q.Bumper,flipper:tt.Flipper,"see-saw":et.SeeSaw,"drill-car":ue.DrillCar,"rail-car":pe.RailCar,tornado:fe.Tornado,"egg-walker":he.EggWalker,"snow-board":ce.SnowBoard,"skate-board":le.SkateBoard,"egg-mobile":se.EggMobile,"egg-shuttle":ge.EggShuttle,"pogo-spring":de.PogoSpring,"rocks-tall":Re.Rocks,"rocks-med":Re.Rocks,"rocks-short":Re.Rocks,"mecha-sonic":ve.MechaSonic,platformer:be.Platformer,sonic:Se.Sonic,tails:Oe.Tails,knuckles:je.Knuckles,eggman:we.Eggman,robotnik:we.Eggman,eggrobo:me.Eggrobo,seymour:xe.Seymour,chalmers:Pe.Chalmers,sean:ke.Sean,big:_e.Big,switch:Me.Switch,"heavy-duty-switch":Te.HeavyDutySwitch,window:Wt.Window,emerald:Ut.Emerald,"fake-emerald":Ht.FakeEmerald,"base-region":i.Region,region:a.WaterRegion,"lava-region":c.LavaRegion,"toxic-region":l.ToxicRegion,"phazon-region":u.PhazonRegion,"dark-region":s.DarkRegion,"shade-region":o.ShadeRegion,"force-region":g.ForceRegion,"friction-region":d.FrictionRegion,"corkscrew-region":y.CorkscrewRegion,"rolling-region":f.RollingRegion,"sliding-region":p.SlidingRegion,"grinding-region":h.GrindingRegion,"exploding-region":w.ExplodingRegion,"boss-region":b.BossRegion,"exit-region":v.ExitRegion,"loading-region":m.LoadingRegion,"switch-region":S.SwitchRegion,"rain-region":O.RainRegion,"debris-region":j.DebrisRegion,"waterfall-region":x.WaterfallRegion,"kill-region":P.KillRegion,"vertical-region":k.VerticalRegion,"vehicle-region":_.VehicleRegion,"drop-vehicle-region":R.DropVehicleRegion,"perspective-region":M.PerspectiveRegion,"boost-ring":Vt.BoostRing,ring:Kt.Ring,antiring:Zt.AntiRing,coin:Yt.Coin,emblem:Jt.Emblem,"notch-spring":$t.NotchSpring,apple:Xt.Apple,"drop-cage":Qt.DropCage,"slot-machine":te.SlotMachine,"powerup-glow":ie.PowerupGlow,explosion:Nt.Explosion,"text-actor":ae.TextActor,"water-jet":re.WaterJet,"water-fall":ee.WaterFall,"water-spout":ne.WaterSpout,balloon:Ee.Balloon,"star-balloon":Ce.StarBalloon,"web-monitor":W.WebMonitor,"ring-monitor":G.RingMonitor,"triple-ring-monitor":$.TripleRingMonitor,"info-monitor":V.InfoMonitor,"sheild-fire-monitor":J.SheildFireMonitor,"sheild-normal-monitor":Y.SheildNormalMonitor,"sheild-star-monitor":K.SheildStarMonitor,"sheild-water-monitor":X.SheildWaterMonitor,"sheild-electric-monitor":Z.SheildElectricMonitor,flickie:it.Flickie,crabmeat:lt.CrabMeat,redz:at.Redz,"guard-bot":st.GuardBot,sping:ct.Sping,"mecha-froggy":ft.MechaFroggy,"buzz-bomber":ut.BuzzBomber,bubbles:ot.Bubbles,drainfly:pt.DrainFly,"gohla-ball":ht.GohlaBall,voltorb:gt.Voltorb,balkiry:dt.Balkiry,jawz:yt.Jawz,snailbot:bt.SnailBot,motobug:vt.Motobug,"b-fish":mt.BFish,grounder:wt.Grounder,scratch:St.Scratch,"techno-squeak":Ot.TechnoSqueak,blastoid:jt.Blastoid,meanie:xt.Meanie,"spring-turtle":Pt.SpringTurtle,sparkle:kt.Sparkle,splats:_t.Splats,relief:Rt.Relief,barnacle:Mt.Barnacle,skorp:Tt.Skorp,"rhino-bot":Et.RhinoBot,gator:Ct.Gator,"butter-droid":At.ButterDroid,catakiller:Bt.Catakiller,"catakiller-segment":Dt.CatakillerSegment,eggtroid:It.EggTroid,spitfire:Ft.SpitFire,spitsteam:Lt.SpitSteam,"grapple-point":Ie.GrapplePoint,rocket:qe.Rocket,booster:Ue.Booster,spinner:Ae.Spinner,"hall-booster":Be.HallBooster,springboard:De.Springboard,"wooden-crate":Fe.WoodenCrate,"steel-crate":Le.SteelCrate,"chao-crate":Ne.ChaoCrate,"unbreakable-crate":ze.UnbreakableCrate,"road-barrier":$e.RoadBarrier,"caution-panel":Ve.CautionPanel,signpost:nr.Signpost,umbrella:ir.Umbrella,dish:or.Dish,"red-eye-jet":ar.RedEyeJet,beelzebub:lr.Beelzebub,"pogo-egg":fr.PogoEgg,"mini-boss":ur.MiniBoss,"mini-mace":sr.MiniMace,"mega-mace":cr.MegaMace,magnet:pr.Magnet,pulley:hr.Pulley,"pulley-small":gr.PulleySmall,spikes:Ke.Spikes,"spikes-small":Ye.SpikesSmall,cone:Je.Cone,"wind-stone":He.WindStone,skull:We.Skull,pumpkin:Ge.Pumpkin,fountain:Xe.Fountain,"caution-sign":Ze.CautionSign,"rolling-sign":Qe.RollingSign,bell:tr.Bell,torch:er.Torch,"light-source":rr.LightSource,orb:dr.Orb,"orb-small":yr.OrbSmall,chao:vr.Chao,egg:br.Egg,"egg-shell-top":mr.EggShellTop,"egg-shell-bottom":wr.EggShellBottom,"cut-scene":Pr.CutScene,panel:kr.Panel,tester:_r.Tester,cursor:Rr.Cursor,"mouse-indicator":Mr.MouseIndicator,spawner:Tr.Spawner,"never-better":Er.NeverBetter,"asteroid-large":Cr.AsteroidLarge,"asteroid-medium":Ar.AsteroidMedium,"asteroid-small":Br.AsteroidSmall,asteroid:Dr.Asteroid,"rocket-platform":Ir.RocketPlatform,"propeller-platform":Fr.PropellerPlatform,"hex-nut":Lr.HexNut,"spinning-float":Nr.SpinningFloat,turtloid:zr.Turtloid,angel:Hr.Angel,"chao-detailer":Ur.ChaoDetailer,"cross-cannon":qr.CrossCannon,tumbler:nt.Tumbler,flag:Wr.Flag,"giant-tire":Gr.GiantTire,"truck-body":$r.TruckBody,"truck-cab":Vr.TruckCab,dolphin:Kr.Dolphin,herculad:Yr.Herculad,chopper:Jr.Chopper,"trick-ramp":Xr.TrickRamp,"twist-ramp":Zr.TwistRamp,"air-bomb":Qr.AirBomb,"egg-capsule":tn.EggCapsule,"spike-ring":en.SpikeRing,"toxic-barrel":rn.ToxicBarrel,"spin-bridge":nn.SpinBridge,"stone-altar":on.StoneAltar,"bouncy-mushroom":an.BouncyMushroom,"nitro-booster":sn.NitroBooster,"lava-ball":cn.LavaBall};t.ObjectPalette=ln}),require.register("QuadCell.js",function(t,e,r){"use strict";function n(t){"@babel/helpers - typeof";return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function i(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,a(n.key),n)}}function o(t,e,r){return(e=a(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function a(t){var e=function(t,e){if("object"!==n(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var i=r.call(t,e||"default");if("object"!==n(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===n(e)?e:String(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.QuadCell=void 0;const s=Symbol("CellRef");let c=function(){function t(e){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{x:0,y:0},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{x:0,y:0},i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),o(this,"position",{}),o(this,"size",{}),o(this,"divided",!1),o(this,"parent",null),o(this,"leafPoint",{x:null,y:null}),o(this,"leafRefs",null),o(this,"ld",null),o(this,"rd",null),o(this,"lu",null),o(this,"ru",null),o(this,"cells",[]),o(this,"minSize",0),this.parent=i,this.position.x=r.x,this.position.y=r.y,this.size.x=n.x,this.size.y=n.y,this.minSize=e,Object.seal(this)}var e,r,n;return e=t,(r=[{key:"empty",value:function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;if(!this.divided)return!this.leafRefs||!this.leafRefs.size;for(const e in this.cells)if(!this.cells[e].empty(t+1))return!1;return!0}},{key:"insert",value:function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{x:0,y:0};if(!this.contains(e))return!1;if(!this.leafRefs&&!this.divided)return this.leafRefs=new Set,this.leafPoint.x=e.x,this.leafPoint.y=e.y,this.leafRefs.add(t),t[s]=this,!0;if(this.size.x<=this.minSize)return this.leafRefs.add(t),t[s]=this,!0;if(this.leafRefs&&e.x===this.leafPoint.x&&e.y===this.leafPoint.y)return this.leafRefs.add(t),t[s]=this,!0;this.divided||this.divide();for(const r of this.cells)if(r.insert(t,e))return!0;return!1}},{key:"move",value:function(t,e){const r=t[s];if(r){if(r.leafPoint.x===e.x&&r.leafPoint.y===e.y)return;t[s]=null,r.leafRefs.delete(t),r.parent&&r.parent.join()}this.insert(t,e)}},{key:"remove",value:function(t){const e=t[s];e&&(t[s]=null,e.leafRefs.delete(t),e.parent&&e.parent.join())}},{key:"join",value:function(){if(!this.empty())return!1;let t=null;for(const e of this.cells)if(!e.empty()){if(t)return!1;t=e}this.ld=null,this.rd=null,this.lu=null,this.ru=null,this.cells=[],this.divided=!1,t&&t.leafRefs.forEach(t=>this.insert(t)),this.parent&&this.parent.join()}},{key:"divide",value:function(){if(this.divided)return!1;const t=this.position,e=this.size,r=this.minSize;if(this.ld=new this.constructor(r,{x:t.x-e.x/4,y:t.y-e.y/4},{x:e.x/2,y:e.y/2},this),this.rd=new this.constructor(r,{x:t.x+e.x/4,y:t.y-e.y/4},{x:e.x/2,y:e.y/2},this),this.lu=new this.constructor(r,{x:t.x-e.x/4,y:t.y+e.y/4},{x:e.x/2,y:e.y/2},this),this.ru=new this.constructor(r,{x:t.x+e.x/4,y:t.y+e.y/4},{x:e.x/2,y:e.y/2},this),this.cells.push(this.ld,this.rd,this.lu,this.ru),this.divided=!0,!this.leafRefs.size)return!0;t:for(const t of this.leafRefs)for(const e of this.cells){if(e.insert(t,this.leafPoint)){this.leafRefs.delete(t);continue t}}}},{key:"contains",value:function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{x:0,y:0};const e=this.position.x-this.size.x/2,r=this.position.x+this.size.x/2;if(t.x<e||t.x>r)return!1;const n=this.position.y-this.size.y/2,i=this.position.y+this.size.y/2;return!(t.y<n||t.y>i)}},{key:"select",value:function(t,e,r,n){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0;if(this.empty())return[];if(r/2+this.size.x/2<Math.abs(t-this.position.x))return[];if(n/2+this.size.y/2<Math.abs(e-this.position.y))return[];if(this.divided){const o=new Set;for(const a of this.cells)for(const s of a.select(t,e,r,n,i+1))o.add(s);return o}return this.leafRefs?this.leafRefs:[]}}])&&i(e.prototype,r),n&&i(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();t.QuadCell=c}),require.register("ScriptPalette.js",function(t,e,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ScriptPalette=void 0;const n={"infinite-ruin":e("./zoneScripts/InfiniteRuin").InfiniteRuin,"chao-garden":e("./zoneScripts/ChaoGarden").ChaoGarden};t.ScriptPalette=n}),require.register("World.js",function(t,e,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.World=void 0;var n=e("curvature/base/Bag"),i=e("curvature/base/Bindable"),o=e("tileMap/TileMap");function a(t){"@babel/helpers - typeof";return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function s(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,l(n.key),n)}}function c(t,e,r){return(e=l(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function l(t){var e=function(t,e){if("object"!==a(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==a(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===a(e)?e:String(e)}let u=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),c(this,"tileMap",new o.TileMap),this.viewports=new n.Bag((t,e,r)=>{switch(r){case BAG.ITEM_ADDED:t.world=this;break;case BAG.ITEM_REMOVED:t.world=null}}),this.actors=new n.Bag((t,e,r)=>{switch(r){case BAG.ITEM_ADDED:t.world=this;break;case BAG.ITEM_REMOVED:t.world=null}})}var e,r,i;return e=t,(r=[{key:"getOnScreenObjects",value:function(t){}},{key:"update",value:function(){}}])&&s(e.prototype,r),i&&s(e,i),Object.defineProperty(e,"prototype",{writable:!1}),t}();t.World=u,c(u,"globals",i.Bindable.make({}))}),require.register("abilities/LightDash.js",function(t,e,r){"use strict";function n(t){"@babel/helpers - typeof";return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function i(t,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,(o=i.key,void 0,"symbol"===n(a=function(t,e){if("object"!==n(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var i=r.call(t,e||"default");if("object"!==n(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(o,"string"))?a:String(a)),i)}var o,a}Object.defineProperty(t,"__esModule",{value:!0}),t.LightDash=void 0;let o=function(t,e,r){return e&&i(t.prototype,e),r&&i(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}(function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)});t.LightDash=o}),require.register("actor/AirBomb.js",function(t,e,r){"use strict";function n(t){"@babel/helpers - typeof";return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(t,"__esModule",{value:!0}),t.AirBomb=void 0;var i=e("./PointActor"),o=e("../audio/Sfx"),a=e("curvature/base/Tag");function s(t,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,(o=i.key,void 0,"symbol"===n(a=function(t,e){if("object"!==n(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var i=r.call(t,e||"default");if("object"!==n(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(o,"string"))?a:String(a)),i)}var o,a}function c(){return(c="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=f(t)););return t}(t,e);if(n){var i=Object.getOwnPropertyDescriptor(n,e);return i.get?i.get.call(arguments.length<3?t:r):i.value}}).apply(this,arguments)}function l(t,e){return(l=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function u(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,i=f(t);if(e){var o=f(this).constructor;r=Reflect.construct(i,arguments,o)}else r=i.apply(this,arguments);return function(t,e){if(e&&("object"===n(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function f(t){return(f=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}let p=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&l(t,e)}(h,i.PointActor);var e,r,n,p=u(h);function h(){var t;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,h);for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];return(t=p.call(this,...r)).args.width=22,t.args.height=32,t.args.type="actor-item actor-air-bomb",t.args.decel=0,t.explosions=new Set,t}return e=h,(r=[{key:"update",value:function(){this.args.falling||this.explosions.size||this.explode(),c(f(h.prototype),"update",this).call(this);for(const t of this.explosions)t.style({"--x":this.args.x,"--y":this.args.y+-16})}},{key:"collideA",value:function(t){t.controllable&&(t.damage(this),this.explode(),this.args.float=-1,this.args.xSpeed=0,this.args.ySpeed=0)}},{key:"explode",value:function(){if(this.exploded)return;this.exploded=!0,this.args.type="actor-item actor-air-bomb hide";const t=document.createElement("div");t.classList.add("particle-huge-explosion");const e=new a.Tag(t);this.explosions.add(e);const r=this.viewport;this.viewport.particles.add(e),this.viewport.onFrameOut(30,()=>{r.particles.remove(e),r.actors.remove(this),this.explosions.delete(e)}),o.Sfx.play("OBJECT_DESTROYED")}}])&&s(e.prototype,r),n&&s(e,n),Object.defineProperty(e,"prototype",{writable:!1}),h}();t.AirBomb=p}),require.register("actor/Angel.js",function(t,e,r){"use strict";function n(t){"@babel/helpers - typeof";return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(t,"__esModule",{value:!0}),t.Angel=void 0;var i=e("./PointActor");e("../behavior/Liftable");function o(t,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,(o=i.key,void 0,"symbol"===n(a=function(t,e){if("object"!==n(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var i=r.call(t,e||"default");if("object"!==n(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(o,"string"))?a:String(a)),i)}var o,a}function a(t,e){return(a=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function s(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,i=c(t);if(e){var o=c(this).constructor;r=Reflect.construct(i,arguments,o)}else r=i.apply(this,arguments);return function(t,e){if(e&&("object"===n(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function c(t){return(c=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}let l=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&a(t,e)}(l,i.PointActor);var e,r,n,c=s(l);function l(){var t;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,l);for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];return(t=c.call(this,...r)).args.type="actor-item actor-angel",t.args.width=45,t.args.height=80,t}return e=l,r&&o(e.prototype,r),n&&o(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}();t.Angel=l}),require.register("actor/AntiRing.js",function(t,e,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AntiRing=void 0;var n=e("./PointActor"),i=e("../audio/Sfx");function o(t){"@babel/helpers - typeof";return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function a(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,h(n.key),n)}}function s(){return(s="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=f(t)););return t}(t,e);if(n){var i=Object.getOwnPropertyDescriptor(n,e);return i.get?i.get.call(arguments.length<3?t:r):i.value}}).apply(this,arguments)}function c(t,e){return(c=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function l(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=f(t);if(e){var i=f(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===o(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return u(t)}(this,r)}}function u(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function f(t){return(f=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function p(t,e,r){return(e=h(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function h(t){var e=function(t,e){if("object"!==o(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==o(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===o(e)?e:String(e)}let g=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&c(t,e)}(g,n.PointActor);var e,r,o,h=l(g);function g(){var t,e,r,n;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,g);for(var i=arguments.length,o=new Array(i),a=0;a<i;a++)o[a]=arguments[a];return p(u(n=h.call(this,...o)),"template",'<div class  = "point-actor [[type]]">\n\t\t<div class = "sprite" cv-ref = "sprite"></div>\n\t</div>'),p(u(n),"float",-1),n.args.type="actor-item actor-anti-ring",n.args.width=15,n.args.height=15,n.args.static=null===(t=n.args.static)||void 0===t||t,n.args.dropped=null===(e=n.args.dropped)||void 0===e||e,n.args.gone=!1,n.args.gravity=.4,n.args.delay=null!==(r=n.args.delay)&&void 0!==r?r:48,n}return e=g,(r=[{key:"update",value:function(){if(!this.viewport)return;this.viewport.args.frameId,this.startFrame;this.args.noClip?this.noClip=!0:this.args.decoration?this.noClip=!0:this.args.ySpeed<0?this.noClip=!0:this.attract||(this.noClip=!1),this.args.decoration&&(this.args.type="actor-item actor-anti-ring decoration",this.args.gravity=.36),this.dropped&&(this.args.type="actor-item actor-anti-ring dropped",this.args.height=14);const t=this.viewport;this.dropped&&this.viewport&&!this.viewport.actorIsOnScreen(this,256)&&t.onFrameOut(15,()=>{t.actors.remove(this)}),this.args.reward&&this.args.gone&&t.onFrameOut(15,()=>{t.actors.remove(this)}),s(f(g.prototype),"update",this).call(this),this.args.reward||(this.getMapSolidAt(this.x+this.args.xSpeed*this.args.direction,this.y+-8)&&(this.args.xSpeed*=-1),!this.dropped&&!this.scattered||this.args.falling&&this.args.ySpeed||(this.args.xSpeed=this.args.xSpeed||this.xSpeedLast||Math.random()-.5,this.args.ySpeed=Math.min(.75*-Math.abs(this.args.ySpeed||this.ySpeedLast||0),-5),this.args.gSpeed=0,this.args.x+=this.args.xSpeed,this.args.y+=this.args.ySpeed,this.args.falling=!0,this.args.groundAngle=0))}},{key:"callCollideHandler",value:function(t){return!(t instanceof g)&&s(f(g.prototype),"callCollideHandler",this).call(this,t)}},{key:"collideA",value:function(t){if(t instanceof this.constructor)return;if(!this.viewport||this.args.gone||this.args.ignore)return!1;if(!t.controllable&&!t.occupant&&!t.args.owner)return!1;const e=this.viewport.args.frameId-this.startFrame;if(this.dropped&&e<this.args.delay)return!1;s(f(g.prototype),"collideA",this).call(this,t),t.args.owner&&(t=t.args.owner),t.occupant&&(t=t.occupant),t.controllable&&(t.args.rings-=1),this.args.gone=!0,this.viewport.auras.delete(this),this.args.static=!0,this.args.float=-1,this.args.type="actor-item actor-anti-ring collected",this.args.xSpeed=0,this.args.ySpeed=0,this.viewport.args.audio&&i.Sfx.play("SPIKE_DAMAGE"),this.viewport.onFrameOut(5,()=>{this.args.type="actor-item actor-anti-ring collected gone"});this.x,this.y,this.viewport;this.viewport.onFrameOut(1200,()=>{this.restore=!0}),t.collect&&this.onNextFrame(()=>{t.collect(this)})}},{key:"wakeUp",value:function(){this.def&&this.restore&&(this.args.x=this.def.get("x"),this.args.y=this.def.get("y"),this.args.gone=this.restore=!1,this.args.type="actor-item actor-anti-ring")}},{key:"solid",get:function(){return!1}},{key:"rotateLock",get:function(){return!0}}])&&a(e.prototype,r),o&&a(e,o),Object.defineProperty(e,"prototype",{writable:!1}),g}();t.AntiRing=g}),require.register("actor/Apple.js",function(t,e,r){"use strict";function n(t){"@babel/helpers - typeof";return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(t,"__esModule",{value:!0}),t.Apple=void 0;var i=e("./PointActor"),o=e("../audio/Sfx");function a(t,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,(o=i.key,void 0,"symbol"===n(a=function(t,e){if("object"!==n(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var i=r.call(t,e||"default");if("object"!==n(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(o,"string"))?a:String(a)),i)}var o,a}function s(){return(s="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=u(t)););return t}(t,e);if(n){var i=Object.getOwnPropertyDescriptor(n,e);return i.get?i.get.call(arguments.length<3?t:r):i.value}}).apply(this,arguments)}function c(t,e){return(c=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function l(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,i=u(t);if(e){var o=u(this).constructor;r=Reflect.construct(i,arguments,o)}else r=i.apply(this,arguments);return function(t,e){if(e&&("object"===n(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function u(t){return(u=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}let f=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&c(t,e)}(p,i.PointActor);var e,r,n,f=l(p);function p(){var t;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,p);for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];return(t=f.call(this,...r)).args.width=11,t.args.height=11,t.args.type="actor-item actor-apple",t.args.float=-1,t.collected=!1,t}return e=p,(r=[{key:"onRendered",value:function(t){return s(u(p.prototype),"onRendered",this).call(this,t)}},{key:"collideA",value:function(t){if(!t.controllable||this.gone)return;const e=this.viewport;e.getZoneState();this.collected?this.args.type="actor-item actor-apple actor-apple-gone actor-apple-collected":this.args.type="actor-item actor-apple actor-apple-gone",this.gone=!0,e.onFrameOut(20,()=>{e.actors.remove(this)}),e.currentSave.save(),this.viewport.args.audio&&o.Sfx.play("apple_COLLECTED")}}])&&a(e.prototype,r),n&&a(e,n),Object.defineProperty(e,"prototype",{writable:!1}),p}();t.Apple=f}),require.register("actor/ArrowSign.js",function(t,e,r){"use strict";function n(t){"@babel/helpers - typeof";return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(t,"__esModule",{value:!0}),t.ArrowSign=void 0;var i=e("./PointActor"),o=e("curvature/base/Tag");e("../actor/Projectile"),e("./Monitor"),e("./monitor/RingMonitor"),e("./monitor/SheildFireMonitor"),e("./monitor/SheildWaterMonitor"),e("./monitor/SheildElectricMonitor");function a(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,s(n.key),n)}}function s(t){var e=function(t,e){if("object"!==n(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var i=r.call(t,e||"default");if("object"!==n(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===n(e)?e:String(e)}function c(t,e){return(c=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function l(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,i=f(t);if(e){var o=f(this).constructor;r=Reflect.construct(i,arguments,o)}else r=i.apply(this,arguments);return function(t,e){if(e&&("object"===n(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function u(){return(u="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=f(t)););return t}(t,e);if(n){var i=Object.getOwnPropertyDescriptor(n,e);return i.get?i.get.call(arguments.length<3?t:r):i.value}}).apply(this,arguments)}function f(t){return(f=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}let p=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&c(t,e)}(h,i.PointActor);var e,r,n,p=l(h);function h(){var t,e,r;let n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=arguments.length>1?arguments[1]:void 0;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,h),(r=p.call(this,n,i)).args.type="actor-item actor-arrow-sign",r.args.float=null!==(t=r.args.float)&&void 0!==t?t:-1,r.args.static=null===(e=r.args.static)||void 0===e||e,r.args.width=n.width||32,r.args.height=n.height||64,r}return e=h,n=[{key:"fromDef",value:function(t){const e=u(f(h),"fromDef",this).call(this,t);return e.args.rotation=t.rotation,e.args.height=t.height,e}}],(r=[{key:"onRendered",value:function(t){var e,r,n;(u(f(h.prototype),"onRendered",this).call(this,t),this.headBox)||(this.headBox=new o.Tag('<div class = "arrow-sign-head-box">'),this.post=new o.Tag('<div class = "arrow-sign-post">'),this.head=new o.Tag('<div class = "arrow-sign-head">'),this.sprite.appendChild(this.post.node),this.headBox.appendChild(this.head.node),this.sprite.appendChild(this.headBox.node),this.args.bindTo(["point","height"],(t,i)=>{this.headBox.style((e={},n=t,(r=s(r="--"+i))in e?Object.defineProperty(e,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[r]=n,e))}))}},{key:"solid",get:function(){return!1}}])&&a(e.prototype,r),n&&a(e,n),Object.defineProperty(e,"prototype",{writable:!1}),h}();t.ArrowSign=p}),require.register("actor/Asteroid.js",function(t,e,r){"use strict";function n(t){"@babel/helpers - typeof";return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(t,"__esModule",{value:!0}),t.Asteroid=void 0;var i=e("./PointActor"),o=(e("./Block"),e("../audio/Sfx"),e("./AsteroidLarge"));function a(t,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,(o=i.key,void 0,"symbol"===n(a=function(t,e){if("object"!==n(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var i=r.call(t,e||"default");if("object"!==n(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(o,"string"))?a:String(a)),i)}var o,a}function s(){return(s="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=u(t)););return t}(t,e);if(n){var i=Object.getOwnPropertyDescriptor(n,e);return i.get?i.get.call(arguments.length<3?t:r):i.value}}).apply(this,arguments)}function c(t,e){return(c=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function l(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,i=u(t);if(e){var o=u(this).constructor;r=Reflect.construct(i,arguments,o)}else r=i.apply(this,arguments);return function(t,e){if(e&&("object"===n(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function u(t){return(u=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}let f=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&c(t,e)}(p,i.PointActor);var e,r,n,f=l(p);function p(){var t;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,p);for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];return(t=f.call(this,...r)).args.width=80,t.args.height=80,t.args.type="actor-item actor-asteroid",t.args.float=-1,t.args.static=1,t.args.spawned=!1,t.args.firedAt=0,t}return e=p,(r=[{key:"sleep",value:function(){this.args.spawned=!1}},{key:"update",value:function(){if(!this.viewport)return;const t=this.viewport;if(t.controlActor){if(t.controlActor.args.respawning)return;if(t.controlActor.args.y<this.args.y)return;if(Math.abs(t.controlActor.args.y-this.args.y)<128)return}if(t.args.frameId-this.args.firedAt<90)s(u(p.prototype),"update",this).call(this);else{if(this.args.spawned)return this.args.spawned=Math.random()>=.01,void s(u(p.prototype),"update",this).call(this);t.actorIsOnScreen(this,128)?(t.spawn.add({object:new o.AsteroidLarge({xSpeed:this.args.xSpeed,ySpeed:this.args.ySpeed,x:this.args.x,y:this.args.y})}),this.args.spawned=!0,this.args.firedAt=t.args.frameId):this.args.spawned=!1,s(u(p.prototype),"update",this).call(this)}}}])&&a(e.prototype,r),n&&a(e,n),Object.defineProperty(e,"prototype",{writable:!1}),p}();t.Asteroid=f}),require.register("actor/AsteroidBase.js",function(t,e,r){"use strict";function n(t){"@babel/helpers - typeof";return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(t,"__esModule",{value:!0}),t.AsteroidBase=void 0;var i=e("./PointActor");e("./Block"),e("../audio/Sfx");function o(t,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,(o=i.key,void 0,"symbol"===n(a=function(t,e){if("object"!==n(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var i=r.call(t,e||"default");if("object"!==n(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(o,"string"))?a:String(a)),i)}var o,a}function a(){return(a="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=l(t)););return t}(t,e);if(n){var i=Object.getOwnPropertyDescriptor(n,e);return i.get?i.get.call(arguments.length<3?t:r):i.value}}).apply(this,arguments)}function s(t,e){return(s=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function c(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,i=l(t);if(e){var o=l(this).constructor;r=Reflect.construct(i,arguments,o)}else r=i.apply(this,arguments);return function(t,e){if(e&&("object"===n(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function l(t){return(l=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}let u=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&s(t,e)}(f,i.PointActor);var e,r,n,u=c(f);function f(){var t;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,f);for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];return(t=u.call(this,...r)).args.width=80,t.args.height=80,t.args.type="actor-item actor-asteroid",t.args.broken=!1,t.args.decel=0,t}return e=f,(r=[{key:"sleep",value:function(){this.viewport&&this.viewport.actors.remove(this)}},{key:"update",value:function(){if(!this.viewport||this.args.broken)return a(l(f.prototype),"update",this).call(this),void(this.args.groundAngle=0);this.viewport;this.args.falling||this.break(),a(l(f.prototype),"update",this).call(this),this.args.groundAngle=0,this.viewport.actorIsOnScreen(this,128)||this.viewport&&this.viewport.actors.remove(this)}},{key:"rotateLock",get:function(){return!0}}])&&o(e.prototype,r),n&&o(e,n),Object.defineProperty(e,"prototype",{writable:!1}),f}();t.AsteroidBase=u}),require.register("actor/AsteroidLarge.js",function(t,e,r){"use strict";function n(t){"@babel/helpers - typeof";return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(t,"__esModule",{value:!0}),t.AsteroidLarge=void 0;var i=e("curvature/base/Tag"),o=(e("./PointActor"),e("./Block"),e("../audio/Sfx")),a=e("./AsteroidMedium"),s=e("./AsteroidBase");function c(t,e,r){return(e=u(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function l(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,u(n.key),n)}}function u(t){var e=function(t,e){if("object"!==n(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var i=r.call(t,e||"default");if("object"!==n(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===n(e)?e:String(e)}function f(){return(f="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=g(t)););return t}(t,e);if(n){var i=Object.getOwnPropertyDescriptor(n,e);return i.get?i.get.call(arguments.length<3?t:r):i.value}}).apply(this,arguments)}function p(t,e){return(p=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function h(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,i=g(t);if(e){var o=g(this).constructor;r=Reflect.construct(i,arguments,o)}else r=i.apply(this,arguments);return function(t,e){if(e&&("object"===n(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function g(t){return(g=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}let d=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&p(t,e)}(d,s.AsteroidBase);var e,r,n,u=h(d);function d(){var t;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,d);for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];return(t=u.call(this,...r)).args.type=`${t.args.type} actor-asteroid-large`,t.args.gravity=.45,t.args.width=64,t.args.height=80,t}return e=d,(r=[{key:"update",value:function(){if(f(g(d.prototype),"update",this).call(this),!this.viewport||this.viewport.args.frameId%3)return;const t=new i.Tag(document.createElement("div"));t.classList.add("particle-dust"),t.style({"--x":this.args.x,"--y":this.args.y+-this.args.height-.75,"z-index":0,opacity:.25*Math.random()+.5}),viewport.particles.add(t),viewport.onFrameOut(30,()=>{viewport.particles.remove(t)})}},{key:"collideA",value:function(t){!t.controllable||this.args.broken||t.args.mercy||t.args.y<this.args.y+.75*-this.args.height||(this.args.xSpeed=0,t.damage(this,"rock"),o.Sfx.play("ROCK_BREAK_1"),this.break())}},{key:"break",value:function(){const t=this.xSpeedLast||this.gSpeedLast||0,e=this.ySpeedLast||0;[new a.AsteroidMedium(c({falling:!0,x:this.args.x-20,y:this.args.y-20,xSpeed:t,ySpeed:.25*-e-1.5},"xSpeed",.333*t-.5)),new a.AsteroidMedium(c({falling:!0,x:this.args.x+20,y:this.args.y-20,xSpeed:t,ySpeed:.25*-e-1.5},"xSpeed",.333*t+.5)),new a.AsteroidMedium(c({falling:!0,x:this.args.x+0,y:this.args.y-4,xSpeed:t,ySpeed:.25*-e-1},"xSpeed",.333*t+0)),new a.AsteroidMedium(c({falling:!0,x:this.args.x+0,y:this.args.y-40,xSpeed:t,ySpeed:.25*-e-2},"xSpeed",.333*t+0))].forEach(t=>viewport.spawn.add({object:t})),viewport.onFrameOut(1,()=>viewport.actors.remove(this)),this.args.broken=!0,o.Sfx.play("ROCK_BREAK_1")}}])&&l(e.prototype,r),n&&l(e,n),Object.defineProperty(e,"prototype",{writable:!1}),d}();t.AsteroidLarge=d}),require.register("actor/AsteroidMedium.js",function(t,e,r){"use strict";function n(t){"@babel/helpers - typeof";return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(t,"__esModule",{value:!0}),t.AsteroidMedium=void 0;e("./PointActor"),e("./Block");var i=e("../audio/Sfx"),o=e("./AsteroidSmall"),a=e("./AsteroidBase");function s(t,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,(o=i.key,void 0,"symbol"===n(a=function(t,e){if("object"!==n(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var i=r.call(t,e||"default");if("object"!==n(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(o,"string"))?a:String(a)),i)}var o,a}function c(t,e){return(c=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function l(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,i=u(t);if(e){var o=u(this).constructor;r=Reflect.construct(i,arguments,o)}else r=i.apply(this,arguments);return function(t,e){if(e&&("object"===n(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function u(t){return(u=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}let f=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&c(t,e)}(f,a.AsteroidBase);var e,r,n,u=l(f);function f(){var t;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,f);for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];return(t=u.call(this,...r)).args.type=`${t.args.type} actor-asteroid-medium`,t.args.gravity=.5,t.args.width=48,t.args.height=48,t}return e=f,(r=[{key:"collideA",value:function(t){!t.controllable||this.args.broken||t.args.mercy||t.args.y<this.args.y+.75*-this.args.height||(t.damage(this,"rock"),i.Sfx.play("ROCK_BREAK_2"))}},{key:"break",value:function(){const t=this.xSpeedLast||this.gSpeedLast||0,e=this.ySpeedLast||0;[new o.AsteroidSmall({falling:!0,x:this.args.x+0,y:this.args.y-24,ySpeed:-.5*e-1,xSpeed:t+0}),new o.AsteroidSmall({falling:!0,x:this.args.x+0,y:this.args.y+0,ySpeed:-.5*e-1,xSpeed:t+0}),new o.AsteroidSmall({falling:!0,x:this.args.x-14,y:this.args.y-12,ySpeed:-.5*e-1,xSpeed:t-.15}),new o.AsteroidSmall({falling:!0,x:this.args.x+14,y:this.args.y-12,ySpeed:-.5*e-1,xSpeed:t+.15})].forEach(t=>viewport.spawn.add({object:t})),viewport.onFrameOut(1,()=>viewport.actors.remove(this)),this.args.broken=!0,i.Sfx.play("ROCK_BREAK_2")}}])&&s(e.prototype,r),n&&s(e,n),Object.defineProperty(e,"prototype",{writable:!1}),f}();t.AsteroidMedium=f}),require.register("actor/AsteroidSmall.js",function(t,e,r){"use strict";function n(t){"@babel/helpers - typeof";return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(t,"__esModule",{value:!0}),t.AsteroidSmall=void 0;var i=e("./PointActor"),o=(e("./Block"),e("../audio/Sfx"));function a(t,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,(o=i.key,void 0,"symbol"===n(a=function(t,e){if("object"!==n(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var i=r.call(t,e||"default");if("object"!==n(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(o,"string"))?a:String(a)),i)}var o,a}function s(t,e){return(s=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function c(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,i=l(t);if(e){var o=l(this).constructor;r=Reflect.construct(i,arguments,o)}else r=i.apply(this,arguments);return function(t,e){if(e&&("object"===n(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function l(t){return(l=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}let u=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&s(t,e)}(u,i.PointActor);var e,r,n,l=c(u);function u(){var t;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,u);for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];return(t=l.call(this,...r)).args.width=32,t.args.height=32,t.args.type="actor-item actor-asteroid-small",t.noClip=!0,t}return e=u,(r=[{key:"sleep",value:function(){this.viewport&&this.viewport.actors.remove(this)}},{key:"collideA",value:function(t){t.controllable&&!t.args.mercy&&(this.args.xSpeed=0,t.damage(this,"rock"),o.Sfx.play("ROCK_BREAK_2"))}},{key:"damage",value:function(){}},{key:"rotateLock",get:function(){return!0}}])&&a(e.prototype,r),n&&a(e,n),Object.defineProperty(e,"prototype",{writable:!1}),u}();t.AsteroidSmall=u}),require.register("actor/BFish.js",function(t,e,r){"use strict";function n(t){"@babel/helpers - typeof";return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(t,"__esModule",{value:!0}),t.BFish=void 0;e("./Flickie");var i=e("curvature/base/Mixin"),o=(e("curvature/base/Tag"),e("./PointActor")),a=e("../behavior/SkidDust"),s=e("../behavior/Patrol"),c=e("../mixin/CanPop");function l(t,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,(o=i.key,void 0,"symbol"===n(a=function(t,e){if("object"!==n(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var i=r.call(t,e||"default");if("object"!==n(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(o,"string"))?a:String(a)),i)}var o,a}function u(){return(u="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=h(t)););return t}(t,e);if(n){var i=Object.getOwnPropertyDescriptor(n,e);return i.get?i.get.call(arguments.length<3?t:r):i.value}}).apply(this,arguments)}function f(t,e){return(f=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function p(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,i=h(t);if(e){var o=h(this).constructor;r=Reflect.construct(i,arguments,o)}else r=i.apply(this,arguments);return function(t,e){if(e&&("object"===n(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function h(t){return(h=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}let g=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&f(t,e)}(d,i.Mixin.from(o.PointActor,c.CanPop));var e,r,n,g=p(d);function d(){var t;let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=arguments.length>1?arguments[1]:void 0;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,d);const n=e.jumpForce||14;return(t=g.call(this,e,r)).behaviors.add(new a.SkidDust),t.behaviors.add(new s.Patrol),t.args.type="actor-item actor-b-fish",t.args.animation="standing",t.noClip=!0,t.args.gSpeedMax=5,t.args.jumpForce=n||14,t.args.jumpDelay=t.args.jumpDelay||0,t.args.gravity=.5,t.args.width=24,t.args.height=32,t.willStick=!1,t.stayStuck=!1,t}return e=d,(r=[{key:"update",value:function(){const t=this.def.get("y");this.age<=this.args.jumpDelay?this.args.float=-1:this.args.float=!1,this.age>this.args.jumpDelay&&this.args.y>t&&this.viewport.onNextFrame(()=>this.args.ySpeed=-this.args.jumpForce),u(h(d.prototype),"update",this).call(this)}},{key:"solid",get:function(){return!1}},{key:"isEffect",get:function(){return!1}}])&&l(e.prototype,r),n&&l(e,n),Object.defineProperty(e,"prototype",{writable:!1}),d}();t.BFish=g}),require.register("actor/BackdropController.js",function(t,e,r){"use strict";function n(t){"@babel/helpers - typeof";return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(t,"__esModule",{value:!0}),t.BackdropController=void 0;var i=e("./PointActor");e("../BackdropPalette");function o(t,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,(o=i.key,void 0,"symbol"===n(a=function(t,e){if("object"!==n(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var i=r.call(t,e||"default");if("object"!==n(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(o,"string"))?a:String(a)),i)}var o,a}function a(t,e){return(a=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function s(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,i=c(t);if(e){var o=c(this).constructor;r=Reflect.construct(i,arguments,o)}else r=i.apply(this,arguments);return function(t,e){if(e&&("object"===n(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function c(t){return(c=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}let l=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&a(t,e)}(l,i.PointActor);var e,r,n,c=s(l);function l(t,e){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,l),(r=c.call(this,t,e)).args.hidden=!0,r}return e=l,(r=[{key:"activate",value:function(t,e){}}])&&o(e.prototype,r),n&&o(e,n),Object.defineProperty(e,"prototype",{writable:!1}),l}();t.BackdropController=l}),require.register("actor/BackdropSwapper.js",function(t,e,r){"use strict";function n(t){"@babel/helpers - typeof";return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(t,"__esModule",{value:!0}),t.BackdropSwapper=void 0;var i=e("./PointActor");e("../BackdropPalette");function o(t,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,(o=i.key,void 0,"symbol"===n(a=function(t,e){if("object"!==n(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var i=r.call(t,e||"default");if("object"!==n(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(o,"string"))?a:String(a)),i)}var o,a}function a(t,e){return(a=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function s(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,i=c(t);if(e){var o=c(this).constructor;r=Reflect.construct(i,arguments,o)}else r=i.apply(this,arguments);return function(t,e){if(e&&("object"===n(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function c(t){return(c=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}let l=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&a(t,e)}(l,i.PointActor);var e,r,n,c=s(l);function l(t,e){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,l),(r=c.call(this,t,e)).args.hidden=!0,r}return e=l,(r=[{key:"activate",value:function(t,e){}}])&&o(e.prototype,r),n&&o(e,n),Object.defineProperty(e,"prototype",{writable:!1}),l}();t.BackdropSwapper=l}),require.register("actor/Balkiry.js",function(t,e,r){"use strict";function n(t){"@babel/helpers - typeof";return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(t,"__esModule",{value:!0}),t.Balkiry=void 0;e("./Flickie");var i=e("./Spring"),o=e("curvature/base/Mixin"),a=e("curvature/base/Tag"),s=e("./PointActor"),c=(e("../behavior/SkidDust"),e("../mixin/CanPop"));e("../actor/Explosion"),e("../actor/Projectile");function l(t,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,(o=i.key,void 0,"symbol"===n(a=function(t,e){if("object"!==n(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var i=r.call(t,e||"default");if("object"!==n(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(o,"string"))?a:String(a)),i)}var o,a}function u(){return(u="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=h(t)););return t}(t,e);if(n){var i=Object.getOwnPropertyDescriptor(n,e);return i.get?i.get.call(arguments.length<3?t:r):i.value}}).apply(this,arguments)}function f(t,e){return(f=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function p(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,i=h(t);if(e){var o=h(this).constructor;r=Reflect.construct(i,arguments,o)}else r=i.apply(this,arguments);return function(t,e){if(e&&("object"===n(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function h(t){return(h=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}let g=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&f(t,e)}(d,o.Mixin.from(s.PointActor,c.CanPop));var e,r,n,g=p(d);function d(){var t;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,d);for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];return(t=g.call(this,...r)).args.type="actor-item actor-balkiry",t[i.Spring.WontSpring]=!0,t.args.animation="standing",t.args.accel=.1,t.args.decel=.5,t.args.gSpeedMax=5,t.args.jumpForce=5,t.args.gravity=.5,t.args.width=32,t.args.height=16,t.willStick=!1,t.stayStuck=!1,t.args.float=-1,t.noClip=!0,t}return e=d,(r=[{key:"onRendered",value:function(){u(h(d.prototype),"onRendered",this).call(this),this.flame=new a.Tag('<div class = "balkiry-flame">'),this.sprite.appendChild(this.flame.node),this.box.setAttribute("data-animation","standing")}},{key:"update",value:function(){this.args.facing="left",this.args.xSpeed>-12&&(this.args.xSpeed-=.1),this.args.ySpeed=0,this.args.falling=!0,this.args.flying=!0,u(h(d.prototype),"update",this).call(this)}},{key:"effect",value:function(t){u(h(d.prototype),"effect",this).call(this,t)}},{key:"wakeUp",value:function(){}},{key:"sleep",value:function(){}},{key:"solid",get:function(){return!1}},{key:"isEffect",get:function(){return!1}}])&&l(e.prototype,r),n&&l(e,n),Object.defineProperty(e,"prototype",{writable:!1}),d}();t.Balkiry=g}),require.register("actor/Balloon.js",function(t,e,r){"use strict";function n(t){"@babel/helpers - typeof";return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(t,"__esModule",{value:!0}),t.Balloon=void 0;var i=e("./PointActor");function o(t,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,(o=i.key,void 0,"symbol"===n(a=function(t,e){if("object"!==n(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var i=r.call(t,e||"default");if("object"!==n(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(o,"string"))?a:String(a)),i)}var o,a}function a(t,e){return(a=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function s(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,i=c(t);if(e){var o=c(this).constructor;r=Reflect.construct(i,arguments,o)}else r=i.apply(this,arguments);return function(t,e){if(e&&("object"===n(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function c(t){return(c=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}let l=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&a(t,e)}(l,i.PointActor);var e,r,n,c=s(l);function l(){var t;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,l);for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];return(t=c.call(this,...r)).args.type="actor-item actor-balloon",t.args.width=32,t.args.height=33,t.args.float=-1,t.args.airAngle=-Math.PI,t}return e=l,(r=[{key:"collideA",value:function(t){t.controllable}}])&&o(e.prototype,r),n&&o(e,n),Object.defineProperty(e,"prototype",{writable:!1}),l}();t.Balloon=l}),require.register("actor/Barnacle.js",function(t,e,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Barnacle=void 0;var n=e("curvature/base/Mixin"),i=e("./PointActor"),o=(e("../behavior/Patrol"),e("../mixin/CanPop")),a=e("./BarnacleTrap");function s(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,i,o,a,s=[],c=!0,l=!1;try{if(o=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=o.call(r)).done)&&(s.push(n.value),s.length!==e);c=!0);}catch(t){l=!0,i=t}finally{try{if(!c&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(l)throw i}}return s}}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return c(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return c(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function c(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function l(t){"@babel/helpers - typeof";return(l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function u(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(i=n.key,void 0,"symbol"===l(o=function(t,e){if("object"!==l(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==l(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(i,"string"))?o:String(o)),n)}var i,o}function f(){return(f="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=g(t)););return t}(t,e);if(n){var i=Object.getOwnPropertyDescriptor(n,e);return i.get?i.get.call(arguments.length<3?t:r):i.value}}).apply(this,arguments)}function p(t,e){return(p=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function h(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=g(t);if(e){var i=g(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===l(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function g(t){return(g=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}let d=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&p(t,e)}(y,n.Mixin.from(i.PointActor,o.CanPop));var e,r,c,d=h(y);function y(){var t,e,r,n,i;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,y);for(var o=arguments.length,a=new Array(o),s=0;s<o;s++)a[s]=arguments[s];return(i=d.call(this,...a)).args.type="actor-item actor-barnacle",i.args.animation="standing",i.args.accel=.1,i.args.decel=.5,i.args.gSpeedMax=5,i.args.gravity=.75,i.args.width=34,i.args.height=32,i.args.float=-1,i.willStick=!1,i.stayStuck=!1,i.args.patrolPause=null!==(t=i.args.patrolPause)&&void 0!==t?t:10,i.args.patrolBeat=null!==(e=i.args.patrolBeat)&&void 0!==e?e:200,i.args.patrolSpeed=null!==(r=i.args.patrolSpeed)&&void 0!==r?r:1,i.args.showOff=null!==(n=i.args.showOff)&&void 0!==n&&n,i.args.state="waiting",i.args.showOff&&(i.args.state="intro"),i.args.bindTo("state",()=>i.args.stateAge=0),i}return e=y,(r=[{key:"update",value:function(){f(g(y.prototype),"update",this).call(this),this.trap||(this.mountPoint=new i.PointActor,this.trap=new a.BarnacleTrap,this.trap.owner=this,this.mountPoint.args.x=this.trap.args.x=this.args.x,this.mountPoint.args.y=this.trap.args.y=this.args.y,this.mountPoint.args.y-=24,this.mountPoint.noClip=!0,this.mountPoint.args.float=-1,this.mountPoint.args.hidden=!0,this.trap.others.tiedTo=this.mountPoint,this.args.showOff||(this.trap.args.y+=this.findRopeLength(),this.trap.args.ropeLength=this.findRopeLength(),this.trap.args.xSpeed+=2*Math.sign(Math.random()+-.5)),this.viewport.spawn.add({object:this.trap})),this.trap.stuck.size&&this.trap.args.ySpeed<=0&&(this.trap.args.xSpeed*=.85);const t=this.args.state;l(this["state_"+t])&&this["state_"+t]()}},{key:"pop",value:function(t){this.viewport.actors.remove(this.trap),this.viewport.actors.remove(this.mountPoint),f(g(y.prototype),"pop",this).call(this,t)}},{key:"updateEnd",value:function(){f(g(y.prototype),"updateEnd",this).call(this),this.args.stateAge++}},{key:"state_intro",value:function(){this.trap.args.ropeLength=2,this.args.stateAge>45&&(this.args.state="spitting")}},{key:"state_waiting",value:function(){this.args.animation="idle",this.args.stateAge>40&&this.trap.stuck.size&&(this.args.state="feeding"),this.trap.args.ropeLength<=0&&(this.args.state="spitting")}},{key:"state_carriage",value:function(){this.args.animation="idle",void 0===this.trap.args.ropeLength&&(this.trap.args.ropeLength=0),this.args.stateAge>40&&(this.args.state="feeding")}},{key:"state_feeding",value:function(){if(this.args.animation="feeding",this.args.stateAge>15&&(this.trap.args.ropeLength>48?this.trap.args.ropeLength-=5:this.trap.args.ropeLength-=3,this.trap.args.falling=!0),this.args.stateAge>25&&(this.args.state="carriage"),this.trap.args.ropeLength<=0){this.trap.args.ropeLength=0,this.trap.args.float=-1,this.args.state="spitting",this.trap.args.xSpeed=0,this.trap.args.ySpeed=0;for(const t of this.trap.stuck){const e=s(t,1)[0];"function"==typeof e.pop&&this.viewport.onFrameOut(10,()=>{this.trap.stuck.delete(e),this.trap.ignores.set(e,60),e.pop()})}}}},{key:"state_spitting",value:function(){if(60===this.args.stateAge&&(this.trap.args.xSpeed+=2*Math.sign(Math.random()+-.5)),this.args.stateAge>40){const t=this.findRopeLength();this.trap.args.ropeLength=t+-0,this.args.animation="spit",this.trap.args.float=0,this.trap.args.ySpeed=Math.max(2,this.trap.args.ySpeed)}this.args.stateAge>70&&(this.args.state="waiting")}},{key:"findRopeLength",value:function(){if(!this.viewport)return 0;const t=this.viewport.tileMap.castRay(this.args.x,this.args.y,Math.PI/2,2048);return Math.hypot(this.args.x-t[0],this.args.y-t[1])||128}},{key:"solid",get:function(){return!1}},{key:"isEffect",get:function(){return!1}}])&&u(e.prototype,r),c&&u(e,c),Object.defineProperty(e,"prototype",{writable:!1}),y}();t.Barnacle=d}),require.register("actor/BarnacleTrap.js",function(t,e,r){"use strict";function n(t){"@babel/helpers - typeof";return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(t,"__esModule",{value:!0}),t.BarnacleTrap=void 0;var i=e("./PointActor"),o=e("curvature/base/Mixin"),a=e("../mixin/Constrainable");function s(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,i,o,a,s=[],c=!0,l=!1;try{if(o=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=o.call(r)).done)&&(s.push(n.value),s.length!==e);c=!0);}catch(t){l=!0,i=t}finally{try{if(!c&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(l)throw i}}return s}}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return c(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return c(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function c(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function l(t,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,(o=i.key,void 0,"symbol"===n(a=function(t,e){if("object"!==n(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var i=r.call(t,e||"default");if("object"!==n(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(o,"string"))?a:String(a)),i)}var o,a}function u(){return(u="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=h(t)););return t}(t,e);if(n){var i=Object.getOwnPropertyDescriptor(n,e);return i.get?i.get.call(arguments.length<3?t:r):i.value}}).apply(this,arguments)}function f(t,e){return(f=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function p(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,i=h(t);if(e){var o=h(this).constructor;r=Reflect.construct(i,arguments,o)}else r=i.apply(this,arguments);return function(t,e){if(e&&("object"===n(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function h(t){return(h=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}let g=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&f(t,e)}(g,o.Mixin.from(i.PointActor,a.Constrainable));var e,r,n,c=p(g);function g(){var t;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,g);for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];return(t=c.call(this,...r)).args.type="actor-item actor-barnacle-trap",t.args.width=8,t.args.height=8,t.args.ropeLength=0,t.stuck=new Map,t.noClip=!0,t.onRemove(()=>{for(const r of t.stuck){var e=s(r,2);const t=e[0];e[1];t.args.float=0,t.args.stuck=!1}}),t}return e=g,(r=[{key:"update",value:function(){this.others.tiedTo||u(h(g.prototype),"update",this).call(this)}},{key:"updateEnd",value:function(){if(u(h(g.prototype),"update",this).call(this),!this.viewport)return;for(const e of this.stuck){var t=s(e,2);t[0];const r=t[1];this.viewport.args.frameId%25==0&&(r.wiggles=Math.min(8,1+r.wiggles))}this.others.tiedTo&&this.setPos();for(const t of this.stuck){var e=s(t,2);const r=e[0],n=e[1];r.args.xSpeed=r.xAxis,r.args.ySpeed=0,r.args.mercy||r.args.dead||n.wiggles<=0?(this.stuck.delete(r),this.ignores.set(r,15),r.args.stuck=!1,r.args.dead||(r.args.float=0)):(this.args.xSpeed+=.1*r.xAxis,Math.abs(this.args.xSpeed)>3&&(this.args.xSpeed=3*Math.sign(this.args.xSpeed)),r.args.x=this.args.x,r.args.y=this.args.y+r.args.height+-this.args.height,r.args.float=-1,r.args.falling=!0,r.dashed=!1,r.args.stuck=!0,r.args.jumping=!1,r.args.spinning=!1,r.args.cameraBias=.2,r.controllable&&(r.args.animation="walking")),r.xAxis&&(Math.sign(n.xAxisLast)!==Math.sign(r.xAxis)&&n.wiggles--,n.xAxisLast=r.xAxis)}Math.abs(this.args.xSpeed)<2&&this.args.ySpeed>0&&this.args.ySpeed<2&&this.args.rope>32&&(this.args.xSpeed=2*Math.sign(this.args.xSpeed)),u(h(g.prototype),"updateEnd",this).call(this)}},{key:"collideA",value:function(t){t!==this.owner&&(t.controllable||"function"==typeof t.pop)&&(t.args.mercy||t.args.dead||this.stuck.size||this.stuck.has(t)||(this.stuck.set(t,{xAxisLast:0,wiggles:8,yDiff:t.args.y-this.args.y}),this.args.falling=!0,this.args.xSpeed=t.args.xSpeed||t.args.gSpeed,this.args.x=t.args.x))}},{key:"solid",get:function(){return!1}}])&&l(e.prototype,r),n&&l(e,n),Object.defineProperty(e,"prototype",{writable:!1}),g}();t.BarnacleTrap=g}),require.register("actor/Beelzebub.js",function(t,e,r){"use strict";function n(t){"@babel/helpers - typeof";return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(t,"__esModule",{value:!0}),t.Beelzebub=void 0;var i=e("curvature/base/Tag"),o=e("./PointActor"),a=e("../behavior/Platformer"),s=e("curvature/base/Mixin"),c=(e("../mixin/CanPop"),e("./CutScene"),e("./EggCapsule")),l=e("../audio/Sfx"),u=e("../lib/Analytic");function f(t,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,(o=i.key,void 0,"symbol"===n(a=function(t,e){if("object"!==n(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var i=r.call(t,e||"default");if("object"!==n(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(o,"string"))?a:String(a)),i)}var o,a}function p(){return(p="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=d(t)););return t}(t,e);if(n){var i=Object.getOwnPropertyDescriptor(n,e);return i.get?i.get.call(arguments.length<3?t:r):i.value}}).apply(this,arguments)}function h(t,e){return(h=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function g(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,i=d(t);if(e){var o=d(this).constructor;r=Reflect.construct(i,arguments,o)}else r=i.apply(this,arguments);return function(t,e){if(e&&("object"===n(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function d(t){return(d=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}let y=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&h(t,e)}(b,s.Mixin.from(o.PointActor));var e,r,n,y=g(b);function b(t,e){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,b),(r=y.call(this,t,e)).args.type="actor-item actor-beelzebub",r.args.width=64,r.args.height=32,r.args.float=-1,r.args.damagers=new Map,r.args.phase="idle",r.args.hitPoints=8,r.args.noseAngle=Math.PI/2*3,r.args.drillPush=0,r.args.phaseFrameId=0,r.args.frameId=0,r.args.direction=-1,r.args.facing="left",r.args.bindTo("phase",t=>r.args.phaseFrameId=0),r}return e=b,(r=[{key:"onRendered",value:function(t){p(d(b.prototype),"onRendered",this).call(this,t),this.autoStyle.get(this.box)["--nose-angle"]="noseAngle",this.autoStyle.get(this.box)["--drill-push"]="drillPush",this.autoAttr.get(this.box)["data-phase"]="phase",this.drill=new i.Tag('<div class = "drill">'),this.body=new i.Tag('<div class = "body">'),this.nose=new i.Tag('<div class = "nose">'),this.eyeBack=new i.Tag('<div class = "eye-back">'),this.eyeFore=new i.Tag('<div class = "eye-fore">'),this.body.appendChild(this.eyeBack.node),this.body.appendChild(this.eyeFore.node),this.body.appendChild(this.nose.node),this.sprite.appendChild(this.body.node),this.nose.appendChild(this.drill.node),this.attractor=null}},{key:"update",value:function(){if(this.args.phaseFrameId++,this.args.frameId++,!this.viewport)return;const t=this.viewport;t.auras.add(this);const e=this.viewport.controlActor;if(!e||e.args.respawning)return;this.attractor||(this.attractor={},this.attractor.x=this.x,this.attractor.y=this.y);const r=Math.abs(this.x-this.attractor.x),n=Math.abs(this.y-this.attractor.y),o=Math.sign(this.x-this.attractor.x),a=Math.sign(this.y-this.attractor.y);switch(this.args.phase){case"idle":this.args.xSpeed=0,this.args.ySpeed=0;break;case"intro":this.args.phaseFrameId>30&&(this.args.phase="stalking");break;case"alert":this.args.phaseFrameId>4&&(this.args.drillPush=1,this.args.falling=!0,this.args.float=-1,this.y>this.args.alertTo?this.args.ySpeed--:(this.args.y=this.args.alertTo,this.args.ySpeed=0)),this.args.phaseFrameId>0&&(this.args.phase="stalking");break;case"damaged":this.args.hitPoints>0?this.args.phaseFrameId>20&&(this.args.phase="stalking"):this.args.phaseFrameId>6&&(this.args.phase="dead");break;case"knocked":this.args.xSpeed=0,this.args.phaseFrameId>30&&(this.args.phase="stalking");break;case"dead":this.args.float=0;break;case"stalking":this.args.xSpeed=-o*Math.max(1,r/25),this.args.ySpeed=-a*Math.max(1,n/25),this.args.ySpeed+=3*Math.sin(this.args.frameId/3),this.pointIsSafe(e.x,e.y-128)&&(this.attractor.x=e.x,this.attractor.y=e.y-128),this.args.noseAngle=Math.PI/2*3,this.args.drillPush=0,this.args.phaseFrameId>10&&(this.args.noseAngle=this.angleTo({x:e.x,y:Math.max(this.y,e.y)})),this.args.phaseFrameId>20&&(this.args.drillPush=.5),this.args.phaseFrameId>25&&(this.args.phase="ready");break;case"buzzing":this.pointIsSafe(e.x,e.y+-e.args.height+-34)&&(this.attractor.x=e.x,this.attractor.y=e.y+-e.args.height+-34),this.args.xSpeed=-o*Math.max(1,r/15),this.args.ySpeed=-a*Math.max(1,n/15),this.args.noseAngle=Math.PI/2*3,this.args.drillPush=1,this.args.phaseFrameId>10&&(this.args.drillPush=.5),this.args.phaseFrameId>20&&(this.args.noseAngle=this.angleTo({x:e.x,y:Math.max(this.y,e.y)})),this.args.phaseFrameId>30&&(this.args.phase="ready");break;case"ready":if(this.args.phaseFrameId<10&&(this.readySide=Math.sign(e.xSpeedLast||e.gSpeedLast)),this.pointIsSafe(e.x+128*this.readySide,e.y+-e.args.height+-128)&&(this.attractor.x=e.x+128*this.readySide,this.attractor.y=e.y+-e.args.height+-128),this.args.xSpeed=-o*Math.max(1,r/15),this.args.ySpeed=-a*Math.max(1,n/15),this.args.ySpeed+=3*Math.sin(this.args.frameId/3),this.args.drillPush=.75,this.args.phaseFrameId>30){const t=Math.random();e.args.falling?this.args.phase=t>.5?"buzzing":"stalking":this.args.phase=t>.5?"swooping":"attacking"}break;case"attacking":{this.args.float=-1,this.args.falling=!0,this.args.phaseFrameId>100&&(this.args.phase="stalking"),this.args.phaseFrameId<50?(this.pointIsSafe(e.x+256*(this.readySide||1),e.y-32)&&(this.attractor.x=e.x+256*(this.readySide||1),this.attractor.y=e.y-32),this.args.noseAngle=0):(this.pointIsSafe(e.x+256*(-this.readySide||-1),e.y-16)&&(this.attractor.x=e.x+256*(-this.readySide||-1),this.attractor.y=e.y-16),this.args.noseAngle=this.angleTo({x:e.x,y:Math.max(this.y,e.y)})),this.args.drillPush=1,this.args.float=-1;const t=e.args.xSpeed||e.args.gSpeed;this.args.xSpeed=-o*Math.max(1,r/10)+1.1*t,this.args.ySpeed=-a*Math.max(1,n/10);break}case"swooping":this.pointIsSafe(e.x,e.y-32)&&(this.attractor.x=e.x,this.attractor.y=e.y-32),this.args.xSpeed+=-o*Math.max(1,r/1e4),this.args.ySpeed+=-a*Math.max(1,n/1e4),this.args.noseAngle=this.angleTo({x:e.x,y:Math.max(this.y,e.y)}),this.args.drillPush=1,this.args.float=-1,this.args.phaseFrameId>180&&(this.args.phase="stalking");e.args.xSpeed||e.args.gSpeed;break;case"exploding":if(90===this.args.phaseFrameId&&(this.args.falling=!0,this.args.ySpeed=-14,this.args.xSpeed=0,this.args.gSpeed=0,this.noClip=!0,this.viewport.auras.delete(this),this.args.phase="exploded",l.Sfx.play("OBJECT_DESTROYED"),t&&t.controlActor)){const e=t.controlActor;t.onFrameOut(60,()=>{const r=new c.EggCapsule({x:e.args.x,y:e.args.y-384,xSpeed:e.args.gSpeed||e.args.xSpeed});t.spawn.add({object:r})})}if(this.args.phaseFrameId>90)return;if(t&&t.args.frameId%3==0){const e=new i.Tag('<div class = "particle-explosion">');l.Sfx.play("BOSS_DAMAGED");const r=this.args.width*Math.random()-this.args.width/2,n=this.args.height*Math.random()-this.args.height/2;e.style({"--x":this.x+r,"--y":this.y+n+-16}),t.particles.add(e),setTimeout(()=>t.particles.remove(e),512)}}"knocked"!==this.args.phase&&this.args.ySpeed<0&&!this.pointIsSafe(this.x,this.y+-this.args.height+this.args.ySpeed+-1)&&(this.args.ySpeed=0),p(d(b.prototype),"update",this).call(this)}},{key:"updateEnd",value:function(){if(p(d(b.prototype),"updateEnd",this).call(this),!this.viewport)return;const t=this.viewport.controlActor;if(!t)return;this.args.hitPoints<=0&&(t.cofocused=null);const e=Math.abs(this.args.x-t.x),r=Math.abs(this.args.y-t.y),n=Math.sign(this.args.x-t.x),i=Math.sign(this.args.y-t.y);switch(this.args.phase){case"attacking":case"swooping":case"stalking":case"knocked":case"damaged":case"ready":e>384&&(this.args.x=t.x+384*n),r>192&&(this.args.y=t.y+192*i),this.args.hitPoints<=0&&(this.viewport.auras.delete(this),this.args.phase="dead",this.noClip=!1,this.args.float=0,"function"==typeof ga&&u.Analytic.report({eventCategory:"boss",eventAction:"defeated",eventLabel:`${this.viewport.args.actName}::${this.args.id}`}))}switch(this.args.xSpeed<0?this.args.facing="left":this.args.xSpeed>0&&(this.args.facing="right"),this.args.groundAngle=0,this.args.phase){case"attacking":case"swooping":case"stalking":case"ready":this.bMap("checkBelow",this.x,this.y).get(a.Platformer)&&(this.args.falling=!0,this.args.ySpeed=-4,this.args.y--)}}},{key:"collideA",value:function(t,e){if("exploded"===this.args.phase||t.args.mercy)return!1;if(!t.controllable&&!t.hazard)return!0;if(-1===e)return;const r=Math.sign(this.x-t.x),n=(Math.sign(this.y-t.y),Math.max(Math.abs(t.args.xSpeed),5));Math.sign(t.args.xSpeed);if(this.args.hitPoints>0&&t.controllable&&!(t.args.jumping||t.args.rolling||t.dashed))return t.damage(),this.args.phase="ready","function"==typeof ga&&u.Analytic.report({eventCategory:"boss",eventAction:"damaged-player",eventLabel:`${this.viewport.args.actName}::${this.args.id}::${t.args.id}`}),!0;if("dead"===this.args.phase){if(!(t.args.jumping||t.args.rolling||t.dashed))return!0;this.args.explodeFrame=this.viewport.args.frameId,this.args.phase="exploding"}if(1!==e&&3!==e||(t.args.falling?this.ignores.set(t,15):(t.args.gSpeed=4*-Math.sign(this.x-t.x),t.args.rolling&&this.onNextFrame(()=>{t.args.gSpeed=-Math.sign(this.x-t.x),t.args.rolling=!0,t.args.direction=Math.sign(t.args.gSpeed)})),this.args.ySpeed=0,this.args.hitPoints>0&&this.damage(t),this.args.hitPoints>0?(t.args.xSpeed=-r*n,this.args.xSpeed=r*n):(t.args.xSpeed=-r*n*.5,this.args.xSpeed=r*n*.5)),2===e&&(this.viewport.args.audio&&l.Sfx.play("BOSS_DUDHIT"),t.args.falling&&(this.args.ySpeed=2.5*t.args.ySpeed,t.args.controllable&&(t.args.ySpeed=Math.max(7,Math.abs(t.args.ySpeed)))),this.args.xSpeed=0,this.args.hitPoints>0&&(this.args.phase="knocked"),this.ignores.set(t,15)),0===e){if(t.args.falling&&this.ignores.set(t,15),t.controllable){t.args.y=this.y-this.args.height;t.args.animation;const e=t.args.ySpeed;this.onNextFrame(()=>{t.args.ySpeed=-Math.floor(Math.abs(e))||-4})}this.args.xSpeed=0,this.damage(t)}return t.args.ignore=1,this.args.hitPoints||(t.args.ignore=-2),!0}},{key:"damage",value:function(t){arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(this.args.hitPoints<=0)return;const e=this.args.damagers.get(t);this.args.frameId-e<5||(this.args.hitPoints--,this.args.damagers.set(t,this.args.frameId),this.args.phase="damaged",l.Sfx.play("BOSS_DAMAGED"))}},{key:"pointIsSafe",value:function(t,e){return!this.viewport.actorsAtPoint(t,e).filter(t=>t.hazard).length}},{key:"solid",get:function(){return!1}},{key:"rotateLock",get:function(){return!0}}])&&f(e.prototype,r),n&&f(e,n),Object.defineProperty(e,"prototype",{writable:!1}),b}();t.Beelzebub=y}),require.register("actor/Bell.js",function(t,e,r){"use strict";function n(t){"@babel/helpers - typeof";return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(t,"__esModule",{value:!0}),t.Bell=void 0;var i=e("curvature/base/Mixin"),o=e("./PointActor"),a=e("../mixin/Constrainable"),s=e("./Ring");function c(t,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,(o=i.key,void 0,"symbol"===n(a=function(t,e){if("object"!==n(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var i=r.call(t,e||"default");if("object"!==n(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(o,"string"))?a:String(a)),i)}var o,a}function l(){return(l="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=p(t)););return t}(t,e);if(n){var i=Object.getOwnPropertyDescriptor(n,e);return i.get?i.get.call(arguments.length<3?t:r):i.value}}).apply(this,arguments)}function u(t,e){return(u=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function f(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,i=p(t);if(e){var o=p(this).constructor;r=Reflect.construct(i,arguments,o)}else r=i.apply(this,arguments);return function(t,e){if(e&&("object"===n(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function p(t){return(p=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}let h=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&u(t,e)}(g,i.Mixin.from(o.PointActor,a.Constrainable));var e,r,n,h=f(g);function g(){var t;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,g);for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];return(t=h.call(this,...r)).args.z=100,t.args.width=64,t.args.height=64,t.args.type="actor-item actor-bell",t.cooldown=0,t.noClip=!0,t.args.gravity=.4,t}return e=g,(r=[{key:"update",value:function(){this.xLast=this.x,this.yLast=this.y,l(p(g.prototype),"update",this).call(this),this.cooldown>0&&this.cooldown--,this.cooldown<1&&(this.cooldown=0);this.args.tiedTo;this.setPos(),this.args.falling=!0;const t=this.x-this.xLast;if(Math.abs(t)>1?this.args.animation=["ring-left","","ring-right"][1+Math.sign(this.x-this.xLast)]:this.args.animation="",!this.cooldown&&(Math.abs(this.args.xSpeed)>2||Math.abs(this.args.ySpeed)>6)){const t=new s.Ring({x:this.x,y:this.y});t.dropped=!0,t.delay=5,t.args.static=!1,t.args.ignore=10,t.args.xSpeed=.75*this.args.xSpeed,t.args.ySpeed=this.args.ySpeed;const e=this.rotatePoint(0,32);t.args.x+=e[0],t.args.y+=e[1],this.viewport.spawn.add({object:t}),this.cooldown=45*Math.random()+15,this.viewport.onFrameOut(120,()=>{this.viewport.actors.remove(t)})}}},{key:"updateEnd",value:function(){Math.abs(this.args.xSpeed)<3&&Math.abs(this.args.ySpeed)<3?this.viewport&&!this.viewport.auras.has(this)&&this.viewport.auras.add(this):this.viewport.auras.delete(this),l(p(g.prototype),"updateEnd",this).call(this)}},{key:"collideB",value:function(t){t.controllable&&(this.args.xSpeed=t.args.xSpeed,this.args.ySpeed=t.args.ySpeed,t.args.xSpeed*=.99,this.viewport.args.backdrop.args.sunrise=1)}}])&&c(e.prototype,r),n&&c(e,n),Object.defineProperty(e,"prototype",{writable:!1}),g}();t.Bell=h}),require.register("actor/Big.js",function(t,e,r){"use strict";function n(t){"@babel/helpers - typeof";return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(t,"__esModule",{value:!0}),t.Big=void 0;var i=e("./PointActor");function o(t,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,(o=i.key,void 0,"symbol"===n(a=function(t,e){if("object"!==n(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var i=r.call(t,e||"default");if("object"!==n(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(o,"string"))?a:String(a)),i)}var o,a}function a(t,e){return(a=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function s(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,i=c(t);if(e){var o=c(this).constructor;r=Reflect.construct(i,arguments,o)}else r=i.apply(this,arguments);return function(t,e){if(e&&("object"===n(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function c(t){return(c=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}let l=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&a(t,e)}(l,i.PointActor);var e,r,n,c=s(l);function l(){var t;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,l);for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];return(t=c.call(this,...r)).args.type="actor-item actor-big",t.args.width=42,t.args.height=46,t}return e=l,(r=[{key:"solid",get:function(){return!1}}])&&o(e.prototype,r),n&&o(e,n),Object.defineProperty(e,"prototype",{writable:!1}),l}();t.Big=l}),require.register("actor/Blastoid.js",function(t,e,r){"use strict";function n(t){"@babel/helpers - typeof";return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(t,"__esModule",{value:!0}),t.Blastoid=void 0;e("./Flickie");var i=e("curvature/base/Mixin"),o=e("./PointActor"),a=(e("../behavior/Patrol"),e("../mixin/CanPop")),s=e("../actor/Projectile");function c(t,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,(o=i.key,void 0,"symbol"===n(a=function(t,e){if("object"!==n(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var i=r.call(t,e||"default");if("object"!==n(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(o,"string"))?a:String(a)),i)}var o,a}function l(){return(l="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=p(t)););return t}(t,e);if(n){var i=Object.getOwnPropertyDescriptor(n,e);return i.get?i.get.call(arguments.length<3?t:r):i.value}}).apply(this,arguments)}function u(t,e){return(u=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function f(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,i=p(t);if(e){var o=p(this).constructor;r=Reflect.construct(i,arguments,o)}else r=i.apply(this,arguments);return function(t,e){if(e&&("object"===n(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function p(t){return(p=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}let h=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&u(t,e)}(g,i.Mixin.from(o.PointActor,a.CanPop));var e,r,n,h=f(g);function g(){var t,e,r;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,g);for(var n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return(r=h.call(this,...i)).args.type="actor-item actor-blastoid",r.args.animation="standing",r.args.width=35,r.args.height=21,r.args.flipped=!1,r.args.careening=!1,r.args.color=null!==(t=r.args.color)&&void 0!==t?t:"blue",r.willStick=!0,r.stayStuck=!0,r.args.patrolBeat=null!==(e=r.args.patrolBeat)&&void 0!==e?e:120,r}return e=g,(r=[{key:"onRendered",value:function(t){l(p(g.prototype),"onRendered",this).call(this,t),this.autoAttr.get(this.box)["data-color"]="color",this.autoAttr.get(this.box)["data-flipped"]="flipped"}},{key:"update",value:function(){if(this.args.flipped){l(p(g.prototype),"update",this).call(this);const t=this.args.x-this.xLast,e=this.args.y-this.yLast;return!this.args.careening||t||e||this.args.falling?void 0:void l(p(g.prototype),"pop",this).call(this)}this.args.shotTelegraph;const t=this.args.patrolBeat;if(this.viewport.args.frameId%t==0){const t=2.5,e=-3,r=this,n=new s.Projectile({x:this.x+13*this.args.direction,y:this.y+-8,xSpeed:t*this.args.direction,ySpeed:e,owner:r});this.viewport.spawn.add({object:n})}l(p(g.prototype),"update",this).call(this)}},{key:"effect",value:function(t){l(p(g.prototype),"effect",this).call(this,t)}},{key:"solid",get:function(){return!1}},{key:"isEffect",get:function(){return!1}}])&&c(e.prototype,r),n&&c(e,n),Object.defineProperty(e,"prototype",{writable:!1}),g}();t.Blastoid=h}),require.register("actor/Block.js",function(t,e,r){"use strict";function n(t){"@babel/helpers - typeof";return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(t,"__esModule",{value:!0}),t.Block=void 0;var i=e("./PointActor"),o=e("curvature/base/Tag"),a=e("./Ring"),s=e("./LayerSwitch"),c=e("./GrapplePoint"),l=(e("curvature/animate/ease/QuintInOut"),e("curvature/animate/ease/CubicInOut"),e("../behavior/Platformer"));function u(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,i,o,a,s=[],c=!0,l=!1;try{if(o=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=o.call(r)).done)&&(s.push(n.value),s.length!==e);c=!0);}catch(t){l=!0,i=t}finally{try{if(!c&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(l)throw i}}return s}}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return f(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return f(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function f(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function p(t,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,(o=i.key,void 0,"symbol"===n(a=function(t,e){if("object"!==n(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var i=r.call(t,e||"default");if("object"!==n(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(o,"string"))?a:String(a)),i)}var o,a}function h(t,e){return(h=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function g(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,i=y(t);if(e){var o=y(this).constructor;r=Reflect.construct(i,arguments,o)}else r=i.apply(this,arguments);return function(t,e){if(e&&("object"===n(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function d(){return(d="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=y(t)););return t}(t,e);if(n){var i=Object.getOwnPropertyDescriptor(n,e);return i.get?i.get.call(arguments.length<3?t:r):i.value}}).apply(this,arguments)}function y(t){return(y=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}let b=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&h(t,e)}(b,i.PointActor);var e,r,n,f=g(b);function b(){var t,e,r,n,i,o;let a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},s=arguments.length>1?arguments[1]:void 0;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,b),(o=f.call(this,a,s)).hitBlocks=!1,o.args.yForce=0,o.args.yLean=0,o.args.z=null!==(t=o.args.z)&&void 0!==t?t:100,o.args.type="actor-item actor-block",o.args.width=a.width||32,o.args.height=a.height||32,o.args.convey=null!==(e=a.convey)&&void 0!==e?e:0,o.args.conveyed=0,o.args.ySpeedMax=32,o.originalX=o.args.x,o.originalY=o.args.y,o.args.solid=null===(r=o.args.solid)||void 0===r||r,o.args.gravity=.4,o.args.collapse=null!==(n=a.collapse)&&void 0!==n&&n,o.args.drop=null!==(i=a.drop)&&void 0!==i&&i,o.args.active=-1,o.weighted=!1,o.activatedAt=null,o.originalModes=new Map,o.watching=new Set,o.args.master&&(o.childBlocks=new Set),o}return e=b,n=[{key:"fromDef",value:function(t){const e=d(y(b),"fromDef",this).call(this,t);return e.args.width=t.width,e.args.height=t.height,e.args.y=e.originalY=t.y,e}}],(r=[{key:"onRendered",value:function(t){if(d(y(b.prototype),"onRendered",this).call(this,t),this.viewport){if(this.args.match&&(this.match=this.viewport.actorsById[this.args.match]),this.args.spriteSheet=this.args.spriteSheet||"/Sonic/marble-zone-block.png",this.args.droop&&this.droop(0),this.args.collapse&&this.tags.sprite.classList.add("collapse"),this.args.platform&&this.tags.sprite.classList.add("platform"),this.args.drop&&this.tags.sprite.classList.add("drop"),this.args.hidden)return t&&t.preventDefault(),!1;this.setTile()}}},{key:"initialize",value:function(){(this.otherDefs.path||this.otherDefs.ridePath)&&this.pathReset()}},{key:"pathReset",value:function(){if(this.args.master){const t=this.otherDefs.path||this.otherDefs.ridePath;if(t){this.pathNext=t,this.args.x=t.x,this.args.y=t.y,this.viewport.setColCell(this);for(const t of this.childBlocks){const e=t.otherDefs.path||t.otherDefs.ridePath;t.pathNext=e,t.args.x=e.x,t.args.y=e.y,this.viewport.setColCell(t)}}}else this.others.childOf&&this.others.childOf.pathReset()}},{key:"wakeUp",value:function(){if(this.sleeping=!1,this.otherDefs.path&&this.others.childOf&&this.others.childOf.childBlocks.add(this),this.pathReset(),this.setTile(),this.noClip=!1,!this.args.tiedTo)return;this.args._tiedTo||(this.args._tiedTo=this.viewport.actorsById[this.args.tiedTo]);const t=this.args._tiedTo;if(t&&!t.hanging.has(this.constructor)){t.hanging.set(this.constructor,new Set);const e=t.hanging.get(this.constructor);e.add(this),this.chain=new o.Tag('<div class = "chain">'),this.sprite.appendChild(this.chain.node),this.onRemove(()=>e.delete(this))}}},{key:"collideA",value:function(t,e){if(t instanceof s.LayerSwitch)return;if(t instanceof c.GrapplePoint&&this.args.platform)return;if(t instanceof this.constructor&&!t.args.falling&&!t.hitBlocks)return!1;if(t.isRegion||t.noClip||t.args.static)return!1;if(t.args.standingOn===this&&(this.weighted=!0),this.objDef&&this.args.platform&&"hex-nut"===this.objDef.type&&t.objDef&&"hex-nut"===t.objDef.type)return!1;let r=.5+(t.x-this.x)/this.args.width;if(t.args.gSpeed<0&&(r=1-r),t.args.mode&&(r=1-r),this.args.hSwap&&t.groundTime>2&&Math.abs(t.args.gSpeed)>8&&r<.2&&(this.watching.add(t),this.originalModes.has(t)||this.originalModes.set(t,{mode:t.args.mode,rolling:t.args.rolling,gSpeed:t.args.gSpeed}),this.originalModes.has(t)&&(t.args.gSpeed=this.originalModes.get(t).gSpeed)),(!t.args.falling&&!t.args.climbing||t.args.climbing&&t.y<this.y-this.args.height)&&this.args.droop&&t.args.ySpeed>=0&&t.args.standingOn!==this)return!0;if(!t.args.climbing&&this.args.droop&&t.controllable&&(0===e||2===e)&&t.args.ySpeed>=0){const e=this.originalY+-this.args.height,r=Math.floor(this.args.width/2),n=t.args.gSpeed;if(Math.abs(n)>r)return this.args.y=this.originalY,t.args.y=Math.trunc(e+-1),this.args.yForce=0,this.args.yLean=0,!0;const i=(this.x+-t.x+-2*n)/r,o=.9*Number(this.args.droop);if(Math.abs(i)>=.9)return this.args.yForce=0,this.args.yLean=this.args.yLean/100,!0;const a=Math.round(o*(1-Math.abs(i))/2);this.args.yForce+=Math.max(t.ySpeedLast,0),this.args.yForce=Math.min(a,this.args.yForce),this.args.yForce=Math.max(this.args.yForce,-a),this.droopPos=this.x-t.x}if(this.args.platform&&!t.args.dead&&!(t instanceof a.Ring)){t.args.y,t.args.height;const e=this.args.y-this.args.height;this.args.width;return t.args.falling&&Math.abs(t.args.y-e)<4&&t.args.ySpeed>=0&&!t.args.float&&(!t.args.dashed||t.args.ySpeed>t.args.xSpeed)&&(t.controllable||t.args.npc?t.args.y=-1+e:t.args.y=e),t.args.y<=e&&(!1===t.args.falling||t.args.ySpeed>0)?!0:!1===t.args.falling&&2===t.args.mode||(t.args.npc&&!t.args.falling&&this.args.falling&&!this.args.float&&(t.startle(),t.noClip=!0),!1)}if(!t.controllable&&!t.isVehicle)return!0;if(!this.switch&&this.args.drop&&(0===e||2===e)&&this.args.float<=0&&(this.args.float=1,this.args.goBack=!1),!this.switch&&this.args.collapse&&(0===e||2===e)&&this.args.float<=0){if(t.args.ySpeed>15){this.args.float=1,this.args.goBack=!1;const e=t.args.ySpeed;this.onNextFrame(()=>{this.args.falling||this.args.float?(this.args.ySpeed=e,this.args.float=1):(this.args.ySpeed=-1,this.args.float=1),this.args.falling=!0})}else(t.args.ySpeed>0||t.args.gSpeed)&&(this.args.float=this.args.float>=0?this.args.float:this.args.delay||0);this.viewport.onFrameOut(1,()=>this.args.falling=!0)}return!0}},{key:"activate",value:function(){this.args.active=!0}},{key:"deactivate",value:function(){this.args.active=!1}},{key:"update",value:function(){if(!this.others.childOf){if(this.args.master)for(const t of this.childBlocks)t._update();return this._update()}}},{key:"_update",value:function(){if(!this.viewport)return;const t=this.viewport.args.frameId-this.viewport.args.startFrameId;if(this.args.active>0&&(this.activatedAt||(this.activatedAt=t)),this.args.switch&&!this.switch&&(this.switch=this.viewport.actorsById[this.args.switch]),this.args.static)return void d(y(b.prototype),"update",this).call(this);if(this.args.collapse&&(this.args.gSpeed=0,(!this.switch&&this.activatedAt&&t-this.activatedAt>25||this.switch&&this.switch.args.active)&&(this.args.float=this.args.float>=0?this.args.float:this.args.delay||0,this.args.float||(this.args.ySpeed=this.args.ySpeed||12))),this.args.drop&&(this.args.gSpeed=0,(!this.switch&&this.activatedAt&&t-this.activatedAt>25||this.switch&&this.switch.args.active)&&(this.args.float=this.args.float>=0?this.args.float:this.args.delay||0,this.noClip=!0,this.args.active=!1,this.args.falling=!0)),this.match&&(this.args.convey=-this.match.args.convey),this.xLast=this.args.x,this.yLast=this.args.y,this.otherDefs.path){let t=this.pathNext||this.otherDefs.path;if(t){var e;for(const e of t.properties)"next"===e.name&&(t=this.viewport.objDefs.get(e.value));const r=null!==(e=this.args.pathSpeed)&&void 0!==e?e:8,n=this.args.x-t.x,i=this.args.y-t.y,o=Math.atan2(i,n);Math.abs(n)<r&&Math.abs(i)<r&&(this.pathNext=t),Math.abs(n)<r?this.args.x=t.x:this.args.x-=r*Math.cos(o),Math.abs(i)<r?this.args.y=t.y:this.args.y-=r*Math.sin(o)}}if(this.args.float&&this.args.oscillateX&&this.args.oscillateY){var r;const e=t+(null!==(r=this.args.offset)&&void 0!==r?r:0)*Math.PI;{const t=Math.sin(e/this.args.timeX)*this.args.oscillateX;this.args.x=this.originalX-t}{const t=-Math.cos(e/this.args.timeY)*this.args.oscillateY;this.args.y=this.originalY-t}}else if(this.args.float&&(this.args.oscillateX||this.args.oscillateY)){const e=Math.pow(Math.cos(Math.pow(Math.sin(t/90),5)),16.665);if(this.args.oscillateX){const t=Math.round(e*this.args.oscillateX);this.args.x=this.originalX-t}if(this.args.oscillateY){const t=Math.round(e*this.args.oscillateY);this.args.y=this.originalY-t}}if(!this.switch&&this.args.collapse);else if(this.args.droop){if(this.snapBack=this.snapBack||!1,!this.args.colliding&&this.args.yForce&&this.viewport&&this.viewport.onFrameOut(4,()=>{if(!this.viewport)return;const t=this.viewport.collisions.has(this),e=t?[...this.viewport.collisions.get(this).keys()]:[];t&&e.filter(t=>t.controllable).length||(this.snapBack=!0)}),!this.args.colliding&&this.args.yForce&&this.snapBack&&(this.args.yForce*=.15),Math.abs(this.args.yForce)<=1&&(this.snapBack=!1),this.args.yForce!==this.args.yLean){const t=this.args.yLean-this.args.yForce,e=this.args.yForce>this.args.yLean?.666*Math.abs(t):.333*Math.abs(t);this.args.yLean-=Math.sign(t)*e,Math.abs(t)<e&&(this.args.yLean=this.args.yForce)}this.args.yLean?(this.args.y=Math.ceil(this.originalY+this.args.yLean)||this.originalY,this.droop(-1*this.args.yLean,this.droopPos||0)):this.args.y=this.originalY}this.box&&this.box.style({"--convey":Math.abs(this.args.convey)}),this.box&&this.box.style({"--conveyDir":Math.sign(this.args.conveyed)}),this.args.conveyed+=this.args.convey,this.box&&this.box.style({"--conveyed":.8*this.args.conveyed}),this.box&&this.box.setAttribute("data-design",this.args.design);const n=this.args._tiedTo;if(n&&this.chain){const t={x:this.args.x,y:this.args.y-this.args.height};this.chain.style({"--distance":n.distanceFrom(t)+this.args.height,"--angle":n.angleTo(t)+Math.PI/2})}d(y(b.prototype),"update",this).call(this)}},{key:"updateStart",value:function(){this.args.float&&this.args.settle&&(this.weighted&&this.args.y<this.def.get("y")+this.args.settle&&(this.args.y+=Math.min(Math.abs(this.args.settle),64)/8*Math.sign(this.args.settle)),!this.weighted&&this.y>this.def.get("y")&&(this.args.y-=Math.min(Math.abs(this.args.settle),32)/8*Math.sign(this.args.settle))),this.weighted=!1;for(const t of this.watching){const e=this.originalModes.get(t),r=e.mode,n=e.rolling,i=e.gSpeed;let o=.5+(t.x-this.x)/this.args.width;Math.sign(i)<0&&(o=1-o),r&&(o=1-o);const a=t.args.x-t.xLast;if(o>=1&&(this.originalModes.delete(t),this.watching.delete(t),t.noClip=!1),o>=.75)t.args.xSpeed=a,t.args.float=0,t.args.falling=!1,t.args.rolling=n,t.args.ignore=9,0===r&&(t.args.gSpeed=-i,t.args.y=this.args.y+1,t.args.mode=2,t.args.facing=Math.sign(i)<0?"right":"left"),2===r&&(t.args.gSpeed=-i,t.args.y=this.args.y+-this.args.height,t.args.mode=0,t.args.facing=Math.sign(i)<0?"right":"left");else{const e=a;t.args.gSpeed=r?-e:e,t.args.xSpeed=e,t.args.float=-1,t.noClip=!0,t.args.antiSkid=35,t.args.direction=-Math.sign(i);const s=Math.min(Math.max(1.333*o,0),1);n?t.args.rolling=!0:(t.args.corkscrew=Math.min(.5*s,.375),t.args.animation="barrel-roll"),0===r&&(t.args.y=this.y+-this.args.height+this.args.height*s*2),2===r&&(t.args.y=this.y+-this.args.height*s*2)}}}},{key:"updateEnd",value:function(){if(d(y(b.prototype),"updateEnd",this).call(this),!this.viewport||!this.viewport.collisions.has(this))return;const t=this.viewport.collisions.get(this);if(this.args.treadmill){this.args.convey=0;let r=0,n=0;for(const i of t){var e=u(i,2);const t=e[0];e[1];t.args.standingOn===this&&(t.args.gSpeed&&(r++,n+=t.args.gSpeed))}r&&(this.args.convey=-n/r)}if(this.args.convey)for(const e of t){var r=u(e,2);const t=r[0];r[1];if(!t.controllable||t.args.falling)continue;const n=t.bMap("findNextStep",this.args.convey).get(l.Platformer);n[3]||(n[2]&&(t.args.xSpeed=this.args.convey,t.args.ySpeed=0,t.args.falling=!0,t.args.y=-1+this.y-this.args.height),t.args.x+=n[0],t.args.y+=n[1])}if(!this.args.platform)return;const n=Math.min(this.args.ySpeed,this.args.y-this.yLast,0);if(n<0)for(let t=.5*-this.args.width+4;t<.5*this.args.width;t+=4){const e=this.args.x+t,r=this.viewport.actorsAtLine(e,this.args.y+-this.args.height,e,this.args.y+-n+-this.args.height);for(const t of r){var i=u(t,2);const e=i[0];i[1];!e.controllable||!e.args.falling||e.args.y<this.args.y||(e.args.y=this.args.y+n+-this.args.height,e.args.ySpeed=this.args.ySpeed,e.args.falling=!1)}}}},{key:"sleep",value:function(){this.sleeping=!0,this.args.drop&&this.args.once&&!this.args.float&&this.viewport.actors.remove(this),this.args.drop&&this.args.float>=0&&(this.args.ySpeed=0,this.args.float=-1,this.args.active=!1,this.args.falling=!1,this.viewport.onFrameOut(120,()=>{this.args.y=this.originalY,this.activatedAt=null,this.args.goBack=!1,this.noClip=!1,this.args.ySpeed=0,this.args.float=-1,this.args.active=!1,this.args.falling=!1,this.viewport.setColCell(this)}))}},{key:"rotateLock",get:function(){return!0}},{key:"canStick",get:function(){return!this.args.platform}},{key:"solid",get:function(){return this.args.solid&&(!this.args.collapse||0!==this.args.float||!this.args.goBack)}}])&&p(e.prototype,r),n&&p(e,n),Object.defineProperty(e,"prototype",{writable:!1}),b}();t.Block=b}),require.register("actor/Block3d.js",function(t,e,r){"use strict";function n(t){"@babel/helpers - typeof";return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(t,"__esModule",{value:!0}),t.Block3d=void 0;var i=e("./Block"),o=e("curvature/base/Tag");function a(t,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,(o=i.key,void 0,"symbol"===n(a=function(t,e){if("object"!==n(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var i=r.call(t,e||"default");if("object"!==n(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(o,"string"))?a:String(a)),i)}var o,a}function s(){return(s="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=u(t)););return t}(t,e);if(n){var i=Object.getOwnPropertyDescriptor(n,e);return i.get?i.get.call(arguments.length<3?t:r):i.value}}).apply(this,arguments)}function c(t,e){return(c=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function l(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,i=u(t);if(e){var o=u(this).constructor;r=Reflect.construct(i,arguments,o)}else r=i.apply(this,arguments);return function(t,e){if(e&&("object"===n(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function u(t){return(u=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}let f=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&c(t,e)}(p,i.Block);var e,r,n,f=l(p);function p(){var t;let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,p),(t=f.call(this,e)).args.type="actor-item actor-block actor-block-3d",t}return e=p,(r=[{key:"onRendered",value:function(t){s(u(p.prototype),"onRendered",this).call(this,t);const e=new o.Tag('<div class = "panel-3d front-3d">'),r=new o.Tag('<div class = "panel-3d back-3d">'),n=new o.Tag('<div class = "panel-3d right-3d">'),i=new o.Tag('<div class = "panel-3d left-3d">'),a=new o.Tag('<div class = "panel-3d top-3d">'),c=new o.Tag('<div class = "panel-3d bottom-3d">');this.box.append(r.node),this.box.append(n.node),this.box.append(i.node),this.box.append(e.node),this.box.append(a.node),this.box.append(c.node)}}])&&a(e.prototype,r),n&&a(e,n),Object.defineProperty(e,"prototype",{writable:!1}),p}();t.Block3d=f}),require.register("actor/BoostRing.js",function(t,e,r){"use strict";function n(t){"@babel/helpers - typeof";return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(t,"__esModule",{value:!0}),t.BoostRing=void 0;var i=e("./PointActor"),o=e("../audio/Sfx");function a(t,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,(o=i.key,void 0,"symbol"===n(a=function(t,e){if("object"!==n(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var i=r.call(t,e||"default");if("object"!==n(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(o,"string"))?a:String(a)),i)}var o,a}function s(){return(s="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=u(t)););return t}(t,e);if(n){var i=Object.getOwnPropertyDescriptor(n,e);return i.get?i.get.call(arguments.length<3?t:r):i.value}}).apply(this,arguments)}function c(t,e){return(c=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function l(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,i=u(t);if(e){var o=u(this).constructor;r=Reflect.construct(i,arguments,o)}else r=i.apply(this,arguments);return function(t,e){if(e&&("object"===n(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function u(t){return(u=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}let f=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&c(t,e)}(p,i.PointActor);var e,r,n,f=l(p);function p(){var t,e,r;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,p);for(var n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return(r=f.call(this,...i)).args.type="actor-item actor-boost-ring",r.args.width=16,r.args.height=16,r.args.float=-1,r.args.pointing=null!==(t=r.args.pointing)&&void 0!==t?t:0,r.args.power=null!==(e=r.args.power)&&void 0!==e?e:15,r.shooting=new Set,r}return e=p,(r=[{key:"onRendered",value:function(t){s(u(p.prototype),"onRendered",this).call(this,t),this.autoStyle.get(this.box)["--pointing"]="pointing"}},{key:"collideA",value:function(t){!t.controllable||this.shooting.has(t)||t.args.mercy>120||(t.args.rolling=!0,t.args.jumping=!0,t.dashed=!1,t.args.x=this.args.x,t.args.y=this.args.y,t.args.xSpeed=0,t.args.ySpeed=0,t.args.float=15,t.args.ignore=15,t.args.cameraIgnore=30,t.args.groundAngle=0,t.args.cameraMode="boost-ring",t.args.angle=this.args.pointing,t.args.flying=!1,this.shooting.add(t),this.viewport.onFrameOut(4,()=>t.impulse(this.args.power,this.args.pointing,!0)),this.viewport.onFrameOut(2,()=>o.Sfx.play("BOOST_RING")),this.viewport.onFrameOut(10,()=>this.shooting.delete(t)))}},{key:"solid",get:function(){return!1}}])&&a(e.prototype,r),n&&a(e,n),Object.defineProperty(e,"prototype",{writable:!1}),p}();t.BoostRing=f}),require.register("actor/Booster.js",function(t,e,r){"use strict";function n(t){"@babel/helpers - typeof";return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(t,"__esModule",{value:!0}),t.Booster=void 0;var i=e("./PointActor");function o(t,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,(o=i.key,void 0,"symbol"===n(a=function(t,e){if("object"!==n(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var i=r.call(t,e||"default");if("object"!==n(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(o,"string"))?a:String(a)),i)}var o,a}function a(){return(a="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=l(t)););return t}(t,e);if(n){var i=Object.getOwnPropertyDescriptor(n,e);return i.get?i.get.call(arguments.length<3?t:r):i.value}}).apply(this,arguments)}function s(t,e){return(s=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function c(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,i=l(t);if(e){var o=l(this).constructor;r=Reflect.construct(i,arguments,o)}else r=i.apply(this,arguments);return function(t,e){if(e&&("object"===n(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function l(t){return(l=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}let u=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&s(t,e)}(f,i.PointActor);var e,r,n,u=c(f);function f(){var t,e,r;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,f);for(var n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return(r=u.call(this,...i)).args.type="actor-item actor-booster",r.args.xMax=null!==(t=r.args.xMax)&&void 0!==t?t:24,r.args.yMax=null!==(e=r.args.yMax)&&void 0!==e?e:24,r.args.width=64,r.args.height=345,r.args.float=-1,r}return e=f,(r=[{key:"update",value:function(){this.viewport&&(a(l(f.prototype),"update",this).call(this),this.args.launched&&Math.abs(this.args.xSpeed)<Math.abs(this.args.xMax)&&(this.args.xSpeed+=.5*Math.sign(this.args.xMax)),this.args.launched&&Math.abs(this.args.ySpeed)<Math.abs(this.args.yMax)&&(this.args.ySpeed-=5*Math.sign(this.args.yMax)),this.args.launched&&(this.args.falling=!0),this.args.launched&&0===this.args.xSpeed&&this.args.ySpeed)}},{key:"activate",value:function(){this.args.active=!0,this.viewport.auras.add(this),this.args.launched=!0,this.args.xMax&&(this.args.xSpeed+=.5),this.args.yMax&&(this.args.ySpeed-=.5)}},{key:"explode",value:function(){this.viewport.onFrameOut(60,()=>{this.args.launched=!1,this.args.active=!1,this.viewport.auras.delete(this),this.args.x=this.def.get("x"),this.args.y=this.def.get("y"),this.args.xSpeed=0,this.args.ySpeed=0,this.args.gSpeed=0,this.viewport.setColCell(this);const t=new CustomEvent("exploded",{detail:{actor:this}});this.dispatchEvent(t)})}},{key:"sleep",value:function(){this.args.launched&&this.explode()}}])&&o(e.prototype,r),n&&o(e,n),Object.defineProperty(e,"prototype",{writable:!1}),f}();t.Booster=u}),require.register("actor/BouncyMushroom.js",function(t,e,r){"use strict";function n(t){"@babel/helpers - typeof";return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(t,"__esModule",{value:!0}),t.BouncyMushroom=void 0;var i=e("./Block");function o(t,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,(o=i.key,void 0,"symbol"===n(a=function(t,e){if("object"!==n(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var i=r.call(t,e||"default");if("object"!==n(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(o,"string"))?a:String(a)),i)}var o,a}function a(){return(a="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=l(t)););return t}(t,e);if(n){var i=Object.getOwnPropertyDescriptor(n,e);return i.get?i.get.call(arguments.length<3?t:r):i.value}}).apply(this,arguments)}function s(t,e){return(s=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function c(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,i=l(t);if(e){var o=l(this).constructor;r=Reflect.construct(i,arguments,o)}else r=i.apply(this,arguments);return function(t,e){if(e&&("object"===n(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function l(t){return(l=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}let u=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&s(t,e)}(f,i.Block);var e,r,n,u=c(f);function f(){var t,e;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,f);for(var r=arguments.length,n=new Array(r),i=0;i<r;i++)n[i]=arguments[i];return(e=u.call(this,...n)).args.width=64,e.args.height=32,e.args.platform=!0,e.args.float=-1,e.args.type="actor-item actor-bouncy-mushroom",e.args.stemLength=null!==(t=e.args.stemLength)&&void 0!==t?t:64,e.args.pressed=0,e}return e=f,(r=[{key:"onRendered",value:function(){a(l(f.prototype),"onRendered",this).call(this),this.autoStyle.get(this.box)["--stem-length"]="stemLength"}},{key:"update",value:function(){if(a(l(f.prototype),"update",this).call(this),!this.def.get("stemLength")){const t=this.castRayQuick(1024,Math.PI/2,[-16,0],!0)||32,e=this.castRayQuick(1024,Math.PI/2,[16,0],!0)||32;this.args.stemLength=Math.min(t,e)}this.args.active=this.args.pressed>0,this.args.pressed>0&&this.args.pressed--}},{key:"collideA",value:function(t,e){return 0===e&&t.args.ySpeed>=0?(t.args.ySpeed=t.args.flying&&t.flyTime>2?-2:-8,a(l(f.prototype),"collideA",this).call(this,t,e),void(this.args.pressed=6)):a(l(f.prototype),"collideA",this).call(this,t,e)}}])&&o(e.prototype,r),n&&o(e,n),Object.defineProperty(e,"prototype",{writable:!1}),f}();t.BouncyMushroom=u}),require.register("actor/BreakableBlock.js",function(t,e,r){"use strict";function n(t){"@babel/helpers - typeof";return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(t,"__esModule",{value:!0}),t.BreakableBlock=void 0;var i=e("./Block"),o=e("./Orb"),a=(e("./OrbSmall"),e("curvature/base/Tag")),s=e("../audio/Sfx"),c=(e("../behavior/Platformer"),e("../ObjectPalette"));function l(t,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,(o=i.key,void 0,"symbol"===n(a=function(t,e){if("object"!==n(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var i=r.call(t,e||"default");if("object"!==n(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(o,"string"))?a:String(a)),i)}var o,a}function u(){return(u="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=h(t)););return t}(t,e);if(n){var i=Object.getOwnPropertyDescriptor(n,e);return i.get?i.get.call(arguments.length<3?t:r):i.value}}).apply(this,arguments)}function f(t,e){return(f=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function p(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,i=h(t);if(e){var o=h(this).constructor;r=Reflect.construct(i,arguments,o)}else r=i.apply(this,arguments);return function(t,e){if(e&&("object"===n(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function h(t){return(h=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}let g=0,d=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&f(t,e)}(y,i.Block);var e,r,n,d=p(y);function y(){var t,e;let r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1?arguments[1]:void 0;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,y),(e=d.call(this,r,n)).args.type="actor-item actor-breakable-block",e.args.collapse&&(e.args.type="actor-item actor-breakable-block collapsible-block"),e.args.static=null===(t=e.args.static)||void 0===t||t,e.args.strength=Number(e.args.strength),e.fragmentsX=document.createElement("div"),e.fragmentsY=document.createElement("div"),e.fragmentsX.classList.add("fragmentsX"),e.fragmentsY.classList.add("fragmentsY"),e.fragmentTopLeft=document.createElement("div"),e.fragmentTopRight=document.createElement("div"),e.fragmentBottomLeft=document.createElement("div"),e.fragmentBottomRight=document.createElement("div"),e.fragmentTopLeft.classList.add("fragment"),e.fragmentTopLeft.classList.add("fragment-top-left"),e.fragmentTopRight.classList.add("fragment"),e.fragmentTopRight.classList.add("fragment-top-right"),e.fragmentBottomLeft.classList.add("fragment"),e.fragmentBottomLeft.classList.add("fragment-bottom-left"),e.fragmentBottomRight.classList.add("fragment"),e.fragmentBottomRight.classList.add("fragment-bottom-right"),e.fragmentsY.append(e.fragmentTopLeft),e.fragmentsY.append(e.fragmentTopRight),e.fragmentsY.append(e.fragmentBottomLeft),e.fragmentsY.append(e.fragmentBottomRight),e.fragmentsX.append(e.fragmentsY),e.broken=!1,e}return e=y,(r=[{key:"updateStart",value:function(){u(h(y.prototype),"updateStart",this).call(this),this.switch&&this.switch.args.active&&!this.broken&&this.break()}},{key:"update",value:function(){const t=this.viewport.regionsAtPoint(this.args.x,this.args.y);for(const e of t)e.updateActor(this);if(this.args.worm&&!this.broken&&!this.delay2&&this.viewport&&this.viewport.controlActor){this.viewport.controlActor.args.dead&&this.args.x<this.viewport.controlActor.args.x+32&&(this.box.classList.add("will-break"),this.box.classList.add("breaking"),this.box.classList.add("worm"),this.delayedBreak(1),this.delay2||(this.delay2=this.viewport.onFrameOut(1,()=>{this.box.classList.add("broken"),this.delay2=!1})));let t=0;this.viewport.controlActor.args.falling&&(t=-32),this.viewport.controlActor.args.startled&&(t=16),this.args.x<this.viewport.controlActor.args.x+t&&(this.box.classList.add("will-break"),this.box.classList.add("breaking"),this.box.classList.add("worm"),this.delayedBreak(1),this.delay2||(this.delay2=this.viewport.onFrameOut(1,()=>{this.box.classList.add("broken"),this.delay2=!1})))}u(h(y.prototype),"update",this).call(this)}},{key:"callCollideHandler",value:function(){if(this.broken)return!1;for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];return u(h(y.prototype),"callCollideHandler",this).call(this,...e)}},{key:"collideA",value:function(t,e){if(this.broken)return!1;if(t instanceof i.Block&&(t.args.float||this.args.float))return!1;if(!(t instanceof o.Orb||t.isVehicle||t.controllable||t.args.rolling))return!this.broken;if(this.args.collapse){if(!this.broken&&t.y<=this.y-this.args.height){const e=this.viewport.actorsAtPoint(this.x,this.y+-this.args.height+-1,0,0,{ghosts:!0});if(Array.isArray(e))for(const t of e)if(t instanceof y&&t.args.collapse&&!t.broken)return!1;return this.fragmentsX.style.setProperty("--xSpeed",0),t.args.falling||this.args.worm||this.delayedBreak(25),!0}return!(this.broken||!(!t.args.falling&&!t.args.climbing||t.args.climbing&&t.y<this.y-this.args.height||t.args.ySpeed>0&&t.y<this.y-this.args.height))}if(-2===this.args.strength&&(t.args.falling||Math.abs(t.args.gSpeed)>4))return this.broken||this.break(t),!1;if(-1===this.args.strength)return!0;if(1===this.args.strength&&"knuckles"===t.args.name&&(t.args.falling||Math.abs(t.args.gSpeed)>4)){const e=this.y-this.args.height;return this.args.bounceBack&&t.args.falling&&t.y<e&&(t.args.ySpeed=-this.args.bounceBack,t.args.y=e),this.broken||this.break(t),!1}if(1===this.args.strength){if("knuckles"!==t.args.name&&!t.isVehicle)return!0;if("knuckles"!==t.args.name||t.args.falling||Math.abs(t.args.gSpeed)>4){const e=this.y-this.args.height;return this.args.bounceBack&&t.args.falling&&t.y<e&&(t.args.ySpeed=-this.args.bounceBack,t.args.y=e),this.broken||this.break(t),!1}}if(2===this.args.strength){if(t.isVehicle||t.args.standingOn&&t.args.standingOn.isVehicle){if(0===e)return this.viewport.onFrameOut(1,()=>this.broken||this.break(t)),!0;const r=this.y-this.args.height;return this.args.bounceBack&&t.args.falling&&t.y<r&&(t.args.ySpeed=-this.args.bounceBack,t.args.y=r),this.broken||this.break(t),!1}return!0}if((!t.args.rolling||t.dropDashCharge||!t.args.mode)&&!t.isVehicle&&!t.args.spinning&&(t.args.falling&&!t.dashed&&!t.args.jumping||!t.args.falling&&0===e))return!this.broken;if(!(t instanceof o.Orb||t.falling||t.isVehicle||t.args.gSpeed||t.args.falling))return!this.broken;if(t instanceof o.Orb||t.isVehicle||t.args.spinning&&!t.spinDashCharge||t.args.dashed||t.punching||t.dropDashCharge&&t.args.ySpeed>=0){const e=this.y-this.args.height;return this.args.bounceBack&&t.args.falling&&t.y<e&&(t.args.ySpeed=-this.args.bounceBack,t.args.y=e),this.break(t),!1}return!this.broken}},{key:"sleep",value:function(){this.viewport&&(this.args.dontRestore||(this.args.collapse&&(this.args.static=!0,this.args.falling=!1,this.args.float=-1,this.noClip=!1,this.args.ySpeed=0,this.box.classList.remove("broken"),this.box.classList.remove("breaking"),this.box.classList.remove("will-break"),this.fragmentsX.remove(),this.broken=!1),this.args.worm?this.args.x+=this.args.worm:this.def&&(this.args.x=this.def.get("x")),this.def?(this.args.y=this.def.get("y")+1,this.broken&&(this.box.classList.remove("broken"),this.box.classList.remove("breaking"),this.box.classList.remove("will-break"),this.fragmentsX.remove()),this.args.active=0,this.broken=!1,this.viewport.setColCell(this)):this.viewport.actors.remove(this)))}},{key:"delayedBreak",value:function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:30,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];this.delay||e&&e.args.falling||(this.box.append(this.fragmentsX),this.delay=this.viewport.onFrameOut(t,()=>{this.break(e,r,!0),this.delay=!1}))}},{key:"break",value:function(t){let e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const n=this.broken;if(!this.broken){if(r||this.box.append(this.fragmentsX),this.broken=!0,this.box){const e=this.viewport;(!this.args.worm||t&&t.noClip)&&(this.box.classList.add("will-break"),this.box.classList.add("breaking"),this.delay3||(this.delay3=e.onFrameOut(3,()=>{this.box.classList.add("broken"),this.delay3=!1})))}!e&&Date.now()-g>100&&(this.args.worm?(this.viewport.onFrameOut(Math.trunc(3*Math.random()),()=>s.Sfx.play("WORM_BLOCK_DESTROYED")),g=Date.now()):this.viewport.onFrameOut(Math.trunc(3*Math.random()),()=>s.Sfx.play(this.breakSound||"BLOCK_DESTROYED")));const n=t&&t.occupant||t;if(n&&n.controllable){if(n.args.popChain.length){const t={label:this.args.name,points:10,multiplier:1};n.args.popCombo+=1,n.args.popChain.push(t)}const t=document.createElement("div");t.classList.add("particle-score"),t.classList.add("score-10");const e=new a.Tag(t);e.style({"--x":this.args.x,"--y":this.args.y-this.args.height}),this.viewport.particles.add(e),setTimeout(()=>this.viewport&&this.viewport.particles.remove(e),768),n.args.score+=10}if(this.args.contains&&c.ObjectPalette[this.args.contains]){const t=new c.ObjectPalette[this.args.contains];t.args.x=this.args.x,t.args.y=this.args.y-.5*this.args.height,t.args.falling=!0,t.args.xSpeed=this.xSpeedLast||this.gSpeedLast,t.args.ySpeed=this.args.ySpeed,t.args.ySpeed=-6,this.viewport.spawn.add({object:t})}}if(this.delay4||(this.delay4=this.viewport.onFrameOut(20,()=>{this.box&&this.box.classList.remove("breaking"),this.fragmentsX.remove(),this.delay4=!1})),!this.args.collapse&&t&&t.args.mode%2==0){const e=t.args.xSpeed||t.args.gSpeed,r=Math.sign(e),n=Math.abs(e),i=Math.min(512,n)*r;t.isVehicle?this.fragmentsX.style.setProperty("--xSpeed",Math.round(1.1*i)):t.controllable?this.fragmentsX.style.setProperty("--xSpeed",Math.round(1.5*i)):this.fragmentsX.style.setProperty("--xSpeed",2*Math.round(i))}if(this.refresher||(this.refresher=!0),this.args.active=1,this.args.collapse&&!n){const t=this.viewport.actorsAtPoint(this.x-this.args.width,this.y,0,0,{ghosts:!0}),r=this.viewport.actorsAtPoint(this.x+this.args.width,this.y,0,0,{ghosts:!0}),n=this.viewport.actorsAtPoint(this.x,this.y+1,0,0,{ghosts:!0});if(Array.isArray(t)&&!Math.sign(this.args.worm))for(const r of t)r instanceof y&&r.args.collapse&&(r.broken||r.delayedBreak(8,null,e));if(Array.isArray(r)&&!Math.sign(this.args.worm))for(const t of r)t instanceof y&&t.args.collapse&&(t.broken||t.delayedBreak(8,null,e));if(Array.isArray(n)&&!Math.sign(this.args.worm))for(const t of n)t instanceof y&&t.args.collapse&&(t.broken||t.delayedBreak(8,null,!0))}else if(!n){const t=this.viewport.actorsAtPoint(this.x,this.y+-this.args.height,0,0,{ghosts:!0});if(Array.isArray(t)&&!Math.sign(this.args.worm))for(const r of t)r instanceof y&&r.args.collapse&&(r.broken||r.delayedBreak(8,null,e))}this.viewport&&this.viewport.settings.rumble&&!this.broken&&t&&t.controller&&t.controller.rumble&&(t.controller&&t.controller.rumble&&t.controller.rumble({duration:140,strongMagnitude:1,weakMagnitude:1}),this.onTimeout(140,()=>{t.controller.rumble({duration:100,strongMagnitude:0,weakMagnitude:.25})})),this.broken=!0}},{key:"damage",value:function(t){arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.break(t)}},{key:"solid",get:function(){return this.args.solid&&!this.broken&&-2!==this.args.strength}}])&&l(e.prototype,r),n&&l(e,n),Object.defineProperty(e,"prototype",{writable:!1}),y}();t.BreakableBlock=d}),require.register("actor/BrokenMonitor.js",function(t,e,r){"use strict";function n(t){"@babel/helpers - typeof";return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(t,"__esModule",{value:!0}),t.BrokenMonitor=void 0;var i=e("./PointActor");e("../actor/Explosion"),e("../actor/Monitor");function o(t,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,(o=i.key,void 0,"symbol"===n(a=function(t,e){if("object"!==n(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var i=r.call(t,e||"default");if("object"!==n(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(o,"string"))?a:String(a)),i)}var o,a}function a(){return(a="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=l(t)););return t}(t,e);if(n){var i=Object.getOwnPropertyDescriptor(n,e);return i.get?i.get.call(arguments.length<3?t:r):i.value}}).apply(this,arguments)}function s(t,e){return(s=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function c(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,i=l(t);if(e){var o=l(this).constructor;r=Reflect.construct(i,arguments,o)}else r=i.apply(this,arguments);return function(t,e){if(e&&("object"===n(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function l(t){return(l=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}let u=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&s(t,e)}(f,i.PointActor);var e,r,n,u=c(f);function f(){var t;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,f);for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];return(t=u.call(this,...r)).args.type="actor-item actor-monitor actor-monitor-broken",t.args.width=28,t.args.height=32,t}return e=f,(r=[{key:"collideA",value:function(t){return a(l(f.prototype),"collideA",this).call(this,t),!0}},{key:"canStick",get:function(){return!1}},{key:"solid",get:function(){return!1}}])&&o(e.prototype,r),n&&o(e,n),Object.defineProperty(e,"prototype",{writable:!1}),f}();t.BrokenMonitor=u}),require.register("actor/Bubbles.js",function(t,e,r){"use strict";function n(t){"@babel/helpers - typeof";return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(t,"__esModule",{value:!0}),t.Bubbles=void 0;var i=e("curvature/base/Mixin"),o=e("curvature/base/Tag"),a=(e("./Flickie"),e("./PointActor")),s=e("../behavior/SkidDust"),c=e("../mixin/CanPop"),l=(e("../actor/Explosion"),e("../actor/Projectile"),e("../powerups/ElectricSheild"));function u(t,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,(o=i.key,void 0,"symbol"===n(a=function(t,e){if("object"!==n(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var i=r.call(t,e||"default");if("object"!==n(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(o,"string"))?a:String(a)),i)}var o,a}function f(){return(f="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=g(t)););return t}(t,e);if(n){var i=Object.getOwnPropertyDescriptor(n,e);return i.get?i.get.call(arguments.length<3?t:r):i.value}}).apply(this,arguments)}function p(t,e){return(p=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function h(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,i=g(t);if(e){var o=g(this).constructor;r=Reflect.construct(i,arguments,o)}else r=i.apply(this,arguments);return function(t,e){if(e&&("object"===n(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function g(t){return(g=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}let d=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&p(t,e)}(y,i.Mixin.from(a.PointActor,c.CanPop));var e,r,n,d=h(y);function y(){var t;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,y);for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];return(t=d.call(this,...r)).behaviors.add(new s.SkidDust),t.args.type="actor-item actor-bubbles",t.args.animation="standing",t.args.accel=.1,t.args.decel=.5,t.args.gSpeedMax=5,t.args.jumpForce=5,t.args.gravity=.5,t.args.width=32,t.args.height=32,t.willStick=!1,t.stayStuck=!1,t.args.float=-1,t.args.static=!0,t.aiming=!1,t}return e=y,(r=[{key:"onRendered",value:function(t){f(g(y.prototype),"onRendered",this).call(this,t),this.shield=new l.ElectricSheild,this.args.electric&&(this.inventory.add(this.shield),this.args.currentSheild=this.shield),this.autoAttr.get(this.box)["data-gold"]="gold",this.autoAttr.get(this.box)["data-fade"]="fade",this.chain=new o.Tag('<div class = "bubbles-flame">'),this.sprite.appendChild(this.chain.node)}},{key:"update",value:function(){if(!this.viewport||!this.viewport.controlActor)return;if(this.args.gold&&!this.args.fading&&Math.abs(this.viewport.controlActor.x-this.x)<256&&Math.abs(this.viewport.controlActor.y-this.y)<128){this.args.fading=!0;const t=this.viewport;t.onFrameOut(25,()=>this.args.fade=!0),t.onFrameOut(55,()=>t.actors.remove(this))}const t=this.viewport.args.frameId-this.viewport.args.startFrameId;this.viewport&&this.args.electric&&t%100==0&&(this.args.currentSheild=this.args.currentSheild?null:this.shield),this.box&&this.box.setAttribute("data-animation","standing"),this.args.falling=!0,this.args.flying=!0,f(g(y.prototype),"update",this).call(this)}},{key:"hold_1",value:function(){this.aiming=!0}},{key:"release_1",value:function(){this.aiming=!1}},{key:"effect",value:function(t){f(g(y.prototype),"effect",this).call(this,t)}},{key:"solid",get:function(){return!1}},{key:"isEffect",get:function(){return!1}}])&&u(e.prototype,r),n&&u(e,n),Object.defineProperty(e,"prototype",{writable:!1}),y}();t.Bubbles=d}),require.register("actor/Bumper.js",function(t,e,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Bumper=void 0;var n=e("./PointActor"),i=e("../audio/Sfx");function o(t){"@babel/helpers - typeof";return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function a(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,f(n.key),n)}}function s(t,e){return(s=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function c(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=u(t);if(e){var i=u(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===o(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return l(t)}(this,r)}}function l(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function u(t){return(u=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function f(t){var e=function(t,e){if("object"!==o(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==o(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===o(e)?e:String(e)}let p=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&s(t,e)}(p,n.PointActor);var e,r,o,u=c(p);function p(){var t,e,r,n;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,p);for(var i=arguments.length,o=new Array(i),a=0;a<i;a++)o[a]=arguments[a];return t=u.call(this,...o),e=l(t),n=-1,(r=f(r="float"))in e?Object.defineProperty(e,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[r]=n,t.args.type="actor-item actor-bumper",t.args.width=16,t.args.height=16,t.ignores=new Map,t}return e=p,(r=[{key:"collideA",value:function(t){if(!(t.args.static||t.isRegion||this.ignores.has(t)||t.noClip)){if(this.args.type="actor-item actor-bumper actor-bumper-active",this.viewport.onFrameOut(3,()=>this.args.type="actor-item actor-bumper"),t.args.falling){i.Sfx.play("BUMPER_BOUNCE");const e=this.x-t.x,r=this.y-t.y,n=Math.max(12,Math.hypot(t.args.xSpeed,t.args.ySpeed)),o=Math.atan2(r,e);t.args.width;t.args.x=this.x,t.args.y=this.y,t.args.xSpeed=-n*Math.cos(o),t.args.ySpeed=-n*Math.sin(o)}else t.args.gSpeed*=-1,Math.abs(t.args.gSpeed)<7&&(t.args.gSpeed=7*Math.sign(t.args.gSpeed));this.ignores.set(t,8),this.viewport.settings.rumble&&t&&t.controller&&t.controller.rumble&&(t.controller.rumble({duration:120,strongMagnitude:1,weakMagnitude:1}),this.onTimeout(120,()=>{t.controller.rumble({duration:120,strongMagnitude:0,weakMagnitude:1})}))}}},{key:"canStick",get:function(){return!1}},{key:"rotateLock",get:function(){return!0}},{key:"solid",get:function(){return!0}}])&&a(e.prototype,r),o&&a(e,o),Object.defineProperty(e,"prototype",{writable:!1}),p}();t.Bumper=p}),require.register("actor/ButterDroid.js",function(t,e,r){"use strict";function n(t){"@babel/helpers - typeof";return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(t,"__esModule",{value:!0}),t.ButterDroid=void 0;var i=e("./PointActor"),o=e("curvature/base/Mixin"),a=e("../mixin/CanPop");function s(t,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,(o=i.key,void 0,"symbol"===n(a=function(t,e){if("object"!==n(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var i=r.call(t,e||"default");if("object"!==n(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(o,"string"))?a:String(a)),i)}var o,a}function c(){return(c="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=f(t)););return t}(t,e);if(n){var i=Object.getOwnPropertyDescriptor(n,e);return i.get?i.get.call(arguments.length<3?t:r):i.value}}).apply(this,arguments)}function l(t,e){return(l=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function u(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,i=f(t);if(e){var o=f(this).constructor;r=Reflect.construct(i,arguments,o)}else r=i.apply(this,arguments);return function(t,e){if(e&&("object"===n(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function f(t){return(f=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}let p=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&l(t,e)}(h,o.Mixin.from(i.PointActor,a.CanPop));var e,r,n,p=u(h);function h(t,e){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,h),(r=p.call(this,t,e)).args.type="actor-item actor-butter-droid",r.args.width=24,r.args.height=24,r.args.float=-1,r.args.gravity=0,r.args.phase="idle",r}return e=h,(r=[{key:"update",value:function(){if(!this.viewport||!this.viewport.actorIsOnScreen(this))return;const t=this.viewport;this.args.xSpeed=.8*Math.sign(Math.sin(this.age/60)),c(f(h.prototype),"update",this).call(this),t.controlActor?(this.args.facing=this.args.xSpeed>0?"left":"right",this.args.float=-1):this.args.phase="idle"}},{key:"solid",get:function(){return!1}},{key:"rotateLock",get:function(){return!0}}])&&s(e.prototype,r),n&&s(e,n),Object.defineProperty(e,"prototype",{writable:!1}),h}();t.ButterDroid=p}),require.register("actor/BuzzBomber.js",function(t,e,r){"use strict";function n(t){"@babel/helpers - typeof";return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(t,"__esModule",{value:!0}),t.BuzzBomber=void 0;e("./Flickie");var i=e("curvature/base/Mixin"),o=e("curvature/base/Tag"),a=e("./PointActor"),s=e("../behavior/SkidDust"),c=e("../mixin/CanPop"),l=(e("../actor/Explosion"),e("../actor/Projectile"));function u(t,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,(o=i.key,void 0,"symbol"===n(a=function(t,e){if("object"!==n(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var i=r.call(t,e||"default");if("object"!==n(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(o,"string"))?a:String(a)),i)}var o,a}function f(){return(f="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=g(t)););return t}(t,e);if(n){var i=Object.getOwnPropertyDescriptor(n,e);return i.get?i.get.call(arguments.length<3?t:r):i.value}}).apply(this,arguments)}function p(t,e){return(p=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function h(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,i=g(t);if(e){var o=g(this).constructor;r=Reflect.construct(i,arguments,o)}else r=i.apply(this,arguments);return function(t,e){if(e&&("object"===n(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function g(t){return(g=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}let d=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&p(t,e)}(y,i.Mixin.from(a.PointActor,c.CanPop));var e,r,n,d=h(y);function y(){var t;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,y);for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];return(t=d.call(this,...r)).behaviors.add(new s.SkidDust),t.args.type="actor-item actor-buzz-bomber",t.args.animation="standing",t.args.accel=.1,t.args.decel=.5,t.args.gSpeedMax=2,t.args.jumpForce=5,t.args.gravity=.5,t.args.width=32,t.args.height=16,t.willStick=!1,t.stayStuck=!1,t.args.float=-1,t.aiming=!1,t}return e=y,(r=[{key:"onRendered",value:function(){if(f(g(y.prototype),"onRendered",this).call(this),this.flame=new o.Tag('<div class = "buzz-bomber-flame">'),this.wings=new o.Tag('<div class = "buzz-bomber-wings">'),this.sprite.appendChild(this.flame.node),this.sprite.appendChild(this.wings.node),this.aiming)this.box.setAttribute("data-animation","aiming");else{const t=this.args.direction;Math.sign(this.args.gSpeed)!==t&&Math.abs(this.args.gSpeed-t)>5?this.box.setAttribute("data-animation","skidding"):this.args.moving&&this.args.gSpeed?this.box.setAttribute("data-animation","walking"):this.box.setAttribute("data-animation","standing")}}},{key:"update",value:function(){this.args.ySpeed=this.yAxis,this.flame,0===this.args.xSpeed&&this.viewport&&this.viewport.onFrameOut(10,()=>{this.attack()}),this.args.falling=!0,this.args.flying=!0,f(g(y.prototype),"update",this).call(this)}},{key:"command_1",value:function(){this.aiming=!this.aiming}},{key:"command_2",value:function(){if(!this.aiming||!this.viewport)return;const t=[0,-24],e=new l.Projectile({direction:this.args.direction,x:this.args.x+t[0]+(this.args.xSpeed||this.args.gSpeed),y:this.args.y+t[1],owner:this,xSpeed:this.args.xSpeed||this.args.gSpeed,YSpeed:this.args.YSpeed});e.impulse(6,1.57+Math.PI/4*1),this.viewport.auras.add(e),this.viewport.spawn.add({object:e})}},{key:"effect",value:function(t){f(g(y.prototype),"effect",this).call(this,t)}},{key:"wakeUp",value:function(){if(!this.viewport)return;this.viewport;this.sleeping=!1,this.attack()}},{key:"attack",value:function(){if(this.sleeping||this.attacking)return;if(!this.viewport)return;const t=this.viewport;this.args.direction=-1,this.args.facing="left",this.args.xSpeed=-10,this.aiming=!1,this.attacking=!0,t.onFrameOut(5,()=>{this.aiming=!0,t.onFrameOut(5,()=>{let e=2;const r=t.onFrameInterval(5,()=>{this.command_2(),e--||r()})})}),t.onFrameOut(50,()=>{const e=this.args.xSpeed;this.args.xSpeed=.5*-e,t.onFrameOut(100,()=>{this.aiming=!1,this.attacking=!1,this.args.xSpeed=0,this.args.ySpeed=0})})}},{key:"sleep",value:function(){this.args.x=this.def.get("x"),this.args.y=this.def.get("y"),this.onNextFrame(()=>{this.viewport&&(this.args.x=this.def.get("x"),this.args.y=this.def.get("y"),this.viewport.setColCell(this),this.args.xSpeed=0,this.args.ySpeed=0,this.args.pushed=0,this.args.float=0,this.attacking=!1,this.sleeping=!0)})}},{key:"solid",get:function(){return!1}},{key:"isEffect",get:function(){return!1}}])&&u(e.prototype,r),n&&u(e,n),Object.defineProperty(e,"prototype",{writable:!1}),y}();t.BuzzBomber=d}),require.register("actor/Catakiller.js",function(t,e,r){"use strict";function n(t){"@babel/helpers - typeof";return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(t,"__esModule",{value:!0}),t.Catakiller=void 0;var i=e("./PointActor"),o=e("curvature/base/Mixin"),a=e("../mixin/CanPop"),s=e("./CatakillerSegment");function c(t,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,(o=i.key,void 0,"symbol"===n(a=function(t,e){if("object"!==n(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var i=r.call(t,e||"default");if("object"!==n(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(o,"string"))?a:String(a)),i)}var o,a}function l(){return(l="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=p(t)););return t}(t,e);if(n){var i=Object.getOwnPropertyDescriptor(n,e);return i.get?i.get.call(arguments.length<3?t:r):i.value}}).apply(this,arguments)}function u(t,e){return(u=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function f(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,i=p(t);if(e){var o=p(this).constructor;r=Reflect.construct(i,arguments,o)}else r=i.apply(this,arguments);return function(t,e){if(e&&("object"===n(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function p(t){return(p=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}let h=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&u(t,e)}(g,o.Mixin.from(i.PointActor,a.CanPop));var e,r,n,h=f(g);function g(t,e){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,g),(r=h.call(this,t,e)).args.type="actor-item actor-catakiller",r.args.width=16,r.args.height=24,r.args.phase="idle",r.args.scootSpeed=r.args.scootSpeed||2,r.args.segments=r.args.segments||6,r.args.pauseTime=r.args.pauseTime||45,r.args.phaseTime=r.args.phaseTime||600,r.segments=[],r}return e=g,(r=[{key:"update",value:function(){if(this.segments.length<this.args.segments){const t=new s.CatakillerSegment({leader:this.segments.length?this.segments[this.segments.length-1]:this,position:this.segments.length,following:!0,head:this,x:this.args.x+10*(this.segments.length+1),y:this.args.y,z:this.args.z-(this.segments.length+1)});this.segments.push(t),this.viewport.spawn.add({object:t})}if(!this.viewport||!this.viewport.actorIsOnScreen(this))return void l(p(g.prototype),"update",this).call(this);this.viewport;const t=this.args.phaseTime,e=.5*t,r=this.age%30,n=this.age%t<e?1:-1;this.age%e<e-this.args.pauseTime&&r>15?(this.args.gSpeed=this.args.scootSpeed*n,this.args.animation="mouth-open",0!==Math.round(this.args.gSpeed)&&(this.args.facing=this.args.gSpeed>0?"left":"right")):(this.args.animation="mouth-closed",this.args.gSpeed=0),l(p(g.prototype),"update",this).call(this)}},{key:"pop",value:function(){this.segments&&this.segments.forEach(t=>{t.args.popped=!0,t.args.falling=!0,t.args.xSpeed=2*-Math.sign(this.gSpeedLast)*(t.args.position-this.segments.length/2),t.args.ySpeed=-14,t.viewport&&t.viewport.onFrameOut(160,()=>t.noClip=!0)});for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];l(p(g.prototype),"pop",this).call(this,...e)}},{key:"solid",get:function(){return!1}},{key:"rotateLock",get:function(){return!0}}])&&c(e.prototype,r),n&&c(e,n),Object.defineProperty(e,"prototype",{writable:!1}),g}();t.Catakiller=h}),require.register("actor/CatakillerSegment.js",function(t,e,r){"use strict";function n(t){"@babel/helpers - typeof";return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(t,"__esModule",{value:!0}),t.CatakillerSegment=void 0;var i=e("./PointActor"),o=e("curvature/base/Mixin");e("../mixin/CanPop");function a(t,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,(o=i.key,void 0,"symbol"===n(a=function(t,e){if("object"!==n(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var i=r.call(t,e||"default");if("object"!==n(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(o,"string"))?a:String(a)),i)}var o,a}function s(){return(s="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=u(t)););return t}(t,e);if(n){var i=Object.getOwnPropertyDescriptor(n,e);return i.get?i.get.call(arguments.length<3?t:r):i.value}}).apply(this,arguments)}function c(t,e){return(c=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function l(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,i=u(t);if(e){var o=u(this).constructor;r=Reflect.construct(i,arguments,o)}else r=i.apply(this,arguments);return function(t,e){if(e&&("object"===n(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function u(t){return(u=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}let f=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&c(t,e)}(p,o.Mixin.from(i.PointActor));var e,r,n,f=l(p);function p(t,e){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,p),(r=f.call(this,t,e)).args.type="actor-item actor-catakiller-segment",r.args.width=16,r.args.height=16,r.args.following=r.args.following||!1,r.args.willMove=!0,r.args.popped=!1,r.args.bounces=1,r}return e=p,(r=[{key:"collideA",value:function(t,e){t.controllable&&!this.args.popped&&(0===this.args.position&&this.args.head?this.args.head.collideA(t,e):t.damage(this))}},{key:"onRendered",value:function(){s(u(p.prototype),"onRendered",this).call(this),this.box&&this.args.position%2==0&&(this.autoStyle.get(this.box)["--space"]="space")}},{key:"update",value:function(){if(this.args.leader&&this.args.head&&!this.args.popped){const t=this.args.leader.args.x,e=Math.abs(this.args.x-t);let r=Math.abs(this.args.head.gSpeedLast||0);this.args.space=e,e<9.5?this.args.willMove=!1:e>13&&(this.args.willMove=!0),this.args.willMove?this.args.gSpeed=r*-Math.sign(this.args.x-t):this.args.gSpeed=0,0!==this.args.gSpeed&&(this.args.facing=this.args.gSpeed>0?"left":"right"),this.args.groundAngle=0}const t=this.args.y;s(u(p.prototype),"update",this).call(this),this.args.popped&&this.args.y===t&&(this.args.bounces>0?(this.args.ySpeed=-Math.max(this.ySpeedLast||5),this.args.xSpeed=(this.gSpeedLast||this.xSpeedLast||0)+Math.sign(this.xSpeedLast||0),this.args.falling=!0,this.args.bounces--):(this.noClip=!0,this.args.ySpeed=Math.max(this.ySpeedLast||5),this.args.falling=!0))}},{key:"solid",get:function(){return!1}},{key:"rotateLock",get:function(){return!0}}])&&a(e.prototype,r),n&&a(e,n),Object.defineProperty(e,"prototype",{writable:!1}),p}();t.CatakillerSegment=f}),require.register("actor/CautionPanel.js",function(t,e,r){"use strict";function n(t){"@babel/helpers - typeof";return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(t,"__esModule",{value:!0}),t.CautionPanel=void 0;var i=e("./PointActor");function o(t,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,(o=i.key,void 0,"symbol"===n(a=function(t,e){if("object"!==n(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var i=r.call(t,e||"default");if("object"!==n(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(o,"string"))?a:String(a)),i)}var o,a}function a(t,e){return(a=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function s(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,i=c(t);if(e){var o=c(this).constructor;r=Reflect.construct(i,arguments,o)}else r=i.apply(this,arguments);return function(t,e){if(e&&("object"===n(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function c(t){return(c=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}let l=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&a(t,e)}(l,i.PointActor);var e,r,n,c=s(l);function l(){var t;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,l);for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];return(t=c.call(this,...r)).args.width=80,t.args.height=48,t.args.type="actor-item actor-caution-panel",t.args.z=0,t}return e=l,(r=[{key:"solid",get:function(){return!1}}])&&o(e.prototype,r),n&&o(e,n),Object.defineProperty(e,"prototype",{writable:!1}),l}();t.CautionPanel=l}),require.register("actor/CautionSign.js",function(t,e,r){"use strict";function n(t){"@babel/helpers - typeof";return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(t,"__esModule",{value:!0}),t.CautionSign=void 0;var i=e("./PointActor");function o(t,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,(o=i.key,void 0,"symbol"===n(a=function(t,e){if("object"!==n(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var i=r.call(t,e||"default");if("object"!==n(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(o,"string"))?a:String(a)),i)}var o,a}function a(t,e){return(a=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function s(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,i=c(t);if(e){var o=c(this).constructor;r=Reflect.construct(i,arguments,o)}else r=i.apply(this,arguments);return function(t,e){if(e&&("object"===n(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function c(t){return(c=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}let l=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&a(t,e)}(l,i.PointActor);var e,r,n,c=s(l);function l(){var t;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,l);for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];return(t=c.call(this,...r)).args.width=20,t.args.height=60,t.args.type="actor-item actor-caution-sign",t}return e=l,(r=[{key:"solid",get:function(){return!1}}])&&o(e.prototype,r),n&&o(e,n),Object.defineProperty(e,"prototype",{writable:!1}),l}();t.CautionSign=l}),require.register("actor/ChainShot.js",function(t,e,r){"use strict";function n(t){"@babel/helpers - typeof";return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(t,"__esModule",{value:!0}),t.ChainShot=void 0;var i=e("./PointActor"),o=e("../audio/Sfx");e("curvature/base/Tag");function a(t,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,(o=i.key,void 0,"symbol"===n(a=function(t,e){if("object"!==n(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var i=r.call(t,e||"default");if("object"!==n(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(o,"string"))?a:String(a)),i)}var o,a}function s(){return(s="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=u(t)););return t}(t,e);if(n){var i=Object.getOwnPropertyDescriptor(n,e);return i.get?i.get.call(arguments.length<3?t:r):i.value}}).apply(this,arguments)}function c(t,e){return(c=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function l(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,i=u(t);if(e){var o=u(this).constructor;r=Reflect.construct(i,arguments,o)}else r=i.apply(this,arguments);return function(t,e){if(e&&("object"===n(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function u(t){return(u=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}let f=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&c(t,e)}(p,i.PointActor);var e,r,n,f=l(p);function p(){var t;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,p);for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];return(t=f.call(this,...r)).args.width=16,t.args.height=128,t.args.type="actor-item actor-chain-shot",t.args.float=-1,t.args.shooting=!1,t.args.animation="idle",t}return e=p,(r=[{key:"update",value:function(){s(u(p.prototype),"update",this).call(this),"shooting"===this.args.animation&&this.viewport.args.frameId%5==0&&o.Sfx.play("CHOPPER_GUN",{})}},{key:"collideA",value:function(t){this.args.shooting&&t.controllable&&t.damage(this)}}])&&a(e.prototype,r),n&&a(e,n),Object.defineProperty(e,"prototype",{writable:!1}),p}();t.ChainShot=f}),require.register("actor/Chalmers.js",function(t,e,r){"use strict";function n(t){"@babel/helpers - typeof";return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(t,"__esModule",{value:!0}),t.Chalmers=void 0;var i=e("./PointActor"),o=(e("curvature/base/Tag"),e("../behavior/SkidDust"));function a(t,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,(o=i.key,void 0,"symbol"===n(a=function(t,e){if("object"!==n(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var i=r.call(t,e||"default");if("object"!==n(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(o,"string"))?a:String(a)),i)}var o,a}function s(){return(s="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=u(t)););return t}(t,e);if(n){var i=Object.getOwnPropertyDescriptor(n,e);return i.get?i.get.call(arguments.length<3?t:r):i.value}}).apply(this,arguments)}function c(t,e){return(c=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function l(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,i=u(t);if(e){var o=u(this).constructor;r=Reflect.construct(i,arguments,o)}else r=i.apply(this,arguments);return function(t,e){if(e&&("object"===n(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function u(t){return(u=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}let f=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&c(t,e)}(p,i.PointActor);var e,r,n,f=l(p);function p(){var t;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,p);for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];return(t=f.call(this,...r)).behaviors.add(new o.SkidDust),t.args.type="actor-item actor-chalmers",t.args.normalHeight=45,t.args.rollingHeight=23,t.args.accel=.25,t.args.decel=.4,t.args.gSpeedMax=18,t.args.jumpForce=11,t.args.gravity=.5,t.args.width=18,t.args.height=32,t}return e=p,(r=[{key:"onRendered",value:function(t){s(u(p.prototype),"onRendered",this).call(this,t),this.box=this.findTag("div")}},{key:"update",value:function(){const t=this.args.falling;if(this.box){if(t)this.args.standingOn&&this.args.standingOn.isVehicle?this.box.setAttribute("data-animation","standing"):this.args.jumping&&this.box.setAttribute("data-animation","jumping");else{this.yAxis>0?this.args.crouching=!0:this.args.crouching=!1;const t=this.args.direction,e=this.args.gSpeed,r=Math.abs(e),n=this.args.gSpeedMax;this.args.rolling?this.box.setAttribute("data-animation","rolling"):Math.sign(this.args.gSpeed)!==t&&Math.abs(this.args.gSpeed-t)>5?this.box.setAttribute("data-animation","standing"):r>.25*n?this.box.setAttribute("data-animation","running"):this.args.moving&&e?this.box.setAttribute("data-animation","walking"):this.box.setAttribute("data-animation","standing")}s(u(p.prototype),"update",this).call(this)}else s(u(p.prototype),"update",this).call(this)}},{key:"solid",get:function(){return!1}},{key:"canRoll",get:function(){return!0}},{key:"isEffect",get:function(){return!1}},{key:"controllable",get:function(){return!0}}])&&a(e.prototype,r),n&&a(e,n),Object.defineProperty(e,"prototype",{writable:!1}),p}();t.Chalmers=f}),require.register("actor/Chao.js",function(t,e,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Chao=void 0;var n=e("../sprite/Png"),i=e("./PointActor"),o=e("./Mushroom"),a=e("./Coconut"),s=e("./Tree"),c=e("curvature/base/Uuid");function l(t){"@babel/helpers - typeof";return(l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function u(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,i,o,a,s=[],c=!0,l=!1;try{if(o=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=o.call(r)).done)&&(s.push(n.value),s.length!==e);c=!0);}catch(t){l=!0,i=t}finally{try{if(!c&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(l)throw i}}return s}}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return f(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return f(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function f(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function p(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,v(n.key),n)}}function h(){return(h="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=b(t)););return t}(t,e);if(n){var i=Object.getOwnPropertyDescriptor(n,e);return i.get?i.get.call(arguments.length<3?t:r):i.value}}).apply(this,arguments)}function g(t,e){return(g=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function d(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=b(t);if(e){var i=b(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===l(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return y(t)}(this,r)}}function y(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function b(t){return(b=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function v(t){var e=function(t,e){if("object"!==l(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==l(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===l(e)?e:String(e)}let m=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&g(t,e)}(m,i.PointActor);var e,r,l,f=d(m);function m(){var t,e,r,i;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,m);for(var o=arguments.length,a=new Array(o),s=0;s<o;s++)a[s]=arguments[s];return t=f.call(this,...a),e=y(t),r="png",i=new n.Png("/DBurraki/chao-normal.png"),(r=v(r))in e?Object.defineProperty(e,r,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[r]=i,t.args.type="actor-item actor-chao",t.args.particleScale=.75,t.args.spriteSheet=t.spriteSheet="/DBurraki/chao-normal.png",t.args.width=14,t.args.height=18,t.args.uuid=a.uuid||String(new c.Uuid),t.xHold=8,t.yHold=0,t.maxFlight=270,t.emotes=["normal","alert","inquire","like","love","angry"],t.emoteIndex=0,t.args.animation="standing",t.args.inWater=!1,t.bindTo("carriedBy",e=>{if(t.cX&&(t.cX(),t.cX=null),t.cY&&(t.cY(),t.cY=null),e)t.cX=e.args.bindTo("x",r=>t.args.x=r+8*e.args.direction),t.cY=e.args.bindTo("y",e=>t.args.y=e+-16),e.carrying.add(y(t)),t.args.float=-1,t.args.groundAngle=0;else if(t.carriedBy){const e=t.carriedBy;t.carriedBy=null,t.args.xSpeed=e.args.xSpeed,t.args.ySpeed=e.args.ySpeed,t.args.xSpeed+=4*Math.sign(e.args.gSpeed||e.args.xSpeed),t.args.ySpeed-=4,e.carrying.delete(y(t)),t.args.falling=!0,t.args.float=0}}),t.args.direction=1,t.args.currentState=t.args.currentState||"sitting",t.args.bindTo("currentState",()=>{t.args.stateTime=0}),t.args.alignment="neutral",t.stats={intelligence:0,stamina:0,luck:0,run:0,swim:0,fly:0,power:0},t.traits={appetite:0,sociable:0,restless:0},t.mood={attitude:0,happy:1,hunger:0,health:1,social:0},t.defaultColors=["addef8","2ebee9","0e6d89","ecde2f","dcb936","985000","f8b0c0","f85080","e4e0e4","e0e0e0","f8f820","606080"],t.customColors=[null,null,null,null,null,null,null,null,null,null,null,null],t.customColors.bindTo(()=>{const e={};for(const n in t.defaultColors){var r;e[t.defaultColors[n]]=null!==(r=t.customColors[n])&&void 0!==r?r:t.defaultColors[n]}t.png.ready.then(()=>{const r=t.png.recolor(e).toUrl();t.args.spriteSheet=r})},{wait:0}),t.chaoAge=0,t}return e=m,(r=[{key:"onAttached",value:function(t){this.listening||(this.box.addEventListener("click",t=>this.onClick(t)),this.box.addEventListener("contextmenu",t=>this.onRightClick(t)),this.listening=!0),this.setAutoAttr("currentState","data-current-state"),this.setAutoAttr("alignment","data-alignment"),this.setAutoAttr("direction","data-direction"),this.setAutoAttr("emote","data-emote");const e=this.viewport;this.onRemove(()=>clearInterval(e.onInterval(1500,()=>{this.emoteIndex>=this.emotes.length&&(this.emoteIndex=0),this.args.emote=this.emotes[this.emoteIndex],this.emoteIndex++,this.onRemove(()=>e.onTimeout(500,()=>{this.args.emote="normal"}))})));const r={addef8:"e4e0e4","2ebee9":"c0bde4","0e6d89":"9c99c0",ecde2f:"addef8",dcb936:"2ebee9",985000:"0e6d89",ffa3b1:"ffa3b1",fa6379:"fa6379",e4e0e4:"cdeef8",f8f820:"9c99c0"},n={addef8:"485070","2ebee9":"303058","0e6d89":"202020",ecde2f:"b70000",dcb936:"770000",985000:"420000",ffa3b1:"ffa3b1",fa6379:"fa6379",e4e0e4:"e4e0e4",f8f820:"bf999c",606080:"202020"},i={addef8:"ff7575","2ebee9":"e00000","0e6d89":"800000",ecde2f:"b70000",dcb936:"770000",985000:"420000",ffa3b1:"ffa3b1",fa6379:"fa6379",e4e0e4:"e4e0e4",606080:"202020"},o={addef8:"e08000","2ebee9":"b76900","0e6d89":"7d4800",ecde2f:"b44800",dcb936:"844221",985000:"630000",ffa3b1:"ffa3b1",fa6379:"fa6379",e4e0e4:"e4e0e4",606080:"202020"},a={addef8:"80e000","2ebee9":"69b700","0e6d89":"487d00",ecde2f:"48b400",dcb936:"428421",985000:"006300",ffa3b1:"ffa3b1",fa6379:"fa6379",e4e0e4:"e4e0e4",606080:"202020"},s={addef8:"485070","2ebee9":"303058","0e6d89":"202020",ecde2f:"c0bde4",dcb936:"9c99c0",985000:"606080",ffa3b1:"ffa3b1",fa6379:"fa6379",e4e0e4:"e4e0e4",f8f820:"9c99c0",606080:"202020"},c={addef8:"c0bde4","2ebee9":"9c99c0","0e6d89":"606080",ecde2f:"485070",dcb936:"303058",985000:"202020",ffa3b1:"ffa3b1",fa6379:"fa6379",e4e0e4:"e4e0e4",f8f820:"9c99c0",606080:"202020"},l={addef8:"c0bde4","2ebee9":"9c99c0","0e6d89":"606080",ecde2f:"e4e0e4",dcb936:"c0bde4",985000:"9c99c0",ffa3b1:"ffa3b1",fa6379:"fa6379",e4e0e4:"e4e0e4",f8f820:"9c99c0",606080:"202020"},u={addef8:"80e000","2ebee9":"69b700","0e6d89":"487d00",ecde2f:"b70000",dcb936:"770000",985000:"420000",ffa3b1:"ffa3b1",fa6379:"fa6379",e4e0e4:"e4e0e4",606080:"202020"};this.png.ready.then(()=>{this.heroSheet=this.png.recolor(r).toUrl(),this.darkSheet=this.png.recolor(n).toUrl(),this.rubySheet=this.png.recolor(i).toUrl(),this.tangySheet=this.png.recolor(o).toUrl(),this.limeSheet=this.png.recolor(a).toUrl(),this.coalSheet=this.png.recolor(s).toUrl(),this.mimeSheet=this.png.recolor(c).toUrl(),this.whiteSheet=this.png.recolor(l).toUrl(),this.limeRubySheet=this.png.recolor(u).toUrl()})}},{key:"generate",value:function(){Object.assign(this.stats,{intelligence:0,stamina:0,luck:0,run:0,swim:0,fly:0,power:0}),Object.assign(this.traits,{appetite:0,sociable:0,restless:0}),Object.assign(this.mood,{attitude:0,happy:1,hunger:0,health:1,social:0})}},{key:"lift",value:function(t){if(this.carriedBy===t)return this.carriedBy=null,void(this.args.currentState="standing");this.carriedBy=t,this.args.currentState="held"}},{key:"solid",get:function(){return!1}},{key:"update",value:function(){if("garden"===viewport.meta.fieldType&&this.chaoAge%120==0){const t=viewport.getZoneState(),e=t.chao.find(t=>t.uuid===this.args.uuid);e?Object.assign(e,this.store()):t.chao.push(this.store()),viewport.currentSave.save()}for(const t of this.carrying)t.args.x=this.args.x+this.args.direction*this.xHold,t.args.y=this.args.y+this.yHold;this.args.inWater=!1;const t=[...this.regions].filter(t=>t.args.density>=1);if(t.length){if("flying"!==this.args.currentState&&this.args.ySpeed>=0){const e=t[0].args.y-t[0].args.height+6,r=3;"walking"!==this.args.currentState&&(this.args.xSpeed=.95*this.args.xSpeed),this.args.y>e?(this.args.falling=!0,this.args.ySpeed+=-.25,this.args.float=-1,this.args.ySpeed>r&&(this.args.ySpeed=r),this.args.ySpeed<-r&&(this.args.ySpeed=-r)):(this.args.ySpeed>0&&Math.abs(this.args.y-e)<r&&(this.args.y=e),this.args.ySpeed=0,this.args.float=1),this.args.groundAngle=0}this.args.inWater=!0}else"flying"!==this.args.currentState&&(this.args.float=0);this.mood.hunger<1&&(this.traits.appetite<.333?this.mood.hunger+=2e-5:this.traits.appetite<.666?this.mood.hunger+=4e-5:this.mood.hunger+=6e-5),this.mood.social<1&&(this.traits.sociable<.333?this.mood.social+=2e-4:this.traits.sociable<.666?this.mood.social+=4e-4:this.mood.social+=6e-4),["eating","holding"].includes(this.args.currentState)||this.carrying.size&&(this.args.currentState="holding");const e=String(this.args.currentState).charAt(0).toUpperCase()+String(this.args.currentState).slice(1);"function"==typeof this["state"+e]&&this["state"+e](),this.mood.hunger<.3&&(this.selectedFood=null,this.selectedTree=null),this.selectedFood&&this.selectedFood.carriedBy&&(this.selectedThing=null,this.selectedFood=null),this.selectedTree&&this.selectedTree.args.shaking&&"shakingTree"!==this.args.currentState&&(this.selectedThing=null,this.selectedTree=null),this.selectedTree&&this.selectedTree.args.shaking||(this.args.z=2),h(b(m.prototype),"update",this).call(this),this.args.stateTime++,this.chaoAge++}},{key:"collideA",value:function(t,e){h(b(m.prototype),"collideA",this).call(this,t,e),this.selectedFriend!==t||this.carriedBy||"flying"===this.args.currentState||(this.args.currentState="fun"),t.carriedBy||this.carrying.size||((t instanceof a.Coconut||t instanceof o.Mushroom)&&t.args.size&&t.args.falling===this.args.falling&&t.lift(this),this.selectedFood===t&&(this.selectedThing=null,this.selectedFood=null),this.selectedTree===t&&Math.abs(this.args.x-t.args.x)<8&&this.args.y<=t.args.y+3&&(this.args.currentState="shakingTree"))}},{key:"stateStanding",value:function(){this.args.animation="standing",this.args.falling||(this.args.xSpeed=0,this.args.ySpeed=0),this.args.stateTime>120&&(this.args.currentState="thinking")}},{key:"stateThinking",value:function(){this.args.falling||(this.args.xSpeed=0,this.args.ySpeed=0),this.args.animation="thinking",this.args.stateTime>60?this.args.currentState="searching":0==this.args.stateTime&&(this.args.emote="inquire")}},{key:"stateSearching",value:function(){this.args.animation="searching",this.args.emote="inquire",this.args.stateTime>90?this.args.emote="alert":this.args.emote="inquire",this.args.stateTime>120&&(this.args.direction=Math.sign(Math.random()-.5),this.getMapSolidAt(this.args.x+8*this.args.direction,this.args.y)&&(this.args.direction*=-1),this.mood.hunger>.5?this.args.currentState="seekingFood":this.mood.social>.75?this.args.currentState="seekingFriend":Math.random()>.15*this.traits.restless?this.args.groundAngle||this.args.inWater?this.args.currentState="walking":this.args.currentState="sitting":this.args.currentState="walking")}},{key:"stateWalking",value:function(){this.args.inWater?this.args.animation="flying":this.args.animation="walking",this.args.stateTime<15?this.args.emote="alert":16===this.args.stateTime&&(this.args.emote="normal"),this.args.inWater?this.args.xSpeed=1*this.args.direction:this.args.gSpeed=.01*this.args.direction,this.args.stateTime>40&&(!this.args.inWater&&Math.random()>.9&&(this.args.currentState="tripping"),!this.selectedThing&&Math.random()>.95?this.args.currentState="flying":this.selectedThing&&this.selectedThing.args.y<this.args.y?this.args.currentState="flying":!this.selectedThing&&Math.random()>.98&&(this.args.currentState="searching"))}},{key:"stateTripping",value:function(){this.args.animation="tripping",this.args.stateTime>10?this.args.gSpeed=0:this.args.gSpeed=1*this.args.direction,this.args.stateTime>20?this.args.stateTime<30&&Math.random()>.6&&(this.args.emote="angry"):this.args.emote="alert",this.args.stateTime>120&&(this.args.currentState="sitting")}},{key:"stateFlying",value:function(){this.args.animation="flying",this.args.inWater&&this.args.y--,1===this.args.stateTime&&(this.flightTime=this.maxFlight/2+Math.round(this.maxFlight/2*Math.random())),this.args.xSpeed&&this.getMapSolidAt(this.args.x+8*Math.sign(this.args.xSpeed),this.args.y)&&(this.args.direction*=-1,this.args.xSpeed*=-1),this.getMapSolidAt(this.args.x,this.args.y+2)&&(this.args.falling=!0,this.args.float=-1),!this.selectedThing&&this.args.stateTime>120&&this.args.ySpeed<0?this.args.ySpeed*=.4:this.selectedThing&&this.args.y<this.selectedThing.args.y-96&&(this.args.ySpeed*=.4),this.selectedThing&&this.selectedThing.args.y-32<this.args.y?(this.selectedThing&&Math.abs(this.selectedThing.args.x-this.args.x)>32&&(this.args.direction=Math.sign(this.selectedThing.args.x-this.args.x)),this.args.xSpeed=1.25*this.args.direction,this.args.ySpeed>-1.5&&(this.args.ySpeed-=.1)):this.selectedThing&&Math.abs(this.selectedThing.args.x-this.args.x)<32&&(this.args.direction=Math.sign(this.selectedThing.args.x-this.args.x),this.args.currentState="walking"),this.args.stateTime<this.flightTime?(this.args.groundAngle=0,this.args.ySpeed&&this.args.falling?this.args.ySpeed>=0&&(this.args.currentState="flying"):(this.args.xSpeed||this.args.gSpeed||this.selectedThing||(this.args.direction=Math.sign(Math.random()-.5)),this.args.falling=!0,this.args.ySpeed=-1,this.args.xSpeed=1.25*this.args.direction,this.args.float=-1)):this.selectedThing||(this.args.currentState="thinking")}},{key:"stateHatching",value:function(){this.stateSitting()}},{key:"stateSitting",value:function(){this.args.xSpeed=0,this.args.inWater?this.args.animation="standing":this.args.animation="sitting",this.args.stateTime>120&&(this.mood.hunger>.5?this.args.currentState="seekingFood":this.mood.social>.75?this.args.currentState="seekingFriend":Math.random()>.35*this.traits.restless?this.args.currentState="walking":this.args.currentState="thinking")}},{key:"stateWaiting",value:function(){this.args.xSpeed=0,Math.trunc(this.args.stateTime/15)%2&&(Math.random()<.2?this.args.emote="inquire":this.args.emote="normal"),this.args.inWater?this.args.animation="standing":this.args.animation="sitting"}},{key:"stateSwimming",value:function(){}},{key:"stateFlyingLooking",value:function(){}},{key:"stateHolding",value:function(){if(this.args.stateTime<60)return this.args.animation="thinking",void(this.args.emote="inquire");for(const t of this.carrying)t.args.gSpeed=0,t.args.xSpeed=0,t.args.ySpeed=0,(t instanceof a.Coconut||t instanceof o.Mushroom)&&(this.mood.hunger>.5||this.mood.hunger>.25&&Math.random()<.5?(this.args.emote="love",this.args.currentState="eating",t.carriedBy=this,t.noClip=!0):(this.args.currentState="walking",t.noClip=!1,t.carriedBy=null,this.carrying.delete(t),t.args.falling=!0,t.args.x=this.args.x,t.args.y=this.args.y,t.args.xSpeed=-3*this.args.direction+Math.random(),t.args.ySpeed=-3+Math.random(),t.args.float=0,this.ignores.set(t,60)))}},{key:"stateEating",value:function(){const t=new Set;for(const e of this.carrying)(e instanceof a.Coconut||e instanceof o.Mushroom)&&t.add(e);if(this.args.falling||(this.args.ySpeed=0),this.carriedBy?this.args.float=-1:this.args.float=0,this.args.xSpeed=0,this.args.animation="eating",this.args.emote="love",this.selectedThing!==this.selectedFriend&&(this.selectedThing=null),this.selectedFood=null,this.selectedTree=null,this.args.stateTime&&this.args.stateTime%75==0)for(const e of t)e.args.size--,this.mood.hunger-=e.args.nourishment,e.args.size||(this.carriedBy?this.args.currentState="held":this.args.currentState="thinking",e.lift(this),this.viewport.actors.remove(e))}},{key:"stateHeld",value:function(){this.args.falling=!1,this.args.stateTime<15?this.args.emote="like":this.args.stateTime<60?(this.args.emote="love",this.args.animation="walking"):61===this.args.stateTime&&(this.args.emote="normal",this.args.animation="searching")}},{key:"stateFun",value:function(){const t=u(this.nearestFriend(),2),e=t[0],r=t[1];if(!e)return void(this.args.currentState="searching");const n=Math.sign(this.args.x-e.args.x);if(this.args.direction=-n,Math.abs(this.args.x-e.args.x)<16&&(this.args.x-=.1*(this.args.x-(e.args.x+16*n))),r>25)return void(this.args.currentState="searching");if(this.mood.social<.5)return this.args.direction*=-1,this.args.currentState="walking",this.selectedFriend=null,void(this.selectedThing=null);this.args.stateTime<45?this.args.emote="alert":this.args.emote="love",this.args.animation="walking";let i=1;this.selectedThing&&"fun"===this.selectedThing.args.currentState&&(i=.4),this.traits.sociable<.333?this.mood.social-=.004*i:this.traits.sociable<.666?this.mood.social-=.003*i:this.mood.social-=.002*i}},{key:"stateSeekingFriend",value:function(){if(this.viewport.args.frameId%60==0){const t=u(this.nearestFriend(),2),e=t[0];t[1];if(this.selectedThing=e,this.selectedFriend=e,!e)return void(this.args.currentState="thinking");this.args.direction=Math.sign(e.args.x-this.args.x),e.args.y<this.args.y?this.args.currentState="flying":this.args.currentState="walking"}}},{key:"stateSeekingFood",value:function(){if(this.selectedFriend=null,this.viewport.args.frameId%60==0){const t=u(this.nearestFood(),2),e=t[0];t[1];if(this.selectedThing=e,this.selectedFood=e,e)this.args.direction=Math.sign(e.args.x-this.args.x),e.args.y<this.args.y?this.args.currentState="flying":this.args.currentState="walking";else{this.selectedThing=null,this.selectedFood=null,this.args.currentState="thinking";const t=u(this.nearestTree(),2),e=t[0];t[1];if(this.selectedThing=e,this.selectedTree=e,!e)return this.selectedThing=null,this.selectedTree=null,void(this.args.currentState="thinking");this.args.direction=Math.sign(e.args.x-this.args.x),e.args.y<this.args.y?this.args.currentState="flying":this.args.currentState="walking"}}}},{key:"stateShakingTree",value:function(){if(!this.selectedTree)return void(this.args.currentState="thinking");if(!this.selectedTree.args.coconutCount)return void(this.args.currentState="thinking");if(this.args.stateTime%45==0&&Math.random()>.75)return this.args.selectedThing=null,this.args.selectedTree=null,this.args.currentState="seekingFood",void(this.args.animation="standing");const t=Math.sign(this.args.x-this.selectedTree.args.x);this.args.direction=-t,this.args.x=this.selectedTree.args.x+8*t,this.args.z=this.selectedTree.args.z-1,this.args.gSpeed=0,this.args.animation="shaking"}},{key:"store",value:function(){return{stateTime:this.args.stateTime,state:this.args.currentState,name:this.args.name,colors:this.customColors,align:this.args.alignment,position:[this.args.x,this.args.y],traits:this.traits,uuid:this.args.uuid,stats:this.stats,mood:this.mood,age:this.chaoAge}}},{key:"load",value:function(t){var e,r;("string"==typeof t&&(t=JSON.parse(t)),this.args.name=null!==(e=t.name)&&void 0!==e?e:"",t.align&&(this.args.alignment=t.align),t.position&&(this.args.x=t.position[0],this.args.y=t.position[1]),t.state)&&(this.args.currentState=t.state,this.args.stateTime=null!==(r=t.stateTime)&&void 0!==r?r:0);t.uuid&&(this.args.uuid=t.uuid),t.age&&(this.chaoAge=t.age),t.colors&&Object.assign(this.customColors,t.colors),t.traits&&Object.assign(this.stats,t.traits),t.stats&&Object.assign(this.stats,t.stats),t.mood&&Object.assign(this.mood,t.mood)}},{key:"nearestFriend",value:function(){const t=this.viewport.nearbyActors(this.args.x,this.args.y);let e=null,r=1/0;for(const n of t){if(n===this)continue;if(!(n instanceof this.constructor))continue;if(n.args.gSpeed||"eating"===n.args.currentState)continue;const t=this.distanceTo(n);this.canSee(n)&&t<r&&(e=n,r=t)}return[e,r]}},{key:"nearestFood",value:function(){const t=this.viewport.nearbyActors(this.args.x,this.args.y);let e=null,r=1/0;for(const n of t){if(n===this)continue;if(!(n instanceof a.Coconut))continue;if(n.carriedBy)continue;const t=this.distanceTo(n);this.canSee(n)&&t<r&&(e=n,r=t)}return[e,r]}},{key:"nearestTree",value:function(){const t=this.viewport.nearbyActors(this.args.x,this.args.y);let e=null,r=1/0;for(const n of t){if(n===this)continue;if(!(n instanceof s.Tree))continue;if(!n.args.coconutCount)continue;if(n.args.shaking)continue;const t=this.distanceTo(n);this.canSee(n)&&t<r&&(e=n,r=t)}return[e,r]}}])&&p(e.prototype,r),l&&p(e,l),Object.defineProperty(e,"prototype",{writable:!1}),m}();t.Chao=m}),require.register("actor/ChaoCrate.js",function(t,e,r){"use strict";function n(t){"@babel/helpers - typeof";return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(t,"__esModule",{value:!0}),t.ChaoCrate=void 0;var i=e("./BreakableBlock"),o=e("./Egg");function a(t,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,(o=i.key,void 0,"symbol"===n(a=function(t,e){if("object"!==n(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var i=r.call(t,e||"default");if("object"!==n(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(o,"string"))?a:String(a)),i)}var o,a}function s(){return(s="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=u(t)););return t}(t,e);if(n){var i=Object.getOwnPropertyDescriptor(n,e);return i.get?i.get.call(arguments.length<3?t:r):i.value}}).apply(this,arguments)}function c(t,e){return(c=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function l(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,i=u(t);if(e){var o=u(this).constructor;r=Reflect.construct(i,arguments,o)}else r=i.apply(this,arguments);return function(t,e){if(e&&("object"===n(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function u(t){return(u=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}let f=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&c(t,e)}(p,i.BreakableBlock);var e,r,n,f=l(p);function p(){var t;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,p);for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];return(t=f.call(this,...r)).args.type="actor-item actor-breakable-block actor-chao-crate",t.args.width=60,t.args.height=60,t.args.static=!1,t.args.spriteSheet="/Sonic/chao-crate.png",t}return e=p,(r=[{key:"setTile",value:function(){}},{key:"sleep",value:function(){}},{key:"wakeUp",value:function(){}},{key:"collideA",value:function(t,e){return!(0!==e||!t.controllable)||(-1!==e||t.args.gSpeed||t.args.falling||!t.controllable?1!==e&&3!==e||t.y<=this.y-this.args.height||(t.args.rolling||2===e?(this.break(),!1):!!this.viewport&&(-1!==e&&!t.args.rolling||s(u(p.prototype),"collideA",this).call(this,t,e))):(this.break(),!1))}},{key:"break",value:function(){if(!this.broken){if("garden"!==this.viewport.meta.fieldType)return this.viewport.args.inventory.push({points:1e4,tallyIcon:"/DBurraki/chao-icon.png",icon:"/DBurraki/chao-icon.png",id:this.oid}),void s(u(p.prototype),"break",this).call(this);for(let t=0;t<5;t++){const t=new o.Egg({x:this.x,y:this.y-3});this.viewport.spawn.add({object:t}),t.args.falling=!0,t.args.xSpeed=6*(-.5+Math.random()),t.args.ySpeed=-7}s(u(p.prototype),"break",this).call(this),this.viewport.onTimeout(1e3,()=>{this.viewport&&this.viewport.actors.remove(this)})}}}])&&a(e.prototype,r),n&&a(e,n),Object.defineProperty(e,"prototype",{writable:!1}),p}();t.ChaoCrate=f}),require.register("actor/ChaoDetailer.js",function(t,e,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ChaoDetailer=void 0;var n=e("./Block"),i=e("./Chao");function o(t){"@babel/helpers - typeof";return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function a(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,i,o,a,s=[],c=!0,l=!1;try{if(o=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=o.call(r)).done)&&(s.push(n.value),s.length!==e);c=!0);}catch(t){l=!0,i=t}finally{try{if(!c&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(l)throw i}}return s}}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return s(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return s(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function s(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function c(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,g(n.key),n)}}function l(){return(l="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=h(t)););return t}(t,e);if(n){var i=Object.getOwnPropertyDescriptor(n,e);return i.get?i.get.call(arguments.length<3?t:r):i.value}}).apply(this,arguments)}function u(t,e){return(u=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function f(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=h(t);if(e){var i=h(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===o(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return p(t)}(this,r)}}function p(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function h(t){return(h=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function g(t){var e=function(t,e){if("object"!==o(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==o(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===o(e)?e:String(e)}let d=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&u(t,e)}(d,n.Block);var e,r,o,s=f(d);function d(){var t,e,r,n;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,d);for(var i=arguments.length,o=new Array(i),a=0;a<i;a++)o[a]=arguments[a];return t=s.call(this,...o),e=p(t),r="chaoStats",n=new WeakMap,(r=g(r))in e?Object.defineProperty(e,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[r]=n,t}return e=d,(r=[{key:"updateEnd",value:function(){let t=!1;if(this.viewport.collisions.has(this))for(const r of this.viewport.collisions.get(this)){var e=a(r,2);const n=e[0];0===e[1]&&(n.args.falling||n instanceof i.Chao&&(this.viewport.args.quickForm=JSON.stringify({name:n.args.name,alignment:n.args.alignment},null,4)+"\n"+JSON.stringify(n.mood,null,4)+"\n"+JSON.stringify(n.traits,null,4)+"\n"+JSON.stringify(n.stats,null,4),n.args.currentState="waiting",t=!0))}t||(this.viewport.args.quickForm=null),l(h(d.prototype),"update",this).call(this)}}])&&c(e.prototype,r),o&&c(e,o),Object.defineProperty(e,"prototype",{writable:!1}),d}();t.ChaoDetailer=d}),require.register("actor/Chopper.js",function(t,e,r){"use strict";function n(t){"@babel/helpers - typeof";return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(t,"__esModule",{value:!0}),t.Chopper=void 0;var i=e("./PointActor"),o=e("curvature/base/Tag"),a=e("curvature/base/Mixin"),s=e("../audio/Sfx"),c=e("./AirBomb"),l=e("./ChainShot"),u=e("./EggCapsule"),f=e("./SkateBoard");e("../intro/TitleScreenCard");function p(t,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,(o=i.key,void 0,"symbol"===n(a=function(t,e){if("object"!==n(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var i=r.call(t,e||"default");if("object"!==n(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(o,"string"))?a:String(a)),i)}var o,a}function h(){return(h="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=y(t)););return t}(t,e);if(n){var i=Object.getOwnPropertyDescriptor(n,e);return i.get?i.get.call(arguments.length<3?t:r):i.value}}).apply(this,arguments)}function g(t,e){return(g=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function d(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,i=y(t);if(e){var o=y(this).constructor;r=Reflect.construct(i,arguments,o)}else r=i.apply(this,arguments);return function(t,e){if(e&&("object"===n(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function y(t){return(y=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}let b=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&g(t,e)}(v,a.Mixin.from(i.PointActor));var e,r,n,b=d(v);function v(){var t;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,v);for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];return(t=b.call(this,...r)).args.type="actor-item actor-chopper",t.args.width=80,t.args.height=48,t.args.gravity=.25,t.args.float=-1,t.args.direction=1,t.exploded=!1,t.explosions=new Set,t.contains=new Set,t.args.xSpeed=8,t.args.ySpeed=6,t.args.attacker=t.args.attacker||!1,t.args.color=3,t.playingSound=!1,t.activated=!1,t.targetPoint=[0,0],t.damageTimer=0,t.args.attacker&&(t.args.hitPoints=8),t.bombs=new Set,t.bombCount=0,t}return e=v,(r=[{key:"collideA",value:function(t,e){if(!this.damageTimer&&this.args.attacker&&(t.args.jumping||t.args.rolling)){const e=.5*(t.args.xSpeed+this.args.xSpeed);s.Sfx.play("BOSS_DAMAGED"),this.damageTimer=30,this.args.hitPoints--,t.args.xSpeed=e,t.args.ySpeed*=-1,t.args.ySpeed>0&&(t.args.ySpeed=-3),this.args.hitPoints<=0?(this.destroy(),this.noClip=!0,viewport.onFrameOut(60,()=>{viewport.actors.remove(this),viewport.onFrameOut(60,()=>{const e=new u.EggCapsule({x:t.args.x,y:t.args.y-384,xSpeed:t.args.gSpeed||t.args.xSpeed});viewport.spawn.add({object:e})})})):this.args.xSpeed=0}}},{key:"onRendered",value:function(t){h(y(v.prototype),"onRendered",this).call(this,t),this.autoStyle.get(this.box)["--color"]="color"}},{key:"update",value:function(){this.damageTimer?this.args.type="actor-item actor-chopper actor-chopper-damaged":this.args.type="actor-item actor-chopper",this.args.attacker?this.damageTimer>0&&this.damageTimer--:this.introUpdate()}},{key:"updateEnd",value:function(){this.args.attacker?this.attackUpdate():h(y(v.prototype),"updateEnd",this).call(this);for(const t of this.bombs)t.args.x=this.args.x+t.xOffset}},{key:"introUpdate",value:function(){if(this.viewport.currentMap===this.mapUrl){if(this.viewport.controlActor&&this.contains.add(this.viewport.controlActor),this.viewport.controlActor){this.viewport.controlActor}this.args.ySpeed>-4&&(this.args.ySpeed-=.025);for(const t of this.explosions)t.style({"--x":this.args.x+t.x*this.args.direction,"--y":this.args.y});if(this.exploded)return this.args.float&&(s.Sfx.stop("COPTER_SPIN",!1),this.viewport.onFrameOut(120,()=>s.Sfx.play("RADIO_CHATTER_1")),this.args.float=0),void h(y(v.prototype),"update",this).call(this);!this.playingSound&&this.viewport.args.audio,this.viewport.args.frameId-this.playingSound>10&&(this.playingSound=this.viewport.args.frameId,s.Sfx.play("COPTER_SPIN",{}));for(const t of this.contains)t.args.float=-1,t.args.x=this.args.x,t.args.y=this.args.y,t.args.hidden=!0,t.args.xSpeed=this.args.xSpeed,t.args.ySpeed=this.args.ySpeed;if(h(y(v.prototype),"update",this).call(this),this.viewport&&this.age&&this.age%300==0){const t=document.createElement("div");t.classList.add("particle-huge-explosion");const e=new o.Tag(t);e.style({"--x":this.args.x+18*this.args.direction,"--y":this.args.y-16}),s.Sfx.play("OBJECT_DESTROYED");const r=this.viewport;this.viewport.onFrameOut(200,()=>{r.actors.remove(this)}),this.viewport.onFrameOut(10,()=>{this.noClip=!0,this.args.xSpeed*=.5,this.args.ySpeed=2,this.args.gravity=.35;for(const t of this.contains)t.args.ySpeed=-12,t.args.xSpeed=0,t.args.hidden=!1,t.args.float=0}),this.args.animation="exploded",e.x=18,this.explosions.add(e),this.exploded=!0,this.viewport.particles.add(e),this.viewport.onFrameOut(30,()=>{r.particles.remove(e),this.explosions.delete(e)});const n=new f.SkateBoard({x:this.args.x,y:this.args.y,ySpeed:-10,xSpeed:4*Math.sign(this.args.xSpeed),groundAngle:Math.PI/4,ignore:-2});this.viewport.controlActor.args.standingOn=n,this.viewport.spawn.add({object:n})}if(this.viewport&&this.age&&this.age%290==0){const t=document.createElement("div");t.classList.add("particle-huge-explosion");const e=new o.Tag(t);this.explosions.add(e),e.style({"--x":this.args.x+36*this.args.direction,"--y":this.args.y-32}),e.x=36,s.Sfx.play("OBJECT_DESTROYED"),this.viewport.particles.add(e),this.viewport.onFrameOut(30,()=>viewport.particles.remove(e))}if(this.viewport&&this.age&&this.age%295==0){const t=document.createElement("div");t.classList.add("particle-huge-explosion");const e=new o.Tag(t);this.explosions.add(e),e.style({"--x":this.args.x+0*this.args.direction,"--y":this.args.y-24}),e.x=0,s.Sfx.play("OBJECT_DESTROYED"),this.viewport.particles.add(e),this.viewport.onFrameOut(30,()=>viewport.particles.remove(e))}this.args.falling=!0}}},{key:"attackUpdate",value:function(){if(this.args.hitPoints<=0)return this.args.falling=!0,this.args.float=0,h(y(v.prototype),"update",this).call(this),void h(y(v.prototype),"updateEnd",this).call(this);this.args.groundAngle=0;const t=this.viewport.controlActor;if(!this.playingSound&&this.viewport.args.audio,this.viewport.args.frameId-this.playingSound>10&&(this.playingSound=this.viewport.args.frameId,s.Sfx.play("COPTER_SPIN",{})),0!==t.args.mode)return h(y(v.prototype),"update",this).call(this),void h(y(v.prototype),"updateEnd",this).call(this);if(!this.activated){if(t.args.x>this.args.x+64){const t=this.viewport.controlActor;this.args.xSpeed=t.args.gSpeed||t.args.xSpeed,this.viewport.auras.add(this),this.activated=this.viewport.args.frameId}return h(y(v.prototype),"update",this).call(this),void h(y(v.prototype),"updateEnd",this).call(this)}if(this.chainShot||(this.chainShot=new l.ChainShot,this.viewport.spawn.add({object:this.chainShot}),this.chainShot.args.x=this.args.x,this.chainShot.args.y=this.args.y),t.dashed)return h(y(v.prototype),"update",this).call(this),h(y(v.prototype),"updateEnd",this).call(this),void(this.chainShot.args.animation="idle");const e=this.viewport.args.frameId-this.activated;e>120?Math.floor(e/240)%2==0?this.bombModeUpdate():this.gunModeUpdate():this.initModeUpdate()}},{key:"initModeUpdate",value:function(){const t=this.viewport.controlActor;if(this.chainShot&&(this.chainShot.args.animation="idle"),!this.viewport||!this.viewport.controlActor||this.damageTimer)return this.damageTimer&&(this.args.xSpeed=0,this.args.ySpeed=0),h(y(v.prototype),"update",this).call(this),h(y(v.prototype),"updateEnd",this).call(this),void this.lockPosition();(Math.abs(t.args.gSpeed)>4||t.args.falling)&&(this.targetPoint[0]=t.args.x+(-0-Math.min(64,Math.abs(4*t.args.gSpeed)))*Math.sign(t.args.gSpeed),this.targetPoint[1]=t.args.y+-128);t.args.x<this.args.x?this.args.facing="left":this.args.facing="right",this.args.xSpeed=1*Math.min(25,Math.abs(.35*(this.args.x-this.targetPoint[0])))*-Math.sign(this.args.x-this.targetPoint[0]),this.args.ySpeed=1*Math.min(25,Math.abs(.1*(this.args.y-this.targetPoint[1])))*-Math.sign(this.args.y-this.targetPoint[1]),this.args.falling=!0,this.args.direction="left"===this.args.facing?-1:1,h(y(v.prototype),"update",this).call(this),h(y(v.prototype),"updateEnd",this).call(this),this.lockPosition()}},{key:"gunModeUpdate",value:function(){const t=this.viewport.controlActor;if(t.args.dead)return this.args.xSpeed=0,this.args.ySpeed=0,h(y(v.prototype),"update",this).call(this),h(y(v.prototype),"updateEnd",this).call(this),this.fireChaingun(),void(this.chainShot.args.animation="shooting");if(!this.viewport||!this.viewport.controlActor||this.damageTimer)return this.damageTimer&&(this.args.xSpeed=0,this.args.ySpeed=0,this.chainShot.args.animation="idle"),h(y(v.prototype),"update",this).call(this),h(y(v.prototype),"updateEnd",this).call(this),this.lockPosition(),void(this.chainShot.args.animation="idle");(Math.abs(t.args.gSpeed)>4||t.args.falling)&&(this.targetPoint[0]=t.args.x+(-96-Math.min(64,Math.abs(4*t.args.gSpeed)))*Math.sign(t.args.gSpeed),this.targetPoint[1]=t.args.y+(-40-Math.min(0,Math.abs(t.args.gSpeed))));let e=1;t.args.jumping&&Math.abs(t.args.xSpeed)<15&&Math.sign(t.args.xSpeed)===Math.sign(this.args.x-t.args.x)&&(console.log(Math.sign(t.args.xSpeed),Math.sign(this.args.x-t.args.x)),e=.25),t.args.x<this.args.x?this.args.facing="left":this.args.facing="right",this.args.xSpeed=e*Math.min(25,Math.abs(.35*(this.args.x-this.targetPoint[0])))*-Math.sign(this.args.x-this.targetPoint[0]),this.args.ySpeed=e*Math.min(25,Math.abs(.2*(this.args.y-this.targetPoint[1])))*-Math.sign(this.args.y-this.targetPoint[1]),this.args.falling=!0,this.args.direction="left"===this.args.facing?-1:1,h(y(v.prototype),"update",this).call(this),h(y(v.prototype),"updateEnd",this).call(this),this.lockPosition(),Math.abs(t.args.y-this.args.y)<48&&!t.args.falling?(this.fireChaingun(),this.chainShot.args.animation="shooting"):this.chainShot.args.animation="idle"}},{key:"bombModeUpdate",value:function(){const t=this.viewport.controlActor;if(this.chainShot&&(this.chainShot.args.animation="idle"),!this.viewport||!this.viewport.controlActor||this.damageTimer)return this.damageTimer&&(this.args.xSpeed=0,this.args.ySpeed=0),h(y(v.prototype),"update",this).call(this),h(y(v.prototype),"updateEnd",this).call(this),void this.lockPosition();(Math.abs(t.args.gSpeed)>4||t.args.falling)&&(this.targetPoint[0]=t.args.x+(-0-Math.min(64,Math.abs(4*t.args.gSpeed)))*Math.sign(t.args.gSpeed),this.targetPoint[1]=t.args.y+-128);if(t.args.x<this.args.x?this.args.facing="left":this.args.facing="right",this.args.xSpeed=1*Math.min(25,Math.abs(.35*(this.args.x-this.targetPoint[0])))*-Math.sign(this.args.x-this.targetPoint[0]),this.args.ySpeed=1*Math.min(25,Math.abs(.1*(this.args.y-this.targetPoint[1])))*-Math.sign(this.args.y-this.targetPoint[1]),this.args.falling=!0,this.viewport.args.frameId%30==0){const t=16*Math.sign(this.args.direction)+16*(this.bombCount%2-.5),e=new c.AirBomb({x:this.args.x+t,y:this.args.y,xSpeed:this.args.xSpeed,ySpeed:this.args.ySpeed});this.bombCount++,e.xOffset=t,this.bombs.add(e),this.viewport.spawn.add({object:e})}this.args.direction="left"===this.args.facing?-1:1,h(y(v.prototype),"update",this).call(this),h(y(v.prototype),"updateEnd",this).call(this),this.lockPosition()}},{key:"fireChaingun",value:function(){this.args.direction=this.args.direction||Math.sign(this.xSpeedLast);const t=56*Math.sign(this.args.direction);this.chainShot.args.x=this.args.x+t,this.chainShot.args.y=this.args.y+0,this.chainShot.args.xSpeed=this.args.xSpeed,this.chainShot.args.ySpeed=this.args.ySpeed,this.viewport.setColCell(this.chainShot),this.args.direction>0?this.chainShot.args.groundAngle=-.65*Math.PI:this.chainShot.args.groundAngle=.65*Math.PI,this.chainShot.args.shooting=!0;const e=this.chainShot.castRayQuick(786,.5*-Math.PI-this.chainShot.args.groundAngle);this.chainShot.args.shooting=!1,this.chainShot.args.height=e||786}},{key:"lockPosition",value:function(){{const t=this.args.x-this.targetPoint[0],e=Math.abs(t),r=Math.sign(t);e>386&&(this.args.x=this.targetPoint[0]+386*r)}{const t=this.args.y-this.targetPoint[1],e=Math.abs(t),r=Math.sign(t);e>386&&(this.args.y=this.targetPoint[1]+386*r)}}},{key:"destroy",value:function(){const t=this.viewport;s.Sfx.stop("COPTER_SPIN",!1),t.onFrameOut(20,()=>{const e=document.createElement("div");e.classList.add("particle-huge-explosion");const r=new o.Tag(e);r.style({"--x":this.args.x+18*this.args.direction,"--y":this.args.y-16}),s.Sfx.play("OBJECT_DESTROYED"),this.args.animation="exploded",r.x=18,this.explosions.add(r),this.exploded=!0,t.particles.add(r),t.onFrameOut(30,()=>{t.particles.remove(r),this.explosions.delete(r)}),t.controlActor.cofocused=null}),t.onFrameOut(0,()=>{const e=document.createElement("div");e.classList.add("particle-huge-explosion");const r=new o.Tag(e);this.explosions.add(r),r.style({"--x":this.args.x+36*this.args.direction,"--y":this.args.y-32}),r.x=36,s.Sfx.play("OBJECT_DESTROYED"),t.particles.add(r),t.onFrameOut(30,()=>t.particles.remove(r))}),t.onFrameOut(10,()=>{const e=document.createElement("div");e.classList.add("particle-huge-explosion");const r=new o.Tag(e);this.explosions.add(r),r.style({"--x":this.args.x+0*this.args.direction,"--y":this.args.y-24}),r.x=0,s.Sfx.play("OBJECT_DESTROYED"),t.particles.add(r),t.onFrameOut(30,()=>t.particles.remove(r))})}}])&&p(e.prototype,r),n&&p(e,n),Object.defineProperty(e,"prototype",{writable:!1}),v}();t.Chopper=b}),require.register("actor/Cinematic.js",function(t,e,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Cinematic=void 0;var n=e("./PointActor");function i(t){"@babel/helpers - typeof";return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function o(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,p(n.key),n)}}function a(){return(a="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=u(t)););return t}(t,e);if(n){var i=Object.getOwnPropertyDescriptor(n,e);return i.get?i.get.call(arguments.length<3?t:r):i.value}}).apply(this,arguments)}function s(t,e){return(s=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function c(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=u(t);if(e){var o=u(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===i(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return l(t)}(this,r)}}function l(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function u(t){return(u=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function f(t,e,r){return(e=p(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function p(t){var e=function(t,e){if("object"!==i(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==i(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===i(e)?e:String(e)}let h=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&s(t,e)}(h,n.PointActor);var e,r,i,p=c(h);function h(t,e){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,h),f(l(r=p.call(this,t,e)),"noClip",!0),f(l(r),"panSpeed",9),r.args.isGhost=!0,r.args.float=-1,r.target=null,r.targets=[[250,6500],[5900,6600],[250,6500],[7700,7800],[6800,4200],[6800,4200],[8e3,4300],[1450,1800]],r}return e=h,(r=[{key:"setCameraMode",value:function(){this.args.cameraMode="cinematic"}},{key:"update",value:function(){if(a(u(h.prototype),"update",this).call(this),!this.args.selected)return;if(!this.target||this.x===this.target[0]&&this.y===this.target[1])return this.targets.length||this.remove(),void(this.target=this.targets.shift());const t=this.target;if(this.x!==t[0]){const e=t[0]-this.x;this.args.x+=Math.sign(e)*this.panSpeed,Math.abs(e)<this.panSpeed&&(this.args.x=t[0])}if(this.y!==t[1]){const e=t[1]-this.y;this.args.y+=Math.sign(e)*this.panSpeed,Math.abs(e)<this.panSpeed&&(this.args.y=t[1])}}},{key:"controllable",get:function(){return!0}}])&&o(e.prototype,r),i&&o(e,i),Object.defineProperty(e,"prototype",{writable:!1}),h}();t.Cinematic=h}),require.register("actor/Coconut.js",function(t,e,r){"use strict";function n(t){"@babel/helpers - typeof";return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(t,"__esModule",{value:!0}),t.Coconut=void 0;var i=e("./PointActor");function o(t,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,(o=i.key,void 0,"symbol"===n(a=function(t,e){if("object"!==n(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var i=r.call(t,e||"default");if("object"!==n(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(o,"string"))?a:String(a)),i)}var o,a}function a(){return(a="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=u(t)););return t}(t,e);if(n){var i=Object.getOwnPropertyDescriptor(n,e);return i.get?i.get.call(arguments.length<3?t:r):i.value}}).apply(this,arguments)}function s(t,e){return(s=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function c(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,i=u(t);if(e){var o=u(this).constructor;r=Reflect.construct(i,arguments,o)}else r=i.apply(this,arguments);return function(t,e){if(e&&("object"===n(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return l(t)}(this,r)}}function l(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function u(t){return(u=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}let f=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&s(t,e)}(p,i.PointActor);var e,r,n,f=c(p);function p(){var t;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,p);for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];return(t=f.call(this,...r)).args.type="actor-item actor-coconut",t.args.width=12,t.args.height=13,t.args.size=4,t.args.nourishment=.05,t.bindTo("carriedBy",e=>{if(t.cX&&(t.cX(),t.cX=null),t.cY&&(t.cY(),t.cY=null),t.carriedBy){const e=t.carriedBy;t.carriedBy=null,t.args.xSpeed=e.args.xSpeed,t.args.ySpeed=e.args.falling?e.args.ySpeed:0,t.args.xSpeed+=4*Math.sign(e.args.gSpeed||e.args.xSpeed),t.args.ySpeed-=4,e.carrying.delete(l(t)),t.args.falling=!0,t.args.float=0}e&&(t.cX=e.args.bindTo("x",r=>t.args.x=r+e.args.direction*e.xHold),t.cY=e.args.bindTo("y",r=>t.args.y=r+-e.yHold),t.args.xSpeed=0,t.args.ySpeed=0,e.carrying.add(l(t)),t.args.float=-1)}),t}return e=p,(r=[{key:"onRendered",value:function(t){a(u(p.prototype),"onRendered",this).call(this,t),this.autoStyle.get(this.box)["--size"]="size"}},{key:"lift",value:function(t){this.carriedBy!==t?this.carriedBy=t:this.carriedBy=null}},{key:"solid",get:function(){return!1}},{key:"rotateLock",get:function(){return!0}},{key:"sleep",value:function(){this.carriedBy||this.viewport&&this.viewport.actors.remove(this)}}])&&o(e.prototype,r),n&&o(e,n),Object.defineProperty(e,"prototype",{writable:!1}),p}();t.Coconut=f}),require.register("actor/Coin.js",function(t,e,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Coin=void 0;var n=e("./PointActor");function i(t){"@babel/helpers - typeof";return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function o(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,f(n.key),n)}}function a(){return(a="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=u(t)););return t}(t,e);if(n){var i=Object.getOwnPropertyDescriptor(n,e);return i.get?i.get.call(arguments.length<3?t:r):i.value}}).apply(this,arguments)}function s(t,e){return(s=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function c(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=u(t);if(e){var o=u(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===i(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return l(t)}(this,r)}}function l(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function u(t){return(u=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function f(t){var e=function(t,e){if("object"!==i(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==i(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===i(e)?e:String(e)}let p=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&s(t,e)}(h,n.PointActor);var e,r,i,p=c(h);function h(){var t,e,r,n;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,h);for(var i=arguments.length,o=new Array(i),a=0;a<i;a++)o[a]=arguments[a];return t=p.call(this,...o),e=l(t),n=-1,(r=f(r="float"))in e?Object.defineProperty(e,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[r]=n,t.args.type="actor-item actor-coin",t.args.width=32,t.args.height=32,t.args.gone=!1,t}return e=h,(r=[{key:"update",value:function(){a(u(h.prototype),"update",this).call(this),this.viewport.args.audio&&!this.sample&&(this.sample=new Audio("/mario/smw_coin.wav"),this.sample.volume=1)}},{key:"collideA",value:function(t){if(a(u(h.prototype),"collideA",this).call(this,t),!this.args.gone){if(this.args.type="actor-item actor-coin collected",!this.args.gone){this.viewport.args.audio&&this.sample&&this.sample.play(),this.viewport.onFrameOut(40,()=>{this.args.type="actor-item actor-coin collected gone"}),this.viewport.onFrameOut(80,()=>{this.viewport.actors.remove(this),this.remove()});this.x,this.y;t.args.owner?t.args.owner.args.coins+=1:t.occupant?t.occupant.args.coins+=1:t.args.coins+=1}this.args.gone=!0}}},{key:"solid",get:function(){return!1}},{key:"isEffect",get:function(){return!0}}])&&o(e.prototype,r),i&&o(e,i),Object.defineProperty(e,"prototype",{writable:!1}),h}();t.Coin=p}),require.register("actor/CompanionBlock.js",function(t,e,r){"use strict";function n(t){"@babel/helpers - typeof";return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(t,"__esModule",{value:!0}),t.CompanionBlock=void 0;var i=e("./MarbleBlock"),o=e("../region/LavaRegion"),a=e("../audio/Sfx"),s=e("../lib/Analytic");function c(t,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,(o=i.key,void 0,"symbol"===n(a=function(t,e){if("object"!==n(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var i=r.call(t,e||"default");if("object"!==n(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(o,"string"))?a:String(a)),i)}var o,a}function l(){return(l="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=p(t)););return t}(t,e);if(n){var i=Object.getOwnPropertyDescriptor(n,e);return i.get?i.get.call(arguments.length<3?t:r):i.value}}).apply(this,arguments)}function u(t,e){return(u=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function f(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,i=p(t);if(e){var o=p(this).constructor;r=Reflect.construct(i,arguments,o)}else r=i.apply(this,arguments);return function(t,e){if(e&&("object"===n(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function p(t){return(p=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}let h=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&u(t,e)}(g,i.MarbleBlock);var e,r,n,h=f(g);function g(){var t;let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,g),(t=h.call(this,e)).args.type="actor-item actor-marble-companion-block",t.played=!1,t.args.density=t.args.density||10,t}return e=g,(r=[{key:"collideA",value:function(t,e){return this.args.falling&&t.y>8+this.y+-this.args.height||this.args.falling&&t.y>this.y-this.args.height||this.args.falling&&t.args.modeTime<3&&(t.args.gSpeed=0),l(p(g.prototype),"collideA",this).call(this,t,e)}},{key:"update",value:function(){this.args.x;let t=!1;const e=this.viewport.regionsAtPoint(this.args.x,this.args.y);let r=0,n=null;for(const i of e)i.args.density>r&&(r=i.args.density,n=i),this.args.y=Math.round(this.args.y),i instanceof o.LavaRegion&&(t=!0,this.played||(this.args.type="actor-item actor-marble-companion-block actor-marble-companion-block-dying",this.viewport.onFrameOut(80,()=>{this.args.type="actor-item actor-marble-companion-block actor-marble-companion-block-dead",a.Sfx.play("PLAYER_DAMAGED")}),"function"==typeof ga&&s.Analytic.report({eventCategory:"companion-block",eventAction:"pushed",eventLabel:`${this.viewport.args.actName}::${this.args.id}`}),this.played=!0));if(n&&r&&this.args.density){const t=this.args.y,e=n.args.y+-n.args.height,i=Math.min(this.args.height,t-e),o=this.args.gravity*(r/this.args.density)*(i/this.args.height);this.args.ySpeed-=o,this.args.falling||(this.args.y--,this.args.falling=!0)}l(p(g.prototype),"update",this).call(this),t&&(this.fallTime<100?this.args.xSpeed=0:this.args.xSpeed=Math.sign(this.gSpeedLast||this.xSpeedLast))}},{key:"sleep",value:function(){this.args.x=this.def.get("x"),this.args.y=this.def.get("y"),this.onNextFrame(()=>{this.args.x=this.def.get("x"),this.args.y=this.def.get("y"),this.viewport.setColCell(this),this.args.xSpeed=0,this.args.ySpeed=0,this.args.pushed=0,this.args.float=0})}}])&&c(e.prototype,r),n&&c(e,n),Object.defineProperty(e,"prototype",{writable:!1}),g}();t.CompanionBlock=h}),require.register("actor/Cone.js",function(t,e,r){"use strict";function n(t){"@babel/helpers - typeof";return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(t,"__esModule",{value:!0}),t.Cone=void 0;var i=e("./PointActor");function o(t,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,(o=i.key,void 0,"symbol"===n(a=function(t,e){if("object"!==n(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var i=r.call(t,e||"default");if("object"!==n(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(o,"string"))?a:String(a)),i)}var o,a}function a(t,e){return(a=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function s(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,i=c(t);if(e){var o=c(this).constructor;r=Reflect.construct(i,arguments,o)}else r=i.apply(this,arguments);return function(t,e){if(e&&("object"===n(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function c(t){return(c=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}let l=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&a(t,e)}(l,i.PointActor);var e,r,n,c=s(l);function l(){var t;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,l);for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];return(t=c.call(this,...r)).args.width=16,t.args.height=32,t.args.type="actor-item actor-cone",t}return e=l,(r=[{key:"solid",get:function(){return!1}}])&&o(e.prototype,r),n&&o(e,n),Object.defineProperty(e,"prototype",{writable:!1}),l}();t.Cone=l}),require.register("actor/CrabMeat.js",function(t,e,r){"use strict";function n(t){"@babel/helpers - typeof";return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(t,"__esModule",{value:!0}),t.CrabMeat=void 0;e("./Flickie");var i=e("curvature/base/Mixin"),o=(e("curvature/base/Tag"),e("./PointActor")),a=e("../behavior/SkidDust"),s=e("../behavior/Patrol"),c=e("../mixin/CanPop"),l=(e("../actor/Explosion"),e("../actor/Projectile"));function u(t,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,(o=i.key,void 0,"symbol"===n(a=function(t,e){if("object"!==n(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var i=r.call(t,e||"default");if("object"!==n(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(o,"string"))?a:String(a)),i)}var o,a}function f(){return(f="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=g(t)););return t}(t,e);if(n){var i=Object.getOwnPropertyDescriptor(n,e);return i.get?i.get.call(arguments.length<3?t:r):i.value}}).apply(this,arguments)}function p(t,e){return(p=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function h(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,i=g(t);if(e){var o=g(this).constructor;r=Reflect.construct(i,arguments,o)}else r=i.apply(this,arguments);return function(t,e){if(e&&("object"===n(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function g(t){return(g=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}let d=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&p(t,e)}(y,i.Mixin.from(o.PointActor,c.CanPop));var e,r,n,d=h(y);function y(){var t;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,y);for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];return(t=d.call(this,...r)).behaviors.add(new a.SkidDust),t.behaviors.add(new s.Patrol),t.args.type="actor-item actor-crabmeat",t.args.animation="standing",t.args.accel=.1,t.args.decel=.5,t.args.gSpeedMax=5,t.args.jumpForce=5,t.args.gravity=.5,t.args.width=32,t.args.height=32,t.willStick=!1,t.stayStuck=!1,t.args.patrolBeat=t.args.patrolBeat||90,t.args.patrolPause=t.args.patrolPause||25,t.args.patrolSpeed=t.args.patrolSpeed||.25,t.args.shotTelegraph=t.args.shotTelegraph||65,t}return e=y,(r=[{key:"update",value:function(){const t=this.args.direction;f(g(y.prototype),"update",this).call(this);const e=this.args.shotTelegraph,r=this.args.patrolBeat;if(this.box&&(Math.sign(this.args.gSpeed)!==t&&Math.abs(this.args.gSpeed-t)>5?this.box.setAttribute("data-animation","skidding"):this.args.moving&&this.args.gSpeed?this.box.setAttribute("data-animation","walking"):this.age%r<e||this.age%r>r-15?this.box.setAttribute("data-animation","shooting"):this.box.setAttribute("data-animation","standing")),this.age%r==r-3){const t=this.x+19,e=this.x+-19,r=this.y+-19,n=-1,i=-1.5,o=-3,a=this,s=new l.Projectile({x:t,y:r,z:n,owner:a}),c=new l.Projectile({x:e,y:r,z:n,owner:a});this.viewport.onFrameOut(3,()=>{Object.assign(s.args,{xSpeed:-i,ySpeed:o}),Object.assign(c.args,{xSpeed:i,ySpeed:o})}),this.viewport.spawn.add({object:s}),this.viewport.spawn.add({object:c})}}},{key:"effect",value:function(t){f(g(y.prototype),"effect",this).call(this,t)}},{key:"solid",get:function(){return!1}},{key:"isEffect",get:function(){return!1}}])&&u(e.prototype,r),n&&u(e,n),Object.defineProperty(e,"prototype",{writable:!1}),y}();t.CrabMeat=d}),require.register("actor/CrossCannon.js",function(t,e,r){"use strict";function n(t){"@babel/helpers - typeof";return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(t,"__esModule",{value:!0}),t.CrossCannon=void 0;var i=e("./PointActor"),o=e("curvature/base/Tag"),a=e("../audio/Sfx");function s(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,i,o,a,s=[],c=!0,l=!1;try{if(o=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=o.call(r)).done)&&(s.push(n.value),s.length!==e);c=!0);}catch(t){l=!0,i=t}finally{try{if(!c&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(l)throw i}}return s}}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return c(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return c(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function c(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function l(t,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,(o=i.key,void 0,"symbol"===n(a=function(t,e){if("object"!==n(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var i=r.call(t,e||"default");if("object"!==n(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(o,"string"))?a:String(a)),i)}var o,a}function u(){return(u="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=h(t)););return t}(t,e);if(n){var i=Object.getOwnPropertyDescriptor(n,e);return i.get?i.get.call(arguments.length<3?t:r):i.value}}).apply(this,arguments)}function f(t,e){return(f=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function p(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,i=h(t);if(e){var o=h(this).constructor;r=Reflect.construct(i,arguments,o)}else r=i.apply(this,arguments);return function(t,e){if(e&&("object"===n(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function h(t){return(h=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}let g=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&f(t,e)}(g,i.PointActor);var e,r,n,c=p(g);function g(){var t;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,g);for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];return(t=c.call(this,...r)).args.width=48,t.args.height=40,t.args.type="actor-item actor-cross-cannon",t.args.float=-1,t.args.power=t.args.power||20,t.holding=new Map,t.args.spinTime=0,t.args.minHold=9,t.args.grabbing=null,t}return e=g,(r=[{key:"onRendered",value:function(t){u(h(g.prototype),"onRendered",this).call(this,t),this.autoAttr.get(this.box)["data-firing"]="firing",this.autoAttr.get(this.box)["data-aiming"]="aiming",this.autoAttr.get(this.box)["data-grabbing"]="grabbing",this.barrelUp||(this.barrelUp=new o.Tag('<div class = "barrel barrel-up">'),this.box.appendChild(this.barrelUp.node)),this.barrelDown||(this.barrelDown=new o.Tag('<div class = "barrel barrel-down">'),this.box.appendChild(this.barrelDown.node)),this.barrelLeft||(this.barrelLeft=new o.Tag('<div class = "barrel barrel-left">'),this.box.appendChild(this.barrelLeft.node)),this.barrelRight||(this.barrelRight=new o.Tag('<div class = "barrel barrel-right">'),this.box.appendChild(this.barrelRight.node))}},{key:"collideA",value:function(t,e){if(!t.controllable)return;if(t.isVehicle&&(t=t.occupant),this.holding.has(t))return!1;t.args.x,t.args.y;if(t.args.falling||(t.args.falling=!0,t.args.float=1,t.args.y-=1),t.args.standingOn&&(t.args.standingOn=null,t.args.xSpeed=0,t.args.ySpeed=0),a.Sfx.play("SS_BWIP"),-1===e||e%2==0){Math.abs(t.args.x-this.args.x);return this.holding.set(t,this.viewport.args.frameId),t.args.xSpeed=0,t.args.ySpeed=0,t.args.float=-1,t.args.ignore=-1,!1}return!0}},{key:"dropDelay",value:function(t){let e=!1;return this.args.waitFor&&(e=this.viewport.actorsById[this.args.waitFor]),e?e.dropDelay(t):new Promise(t=>this.viewport.onFrameOut(240,()=>t()))}},{key:"update",value:function(){u(h(g.prototype),"update",this).call(this),this.holding.size||(this.args.spinTime=0);for(const e of this.holding){var t=s(e,2);const r=t[0],n=t[1],i=this.args.x+-4,o=-6+this.args.y,c=(i+-r.args.x)/6,l=(o+-r.args.y)/6,u=this.viewport.args.frameId-n;if(r.args.animation="jumping",Math.abs(r.args.y-o)<l?r.args.y=o:r.args.y+=l,Math.abs(r.args.x-i)<c?r.args.x=i:r.args.x+=c,r.args.groundAngle+=.05*-r.args.groundAngle,this.args.grabbing=u<5?"grabbing":u<10?"grabbed":null,r.canJump=!0,r.args.jumping=!1,r.willJump&&this.args.spinTime<this.args.minHold)return this.args.spinTime=0,void(this.args.aiming="");r.willJump&&this.args.aiming&&this.args.spinTime>=this.args.minHold&&(this.args.firing="firing",this.viewport.onFrameOut(6,()=>{this.args.firing="fired"}),this.viewport.onFrameOut(16,()=>{this.args.firing=""}),this.viewport.onFrameOut(24,()=>{this.args.aiming=""}),this.viewport.onFrameOut(6,()=>{this.args.aiming&&(a.Sfx.play("SPRING_SHOT"),this.holding.delete(r),r.args.jumping=!0,this.ignores.set(r,2),r.args.ignore=1,r.args.float=0,r.yAxis>0?r.args.ySpeed=this.args.power:r.yAxis<0?r.args.ySpeed=-this.args.power:r.xAxis>0?(r.args.xSpeed=this.args.power,r.args.ySpeed=0,r.args.float=8):r.xAxis<0&&(r.args.xSpeed=-this.args.power,r.args.ySpeed=0,r.args.float=8))})),this.args.spinTime>5?r.args.cameraMode="cross-cannon-quick":r.args.cameraMode="cross-cannon",r.yAxis>0?this.args.aiming="down":r.yAxis<0?this.args.aiming="up":r.xAxis>0?this.args.aiming="right":r.xAxis<0&&(this.args.aiming="left"),r.yAxis||r.xAxis?this.args.aiming&&(0===this.args.spinTime&&a.Sfx.play("QUICK_SLIDE"),this.args.spinTime++):(this.args.spinTime=0,this.args.aiming=""),this.args.spinTime===this.args.minHold&&this.args.aiming&&a.Sfx.play("PAD_BOUNCE")}}},{key:"wakeUp",value:function(){this.args.aiming=""}}])&&l(e.prototype,r),n&&l(e,n),Object.defineProperty(e,"prototype",{writable:!1}),g}();t.CrossCannon=g}),require.register("actor/Cursor.js",function(t,e,r){"use strict";function n(t){"@babel/helpers - typeof";return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(t,"__esModule",{value:!0}),t.Cursor=void 0;var i=e("./PointActor");function o(t,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,(o=i.key,void 0,"symbol"===n(a=function(t,e){if("object"!==n(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var i=r.call(t,e||"default");if("object"!==n(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(o,"string"))?a:String(a)),i)}var o,a}function a(t,e){return(a=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function s(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,i=c(t);if(e){var o=c(this).constructor;r=Reflect.construct(i,arguments,o)}else r=i.apply(this,arguments);return function(t,e){if(e&&("object"===n(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function c(t){return(c=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}let l=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&a(t,e)}(l,i.PointActor);var e,r,n,c=s(l);function l(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,l),c.apply(this,arguments)}return e=l,(r=[{key:"update",value:function(){}}])&&o(e.prototype,r),n&&o(e,n),Object.defineProperty(e,"prototype",{writable:!1}),l}();t.Cursor=l}),require.register("actor/CutScene.js",function(t,e,r){"use strict";function n(t){"@babel/helpers - typeof";return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(t,"__esModule",{value:!0}),t.CutScene=void 0;var i=e("./PointActor");function o(t,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,(o=i.key,void 0,"symbol"===n(a=function(t,e){if("object"!==n(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var i=r.call(t,e||"default");if("object"!==n(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(o,"string"))?a:String(a)),i)}var o,a}function a(t,e){return(a=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function s(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,i=c(t);if(e){var o=c(this).constructor;r=Reflect.construct(i,arguments,o)}else r=i.apply(this,arguments);return function(t,e){if(e&&("object"===n(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function c(t){return(c=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}let l=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&a(t,e)}(l,i.PointActor);var e,r,n,c=s(l);function l(){var t;let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=arguments.length>1?arguments[1]:void 0;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,l),t=c.call(this,e,r),e.src?t.fetcher=fetch(e.src).then(t=>t.json()):e.frames&&(t.fetcher=Promise.resolve(e.frames)),t.args.hidden=!0,t}return e=l,(r=[{key:"playSample",value:function(t){this.viewport.args.audio&&new Audio(t.source).play()}},{key:"activate",value:function(t,e){let r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(!t.controllable||t.args.falling&&!r)return;if("Sonic"!==t.args.canonical)return;const n=this.viewport;n&&!this.args.running&&(this.args.running=!0,t.args.gSpeed=0,n.args.cutScene=!0,t.controller.zero(),this.fetcher.then(e=>{let r=0;for(const i of e){const e=()=>{switch(i.event){case"dialog":n.showDialog(i.lines,i.classes);break;case"audio":this.playSample(i);break;case"face":t.args.direction=i.direction,t.args.facing=i.direction>0?"right":"left";break;case"input":i.axes&&t.controller.replay({axes:i.axes}),i.buttons&&t.controller.replay({buttons:i.buttons}),t.readInput();break;case"superdrop":t.dropDashCharge=30;break;case"clearAct":n.clearAct(i.message);break;case"clear":n.clearDialog();break;case"message":n.showCenterMessage(i.message);break;case"hide":n.hideCenterMessage(),n.hideDialog();break;case"wait":n.args.cutScene=!1,n.hideCenterMessage(),n.hideDialog()}};r?n.onFrameOut(r,e):e(),r+=i.time||0}}))}}])&&o(e.prototype,r),n&&o(e,n),Object.defineProperty(e,"prototype",{writable:!1}),l}();t.CutScene=l}),require.register("actor/Dish.js",function(t,e,r){"use strict";function n(t){"@babel/helpers - typeof";return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(t,"__esModule",{value:!0}),t.Dish=void 0;var i=e("./PointActor"),o=e("curvature/base/Mixin"),a=e("../mixin/CanPop");function s(t,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,(o=i.key,void 0,"symbol"===n(a=function(t,e){if("object"!==n(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var i=r.call(t,e||"default");if("object"!==n(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(o,"string"))?a:String(a)),i)}var o,a}function c(t,e){return(c=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function l(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,i=f(t);if(e){var o=f(this).constructor;r=Reflect.construct(i,arguments,o)}else r=i.apply(this,arguments);return function(t,e){if(e&&("object"===n(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function u(){return(u="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=f(t)););return t}(t,e);if(n){var i=Object.getOwnPropertyDescriptor(n,e);return i.get?i.get.call(arguments.length<3?t:r):i.value}}).apply(this,arguments)}function f(t){return(f=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}let p=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&c(t,e)}(h,o.Mixin.from(i.PointActor,a.CanPop));var e,r,n,p=l(h);function h(){var t;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,h);for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];return(t=p.call(this,...r)).args.width=46,t.args.height=50,t.args.type="actor-item actor-dish",t}return e=h,n=[{key:"fromDef",value:function(t){const e=u(f(h),"fromDef",this).call(this,t);return e.args.width=t.width,e.args.height=t.height,e}}],(r=[{key:"solid",get:function(){return!1}}])&&s(e.prototype,r),n&&s(e,n),Object.defineProperty(e,"prototype",{writable:!1}),h}();t.Dish=p}),require.register("actor/Dolphin.js",function(t,e,r){"use strict";function n(t){"@babel/helpers - typeof";return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(t,"__esModule",{value:!0}),t.Dolphin=void 0;var i=e("./PointActor"),o=e("curvature/base/Mixin");function a(t,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,(o=i.key,void 0,"symbol"===n(a=function(t,e){if("object"!==n(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var i=r.call(t,e||"default");if("object"!==n(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(o,"string"))?a:String(a)),i)}var o,a}function s(){return(s="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=u(t)););return t}(t,e);if(n){var i=Object.getOwnPropertyDescriptor(n,e);return i.get?i.get.call(arguments.length<3?t:r):i.value}}).apply(this,arguments)}function c(t,e){return(c=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function l(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,i=u(t);if(e){var o=u(this).constructor;r=Reflect.construct(i,arguments,o)}else r=i.apply(this,arguments);return function(t,e){if(e&&("object"===n(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function u(t){return(u=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}let f=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&c(t,e)}(p,o.Mixin.from(i.PointActor));var e,r,n,f=l(p);function p(){var t;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,p);for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];return(t=f.call(this,...r)).args.type="actor-item actor-dolphin",t.args.width=64,t.args.height=64,t.args.gravity=.4,t.noClip=!0,t.args.float=-1,t}return e=p,(r=[{key:"update",value:function(){if(!this.viewport||!this.viewport.controlActor)return;const t=this.viewport.controlActor;this.args.ySpeed<-4?this.args.type="actor-item actor-dolphin":this.args.type="actor-item actor-dolphin actor-dolphin-downward",!this.args.ySpeed&&this.args.x<-128+t.args.x&&(this.args.falling=!0,this.args.xSpeed=6+(t.args.xSpeed||t.args.gSpeed),this.args.ySpeed=-16,this.args.float=0),s(u(p.prototype),"update",this).call(this)}}])&&a(e.prototype,r),n&&a(e,n),Object.defineProperty(e,"prototype",{writable:!1}),p}();t.Dolphin=f}),require.register("actor/Door.js",function(t,e,r){"use strict";function n(t){"@babel/helpers - typeof";return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(t,"__esModule",{value:!0}),t.Door=void 0;var i=e("./PointActor");function o(t,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,(o=i.key,void 0,"symbol"===n(a=function(t,e){if("object"!==n(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var i=r.call(t,e||"default");if("object"!==n(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(o,"string"))?a:String(a)),i)}var o,a}function a(){return(a="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=l(t)););return t}(t,e);if(n){var i=Object.getOwnPropertyDescriptor(n,e);return i.get?i.get.call(arguments.length<3?t:r):i.value}}).apply(this,arguments)}function s(t,e){return(s=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function c(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,i=l(t);if(e){var o=l(this).constructor;r=Reflect.construct(i,arguments,o)}else r=i.apply(this,arguments);return function(t,e){if(e&&("object"===n(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function l(t){return(l=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}let u=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&s(t,e)}(f,i.PointActor);var e,r,n,u=c(f);function f(){var t;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,f);for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];return(t=u.call(this,...r)).behaviors.clear(),t.args.type="actor-item actor-door",t.args.width=32,t.args.height=64,t.args.opened=!1,t.args.opening=!1,t}return e=f,(r=[{key:"onRendered",value:function(){a(l(f.prototype),"onRendered",this).call(this,event),this.setAutoAttr("opening","data-opening"),this.setAutoAttr("opened","data-opened")}},{key:"open",value:function(t){t.controllable&&(this.others.waitFor&&this.others.waitFor.args.opened?this.args.opening=this.args.opened=!1:(this.args.opening=!0,this.viewport.onFrameOut(10,()=>this.args.opened=!0),this.viewport.onFrameOut(50,()=>this.args.opening=!1),this.viewport.onFrameOut(55,()=>this.args.opened=!1)))}},{key:"collideA",value:function(t,e){return this.args.opening?!this.args.opened:(this.args.opened||this.viewport.onFrameOut(20,()=>this.open(t)),!this.args.opened)}},{key:"sleep",value:function(){this.viewport&&(this.args.opening=this.args.opened=!1)}},{key:"solid",get:function(){return!this.args.opened}},{key:"rotateLock",get:function(){return!0}}])&&o(e.prototype,r),n&&o(e,n),Object.defineProperty(e,"prototype",{writable:!1}),f}();t.Door=u}),require.register("actor/DrainFly.js",function(t,e,r){"use strict";function n(t){"@babel/helpers - typeof";return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(t,"__esModule",{value:!0}),t.DrainFly=void 0;var i=e("./PointActor"),o=e("../behavior/Platformer"),a=e("curvature/base/Mixin"),s=e("../mixin/CanPop");function c(t,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,(o=i.key,void 0,"symbol"===n(a=function(t,e){if("object"!==n(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var i=r.call(t,e||"default");if("object"!==n(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(o,"string"))?a:String(a)),i)}var o,a}function l(){return(l="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=p(t)););return t}(t,e);if(n){var i=Object.getOwnPropertyDescriptor(n,e);return i.get?i.get.call(arguments.length<3?t:r):i.value}}).apply(this,arguments)}function u(t,e){return(u=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function f(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,i=p(t);if(e){var o=p(this).constructor;r=Reflect.construct(i,arguments,o)}else r=i.apply(this,arguments);return function(t,e){if(e&&("object"===n(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function p(t){return(p=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}let h=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&u(t,e)}(g,a.Mixin.from(i.PointActor,s.CanPop));var e,r,n,h=f(g);function g(t,e){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,g),(r=h.call(this,t,e)).args.type="actor-item actor-drainfly",r.args.width=16,r.args.height=16,r.args.float=-1,r.args.gravity=0,r.args.phase="idle",r}return e=g,(r=[{key:"update",value:function(){if(!this.viewport||!this.viewport.actorIsOnScreen(this))return;const t=this.viewport;l(p(g.prototype),"update",this).call(this);const e=t.controlActor;if(e){switch(this.args.phase){case"idle":this.args.alertTo=this.y-64,e.x+-this.x>-128&&(this.args.phase="alert");break;case"alert":this.y>this.args.alertTo?this.args.ySpeed--:(this.args.phase="attacking",this.args.y=this.args.alertTo,this.args.ySpeed=0);break;case"attacking":{const t=Math.sign(e.args.x+-this.args.x)||0,r=Math.sign(e.args.y+-this.args.y+-24)||0;this.args.xSpeed+=.2*t-Math.random()/10||0,this.args.ySpeed+=.5*r-Math.random()/10||0,Math.abs(this.args.xSpeed)>6&&(this.args.xSpeed=4*t),Math.abs(this.args.ySpeed)>8&&(this.args.ySpeed=4*r),this.bMap("checkBelow",this.x,this.y).get(o.Platformer)&&(this.args.falling=!0,this.args.ySpeed=-1,this.args.y-=1);break}}this.args.facing=this.args.xSpeed>0?"left":"right",this.args.float=-1}else this.args.phase="idle"}},{key:"solid",get:function(){return!1}},{key:"rotateLock",get:function(){return!0}}])&&c(e.prototype,r),n&&c(e,n),Object.defineProperty(e,"prototype",{writable:!1}),g}();t.DrainFly=h}),require.register("actor/DrillCar.js",function(t,e,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DrillCar=void 0;var n=e("./Vehicle"),i=e("curvature/base/Tag");function o(t){"@babel/helpers - typeof";return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function a(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,p(n.key),n)}}function s(){return(s="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=f(t)););return t}(t,e);if(n){var i=Object.getOwnPropertyDescriptor(n,e);return i.get?i.get.call(arguments.length<3?t:r):i.value}}).apply(this,arguments)}function c(t,e){return(c=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function l(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=f(t);if(e){var i=f(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===o(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return u(t)}(this,r)}}function u(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function f(t){return(f=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function p(t){var e=function(t,e){if("object"!==o(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==o(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===o(e)?e:String(e)}let h=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&c(t,e)}(g,n.Vehicle);var e,r,o,h=l(g);function g(){var t,e,r,n;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,g);for(var i=arguments.length,o=new Array(i),a=0;a<i;a++)o[a]=arguments[a];return t=h.call(this,...o),e=u(t),n=["Jump ⓿","Fly ⓿+⓿"],(r=p(r="instructions"))in e?Object.defineProperty(e,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[r]=n,t.args.type="actor-item actor-drill-car",t.args.width=38,t.args.height=48,t.removeTimer=null,t.args.gSpeedMax=26,t.args.decel=.3,t.args.accel=.75,t.args.seatHeight=34,t.args.skidTraction=.95,t.dustCount=0,t.args.particleScale=2,t}return e=g,(r=[{key:"onRendered",value:function(t){s(f(g.prototype),"onRendered",this).call(this,t),this.box=this.findTag("div"),this.sprite=this.findTag("div.sprite"),this.backSprite=new i.Tag('<div class = "sprite-back sprite">'),this.drill=new i.Tag('<div class = "drill-car-drill">'),this.seat=new i.Tag('<div class = "drill-car-seat">'),this.windsheild=new i.Tag('<div class = "drill-car-windsheild">'),this.copterCap=new i.Tag('<div class = "drill-car-copter-cap">'),this.copterBladeA=new i.Tag('<div class = "drill-car-copter-blade-a">'),this.copterBladeB=new i.Tag('<div class = "drill-car-copter-blade-b">'),this.frontWheelA=new i.Tag('<div class = "drill-car-tire drill-car-tire-front-a">'),this.frontWheelB=new i.Tag('<div class = "drill-car-tire drill-car-tire-front-b">'),this.backWheelA=new i.Tag('<div class = "drill-car-tire drill-car-tire-back-a">'),this.backWheelB=new i.Tag('<div class = "drill-car-tire drill-car-tire-back-b">'),this.sprite.appendChild(this.drill.node),this.backSprite.appendChild(this.copterCap.node),this.backSprite.appendChild(this.copterBladeA.node),this.backSprite.appendChild(this.copterBladeB.node),this.sprite.appendChild(this.windsheild.node),this.backSprite.appendChild(this.seat.node),this.sprite.appendChild(this.frontWheelA.node),this.backSprite.appendChild(this.frontWheelB.node),this.sprite.appendChild(this.backWheelA.node),this.backSprite.appendChild(this.backWheelB.node),this.box.appendChild(this.backSprite.node)}},{key:"update",value:function(){const t=this.args.falling;if(this.viewport.args.audio&&!this.flyingSound&&(this.flyingSound=new Audio("/Sonic/drill-car-copter.wav"),this.flyingSound.volume=.35+-.2*Math.random(),this.flyingSound.loop=!0),this.flyingSound&&(this.flyingSound.paused||(this.flyingSound.volume=.25+-.2*Math.random()),this.flyingSound.currentTime>.2&&(this.flyingSound.currentTime=0)),this.box){if(t)this.args.flying?this.box.setAttribute("data-animation","flying"):this.args.falling&&(this.flyingSound&&this.flyingSound.pause(),this.box.setAttribute("data-animation","jumping"));else{this.flyingSound&&this.flyingSound.pause();const t=this.args.direction,e=this.args.gSpeed,r=Math.abs(e),n=this.args.gSpeedMax;if(this.dustCount>0&&this.dustCount--,Math.sign(this.args.gSpeed)!==t&&Math.abs(this.args.gSpeed-t)>5){this.box.setAttribute("data-animation","skidding");const t=this.viewport,e=new i.Tag('<div class = "particle-dust">'),r=this.rotatePoint(this.args.gSpeed,0);e.style({"--x":r[0]+this.x,"--y":r[1]+this.y,"z-index":0,opacity:2*Math.random()});const n=new i.Tag('<div class = "particle-dust">'),o=this.rotatePoint(this.args.gSpeed+40*this.args.direction,0);n.style({"--x":o[0]+this.x,"--y":o[1]+this.y,"z-index":0,opacity:2*Math.random()}),t.particles.add(e),t.particles.add(n),setTimeout(()=>{t.particles.remove(e),t.particles.remove(n)},350)}else this.args.moving&&r>.75*n?this.box.setAttribute("data-animation","running"):this.args.moving&&r?this.box.setAttribute("data-animation","walking"):this.box.setAttribute("data-animation","standing")}0==this.args.copterCoolDown?this.args.ySpeed>5&&(this.flyingSound&&this.flyingSound.pause(),this.args.flying=!1):this.args.copterCoolDown>0&&this.args.copterCoolDown--,s(f(g.prototype),"update",this).call(this)}else s(f(g.prototype),"update",this).call(this)}},{key:"command_0",value:function(){if(!this.args.falling)return this.args.copterCoolDown=15,void s(f(g.prototype),"command_0",this).call(this);this.args.copterCoolDown>0||this.args.ySpeed>-16&&(this.args.flying||this.flyingSound&&this.flyingSound.play(),this.args.flying=!0,0==this.args.copterCoolDown&&(this.args.copterCoolDown=7),this.args.ySpeed=-1,this.args.ySpeed=-4,this.args.float=8)}},{key:"sleep",value:function(){this.flyingSound&&this.flyingSound.pause()}},{key:"solid",get:function(){return!this.occupant}}])&&a(e.prototype,r),o&&a(e,o),Object.defineProperty(e,"prototype",{writable:!1}),g}();t.DrillCar=h}),require.register("actor/DropCage.js",function(t,e,r){"use strict";function n(t){"@babel/helpers - typeof";return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(t,"__esModule",{value:!0}),t.DropCage=void 0;var i=e("./PointActor");function o(t,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,(o=i.key,void 0,"symbol"===n(a=function(t,e){if("object"!==n(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var i=r.call(t,e||"default");if("object"!==n(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(o,"string"))?a:String(a)),i)}var o,a}function a(){return(a="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=l(t)););return t}(t,e);if(n){var i=Object.getOwnPropertyDescriptor(n,e);return i.get?i.get.call(arguments.length<3?t:r):i.value}}).apply(this,arguments)}function s(t,e){return(s=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function c(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,i=l(t);if(e){var o=l(this).constructor;r=Reflect.construct(i,arguments,o)}else r=i.apply(this,arguments);return function(t,e){if(e&&("object"===n(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function l(t){return(l=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}let u=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&s(t,e)}(f,i.PointActor);var e,r,n,u=c(f);function f(){var t;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,f);for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];return(t=u.call(this,...r)).args.width=48,t.args.height=40,t.args.type="actor-item actor-drop-cage",t.args.float=-1,t.holding=!1,t}return e=f,(r=[{key:"collideA",value:function(t,e){if(this.holding||!t.controllable)return!1;if(this.ignores.has(t))return this.ignores.set(t,60),!1;if(-1===e||e%2==0){Math.abs(t.args.x-this.args.x);return t.args.xSpeed=0,this.holding=t,t.args.ySpeed=0,t.args.float=-1,t.args.ignore=-1,this.dropDelay(t).then(()=>{t.args.float=0,t.args.ignore=5,this.ignores.set(t,60),this.holding=!1}),!1}return!0}},{key:"dropDelay",value:function(t){let e=!1;return this.args.waitFor&&(e=this.viewport.actorsById[this.args.waitFor]),e?e.dropDelay(t):new Promise(t=>this.viewport.onFrameOut(30,()=>t()))}},{key:"update",value:function(){if(a(l(f.prototype),"update",this).call(this),this.holding){const t=this.holding,e=this.x,r=-6+this.y,n=(e+-t.args.x)/3,i=(r+-t.args.y)/3;Math.abs(t.args.x-e)<.1?(t.args.x=e,Math.abs(t.args.y-r)<.1?t.args.y=r:t.args.y+=i):t.args.x+=n}}},{key:"solid",get:function(){return!this.holding&&!this.ignores.size}}])&&o(e.prototype,r),n&&o(e,n),Object.defineProperty(e,"prototype",{writable:!1}),f}();t.DropCage=u}),require.register("actor/Egg.js",function(t,e,r){"use strict";function n(t){"@babel/helpers - typeof";return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(t,"__esModule",{value:!0}),t.Egg=void 0;var i=e("../sprite/Png"),o=e("./PointActor"),a=(e("../behavior/Platformer"),e("./EggShellTop")),s=e("./Chao");function c(t,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,(o=i.key,void 0,"symbol"===n(a=function(t,e){if("object"!==n(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var i=r.call(t,e||"default");if("object"!==n(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(o,"string"))?a:String(a)),i)}var o,a}function l(){return(l="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=h(t)););return t}(t,e);if(n){var i=Object.getOwnPropertyDescriptor(n,e);return i.get?i.get.call(arguments.length<3?t:r):i.value}}).apply(this,arguments)}function u(t,e){return(u=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function f(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,i=h(t);if(e){var o=h(this).constructor;r=Reflect.construct(i,arguments,o)}else r=i.apply(this,arguments);return function(t,e){if(e&&("object"===n(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return p(t)}(this,r)}}function p(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function h(t){return(h=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}let g=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&u(t,e)}(d,o.PointActor);var e,r,n,g=f(d);function d(){var t;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,d);for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];(t=g.call(this,...r)).args.type="actor-item actor-egg",t.args.shell="normal",t.args.bindTo("shell",e=>{switch(e){case"flat":case"normal":t.args.spriteSheet=`/DBurraki/chao-egg-${e}.png`;break;default:t.args.spriteSheet="/DBurraki/chao-egg-normal.png"}t.png=new i.Png(t.args.spriteSheet)}),t.args.width=15,t.args.height=20,t.broken=!1,t.customChaoColors=[null,null,null,null,null,null,null,null,null,null,null,null,null];const o=[12,0,1,2];t.defaultColors=["e2e0e2","addef8","2ebee9","0e6d89"],t.customColors=[null,null,null,null],t.customColors.bindTo(()=>{const e={};for(const n in t.defaultColors){var r;e[t.defaultColors[n]]=null!==(r=t.customColors[n])&&void 0!==r?r:t.defaultColors[n]}t.png.ready.then(()=>{const r=t.png.recolor(e).toUrl();t.args.spriteSheet=r})},{wait:0}),t.customChaoColors.bindTo((e,r)=>{if(r=Number(r),!o.includes(r))return;const n=o.indexOf(r);t.customColors[n]=e,null!==e&&(t.args.shell="flat")});const a=[[null,null,null,null,null,null,null,null,null,null,null,null,null],[null,null,null,"80e000","69b700","487d00",null,null,null,null,null,null,null],["485070","303058","202020",null,null,null,null,null,null,null,null,"202020","5f6994"],["e4e0e4","c0bde4","9c99c0",null,null,null,null,null,null,null,null,null,"e4e0e4"],["e4e0e4","c0bde4","9c99c0","addef8","2ebee9","0e6d89",null,null,null,null,null,null,"e4e0e4"],["485070","303058","202020","b70000","770000","420000",null,null,null,null,"bf999c","202020","5f6994"],["ff7575","e00000","800000","b70000","770000","420000",null,null,null,null,null,"202020","ffaeae"],["ffc20e","dd8604","ad4d05","b44800","844221","630000",null,null,null,null,null,"202020","fae3af"],["80e000","69b700","487d00","48b400","428421","006300",null,null,null,null,null,"202020","cef00f"],["485070","303058","202020","c0bde4","9c99c0","606080",null,null,null,null,"9c99c0","202020","5f6994"],["c0bde4","9c99c0","606080","485070","303058","202020",null,null,null,null,"9c99c0","202020","e4e0e4"],["c0bde4","9c99c0","606080","e4e0e4","c0bde4","9c99c0",null,null,null,null,"9c99c0","202020","e4e0e4"]];return Object.assign(t.customChaoColors,a[Math.trunc(Math.random()*(-1+a.length))]),t.args.bindTo("falling",e=>{const r=t.ySpeedLast;e||t.broken||r<12||t.hatch()}),t.bindTo("carriedBy",e=>{if(t.cX&&(t.cX(),t.cX=null),t.cY&&(t.cY(),t.cY=null),e)t.cX=e.args.bindTo("x",r=>t.args.x=r+12*e.args.direction),t.cY=e.args.bindTo("y",e=>t.args.y=e+-12),e.carrying.add(p(t)),t.args.standingOn=null,t.args.falling=!0,t.args.float=-1,t.args.groundAngle=0;else if(t.carriedBy){const e=t.carriedBy;t.carriedBy=null,t.args.xSpeed=e.args.xSpeed,t.args.ySpeed=e.args.ySpeed,t.args.xSpeed+=4*Math.sign(e.args.gSpeed||e.args.xSpeed),t.args.ySpeed-=4,t.args.xSpeed+=2*e.xAxis,e.carrying.delete(p(t)),t.args.falling=!0,t.args.float=0,t.args.groundAngle=0}}),t}return e=d,(r=[{key:"onRendered",value:function(t){l(h(d.prototype),"onRendered",this).call(this,t),this.setAutoAttr("shell","data-shell")}},{key:"lift",value:function(t){this.carriedBy!==t?this.carriedBy=t:this.carriedBy=null}},{key:"sleep",value:function(){this.broken&&this.viewport.actors.remove(this)}},{key:"hatch",value:function(){const t=this.ySpeedLast;this.args.type="actor-item actor-egg actor-egg-shell-bottom";const e=new a.EggShellTop({spriteSheet:this.args.spriteSheet,xSpeed:.6*this.xSpeedLast,ySpeed:.4*-t,x:this.x,y:this.y-10}),r=new s.Chao({currentState:"hatching",xSpeed:.4*this.xSpeedLast,ySpeed:.4*-t,x:this.x,y:this.y-10});this.args.gSpeed=.2*this.xSpeedLast,this.viewport.spawn.add({object:e}),this.viewport.spawn.add({object:r}),Object.assign(r.customColors,this.customChaoColors),Object.assign(r.traits,{appetite:Math.random(),sociable:Math.random(),restless:Math.random()}),r.mood.hunger=.8,this.broken=!0}},{key:"updateStart",value:function(){l(h(d.prototype),"updateStart",this).call(this)}},{key:"update",value:function(){this.broken&&!this.carriedBy&&(this.args.startFrame=this.args.startFrame||this.viewport.args.frameId,this.viewport.args.frameId-this.args.startFrame>120)?this.viewport.actors.remove(this):l(h(d.prototype),"update",this).call(this)}},{key:"rotateLock",get:function(){return!0}},{key:"solid",get:function(){return!1}}])&&c(e.prototype,r),n&&c(e,n),Object.defineProperty(e,"prototype",{writable:!1}),d}();t.Egg=g}),require.register("actor/EggCapsule.js",function(t,e,r){"use strict";function n(t){"@babel/helpers - typeof";return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(t,"__esModule",{value:!0}),t.EggCapsule=void 0;var i=e("./PointActor"),o=e("../audio/Sfx"),a=e("../audio/Bgm"),s=e("curvature/base/Tag");function c(t,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,(o=i.key,void 0,"symbol"===n(a=function(t,e){if("object"!==n(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var i=r.call(t,e||"default");if("object"!==n(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(o,"string"))?a:String(a)),i)}var o,a}function l(t,e){return(l=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function u(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,i=f(t);if(e){var o=f(this).constructor;r=Reflect.construct(i,arguments,o)}else r=i.apply(this,arguments);return function(t,e){if(e&&("object"===n(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function f(t){return(f=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}let p=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&l(t,e)}(p,i.PointActor);var e,r,n,f=u(p);function p(){var t;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,p);for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];return(t=f.call(this,...r)).args.width=64,t.args.height=69,t.args.type="actor-item actor-egg-capsule",t.args.gravity=.4,t.args.bindTo("falling",e=>{e||(t.viewport.args.shakeY=7)}),t.triggered=!1,t}return e=p,(r=[{key:"collideA",value:function(t,e){return this.args.falling?(t.startle(this),!0):!t.controllable||0!==e||(this.triggered?(t.args.x+=.1*Math.sign(this.args.x-t.args.x),t.args.gSpeed=0,this.args.active=!0,!0):!(this.groundTime>15&&0===e&&!this.triggered)||(t.args.ignore=200,o.Sfx.play("WTF_BOOM"),a.Bgm.fadeOut(1500),this.viewport.onFrameOut(107,()=>{const t=document.createElement("div");t.classList.add("particle-huge-explosion");const e=new s.Tag(t);this.viewport.controlActor.screenLock=null,e.style({"--x":this.args.x,"--y":this.args.y}),this.viewport.particles.add(e),this.viewport.onFrameOut(15,()=>this.viewport.particles.remove(e))}),this.viewport.onFrameOut(240,()=>this.triggered=!1),this.viewport.onFrameOut(117,()=>t.args.ySpeed=-65),this.viewport.onFrameOut(115,()=>t.startle(this)),this.triggered=!0,!0))}},{key:"solid",get:function(){return this.groundTime>15}}])&&c(e.prototype,r),n&&c(e,n),Object.defineProperty(e,"prototype",{writable:!1}),p}();t.EggCapsule=p}),require.register("actor/EggMobile.js",function(t,e,r){"use strict";function n(t){"@babel/helpers - typeof";return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(t,"__esModule",{value:!0}),t.EggMobile=void 0;var i=e("./Vehicle"),o=e("../behavior/Platformer");function a(t,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,(o=i.key,void 0,"symbol"===n(a=function(t,e){if("object"!==n(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var i=r.call(t,e||"default");if("object"!==n(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(o,"string"))?a:String(a)),i)}var o,a}function s(){return(s="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=u(t)););return t}(t,e);if(n){var i=Object.getOwnPropertyDescriptor(n,e);return i.get?i.get.call(arguments.length<3?t:r):i.value}}).apply(this,arguments)}function c(t,e){return(c=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function l(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,i=u(t);if(e){var o=u(this).constructor;r=Reflect.construct(i,arguments,o)}else r=i.apply(this,arguments);return function(t,e){if(e&&("object"===n(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function u(t){return(u=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}let f=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&c(t,e)}(p,i.Vehicle);var e,r,n,f=l(p);function p(){var t;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,p);for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];return(t=f.call(this,...r)).args.type="actor-item actor-vehicle actor-eggmobile",t.args.accel=.15,t.args.decel=.8,t.args.gSpeedMax=15,t.args.xSpeedMax=45,t.args.ySpeedMax=45,t.args.jumpForce=12,t.args.gravity=.6,t.args.width=28,t.args.height=20,t.args.yMargin=42,t.args.falling=!0,t.args.flying=!0,t.args.float=-1,t}return e=p,(r=[{key:"update",value:function(){if(this.bMap("checkBelow",this.x,this.y).get(o.Platformer)&&this.args.y--,Math.abs(this.yAxis)>.5){if(Math.abs(this.args.ySpeed)<this.args.ySpeedMax){let t=this.args.ySpeed;Math.sign(this.yAxis)===Math.sign(this.args.ySpeed)?t+=this.yAxis*this.args.accel*3:t+=this.yAxis*this.args.accel*6,t=t>0?Math.floor(1e3*t)/1e3:Math.ceil(1e3*t)/1e3,this.args.ySpeed=t}}else this.args.ySpeed=this.args.ySpeed*this.args.decel;this.xAxis||(Math.abs(this.args.xSpeed)<=1&&(this.args.xSpeed=0),this.args.xSpeed>0?this.args.xSpeed=Math.floor(this.args.xSpeed*this.args.decel):this.args.xSpeed=Math.ceil(this.args.xSpeed*this.args.decel)),this.occupant||(this.args.xSpeed=0,this.args.ySpeed=0),this.args.falling=!0,this.args.flying=!0,this.args.mode=0,this.args.cameraMode="aerial",s(u(p.prototype),"update",this).call(this)}},{key:"solid",get:function(){return!this.occupant}}])&&a(e.prototype,r),n&&a(e,n),Object.defineProperty(e,"prototype",{writable:!1}),p}();t.EggMobile=f}),require.register("actor/EggShellBottom.js",function(t,e,r){"use strict";function n(t){"@babel/helpers - typeof";return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(t,"__esModule",{value:!0}),t.EggShellBottom=void 0;var i=e("./PointActor");function o(t,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,(o=i.key,void 0,"symbol"===n(a=function(t,e){if("object"!==n(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var i=r.call(t,e||"default");if("object"!==n(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(o,"string"))?a:String(a)),i)}var o,a}function a(){return(a="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=l(t)););return t}(t,e);if(n){var i=Object.getOwnPropertyDescriptor(n,e);return i.get?i.get.call(arguments.length<3?t:r):i.value}}).apply(this,arguments)}function s(t,e){return(s=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function c(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,i=l(t);if(e){var o=l(this).constructor;r=Reflect.construct(i,arguments,o)}else r=i.apply(this,arguments);return function(t,e){if(e&&("object"===n(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function l(t){return(l=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}let u=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&s(t,e)}(f,i.PointActor);var e,r,n,u=c(f);function f(){var t;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,f);for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];return(t=u.call(this,...r)).args.type="actor-item actor-egg-shell-bottom",t.args.width=15,t.args.height=20,t}return e=f,(r=[{key:"update",value:function(){this.args.startFrame=this.args.startFrame||this.viewport.args.frameId,this.viewport.args.frameId-this.args.startFrame>45?this.viewport.actors.remove(this):a(l(f.prototype),"update",this).call(this)}},{key:"solid",get:function(){return!1}},{key:"sleep",value:function(){this.viewport.actors.remove(this),console.log(this)}}])&&o(e.prototype,r),n&&o(e,n),Object.defineProperty(e,"prototype",{writable:!1}),f}();t.EggShellBottom=u}),require.register("actor/EggShellTop.js",function(t,e,r){"use strict";function n(t){"@babel/helpers - typeof";return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(t,"__esModule",{value:!0}),t.EggShellTop=void 0;var i=e("./PointActor");function o(t,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,(o=i.key,void 0,"symbol"===n(a=function(t,e){if("object"!==n(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var i=r.call(t,e||"default");if("object"!==n(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(o,"string"))?a:String(a)),i)}var o,a}function a(){return(a="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=l(t)););return t}(t,e);if(n){var i=Object.getOwnPropertyDescriptor(n,e);return i.get?i.get.call(arguments.length<3?t:r):i.value}}).apply(this,arguments)}function s(t,e){return(s=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function c(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,i=l(t);if(e){var o=l(this).constructor;r=Reflect.construct(i,arguments,o)}else r=i.apply(this,arguments);return function(t,e){if(e&&("object"===n(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function l(t){return(l=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}let u=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&s(t,e)}(f,i.PointActor);var e,r,n,u=c(f);function f(){var t;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,f);for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];return(t=u.call(this,...r)).args.type="actor-item actor-egg-shell-top",t.args.width=15,t.args.height=20,t}return e=f,(r=[{key:"update",value:function(){this.args.startFrame=this.args.startFrame||this.viewport.args.frameId,this.viewport.args.frameId-this.args.startFrame>90?this.viewport.actors.remove(this):a(l(f.prototype),"update",this).call(this)}},{key:"solid",get:function(){return!1}},{key:"sleep",value:function(){this.viewport.actors.remove(this)}}])&&o(e.prototype,r),n&&o(e,n),Object.defineProperty(e,"prototype",{writable:!1}),f}();t.EggShellTop=u}),require.register("actor/EggShuttle.js",function(t,e,r){"use strict";function n(t){"@babel/helpers - typeof";return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(t,"__esModule",{value:!0}),t.EggShuttle=void 0;var i=e("curvature/base/Tag"),o=e("./Vehicle");function a(t,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,(o=i.key,void 0,"symbol"===n(a=function(t,e){if("object"!==n(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var i=r.call(t,e||"default");if("object"!==n(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(o,"string"))?a:String(a)),i)}var o,a}function s(){return(s="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=u(t)););return t}(t,e);if(n){var i=Object.getOwnPropertyDescriptor(n,e);return i.get?i.get.call(arguments.length<3?t:r):i.value}}).apply(this,arguments)}function c(t,e){return(c=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function l(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,i=u(t);if(e){var o=u(this).constructor;r=Reflect.construct(i,arguments,o)}else r=i.apply(this,arguments);return function(t,e){if(e&&("object"===n(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function u(t){return(u=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}let f=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&c(t,e)}(p,o.Vehicle);var e,r,n,f=l(p);function p(){var t;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,p);for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];return(t=f.call(this,...r)).args.type="actor-item actor-vehicle actor-egg-shuttle",t.args.accel=.15,t.args.decel=.8,t.args.gSpeedMax=15,t.args.xSpeedMax=15,t.args.ySpeedMax=15,t.args.jumpForce=3,t.args.gravity=.6,t.args.width=96,t.args.height=308,t.args.yMargin=42,t.args.falling=!0,t.args.flying=!0,t.args.float=-1,t.args.seatHeight=t.args.height-40,t.args.seatForward=-16,t.args.seatAngle=Math.PI/2,t.args.thrustAngle=-Math.PI/2,t.args.bindTo("boosting",e=>{t.boost&&t.boost.setAttribute("data-active",!!e)}),t.args.crashAngle=0,t.args.bindTo("falling",e=>{Math.abs(t.args.groundAngle)<Math.PI/4||(t.args.crashAngle=t.args.groundAngle)}),t}return e=p,(r=[{key:"onRendered",value:function(t){s(u(p.prototype),"onRendered",this).call(this,t),this.autoStyle.get(this.box)["--crash-angle"]="crashAngle"}},{key:"updateStart",value:function(){s(u(p.prototype),"updateStart",this).call(this),this.args.falling&&(this.args.groundAngle=-(this.args.thrustAngle+Math.PI/2))}},{key:"updateEnd",value:function(){if(s(u(p.prototype),"updateEnd",this).call(this),this.args.falling||(this.args.groundAngle=0),this.args.crashAngle&&(this.args.groundAngle=this.args.crashAngle,this.occupant)){const t=this.occupant;t.args.standingOn=!1,t.args.falling=!0,t.args.xSpeed=2*Math.sign(this.xSpeedLast),t.args.ySpeed=-12,t.args.y+=-12}}},{key:"update",value:function(){this.sprite&&!this.windshield&&(this.windshield=new i.Tag('<div class = "shuttle-windshield">'),this.boost=new i.Tag('<div class = "shuttle-boost">'),this.sprite.appendChild(this.windshield.node),this.sprite.appendChild(this.boost.node)),this.occupant?(this.args.type="actor-item actor-vehicle actor-egg-shuttle actor-egg-shuttle-occupied",this.args.float=1):(this.args.type="actor-item actor-vehicle actor-egg-shuttle",this.args.float=0),this.args.gSpeed=0,this.args.facing="right",s(u(p.prototype),"update",this).call(this),this.args.falling?(this.args.cameraMode="rocket",this.args.thrustAngle+=.02*this.xAxis,this.args.thrustAngle<7*-Math.PI/8&&(this.args.thrustAngle=7*-Math.PI/8),this.args.thrustAngle>1*-Math.PI/8&&(this.args.thrustAngle=1*-Math.PI/8)):(this.args.cameraMode="normal",this.args.cameraBias=0,this.args.boosting=!1,this.args.thrustAngle=-Math.PI/2)}},{key:"processInputDirect",value:function(){}},{key:"command_0",value:function(t){}},{key:"release_0",value:function(t){this.args.boosting=!1}},{key:"hold_0",value:function(t){if(this.args.x+=this.viewport.args.frameId%2?-1:1,!this.args.falling&&t.time<60)return;this.args.falling=!0;const e=this.args.gravity*(1+.002*Math.min(-60+t.time,150));this.args.xSpeed+=e*Math.cos(this.args.thrustAngle),this.args.ySpeed+=e*Math.sin(this.args.thrustAngle),Math.abs(this.args.xSpeed)>this.args.xSpeedMax&&(this.args.xSpeed=this.args.xSpeedMax*Math.sign(this.args.xSpeed)),Math.abs(this.args.ySpeed)>this.args.ySpeedMax&&(this.args.ySpeed=this.args.ySpeedMax*Math.sign(this.args.ySpeed)),this.args.boosting=!0}},{key:"collideA",value:function(t,e){if(this.args.crashAngle)return!1;s(u(p.prototype),"collideA",this).call(this,t,e)}},{key:"solid",get:function(){return!this.args.crashAngle&&!this.occupant}}])&&a(e.prototype,r),n&&a(e,n),Object.defineProperty(e,"prototype",{writable:!1}),p}();t.EggShuttle=f}),require.register("actor/EggTroid.js",function(t,e,r){"use strict";function n(t){"@babel/helpers - typeof";return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(t,"__esModule",{value:!0}),t.EggTroid=void 0;var i=e("./PointActor"),o=e("curvature/base/Mixin"),a=e("../mixin/CanPop");function s(t,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,(o=i.key,void 0,"symbol"===n(a=function(t,e){if("object"!==n(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var i=r.call(t,e||"default");if("object"!==n(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(o,"string"))?a:String(a)),i)}var o,a}function c(){return(c="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=f(t)););return t}(t,e);if(n){var i=Object.getOwnPropertyDescriptor(n,e);return i.get?i.get.call(arguments.length<3?t:r):i.value}}).apply(this,arguments)}function l(t,e){return(l=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function u(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,i=f(t);if(e){var o=f(this).constructor;r=Reflect.construct(i,arguments,o)}else r=i.apply(this,arguments);return function(t,e){if(e&&("object"===n(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function f(t){return(f=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}let p=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&l(t,e)}(h,o.Mixin.from(i.PointActor,a.CanPop));var e,r,n,p=u(h);function h(t,e){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,h),(r=p.call(this,t,e)).args.type="actor-item actor-eggtroid",r.args.width=40,r.args.height=25,r.args.float=-1,r.args.gravity=.5,r.args.phase="idle",r}return e=h,(r=[{key:"update",value:function(){if(!this.viewport||!this.viewport.actorIsOnScreen(this))return;const t=this.viewport;if("diving"!==this.args.animation&&(this.args.xSpeed=.8*Math.sign(Math.sin(this.age/60))),c(f(h.prototype),"update",this).call(this),!this.viewport)return;if(!t.controlActor)return void(this.args.phase="idle");this.args.facing=this.args.xSpeed>0?"left":"right",this.args.float=-1;const e=this.castRayQuick(128,Math.PI/2,[0,0],!1)||128;if(e){const t=this.viewport.actorsAtLine(this.args.x,this.args.y,this.args.x,this.args.y+e),r=[...t.keys()];t.size&&r.filter(t=>t!==this&&t.controllable&&!t.args.dead).length&&(console.log(r.filter(t=>t!==this&&t.controllable)),this.args.animation="diving",this.args.xSpeed=0,this.args.ySpeed=6,this.args.float=0)}this.args.falling||this.pop()}},{key:"solid",get:function(){return!1}},{key:"rotateLock",get:function(){return!0}}])&&s(e.prototype,r),n&&s(e,n),Object.defineProperty(e,"prototype",{writable:!1}),h}();t.EggTroid=p}),require.register("actor/EggWalker.js",function(t,e,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.EggWalker=void 0;var n=e("./Vehicle"),i=e("../behavior/Platformer"),o=e("./Projectile"),a=e("curvature/base/Tag");function s(t){"@babel/helpers - typeof";return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function c(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,g(n.key),n)}}function l(){return(l="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=h(t)););return t}(t,e);if(n){var i=Object.getOwnPropertyDescriptor(n,e);return i.get?i.get.call(arguments.length<3?t:r):i.value}}).apply(this,arguments)}function u(t,e){return(u=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function f(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=h(t);if(e){var i=h(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===s(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return p(t)}(this,r)}}function p(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function h(t){return(h=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function g(t){var e=function(t,e){if("object"!==s(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==s(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===s(e)?e:String(e)}let d=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&u(t,e)}(y,n.Vehicle);var e,r,s,d=f(y);function y(){var t,e,r,n;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,y);for(var i=arguments.length,o=new Array(i),a=0;a<i;a++)o[a]=arguments[a];return t=d.call(this,...o),e=p(t),n=[],(r=g(r="instructions"))in e?Object.defineProperty(e,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[r]=n,t.args.type="actor-item actor-egg-walker",t.args.width=32,t.args.height=64,t.args.weight=1500,t.removeTimer=null,t.args.gSpeedMax=2.5,t.args.decel=.05,t.args.accel=.1,t.args.seatHeight=48,t.args.jumpForce=12,t.args.skidTraction=.9,t.dustCount=0,t.args.particleScale=2,t.args.bindTo("falling",e=>{e||!t.crouching||t.ySpeedLast<8||(t.viewport.args.shakeY=7)}),t}return e=y,(r=[{key:"onRendered",value:function(t){l(h(y.prototype),"onRendered",this).call(this,t),this.box=this.findTag("div"),this.sprite=this.findTag("div.sprite"),this.backSprite=new a.Tag('<div class = "sprite-back sprite">'),this.body=new a.Tag('<div class = "egg-walker-body">'),this.sprite.appendChild(this.body.node),this.punch=new a.Tag('<div class = "egg-walker-punch">'),this.sprite.appendChild(this.punch.node),this.legFront=new a.Tag('<div class = "egg-walker-leg">'),this.sprite.appendChild(this.legFront.node),this.boostFront=new a.Tag('<div class = "egg-boost">'),this.legFront.appendChild(this.boostFront.node),this.legBack=new a.Tag('<div class = "egg-walker-leg egg-walker-leg-back">'),this.backSprite.appendChild(this.legBack.node),this.boostBack=new a.Tag('<div class = "egg-boost">'),this.legBack.appendChild(this.boostBack.node),this.chair=new a.Tag('<div class = "egg-walker-chair">'),this.backSprite.appendChild(this.chair.node),this.gun=new a.Tag('<div class = "egg-walker-gun">'),this.backSprite.appendChild(this.gun.node),this.box.appendChild(this.backSprite.node)}},{key:"update",value:function(){l(h(y.prototype),"update",this).call(this),this.boosting?(this.args.type="actor-item actor-egg-walker egg-walker-boosting",this.args.ySpeed>0&&(this.args.ySpeed-=(Math.sin(this.viewport.args.frameId/10)+.9)/2*1.25+.5)):this.args.type="actor-item actor-egg-walker",this.boosting=!1,this.yAxis>.55&&(!this.xAxis||this.falling&&this.args.ySpeed>0)?(this.crouching&&(this.args.y+=.001,this.args.y-=.001),this.args.falling&&!this.crouching&&(this.args.ySpeed+=4),this.args.gSpeed=0,this.args.animation="crouching",this.crouching=!0,this.args.seatHeight=30,this.args.height=48):(this.crouching||(this.args.y+=.001,this.args.y-=.001),this.crouching=!1,this.args.seatHeight=48,this.args.height=64,this.args.falling?this.args.animation="falling":Math.sign(this.args.gSpeed)===this.args.direction?this.args.animation="walking":this.args.animation="standing")}},{key:"hold_0",value:function(){const t=this.bMap("checkBelow",this.x,this.y+1).get(i.Platformer);!this.args.falling&&this.args.ySpeed<0||t||this.yAxis>.55||(this.boosting=!0)}},{key:"hold_2",value:function(){if(this.shooting)return;let t,e,r;const n=Math.sign(this.args.direction),i=this.args.groundAngle;switch(this.args.mode){case 0:r=-i-Math.PI/2+Math.PI/4*n,e=-i;break;case 1:r=-i+Math.PI/4*n,e=-i+Math.PI/2;break;case 2:r=-i+Math.PI/2+Math.PI/4*n,e=-i-Math.PI;break;case 3:r=-i-Math.PI+Math.PI/4*n,e=-i-Math.PI/2}t=[32*Math.cos(r),120*Math.sin(r)];const a=new o.Projectile({direction:this.args.direction,x:this.args.x+t[0]+(this.args.xSpeed||this.args.gSpeed),y:this.args.y+t[1]-(this.crouching?-20:0),owner:this,xSpeed:this.args.xSpeed||this.args.gSpeed||this.args.direction,float:10,strength:2});a.impulse(8,e+(n<0?Math.PI:0),!0),this.viewport.spawn.add({object:a}),this.viewport.auras.add(a),a.update(),this.box.setAttribute("data-shoot","true"),this.shooting=!0,this.viewport.onFrameOut(1,()=>{this.box.setAttribute("data-shoot","false")}),this.viewport.onFrameOut(6,()=>{this.shooting=!1})}},{key:"command_0",value:function(){this.crouching||l(h(y.prototype),"command_0",this).call(this)}},{key:"command_1",value:function(){this.punching||(this.box.setAttribute("data-punch","true"),this.punching=!0,this.viewport.onFrameOut(12,()=>{this.box.setAttribute("data-punch","false")}),this.viewport.onFrameOut(25,()=>{this.punching=!1}))}},{key:"solid",get:function(){return!this.occupant}}])&&c(e.prototype,r),s&&c(e,s),Object.defineProperty(e,"prototype",{writable:!1}),y}();t.EggWalker=d}),require.register("actor/Eggman.js",function(t,e,r){"use strict";function n(t){"@babel/helpers - typeof";return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(t,"__esModule",{value:!0}),t.Eggman=void 0;var i=e("./PointActor"),o=(e("curvature/base/Tag"),e("../behavior/SkidDust"));function a(t,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,(o=i.key,void 0,"symbol"===n(a=function(t,e){if("object"!==n(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var i=r.call(t,e||"default");if("object"!==n(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(o,"string"))?a:String(a)),i)}var o,a}function s(t,e){return(s=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function c(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,i=u(t);if(e){var o=u(this).constructor;r=Reflect.construct(i,arguments,o)}else r=i.apply(this,arguments);return function(t,e){if(e&&("object"===n(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function l(){return(l="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=u(t)););return t}(t,e);if(n){var i=Object.getOwnPropertyDescriptor(n,e);return i.get?i.get.call(arguments.length<3?t:r):i.value}}).apply(this,arguments)}function u(t){return(u=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}let f=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&s(t,e)}(p,i.PointActor);var e,r,n,f=c(p);function p(){var t;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,p);for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];return(t=f.call(this,...r)).behaviors.add(new o.SkidDust),t.args.type="actor-item actor-eggman",t.accelNormal=.15,t.accelSuper=.3,t.args.weight=200,t.args.accel=.15,t.args.decel=.3,t.args.normalHeight=40,t.args.rollingHeight=28,t.gSpeedMaxNormal=18,t.gSpeedMaxSuper=28,t.args.gSpeedMax=t.gSpeedMaxNormal,t.args.normalHeight=57,t.args.rollingHeight=29,t.jumpForceNormal=11,t.jumpForceSuper=18,t.args.jumpForce=t.jumpForceNormal,t.args.gravity=.5,t.args.width=18,t.args.height=57,t.args.lookingUp=!1,t.args.spriteSheet=t.spriteSheet="/Sonic/eggman.png",t.superSpriteSheet="/Sonic/eggman-super.png",t}return e=p,n=[{key:"fromDef",value:function(t){const e=l(u(p),"fromDef",this).call(this,t);return e.args.name="Robotnik",e}}],(r=[{key:"onRendered",value:function(t){l(u(p.prototype),"onRendered",this).call(this,t),this.box=this.findTag("div")}},{key:"updateStart",value:function(){this.args.grinding&&this.args.falling&&this.args.ySpeed>0&&(this.args.animation="airdash",this.args.grinding=!1),l(u(p.prototype),"updateStart",this).call(this),this.args.dead&&(this.args.animation="dead")}},{key:"update",value:function(){const t=this.args.falling;if(!this.box)return void l(u(p.prototype),"update",this).call(this);this.yAxis>.5&&!this.args.ignore?(this.args.crouching=!0,this.args.lookTime--,this.args.lookTime<-45&&(this.args.cameraBias=-.5)):this.yAxis<-.5&&!this.args.ignore?(this.args.lookingUp=!0,this.args.lookTime++,this.args.lookTime>45&&(this.args.cameraBias=.25)):this.args.lookingUp=this.args.crouching=!1;const e=this.args.direction,r=this.args.gSpeed,n=Math.abs(r),i=this.args.gSpeedMax;t?(this.args.jumping&&(this.args.animation="jumping"),this.args.height=this.args.rollingHeight):this.args.rolling?(this.args.height=this.args.rollingHeight,this.args.direction!==Math.sign(this.args.gSpeed)&&(this.args.direction=Math.sign(this.args.gSpeed),this.args.direction<0?this.args.facing="left":this.args.facing="right"),this.args.animation="rolling"):(this.args.height=this.args.normalHeight,Math.sign(this.args.gSpeed)!==e&&Math.abs(this.args.gSpeed-e)>5?this.args.animation="skidding":n>i/2?this.args.animation="running":this.args.moving&&r?this.args.animation="walking":this.args.lookingUp?this.args.animation="lookingUp":this.args.crouching||this.args.standingOn&&this.args.standingOn.isVehicle?this.args.animation="crouching":this.args.animation="standing"),this.args.hangingFrom&&(this.args.animation="hanging"),this.args.grinding&&(this.args.rolling=!1,this.yAxis>.5?this.args.animation="grinding-crouching":this.args.animation="grinding"),l(u(p.prototype),"update",this).call(this)}},{key:"command_3",value:function(){this.isSuper=!this.isSuper,this.onTimeout(150,()=>{0===this.args.rings&&this.setProfile()}),this.setProfile()}},{key:"setProfile",value:function(){this.isSuper?(this.args.spriteSheet=this.superSpriteSheet,this.args.gSpeedMax=this.gSpeedMaxSuper,this.args.jumpForce=this.jumpForceSuper,this.args.accel=this.accelSuper):(this.args.spriteSheet=this.spriteSheet,this.args.gSpeedMax=this.gSpeedMaxNormal,this.args.jumpForce=this.jumpForceNormal,this.args.accel=this.accelNormal)}},{key:"solid",get:function(){return!1}},{key:"canRoll",get:function(){return!0}},{key:"isEffect",get:function(){return!1}},{key:"controllable",get:function(){return!0}}])&&a(e.prototype,r),n&&a(e,n),Object.defineProperty(e,"prototype",{writable:!1}),p}();t.Eggman=f}),require.register("actor/Eggrobo.js",function(t,e,r){"use strict";function n(t){"@babel/helpers - typeof";return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(t,"__esModule",{value:!0}),t.Eggrobo=void 0;var i=e("./PointActor"),o=e("./Projectile"),a=e("curvature/base/Tag"),s=e("../behavior/SkidDust"),c=e("../audio/Sfx");function l(t,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,(o=i.key,void 0,"symbol"===n(a=function(t,e){if("object"!==n(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var i=r.call(t,e||"default");if("object"!==n(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(o,"string"))?a:String(a)),i)}var o,a}function u(){return(u="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=h(t)););return t}(t,e);if(n){var i=Object.getOwnPropertyDescriptor(n,e);return i.get?i.get.call(arguments.length<3?t:r):i.value}}).apply(this,arguments)}function f(t,e){return(f=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function p(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,i=h(t);if(e){var o=h(this).constructor;r=Reflect.construct(i,arguments,o)}else r=i.apply(this,arguments);return function(t,e){if(e&&("object"===n(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function h(t){return(h=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}let g=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&f(t,e)}(d,i.PointActor);var e,r,n,g=p(d);function d(){var t;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,d);for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];return(t=g.call(this,...r)).behaviors.add(new s.SkidDust),t.args.type="actor-item actor-eggrobo",t.args.accel=.125,t.args.decel=.3,t.args.gSpeedMax=14,t.args.jumpForce=11,t.args.gravity=.5,t.args.width=18,t.args.height=57,t}return e=d,(r=[{key:"onRendered",value:function(t){u(h(d.prototype),"onRendered",this).call(this,t),this.box=this.findTag("div"),this.sprite=this.findTag("div.sprite"),this.flame=new a.Tag('<div class = "eggrobo-flame">'),this.muzzleFlash=new a.Tag('<div class = "eggrobo-muzzle-flash">'),this.sprite.appendChild(this.flame.node),this.sprite.appendChild(this.muzzleFlash.node)}},{key:"update",value:function(){const t=this.args.falling;if(this.viewport.args.audio&&!this.thrusterSound&&(this.thrusterSound=new Audio("/Sonic/mecha-sonic-thruster.wav"),this.thrusterSound.loop=!0),this.thrusterSound&&(this.thrusterSound.currentTime>.4+Math.random()/10&&(this.thrusterSound.currentTime=.05),this.thrusterSound.volume=.2+-.05*Math.random()),this.box){if(t)this.args.crouching=!1,this.args.jumping&&this.box.setAttribute("data-animation","jumping");else{this.yAxis>0?this.args.crouching=!0:this.args.crouching=!1;const t=this.args.direction,e=this.args.gSpeed,r=Math.abs(e),n=this.args.gSpeedMax;Math.sign(this.args.gSpeed)!==t&&Math.abs(this.args.gSpeed-t)>5?(this.thrusterSound&&this.thrusterSound.pause(),this.box.setAttribute("data-animation","skidding")):r>n/2?(this.thrusterSound&&this.thrusterSound.pause(),this.box.setAttribute("data-animation","running")):this.args.moving&&e?this.box.setAttribute("data-animation","walking"):this.args.crouching||this.standingOn&&this.standingOn.isVehicle?this.box.setAttribute("data-animation","crouching"):this.box.setAttribute("data-animation","standing")}this.args.falling||(this.args.flying=!1),this.args.flying?this.box.setAttribute("data-animation","flying"):this.args.falling&&this.box.setAttribute("data-animation","jumping"),this.args.shotCoolDown>0&&this.args.shotCoolDown--,0==this.args.rocketCoolDown&&this.thrusterSound&&this.thrusterSound.pause(),this.args.rocketCoolDown>0&&this.args.rocketCoolDown--,0==this.args.rocketCoolDown&&(this.args.flying=!1),u(h(d.prototype),"update",this).call(this)}else u(h(d.prototype),"update",this).call(this)}},{key:"solid",get:function(){return!1}},{key:"isEffect",get:function(){return!1}},{key:"hold_0",value:function(){this.args.falling?(this.args.ySpeed>1||this.args.flying)&&(this.args.flying=!0,this.args.rocketCoolDown<=1&&(this.thrusterSound&&this.thrusterSound.play(),this.args.rocketCoolDown=3),this.args.ySpeed=.999*this.args.ySpeed,this.args.float=3):this.args.rocketCoolDown=5}},{key:"hold_2",value:function(){if(this.args.shotCoolDown>0)return;const t=Math.sign(this.args.direction),e=this.args.groundAngle;let r,n,i;switch(this.args.mode){case 0:i=-e-Math.PI/2+Math.PI/4*t,n=-e;break;case 1:i=-e+Math.PI/4*t,n=-e+Math.PI/2;break;case 2:i=-e+Math.PI/2+Math.PI/4*t,n=-e-Math.PI;break;case 3:i=-e-Math.PI+Math.PI/4*t,n=-e-Math.PI/2}r=[50*Math.cos(i),50*Math.sin(i)],(this.args.falling||this.args.crouching)&&(n=0,r=[26*t,-26]);const a=new o.Projectile({direction:this.args.direction,x:this.args.x+r[0]+(this.args.xSpeed||this.args.gSpeed),y:this.args.y+r[1],owner:this,xSpeed:this.args.xSpeed||this.args.gSpeed,YSpeed:this.args.YSpeed});a.impulse(20,n+(t<0?Math.PI:0),!0),a.update(),this.viewport.auras.add(a),this.viewport.spawn.add({object:a}),this.box.setAttribute("data-shooting","true"),this.onTimeout(140,()=>{this.box.setAttribute("data-shooting","false")}),c.Sfx.play("SHOT_FIRED"),this.args.shotCoolDown=4}},{key:"canFly",get:function(){return!0}},{key:"controllable",get:function(){return!0}}])&&l(e.prototype,r),n&&l(e,n),Object.defineProperty(e,"prototype",{writable:!1}),d}();t.Eggrobo=g}),require.register("actor/Emblem.js",function(t,e,r){"use strict";function n(t){"@babel/helpers - typeof";return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(t,"__esModule",{value:!0}),t.Emblem=void 0;var i=e("./PointActor"),o=e("curvature/base/Tag"),a=e("../audio/Sfx"),s=e("../lib/Analytic");function c(t,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,(o=i.key,void 0,"symbol"===n(a=function(t,e){if("object"!==n(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var i=r.call(t,e||"default");if("object"!==n(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(o,"string"))?a:String(a)),i)}var o,a}function l(){return(l="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=p(t)););return t}(t,e);if(n){var i=Object.getOwnPropertyDescriptor(n,e);return i.get?i.get.call(arguments.length<3?t:r):i.value}}).apply(this,arguments)}function u(t,e){return(u=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function f(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,i=p(t);if(e){var o=p(this).constructor;r=Reflect.construct(i,arguments,o)}else r=i.apply(this,arguments);return function(t,e){if(e&&("object"===n(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function p(t){return(p=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}let h=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&u(t,e)}(g,i.PointActor);var e,r,n,h=f(g);function g(){var t,e;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,g);for(var r=arguments.length,n=new Array(r),i=0;i<r;i++)n[i]=arguments[i];return(e=h.call(this,...n)).args.width=32,e.args.height=32,e.args.type="actor-item actor-emblem",e.args.float=-1,e.args.static=!0,e.collected=!1,e.args.character=null!==(t=e.args.character)&&void 0!==t?t:"sonic",e}return e=g,(r=[{key:"onRendered",value:function(t){if(!this.viewport)return l(p(g.prototype),"onRendered",this).call(this,t);const e=this.viewport.getZoneState();e&&e.emblems&&e.emblems.includes(this.oid)&&(this.viewport.replay||(this.args.type="actor-item actor-emblem actor-emblem-collected",this.collected=!0)),l(p(g.prototype),"onRendered",this).call(this,t),this.autoAttr.get(this.box)["data-character"]="character"}},{key:"collideA",value:function(t){if(!t.controllable||this.gone)return;const e=this.viewport,r=e.getZoneState();t.args.emblemsCurrent.push(this),this.collected?this.args.type="actor-item actor-emblem actor-emblem-gone actor-emblem-collected":(t.args.emblems.push(this),r.emblems.push(this.oid),this.args.type="actor-item actor-emblem actor-emblem-gone");const n=document.createElement("div");n.classList.add("particle-score");const i=new o.Tag(n);let c;switch(i.style({"--x":this.args.x,"--y":this.args.y-16}),t.args.emblemsCurrent&&t.args.emblemsCurrent.length){case 1:n.classList.add("score-100"),c=100;break;case 2:n.classList.add("score-200"),c=200;break;case 3:n.classList.add("score-500"),c=500;break;case 4:n.classList.add("score-1000"),c=1e3;break;case 5:n.classList.add("score-10000"),c=1e4}e.particles.add(i),setTimeout(()=>e.particles.remove(i),768),t.args.score+=c,this.gone=!0,e.onFrameOut(20,()=>e.actors.remove(this)),this.viewport.args.inventory.push({tallyIcon:"/custom/hud-emblem.png",points:1e3,id:this.oid}),e.currentSave.save(),this.viewport.args.audio&&a.Sfx.play("EMBLEM_COLLECTED"),"function"==typeof ga&&s.Analytic.report({eventCategory:"emblem",eventAction:"collected",eventLabel:`${this.viewport.args.actName}::${this.oid}`})}}])&&c(e.prototype,r),n&&c(e,n),Object.defineProperty(e,"prototype",{writable:!1}),g}();t.Emblem=h}),require.register("actor/Emerald.js",function(t,e,r){"use strict";function n(t){"@babel/helpers - typeof";return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(t,"__esModule",{value:!0}),t.Emerald=void 0;var i=e("./PointActor"),o=e("../audio/Sfx"),a=e("../lib/Analytic");function s(t,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,(o=i.key,void 0,"symbol"===n(a=function(t,e){if("object"!==n(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var i=r.call(t,e||"default");if("object"!==n(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(o,"string"))?a:String(a)),i)}var o,a}function c(){return(c="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=f(t)););return t}(t,e);if(n){var i=Object.getOwnPropertyDescriptor(n,e);return i.get?i.get.call(arguments.length<3?t:r):i.value}}).apply(this,arguments)}function l(t,e){return(l=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function u(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,i=f(t);if(e){var o=f(this).constructor;r=Reflect.construct(i,arguments,o)}else r=i.apply(this,arguments);return function(t,e){if(e&&("object"===n(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function f(t){return(f=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}let p=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&l(t,e)}(h,i.PointActor);var e,r,n,p=u(h);function h(){var t;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,h);for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];return(t=p.call(this,...r)).args.type="actor-item actor-emerald emerald-"+(t.args.color||"white"),t.args.width=12,t.args.height=12,t}return e=h,(r=[{key:"collideA",value:function(t){if(c(f(h.prototype),"collideA",this).call(this,t),!this.args.gone&&t.controllable){if(this.args.type="actor-item actor-emerald collected emerald-"+(this.args.color||"white"),!this.args.gone){o.Sfx.play("EMERALD_COLLECTED"),this.args.type="actor-item actor-emerald collected gone emerald-"+(this.args.color||"white"),t.args.owner?t.args.owner.args.emeralds+=1:t.occupant?t.occupant.args.emeralds+=1:t.args.emeralds+=1,this.viewport.args.emeralds.includes(this.args.color)||this.viewport.args.emeralds.push(this.args.color);const e=viewport.currentSave;e.emeralds.includes(this.args.color)||e.emeralds.push(this.args.color),this.viewport.args.inventory.push({points:1e4,tallyIcon:`/Sonic/emerald-${this.args.color}-mini.png`,id:this.oid}),e.save(),a.Analytic.report({eventCategory:"chaos-emerald",eventAction:"collected",eventLabel:`${this.viewport.args.actName}::${this.args.color}::${this.args.id}`}),this.viewport.actors.remove(this),this.remove()}this.args.gone=!0}}},{key:"solid",get:function(){return!1}},{key:"effect",get:function(){return!0}}])&&s(e.prototype,r),n&&s(e,n),Object.defineProperty(e,"prototype",{writable:!1}),h}();t.Emerald=p}),require.register("actor/Explosion.js",function(t,e,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Explosion=void 0;var n=e("./PointActor");function i(t){"@babel/helpers - typeof";return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function o(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,f(n.key),n)}}function a(){return(a="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=u(t)););return t}(t,e);if(n){var i=Object.getOwnPropertyDescriptor(n,e);return i.get?i.get.call(arguments.length<3?t:r):i.value}}).apply(this,arguments)}function s(t,e){return(s=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function c(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=u(t);if(e){var o=u(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===i(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return l(t)}(this,r)}}function l(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function u(t){return(u=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function f(t){var e=function(t,e){if("object"!==i(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==i(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===i(e)?e:String(e)}let p=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&s(t,e)}(h,n.PointActor);var e,r,i,p=c(h);function h(){var t,e,r,n;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,h);for(var i=arguments.length,o=new Array(i),a=0;a<i;a++)o[a]=arguments[a];return t=p.call(this,...o),e=l(t),n=-1,(r=f(r="float"))in e?Object.defineProperty(e,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[r]=n,t.args.type="actor-item actor-explosion",t.args.width=48,t.args.height=48,t.removeTimer=null,t}return e=h,(r=[{key:"update",value:function(){if(a(u(h.prototype),"update",this).call(this),!this.removeTimer){this.viewport;this.removeTimer=this.onTimeout(360,()=>{})}}},{key:"solid",get:function(){return!1}},{key:"isEffect",get:function(){return!1}}])&&o(e.prototype,r),i&&o(e,i),Object.defineProperty(e,"prototype",{writable:!1}),h}();t.Explosion=p}),require.register("actor/FakeEmerald.js",function(t,e,r){"use strict";function n(t){"@babel/helpers - typeof";return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(t,"__esModule",{value:!0}),t.FakeEmerald=void 0;var i=e("./BreakableBlock");function o(t,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,(o=i.key,void 0,"symbol"===n(a=function(t,e){if("object"!==n(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var i=r.call(t,e||"default");if("object"!==n(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(o,"string"))?a:String(a)),i)}var o,a}function a(){return(a="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=l(t)););return t}(t,e);if(n){var i=Object.getOwnPropertyDescriptor(n,e);return i.get?i.get.call(arguments.length<3?t:r):i.value}}).apply(this,arguments)}function s(t,e){return(s=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function c(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,i=l(t);if(e){var o=l(this).constructor;r=Reflect.construct(i,arguments,o)}else r=i.apply(this,arguments);return function(t,e){if(e&&("object"===n(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function l(t){return(l=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}let u=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&s(t,e)}(f,i.BreakableBlock);var e,r,n,u=c(f);function f(){var t;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,f);for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];return(t=u.call(this,...r)).args.width=64,t.args.height=34,t.args.type="actor-item actor-breakable-block actor-fake-emerald",t.args.z=128,t.args.float=-1,t.breakable=!1,t}return e=f,(r=[{key:"updateStart",value:function(){}},{key:"update",value:function(){a(l(f.prototype),"update",this).call(this),this.switch&&this.switch.args.active&&(this.breakable=!0)}},{key:"collideA",value:function(t,e){return!!this.breakable&&a(l(f.prototype),"collideA",this).call(this,t,e)}},{key:"solid",get:function(){return this.breakable}}])&&o(e.prototype,r),n&&o(e,n),Object.defineProperty(e,"prototype",{writable:!1}),f}();t.FakeEmerald=u}),require.register("actor/Flag.js",function(t,e,r){"use strict";function n(t){"@babel/helpers - typeof";return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(t,"__esModule",{value:!0}),t.Flag=void 0;var i=e("./PointActor");function o(t,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,(o=i.key,void 0,"symbol"===n(a=function(t,e){if("object"!==n(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var i=r.call(t,e||"default");if("object"!==n(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(o,"string"))?a:String(a)),i)}var o,a}function a(t,e){return(a=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function s(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,i=c(t);if(e){var o=c(this).constructor;r=Reflect.construct(i,arguments,o)}else r=i.apply(this,arguments);return function(t,e){if(e&&("object"===n(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function c(t){return(c=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}let l=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&a(t,e)}(l,i.PointActor);var e,r,n,c=s(l);function l(){var t;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,l);for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];return(t=c.call(this,...r)).args.width=45,t.args.height=53,t.args.type="actor-item actor-flag",t.args.z=0,t}return e=l,(r=[{key:"solid",get:function(){return!1}}])&&o(e.prototype,r),n&&o(e,n),Object.defineProperty(e,"prototype",{writable:!1}),l}();t.Flag=l}),require.register("actor/Flickie.js",function(t,e,r){"use strict";function n(t){"@babel/helpers - typeof";return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(t,"__esModule",{value:!0}),t.Flickie=void 0;var i=e("./Follower");function o(t,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,(o=i.key,void 0,"symbol"===n(a=function(t,e){if("object"!==n(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var i=r.call(t,e||"default");if("object"!==n(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(o,"string"))?a:String(a)),i)}var o,a}function a(t,e){return(a=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function s(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,i=c(t);if(e){var o=c(this).constructor;r=Reflect.construct(i,arguments,o)}else r=i.apply(this,arguments);return function(t,e){if(e&&("object"===n(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function c(t){return(c=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}let l=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&a(t,e)}(l,i.Follower);var e,r,n,c=s(l);function l(t,e){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,l),(r=c.call(this,t,e)).args.type="actor-item actor-flickie",r.args.palletShift=Math.floor(8*Math.random()),r}return e=l,r&&o(e.prototype,r),n&&o(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}();t.Flickie=l}),require.register("actor/Flipper.js",function(t,e,r){"use strict";function n(t){"@babel/helpers - typeof";return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(t,"__esModule",{value:!0}),t.Flipper=void 0;var i=e("./PointActor");function o(t,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,(o=i.key,void 0,"symbol"===n(a=function(t,e){if("object"!==n(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var i=r.call(t,e||"default");if("object"!==n(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(o,"string"))?a:String(a)),i)}var o,a}function a(t,e){return(a=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function s(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,i=c(t);if(e){var o=c(this).constructor;r=Reflect.construct(i,arguments,o)}else r=i.apply(this,arguments);return function(t,e){if(e&&("object"===n(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function c(t){return(c=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}let l=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&a(t,e)}(l,i.PointActor);var e,r,n,c=s(l);function l(t,e){var r,n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,l),(n=c.call(this,t,e)).args.width=64,n.args.height=48,n.noClip=!0,n.args.float=-1,n.args.direction=n.args.direction||1,n.args.power=null!==(r=n.args.power)&&void 0!==r?r:12,n.args.type="actor-item actor-flipper",n.args.bindTo("direction",t=>n.args.type=t<0?"actor-item actor-flipper actor-flipper-right":"actor-item actor-flipper actor-flipper-left"),n.flipped=new WeakSet,n}return e=l,(r=[{key:"collideA",value:function(t,e){if(t.y<=this.y-this.args.height)return;if(this.flipped.has(t))return;const r=this.x-this.args.direction*this.args.width;if(t.args.rolling=!0,t.willJump=!1,t.buttons[0]&&1===t.buttons[0].time){const e=-t.args.groundAngle+-Math.PI/2;this.args.animation="flipping",t.args.xSpeed=0,t.args.ySpeed=0,t.args.gSpeed=0;const n=(t.x-r)/this.args.width*.5*this.args.direction;t.impulse(this.args.power*n,e,!0);const i=Number(Number(1*Math.cos(e)).toFixed(3)),o=Number(Number(1*Math.sin(e)).toFixed(3));return t.args.y+=-4,t.args.xSpeed=i,t.args.ySpeed=o,t.args.falling=!0,this.viewport.onFrameOut(3,()=>this.args.animation="unflipping"),t.args.jumping=!1,t.args.falling=!0,this.flipped.add(t),this.viewport.onFrameOut(1,()=>t.willJump=!1),this.viewport.onFrameOut(3,()=>t.args.jumping=!1),void this.viewport.onFrameOut(5,()=>this.flipped.delete(t))}Math.abs(t.args.gSpeed)<3?t.args.gSpeed=Math.min(2,Math.abs(t.args.gSpeed)||1)*Math.sign(t.args.gSpeed||this.args.direction):t.args.gSpeed*=.5}}])&&o(e.prototype,r),n&&o(e,n),Object.defineProperty(e,"prototype",{writable:!1}),l}();t.Flipper=l}),require.register("actor/Follower.js",function(t,e,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Follower=void 0;var n=e("./PointActor");function i(t){"@babel/helpers - typeof";return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function o(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,f(n.key),n)}}function a(){return(a="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=u(t)););return t}(t,e);if(n){var i=Object.getOwnPropertyDescriptor(n,e);return i.get?i.get.call(arguments.length<3?t:r):i.value}}).apply(this,arguments)}function s(t,e){return(s=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function c(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=u(t);if(e){var o=u(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===i(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return l(t)}(this,r)}}function l(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function u(t){return(u=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function f(t){var e=function(t,e){if("object"!==i(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==i(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===i(e)?e:String(e)}let p=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&s(t,e)}(h,n.PointActor);var e,r,i,p=c(h);function h(t,e){var r,n,i,o;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,h),r=p.call(this,t,e),n=l(r),o=1,(i=f(i="noClip"))in n?Object.defineProperty(n,i,{value:o,enumerable:!0,configurable:!0,writable:!0}):n[i]=o,r.args.isGhost=!0,r.args.type="actor-item actor-follower",r.args.float=-1,r.args.width=16,r.args.height=16,r.stopSwapZ=0,r.args.z=-1,r}return e=h,(r=[{key:"update",value:function(){a(u(h.prototype),"update",this).call(this),this.stopSwapZ>0&&this.stopSwapZ--,this.args.standingOn=!1;const t=this.viewport.controlActor;if(!t)return;this.args.falling=!0,this.args.float=-1;const e=Math.random();let r=Math.random();const n=t.x+-this.x,i=t.y+-this.y,o=Math.atan2(i,n),s=Math.hypot(i,n);const c=1.1*Math.max(Math.abs(t.args.gSpeed),Math.abs(t.args.xSpeed),Math.abs(t.args.ySpeed),1),l=this.args.xSpeed-(t.args.xSpeed||t.args.gSpeed);let f=c+3,p=null;s<64?(Math.abs(this.args.xSpeed)<1&&(this.args.xSpeed=1*Math.sign(-.5+Math.random())),Math.abs(this.args.ySpeed)<1&&(this.args.ySpeed=1*Math.sign(-.5+Math.random()))):s>=256&&(this.args.x=Math.floor(t.x-256*Math.cos(o)),this.args.y=Math.floor(t.y-256*Math.sin(o)),this.args.xSpeed=n/60+(t.args.xSpeed||t.args.gSpeed),this.args.ySpeed=0,this.viewport.setColCell(this),p=this.x>t.x?"left":"right",f*=4);const g=Math.sign(n),d=Math.sign(i),y=Math.sign(this.args.xSpeed)===g,b=this.args.ySpeed&&Math.sign(this.args.ySpeed)===d,v=.35*Math.max(e)*(y?.85:.55),m=.1*Math.max(e)*(y?.75:1.5);if(!y||Math.abs(this.args.xSpeed)<f){const e=v*g*r;let o=this.args.xSpeed+e;if(Math.abs(this.args.xSpeed)>f&&(o=f*Math.sign(this.args.xSpeed)),this.args.xSpeed=o,s>=256){const e=t.args.xSpeed||t.args.gSpeed,r=t.args.ySpeed;p&&(this.args.xSpeed=n/90+e,this.args.ySpeed=i/90+r)}}if(!p&&this.args.xSpeed<0?p="left":p||(p="right"),!b||Math.abs(this.args.ySpeed)<f){let t=this.args.ySpeed+m*d;Math.abs(this.args.ySpeed)>f&&(t=f*Math.sign(this.args.ySpeed)),this.args.ySpeed=t}if(Math.sign(l)&&Math.sign(t.args.xSpeed||t.args.gSpeed)!==Math.sign(l)&&0===this.stopSwapZ&&(Math.abs(this.x-t.x)>64||Math.abs(this.y-t.y)>64)&&(this.args.z=this.args.z>-1e3?-1e5:1e5,this.stopSwapZ=30),p&&(this.args.facing=p),this.args.ySpeed>0){if(this.args.ySpeed<=0||c<1.5)return;this.box&&(this.box.classList.add("decending"),this.box.classList.remove("ascending"))}else this.box&&(this.box.classList.remove("decending"),this.box.classList.add("ascending"))}},{key:"solid",get:function(){return!1}}])&&o(e.prototype,r),i&&o(e,i),Object.defineProperty(e,"prototype",{writable:!1}),h}();t.Follower=p}),require.register("actor/Fountain.js",function(t,e,r){"use strict";function n(t){"@babel/helpers - typeof";return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(t,"__esModule",{value:!0}),t.Fountain=void 0;var i=e("./PointActor");function o(t,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,(o=i.key,void 0,"symbol"===n(a=function(t,e){if("object"!==n(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var i=r.call(t,e||"default");if("object"!==n(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(o,"string"))?a:String(a)),i)}var o,a}function a(t,e){return(a=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function s(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,i=c(t);if(e){var o=c(this).constructor;r=Reflect.construct(i,arguments,o)}else r=i.apply(this,arguments);return function(t,e){if(e&&("object"===n(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function c(t){return(c=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}let l=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&a(t,e)}(l,i.PointActor);var e,r,n,c=s(l);function l(){var t;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,l);for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];return(t=c.call(this,...r)).args.width=72,t.args.height=120,t.args.float=-1,t.args.type="actor-item actor-fountain",t}return e=l,(r=[{key:"collideA",value:function(t){t.controllable&&t.args.falling&&(t.y>this.y+.5*-this.args.height&&(t.args.x=this.x),t.args.ySpeed>0&&(t.args.ySpeed*=.75),t.args.ySpeed>-20&&Math.abs(this.x-t.x)<8&&(t.args.ySpeed-=.4))}},{key:"solid",get:function(){return!1}}])&&o(e.prototype,r),n&&o(e,n),Object.defineProperty(e,"prototype",{writable:!1}),l}();t.Fountain=l}),require.register("actor/Gator.js",function(t,e,r){"use strict";function n(t){"@babel/helpers - typeof";return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(t,"__esModule",{value:!0}),t.Gator=void 0;e("./Flickie");var i=e("curvature/base/Mixin"),o=e("./PointActor"),a=e("../behavior/Patrol"),s=e("../mixin/CanPop");function c(t,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,(o=i.key,void 0,"symbol"===n(a=function(t,e){if("object"!==n(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var i=r.call(t,e||"default");if("object"!==n(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(o,"string"))?a:String(a)),i)}var o,a}function l(){return(l="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=p(t)););return t}(t,e);if(n){var i=Object.getOwnPropertyDescriptor(n,e);return i.get?i.get.call(arguments.length<3?t:r):i.value}}).apply(this,arguments)}function u(t,e){return(u=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function f(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,i=p(t);if(e){var o=p(this).constructor;r=Reflect.construct(i,arguments,o)}else r=i.apply(this,arguments);return function(t,e){if(e&&("object"===n(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function p(t){return(p=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}let h=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&u(t,e)}(g,i.Mixin.from(o.PointActor,s.CanPop));var e,r,n,h=f(g);function g(){var t,e,r,n;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,g);for(var i=arguments.length,o=new Array(i),s=0;s<i;s++)o[s]=arguments[s];return(n=h.call(this,...o)).behaviors.add(new a.Patrol),n.args.type="actor-item actor-gator-bot",n.args.animation="standing",n.args.accel=.75,n.args.decel=.5,n.args.gSpeedMax=15,n.args.jumpForce=5,n.args.gravity=.5,n.args.width=44,n.args.height=32,n.args.patrolPause=null!==(t=n.args.patrolPause)&&void 0!==t?t:20,n.args.patrolBeat=null!==(e=n.args.patrolBeat)&&void 0!==e?e:110,n.args.patrolSpeed=null!==(r=n.args.patrolSpeed)&&void 0!==r?r:1,n.chasing=!1,n}return e=g,(r=[{key:"onRendered",value:function(t){l(p(g.prototype),"onRendered",this).call(this,t)}},{key:"update",value:function(){if(this.viewport&&this.viewport.controlActor){Math.abs(this.viewport.controlActor.args.x-this.args.x)<64?this.box.setAttribute("data-animation","chomping"):this.box.setAttribute("data-animation","standing")}l(p(g.prototype),"update",this).call(this),this.args.direction=Math.sign(this.args.gSpeed),this.args.facing=this.args.direction>0?"right":"left"}},{key:"effect",value:function(t){l(p(g.prototype),"effect",this).call(this,t)}},{key:"solid",get:function(){return!1}},{key:"isEffect",get:function(){return!1}}])&&c(e.prototype,r),n&&c(e,n),Object.defineProperty(e,"prototype",{writable:!1}),g}();t.Gator=h}),require.register("actor/GiantTire.js",function(t,e,r){"use strict";function n(t){"@babel/helpers - typeof";return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(t,"__esModule",{value:!0}),t.GiantTire=void 0;var i=e("./PointActor"),o=e("curvature/base/Mixin"),a=e("./TruckBody"),s=e("./TruckCab"),c=(e("../behavior/Platformer"),e("../audio/Sfx"));function l(t,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,(o=i.key,void 0,"symbol"===n(a=function(t,e){if("object"!==n(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var i=r.call(t,e||"default");if("object"!==n(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(o,"string"))?a:String(a)),i)}var o,a}function u(){return(u="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=h(t)););return t}(t,e);if(n){var i=Object.getOwnPropertyDescriptor(n,e);return i.get?i.get.call(arguments.length<3?t:r):i.value}}).apply(this,arguments)}function f(t,e){return(f=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function p(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,i=h(t);if(e){var o=h(this).constructor;r=Reflect.construct(i,arguments,o)}else r=i.apply(this,arguments);return function(t,e){if(e&&("object"===n(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function h(t){return(h=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}let g=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&f(t,e)}(d,o.Mixin.from(i.PointActor));var e,r,n,g=p(d);function d(){var t;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,d);for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];return(t=g.call(this,...r)).args.type="actor-item actor-giant-tire",t.args.rear&&(t.args.type+=" actor-giant-tire-back"),t.args.width=64,t.args.height=64,t.args.rolled=0,t.gSpeedLast=0,t.args.accel=0,t.args.decel=0,t.args.gravity=.6,t.args.driver=t.args.driver||null,t.args.partner=t.args.partner||null,t.args.idler=null,t.args.body=t.args.body||null,t}return e=d,(r=[{key:"spawnParts",value:function(){if(this.args.driver||this.args.idler)return;const t=this.args.idler=new d({driver:this,x:this.args.x-96,y:this.args.y}),e=this.args.partner=new d({driver:this,rear:!0,x:this.args.x+32,y:this.args.y}),r=this.args.idlerPartner=new d({driver:this,rear:!0,x:this.args.x-64,y:this.args.y}),n=this.args.body=new a.TruckBody({driver:this,x:this.args.x-32,y:this.args.y-32}),i=this.args.cab=new s.TruckCab({driver:this,x:this.args.x+48,y:this.args.y-28});this.viewport.spawn.add({object:t}),this.viewport.spawn.add({object:e}),this.viewport.spawn.add({object:r}),this.viewport.spawn.add({object:n}),this.viewport.spawn.add({object:i}),this.viewport.auras.add(this),this.viewport.auras.add(t),this.viewport.auras.add(e),this.viewport.auras.add(r),this.viewport.auras.add(n),this.viewport.auras.add(i)}},{key:"onRendered",value:function(t){u(h(d.prototype),"onRendered",this).call(this,t),this.autoStyle.get(this.box)["--rolled"]="rolled"}},{key:"updateStart",value:function(){if(this.args.driver||this.args.idler||this.spawnParts(),this.args.destroyed&&!this.args.falling){if(this.args.type+=" actor-giant-tire-destroyed",this.args.idler.args.type+=" actor-giant-tire-destroyed",this.args.partner.args.type+=" actor-giant-tire-destroyed",this.args.idlerPartner.args.type+=" actor-giant-tire-destroyed",this.args.cab.args.type+=" actor-truck-cab-destroyed",this.args.body.args.type+=" actor-truck-body-destroyed",c.Sfx.play("ROCK_BREAK_1"),c.Sfx.play("OBJECT_DESTROYED"),this.viewport.onFrameOut(180,()=>c.Sfx.play("RADIO_CHATTER_2")),!this.args.driver){let t=this.viewport.controlActor;this.viewport.onFrameOut(15,()=>t.cofocused=null),this.args.body.noClip=!0,this.args.cab.noClip=!0,this.args.body.args.destroyed=!0,this.args.cab.args.destroyed=!0,this.args.body.args.xSpeed=1.2*this.gSpeedLast,this.args.cab.args.xSpeed=1.3*this.gSpeedLast,this.args.body.args.ySpeed=-6,this.args.cab.args.ySpeed=-14,this.args.body.args.falling=!0,this.args.cab.args.falling=!0,this.args.body.args.float=0,this.args.cab.args.float=0}this.args.ySpeed=-11,this.args.xSpeed=1.4*this.gSpeedLast,this.args.falling=!0}if(this.args.destroyed)return this.args.idler&&!this.args.idler.args.destroyed&&(this.args.idler.args.destroyed=!0,this.args.partner.args.destroyed=!0,this.args.idlerPartner.args.destroyed=!0,this.args.idler.args.falling=!0,this.args.partner.args.falling=!0,this.args.idlerPartner.args.falling=!0,this.args.idler.args.xSpeed=1.7*this.gSpeedLast,this.args.partner.args.xSpeed=1.5*this.gSpeedLast,this.args.idlerPartner.args.xSpeed=1.8*this.gSpeedLast,this.args.idler.args.ySpeed=-11,this.args.partner.args.ySpeed=-11,this.args.idlerPartner.args.ySpeed=-11,this.args.idler.args.float=0,this.args.partner.args.float=0,this.args.idlerPartner.args.float=0,this.args.idler.noClip=!0,this.args.partner.noClip=!0,this.args.idlerPartner.noClip=!0),this.args.float=0,void(this.noClip=!0);for(;this.getMapSolidAt(this.args.x,this.args.y-1);)this.args.y--;if(!this.args.idler||!this.viewport.controlActor||this.viewport.controlActor.args.dead)return void u(h(d.prototype),"updateStart",this).call(this);let t=this.viewport.controlActor;if(this.age<36&&this.args.x>-160+t.args.x)return void u(h(d.prototype),"updateStart",this).call(this);t.args.standingOn&&t.args.standingOn.isVehicle&&(t=t.args.standingOn),this.args.falling?this.args.x>-160+t.args.x?this.args.xSpeed*=.99:this.args.xSpeed=Math.max(this.args.xSpeed,t.args.xSpeed||t.args.xSpeed):t.args.gSpeed&&this.args.x>-160+t.args.x?this.args.gSpeed*=.99:this.args.gSpeed=Math.max(this.args.gSpeed,t.args.gSpeed||t.args.xSpeed),t.args.x<this.args.x||t.args.falling&&t.args.xSpeed<0?this.args.gSpeed=Math.min(-8,.75*t.args.xSpeed):t.args.gSpeed&&t.args.gSpeed<5&&this.args.gSpeed++;const e=this.args.body.distanceTo(t);e<768&&t.args.jumping&&t.fallTime<120&&(this.args.gSpeed*=.9),t.cofocused=e<512?this.args.idler:null}},{key:"updateEnd",value:function(){if(!this.args.idler||this.args.destroyed)return void u(h(d.prototype),"updateEnd",this).call(this);for(const t of this.viewport.regionsAtPoint(this.args.x+80,this.args.y))t.args.destroyTruck&&(this.args.destroyed=!0);const t=this.args.idler,e=this.args.partner,r=this.args.idlerPartner,n=.5*(this.args.x+t.args.x),i=.5*(this.args.y+t.args.y)-32,o=this.angleTo(t);this.distanceTo(t);this.ensureSpace(t,96),this.ensureSpace(e,-16),this.ensureSpace(r,80),this.args.body.args.x=n,this.args.body.args.y=i,this.args.body.args.groundAngle=-o,this.args.body.args.falling=!0,this.args.body.args.mode=0,this.args.body.args.xSpeed=this.args.xSpeed||this.args.gSpeed*Math.cos(o),this.args.body.args.ySpeed=this.args.ySpeed||this.args.gSpeed*Math.sin(o),this.args.cab.args.xSpeed=this.args.xSpeed||this.args.gSpeed*Math.cos(o),this.args.cab.args.ySpeed=this.args.ySpeed||this.args.gSpeed*Math.sin(o),this.args.cab.args.x=0+n+80*Math.cos(o),this.args.cab.args.y=3+i+80*Math.sin(o),this.args.cab.args.groundAngle=1.1*-o,this.args.cab.args.falling=!0,this.args.cab.args.mode=0,this.args.gSpeed?(this.args.animation="rolling",this.args.idler.args.animation="rolling",this.args.partner.args.animation="rolling",this.args.idlerPartner.args.animation="rolling"):(this.args.animation="idle",this.args.idler.args.animation="idle",this.args.partner.args.animation="idle",this.args.idlerPartner.args.animation="idle"),u(h(d.prototype),"updateEnd",this).call(this)}},{key:"ensureSpace",value:function(t,e){let r=this.distanceFrom(t),n=Math.abs(e),i=Math.abs(n-r),o=this.angleTo(t);if(e>0&&t.args.x>this.args.x?(t.args.x=this.args.x-4,t.args.y=this.args.y):e<0&&t.args.x<this.args.x&&(t.args.x=this.args.x+4,t.args.y=this.args.y),this.args.falling?(t.args.gSpeed=this.args.xSpeed,t.args.xSpeed=this.args.xSpeed):r>n?(t.args.gSpeed=this.args.gSpeed+i*Math.cos(o),t.args.xSpeed=this.args.xSpeed||t.args.gSpeed):r<n?(t.args.gSpeed=this.args.gSpeed+-i*Math.cos(o),t.args.xSpeed=t.args.gSpeed):(t.args.gSpeed=this.args.gSpeed,t.args.xSpeed=t.args.gSpeed),this.args.falling&&t.args.falling){t.args.xSpeed=this.args.xSpeed,t.args.ySpeed=this.args.ySpeed;const e=this.distanceTo(t),r=this.angleTo(t);96!==e&&(t.args.x=this.args.x-n*Math.cos(r),t.args.y=this.args.y-n*Math.sin(r))}}},{key:"collideA",value:function(t,e){this.args.destroyed||(t.break?t.break(this):t.pop?t.pop(this):t.controllable&&t.damage(this))}}])&&l(e.prototype,r),n&&l(e,n),Object.defineProperty(e,"prototype",{writable:!1}),d}();t.GiantTire=g}),require.register("actor/GohlaBall.js",function(t,e,r){"use strict";function n(t){"@babel/helpers - typeof";return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(t,"__esModule",{value:!0}),t.GohlaBall=void 0;e("./Flickie");var i=e("curvature/base/Mixin"),o=(e("curvature/base/Tag"),e("./PointActor")),a=e("../behavior/SkidDust"),s=e("../mixin/CanPop");e("../actor/Explosion"),e("../actor/Projectile");function c(t,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,(o=i.key,void 0,"symbol"===n(a=function(t,e){if("object"!==n(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var i=r.call(t,e||"default");if("object"!==n(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(o,"string"))?a:String(a)),i)}var o,a}function l(t,e){return(l=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function u(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,i=f(t);if(e){var o=f(this).constructor;r=Reflect.construct(i,arguments,o)}else r=i.apply(this,arguments);return function(t,e){if(e&&("object"===n(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function f(t){return(f=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}let p=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&l(t,e)}(p,i.Mixin.from(o.PointActor,s.CanPop));var e,r,n,f=u(p);function p(){var t;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,p);for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];return(t=f.call(this,...r)).behaviors.add(new a.SkidDust),t.args.type="actor-item actor-gohla-ball",t.args.animation="standing",t.args.accel=.1,t.args.decel=.5,t.args.gSpeedMax=5,t.args.jumpForce=5,t.args.gravity=.5,t.args.width=16,t.args.height=16,t.willStick=!1,t.stayStuck=!1,t}return e=p,(r=[{key:"solid",get:function(){return!1}},{key:"isEffect",get:function(){return!1}}])&&c(e.prototype,r),n&&c(e,n),Object.defineProperty(e,"prototype",{writable:!1}),p}();t.GohlaBall=p}),require.register("actor/GrapplePoint.js",function(t,e,r){"use strict";function n(t){"@babel/helpers - typeof";return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(t,"__esModule",{value:!0}),t.GrapplePoint=void 0;var i=e("./PointActor"),o=e("curvature/base/Tag"),a=e("./Spring"),s=e("curvature/base/Mixin"),c=e("../mixin/Constrainable");function l(t,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,(o=i.key,void 0,"symbol"===n(a=function(t,e){if("object"!==n(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var i=r.call(t,e||"default");if("object"!==n(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(o,"string"))?a:String(a)),i)}var o,a}function u(){return(u="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=h(t)););return t}(t,e);if(n){var i=Object.getOwnPropertyDescriptor(n,e);return i.get?i.get.call(arguments.length<3?t:r):i.value}}).apply(this,arguments)}function f(t,e){return(f=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function p(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,i=h(t);if(e){var o=h(this).constructor;r=Reflect.construct(i,arguments,o)}else r=i.apply(this,arguments);return function(t,e){if(e&&("object"===n(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function h(t){return(h=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}let g=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&f(t,e)}(d,s.Mixin.from(i.PointActor,c.Constrainable));var e,r,n,g=p(d);function d(){var t;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,d);for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];return(t=g.call(this,...r)).args.width=28,t.args.height=16,t.args.type="actor-item actor-grapple-point",t.ignoreOthers=new Set,t.args.gravity=.6,t[a.Spring.WontSpring]=!0,t.hooked=new Set,t}return e=d,(r=[{key:"updateEnd",value:function(){u(h(d.prototype),"update",this).call(this);const t=this.others.tiedTo;if(t?this.setPos():this.noClip=!0,t||this.unhookAll(),this.args.falling=!0,this.hooked.size){"phazon"===this.viewport.args.theme&&(this.lightning||(this.lightning=new o.Tag('<div class = "particle-sparkle-lightning">'),viewport.particles.add(this.lightning),console.log(this.lightning)),this.lightning.style({"--x":t.args.x,"--y":t.args.y,height:2*this.args.ropeLength+"px","--angle":-this.args.groundAngle}));const e=[...this.hooked][0];e.xAxis&&(Math.sign(this.args.xSpeed)||Math.sign(this.args.xSpeed)===Math.sign(this.hooked.xAxis))&&(this.y>t.y?this.args.xSpeed+=.25*e.xAxis:this.args.xSpeed-=.25*e.xAxis);for(const t of this.hooked)t.args.x=this.x,t.args.y=this.y+e.args.height+-5,t.args.xSpeed=0,t.args.ySpeed=0,t.args.groundAngle=0,t.xAxis>0?(t.args.facing="right",t.args.direction=1):t.xAxis<0&&(t.args.facing="left",t.args.direction=-1),t.args.cameraMode="hooked"}else this.lightning&&(this.viewport.particles.remove(this.lightning),this.lightning=null);u(h(d.prototype),"updateEnd",this).call(this)}},{key:"update",value:function(){}},{key:"collideA",value:function(t){if(!t.controllable)return!1;const e=this.others.tiedTo;if(!e||e.noClip)return!1;if(!t.args.hangingFrom&&!this.ignoreOthers.has(t)){if(this.args.ignore)return!1;if(t.args.falling=!0,t.swing=!0,this.hooked.add(t),this.viewport.auras.add(this),this.args.xSpeed=t.args.xSpeed||t.args.gSpeed,2===t.args.mode&&(this.args.xSpeed=t.args.xSpeed||-t.args.gSpeed),this.args.ySpeed=t.args.ySpeed,t.args.xSpeed=0,t.args.ySpeed=0,t.args.gSpeed=0,t.args.ignore=-4,t.args.float=-1,t.xLast=t.args.x,t.yLast=t.args.y,t.args.x=this.args.x,t.args.y=this.args.y+t.args.height,t.args.hangingFrom=this,t.args.jumping=!1,this.others.tiedTo){const e=this.others.tiedTo;e.dispatchEvent(new CustomEvent("hooked"),{detail:{hook:this,subject:t}}),e.activate&&e.activate(t);const r=()=>{if(this.viewport){if(!this.hooked.size)return this.args.x=this.def.get("x"),this.args.y=this.def.get("y"),void this.viewport.setColCell(this);if(this.unhookAll(),e.explode){for(const t of this.hooked)t.args.gSpeed=0;e.explode(),this.args.x=this.def.get("x"),this.args.y=this.def.get("y"),this.viewport.setColCell(this)}}};e.args.flightTime&&this.viewport.onFrameOut(e.args.flightTime,r),e.onRemove(r),e.addEventListener("exploded",r)}}}},{key:"unhook",value:function(t){if(!this.hooked.has(t))return;this.hooked.delete(t);const e=this.others.tiedTo;t.args.ignore=t.args.float=0,t.args.y++,t.args.xSpeed+=e.xSpeedLast||this.xSpeedLast||0,t.args.ySpeed+=e.ySpeedLast||this.ySpeedLast||0,t.args.groundAngle=0,t.args.hangingFrom=null,this.ignoreOthers.add(t),t.args.falling=!0,t.args.jumping=!0;const r=this.viewport;r.onFrameOut(15,()=>{this.ignoreOthers.delete(t),r.auras.delete(this)})}},{key:"unhookAll",value:function(){for(const t of this.hooked)this.unhook(t)}}])&&l(e.prototype,r),n&&l(e,n),Object.defineProperty(e,"prototype",{writable:!1}),d}();t.GrapplePoint=g}),require.register("actor/GravityPad.js",function(t,e,r){"use strict";function n(t){"@babel/helpers - typeof";return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(t,"__esModule",{value:!0}),t.GravityPad=void 0;var i=e("./PointActor");e("./Block"),e("../audio/Sfx");function o(t,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,(o=i.key,void 0,"symbol"===n(a=function(t,e){if("object"!==n(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var i=r.call(t,e||"default");if("object"!==n(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(o,"string"))?a:String(a)),i)}var o,a}function a(t,e){return(a=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function s(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,i=l(t);if(e){var o=l(this).constructor;r=Reflect.construct(i,arguments,o)}else r=i.apply(this,arguments);return function(t,e){if(e&&("object"===n(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function c(){return(c="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=l(t)););return t}(t,e);if(n){var i=Object.getOwnPropertyDescriptor(n,e);return i.get?i.get.call(arguments.length<3?t:r):i.value}}).apply(this,arguments)}function l(t){return(l=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}let u=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&a(t,e)}(f,i.PointActor);var e,r,n,u=s(f);function f(){var t;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,f);for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];return(t=u.call(this,...r)).args.width=t.args.width||24,t.args.height=32,t.args.type="actor-item actor-gravity-pad",t.args.float=-1,t}return e=f,n=[{key:"fromDef",value:function(t){const e=c(l(f),"fromDef",this).call(this,t);return e.args.width=t.width,e}}],(r=[{key:"collideA",value:function(t){t.args.mode||t.args.float||t.args.static||(t.args.float=1,t.args.xSpeed=t.args.xSpeed||t.args.gSpeed,Math.abs(t.xLast-t.args.x)>5&&(t.args.ignore=1),t.args.ySpeed=Math.min(0,t.args.ySpeed),t.args.falling=!0,t.args.y>this.args.y+-this.args.height?(t.args.y-=1,t.args.ySpeed-=.5):t.args.ySpeed*=.25,t.args.y>=this.args.y+-.5*this.args.height&&(t.args.ySpeed-=1),t.args.animation="flip",t.args.jumping=!1,t.dashed=!1)}}])&&o(e.prototype,r),n&&o(e,n),Object.defineProperty(e,"prototype",{writable:!1}),f}();t.GravityPad=u}),require.register("actor/Grounder.js",function(t,e,r){"use strict";function n(t){"@babel/helpers - typeof";return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(t,"__esModule",{value:!0}),t.Grounder=void 0;e("./Flickie");var i=e("curvature/base/Mixin"),o=e("./PointActor"),a=e("../behavior/Patrol"),s=e("../mixin/CanPop");function c(t,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,(o=i.key,void 0,"symbol"===n(a=function(t,e){if("object"!==n(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var i=r.call(t,e||"default");if("object"!==n(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(o,"string"))?a:String(a)),i)}var o,a}function l(){return(l="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=p(t)););return t}(t,e);if(n){var i=Object.getOwnPropertyDescriptor(n,e);return i.get?i.get.call(arguments.length<3?t:r):i.value}}).apply(this,arguments)}function u(t,e){return(u=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function f(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,i=p(t);if(e){var o=p(this).constructor;r=Reflect.construct(i,arguments,o)}else r=i.apply(this,arguments);return function(t,e){if(e&&("object"===n(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function p(t){return(p=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}let h=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&u(t,e)}(g,i.Mixin.from(o.PointActor,s.CanPop));var e,r,n,h=f(g);function g(){var t,e,r,n,i;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,g);for(var o=arguments.length,s=new Array(o),c=0;c<o;c++)s[c]=arguments[c];return(i=h.call(this,...s)).behaviors.add(new a.Patrol),i.args.type="actor-item actor-grounder",i.args.animation="standing",i.args.accel=.1,i.args.decel=.5,i.args.gSpeedMax=5,i.args.jumpForce=5,i.args.gravity=.5,i.args.width=24,i.args.height=32,i.args.color=null!==(t=i.args.color)&&void 0!==t?t:"green",i.willStick=!1,i.stayStuck=!1,i.args.patrolPause=null!==(e=i.args.patrolPause)&&void 0!==e?e:20,i.args.patrolBeat=null!==(r=i.args.patrolBeat)&&void 0!==r?r:120,i.args.patrolSpeed=null!==(n=i.args.patrolSpeed)&&void 0!==n?n:1,i}return e=g,(r=[{key:"onRendered",value:function(){l(p(g.prototype),"onRendered",this).call(this),this.autoAttr.get(this.box)["data-color"]="color"}},{key:"update",value:function(){this.args.direction,this.args.shotTelegraph,this.args.patrolBeat;this.box&&(this.args.moving&&this.args.gSpeed?this.box.setAttribute("data-animation","walking"):this.box.setAttribute("data-animation","standing")),l(p(g.prototype),"update",this).call(this),this.args.direction=Math.sign(this.args.gSpeed)}},{key:"effect",value:function(t){l(p(g.prototype),"effect",this).call(this,t)}},{key:"solid",get:function(){return!1}},{key:"isEffect",get:function(){return!1}}])&&c(e.prototype,r),n&&c(e,n),Object.defineProperty(e,"prototype",{writable:!1}),g}();t.Grounder=h}),require.register("actor/GuardBot.js",function(t,e,r){"use strict";function n(t){"@babel/helpers - typeof";return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(t,"__esModule",{value:!0}),t.GuardBot=void 0;e("./Flickie");var i=e("curvature/base/Mixin"),o=(e("curvature/base/Tag"),e("./PointActor")),a=e("../behavior/SkidDust"),s=e("../mixin/CanPop");e("../actor/Explosion"),e("../actor/Projectile");function c(t,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,(o=i.key,void 0,"symbol"===n(a=function(t,e){if("object"!==n(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var i=r.call(t,e||"default");if("object"!==n(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(o,"string"))?a:String(a)),i)}var o,a}function l(t,e){return(l=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function u(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,i=f(t);if(e){var o=f(this).constructor;r=Reflect.construct(i,arguments,o)}else r=i.apply(this,arguments);return function(t,e){if(e&&("object"===n(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function f(t){return(f=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}let p=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&l(t,e)}(p,i.Mixin.from(o.PointActor,s.CanPop));var e,r,n,f=u(p);function p(){var t;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,p);for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];return(t=f.call(this,...r)).behaviors.add(new a.SkidDust),t.args.type="actor-item actor-guard-bot",t.args.animation="standing",t.args.accel=.1,t.args.decel=.5,t.args.gSpeedMax=5,t.args.jumpForce=5,t.args.gravity=.5,t.args.width=24,t.args.height=24,t.args.static=!0,t.willStick=!1,t.stayStuck=!1,t}return e=p,(r=[{key:"solid",get:function(){return!1}},{key:"isEffect",get:function(){return!1}}])&&c(e.prototype,r),n&&c(e,n),Object.defineProperty(e,"prototype",{writable:!1}),p}();t.GuardBot=p}),require.register("actor/HallBooster.js",function(t,e,r){"use strict";function n(t){"@babel/helpers - typeof";return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(t,"__esModule",{value:!0}),t.HallBooster=void 0;var i=e("./PointActor"),o=e("../audio/Sfx");function a(t,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,(o=i.key,void 0,"symbol"===n(a=function(t,e){if("object"!==n(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var i=r.call(t,e||"default");if("object"!==n(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(o,"string"))?a:String(a)),i)}var o,a}function s(){return(s="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=u(t)););return t}(t,e);if(n){var i=Object.getOwnPropertyDescriptor(n,e);return i.get?i.get.call(arguments.length<3?t:r):i.value}}).apply(this,arguments)}function c(t,e){return(c=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function l(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,i=u(t);if(e){var o=u(this).constructor;r=Reflect.construct(i,arguments,o)}else r=i.apply(this,arguments);return function(t,e){if(e&&("object"===n(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function u(t){return(u=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}const f=Symbol("Boosted");let p=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&c(t,e)}(h,i.PointActor);var e,r,n,p=l(h);function h(){var t;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,h);for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];return(t=p.call(this,...r)).args.type="actor-item actor-hall-booster",t.args.width=64,t.args.height=24,t.args.direction=t.args.direction||1,t.args.static=!0,t}return e=h,(r=[{key:"update",value:function(){s(u(h.prototype),"update",this).call(this)}},{key:"collideA",value:function(t){if(t.isRegion||t.args.static)return;if(t instanceof h)return;if(t.args.gSpeed,t.args.falling||t[f])return;this.viewport.onFrameOut(10,()=>delete t[f]),t[f]=this;const e=this.args.toSpeed||24;t.args.ignore=2,t.args.direction=this.args.direction,t.args.facing=this.args.direction>0?"right":"left",t.args.gSpeed=e*this.args.direction,o.Sfx.play("HALLBOOSTER_HIT")}}])&&a(e.prototype,r),n&&a(e,n),Object.defineProperty(e,"prototype",{writable:!1}),h}();t.HallBooster=p}),require.register("actor/HeavyDutySwitch.js",function(t,e,r){"use strict";function n(t){"@babel/helpers - typeof";return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(t,"__esModule",{value:!0}),t.HeavyDutySwitch=void 0;var i=e("./Switch");function o(t,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,(o=i.key,void 0,"symbol"===n(a=function(t,e){if("object"!==n(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var i=r.call(t,e||"default");if("object"!==n(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(o,"string"))?a:String(a)),i)}var o,a}function a(t,e){return(a=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function s(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,i=c(t);if(e){var o=c(this).constructor;r=Reflect.construct(i,arguments,o)}else r=i.apply(this,arguments);return function(t,e){if(e&&("object"===n(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function c(t){return(c=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}let l=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&a(t,e)}(l,i.Switch);var e,r,n,c=s(l);function l(){var t;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,l);for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];return(t=c.call(this,...r)).args.type="actor-item actor-switch actor-heavy-duty-switch",t.args.height=t.height=19,t}return e=l,r&&o(e.prototype,r),n&&o(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}();t.HeavyDutySwitch=l}),require.register("actor/Herculad.js",function(t,e,r){"use strict";function n(t){"@babel/helpers - typeof";return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(t,"__esModule",{value:!0}),t.Herculad=void 0;var i=e("./PointActor"),o=e("curvature/base/Mixin"),a=e("../audio/Sfx");function s(t,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,(o=i.key,void 0,"symbol"===n(a=function(t,e){if("object"!==n(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var i=r.call(t,e||"default");if("object"!==n(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(o,"string"))?a:String(a)),i)}var o,a}function c(){return(c="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=f(t)););return t}(t,e);if(n){var i=Object.getOwnPropertyDescriptor(n,e);return i.get?i.get.call(arguments.length<3?t:r):i.value}}).apply(this,arguments)}function l(t,e){return(l=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function u(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,i=f(t);if(e){var o=f(this).constructor;r=Reflect.construct(i,arguments,o)}else r=i.apply(this,arguments);return function(t,e){if(e&&("object"===n(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function f(t){return(f=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}let p=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&l(t,e)}(h,o.Mixin.from(i.PointActor));var e,r,n,p=u(h);function h(){var t;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,h);for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];return(t=p.call(this,...r)).args.type="actor-item actor-herculad",t.args.width=32,t.args.height=32,t.args.gravity=.4,t.args.collected=!1,t}return e=h,(r=[{key:"onRendered",value:function(t){c(f(h.prototype),"onRendered",this).call(this,t),this.autoAttr.get(this.box)["data-collected"]="collected"}},{key:"collideA",value:function(t,e){t.controllable&&(this.args.collected||(a.Sfx.play("DOOT_DOOT"),this.viewport.args.inventory.push({tallyIcon:"/secret/herculad-icon.png",icon:"/secret/herculad-icon.png",points:1e4,id:this.oid})),this.args.collected="collected"),c(f(h.prototype),"collideA",this).call(this,t,e)}}])&&s(e.prototype,r),n&&s(e,n),Object.defineProperty(e,"prototype",{writable:!1}),h}();t.Herculad=p}),require.register("actor/HexNut.js",function(t,e,r){"use strict";function n(t){"@babel/helpers - typeof";return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(t,"__esModule",{value:!0}),t.HexNut=void 0;var i=e("./Block");e("../audio/Sfx");function o(t,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,(o=i.key,void 0,"symbol"===n(a=function(t,e){if("object"!==n(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var i=r.call(t,e||"default");if("object"!==n(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(o,"string"))?a:String(a)),i)}var o,a}function a(){return(a="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=l(t)););return t}(t,e);if(n){var i=Object.getOwnPropertyDescriptor(n,e);return i.get?i.get.call(arguments.length<3?t:r):i.value}}).apply(this,arguments)}function s(t,e){return(s=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function c(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,i=l(t);if(e){var o=l(this).constructor;r=Reflect.construct(i,arguments,o)}else r=i.apply(this,arguments);return function(t,e){if(e&&("object"===n(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function l(t){return(l=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}let u=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&s(t,e)}(f,i.Block);var e,r,n,u=c(f);function f(){var t,e;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,f);for(var r=arguments.length,n=new Array(r),i=0;i<r;i++)n[i]=arguments[i];return(e=u.call(this,...n)).args.maxClimb=null!==(t=e.args.maxClimb)&&void 0!==t?t:262,e.args.width=64,e.args.height=24,e.args.platform=1,e.args.float=-1,e.args.type="actor-item actor-hex-nut",e.args.static=0,e.args.spinning=0,e.args.bouncing=0,e.args.treadmill=!0,e}return e=f,(r=[{key:"collideA",value:function(t,e){return!t.args.platform&&a(l(f.prototype),"collideA",this).call(this,t,e)}},{key:"update",value:function(){this.args.treadmill=!0,this.standingUnder.forEach(t=>{Math.abs(t.args.gSpeed)>16&&(t.args.gSpeed=16*Math.sign(t.args.gSpeed))});const t=this.originalY+-this.args.maxClimb;this.args.convey>0?this.getMapSolidAt(this.args.x,this.args.y+1)?(this.args.ySpeed=0,this.args.treadmill=!1,this.args.convey=0):this.args.y+=.1*this.args.convey:this.args.convey<0&&(this.args.y<=t?(this.args.y=t,this.args.ySpeed=0,this.args.treadmill=!1,this.args.convey=0):this.args.y+=.1*this.args.convey),Math.abs(this.args.convey)>8?this.standingUnder.forEach(t=>t.args.x=this.args.x):this.standingUnder.forEach(t=>{Math.abs(this.args.x-t.args.x)<1&&(t.args.x=this.args.x),t.args.x+=Math.sign(this.args.x-t.args.x)}),a(l(f.prototype),"update",this).call(this)}},{key:"sleep",value:function(){this.args.y=this.originalY}}])&&o(e.prototype,r),n&&o(e,n),Object.defineProperty(e,"prototype",{writable:!1}),f}();t.HexNut=u}),require.register("actor/HtmlFrame.js",function(t,e,r){"use strict";function n(t){"@babel/helpers - typeof";return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(t,"__esModule",{value:!0}),t.HtmlFrame=void 0;var i=e("./PointActor"),o=e("curvature/base/Tag");function a(t,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,(o=i.key,void 0,"symbol"===n(a=function(t,e){if("object"!==n(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var i=r.call(t,e||"default");if("object"!==n(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(o,"string"))?a:String(a)),i)}var o,a}function s(t,e){return(s=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function c(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,i=u(t);if(e){var o=u(this).constructor;r=Reflect.construct(i,arguments,o)}else r=i.apply(this,arguments);return function(t,e){if(e&&("object"===n(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function l(){return(l="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=u(t)););return t}(t,e);if(n){var i=Object.getOwnPropertyDescriptor(n,e);return i.get?i.get.call(arguments.length<3?t:r):i.value}}).apply(this,arguments)}function u(t){return(u=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}let f=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&s(t,e)}(p,i.PointActor);var e,r,n,f=c(p);function p(){var t,e;let r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1?arguments[1]:void 0;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,p),(e=f.call(this,r,n)).args.yForce=0,e.args.yLean=0,e.args.type="actor-item actor-html-frame",e.args.width=r.width||32,e.args.height=r.height||32,e.originalX=e.args.x,e.originalY=e.args.y,e.args.z=-1e3,e.args.static=!0,e.args.gravity=.5,e.args.collapse=null!==(t=r.collapse)&&void 0!==t&&t;const i=["pxIofYrt0kE","aRsOBFhNjVM","obtGE_8NAp8","uRjoPlWWljk"],o=Math.random();return console.log(o),e.args.url=(t=>`https://www.youtube.com/embed/${t}?controls=0&autoplay=1`)(i[Math.trunc(o*i.length)]),e}return e=p,n=[{key:"fromDef",value:function(t){const e=l(u(p),"fromDef",this).call(this,t);return e.args.width=t.width,e.args.height=t.height,e.args.tileId=t.gid,e.args.y=e.originalY=t.y,e}}],(r=[{key:"onRendered",value:function(t){l(u(p.prototype),"onRendered",this).call(this,t),this.screen||(this.screen=new o.Tag('<iframe width="560" height="315" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>'),this.sprite.appendChild(this.screen.node),this.args.spriteSheet=this.args.spriteSheet||"/Sonic/marble-zone-block.png",this.args.bindTo("url",t=>this.screen.src=t),this.args.bindTo("html",t=>this.screen.srcDoc=t))}}])&&a(e.prototype,r),n&&a(e,n),Object.defineProperty(e,"prototype",{writable:!1}),p}();t.HtmlFrame=f}),require.register("actor/Jawz.js",function(t,e,r){"use strict";function n(t){"@babel/helpers - typeof";return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(t,"__esModule",{value:!0}),t.Jawz=void 0;e("./Flickie");var i=e("./Spring"),o=e("curvature/base/Mixin"),a=(e("curvature/base/Tag"),e("./PointActor")),s=e("../mixin/CanPop");function c(t,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,(o=i.key,void 0,"symbol"===n(a=function(t,e){if("object"!==n(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var i=r.call(t,e||"default");if("object"!==n(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(o,"string"))?a:String(a)),i)}var o,a}function l(){return(l="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=p(t)););return t}(t,e);if(n){var i=Object.getOwnPropertyDescriptor(n,e);return i.get?i.get.call(arguments.length<3?t:r):i.value}}).apply(this,arguments)}function u(t,e){return(u=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function f(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,i=p(t);if(e){var o=p(this).constructor;r=Reflect.construct(i,arguments,o)}else r=i.apply(this,arguments);return function(t,e){if(e&&("object"===n(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function p(t){return(p=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}let h=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&u(t,e)}(g,o.Mixin.from(a.PointActor,s.CanPop));var e,r,n,h=f(g);function g(){var t;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,g);for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];return(t=h.call(this,...r)).args.type="actor-item actor-jawz",t[i.Spring.WontSpring]=!0,t.args.animation="standing",t.args.accel=.1,t.args.decel=.5,t.args.gSpeedMax=5,t.args.jumpForce=5,t.args.gravity=.5,t.args.width=56,t.args.height=16,t.willStick=!1,t.stayStuck=!1,t.args.float=-1,t.noClip=!0,t}return e=g,(r=[{key:"onRendered",value:function(){l(p(g.prototype),"onRendered",this).call(this),this.box.setAttribute("data-animation","standing")}},{key:"update",value:function(){this.args.facing="left",this.args.xSpeed>-4&&(this.args.xSpeed-=.2),this.args.ySpeed=0,this.args.falling=!0,this.args.flying=!0,l(p(g.prototype),"update",this).call(this)}},{key:"effect",value:function(t){l(p(g.prototype),"effect",this).call(this,t)}},{key:"solid",get:function(){return!1}},{key:"isEffect",get:function(){return!1}}])&&c(e.prototype,r),n&&c(e,n),Object.defineProperty(e,"prototype",{writable:!1}),g}();t.Jawz=h}),require.register("actor/Knuckles.js",function(t,e,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Knuckles=void 0;var n=e("./PointActor"),i=e("../behavior/Platformer"),o=e("curvature/base/Tag"),a=e("./KnuxBomb"),s=e("../behavior/Spindash"),c=e("./Spring"),l=e("../behavior/SkidDust"),u=e("../behavior/Crouch"),f=e("../behavior/LookUp"),p=e("../behavior/EmeraldHalo"),h=e("../behavior/SuperForm"),g=e("../lib/Color"),d=e("../sprite/Png");function y(t){"@babel/helpers - typeof";return(y="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function b(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,j(n.key),n)}}function v(){return(v="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=O(t)););return t}(t,e);if(n){var i=Object.getOwnPropertyDescriptor(n,e);return i.get?i.get.call(arguments.length<3?t:r):i.value}}).apply(this,arguments)}function m(t,e){return(m=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function w(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=O(t);if(e){var i=O(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===y(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return S(t)}(this,r)}}function S(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function O(t){return(O=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function j(t){var e=function(t,e){if("object"!==y(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==y(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===y(e)?e:String(e)}let x=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&m(t,e)}(P,n.PointActor);var e,r,y,x=w(P);function P(t,e){var r,n,i,o;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,P),r=x.call(this,t,e),n=S(r),i="png",o=new d.Png("/Sonic/knuckles.png"),(i=j(i))in n?Object.defineProperty(n,i,{value:o,enumerable:!0,configurable:!0,writable:!0}):n[i]=o,r.args.canonical="Knuckles",window.knuckles=S(r),r.behaviors.add(new l.SkidDust),r.behaviors.add(new s.Spindash),r.behaviors.add(new u.Crouch),r.behaviors.add(new f.LookUp),r.behaviors.add(new h.SuperForm),r.behaviors.add(new p.EmeraldHalo),r.args.isHyper=r.args.isSuper=!1,r.args.type="actor-item actor-knuckles",r.args.spriteSheet=r.spriteSheet="url('/Sonic/knuckles.png')",r.gSpeedMaxNormal=18,r.gSpeedMaxSuper=20,r.gSpeedMaxHyper=23,r.climbSpeedMaxNormal=4,r.climbSpeedMaxSuper=6,r.climbSpeedMax=r.climbSpeedMaxNormal,r.jumpForceNormal=9.5,r.jumpForceSuper=10,r.jumpForceHyper=11,r.accelNormal=.15,r.accelSuper=.24,r.args.accel=r.accelNormal,r.args.decel=.4,r.args.gSpeedMax=r.gSpeedMaxNormal,r.args.jumpForce=r.jumpForceNormal,r.args.gravity=.5,r.args.normalGravity=.5,r.args.slowGravity=.125,r.args.punchMomentum=0,r.args.width=15,r.args.height=41,r.args.weight=150,r.args.normalHeight=41,r.args.rollingHeight=28,r.punchTime=0,r.punched=0,r.beforePunch="standing",r.bombsDropped=0,r.args.bellySliding=!1,r.slideTime=0,r.sparks=new Set,r.flyTime=0,r.transformTime=0,r.args.minRingsSuper=50,r.args.minRingsHyper=75,r.args.bindTo("punchMomentum",t=>r.args.punchSpeed=Math.abs(.5*t)),r.args.bindTo("falling",t=>{!t&&r.args.flying&&(1!==r.args.mode&&2!==r.args.mode&&3!==r.args.mode||(r.args.climbing=!0,r.isHyper&&Math.abs(r.args.xSpeed)>5&&(r.viewport.args.shakeX=16,r.viewport&&r.viewport.settings.rumble&&r.controller&&r.controller.rumble&&r.controller.rumble({duration:800,strongMagnitude:1,weakMagnitude:1})),r.args.gSpeed=0,r.args.xSpeed=0,r.args.ySpeed=0))}),r.costumes={Tails:{h:-125,s:1,v:1},Enerjak:{h:120,s:1,v:.55},Pink:{h:0,s:1.5,v:1.5},Wechnia:{h:0,s:0,v:.85}},r}return e=P,(r=[{key:"onRendered",value:function(t){if(this.box)return;v(O(P.prototype),"onRendered",this).call(this,t),this.autoStyle.get(this.box)["--punchSpeed"]="punchSpeed",this.autoStyle.get(this.box)["--sprite-sheet"]="spriteSheet",this.punchAura=new o.Tag('<div class = "punch-aura">'),this.punchAura.style({display:"none"}),this.sprite.appendChild(this.punchAura.node),this.args.bindTo("animation",t=>this.box.setAttribute("data-animation",t)),this.addEventListener("jump",t=>{this.willPunch&&(this.punchTime=this.viewport.args.frameId,this.punched++)}),this.rotatedSpriteSheet=this.spriteSheet;const e=()=>{var t,e,r;let n=Number(null!==(t=this.viewport.customColor.h)&&void 0!==t?t:0),i=Number(null!==(e=this.viewport.customColor.s)&&void 0!==e?e:1),o=Number(null!==(r=this.viewport.customColor.v)&&void 0!==r?r:1);this.rotateMainColor(n,i,o),this.box.node.style.setProperty("--sprite-sheet",`url(${this.args.rotatedSpriteSheet})`)},r=this.viewport.customColor.bindTo("h",e,{wait:0}),n=this.viewport.customColor.bindTo("s",e,{wait:0}),i=this.viewport.customColor.bindTo("v",e,{wait:0});this.onRemove(r),this.onRemove(n),this.onRemove(i),this.viewport.args.mainPallet&&this.costumes[this.viewport.args.mainPallet]&&Object.assign(this.viewport.customColor,this.costumes[this.viewport.args.mainPallet]),this.superSheet=0;const a={f1958e:"cacaca",d3565c:"cacaca",c00020:"b0b0b0",600020:"989898"},s={f1958e:"faf1f1",d3565c:"faf1f1",c00020:"f5dfdf",600020:"eecaca"};this.superSpriteSheetLoaders||(this.superSpriteSheetLoaders=this.png.ready.then(()=>this.superSpriteSheets=[this.png.recolor(a).toUrl(),this.png.recolor(s).toUrl()])),this.hyperSheet=0;const c={f1958e:"fcfcfc",d3565c:"fcfcfc",c00020:"fcfcfc",600020:"fcd8d8"},l={f1958e:"fcfcfc",d3565c:"fcfcfc",c00020:"fcfcfc",600020:"fcd8fc"},u={f1958e:"d8fcfc",d3565c:"d8fcfc",c00020:"fcfcfc",600020:"b4d8fc"},f={f1958e:"d8d8ff",d3565c:"d8d8ff",c00020:"b4b4d8",600020:"a4a4d8"},p={f1958e:"d8fcfc",d3565c:"d8fcfc",c00020:"d8fcd8",600020:"b4fcb4"},h={f1958e:"d8fcfc",d3565c:"d8fcfc",c00020:"d8fcb4",600020:"d8fc48"},g={f1958e:"ffffff",d3565c:"ffffff",c00020:"fcfcfc",600020:"d8d8d8"};this.hyperSpriteSheetLoader||(this.hyperSpriteSheetLoader=this.png.ready.then(()=>this.hyperSpriteSheets=[this.png.recolor(c).toUrl(),this.png.recolor(u).toUrl(),this.png.recolor(l).toUrl(),this.png.recolor(g).toUrl(),this.png.recolor(p).toUrl(),this.png.recolor(f).toUrl(),this.png.recolor(h).toUrl()]))}},{key:"update",value:function(){if(this.isSuper){this.isHyper?(this.viewport.args.frameId%15==0&&(this.hyperSheet++,this.hyperSheet>=this.hyperSpriteSheets.length&&(this.hyperSheet=0)),this.hyperSpriteSheet=this.hyperSpriteSheets[this.hyperSheet],this.args.spriteSheet=`url(${this.hyperSpriteSheet})`):(this.viewport.args.frameId%15==0&&(this.superSheet++,this.superSheet>=this.superSpriteSheets.length&&(this.superSheet=0)),this.superSpriteSheet=this.superSpriteSheets[this.superSheet],this.args.spriteSheet=`url(${this.superSpriteSheet})`);const t=this.isHyper?30:60;this.viewport.args.frameId%t==0&&(this.args.rings<2&&(this.isHyper=!1,this.setProfile()),this.args.rings>0?this.args.rings--:(this.isSuper=!1,this.isHyper=!1,this.setProfile()))}if(this.args.isSuper=this.isSuper,this.args.isHyper=this.isHyper,(!this.args.falling&&this.groundTime>3||this.args.falling&&this.fallTime>90)&&(this.args.twistRamp=!1),this.args.bellySliding&&(this.xAxis=0),this.args.wasHanging&&(this.args.flying=!1),this.args.flying){const t=this.getMapSolidAt(this.args.x+this.args.xSpeed,this.args.y+-18),e=this.getMapSolidAt(this.args.x+this.args.xSpeed,this.args.y),r=this.getMapSolidAt(this.args.x,this.args.y+1);if(e&&!t&&!r)for(;this.getMapSolidAt(this.args.x+this.args.xSpeed,this.args.y);)this.args.y--;this.isHyper&&this.yAxis<-.55&&(this.args.ySpeed-=1.1*this.args.slowGravity),this.args.gravity=this.args.slowGravity,this.flyTime++}else this.args.didBoost=!1,this.args.gravity=this.args.normalGravity,this.flyTime=0;this.args.dead&&(this.punching=!1),1===this.groundTime&&this.punching&&(this.punching=!1,this.readyStart(0,1));const t=this.args.falling,e=this.args.gSpeed;if(this.box){if(!this.args.falling&&this.readyTime&&this.viewport.args.frameId-this.readyTime>36?(this.punched=!1,this.readying=!1,this.willPunch=!1,this.punchTime=!1,this.readyTime=!1,this.punching=!1,Math.sign(this.args.punchMomentum)===Math.sign(this.xAxis)&&(this.args.gSpeed=this.args.punchMomentum),this.args.punchMomentum=0):this.readyTime&&this.xAxis&&Math.abs(this.args.punchMomentum)<20&&(this.args.punchMomentum+=.05*this.xAxis),this.throwing&&this.viewport.args.frameId-this.throwing>20){this.throwing=!1,this.holdBomb=!1;const t=new a.KnuxBomb({x:this.args.x,y:this.args.y-16,owner:this,xSpeed:10*this.args.direction+(2*Math.random()-1),ySpeed:-2*Math.random()});this.viewport.spawn.add({object:t})}if(this.readying=!1,this.punchTime&&this.viewport.args.frameId-this.punchTime>15&&(this.readying=!0),this.punchTime&&this.viewport.args.frameId-this.punchTime>10&&(this.punching=!0),this.punching&&(this.args.rolling=!1),this.punching&&Math.abs(this.args.gSpeed)>10?(this.auraVisible=!0,this.viewport.onFrameOut(6,()=>{this.punchAura.style({display:"none"}),this.auraVisible=!1}),this.punchAura.style({display:"initial"})):(this.auraVisible=!1,this.punchAura.style({display:"none"})),this.stayStuck=!1,this.willStick=!1,this.args.mercy&&(this.args.flying=!1),0===this.yAxis&&(this.args.lookTime=0,this.args.cameraBias=0),t)if(this.args.climbing=!1,this.springing&&(this.args.groundAngle=0),this.args.flying){let t=!1;this.viewport.regionsAtPoint(this.args.x,this.args.y-36);for(const e of this.regions)e.isWater&&(t=!0);if(Math.abs(this.args.xSpeed)>6||Math.abs(this.xAxis)<.55||Math.sign(this.xAxis)===Math.sign(this.args.xSpeed)?this.args.animation=t?"swimming":"flying":Math.sign(this.xAxis)!==Math.sign(this.args.xSpeed)&&(Math.abs(this.args.xSpeed)>3?this.args.animation="flying-turning":this.args.animation="flying-stalled"),this.bMap("checkBelow",this.x,this.y).get(i.Platformer)&&!this.args.climbing&&(this.args.bellySliding=!0,this.args.float=1),this.yAxis>.55)return this.args.flying=!1,void(this.args.ySpeed=8);this.xAxis&&(this.args.flyDirection=Math.sign(this.xAxis)),this.args.direction=Math.sign(this.args.xSpeed),this.args.direction<0?this.args.facing="left":this.args.facing="right";const e=(16+8*Math.abs(this.xAxis))*(t?.5:1);this.args.flyDirection&&Math.abs(this.args.xSpeed)<e&&(this.args.flyDirection!==Math.sign(this.args.xSpeed)?this.args.xSpeed+=.15625*Math.sign(this.args.flyDirection)*4:this.args.xSpeed+=.15625*Math.sign(this.args.flyDirection)),!this.args.didBoost&&Math.abs(this.args.xSpeed)>e&&(this.args.xSpeed-=.1*(this.args.xSpeed-e*Math.sign(this.args.xSpeed))),this.args.ySpeed>2&&Math.abs(this.args.xSpeed)<4&&(this.args.xSpeed+=.1*Math.sign(this.args.xSpeed)),t&&this.args.ySpeed>1&&(this.args.ySpeed=1),!t&&this.args.ySpeed>.5&&(this.args.ySpeed=.5),this.willStick=!0,this.stayStuck=!0,this.args.groundAngle=0}else this.args.jumping&&((Math.abs(this.args.punchMomentum)>8||this.readyTime)&&(this.willPunch||this.punching)?(this.args.animation="uppercut",this.punched++,this.punchAura.style({display:"initial"}),this.auraVisible=!0,this.viewport.onFrameOut(15,()=>{this.punchAura.style({display:"none"}),this.auraVisible=!1})):(this.punched=!1,this.punching=!1,this.args.bellySliding||(this.args.animation="jumping")));else{this.bombsDropped=0,this.springing=!1;const t=this.args.direction,e=this.args.gSpeed,r=Math.abs(e),n=this.args.gSpeedMax;if(this.args.knucklesFlyCoolDown=15,this.args.flying=!1,this.args.bellySliding)this.args.animation="flying";else if(this.args.rolling)this.args.animation="rolling";else if(this.args.climbing){const t=3===this.args.mode?-1:1;if(!this.getMapSolidAt(this.args.x+-t,this.args.y+1))return this.args.direction=-t,this.args.climbing=!1,this.args.facing=t>0?"left":"rigjt",this.args.animation="dropping",this.args.x+=.5*this.args.width*t,this.args.groundAngle=0,this.args.falling=!0,this.args.ySpeed=this.gSpeedLast*(3===this.args.mode?-1:1),this.args.gSpeed=0,void(this.args.mode=0);const e=1===this.args.mode?-1:1,r=16;if(this.args.modeTime<2||0===this.yAxis)this.climbOverCancel||(this.args.animation="climbing",this.args.gSpeed=0);else if(this.yAxis<-.55)if(this.getMapSolidAt(this.args.x+18*e,this.args.y-r)){if(this.args.animation="climbing-up",Math.abs(this.args.gSpeed)<this.climbSpeedMax){const t=[0,1,0,-1][this.args.mode];this.args.direction=t,this.args.gSpeed+=-t}}else this.args.animation="climbing-over",this.climbOverCancel||(this.args.ignore=12,this.args.gSpeed=0,this.climbOverCancel=this.viewport.onFrameOut(12,()=>{this.args.falling?this.climbOverCancel=!1:(this.args.x+=.5*this.args.width*e,this.args.y-=r,this.args.direction=e,this.args.facing=e>0?"right":"left",this.args.climbing=!1,this.climbOverCancel=!1)}));else this.yAxis>.55&&(this.args.animation="climbing-down",Math.abs(this.args.gSpeed)<this.climbSpeedMax&&(this.args.direction=1===this.args.mode?1:-1,this.args.gSpeed+=this.args.direction),this.getMapSolidAt(this.args.x+8*-e,this.args.y+16)&&(this.args.x+=.5*this.args.width*-e,this.args.facing=-e>0?"right":"left",this.args.mode=0,this.args.groundAngle=0,this.args.falling=!0,this.args.animation="standing",this.args.y+=8))}else Math.sign(this.args.gSpeed)!==t&&Math.abs(this.args.gSpeed-t)>5?this.args.animation="skidding":this.holdBomb?this.args.animation="hold-bomb":this.throwing?this.args.animation="throw-bomb":this.readying||this.willPunch?this.args.animation="readying":!this.readying&&this.punched?this.punched%2?this.args.animation="jabbing":this.args.animation="punching":r>.75*n?this.args.animation="running":this.args.moving&&this.args.gSpeed?this.args.animation="walking":this.args.teeter?(this.args.animation="teeter",this.idleTime>56&&(this.args.animation="teeter-2")):this.args.animation="standing";this.args.grinding&&(this.args.rolling=!1,this.args.animation="grinding")}if(this.args.flying?this.springing=!1:(this.args.mode%2==0||this.args.groundAngle)&&(this.args.flyDirection=0),this.args.knucklesFlyCoolDown>0&&this.args.knucklesFlyCoolDown--,v(O(P.prototype),"update",this).call(this),this.willPunch&&!e&&(this.args.gSpeed=0),0!==this.args.mode&&2!==this.args.mode||(this.args.climbing&&2===this.args.mode&&(this.args.groundAngle=0,this.args.falling=!0,this.args.y+=this.args.height),this.args.climbing=!1),this.args.grinding&&!this.args.falling&&this.args.gSpeed){this.args.bellySliding=!1;const t=new o.Tag('<div class = "particle-sparks">'),e=new o.Tag('<div class = "envelope-sparks">');e.appendChild(t.node);const r=this.rotatePoint(1.75*-this.args.gSpeed*this.args.direction,8),n=Math.sign(this.args.gSpeed);e.style({"--x":r[0]+this.x,"--y":r[1]+this.y+-3*Math.random,"z-index":0,"animation-delay":.25*-Math.random()+"s","--xMomentum":Math.max(Math.abs(this.args.gSpeed),4)*n,"--flip":n,"--angle":this.realAngle,opacity:2*Math.random()}),e.particle=t,this.viewport.particles.add(e),this.sparks.add(e),this.viewport.onFrameOut(30,()=>{this.viewport.particles.remove(e),this.sparks.delete(e)})}if(this.args.grinding&&(this.args.rolling=!1,this.args.animation="grinding"),this.args.falling&&this.springing&&this.args.ySpeed>=0?this.args.animation="dropping":this.args.falling&&this.springing&&(this.args.animation="springdash"),this.args.hangingFrom&&(this.args.animation="hanging"),this.args.standingOn&&this.args.standingOn.isVehicle&&(this.args.animation=this.args.standingOn.ridingAnimation||"standing"),this.sparks.size)for(const t of this.sparks){const e=this.rotatePoint(1.75*this.args.direction,8);t.style({opacity:2*Math.random(),"--x":e[0]+this.x,"--y":e[1]+this.y})}this.args.dead&&(this.args.animation="dead"),this.args.twistRamp&&(this.args.animation="side-flip")}else v(O(P.prototype),"update",this).call(this)}},{key:"updateEnd",value:function(){!this.args.falling&&this.punchTime&&this.viewport.args.frameId-this.punchTime>(this.willPunch?90:30)&&(this.args.punchMomentum=0,this.punchTime=!1,this.willPunch=!1,this.punching=!1,this.punched=0),this.args.falling||(this.args.bellySliding?(this.args.rolling=!1,this.args.animation="sliding",this.alwaysSkidding=!0,this.slideTime++):(this.alwaysSkidding=!1,this.slideTime=0),Math.abs(this.args.gSpeed)<1&&(this.args.bellySliding=!1)),v(O(P.prototype),"updateEnd",this).call(this),this.args.falling||(this.dashed=!1)}},{key:"startle",value:function(){this.args.climbing=!1,this.willStick=!1,this.stayStuck=!1,v(O(P.prototype),"startle",this).call(this),this.onNextFrame(()=>this.args.animation="startle")}},{key:"dropBomb",value:function(){this.args.falling&&(this.args.ySpeed=-8);const t=new a.KnuxBomb({x:this.args.x,y:this.args.y-16,owner:this,xSpeed:this.args.xSpeed,ySpeed:-3});this.viewport.spawn.add({object:t})}},{key:"release_0",value:function(){this.args.flying&&(this.args.flying=!1,this.args.ySpeed*=.25)}},{key:"command_0",value:function(){this.args.bellySliding=!1,v(O(P.prototype),"command_0",this).call(this),!this.args.hangingFrom&&this.args.jumping&&!this.willPunch&&this.args.falling&&(this.args.wasHanging||(this.args.falling&&(this.args.punchMomentum=0,this.punching=!1),this.args.direction=Math.sign(this.args.xSpeed)||("left"===this.args.facing?-1:1),this.args.willJump=!1,this.args.flying=!0,this.args.xSpeed=Math.max(4,Math.abs(this.args.xSpeed))*this.args.direction,this.args.ySpeed=Math.max(0,this.args.ySpeed)))}},{key:"readyStart",value:function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;if(this.readyTime&&this.viewport.args.frameId-this.readyTime>20)return;if(this.readyTime=this.viewport.args.frameId,this.args.flying||this.args.climbing||this.args.falling)return;if(this.readyButton=e,this.punchTime&&this.viewport.args.frameId-this.punchTime<9)return this.args.punchMomentum=0,this.willPunch=!1,this.punchTime=!1,void(this.punched=0);this.willPunch=!0;const r=Math.sign(this.xAxis||t||this.args.direction);if(this.args.direction=Math.sign(r||this.args.punchMomentum),this.args.facing=r<0?"left":"right",this.punchTime)return this.args.gSpeed=0,void(this.punchTime=!1);this.args.punchMomentum=Math.abs(this.args.punchMomentum||this.args.gSpeed||4)*Math.sign(r||this.xAxis),this.args.gSpeed=0}},{key:"damage",value:function(t,e){if(this.readyTime)return!1;v(O(P.prototype),"damage",this).call(this,t,e)}},{key:"readyStop",value:function(t,e){if(this.readyTime=!1,this.readyButton!==e)return;if(this.readyButton=!1,this.args.flying||this.args.climbing||this.args.falling)return;if(this.punchTime&&this.viewport.args.frameId-this.punchTime<64)return this.willPunch=!1,void(this.punched=0);this.args.direction="left"===this.args.facing?-1:1;const r=this.args.direction;if(r&&Math.sign(r)!==Math.sign(this.args.punchMomentum)?r&&(this.args.punchMomentum=Math.abs(this.args.punchMomentum)*r,this.args.gSpeed=1*(r?Math.abs(this.args.punchMomentum)*r:this.args.punchMomentum)):this.args.gSpeed=r?Math.abs(this.args.punchMomentum)*r:this.args.punchMomentum,this.args.direction=Math.sign(r||this.args.punchMomentum),this.args.facing=r<0?"left":"right",this.punchTime=this.viewport.args.frameId,this.willPunch=!1,!this.args.falling&&this.args.gSpeed){const t=new o.Tag('<div class = "particle-dust">'),e=Math.sign(this.args.gSpeed)*this.dustDist||0,r=this.rotatePoint(this.args.gSpeed,0);t.style({"--x":r[0]+e+this.x,"--y":r[1]+this.y,"z-index":0,opacity:.5*Math.pow(Math.random(),2)+.5}),viewport.particles.add(t),viewport.onFrameOut(20,()=>{viewport.particles.remove(t)})}this.throwing||this.args.climbing||this.punched++}},{key:"command_1",value:function(){if(this.args.climbing)return this.args.x+=this.args.width/2*(1===this.args.mode?1:-1),void this.bMap("doJump",0);if(this.args.falling)this.readyStart(0,1);else{if(this.cancelReady&&(this.cancelReady(),this.cancelReady=!1),this.args.direction="left"===this.args.facing?-1:1,this.args.punchMomentum=this.args.punchMomentum||this.args.gSpeed||3*(this.args.direction||1),!this.args.gSpeed||!this.punched)return this.readyButton=1,this.punching=!0,this.readyStop(Math.sign(this.args.punchMomentum),1),void(this.cancelReady=this.viewport.onFrameOut(20,()=>this.readyStart(this.args.direction,1)));this.args.gSpeed>10&&(this.punchAura.style({display:"initial"}),this.auraVisible=!0),this.punched=this.punched||1,this.args.gSpeed=0,this.readyStart(0,1)}}},{key:"release_1",value:function(){this.args.falling||(this.willPunch?this.readyStop(0,1):this.punchTime&&this.viewport.args.frameId-this.punchTime<220||this.punchTime&&this.viewport.args.frameId-this.punchTime>320||this.args.gSpeed||this.cancelReady||(this.cancelReady=this.viewport.onFrameOut(40,()=>this.readyStart(this.args.direction,1))))}},{key:"command_4",value:function(){this.readyStart(-1,4)}},{key:"release_4",value:function(){this.readyStop(-1,4)}},{key:"command_5",value:function(){this.readyStart(1,5)}},{key:"release_5",value:function(){this.readyStop(1,5)}},{key:"command_2",value:function(){}},{key:"release_2",value:function(){this.args.falling||this.args.climbing||Math.abs(this.args.gSpeed)>3||this.holdBomb&&(this.args.ignore=4,this.holdBomb=!1,this.throwing=this.viewport.args.frameId)}},{key:"setCameraMode",value:function(){this.args.climbing?this.args.cameraMode="climbing":v(O(P.prototype),"setCameraMode",this).call(this)}},{key:"collideA",value:function(t){t instanceof c.Spring&&this.onNextFrame(()=>{this.args.falling&&!this.args.hangingFrom&&(this.springing=!0,this.args.animation="springdash")}),t.pop&&this.isHyper&&t.pop(this)}},{key:"rotateMainColor",value:function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;const n={f1958e:new g.Color("f1958e").rotate(t,e,r).toString(),d3565c:new g.Color("d3565c").rotate(t,e,r).toString(),c00020:new g.Color("c00020").rotate(t,e,r).toString(),600020:new g.Color("600020").rotate(t,e,r).toString()};this.png.ready.then(()=>{const t=this.png.recolor(n);this.args.rotatedSpriteSheet=this.rotatedSpriteSheet=this.spriteSheet=t.toUrl(),this.args.spriteSheet=`url('${this.args.rotatedSpriteSheet}')`})}},{key:"setProfile",value:function(){this.isHyper?(this.args.spriteSheet=`url('${this.hyperSpriteSheet}')`,this.args.gSpeedMax=this.gSpeedMaxHyper,this.args.jumpForce=this.jumpForceHyper,this.climbSpeedMax=this.climbSpeedMaxSuper,this.args.accel=this.accelSuper):this.isSuper?(this.args.spriteSheet=`url('${this.superSpriteSheet}')`,this.args.gSpeedMax=this.gSpeedMaxSuper,this.args.jumpForce=this.jumpForceSuper,this.climbSpeedMax=this.climbSpeedMaxSuper,this.args.accel=this.accelSuper):(this.args.spriteSheet=`url('${this.rotatedSpriteSheet}')`,this.args.gSpeedMax=this.gSpeedMaxNormal,this.args.jumpForce=this.jumpForceNormal,this.climbSpeedMax=this.climbSpeedMaxNormal,this.args.accel=this.accelNormal)}},{key:"command_3",value:function(){}},{key:"solid",get:function(){return!1}},{key:"canRoll",get:function(){return!this.args.climbing}},{key:"canFly",get:function(){return!0}},{key:"isEffect",get:function(){return!1}},{key:"controllable",get:function(){return!this.args.npc}}])&&b(e.prototype,r),y&&b(e,y),Object.defineProperty(e,"prototype",{writable:!1}),P}();t.Knuckles=x}),require.register("actor/KnuxBomb.js",function(t,e,r){"use strict";function n(t){"@babel/helpers - typeof";return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(t,"__esModule",{value:!0}),t.KnuxBomb=void 0;var i=e("./PointActor"),o=(e("../actor/Explosion"),e("curvature/base/Tag"));e("../region/Region"),e("./Spring");function a(t,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,(o=i.key,void 0,"symbol"===n(a=function(t,e){if("object"!==n(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var i=r.call(t,e||"default");if("object"!==n(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(o,"string"))?a:String(a)),i)}var o,a}function s(){return(s="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=u(t)););return t}(t,e);if(n){var i=Object.getOwnPropertyDescriptor(n,e);return i.get?i.get.call(arguments.length<3?t:r):i.value}}).apply(this,arguments)}function c(t,e){return(c=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function l(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,i=u(t);if(e){var o=u(this).constructor;r=Reflect.construct(i,arguments,o)}else r=i.apply(this,arguments);return function(t,e){if(e&&("object"===n(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function u(t){return(u=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}let f=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&c(t,e)}(p,i.PointActor);var e,r,n,f=l(p);function p(){var t;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,p);for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];return(t=f.call(this,...r)).args.type="actor-item actor-knux-bomb",t.args.width=16,t.args.height=16,t.removeTimer=null,t}return e=p,(r=[{key:"update",value:function(){this.removed||(s(u(p.prototype),"update",this).call(this),this.args.xSpeed||this.args.ySpeed||this.args.gSpeed||(this.removeTimer=this.onTimeout(250,()=>this.explode())),this.removeTimer||(this.removeTimer=this.onTimeout(1500,()=>this.explode())))}},{key:"explode",value:function(){const t=this.viewport;if(!t)return;const e=new o.Tag('<div class = "particle-explosion">');e.style({"--x":this.x,"--y":this.y}),t.particles.add(e),setTimeout(()=>t.particles.remove(e),350),this.viewport.actors.remove(this),this.remove()}},{key:"canStick",get:function(){return!1}},{key:"solid",get:function(){return!1}}])&&a(e.prototype,r),n&&a(e,n),Object.defineProperty(e,"prototype",{writable:!1}),p}();t.KnuxBomb=f}),require.register("actor/LavaBall.js",function(t,e,r){"use strict";function n(t){"@babel/helpers - typeof";return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(t,"__esModule",{value:!0}),t.LavaBall=void 0;var i=e("./PointActor");function o(t,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,(o=i.key,void 0,"symbol"===n(a=function(t,e){if("object"!==n(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var i=r.call(t,e||"default");if("object"!==n(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(o,"string"))?a:String(a)),i)}var o,a}function a(){return(a="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=l(t)););return t}(t,e);if(n){var i=Object.getOwnPropertyDescriptor(n,e);return i.get?i.get.call(arguments.length<3?t:r):i.value}}).apply(this,arguments)}function s(t,e){return(s=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function c(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,i=l(t);if(e){var o=l(this).constructor;r=Reflect.construct(i,arguments,o)}else r=i.apply(this,arguments);return function(t,e){if(e&&("object"===n(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function l(t){return(l=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}let u=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&s(t,e)}(f,i.PointActor);var e,r,n,u=c(f);function f(){var t;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,f);for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];return(t=u.call(this,...r)).args.width=16,t.args.height=16,t.args.float=0,t.args.type="actor-item actor-lava-ball",t.args.jumpForce=7.25,t.args.gravity=.2,t.args.density=25,t}return e=f,(r=[{key:"onRendered",value:function(){a(l(f.prototype),"onRendered",this).call(this),this.autoAttr.get(this.box)["data-color"]="color"}},{key:"update",value:function(){a(l(f.prototype),"update",this).call(this),(this.viewport.args.frameId+(this.args.offset||0))%45==0&&(this.willJump=!0),this.args.hidden=!this.willJump&&!this.args.falling}},{key:"collideA",value:function(t,e){return t.controllable&&this.args.falling&&t.damage(this),a(l(f.prototype),"collideA",this).call(this,t,e)}}])&&o(e.prototype,r),n&&o(e,n),Object.defineProperty(e,"prototype",{writable:!1}),f}();t.LavaBall=u}),require.register("actor/LayerController.js",function(t,e,r){"use strict";function n(t){"@babel/helpers - typeof";return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(t,"__esModule",{value:!0}),t.LayerController=void 0;var i=e("./PointActor");function o(t,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,(o=i.key,void 0,"symbol"===n(a=function(t,e){if("object"!==n(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var i=r.call(t,e||"default");if("object"!==n(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(o,"string"))?a:String(a)),i)}var o,a}function a(t,e){return(a=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function s(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,i=c(t);if(e){var o=c(this).constructor;r=Reflect.construct(i,arguments,o)}else r=i.apply(this,arguments);return function(t,e){if(e&&("object"===n(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function c(t){return(c=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}let l=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&a(t,e)}(l,i.PointActor);var e,r,n,c=s(l);function l(t,e){var r,n,i;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,l),(i=c.call(this,t,e)).args.activated=!1,i.args.xLayer=0,i.args.yLayer=0,i.args.xLayerSpeed=0,i.args.yLayerSpeed=0,i.args.yLayerSpeedMax=i.args.yLayerSpeedMax||9,i.args.fall=null===(r=i.args.fall)||void 0===r||r,i.args.xLayerLimit=i.args.xLayerLimit||null,i.args.yLayerLimit=i.args.yLayerLimit||null,i.args.yQuake=null!==(n=i.args.yQuake)&&void 0!==n?n:5,i.args.static=!0,i.args.hidden=!0,i}return e=l,(r=[{key:"updateStart",value:function(){if(!this.viewport)return;this.args.activated&&this.args.fall&&(this.args.yLayerSpeed+=.25),this.args.activated&&this.args.swim&&(this.args.xLayerSpeed+=1),this.args.yLayerSpeed>this.args.yLayerSpeedMax&&this.args.yLayerSpeedMax>0&&(this.args.yLayerSpeed=this.args.yLayerSpeedMax),this.args.xLayerSpeed>this.args.xLayerSpeedMax&&this.args.xLayerSpeedMax>0&&(this.args.xLayerSpeed=this.args.xLayerSpeedMax),this.args.yLayerSpeed&&(this.args.yLayer=Math.round(this.args.yLayer+this.args.yLayerSpeed||0)),this.args.xLayerSpeed&&(this.args.xLayer=Math.round(this.args.xLayer+this.args.xLayerSpeed||0));const t=this.viewport.tileMap.mapData.tileheight,e=this.viewport.tileMap.mapData.width,r=this.viewport.tileMap.mapData.height,n=this.viewport.tileMap.meta.wrapX?1/0:e*t,i=this.viewport.tileMap.meta.wrapY?1/0:r*t;if(this.args.yLayerLimit>0&&this.args.yLayer>i&&this.args.yLayer>this.args.yLayerLimit){if(this.args.yLayerSpeed=0,this.args.yLayer=this.args.yLayerLimit,this.args.target){const t=this.viewport.actorsById[this.args.target];this.viewport.auras.delete(t)}this.viewport.auras.delete(this)}if(this.args.xLayerLimit>0&&(this.args.xLayer>n||this.args.xLayer>this.args.xLayerLimit)){if(this.args.xLayerSpeed=0,this.args.xLayer=this.args.xLayerLimit,this.args.target){const t=this.viewport.actorsById[this.args.target];this.viewport.auras.delete(t)}this.viewport.auras.delete(this)}}},{key:"activate",value:function(t,e){var r;if(!this.args.activated&&(t&&(this.args.x=t.x,this.args.y=t.y),this.viewport.auras.add(this),this.viewport.args.shakeY=this.args.yQuake,this.viewport.onFrameOut(90,()=>{this.args.activated=!0}),this.args.yLayerLimit=null!==(r=this.args.yLayerLimit)&&void 0!==r?r:4096,this.args.target&&this.viewport.actorsById[this.args.target])){const e=this.viewport.actorsById[this.args.target];this.viewport.auras.add(e),e.activate(t,this)}}}])&&o(e.prototype,r),n&&o(e,n),Object.defineProperty(e,"prototype",{writable:!1}),l}();t.LayerController=l}),require.register("actor/LayerSwitch.js",function(t,e,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LayerSwitch=void 0;var n=e("./PointActor");function i(t){"@babel/helpers - typeof";return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function o(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,f(n.key),n)}}function a(t,e){return(a=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function s(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=u(t);if(e){var o=u(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===i(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return c(t)}(this,r)}}function c(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function l(){return(l="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=u(t)););return t}(t,e);if(n){var i=Object.getOwnPropertyDescriptor(n,e);return i.get?i.get.call(arguments.length<3?t:r):i.value}}).apply(this,arguments)}function u(t){return(u=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function f(t){var e=function(t,e){if("object"!==i(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==i(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===i(e)?e:String(e)}let p=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&a(t,e)}(h,n.PointActor);var e,r,i,p=s(h);function h(){var t,e,r,n,i,o;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,h);for(var a=arguments.length,s=new Array(a),l=0;l<a;l++)s[l]=arguments[l];return r=p.call(this,...s),n=c(r),o=-1,(i=f(i="float"))in n?Object.defineProperty(n,i,{value:o,enumerable:!0,configurable:!0,writable:!0}):n[i]=o,r.args.type="actor-item actor-layer-switch",r.args.width=32,r.args.height=32,r.args.static=!0,r.args.fromLayer=null!==(t=r.args.fromLayer)&&void 0!==t?t:1,r.args.toLayer=null!==(e=r.args.toLayer)&&void 0!==e?e:2,r}return e=h,i=[{key:"fromDef",value:function(t){const e=l(u(h),"fromDef",this).call(this,t);return e.args.width=t.width,e.args.height=t.height,e}}],(r=[{key:"onAttach",value:function(t){return t&&t.preventDefault(),!1}},{key:"collideA",value:function(t,e){let r=t.args.gSpeed||t.args.xSpeed||t.args.direction||t.xAxis,n=!!Number(this.args.back),i=!!Number(this.args.roll);2===t.args.mode||t.args.mode;const o=this.args.width/2,a=this.args.x,s=this.args.y,c=t.args.x,l=t.args.y;if(c<a+-o+0||c>a+o+-0)return;if(l<s+-this.args.height||t.y>s)return;if(this.args.allow||this.args.disallow)return this.args.allow&&t.doorMap.set(Number(this.args.allow),!1),void(this.args.disallow&&t.doorMap.set(Number(this.args.disallow),!0));if(i&&(!t.args.rolling||t.args.height>28))return t.args.layer=u===this.args.fromLayer?this.args.toLayer:this.args.fromLayer,!1;n&&t.args.falling&&(r=t.args.xSpeed||t.args.direction,n=!n);let u=t.args.layer,f=this.args.fromLayer;r>0&&(u=n?this.args.fromLayer:this.args.toLayer,f=n?this.args.toLayer:this.args.fromLayer),r<0&&(u=n?this.args.toLayer:this.args.fromLayer,f=n?this.args.fromLayer:this.args.toLayer),this.viewport.tileMap.getSolid(c,l,u)?this.viewport.onFrameOut(1,()=>{this.viewport.tileMap.getSolid(c,l,u)||(t.args.layer=u)}):t.args.layer&&t.args.layer!==f||(t.args.layer=u)}},{key:"solid",get:function(){return!1}},{key:"isEffect",get:function(){return!0}}])&&o(e.prototype,r),i&&o(e,i),Object.defineProperty(e,"prototype",{writable:!1}),h}();t.LayerSwitch=p}),require.register("actor/LightSource.js",function(t,e,r){"use strict";function n(t){"@babel/helpers - typeof";return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(t,"__esModule",{value:!0}),t.LightSource=void 0;var i=e("./PointActor");function o(t,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,(o=i.key,void 0,"symbol"===n(a=function(t,e){if("object"!==n(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var i=r.call(t,e||"default");if("object"!==n(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(o,"string"))?a:String(a)),i)}var o,a}function a(t,e){return(a=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function s(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,i=l(t);if(e){var o=l(this).constructor;r=Reflect.construct(i,arguments,o)}else r=i.apply(this,arguments);return function(t,e){if(e&&("object"===n(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function c(){return(c="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=l(t)););return t}(t,e);if(n){var i=Object.getOwnPropertyDescriptor(n,e);return i.get?i.get.call(arguments.length<3?t:r):i.value}}).apply(this,arguments)}function l(t){return(l=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}let u=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&a(t,e)}(f,i.PointActor);var e,r,n,u=s(f);function f(){var t;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,f);for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];return(t=u.call(this,...r)).args.type="actor-item actor-light-source",t.args.hidden=!0,t.args.static=!0,t.args.float=-1,t}return e=f,n=[{key:"fromDef",value:function(t){const e=c(l(f),"fromDef",this).call(this,t);return t.polygon&&(e.args.polygon=t.polygon.map(t=>Object.assign({},t))),e}}],(r=[{key:"solid",get:function(){return!1}}])&&o(e.prototype,r),n&&o(e,n),Object.defineProperty(e,"prototype",{writable:!1}),f}();t.LightSource=u}),require.register("actor/Magnet.js",function(t,e,r){"use strict";function n(t){"@babel/helpers - typeof";return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(t,"__esModule",{value:!0}),t.Magnet=void 0;var i=e("./PointActor"),o=e("curvature/base/Mixin"),a=e("../mixin/Constrainable");function s(t,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,(o=i.key,void 0,"symbol"===n(a=function(t,e){if("object"!==n(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var i=r.call(t,e||"default");if("object"!==n(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(o,"string"))?a:String(a)),i)}var o,a}function c(){return(c="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=f(t)););return t}(t,e);if(n){var i=Object.getOwnPropertyDescriptor(n,e);return i.get?i.get.call(arguments.length<3?t:r):i.value}}).apply(this,arguments)}function l(t,e){return(l=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function u(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,i=f(t);if(e){var o=f(this).constructor;r=Reflect.construct(i,arguments,o)}else r=i.apply(this,arguments);return function(t,e){if(e&&("object"===n(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function f(t){return(f=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}let p=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&l(t,e)}(h,o.Mixin.from(i.PointActor,a.Constrainable));var e,r,n,p=u(h);function h(){var t;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,h);for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];return(t=p.call(this,...r)).args.gravity=.8,t.args.width=48,t.args.height=28,t.args.type="actor-item actor-magnet",t}return e=h,(r=[{key:"collideA",value:function(t,e){}},{key:"collideB",value:function(t){t.controllable}},{key:"update",value:function(){c(f(h.prototype),"update",this).call(this),this.setPos()}}])&&s(e.prototype,r),n&&s(e,n),Object.defineProperty(e,"prototype",{writable:!1}),h}();t.Magnet=p}),require.register("actor/MarbleBlock.js",function(t,e,r){"use strict";function n(t){"@babel/helpers - typeof";return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(t,"__esModule",{value:!0}),t.MarbleBlock=void 0;var i=e("./PointActor"),o=e("../behavior/Platformer");function a(t,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,(o=i.key,void 0,"symbol"===n(a=function(t,e){if("object"!==n(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var i=r.call(t,e||"default");if("object"!==n(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(o,"string"))?a:String(a)),i)}var o,a}function s(){return(s="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=u(t)););return t}(t,e);if(n){var i=Object.getOwnPropertyDescriptor(n,e);return i.get?i.get.call(arguments.length<3?t:r):i.value}}).apply(this,arguments)}function c(t,e){return(c=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function l(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,i=u(t);if(e){var o=u(this).constructor;r=Reflect.construct(i,arguments,o)}else r=i.apply(this,arguments);return function(t,e){if(e&&("object"===n(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function u(t){return(u=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}let f=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&c(t,e)}(p,i.PointActor);var e,r,n,f=l(p);function p(){var t;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,p);for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];return(t=f.call(this,...r)).args.type="actor-item actor-block-marble",t.args.width=32,t.args.height=32,t.args.spriteSheet=t.args.spriteSheet||"/Sonic/marble-zone-block.png",t}return e=p,(r=[{key:"collideA",value:function(t,e){if(s(u(p.prototype),"collideA",this).call(this,t,e),t.isEffect)return!1;if(!this.isPushable)return!0;let r=Math.ceil(Math.abs(t.args.gSpeed||t.args.xSpeed))*Math.sign(t.args.gSpeed||t.args.xSpeed);if(!this.args.falling&&1===e&&r<=0)return!1;if(!this.args.falling&&3===e&&r>=0)return!1;const n=this.y-this.args.height;if((1===e||3===e)&&(t.y>=this.y||t.y>n)){if(!r)return!0;if(this.args.pushed=Math.sign(t.args.gSpeed)||this.args.pushed,this.args.pushed<0&&this.getMapSolidAt(this.x-Math.ceil(this.args.width/2)-1,this.y+-4))return!0;if(this.args.pushed>0&&this.getMapSolidAt(this.x+Math.ceil(this.args.width/2)+1,this.y+-4))return!0;const n=this.viewport.tileMap,i=1===e?1:3===e&&-1;if(n.getSolid(this.x+Math.ceil(this.args.width/2)*i,this.y+-4))return!0;this.args.width;if(!this.args.falling){const e=this.bMap("findNextStep",i).get(o.Platformer);if(e[2]){const t=this.scanBottomEdge(i);t&&t<=.5*(this.args.width+this.args.width%2)&&(this.args.xSpeed=Math.sign(i),this.args.x+=t*Math.sign(i))}else if(!e[3]){const r=t.args.width/2,n=this.args.width/2;if(Math.trunc(Math.abs(this.x-t.x))<=1+r+n){this.args.x+=e[0],this.args.y-=e[1];const r=Math.sign(t.args.gSpeed);Math.sign(this.x-t.x)===r&&(t.args.pushing=r);const n=this.args.weight/t.args.weight;t.args.gSpeed-=.005*n*Math.sign(t.args.gSpeed)}return!1}return!0}}return!(t.args.ySpeed<0)}},{key:"onAttach",value:function(){this.args.spriteSheet=this.args.spriteSheet||"/Sonic/marble-zone-block.png",this.viewport&&this.setTile()}},{key:"isPushable",get:function(){return!0}},{key:"canStick",get:function(){return!1}},{key:"solid",get:function(){return!0}},{key:"rotateLock",get:function(){return!0}}])&&a(e.prototype,r),n&&a(e,n),Object.defineProperty(e,"prototype",{writable:!1}),p}();t.MarbleBlock=f}),require.register("actor/Marker.js",function(t,e,r){"use strict";function n(t){"@babel/helpers - typeof";return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(t,"__esModule",{value:!0}),t.Marker=void 0;var i=e("./PointActor");function o(t,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,(o=i.key,void 0,"symbol"===n(a=function(t,e){if("object"!==n(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var i=r.call(t,e||"default");if("object"!==n(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(o,"string"))?a:String(a)),i)}var o,a}function a(t,e){return(a=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function s(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,i=c(t);if(e){var o=c(this).constructor;r=Reflect.construct(i,arguments,o)}else r=i.apply(this,arguments);return function(t,e){if(e&&("object"===n(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function c(t){return(c=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}let l=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&a(t,e)}(l,i.PointActor);var e,r,n,c=s(l);function l(){var t;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,l);for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];return(t=c.call(this,...r)).args.type="actor-item actor-marker",t.args.width=64,t.args.height=64,t.args.float=-1,t}return e=l,(r=[{key:"solid",get:function(){return!1}}])&&o(e.prototype,r),n&&o(e,n),Object.defineProperty(e,"prototype",{writable:!1}),l}();t.Marker=l}),require.register("actor/Meanie.js",function(t,e,r){"use strict";function n(t){"@babel/helpers - typeof";return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(t,"__esModule",{value:!0}),t.Meanie=void 0;e("./Flickie");var i=e("curvature/base/Mixin"),o=e("./PointActor"),a=e("../behavior/Patrol"),s=e("../mixin/CanPop"),c=e("../ObjectPalette");function l(t,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,(o=i.key,void 0,"symbol"===n(a=function(t,e){if("object"!==n(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var i=r.call(t,e||"default");if("object"!==n(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(o,"string"))?a:String(a)),i)}var o,a}function u(){return(u="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=h(t)););return t}(t,e);if(n){var i=Object.getOwnPropertyDescriptor(n,e);return i.get?i.get.call(arguments.length<3?t:r):i.value}}).apply(this,arguments)}function f(t,e){return(f=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function p(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,i=h(t);if(e){var o=h(this).constructor;r=Reflect.construct(i,arguments,o)}else r=i.apply(this,arguments);return function(t,e){if(e&&("object"===n(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function h(t){return(h=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}let g=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&f(t,e)}(d,i.Mixin.from(o.PointActor,s.CanPop));var e,r,n,g=p(d);function d(){var t,e,r,n,i;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,d);for(var o=arguments.length,s=new Array(o),c=0;c<o;c++)s[c]=arguments[c];return(i=g.call(this,...s)).behaviors.add(new a.Patrol),i.args.type="actor-item actor-meanie",i.args.animation="standing",i.args.accel=.1,i.args.decel=.5,i.args.gSpeedMax=5,i.args.jumpForce=5,i.args.gravity=.5,i.args.width=16,i.args.height=29,i.willStick=!1,i.stayStuck=!1,i.args.patrolPause=null!==(t=i.args.patrolPause)&&void 0!==t?t:40,i.args.patrolBeat=null!==(e=i.args.patrolBeat)&&void 0!==e?e:140,i.args.patrolSpeed=null!==(r=i.args.patrolSpeed)&&void 0!==r?r:1,i.args.hatType=null!==(n=i.args.hatType)&&void 0!==n?n:"pumpkin",i.args.maxBoost=0,i}return e=d,(r=[{key:"wakeUp",value:function(t){this.viewport&&!this.hat&&c.ObjectPalette[this.args.hatType]&&(this.hat=new c.ObjectPalette[this.args.hatType],this.viewport.spawn.add({object:this.hat}),this.hat.args.float=-1,this.hat.noClip=!0,this.hat.args.x=this.args.x,this.hat.args.y=this.args.y+14,this.viewport.setColCell(this.hat),this.args.hatType&&(this.hat.args.face=!0))}},{key:"update",value:function(){this.args.maxBoost=Math.max(this.args.ySpeed,this.args.maxBoost);this.args.direction,this.args.shotTelegraph,this.args.patrolBeat;this.box&&(this.args.moving&&this.args.gSpeed?this.box.setAttribute("data-animation","walking"):this.box.setAttribute("data-animation","standing")),u(h(d.prototype),"update",this).call(this),this.args.groundAngle=0,this.args.mode=0,this.args.direction=Math.sign(this.args.xSpeed||this.args.gSpeed),this.args.falling||this.jumpTimer||(this.jumpTimer=this.viewport.onFrameOut(2,()=>{this.args.ySpeed=-Math.min(this.args.maxBoost,9),this.args.xSpeed=this.args.gSpeed,this.args.falling=!0,this.fallTime=0,this.jumpTimer=!1})),this.hat&&(this.hat.args.direction=this.args.direction,this.hat.args.x=this.args.x,this.hat.args.y=this.args.y,this.fallTime>9||this.fallTime<5?this.hat.args.y+=-14:this.hat.args.y+=-10,this.hat.args.z=this.args.z+1,this.viewport&&this.viewport.setColCell(this.hat))}},{key:"effect",value:function(t){u(h(d.prototype),"effect",this).call(this,t)}},{key:"pop",value:function(t){if(!t||t.controllable){if(this.hat){const e=this.hat;if(this.viewport.onFrameOut(3,()=>{t?(this.args.xSpeed+=-2*(Math.sign(t.args.xSpeed||t.args.gSpeed)||1),e.args.xSpeed=-4*(Math.sign(t.args.xSpeed||t.args.gSpeed)||1),e.args.ySpeed=Math.min(-4,-Math.abs(t.args.ySpeed)),e.args.float=1):e.args.float=10,e.noClip=!1,this.hat=null}),!t.args.rolling)return void(t&&(this.ignores.set(t,10),t.args.gSpeed*=-1,t.args.xSpeed*=-1,t.args.ySpeed=-4,t.args.xSpeed=Math.min(Math.abs(t.args.xSpeed),6)*Math.sign(t.args.xSpeed)))}return u(h(d.prototype),"pop",this).call(this,t)}}},{key:"solid",get:function(){return!1}},{key:"isEffect",get:function(){return!1}}])&&l(e.prototype,r),n&&l(e,n),Object.defineProperty(e,"prototype",{writable:!1}),d}();t.Meanie=g}),require.register("actor/MechaFroggy.js",function(t,e,r){"use strict";function n(t){"@babel/helpers - typeof";return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(t,"__esModule",{value:!0}),t.MechaFroggy=void 0;var i=e("./PointActor"),o=e("curvature/base/Tag"),a=e("../behavior/SkidDust");e("../actor/Explosion"),e("../actor/Projectile");function s(t,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,(o=i.key,void 0,"symbol"===n(a=function(t,e){if("object"!==n(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var i=r.call(t,e||"default");if("object"!==n(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(o,"string"))?a:String(a)),i)}var o,a}function c(){return(c="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=f(t)););return t}(t,e);if(n){var i=Object.getOwnPropertyDescriptor(n,e);return i.get?i.get.call(arguments.length<3?t:r):i.value}}).apply(this,arguments)}function l(t,e){return(l=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function u(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,i=f(t);if(e){var o=f(this).constructor;r=Reflect.construct(i,arguments,o)}else r=i.apply(this,arguments);return function(t,e){if(e&&("object"===n(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function f(t){return(f=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}let p=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&l(t,e)}(h,i.PointActor);var e,r,n,p=u(h);function h(){var t;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,h);for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];return(t=p.call(this,...r)).behaviors.add(new a.SkidDust),t.args.type="actor-item actor-mecha-froggy",t.args.animation="standing",t.args.accel=.7,t.args.decel=.5,t.args.gSpeedMax=10,t.args.jumpForce=15,t.args.gravity=.5,t.args.width=15,t.args.height=32,t.willStick=!1,t.stayStuck=!1,t}return e=h,(r=[{key:"update",value:function(){const t=this.args.direction;this.flame||(this.flame=new o.Tag('<div class = "mecha-froggy-flame">'),this.sprite.appendChild(this.flame.node)),this.args.jumping&&!this.args.falling||(Math.sign(this.args.gSpeed)!==t&&Math.abs(this.args.gSpeed-t)>5?this.box.setAttribute("data-animation","skidding"):this.args.moving&&this.args.gSpeed&&Math.abs(this.args.gSpeed)>=10?this.box.setAttribute("data-animation","running"):this.args.moving&&this.args.gSpeed&&Math.abs(this.args.gSpeed)?this.box.setAttribute("data-animation","walking"):this.box.setAttribute("data-animation","standing")),this.args.jumping&&this.box.setAttribute("data-animation","jumping"),c(f(h.prototype),"update",this).call(this)}},{key:"solid",get:function(){return!1}},{key:"isEffect",get:function(){return!1}},{key:"controllable",get:function(){return!0}}])&&s(e.prototype,r),n&&s(e,n),Object.defineProperty(e,"prototype",{writable:!1}),h}();t.MechaFroggy=p}),require.register("actor/MechaSonic.js",function(t,e,r){"use strict";function n(t){"@babel/helpers - typeof";return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(t,"__esModule",{value:!0}),t.MechaSonic=void 0;var i=e("./PointActor"),o=e("../behavior/Platformer"),a=(e("./Vehicle"),e("curvature/base/Tag")),s=e("../audio/Sfx"),c=e("../behavior/SkidDust");function l(t,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,(o=i.key,void 0,"symbol"===n(a=function(t,e){if("object"!==n(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var i=r.call(t,e||"default");if("object"!==n(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(o,"string"))?a:String(a)),i)}var o,a}function u(){return(u="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=h(t)););return t}(t,e);if(n){var i=Object.getOwnPropertyDescriptor(n,e);return i.get?i.get.call(arguments.length<3?t:r):i.value}}).apply(this,arguments)}function f(t,e){return(f=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function p(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,i=h(t);if(e){var o=h(this).constructor;r=Reflect.construct(i,arguments,o)}else r=i.apply(this,arguments);return function(t,e){if(e&&("object"===n(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function h(t){return(h=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}let g=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&f(t,e)}(d,i.PointActor);var e,r,n,g=p(d);function d(){var t;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,d);for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];return(t=g.call(this,...r)).behaviors.add(new c.SkidDust("particle-sparks")),t.args.type="actor-item actor-mecha-sonic",t.args.accel=.1,t.args.decel=.3,t.args.skidTraction=2,t.args.gSpeedMax=18,t.args.jumpForce=11,t.args.gravity=.5,t.args.takeoffPlayed=!1,t.args.rollingHeight=28,t.args.normalHeight=44,t.args.width=18,t.args.height=t.args.normalHeight,t.args.bindTo("falling",e=>{e||t.landSound()}),t}return e=d,(r=[{key:"onRendered",value:function(t){u(h(d.prototype),"onRendered",this).call(this,t),this.box=this.findTag("div"),this.sprite=this.findTag("div.sprite")}},{key:"update",value:function(){if(!this.sprite)return;const t=this.args.falling;this.args.accel=.1;const e=this.args.direction,r=this.args.gSpeed,n=Math.abs(r),i=.5*this.args.gSpeedMax;this.flame||(this.sparks=new a.Tag('<div class = "mecha-sonic-sparks">'),this.flame=new a.Tag('<div class = "mecha-sonic-flame">'),this.sprite.appendChild(this.sparks.node),this.sprite.appendChild(this.flame.node)),this.viewport.args.audio&&!this.thrusterSound&&(this.thrusterSound=new Audio("/Sonic/mecha-sonic-thruster.wav"),this.scrapeSound=new Audio("/Sonic/mecha-sonic-scrape.wav"),this.scrapeSound.volume=.1,this.thrusterSound.loop=!0,this.scrapeSound.loop=!0),this.thrusterSound&&(this.thrusterSound.volume=.15+-.05*Math.random(),this.thrusterSound.currentTime>1.5&&(this.thrusterSound.currentTime=.5),this.scrapeSound.currentTime>1.5&&(this.scrapeSound.currentTime=.5)),t||(this.dashed=!1),this.args.rolling||t?this.args.rolling?(this.scrapeSound&&this.scrapeSound.pause(),"curling"!==this.args.animation&&"uncurling"!==this.args.animation&&"rolling"!==this.args.animation&&"jumping"!==this.args.animation&&(this.args.animation="crouching",this.onTimeout(200,()=>{this.args.rolling&&(this.args.animation="rolling",this.closeThruster())}))):(this.scrapeSound&&this.scrapeSound.pause(),this.dashed?this.args.animation="running2":"rolling"!==this.args.animation&&"jumping"!==this.args.animation&&"uncurling"!==this.args.animation&&"curling"!==this.args.animation&&"crouching"!==this.args.animation?(this.args.animation="curling",this.onTimeout(200,()=>{s.Sfx.play("MECHASONIC_SLAP"),this.args.falling&&(this.dashed?this.args.animation="running2":this.args.jumping&&(this.args.animation="jumping"),this.closeThruster())})):this.args.jumping||(this.args.animation="crouching")):(this.yAxis>0?this.args.crouching=!0:this.args.crouching=!1,Math.sign(this.args.gSpeed)!==e&&Math.abs(this.args.gSpeed-e)>5?(this.scrapeSound&&this.scrapeSound.play(),this.args.animation="skidding"):n>=i?(this.scrapeSound&&this.scrapeSound.pause(),this.args.animation="running2",this.thrusterSound&&this.thrusterSound.play(),this.args.takeoffPlayed||(this.args.takeoffPlayed=!0,s.Sfx.play("MECHASONIC_TAKEOFF")),this.args.accel=.75,n>75&&(this.args.accel=.03)):n>=10?(this.scrapeSound&&this.scrapeSound.play(),this.args.animation="running"):this.args.moving&&r?(this.scrapeSound&&this.scrapeSound.play(),"curling"===this.args.animation||"jumping"===this.args.animation||"rolling"===this.args.animation?(this.args.animation="uncurling",this.onTimeout(128,()=>{this.args.animation="walking"})):"standing"!==this.args.animation&&"running"!==this.args.animation&&"running2"!==this.args.animation||(this.args.animation="walking")):this.args.crouching||this.standingOn&&this.standingOn.isVehicle?this.args.animation="crouching":(this.scrapeSound&&this.scrapeSound.pause(),"curling"===this.args.animation||"jumping"===this.args.animation||"rolling"===this.args.animation?(this.args.animation="uncurling",this.onTimeout(128,()=>{this.args.animation="standing"})):"walking"!==this.args.animation&&"running"!==this.args.animation&&"running2"!==this.args.animation&&"skidding"!==this.args.animation&&"crouching"!==this.args.animation&&"rolling"!==this.args.animation||(this.args.animation="standing")),n<i&&this.closeThruster()),u(h(d.prototype),"update",this).call(this)}},{key:"closeThruster",value:function(){this.args.takeoffPlayed&&this.landSound(),this.args.takeoffPlayed=!1,this.thrusterSound&&this.thrusterSound.pause()}},{key:"landSound",value:function(){s.Sfx.play("MECHASONIC_SLAP")}},{key:"sleep",value:function(){this.thrusterSound&&this.thrusterSound.pause(),this.scrapeSound&&this.scrapeSound.pause()}},{key:"command_5",value:function(){this.args.falling&&this.airDash(1)}},{key:"command_4",value:function(){this.args.falling&&this.airDash(-1)}},{key:"airDash",value:function(t){if(this.dashed||this.args.ignore&&-2!==this.args.ignore)return;t<0?(this.args.direction=-1,this.args.facing="left"):(this.args.direction=1,this.args.facing="right");let e=7*t;this.args.float=3,this.args.mode=0,this.args.float=2,this.args.rolling=!1,this.args.height=this.args.normalHeight,this.args.xSpeed&&Math.sign(this.args.xSpeed)!==Math.sign(t)&&(e=11*t,this.args.float=6,this.args.xSpeed=0),this.args.falling=!0;const r=this.args.xSpeed+e,n=this.bMap("scanForward",e,.5).get(o.Platformer);n&&Math.abs(r)>Math.abs(n)&&(e=n*Math.sign(r)),this.args.xSpeed=r,this.args.ySpeed=0,this.dashTimer=0,this.dashed=!0,this.args.mode=0,this.args.groundAngle=0,this.args.takeoffPlayed=!0,this.takeoffSound&&s.Sfx.play("MECHASONIC_TAKEOFF")}},{key:"canRoll",get:function(){return!0}},{key:"controllable",get:function(){return!0}}])&&l(e.prototype,r),n&&l(e,n),Object.defineProperty(e,"prototype",{writable:!1}),d}();t.MechaSonic=g}),require.register("actor/MegaMace.js",function(t,e,r){"use strict";function n(t){"@babel/helpers - typeof";return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(t,"__esModule",{value:!0}),t.MegaMace=void 0;var i=e("./PointActor"),o=e("curvature/base/Mixin"),a=e("../mixin/Constrainable");e("../behavior/SkidDust");function s(t,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,(o=i.key,void 0,"symbol"===n(a=function(t,e){if("object"!==n(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var i=r.call(t,e||"default");if("object"!==n(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(o,"string"))?a:String(a)),i)}var o,a}function c(){return(c="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=f(t)););return t}(t,e);if(n){var i=Object.getOwnPropertyDescriptor(n,e);return i.get?i.get.call(arguments.length<3?t:r):i.value}}).apply(this,arguments)}function l(t,e){return(l=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function u(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,i=f(t);if(e){var o=f(this).constructor;r=Reflect.construct(i,arguments,o)}else r=i.apply(this,arguments);return function(t,e){if(e&&("object"===n(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function f(t){return(f=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}let p=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&l(t,e)}(h,o.Mixin.from(i.PointActor,a.Constrainable));var e,r,n,p=u(h);function h(){var t;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,h);for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];return(t=p.call(this,...r)).args.decel=0,t.args.width=64,t.args.height=52,t.args.type="actor-item actor-mega-mace",t.args.ropeLength=t.args._tiedTo?t.args.ropeLength:8,t.args.gravity=.8,t.args.xSpeedMax=256,t.args.ySpeedMax=256,t}return e=h,(r=[{key:"update",value:function(){this.args.tiedTo||c(f(h.prototype),"update",this).call(this)}},{key:"updateEnd",value:function(){this.viewport&&!this.viewport.auras.has(this)&&this.viewport.auras.add(this),this.args.tiedTo&&(c(f(h.prototype),"update",this).call(this),this.args._tiedTo||(this.args._tiedTo=this.viewport.actorsById[this.args.tiedTo]),this.args.tiedTo&&this.args._tiedTo.args.hitPoints?this.setPos():this.noClip=!0),c(f(h.prototype),"updateEnd",this).call(this)}},{key:"collideA",value:function(t){if(this.args._tiedTo&&!this.args._tiedTo===t)return!1}},{key:"collideB",value:function(t){const e=this.others.tiedTo;if(e&&!e===t)return!1;e&&!e.args.hitPoints||(t.controllable||t.damage)&&t.damage()}}])&&s(e.prototype,r),n&&s(e,n),Object.defineProperty(e,"prototype",{writable:!1}),h}();t.MegaMace=p}),require.register("actor/MiniBoss.js",function(t,e,r){"use strict";function n(t){"@babel/helpers - typeof";return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(t,"__esModule",{value:!0}),t.MiniBoss=void 0;var i=e("curvature/base/Tag"),o=e("../behavior/Platformer"),a=e("./PointActor"),s=e("curvature/base/Mixin"),c=(e("../mixin/CanPop"),e("./CutScene"),e("../audio/Sfx")),l=e("./EggCapsule"),u=e("./SpikeBomb");function f(t,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,(o=i.key,void 0,"symbol"===n(a=function(t,e){if("object"!==n(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var i=r.call(t,e||"default");if("object"!==n(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(o,"string"))?a:String(a)),i)}var o,a}function p(){return(p="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=d(t)););return t}(t,e);if(n){var i=Object.getOwnPropertyDescriptor(n,e);return i.get?i.get.call(arguments.length<3?t:r):i.value}}).apply(this,arguments)}function h(t,e){return(h=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function g(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,i=d(t);if(e){var o=d(this).constructor;r=Reflect.construct(i,arguments,o)}else r=i.apply(this,arguments);return function(t,e){if(e&&("object"===n(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function d(t){return(d=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}let y=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&h(t,e)}(b,s.Mixin.from(a.PointActor));var e,r,n,y=g(b);function b(t,e){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,b),(r=y.call(this,t,e)).args.type="actor-item actor-mini-boss",r.args.width=48,r.args.height=48,r.args.float=-1,r.args.damagers=new Map,r.args.phase="idle",r.args.hitPoints=8,r.args.noseAngle=Math.PI/2*3,r.args.drillPush=0,r.args.phaseFrameId=0,r.args.frameId=0,r.args.direction=-1,r.args.facing="left",r.args.bindTo("phase",t=>r.args.phaseFrameId=0),r}return e=b,(r=[{key:"onRendered",value:function(t){p(d(b.prototype),"onRendered",this).call(this,t),this.autoAttr.get(this.box)["data-phase"]="phase",this.attractor=null}},{key:"update",value:function(){if(this.args.phaseFrameId++,this.args.frameId++,!this.viewport)return;const t=this.viewport;if(t.auras.add(this),!this.viewport.controlActor)return;this.attractor||(this.attractor={},this.attractor.x=this.x,this.attractor.y=this.y);Math.abs(this.x-this.attractor.x),Math.abs(this.y-this.attractor.y),Math.sign(this.x-this.attractor.x),Math.sign(this.y-this.attractor.y);switch(this.args.phase){case"stalking":const e=this.viewport.controlActor.args.x-this.args.x;this.args.xSpeed=Math.sign(e)*Math.min(4.5,Math.abs(e));case"idle":if(this.args.phaseFrameId%60==0){const t=new u.SpikeBomb({x:this.args.x,y:this.args.y+16,owner:this,xSpeed:this.args.xSpeed});this.viewport.spawn.add({object:t})}break;case"damaged":case"knocked":this.args.hitPoints>0?this.args.phaseFrameId>20&&(this.args.phase="stalking"):this.args.phaseFrameId>6&&(this.args.phase="dead");break;case"dead":this.args.float=0;break;case"exploding":if(90===this.args.phaseFrameId){this.args.falling=!0,this.args.ySpeed=-14,this.args.xSpeed=0,this.args.gSpeed=0,this.noClip=!0,this.viewport.auras.delete(this),this.args.phase="exploded",c.Sfx.play("OBJECT_DESTROYED");const t=this.viewport,e=t.controlActor;t.onFrameOut(60,()=>{const r=new l.EggCapsule({x:e.args.x,y:e.args.y-384,xSpeed:e.args.gSpeed||e.args.xSpeed});t.spawn.add({object:r})})}if(this.args.phaseFrameId>90)return;if(t&&t.args.frameId%3==0){const e=new i.Tag('<div class = "particle-explosion">');c.Sfx.play("BOSS_DAMAGED");const r=this.args.width*Math.random()-this.args.width/2,n=this.args.height*Math.random()-this.args.height/2;e.style({"--x":this.x+r,"--y":this.y+n+-16}),t.particles.add(e),setTimeout(()=>t.particles.remove(e),512)}}"knocked"!==this.args.phase&&this.args.ySpeed<0&&!this.pointIsSafe(this.x,this.y+-this.args.height+this.args.ySpeed+-1)&&(this.args.ySpeed=0),p(d(b.prototype),"update",this).call(this)}},{key:"updateEnd",value:function(){if(p(d(b.prototype),"updateEnd",this).call(this),!this.viewport)return;const t=this.viewport.controlActor;if(!t)return;Math.abs(this.x-t.x),Math.abs(this.y-t.y),Math.sign(this.x-t.x),Math.sign(this.y-t.y);switch(this.args.xSpeed<0?this.args.facing="left":this.args.xSpeed>0&&(this.args.facing="right"),this.args.groundAngle=0,this.args.phase){case"attacking":case"swooping":case"stalking":case"ready":this.bMap("checkBelow",this.x,this.y+1).get(o.Platformer)&&(this.args.falling=!0,this.args.ySpeed=-4,this.args.y--)}}},{key:"collideA",value:function(t,e){if(!t.controllable)return;const r=Math.sign(this.x-t.x);Math.sign(this.y-t.y),Math.max(Math.abs(t.args.xSpeed),5),Math.sign(t.args.xSpeed);if("dead"===this.args.phase){if(t.args.rolling&&(t.args.gSpeed=-r*Math.abs(t.args.gSpeed)),!(t.args.jumping||t.args.rolling||t.dashed))return!0;this.args.explodeFrame=this.viewport.args.frameId,this.args.phase="exploding"}if(1!==e&&3!==e||(this.onNextFrame(()=>{t.args.xSpeed=-r*Math.max(5,Math.abs(t.xSpeedLast))}),t.args.falling?this.ignores.set(t,15):(t.args.gSpeed=4*-Math.sign(this.x-t.x),t.args.rolling&&this.onNextFrame(()=>{t.args.gSpeed=-Math.sign(this.x-t.x),t.args.rolling=!0,t.args.direction=Math.sign(t.args.gSpeed)})),this.args.ySpeed=Math.min(0,this.args.ySpeed),this.damage(t)),2===e&&(this.viewport.args.audio&&c.Sfx.play("BOSS_DUDHIT"),t.args.falling&&(this.hitPoints<=0&&(this.args.ySpeed=2.5*-Math.abs(t.args.ySpeed)),t.controllable&&(t.args.ySpeed=Math.max(7,Math.abs(t.args.ySpeed)))),this.args.xSpeed=0,this.args.hitPoints>0&&(this.args.phase="knocked"),this.ignores.set(t,15)),0===e){if(t.args.falling&&this.ignores.set(t,15),t.controllable){t.args.y=this.y-this.args.height;t.args.animation;const e=t.args.ySpeed;this.onNextFrame(()=>{t.args.ySpeed=-Math.floor(Math.abs(e))||-4})}this.args.xSpeed=0,this.damage(t)}return t.args.ignore=6,this.args.hitPoints||(t.args.ignore=-2),!0}},{key:"damage",value:function(t){arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(this.args.hitPoints<=0)return void(this.viewport.controlActor.screenLock=null);const e=this.args.damagers.get(t);this.args.frameId-e<45||(this.args.hitPoints--,this.args.xSpeed=0,this.args.hitPoints<=0&&(this.viewport.controlActor.screenLock=null),this.args.damagers.set(t,this.args.frameId),this.onNextFrame(()=>this.args.phase="damaged"),c.Sfx.play("BOSS_DAMAGED"))}},{key:"pointIsSafe",value:function(t,e){return!this.viewport.actorsAtPoint(t,e).filter(t=>t.hazard).length}},{key:"wakeUp",value:function(){this.viewport.controlActor.screenLock={xMin:this.args.x-768,xMax:this.args.x+768},"idle"===this.args.phase&&(this.args.phase="stalking")}},{key:"solid",get:function(){return this.args.hitPoints>0}},{key:"rotateLock",get:function(){return!0}}])&&f(e.prototype,r),n&&f(e,n),Object.defineProperty(e,"prototype",{writable:!1}),b}();t.MiniBoss=y}),require.register("actor/MiniMace.js",function(t,e,r){"use strict";function n(t){"@babel/helpers - typeof";return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(t,"__esModule",{value:!0}),t.MiniMace=void 0;var i=e("./PointActor"),o=e("curvature/base/Mixin"),a=e("../mixin/Constrainable");function s(t,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,(o=i.key,void 0,"symbol"===n(a=function(t,e){if("object"!==n(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var i=r.call(t,e||"default");if("object"!==n(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(o,"string"))?a:String(a)),i)}var o,a}function c(){return(c="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=f(t)););return t}(t,e);if(n){var i=Object.getOwnPropertyDescriptor(n,e);return i.get?i.get.call(arguments.length<3?t:r):i.value}}).apply(this,arguments)}function l(t,e){return(l=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function u(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,i=f(t);if(e){var o=f(this).constructor;r=Reflect.construct(i,arguments,o)}else r=i.apply(this,arguments);return function(t,e){if(e&&("object"===n(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function f(t){return(f=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}let p=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&l(t,e)}(h,o.Mixin.from(i.PointActor,a.Constrainable));var e,r,n,p=u(h);function h(){var t;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,h);for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];return(t=p.call(this,...r)).args.width=32,t.args.height=32,t.args.type="actor-item actor-mini-mace",t.args.ropeLength=t.args._tiedTo?t.args.ropeLength:8,t.args.gravity=.6,t}return e=h,(r=[{key:"update",value:function(){this.args.tiedTo||c(f(h.prototype),"update",this).call(this)}},{key:"updateEnd",value:function(){this.viewport&&!this.viewport.auras.has(this)&&this.viewport.auras.add(this),this.args.tiedTo&&(c(f(h.prototype),"update",this).call(this),this.args._tiedTo||(this.args._tiedTo=this.viewport.actorsById[this.args.tiedTo]),this.args.tiedTo&&this.args._tiedTo.args.hitPoints?this.setPos():this.noClip=!0),c(f(h.prototype),"updateEnd",this).call(this)}},{key:"collideA",value:function(t){if(this.args._tiedTo&&!this.args._tiedTo===t)return!1}},{key:"collideB",value:function(t){if(this.args._tiedTo&&!this.args._tiedTo===t)return!1;this.args._tiedTo&&!this.args._tiedTo.args.hitPoints||t.controllable&&t.damage()}}])&&s(e.prototype,r),n&&s(e,n),Object.defineProperty(e,"prototype",{writable:!1}),h}();t.MiniMace=p}),require.register("actor/Monitor.js",function(t,e,r){"use strict";function n(t){"@babel/helpers - typeof";return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(t,"__esModule",{value:!0}),t.Monitor=void 0;var i=e("./PointActor"),o=e("curvature/base/Tag"),a=(e("../actor/Explosion"),e("../actor/Projectile")),s=(e("../actor/BrokenMonitor"),e("../actor/Block")),c=e("../actor/Marker"),l=e("../audio/Sfx"),u=e("../lib/Analytic");function f(t,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,(o=i.key,void 0,"symbol"===n(a=function(t,e){if("object"!==n(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var i=r.call(t,e||"default");if("object"!==n(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(o,"string"))?a:String(a)),i)}var o,a}function p(){return(p="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=d(t)););return t}(t,e);if(n){var i=Object.getOwnPropertyDescriptor(n,e);return i.get?i.get.call(arguments.length<3?t:r):i.value}}).apply(this,arguments)}function h(t,e){return(h=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function g(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,i=d(t);if(e){var o=d(this).constructor;r=Reflect.construct(i,arguments,o)}else r=i.apply(this,arguments);return function(t,e){if(e&&("object"===n(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function d(t){return(d=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}let y=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&h(t,e)}(b,i.PointActor);var e,r,n,y=g(b);function b(){var t;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,b);for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];return(t=y.call(this,...r)).args.type="actor-item actor-monitor",t.args.width=30,t.args.height=32,t.args.decel=.25,t.args.canHide=!0,t.args.platform=!0,t.args.gone=!1,t}return e=b,(r=[{key:"onRendered",value:function(t){p(d(b.prototype),"onRendered",this).call(this,t),!this.screen&&this.sprite&&(this.screen=new o.Tag('<div class = "monitor-screen">'),this.sprite.appendChild(this.screen.node))}},{key:"update",value:function(){p(d(b.prototype),"update",this).call(this),this.viewport}},{key:"collideA",value:function(t,e){return t.knocked&&this.pop(t.knocked),!!t.args.static||(t.punching?(this.pop(t),!1):!(!t.args.moving&&!t.args.falling)&&(!(t instanceof s.Block)&&(t instanceof c.Marker&&(t=t.owner),p(d(b.prototype),"collideA",this).call(this,t,e),t.passPop&&t.occupant&&!t.args.dead?(t=t.occupant,void this.pop(t)):2===e&&this.args.float&&t.controllable?(t.args.ySpeed*=-1,this.args.ySpeed=-4,this.args.float=0,this.ignores.set(t,15),!0):2===e||!(t.args.ySpeed>0&&t.y<this.y||(t.args.rolling||t.args.bellySliding)&&!t.args.grinding)||this.args.falling&&-1!==this.args.float||this.args.gone||!this.viewport||!t.args.spinning?1!==e&&3!==e||!((t.args.rolling||t.args.bellySliding)&&!t.args.grinding||t instanceof a.Projectile)||this.args.gone||!this.viewport?void 0:(this.pop(t),!1):void this.pop(t))))}},{key:"pop",value:function(t){const e=this.viewport;if(!e||this.args.gone)return;const r=new o.Tag('<div class = "particle-explosion">');if(t){const e={label:this.name||this.args.name,points:10,multiplier:1};if(!t.isVehicle&&t.args.ySpeed>5&&t.args.ySpeed<25&&Math.abs(t.args.ySpeed)>Math.abs(t.args.xSpeed)&&(t.args.cameraMode="popping"),t.args.popChain.push(e),t.args.popCombo+=1,t.args.ySpeed>25&&!t.args.bouncing){const e={label:"BIG AIR!!!",points:1e3,multiplier:1.5};t.args.popChain.push(e),t.args.popCombo+=1,!t.airReward&&Math.abs(t.args.xSpeed)>10&&(t.args.x=this.args.x-(this.args.gSpeed||this.args.xSpeed),t.args.y=this.args.y+-8,this.viewport.onFrameOut(1,()=>this.viewport.args.frozen=25),this.viewport.args.invert="invert",this.viewport.onFrameOut(25,()=>this.viewport.args.invert=""),l.Sfx.play("SICK_TRICK"),l.Sfx.play("SICK_TRICK")),t.airReward=e}l.Sfx.play("OBJECT_DESTROYED")}r.style({"--x":this.x,"--y":this.y-16});const n=document.createElement("div");n.classList.add("particle-score"),n.classList.add("score-10");const i=new o.Tag(n);if(i.style({"--x":this.args.x,"--y":this.args.y-16}),e.particles.add(i),e.particles.add(r),setTimeout(()=>e.particles.remove(r),512),setTimeout(()=>e.particles.remove(i),768),setTimeout(()=>this.screen&&this.screen.remove(),1024),this.args.gone=!0,this.box&&this.box.setAttribute("data-animation","broken"),t&&(t.occupant&&(t=t.occupant),t.args.owner&&(t=t.args.owner),t.controllable&&this.effect(t)),"function"==typeof ga&&u.Analytic.report({eventCategory:"monitor",eventAction:"popped",eventLabel:`${this.viewport.args.actName}::${this.args.id}`}),t){const r=Math.min(t.args.ySpeed,t.ySpeedLast);if(t.args.doubleSpin&&(t.args.doubleSpin=2),t.dashed=!1,t&&t.dashed&&Math.abs(t.args.xSpeed)>Math.abs(t.args.ySpeed))t.args.gSpeed=0,t.args.xSpeed=-1.5*Math.sign(t.args.xSpeed),t.args.ySpeed=-10;else if(t&&t.args.falling){const n=t.args.spinning,i=t.args.jumping,o=t.args.flying,a=t.args.xSpeed||t.args.gSpeed;t.args.xSpeed=0,t.args.ySpeed=0,e.onFrameOut(1,()=>{r>=0?t.flyTime<5?t.args.ySpeed=Math.min(-r,-7):t.args.ySpeed=Math.min(-r,-2):t.args.ySpeed+=8,t.args.spinning=t.args.spinning||n,t.args.jumping=t.args.jumping||i,t.args.flying=t.args.flying||o,t.args.xSpeed=a,t.args.falling=!0})}}t&&this.viewport.settings.rumble&&t.controller&&t.controller.rumble&&(t.controller.rumble({duration:40,strongMagnitude:0,weakMagnitude:1}),this.viewport.onTimeout(40,()=>{t.controller.rumble({duration:110,strongMagnitude:.75,weakMagnitude:1})}))}},{key:"effect",value:function(){}},{key:"canStick",get:function(){return!1}},{key:"solid",get:function(){return!1}}])&&f(e.prototype,r),n&&f(e,n),Object.defineProperty(e,"prototype",{writable:!1}),b}();t.Monitor=y}),require.register("actor/Motobug.js",function(t,e,r){"use strict";function n(t){"@babel/helpers - typeof";return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(t,"__esModule",{value:!0}),t.Motobug=void 0;var i=e("curvature/base/Mixin"),o=e("./PointActor"),a=e("../behavior/Patrol"),s=e("../mixin/CanPop");function c(t,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,(o=i.key,void 0,"symbol"===n(a=function(t,e){if("object"!==n(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var i=r.call(t,e||"default");if("object"!==n(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(o,"string"))?a:String(a)),i)}var o,a}function l(){return(l="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=p(t)););return t}(t,e);if(n){var i=Object.getOwnPropertyDescriptor(n,e);return i.get?i.get.call(arguments.length<3?t:r):i.value}}).apply(this,arguments)}function u(t,e){return(u=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function f(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,i=p(t);if(e){var o=p(this).constructor;r=Reflect.construct(i,arguments,o)}else r=i.apply(this,arguments);return function(t,e){if(e&&("object"===n(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function p(t){return(p=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}let h=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&u(t,e)}(g,i.Mixin.from(o.PointActor,s.CanPop));var e,r,n,h=f(g);function g(){var t,e,r,n;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,g);for(var i=arguments.length,o=new Array(i),s=0;s<i;s++)o[s]=arguments[s];return(n=h.call(this,...o)).behaviors.add(new a.Patrol),n.args.type="actor-item actor-motobug",n.args.animation="standing",n.args.accel=.1,n.args.decel=.5,n.args.gSpeedMax=3,n.args.gravity=.5,n.args.width=24,n.args.height=32,n.willStick=!1,n.stayStuck=!1,n.args.patrolPause=null!==(t=n.args.patrolPause)&&void 0!==t?t:10,n.args.patrolBeat=null!==(e=n.args.patrolBeat)&&void 0!==e?e:120,n.args.patrolSpeed=null!==(r=n.args.patrolSpeed)&&void 0!==r?r:1,n}return e=g,(r=[{key:"update",value:function(){l(p(g.prototype),"update",this).call(this),this.args.moving&&this.args.gSpeed?this.args.animation="walking":this.args.animation="standing",this.args.direction=Math.sign(this.args.gSpeed)}},{key:"solid",get:function(){return!1}},{key:"isEffect",get:function(){return!1}}])&&c(e.prototype,r),n&&c(e,n),Object.defineProperty(e,"prototype",{writable:!1}),g}();t.Motobug=h}),require.register("actor/MouseIndicator.js",function(t,e,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MouseIndicator=void 0;var n=e("./Cursor"),i=e("../ui/CharacterString");function o(t){"@babel/helpers - typeof";return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function a(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,h(n.key),n)}}function s(){return(s="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=f(t)););return t}(t,e);if(n){var i=Object.getOwnPropertyDescriptor(n,e);return i.get?i.get.call(arguments.length<3?t:r):i.value}}).apply(this,arguments)}function c(t,e){return(c=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function l(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=f(t);if(e){var i=f(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===o(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return u(t)}(this,r)}}function u(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function f(t){return(f=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function p(t,e,r){return(e=h(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function h(t){var e=function(t,e){if("object"!==o(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==o(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===o(e)?e:String(e)}let g=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&c(t,e)}(g,n.Cursor);var e,r,o,h=l(g);function g(){var t;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,g);for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];return p(u(t=h.call(this,...r)),"endPoint",null),p(u(t),"lastMouseX",null),p(u(t),"lastMouseY",null),t}return e=g,(r=[{key:"onRendered",value:function(t){s(f(g.prototype),"onRendered",this).call(this,t),this.args.type="point-actor actor-generic actor-mouse-indicator",this.autoStyle.get(this.box)["--magnitude"]="magnitude",this.magnitudeLabel=new i.CharacterString({value:0}),this.angleLabel=new i.CharacterString({value:0}),this.colorLabel=new i.CharacterString({value:0}),Object.assign(this.args.charStrings,[this.magnitudeLabel,this.angleLabel,this.colorLabel])}},{key:"update",value:function(){this.viewport&&!this.viewport.args.plot&&(this.viewport.args.plot=new Plot);const t=this.viewport.mouse;if(t.buttons[0]||this.endPoint)if(1===t.buttons[0]&&this.endPoint)this.endPoint=null;else if(1!==t.buttons[0]||this.endPoint){const e=Math.hypot(this.args.y-t.position[1],this.args.x-t.position[0]),r=Math.atan2(t.position[1]-this.args.y,t.position[0]-this.args.x);if(this.args.airAngle=r,this.lastMouseX!==t.position[0]||this.lastMouseY!==t.position[1]){window.logPoints=((t,e,r)=>this.viewport.args.plot.addPoint(t,e,"main-scan "+r));const t=this.castRayQuick(e,r);this.args.falling=!0,this.endPoint.args.x=this.args.x+Math.cos(r)*t,this.endPoint.args.y=this.args.y+Math.sin(r)*t;const n=this.viewport.tileMap.getColor(Math.trunc(this.endPoint.args.x),Math.trunc(this.endPoint.args.y),0);this.magnitudeLabel.args.value=!1!==t&&Number(t).toFixed(2),this.angleLabel.args.value=Number(r).toFixed(2),this.colorLabel.args.value=Number(n).toString(16).padStart(8,"0")}this.lastMouseX=t.position[0],this.lastMouseY=t.position[1]}else this.endPoint=new n.Cursor({x:this.args.x,y:this.args.y});else this.args.x=t.position[0],this.args.y=t.position[1]}}])&&a(e.prototype,r),o&&a(e,o),Object.defineProperty(e,"prototype",{writable:!1}),g}();t.MouseIndicator=g}),require.register("actor/Mushroom.js",function(t,e,r){"use strict";function n(t){"@babel/helpers - typeof";return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(t,"__esModule",{value:!0}),t.Mushroom=void 0;var i=e("./PointActor"),o=e("../behavior/Liftable");function a(t,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,(o=i.key,void 0,"symbol"===n(a=function(t,e){if("object"!==n(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var i=r.call(t,e||"default");if("object"!==n(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(o,"string"))?a:String(a)),i)}var o,a}function s(){return(s="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=u(t)););return t}(t,e);if(n){var i=Object.getOwnPropertyDescriptor(n,e);return i.get?i.get.call(arguments.length<3?t:r):i.value}}).apply(this,arguments)}function c(t,e){return(c=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function l(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,i=u(t);if(e){var o=u(this).constructor;r=Reflect.construct(i,arguments,o)}else r=i.apply(this,arguments);return function(t,e){if(e&&("object"===n(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function u(t){return(u=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}let f=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&c(t,e)}(p,i.PointActor);var e,r,n,f=l(p);function p(){var t;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,p);for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];return(t=f.call(this,...r)).args.type="actor-item actor-mushroom",t.args.width=24,t.args.height=24,t.args.size=4,t.args.nourishment=.1,t.behaviors.add(new o.Liftable),t}return e=p,(r=[{key:"onRendered",value:function(t){s(u(p.prototype),"onRendered",this).call(this,t);const e=this.viewport;this.onRemove(()=>e.spawnFromDef(this.objDef)),this.autoStyle.get(this.box)["--size"]="size"}},{key:"lift",value:function(t){this.carriedBy!==t?this.carriedBy=t:this.carriedBy=null}},{key:"solid",get:function(){return!1}},{key:"rotateLock",get:function(){return!0}},{key:"sleep",value:function(){this.viewport&&this.viewport.actors.remove(this)}}])&&a(e.prototype,r),n&&a(e,n),Object.defineProperty(e,"prototype",{writable:!1}),p}();t.Mushroom=f}),require.register("actor/NeverBetter.js",function(t,e,r){"use strict";function n(t){"@babel/helpers - typeof";return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(t,"__esModule",{value:!0}),t.NeverBetter=void 0;var i=e("./PointActor");function o(t,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,(o=i.key,void 0,"symbol"===n(a=function(t,e){if("object"!==n(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var i=r.call(t,e||"default");if("object"!==n(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(o,"string"))?a:String(a)),i)}var o,a}function a(t,e){return(a=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function s(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,i=c(t);if(e){var o=c(this).constructor;r=Reflect.construct(i,arguments,o)}else r=i.apply(this,arguments);return function(t,e){if(e&&("object"===n(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function c(t){return(c=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}let l=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&a(t,e)}(l,i.PointActor);var e,r,n,c=s(l);function l(t,e){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,l),(r=c.call(this,t,e)).args.type="actor-item actor-never-better-sign",r.args.width=84,r.args.height=78,r}return e=l,(r=[{key:"solid",get:function(){return!1}}])&&o(e.prototype,r),n&&o(e,n),Object.defineProperty(e,"prototype",{writable:!1}),l}();t.NeverBetter=l}),require.register("actor/NitroBooster.js",function(t,e,r){"use strict";function n(t){"@babel/helpers - typeof";return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(t,"__esModule",{value:!0}),t.NitroBooster=void 0;var i=e("./PointActor");function o(t,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,(o=i.key,void 0,"symbol"===n(a=function(t,e){if("object"!==n(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var i=r.call(t,e||"default");if("object"!==n(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(o,"string"))?a:String(a)),i)}var o,a}function a(){return(a="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=l(t)););return t}(t,e);if(n){var i=Object.getOwnPropertyDescriptor(n,e);return i.get?i.get.call(arguments.length<3?t:r):i.value}}).apply(this,arguments)}function s(t,e){return(s=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function c(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,i=l(t);if(e){var o=l(this).constructor;r=Reflect.construct(i,arguments,o)}else r=i.apply(this,arguments);return function(t,e){if(e&&("object"===n(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function l(t){return(l=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}let u=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&s(t,e)}(f,i.PointActor);var e,r,n,u=c(f);function f(){var t;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,f);for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];return(t=u.call(this,...r)).args.width=64,t.args.height=8,t.args.float=-1,t.args.type="actor-item actor-nitro-booster",t}return e=f,(r=[{key:"onRendered",value:function(){a(l(f.prototype),"onRendered",this).call(this)}},{key:"update",value:function(){a(l(f.prototype),"update",this).call(this),Math.trunc(this.viewport.args.frameId/6)%6<2&&this.viewport.args.frameId%3?(this.castRayQuick(60,-Math.PI/2,[0,-16]),this.args.animation="boosting"):this.args.animation="idle"}},{key:"collideA",value:function(t,e){if(t.controllable)return"boosting"===this.args.animation&&(t.args.y-=16,t.args.ySpeed=-16,t.args.falling=!0),a(l(f.prototype),"collideA",this).call(this,t,e)}},{key:"solid",get:function(){return!0}}])&&o(e.prototype,r),n&&o(e,n),Object.defineProperty(e,"prototype",{writable:!1}),f}();t.NitroBooster=u}),require.register("actor/NotchSpring.js",function(t,e,r){"use strict";function n(t){"@babel/helpers - typeof";return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(t,"__esModule",{value:!0}),t.NotchSpring=void 0;var i=e("./PointActor"),o=(e("./Block"),e("../audio/Sfx"));function a(t,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,(o=i.key,void 0,"symbol"===n(a=function(t,e){if("object"!==n(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var i=r.call(t,e||"default");if("object"!==n(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(o,"string"))?a:String(a)),i)}var o,a}function s(){return(s="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=u(t)););return t}(t,e);if(n){var i=Object.getOwnPropertyDescriptor(n,e);return i.get?i.get.call(arguments.length<3?t:r):i.value}}).apply(this,arguments)}function c(t,e){return(c=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function l(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,i=u(t);if(e){var o=u(this).constructor;r=Reflect.construct(i,arguments,o)}else r=i.apply(this,arguments);return function(t,e){if(e&&("object"===n(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function u(t){return(u=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}let f=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&c(t,e)}(p,i.PointActor);var e,r,n,f=l(p);function p(){var t;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,p);for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];return(t=f.call(this,...r)).args.width=8,t.args.height=32,t.args.type="actor-item actor-notch-spring",t.noClip=!0,t.args.float=-1,t.args.animation="idle",t.launching=new Set,t}return e=p,(r=[{key:"collideA",value:function(t){t.controllable&&t.args.falling&&(this.launching.add(t),this.args.animation="springing",o.Sfx.play("NOTCH_SPRING_HIT"),this.viewport.onFrameOut(1,()=>this.args.animation="idle"))}},{key:"updateEnd",value:function(){s(u(p.prototype),"updateEnd",this).call(this),this.launching.forEach(t=>{t.args.animation="flip",t.args.jumping=!1,t.dashed=!1,t.args.x+=this.args.direction,t.args.flying=!1,t.impulse(12,-Math.PI/2+Math.PI/4*this.args.direction,!0),t.args.xSpeed=0,t.args.ySpeed=0,t.args.ignore=8,this.launching.delete(t)})}},{key:"solid",get:function(){return!1}}])&&a(e.prototype,r),n&&a(e,n),Object.defineProperty(e,"prototype",{writable:!1}),p}();t.NotchSpring=f}),require.register("actor/NuclearSuperball.js",function(t,e,r){"use strict";function n(t){"@babel/helpers - typeof";return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(t,"__esModule",{value:!0}),t.NuclearSuperball=void 0;var i=e("./PointActor");e("curvature/base/Tag");function o(t,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,(o=i.key,void 0,"symbol"===n(a=function(t,e){if("object"!==n(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var i=r.call(t,e||"default");if("object"!==n(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(o,"string"))?a:String(a)),i)}var o,a}function a(t,e){return(a=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function s(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,i=c(t);if(e){var o=c(this).constructor;r=Reflect.construct(i,arguments,o)}else r=i.apply(this,arguments);return function(t,e){if(e&&("object"===n(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function c(t){return(c=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}let l=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&a(t,e)}(l,i.PointActor);var e,r,n,c=s(l);function l(){var t;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,l);for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];return(t=c.call(this,...r)).args.gSpeedMax=150,t.args.accel=2,t.args.jumpForce=20,t.willStick=!0,t.stayStuck=!0,t}return e=l,(r=[{key:"solid",get:function(){return!1}},{key:"isEffect",get:function(){return!1}},{key:"controllable",get:function(){return!0}}])&&o(e.prototype,r),n&&o(e,n),Object.defineProperty(e,"prototype",{writable:!1}),l}();t.NuclearSuperball=l}),require.register("actor/Orb.js",function(t,e,r){"use strict";function n(t){"@babel/helpers - typeof";return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(t,"__esModule",{value:!0}),t.Orb=void 0;var i=e("./PointActor"),o=e("curvature/base/Mixin");e("../mixin/Pushable");function a(t,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,(o=i.key,void 0,"symbol"===n(a=function(t,e){if("object"!==n(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var i=r.call(t,e||"default");if("object"!==n(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(o,"string"))?a:String(a)),i)}var o,a}function s(){return(s="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=u(t)););return t}(t,e);if(n){var i=Object.getOwnPropertyDescriptor(n,e);return i.get?i.get.call(arguments.length<3?t:r):i.value}}).apply(this,arguments)}function c(t,e){return(c=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function l(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,i=u(t);if(e){var o=u(this).constructor;r=Reflect.construct(i,arguments,o)}else r=i.apply(this,arguments);return function(t,e){if(e&&("object"===n(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function u(t){return(u=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}let f=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&c(t,e)}(p,o.Mixin.from(i.PointActor));var e,r,n,f=l(p);function p(){var t;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,p);for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];return(t=f.call(this,...r)).args.type="actor-item actor-orb",t.args.width=18,t.args.height=48,t.args.rolled=0,t.args.accel=0,t.args.decel=0,t.args.bindTo("x",(e,r,n,i,o)=>t.args.rolled+=.5*Number(e-o||0)),t.args.gravity=1.35,t.args.maxFollow=t.args.maxFollow||null,t}return e=p,(r=[{key:"onRendered",value:function(t){s(u(p.prototype),"onRendered",this).call(this,t),this.autoStyle.get(this.box)["--rolled"]="rolled"}},{key:"updateStart",value:function(){s(u(p.prototype),"updateStart",this).call(this);const t=this.viewport.controlActor;this.otherSpacing=this.distanceFrom(t),this.otherSpeed=t.args.gSpeed||t.args.xSpeed||t.gSpeedLast||t.xSpeedLast}},{key:"update",value:function(){}},{key:"updateEnd",value:function(){if(!this.viewport||!this.viewport.controlActor)return;const t=this.viewport.controlActor;this.args.falling&&t.args.fallTime<15&&this.args.ySpeed<0&&(this.args.xSpeed=.995);const e=this.viewport;this.args.falling?this.viewport.onFrameOut(10,()=>{this.args.falling&&e.auras.delete(this)}):this.viewport.auras.add(this);const r=Math.max(0,this.otherSpeed),n=Math.sign(this.args.gSpeed||this.gSpeedLast||t.args.gSpeed||t.args.xSpeed);if((this.args.gSpeed||this.args.xSpeed||this.args.x<t.args.x-160)&&(!this.args.maxFollow||this.x<this.args.maxFollow)){const e=64;let i=r*n;(this.otherSpacing<e||t.args.falling&&t.args.ySpeed>=0)&&(i*=.975),i&&this.args.groundAngle>0&&(i+=1.5*Math.sign(i)),this.args.gSpeed=i}s(u(p.prototype),"update",this).call(this),s(u(p.prototype),"updateEnd",this).call(this)}},{key:"collideA",value:function(t){t.isHyper||t.isSuper||t.controllable&&t.loseRings(),t.controllable&&t.die()}},{key:"controllable",get:function(){return!1}},{key:"solid",get:function(){return!1}}])&&a(e.prototype,r),n&&a(e,n),Object.defineProperty(e,"prototype",{writable:!1}),p}();t.Orb=f}),require.register("actor/OrbSmall.js",function(t,e,r){"use strict";function n(t){"@babel/helpers - typeof";return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(t,"__esModule",{value:!0}),t.OrbSmall=void 0;var i=e("./PointActor"),o=e("curvature/base/Mixin"),a=e("../audio/Sfx");function s(t,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,(o=i.key,void 0,"symbol"===n(a=function(t,e){if("object"!==n(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var i=r.call(t,e||"default");if("object"!==n(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(o,"string"))?a:String(a)),i)}var o,a}function c(){return(c="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=f(t)););return t}(t,e);if(n){var i=Object.getOwnPropertyDescriptor(n,e);return i.get?i.get.call(arguments.length<3?t:r):i.value}}).apply(this,arguments)}function l(t,e){return(l=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function u(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,i=f(t);if(e){var o=f(this).constructor;r=Reflect.construct(i,arguments,o)}else r=i.apply(this,arguments);return function(t,e){if(e&&("object"===n(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function f(t){return(f=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}let p=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&l(t,e)}(h,o.Mixin.from(i.PointActor));var e,r,n,p=u(h);function h(){var t;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,h);for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];return(t=p.call(this,...r)).args.type="actor-item actor-orb-small",t.args.width=18,t.args.height=24,t.args.rolled=0,t.gSpeedLast=0,t.args.accel=.2,t.args.decel=t.args.decel||0,t.args.gravity=.4,t.args.maxFollow=t.args.maxFollow||null,t.args.friction=t.args.friction||.75,t.args.bounce=t.args.bounce||.5,t.args.rollSpeed=0,t.args.rolled=0,t}return e=h,(r=[{key:"onRendered",value:function(t){c(f(h.prototype),"onRendered",this).call(this,t),this.autoStyle.get(this.box)["--rolled"]="rolled"}},{key:"update",value:function(){if(!this.viewport||!this.viewport.controlActor)return;this.args.x<-16+this.viewport.controlActor.args.x&&(this.args.falling||(this.args.xSpeed=this.args.gSpeed),this.args.falling=!0,this.noClip=!0);const t=this.ySpeedLast-this.args.gravity;if(c(f(h.prototype),"update",this).call(this),this.args.falling?this.args.ySpeed>0&&(this.args.rollSpeed*=.975):this.args.rollSpeed=this.args.gSpeed*Math.PI,this.args.rolled+=this.args.rollSpeed,!this.args.falling&&t>3){const e=Math.max(.5,Math.min(t,16)/16);a.Sfx.play("HEAVY_THUD",{volume:e}),this.args.bounce&&(this.args.xSpeed*=this.args.friction,this.args.x+=this.args.xSpeed),this.args.ySpeed=-t*this.args.bounce,this.args.falling=!0,this.args.y-=1}}},{key:"collideA",value:function(t){if(t.controllable){const e=Math.max(.5,Math.min(this.args.ySpeed,16)/16);t.args.startled||(this.args.gSpeed=0,this.noClip=!0,this.args.falling=!0,this.args.xSpeed=0,this.args.ySpeed=-3,this.args.float=10,this.args.rollSpeed*=2,a.Sfx.play("HEAVY_THUD",{volume:e})),t.args.rings?t.damage():t.startle()}this.args.x<this.viewport.controlActor.args.x-8?this.noClip=!0:this.noClip&&t.break&&!t.broken&&(this.args.ySpeed*=-1,a.Sfx.play("HEAVY_THUD"),t.break(this))}},{key:"sleep",value:function(){this.viewport.actors.remove(this)}},{key:"controllable",get:function(){return!1}},{key:"solid",get:function(){return!1}}])&&s(e.prototype,r),n&&s(e,n),Object.defineProperty(e,"prototype",{writable:!1}),h}();t.OrbSmall=p}),require.register("actor/Panel.js",function(t,e,r){"use strict";function n(t){"@babel/helpers - typeof";return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(t,"__esModule",{value:!0}),t.Panel=void 0;var i=e("./PointActor");e("curvature/base/Bindable");function o(t,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,(o=i.key,void 0,"symbol"===n(a=function(t,e){if("object"!==n(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var i=r.call(t,e||"default");if("object"!==n(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(o,"string"))?a:String(a)),i)}var o,a}function a(t,e){return(a=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function s(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,i=c(t);if(e){var o=c(this).constructor;r=Reflect.construct(i,arguments,o)}else r=i.apply(this,arguments);return function(t,e){if(e&&("object"===n(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function c(t){return(c=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}let l=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&a(t,e)}(l,i.PointActor);var e,r,n,c=s(l);function l(t,e){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,l),(r=c.call(this,t,e)).args.type="actor-item actor-panel",r.args.width=64,r.args.height=8,r.args.static=1,r.args.float=-1,r.leaving=new Set,r.holding=new Set,r.cancels=new Map,r}return e=l,(r=[{key:"collideA",value:function(t,e){if(t.canFly)return!1;if(this.leaving.has(t))return this.holding.has(t)&&(t.stayStuck=!1,t.willStick=!1,t.willJump=!1,t.args.gSpeed=0,this.holding.delete(t)),this.cancels.has(t)&&(this.cancels.get(t)(),this.cancels.delete(t)),this.cancels.set(t,this.viewport.onFrameOut(25,()=>{this.holding.delete(t),this.leaving.delete(t)})),!1;if(!t.args.jumping&&!this.holding.has(t))return!1;if(this.holding.has(t)){if(t.args.mode=0,t.args.groundAngle=this.args.groundAngle,t.lastAngles.length=0,t.args.gSpeed=0,t.args.xSpeed=0,t.args.ySpeed=0,t.args.falling=!1,(this.args.next||this.args.mode)&&this.holding.has(t)&&t.willJump){const e=this.viewport.actorsById[this.args.next];if(t.args.falling=!0,e||this.args.mode){if(t.stayStuck=!0,t.willStick=!0,e){const r=e.rotatePoint(0,0),n=t.angleTo({x:r[0]+e.x,y:r[1]+e.y});t.args.x-=16*Math.cos(n),t.args.y-=16*Math.sin(n),t.args.xSpeed=42*-Math.cos(n),t.args.ySpeed=42*-Math.sin(n)}t.args.gSpeed=0,t.args.falling=!0,t.args.jumping=!0,t.args.float=e?45:0,this.leaving.add(t),this.holding.delete(t),t.args.ignore=e?45:0}else this.leaving.add(t),this.holding.delete(t),t.stayStuck=!1,t.willStick=!1,t.args.gSpeed=0,t.args.xSpeed=0,t.args.ySpeed=0,t.args.falling=!0,t.args.float=0,t.args.ignore=15;return!1}const e=this.rotatePoint(0,8);return t.args.x=this.x+e[0],t.args.y=this.y+e[1],t.args.ignore=0,!1}return!this.others.next&&!this.args.mode||(this.holding.add(t),t.args.ignore=10,this.cancels.has(t)&&(this.cancels.get(t)(),this.cancels.delete(t)),this.cancels.set(t,this.viewport.onFrameOut(20,()=>{this.holding.has(t)&&(this.holding.delete(t),this.leaving.add(t))})),!1)}},{key:"sleep",value:function(){this.leaving.clear(),this.holding.clear()}},{key:"solid",get:function(){return!1}}])&&o(e.prototype,r),n&&o(e,n),Object.defineProperty(e,"prototype",{writable:!1}),l}();t.Panel=l}),require.register("actor/PlatformFlare.js",function(t,e,r){"use strict";function n(t){"@babel/helpers - typeof";return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(t,"__esModule",{value:!0}),t.PlatformFlare=void 0;var i=e("./PointActor"),o=e("./Block"),a=e("../audio/Sfx");function s(t,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,(o=i.key,void 0,"symbol"===n(a=function(t,e){if("object"!==n(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var i=r.call(t,e||"default");if("object"!==n(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(o,"string"))?a:String(a)),i)}var o,a}function c(t,e){return(c=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function l(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,i=u(t);if(e){var o=u(this).constructor;r=Reflect.construct(i,arguments,o)}else r=i.apply(this,arguments);return function(t,e){if(e&&("object"===n(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function u(t){return(u=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}let f=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&c(t,e)}(f,i.PointActor);var e,r,n,u=l(f);function f(){var t;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,f);for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];return(t=u.call(this,...r)).args.width=32,t.args.height=8,t.args.power=t.args.power||18,t.args.type="actor-item actor-platform-flare",t.args.static=1,t}return e=f,(r=[{key:"collideA",value:function(t){if(t.args.float||t.args.static)return;t.controllable&&this.args.active&&t.damage(this,"fire"),(this.viewport.args.frameId-this.viewport.args.startFrameId)/60%3||(this.args.active=!0,this.viewport.onFrameOut(30,()=>this.args.active=!1),t instanceof o.Block&&(a.Sfx.play("LID_POP"),t.args.ySpeed=-this.args.power,t.args.y+=-1,t.args.falling=!0))}}])&&s(e.prototype,r),n&&s(e,n),Object.defineProperty(e,"prototype",{writable:!1}),f}();t.PlatformFlare=f}),require.register("actor/Platformer.js",function(t,e,r){"use strict";function n(t){"@babel/helpers - typeof";return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(t,"__esModule",{value:!0}),t.Platformer=void 0;var i=e("./PointActor");function o(t,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,(o=i.key,void 0,"symbol"===n(a=function(t,e){if("object"!==n(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var i=r.call(t,e||"default");if("object"!==n(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(o,"string"))?a:String(a)),i)}var o,a}function a(t,e){return(a=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function s(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,i=c(t);if(e){var o=c(this).constructor;r=Reflect.construct(i,arguments,o)}else r=i.apply(this,arguments);return function(t,e){if(e&&("object"===n(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function c(t){return(c=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}let l=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&a(t,e)}(l,i.PointActor);var e,r,n,c=s(l);function l(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,l),c.apply(this,arguments)}return e=l,(r=[{key:"controllable",get:function(){return!0}}])&&o(e.prototype,r),n&&o(e,n),Object.defineProperty(e,"prototype",{writable:!1}),l}();t.Platformer=l}),require.register("actor/PogoEgg.js",function(t,e,r){"use strict";function n(t){"@babel/helpers - typeof";return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(t,"__esModule",{value:!0}),t.PogoEgg=void 0;var i=e("./PointActor"),o=e("../audio/Sfx"),a=e("curvature/base/Tag"),s=e("./EggCapsule");function c(t,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,(o=i.key,void 0,"symbol"===n(a=function(t,e){if("object"!==n(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var i=r.call(t,e||"default");if("object"!==n(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(o,"string"))?a:String(a)),i)}var o,a}function l(){return(l="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=p(t)););return t}(t,e);if(n){var i=Object.getOwnPropertyDescriptor(n,e);return i.get?i.get.call(arguments.length<3?t:r):i.value}}).apply(this,arguments)}function u(t,e){return(u=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function f(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,i=p(t);if(e){var o=p(this).constructor;r=Reflect.construct(i,arguments,o)}else r=i.apply(this,arguments);return function(t,e){if(e&&("object"===n(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function p(t){return(p=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}let h=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&u(t,e)}(g,i.PointActor);var e,r,n,h=f(g);function g(){var t;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,g);for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];return(t=h.call(this,...r)).args.width=65,t.args.height=63,t.args.type="actor-item actor-pogo-egg",t.args.gravity=.5,t.args.jumpForce=10,t.args.decel=0,t.targetPoint=null,t.xTarget=19216,t.yTarget=1280,t.args.expectedAirTime=0,t.args.hp=8,t.args.bounceCount=0,t}return e=g,(r=[{key:"onRendered",value:function(){l(p(g.prototype),"onRendered",this).call(this),this.autoStyle.get(this.box)["--stem-length"]="stemLength"}},{key:"update",value:function(){l(p(g.prototype),"update",this).call(this);for(const t of this.standingUnder)t.args.falling=!0,t.args.ySpeed=-Math.abs(t.ySpeedLast),t.args.y--,this.args.ySpeed<0&&(t.args.ySpeed+=this.args.ySpeed);const t=this.def.get("x");if(this.screenLock=this.screenLock||{xMin:t+-624,xMax:t+497},this.args.hp>=0&&(this.viewport.controlActor&&Math.abs(this.viewport.controlActor.args.x-this.args.x)<386&&(this.viewport.controlActor.args.dead||(this.viewport.controlActor.screenLock=this.viewport.controlActor.screenLock||{xMin:t+-624,xMax:t+497})),this.args.animation="idle",this.args.damaged>0&&(this.args.damaged--,this.args.animation="damaged")),this.args.hp>0){const t=this.castRayQuick(32,Math.PI/2,[-16,0],!1)||32,e=this.castRayQuick(32,Math.PI/2,[16,0],!1)||32;this.args.stemLength=Math.min(t,e)}else this.args.stemLength=0;let e=this.otherDefs.pointA,r=this.age%800;if(r>600?e=this.otherDefs.pointB:r>400?e=this.otherDefs.pointC:r>200&&(e=this.otherDefs.pointB),this.targetPoint!==e&&(this.args.bounceCount=0),this.xTarget=e.x,this.yTarget=e.y,this.targetPoint=e,this.args.bounceCount&&(this.args.bounceCount%2?this.xTarget=this.targetPoint.x-32:this.xTarget=this.targetPoint.x+32),this.args.hp>0)if(this.args.falling){if(0===this.fallTime){const t=this.args.gravity,e=this.args.jumpForce,r=-(this.yTarget-this.args.y),n=t+2*e,i=(-n-Math.sqrt(Math.pow(n,2)+8*t*-r))/(-2*t);if(!isNaN(i)&&i>0){const t=this.xTarget-this.args.x;this.args.xSpeed=t/i,this.args.expectedAirTime=i}else this.args.xSpeed=0}}else this.args.bounceCount++,this.willJump=!0;else this.args.hp<0&&"exploding"!==this.args.animation&&"exploded"!==this.args.animation&&(this.args.xSpeed=0,this.args.animation="exploding",viewport.onFrameOut(80,()=>{this.args.animation="exploded",this.args.falling=!0,this.args.ySpeed=-16,this.noClip=!0,o.Sfx.play("OBJECT_DESTROYED")}),viewport.onFrameOut(160,()=>{const t=new s.EggCapsule({x:this.otherDefs.pointB.x,y:this.otherDefs.pointB.y-384});viewport.spawn.add({object:t})}));if("exploding"===this.args.animation&&(viewport=this.viewport,viewport&&viewport.args.frameId%3==0)){const t=new a.Tag('<div class = "particle-explosion">');o.Sfx.play("BOSS_DAMAGED");const e=this.args.width*Math.random()-this.args.width/2,r=this.args.height*Math.random()-this.args.height/2;t.style({"--x":this.x+e,"--y":this.y+r+-32}),viewport.particles.add(t),setTimeout(()=>viewport.particles.remove(t),512)}}},{key:"collideA",value:function(t,e){if(t.controllable)return!(this.args.hp<=-1&&this.args.falling)&&(this.args.hp>0&&!t.args.falling&&t.groundTime>1&&!this.args.damaged&&!this.standingUnder.has(t)&&!t.args.mercy?(t.damage(this),!1):(0===e&&t.args.falling?(this.args.ySpeed=Math.abs(t.ySpeedLast),t.args.ySpeed=-Math.abs(t.ySpeedLast),t.args.y=this.args.y+-this.args.height,t.args.ySpeed>-6&&(t.args.ySpeed=-6),o.Sfx.play("BOSS_DAMAGED"),this.args.damaged||(this.args.damaged=30,this.args.hp--)):2===e&&t.args.falling?(this.args.ySpeed=Math.abs(t.args.ySpeed),t.args.ySpeed=-Math.abs(t.args.ySpeed),t.args.y=this.args.y+t.args.height,o.Sfx.play("BOSS_DUDHIT")):Math.abs(this.args.x-t.args.x)>this.args.width/2&&t.args.falling&&(t.args.x=this.args.x+.5*(this.args.width+t.args.width)*Math.sign(t.args.x-this.args.x||t.args.xSpeed),t.args.xSpeed*=-1,Math.abs(t.args.xSpeed)<4&&(t.args.xSpeed=4*Math.sign(t.args.x-this.args.x)),Math.abs(this.args.xSpeed)<4&&(this.args.xSpeed=4*-Math.sign(t.args.x-this.args.x)),o.Sfx.play("BOSS_DAMAGED"),this.args.damaged||(this.args.damaged=30,this.args.hp--),this.args.ySpeed=-5*Math.sign(t.args.y-this.args.y)),this.args.hp<=0&&(this.args.xSpeed=0),l(p(g.prototype),"collideA",this).call(this,t,e)))}},{key:"solid",get:function(){return!1}},{key:"canStick",get:function(){return!1}}])&&c(e.prototype,r),n&&c(e,n),Object.defineProperty(e,"prototype",{writable:!1}),g}();t.PogoEgg=h}),require.register("actor/PogoSpring.js",function(t,e,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PogoSpring=void 0;var n=e("./Vehicle"),i=e("../audio/Sfx");e("curvature/base/Tag");function o(t){"@babel/helpers - typeof";return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function a(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,h(n.key),n)}}function s(){return(s="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=f(t)););return t}(t,e);if(n){var i=Object.getOwnPropertyDescriptor(n,e);return i.get?i.get.call(arguments.length<3?t:r):i.value}}).apply(this,arguments)}function c(t,e){return(c=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function l(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=f(t);if(e){var i=f(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===o(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return u(t)}(this,r)}}function u(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function f(t){return(f=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function p(t,e,r){return(e=h(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function h(t){var e=function(t,e){if("object"!==o(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==o(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===o(e)?e:String(e)}let g=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&c(t,e)}(g,n.Vehicle);var e,r,o,h=l(g);function g(){var t;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,g);for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];return p(u(t=h.call(this,...r)),"quickDrop",!0),p(u(t),"passPop",!0),t.args.type="actor-item actor-pogo-spring",t.args.width=32,t.args.height=32,t.removeTimer=null,t.args.gSpeedMax=20,t.args.decel=.45,t.args.accel=.45,t.args.gravity=.6,t.args.seatHeight=16,t.args.seatForward=-2,t.args.skidTraction=.05,t.args.jumpForce=8,t.dustCount=0,t.args.particleScale=2,t.args.started=!1,t.args.cameraMode="locked",t.args.bound=0,t.bindTo("occupant",(e,r,n,i,o)=>{o&&!e&&(t.args.dead=!0,t.args.gSpeed=0,t.args.xSpeed=0,t.args.ySpeed=0)}),t}return e=g,(r=[{key:"onRendered",value:function(t){s(f(g.prototype),"onRendered",this).call(this,t),this.autoStyle.get(this.box)["--bound"]="bound"}},{key:"update",value:function(){if(this.args.active=!!this.occupant,this.args.falling||this.occupant||(this.args.dead=!1),this.occupant&&!this.args.falling&&this.args.ySpeed>0&&(this.args.bound=-Math.floor(this.args.ySpeed||0)),!this.occupant||this.frameout||this.args.falling)this.occupant||(this.args.gSpeed=0,this.args.xSpeed=0);else{this.args.height=16+this.occupant.args.height,this.frameout=this.viewport.onFrameOut(1,()=>{this.args.falling=!0,this.frameout=!1,this.args.ySpeed=this.args.bound,this.args.ySpeed>-3&&(this.args.ySpeed-=3),this.args.ySpeed>-13&&(this.args.ySpeed-=3),this.args.ySpeed<-24&&(this.args.ySpeed=-24)}),this.args.xSpeed*=.3;const t=this.xAxis||this.xSpeedLast||0;this.args.direction=Math.sign(t),this.args.facing=Math.sign(t)<0?"left":"right",i.Sfx.play("POGO_BOUNCE")}this.occupant||(this.args.height=32,this.args.bound=-4),this.noClip=this.args.dead,s(f(g.prototype),"update",this).call(this)}},{key:"collideA",value:function(t,e){t instanceof g||(t.args.falling&&t.args.ySpeed>0&&(this.args.bound=-t.args.ySpeed),s(f(g.prototype),"collideA",this).call(this,t,e))}},{key:"sleep",value:function(){this.args.x=this.def.get("x"),this.args.y=this.def.get("y"),this.viewport.setColCell(this),this.args.dead=!1,this.args.gSpeed=0,this.args.xSpeed=0,this.args.ySpeed=0,this.args.bound=0,s(f(g.prototype),"sleep",this).call(this),this.args.facing="right"}},{key:"solid",get:function(){return!this.occupant}},{key:"rotateLock",get:function(){return!1}}])&&a(e.prototype,r),o&&a(e,o),Object.defineProperty(e,"prototype",{writable:!1}),g}();t.PogoSpring=g}),require.register("actor/PointActor.js",function(t,e,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PointActor=void 0;var n=e("curvature/base/Bindable"),i=e("curvature/base/View"),o=e("curvature/base/Tag"),a=e("../effects/Twist"),s=e("../effects/Droop"),c=e("../effects/Pinch"),l=e("../ui/CharacterString"),u=e("../Classifier"),f=e("../controller/Controller"),p=e("../powerups/Sheild"),h=e("../powerups/FireSheild"),g=e("../powerups/SuperSheild"),d=e("../powerups/BubbleSheild"),y=e("../powerups/NormalSheild"),b=e("../powerups/ElectricSheild"),v=e("../powerups/StarSheild"),m=(e("./LayerSwitch"),e("../viewport/Layer"),e("../behavior/Platformer")),w=e("../audio/Sfx");function S(t){"@babel/helpers - typeof";return(S="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function O(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,i,o,a,s=[],c=!0,l=!1;try{if(o=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=o.call(r)).done)&&(s.push(n.value),s.length!==e);c=!0);}catch(t){l=!0,i=t}finally{try{if(!c&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(l)throw i}}return s}}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return j(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return j(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function j(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function x(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,E(n.key),n)}}function P(t,e){return(P=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function k(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=M(t);if(e){var i=M(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return _(this,r)}}function _(t,e){if(e&&("object"===S(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return R(t)}function R(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function M(t){return(M=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function T(t,e,r){return(e=E(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function E(t){var e=function(t,e){if("object"!==S(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==S(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===S(e)?e:String(e)}const C=0,A=100,B=Symbol("BOUNDS");let D=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&P(t,e)}(E,i.View);var e,r,j,M=k(E);function E(){var t,e,r,i,o,a,s;let c=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},l=arguments.length>1?arguments[1]:void 0;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,E),c[n.Bindable.NoGetters]=!0,T(R(s=M.call(this,c,l)),"template",'<div class  = "point-actor [[type]]">\n\t\t<div class = "sprite" cv-ref = "sprite"></div>\n\t</div>'),T(R(s),"profiles",{normal:{height:1,width:1,decel:.85,accel:.2,gravity:.65,airAccel:.3,jumpForce:14,gSpeedMax:100}}),s[n.Bindable.NoGetters]=!0,Object.defineProperty(s.nodes,n.Bindable.NoGetters,{value:!0}),s.defaultDisplay="initial",s.others={},s.otherDefs={},s.args.knocked=!1,s.springing=!1,s.isGhost=!1,s.stepsTaken=0,s.fallTime=0,s.idleTime=0,s.groundTime=0,s.locked=0,s.xHold=12,s.yHold=12,s.args.weight=null!==(t=s.args.weight)&&void 0!==t?t:100,s.args.score=0,s.args.rings=0,s.args.mercy=!1,s.args.stuck=!1,s.args.R=0,s.args.popChain=[],s.args.canHide=!1,s.collisionMap=null,s.doorMap=new Map,s.args.opacity=null!==(e=s.args.opacity)&&void 0!==e?e:1,s.args.pushing=!1,s.autoStyle=new Map,s.autoAttr=new Map,s.hanging=new Map,s.ignores=new Map,s.regions=new Set,s.powerups=new Set,s.behaviors=new Set,s.args.lookTime=0,s.behaviors.add(new m.Platformer),s.carrying=new Set,s.inventory=new u.Classifier([p.Sheild,h.FireSheild,d.BubbleSheild,b.ElectricSheild,y.NormalSheild]),s.splashes=new Set,s.noClip=!1,s.sheild=null,s.inventory.addEventListener("adding",t=>{let e=t.detail.object;if(s.inventory.has(e.constructor))return s.args.currentSheild instanceof v.StarSheild||(e=[...s.inventory.get(e.constructor)][0],s.args.currentSheild=e,e.equip&&e.equip(R(s))),void t.preventDefault();if(s.powerups.add(e),s.controllable){const t=`has${e.type[0].toUpperCase()+e.type.substr(1)}`;s.viewport.args[t]=t}e.acquire&&e.acquire(R(s)),s.args.currentSheild instanceof v.StarSheild||(s.args.currentSheild=e,e.equip&&e.equip(R(s)))}),s.inventory.addEventListener("removing",t=>{const e=t.detail.object;if(s.powerups.delete(e),s.controllable){const t=`has${e.type[0].toUpperCase()+e.type.substr(1)}`;s.viewport.args[t]=null}n.Bindable.make(e)===s.args.currentSheild&&(s.args.currentSheild=null)}),s.args.bindTo("isGhost",(t,e,r,n,i)=>s.isGhost=t),s.args.bindTo("currentSheild",(t,e,r,n,i)=>{i&&i.unequip&&i.unequip(R(s));for(const t of s.inventory.get(p.Sheild))t instanceof g.SuperSheild||t.detach();t&&t.equip&&t.equip(R(s)),t&&t.render(s.sprite)}),s.args.type="actor-generic",s.args.modeTime=0,s.args.charStrings=[],s.args.display=s.args.display||"initial",s.args.rings=0,s.args.coins=0,s.args.emeralds=0,s.args.emblems=[],s.args.emblemsCurrent=[],s.args.dead=!1,s.args.respawning=!1,s.ringSet=new Set,s.ringDoc=new DocumentFragment,s.args.yMargin=0,s.args.cameraMode="normal",s.args.cameraBias=0,s.args.layer=null!==(r=s.args.layer)&&void 0!==r?r:1,s.args.active=null!==(i=s.args.active)&&void 0!==i&&i,s.args.moving=!1,s.args.flySpeedMax=40,s.args.x=s.args.x||1280,s.args.y=s.args.y||32,s.args.z=s.args.z||0,s.args.xOff=0,s.args.yOff=0,s.args.jumpArced=!1,s.args.width=s.args.width||1,s.args.height=s.args.height||1,s.args.direction=Number(s.args.direction)||1,s.args.heading=0,s.args.gSpeed=s.args.gSpeed||0,s.args.hSpeed=0,s.args.xSpeed=s.args.xSpeed||0,s.args.ySpeed=s.args.ySpeed||0,s.args.angle=s.args.angle||0,s.args.groundAngle=s.args.groundAngle||0,s.args.displayAngle=0,s.args.seatAngle=0,s.args.airAngle=0;const w=[];Object.defineProperty(w,n.Bindable.NoGetters,{value:!0}),s.lastAngles=w,s.angleAvg=16,s.args.xSpeedMax=512,s.args.ySpeedMax=512,s.args.gSpeedMax=A,s.args.rollSpeedMax=23,s.args.gravity=null!==(o=s.args.gravity)&&void 0!==o?o:.65,s.args.decel=.85,s.args.accel=.2,s.args.airAccel=.3,s.args.jumpForce=14,s.args.airTimeTotal=0,s.args.groundTimeTotal=0,s.args.jumping=!1,s.args.jumpedAt=null,s.args.deepJump=!1,s.args.highJump=!1,s.maxStep=11,s.backStep=0,s.frontStep=0,s.args.rolling=!1,s.args.sliding=!1,s.args.skidTraction=2.25,s.args.skidTraction=5,s.args.fgFilter="none",s.args.bgFilter="none",s.args.falling=!0,s.args.running=!1,s.args.crawling=!1,s.args.climbing=!1,s.args.rotateFixed=!1,s.args.mode=s.args.mode||C,s.xAxis=0,s.yAxis=0,s.aAxis=0,s.bAxis=0,s.lAxis=0,s.rAxis=0,s.buttons={},s.stayStuck=!1,s.willStick=!1,s.args.startled=s.args.startled||0,s.args.antiSkid=s.args.antiSkid||0,s.args.halted=s.args.halted||0,s.args.ignore=s.args.ignore||0,s.args.float=s.args.float||0,s.colliding=!1,s.args.flyAngle=0,s.standingUnder=new Set,s[B]=!1,s.args.bindTo(["mode","falling"],()=>{s.args.modeTime=0,s[B]=!1}),s.moved=!1,s.args.bindTo(["x","y","direction"],(t,e,r)=>{s[B]=!1,isNaN(t)&&console.trace(e,t),s.idleTime=0,s.moved=!0}),s.args.bindTo(["width","height"],(t,e,r)=>{s[B]=!1,s.moved=!0}),s.args.bindTo(["xSpeed","ySpeed"],(t,e,r)=>{isNaN(t)&&console.trace(e,t)}),s.args.bindTo("gSpeed",t=>{s.gSpeedLast=t||s.gSpeedLast}),s.args.bindTo("xSpeed",t=>{s.airAngle=s.args.airAngle=Math.atan2(s.args.ySpeed,t),s.xSpeedLast=t||s.xSpeedLast}),s.args.bindTo("ySpeed",t=>{s.airAngle=s.args.airAngle=Math.atan2(t,s.args.xSpeed),s.ySpeedLast=t||s.ySpeedLast}),s.impulseMag=null,s.impulseDir=null,s.args.stopped=0,s.args.particleScale=1,s.dropDashCharge=0;const S=n.Bindable.make(R(s));return s.debindGroundX=null,s.debindGroundY=null,s.debindGroundA=null,s.debindGroundL=null,s.args.name=null!==(a=s.args.name)&&void 0!==a?a:"",s.controllable&&(s.controller=new f.Controller({deadZone:.2}),s.controller.zero()),s.debindGroundX=new Set,s.debindGroundY=new Set,s.debindGroundA=new Set,s.debindGroundL=new Set,s.args.bindTo("standingOn",(t,e,r,n)=>{if(s.isGhost)return;if(s.args.standingOn===t)return;for(const t of s.debindGroundX)s.debindGroundX.delete(t),t();for(const t of s.debindGroundY)s.debindGroundY.delete(t),t();for(const t of s.debindGroundA)s.debindGroundA.delete(t),t();for(const t of s.debindGroundL)s.debindGroundL.delete(t),t();const i=r[e];i&&(i.isVehicle&&(i.occupant=null,i.stayStuck=!1,i.willStick=!1,i.xAxis=0,i.yAxis=0),i.standingUnder&&i.standingUnder.delete(R(s)));const o=s.viewport.objectPalette.switch;if(s.controllable&&(!i||i instanceof o||s.viewport.auras.delete(i)),t){if(t.standingUnder.add(R(s)),s.controllable&&t.isVehicle&&!t.dead){s.args.gSpeed||(s.args.pushing=!1);const e=t.args.bindTo("x",(e,r)=>{const n=t.args.direction*t.args.seatForward||0,i=t.args.seatHeight||t.args.height||0,o=O(t.rotatePoint(n,i),2),a=o[0],c=o[1];s.args.x=a+e,s.args.y=c+t.y,s.args.direction=t.args.direction}),r=t.args.bindTo("y",(e,r)=>{if(s.args.jumping)return;const n=t.args.direction*t.args.seatForward||0,i=t.args.seatHeight||t.args.height||0,o=O(t.rotatePoint(n,i),2),a=o[0],c=o[1];s.args.x=a+t.x,s.args.y=c+e}),n=t.args.bindTo("layer",(t,e)=>{s.args.layer=t});s.debindGroundX.add(e),s.debindGroundY.add(r),s.debindGroundL.add(n);const i=t.occupant;t.args.yMargin=s.args.height,i&&i!==R(s)&&(i.args.standingOn=null,i.args.y-=32,i.args.gSpeed=0,i.args.xSpeed=-5*s.args.direction,i.args.ySpeed=-8,i.args.falling=!0),s.args.gSpeed=0,s.args.xSpeed=0,s.args.ySpeed=0,s.args.falling=!1,t.occupant=R(s)}else if(!t.isVehicle&&s.args.y<=1+t.args.y-t.args.height){const e=t.args.bindTo("x",(e,r)=>{t.getMapSolidAt(s.args.x+e+-t.args.x,s.args.y)||(s.args.x+=e+-t.args.x)}),r=t.args.bindTo("y",(e,r)=>{const n=e+-t.args.height+(t.args.falling||!s.controllable&&!s.isPushable?0:-1);t.getMapSolidAt(s.args.x,n)||(s.args.y=n)}),n=t.args.bindTo("layer",(t,e)=>{s.args.layer=t});s.debindGroundX.add(e),s.debindGroundY.add(r),s.debindGroundL.add(n),t.args.treadmill||(s.args.gSpeed-=t.args.gSpeed)}i&&i.isVehicle&&(i.occupant===R(s)&&(i.occupant=null,i.stayStuck=!1,i.willStick=!1),i.xAxis=0,i.yAxis=0),t.standBelow(R(s))}else s.viewport.auras.delete(s.args.standingOn)}),s.age=0,_(s,S)}return e=E,j=[{key:"fromDef",value:function(t){var e;const r={x:t.x+Math.floor(t.width/2),y:t.y-1,visible:t.visible,name:t.name,id:t.id},n=new Map;for(const t in r)"object"!==S(r[t])&&n.set(t,r[t]);const i={};for(const e in t.properties){const o=t.properties[e];"object"===t.properties[e].type&&(i[o.name]=o.value),r[o.name]=o.value,n.set(o.name,o.value)}r.tileId=t.gid;const o=new this(Object.assign({},r));return o.others=i,o.def=n,o.objDef=t,o.args.float=null!==(e=o.float)&&void 0!==e?e:o.args.float,o}}],(r=[{key:"onRendered",value:function(){if(this.sprite=this.findTag("div.sprite"),this.box=this.findTag("div"),this.autoStyle.set(this.box,{display:"display","--animation-bias":"animationBias","--bg-filter":"bgFilter","--sprite-sheet":"spriteSheetUrl","--direction":"direction","--sprite-x":"spriteX","--sprite-y":"spriteY","--angle":"angle","--palletShift":"palletShift","--fly-angle":"flyAngle","--display-angle":"groundAngle8","--ground-angle":"groundAngle8","--seat-angle":"seatAngle","--ground-angle8":"groundAngle8","--air-angle":"airAngle","--corkscrew":"corkscrew","--opacity":"opacity","--height":"height","--width":"width","--x":"x","--y":"y","--z":"z"}),this.autoAttr.set(this.box,{"data-camera-mode":"cameraMode","data-colliding":"colliding","data-direction":"direction","data-respawning":"respawning","data-animation":" animation","data-heading":"heading","data-super":"isSuper","data-hyper":"isHyper","data-mercy":"mercy","data-selected":"selected","data-following":"following","data-carrying":"carrying","data-reversing":"reversing","data-falling":"falling","data-moving":"moving","data-pushing":"pushing","data-facing":"facing","data-filter":"filter","data-angle":"angleDeg","data-driving":"driving","data-active":"active","data-knocked":"knocked","data-layer":"layer","data-dead":"dead","data-mode":"mode","data-condition":"condition","data-netplayer":"netplayer","data-id":"id"}),!this.init&&this.viewport){this.args.bindTo("spriteSheet",t=>{this.args.spriteSheetUrl=void 0!==t?this.urlWrap(t):void 0}),this.args.bindTo("angle",t=>this.args.angleDeg=this.rad2deg(t)),this.args.charStrings.bindTo(t=>{!this.labels&&this.args.charStrings.length?(this.labels=i.View.from('<div class = "labels" cv-ref = "labels" cv-each = "charStrings:charString:c">[[charString]]</div>',{charStrings:this.args.charStrings}),this.labels.render(this.sprite)):this.labels&&!this.args.charStrings.length&&(this.labels.remove(),this.labels=null)},{wait:0}),this.init=!0,this.args.bindTo("animation",(t,e,r,n,i)=>{this.box.setAttribute("data-animation",t)}),this.controllable&&this.sprite.parentNode.classList.add("controllable");for(const t of this.behaviors)t.rendered&&t.rendered(n.Bindable.make(this))}}},{key:"updateStart",value:function(){if((this.isSuper||this.isHyper)&&!this.args.currentSheild instanceof g.SuperSheild){const t=new g.SuperSheild;t.equip(this),this.inventory.add(t)}else if(this.args.currentSheild&&this.args.currentSheild instanceof g.SuperSheild){const t=this.args.currentSheild;t&&t.unequip(this),this.args.currentSheild=null}this.args.dead&&(this.args.xSpeed=0);for(const t of this.behaviors)t.updateStart&&t.updateStart(this)}},{key:"updateEnd",value:function(){const t=Math.sign(this.args.gSpeed||this.args.xSpeed||this.args.direction);t>0&&"left"===this.args.facing||t<0&&"right"===this.args.facing?this.args.reversing=!0:this.args.reversing=!1;for(const t of this.behaviors)t.updateEnd&&t.updateEnd(this);if(this.viewport&&this.viewport.args.frameId%this.viewport.settings.frameSkip!=0)return;const e=this.focused;this.args.falling;for(const t of this.regions)t.focus&&(this.viewport.auras.add(t.focus),this.focused=t.focus);e!==this&&e!==this.focused&&this.viewport&&this.viewport.auras.delete(e),this.focused&&this.focused.broken&&(this.focused=null),this.args.groundAngle8=this.args.groundAngle,!this.isVehicle&&!this.args.falling&&!this.args.grinding&&0===this.args.mode&&Math.abs(this.args.groundAngle8)<=Math.PI/8+.01&&(this.args.groundAngle8=0);for(const t of this.autoStyle){var r=O(t,2);const e=r[0],i=r[1],o={};for(const t of Object.entries(i)){var n=O(t,2);const e=n[0],r=n[1];r in this.args&&(o[e]=this.args[r])}e.style(o)}for(const t of this.autoAttr){var i=O(t,2);const e=i[0],r=i[1],n={};for(const t of Object.entries(r)){var o=O(t,2);const e=o[0],r=o[1];r in this.args&&(n[e]=this.args[r])}e.attr(n)}for(const t of this.splashes)t.x+=this.args.xSpeed*(1-t.age/30),t.style({"--x":t.x}),t.age++;this.viewport&&void 0!==this.startFrame?this.age++:this.age=0,this.screenLock&&(this.args.x<this.screenLock.xMin&&(this.args.x=this.screenLock.xMin),this.args.x>this.screenLock.xMax&&(this.args.x=this.screenLock.xMax))}},{key:"update",value:function(){this.locked>0&&this.locked--;for(const e of this.ignores){var t=O(e,2);const r=t[0],n=t[1];n<=0?this.ignores.delete(r):this.ignores.set(r,-1+n)}for(const t of this.behaviors)t.update&&t.update(this)}},{key:"getLocalDrag",value:function(){if(this.args.dead)return 1;let t=1;for(const e of this.regions)e.skimmers.has(this)||e.skimmers.has(n.Bindable.make(this))||(e.args.drag||0===e.args.drag)&&e.args.drag<t&&(t=e.args.drag);return t}},{key:"getLocalFriction",value:function(){let t=1;for(const e of this.regions)e.skimmers.has(this)||e.skimmers.has(n.Bindable.make(this))||(e.args.friction||0===e.args.friction)&&e.args.friction<t&&(t=e.args.friction);return t}},{key:"setCameraMode",value:function(){if(this.viewport&&!this.args.cameraIgnore)if("popping"===this.args.cameraMode&&Math.abs(this.args.xSpeed)>Math.abs(this.args.ySpeed)&&(this.args.cameraMode="aerial"),this.focused)this.args.cameraMode="panning";else if(this.viewport.args.cutScene)this.args.cameraMode="cutScene";else if(this.args.bossMode)this.args.cameraMode="boss";else if(this.args.standingOn&&this.args.standingOn.isVehicle)this.args.cameraMode=this.args.standingOn.args.cameraMode;else if(this.args.localCameraMode)this.args.cameraMode=this.args.localCameraMode;else if(this.controllable)if(this.args.mode&&!this.args.falling&&this.args.rolling&&this.args.jumpBlocked)this.args.cameraMode="tube";else if(!this.args.falling||this.getMapSolidAt(this.args.x,this.args.y+24)){const t=this.getMapSolidAt(this.args.x+32*this.args.direction,this.args.y+24),e=this.getMapSolidAt(this.args.x+32*this.args.direction,this.args.y+96),r=this.getMapSolidAt(this.args.x+0*this.args.direction,this.args.y+48);if(this.args.mode===C&&0===this.args.groundAngle)if(Math.abs(this.args.groundAngle)<Math.PI/4){const n=this.args.standingOn?this.args.standingOn.args.cameraBias:0;n||r||!t||this.args.grinding||this.args.skimming?n||t||e||this.args.grinding||this.args.skimming?this.args.cameraMode="normal":this.args.cameraMode="cliff":this.args.cameraMode="bridge"}else this.args.cameraMode="normal";else this.args.cameraMode="normal"}else this.getMapSolidAt(this.args.x+0*this.args.direction,this.args.y+64)?(!this.args.falling||"popping"!==this.args.cameraMode||Math.abs(this.args.ySpeed)<Math.abs(this.args.xSpeed))&&(this.args.cameraMode="normal"):this.fallTime>15&&"panning"!==this.args.cameraMode&&("popping"!==this.args.cameraMode||this.args.ySpeed>10)&&(this.args.cameraMode="aerial"),this.viewport.onFrameOut(45,()=>{"airplane"!==this.args.cameraMode&&this.args.falling&&this.isVehicle&&Math.abs(this.args.xSpeed>25)&&!this.getMapSolidAt(this.args.x,this.args.y+480)&&(this.args.cameraMode="airplane")})}},{key:"callCollideHandler",value:function(t){if(!this.viewport)return;const e=this.viewport;if(this.ignores.has(t))return!1;if(t.ignores.has(this))return!1;if(this.args.dead||t.args.dead)return;if(t===this.args.hangingFrom)return!1;if(this.isGhost||t.isGhost)return;let r;t.args.y<=this.args.y-this.args.height?(this.args.collType="collision-top",r=0):t.args.x<this.args.x-Math.floor(this.args.width/2)?(this.args.collType="collision-left",r=1):t.args.x>=this.args.x+Math.floor(this.args.width/2)?(this.args.collType="collision-right",r=3):t.args.y>=this.args.y?(this.args.collType="collision-bottom",r=2):(this.args.collType="collision-intersect",r=-1),e.collisions.has(this)||e.collisions.set(this,new Map),e.collisions.has(t)||e.collisions.set(t,new Map);const n=r>-1?(r+2)%4:r;this.collideB(t,r),t.collideB(this,n);const i=this.collideA(t,r),o=t.collideA(this,n),a=i||o;if(this.args.colliding=this.colliding=this.colliding||a||!1,!1!==a){const i=e.collisions.get(this,r),o=e.collisions.get(t,n);i.set(t,r),o.set(this,n)}return a}},{key:"processInput",value:function(){if(this.controllable&&this.args.standingOn&&this.args.standingOn.isVehicle&&this===n.Bindable.make(this.args.standingOn.occupant)){if(this.args.modeTime<5)return;this.viewport.auras.add(this.args.standingOn);const t=this.args.standingOn;t.xAxis=this.xAxis,t.yAxis=this.yAxis,t.stayStuck=this.stayStuck,t.willStick=this.willStick,this.processInputVehicle(),this.args.direction=t.args.direction,this.args.facing=t.args.facing,this.args.layer=t.args.layer,this.args.mode=t.args.mode,this.args.angle=t.args.angle}else this.controllable&&this.processInputDirect()}},{key:"processInputDirect",value:function(){let t=this.xAxis,e=this.yAxis,r=this.args.gSpeedMax;this.running?r=1/0:this.crawling&&(r=1);const n=this.getLocalDrag();if(this.noClip)this.args.ignore||(this.args.xSpeed+=t*this.args.airAccel*n,this.args.ySpeed+=e*this.args.airAccel*n,t||(this.args.xSpeed=0),e||(this.args.ySpeed=0));else if(this.args.falling)this.args.falling&&t&&Math.abs(this.args.xSpeed)<this.args.xSpeedMax&&Math.abs(this.args.xSpeed)<this.args.gSpeedMax&&!this.args.ignore&&(this.args.xSpeed+=t*this.args.airAccel*n);else{const e=!this.args.grinding||Math.sign(this.args.gSpeed)===Math.sign(this.xAxis)||Math.abs(this.args.gSpeed)>6&&Math.abs(this.args.gSpeed)<2*this.args.gSpeedMax||0===this.args.gSpeed;if(!this.args.rolling&&e&&this.yAxis<.55&&Math.abs(this.yAxis)<=Math.abs(this.xAxis)&&!this.spindashCharge){const e=Math.sign(t);let i=this.args.gSpeed;const o=Math.sign(i),a=this.getLocalFriction();if(!this.args.ignore){if(this.args.rolling||this.args.sliding||this.args.climbing||this.args.wallSticking||(e!==o&&o?!this.args.ignore&&!this.args.antiSkid&&Math.abs(i)>1&&(i+=.5*t*a*this.args.accel*n*this.args.skidTraction):Math.abs(e-o)<2&&(i+=t*a*this.args.accel*n)),Math.sign(this.args.gSpeed)&&Math.sign(this.args.gSpeed)!==Math.sign(i))return void(this.args.gSpeed=0);this.args.pushing&&Math.sign(t)!==Math.sign(this.args.pushing)?this.args.gSpeed=0:(!t||Math.abs(i)<r||Math.sign(i)!==Math.sign(t))&&(this.args.gSpeed=i)}}}t<0&&(this.args.gSpeed||this.args.stuck)&&!this.args.ignore&&(this.args.climbing||(this.args.facing="left"),(!this.args.grinding||Math.abs(this.args.gSpeed)<3)&&(this.args.direction=-1)),t>0&&(this.args.gSpeed||this.args.stuck)&&!this.args.ignore&&(this.args.climbing||(this.args.facing="right"),(!this.args.grinding||Math.abs(this.args.gSpeed)<3)&&(this.args.direction=1)),this.args.currentSheild instanceof v.StarSheild||(this.aAxis<-.75&&(this.inventory.has(b.ElectricSheild)?this.args.currentSheild=[...this.inventory.get(b.ElectricSheild)][0]:this.args.currentSheild=""),this.aAxis>.75&&(this.inventory.has(h.FireSheild)?this.args.currentSheild=[...this.inventory.get(h.FireSheild)][0]:this.args.currentSheild=""),this.bAxis<-.75&&(this.inventory.has(d.BubbleSheild)?this.args.currentSheild=[...this.inventory.get(d.BubbleSheild)][0]:this.args.currentSheild=""),this.bAxis>.75&&(this.inventory.has(y.NormalSheild)?this.args.currentSheild=[...this.inventory.get(y.NormalSheild)][0]:this.args.currentSheild=""))}},{key:"processInputVehicle",value:function(){this.args.standingOn.processInputDirect()}},{key:"collideA",value:function(t,e){return this.solid}},{key:"collideB",value:function(t){}},{key:"castRay",value:function(){let t=1,e=()=>{},r=Math.PI/2,n=[0,0];for(var i=arguments.length,o=new Array(i),a=0;a<i;a++)o[a]=arguments[a];switch(o.length){case 2:t=o[0],e=o[1];break;case 3:t=o[0],r=o[1],e=o[2];break;case 4:t=o[0],r=o[1],n=o[2],e=o[3]}const s=new Set(viewport.actorsAtPoint(this.args.x,this.args.y+t,this.args.width+t,this.args.height+2*t));for(let i=0;i<Math.floor(t);i++){const t=e(i,[this.args.x+n[0]+i*Math.cos(r),this.args.y+n[1]+i*Math.sin(r)],s,this);if(void 0!==t)return t}return!1}},{key:"castRayQuick",value:function(t,e){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[0,0],i=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];if(!this.viewport||!this.viewport.tileMap)return;const o=this.args.x+r[0],a=this.args.y+r[1],s=this.viewport.tileMap.castRay(o,a,e,t,this.getCollisionMap());let c=t;s&&(c=Math.hypot(o-s[0],a-s[1]));const l=o+Math.cos(e)*c,u=a+Math.sin(e)*c,f=this.viewport.actorsAtLine(o,a,l,u);f.delete(n.Bindable.make(this)),f.delete(this);const p=new Map;if(i)for(const t of f){var h=O(t,2);const e=h[0],r=h[1];!1!==e.callCollideHandler(this)&&p.set(e,r)}for(const t of p){var g=O(t,2);const e=g[0],r=g[1];if(!(r.distance>c)&&this.checkSolidActors(e))return r.distance}return!!s&&c}},{key:"impulse",value:function(t,e){let r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];this.impulseMag=t,this.impulseDir=e,this.impulseFal=r}},{key:"rad2deg",value:function(t){const e=180/Math.PI*t;return e>0?Math.round(Math.floor(10*e)/10):Math.round(Math.ceil(10*e)/10)}},{key:"roundAngle",value:function(t,e){return e/=2,Math.round(t/(Math.PI/e))*Math.PI/e}},{key:"findNearestActor",value:function(t,e){arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r=this.viewport;if(!r)return;const n=r.getNearbyColCells(this.args.x,this.args.y);let i=null,o=1/0;for(const r of n)for(const n of r){if(n===this)continue;if(n.args.gone)continue;if(!t(n))continue;const r=this.distanceFrom(n);Math.abs(r)>e||r<o&&(i=n,o=r)}return i}},{key:"immune",value:function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"normal";const r=this.args.currentSheild;return!!(r&&r.immune&&r.immune(this,t,e))}},{key:"totalCombo",value:function(){let t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(!this.args.popChain.length)return;this.eraseCombo&&(this.eraseCombo(),this.eraseCombo=!1),this.args.popCombo=0;let e=0,r=0;for(const t of this.args.popChain)e+=t.multiplier,r+=t.points;const n=Math.ceil(r*e);return this.args.popChain.length=0,n?(this.eraseCombo=this.viewport.onFrameOut(360,()=>{this.viewport.args.comboResult=null,this.viewport.args.comboFail=null}),t?(this.viewport.args.comboFail=new l.CharacterString({value:n,color:"red-light"}),void(this.viewport.args.comboResult=null)):(this.viewport.args.comboResult=new l.CharacterString({value:"+"+n,color:"green-light"}),this.viewport.args.comboFail=null,void(this.args.score+=n))):(this.viewport.args.comboResult=null,void(this.viewport.args.comboFail=null))}},{key:"sap",value:function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"normal";this.args.dead||(this.totalCombo(!0),w.Sfx.play("SAP_HEALTH"),this.isSuper||this.isHyper||(this.args.condition="sapped-"+e,this.viewport&&this.viewport.onFrameOut(5,()=>this.args.condition=""),this.args.rings>0?(this.args.rings-=t,this.viewport&&this.viewport.settings.rumble&&this.controller&&this.controller.rumble&&this.controller.rumble({duration:100,strongMagnitude:.5,weakMagnitude:1})):this.controllable&&(this.die(),this.viewport.settings.rumble&&this.controller.rumble({duration:450,strongMagnitude:1,weakMagnitude:1}))))}},{key:"damage",value:function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"normal";if(this.args.mercy)return;this.dashed=this.args.jumping=this.args.spinning=!1;const r=new CustomEvent("damage",{cancelable:!0,detail:{other:t,type:e}});return this.isHyper?void 0:this.isSuper?(this.onNextFrame(()=>this.startle(t)),void(this.args.mercy=30)):void(this.immune(t,e)||(this.dispatchEvent(r)?this.args.rings?(this.loseRings(),this.args.rings=0,this.onNextFrame(()=>this.startle(t)),this.args.mercy=180,this.totalCombo(!0),this.viewport.settings.rumble&&(this.controller.rumble({duration:350,strongMagnitude:1,weakMagnitude:1}),this.onTimeout(350,()=>{this.controller.rumble({duration:150,strongMagnitude:.5,weakMagnitude:1})}))):this.controllable&&(this.die(),this.totalCombo(!0),this.viewport.settings.rumble&&this.controller.rumble({duration:450,strongMagnitude:1,weakMagnitude:1})):r.detail.immune||(this.args.y-=8,this.onNextFrame(()=>this.startle(t)),this.args.mercy=180,this.viewport.settings.rumble&&this.controller.rumble({duration:350,strongMagnitude:1,weakMagnitude:1}),this.totalCombo(!0),this.lightDashReward=this.grindReward=this.airReward=null)))}},{key:"startle",value:function(t){if(this.noClip)return;this.args.startled=0;const e=Math.sign(t&&(t.args.xSpeed||t.args.x-t.xLast||t.args.x-this.args.x)||this.x-this.xLast||this.args.xSpeed||this.args.gSpeed||this.args.direction);this.args.jumping=!1,this.args.falling=!0,this.args.startled=180,this.args.ignore=30,this.args.float=1,this.args.xSpeed=-2.25*e,this.args.ySpeed=-8,this.args.x+=this.args.xSpeed,this.args.flying=!1,this.args.dashed=!1,this.args.lightDashed=!1,this.args.lightDashing=!1,this.args.gSpeed=0,this.args.standingOn=!1,2===this.args.mode?(this.args.mode=0,this.args.y+=this.args.height,this.args.ySpeed=4):this.args.y-=4}},{key:"checkSolidActors",value:function(t){return t.args!==this.args&&(!!t.solid&&(!t.args.platform&&!t.isVehicle||this.args.y<=t.args.y+-t.args.height&&this.args.ySpeed>=0))}},{key:"scanBottomEdge",value:function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;const e=this.viewport.tileMap,r=this.args.width/2,n=e.getSolid(this.x-r,this.y+1,this.args.layer),i=e.getSolid(this.x+r,this.y+1,this.args.layer);if(!n||!i)return this.castRay(this.args.width,-t<0?Math.PI:0,[t*r,0],(t,e)=>{let r=this.getMapSolidAt(e[0],e[1]+1);if(Array.isArray(r)&&(r=r.filter(t=>t.callCollideHandler(this)).length),r)return this.args.width-t})}},{key:"realAngle",get:function(){const t=this.args;if(t.standingOn&&!t.mode)return t.standingOn.realAngle;if(t.falling)return-t.groundAngle-Math.PI;switch(t.mode){case 0:return-t.groundAngle-Math.PI;case 1:return-t.groundAngle-Math.PI/2;case 2:return-t.groundAngle;case 3:return-t.groundAngle+Math.PI/2}}},{key:"downAngle",get:function(){switch(this.args.mode){case C:return Math.PI/2;case 3:return 0;case 2:return-Math.PI/2;case 1:return Math.PI}}},{key:"upAngle",get:function(){switch(this.args.mode){case C:return-Math.PI/2;case 3:return Math.PI;case 2:return Math.PI/2;case 1:return 0}}},{key:"leftAngle",get:function(){switch(this.args.mode){case C:return Math.PI;case 3:return-Math.PI/2;case 2:return 0;case 1:return Math.PI/2}}},{key:"rightAngle",get:function(){switch(this.args.mode){case C:return 0;case 3:return Math.PI/2;case 2:return Math.PI;case 1:return-Math.PI/2}}},{key:"groundPoint",get:function(){switch(this.args.mode){case C:return[this.args.x+0,this.args.y+1];case 3:return[this.args.x+1,this.args.y+0];case 2:return[this.args.x+0,this.args.y-1];case 1:return[this.args.x-1,this.args.y+0]}}},{key:"rotatePoint",value:function(t,e){return[t*Math.cos(this.realAngle)-e*Math.sin(this.realAngle),e*Math.cos(this.realAngle)+t*Math.sin(this.realAngle)]}},{key:"standBelow",value:function(t){}},{key:"filterSolidActors",value:function(t){return t.args!==this.args&&(!!t.solid&&(!t.args.platform&&!t.isVehicle||(this.args.y>=t.args.y&&this.args.ySpeed>=0&&2===this.args.mode||this.args.y<=t.args.y+-t.args.height+1&&this.args.ySpeed>=0)))}},{key:"getMapSolidAt",value:function(t,e){let r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;if(!this.viewport)return;if(this.screenLock&&(t<this.screenLock.xMin||t>this.screenLock.xMax))return!0;if(r){const r=this.viewport.actorsAtPoint(t,e,0,0,{nearbyActors:n}).filter(this.filterSolidActors.bind(this));if(r.length>0)return r}return this.viewport.tileMap.getSolid(t,e,this.getCollisionMap())}},{key:"canRoll",get:function(){return!1}},{key:"canFly",get:function(){return!1}},{key:"canStick",get:function(){return!1}},{key:"canSpindash",get:function(){return!1}},{key:"isEffect",get:function(){return!1}},{key:"isPushable",get:function(){return!1}},{key:"isVehicle",get:function(){return!1}},{key:"solid",get:function(){return!1}},{key:"x",get:function(){return this.args.x}},{key:"y",get:function(){return this.args.y}},{key:"point",get:function(){return[this.args.x,this.args.y]}},{key:"rotateLock",get:function(){return!1}},{key:"controllable",get:function(){return!1}},{key:"skidding",get:function(){return Math.abs(this.args.gSpeed)&&this.args.direction&&!this.args.antiSkid&&!this.args.grinding&&Math.sign(this.args.gSpeed)!==this.args.direction}},{key:"effect",value:function(t){}},{key:"readInput",value:function(){if(!this.controller)return;const t=this.controller;if(this.xAxis=0,this.yAxis=0,!t.axes)return;t.axes[0]&&(this.xAxis=t.axes[0].magnitude,Math.abs(this.xAxis)>.55&&(this.xAxis=Math.sign(this.xAxis)),Math.abs(this.xAxis)<.1&&(this.xAxis=0)),t.axes[1]&&(this.yAxis=t.axes[1].magnitude,Math.abs(this.yAxis)>.55&&(this.yAxis=Math.sign(this.yAxis)),Math.abs(this.yAxis)<.1&&(this.yAxis=0)),t.axes[2]&&(this.aAxis=t.axes[2].magnitude),t.axes[3]&&(this.bAxis=t.axes[3].magnitude);const e=t.buttons;this.buttons=e;for(const t in e){const r=e[t],n=`release_${t}`,i=`command_${t}`,o=`hold_${t}`;if(0==t&&1===r.delta&&(this.yAxis&&this.args.falling||this.args.standingOn&&this.args.standingOn.quickDrop)||!this.args.standingOn||!this.args.standingOn.isVehicle){if(1===r.delta){let t=!1;if(this.args.currentSheild&&i in this.args.currentSheild&&!1===this.args.currentSheild[i](this,r)&&(t=!0),!t)for(const e of[...this.behaviors].reverse())if(e[i]&&!1===e[i](this,r)){t=!0;break}t||this[i]&&this[i](r)}else if(-1===r.delta){let t=!1;for(const e of this.behaviors)e[n]&&!1===e[n](this,r)&&(t=!0);t||(this.args.currentSheild&&n in this.args.currentSheild&&this.args.currentSheild[n](this,r),this[n]&&this[n](r))}else if(r.active){let t=!1;for(const e of this.behaviors)e[o]&&!1===e[o](this,r)&&(t=!0);t||(this.args.currentSheild&&o in this.args.currentSheild&&this.args.currentSheild[o](this,r),this[o]&&this[o](r))}}else if(this.args.standingOn&&this.args.standingOn.isVehicle){this.args.jumping=!1,this.args.flying=!1;const t=this.args.standingOn;if(1===r.delta){t[i]&&t[i](r);for(const e of t.behaviors)e[i]&&e[i](t,r)}else if(-1===r.delta){t[n]&&t[n](r);for(const e of t.behaviors)e[n]&&e[n](t,r)}else if(r.active){t[o]&&t[o](r);for(const e of t.behaviors)e[o]&&e[o](t,r)}}}}},{key:"distanceFrom",value:function(t){let e=t.x,r=t.y;return Math.hypot(this.x-e,this.y-r)}},{key:"twist",value:function(t){if(!this.twister){const t=this.viewport.tags.bgFilters,e='<div class = "point-actor-filter twist-filter">';this.twistFilter=new o.Tag(e),t.appendChild(this.twistFilter.node),this.twister=new a.Twist({id:"twist-"+this.args.id,scale:60}),this.twister.args.bindTo(["x","y","width","height","xOff","yOff"],(t,e)=>{var r;this.twistFilter.style((T(r={},`--${e}`,t),T(r,"filter",`url(#twist-${this.args.id})`),r))}),this.twister.args.yOff=16,this.twister.render(this.twistFilter.node),this.onRemove(()=>this.twistFilter.remove())}this.twister.args.scale=t}},{key:"pinch",value:function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!this.pincherBg){const t=this.viewport.tags.bgFilters,e=(this.args.type.split(" ").shift(),'<div class = "point-actor-filter pinch-filter">');this.pinchFilterBg=new o.Tag(e),t.appendChild(this.pinchFilterBg.node),this.pincherBg=new c.Pinch({id:"pinch-"+this.args.id,scale:60}),this.pincherBg.args.bindTo(["x","y","width","height","xOff","yOff"],(t,e)=>{var r;this.pinchFilterBg.style((T(r={},`--${e}`,t),T(r,"filter",`url(#pinch-${this.args.id})`),r))}),this.pincherBg.render(this.pinchFilterBg),this.onRemove(()=>this.pinchFilterBg.remove())}this.pincherBg.args.scale=t}},{key:"droop",value:function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;null===r&&(r=e);const n=this.args.width/2;if(!this.drooperFg)return this.drooperFg=new s.Droop({id:"droop-"+this.args.id,width:3*this.args.width,height:3*this.args.height,scale:64}),this.args.bindTo(["x","y"],(t,e)=>{this.drooperFg.args[e]=Number(t)}),this.onNextFrame(()=>{this.drooperFg.args.scale=Number(2*t),this.sprite.style({transform:`translate(-50%, calc(${t}px + calc(-100% + 1px)))`,filter:`url(#droop-${this.args.id})`}),this.drooperFg.args.dx=-e}),void this.drooperFg.render(this.sprite);this.drooperFg.args.scale=Number(2*t),this.sprite.style({transform:`translate(-50%, calc(${t}px + calc(-100% + 1px)))`,filter:`url(#droop-${this.args.id})`});const i=1-e/n;this.args.width;this.drooperFg.args.droopWidthLeft=`${51*i+1}%`,this.drooperFg.args.droopRightStart=`${51*i}%`,this.drooperFg.args.droopWidthRight=`${102+-51*i}%`}},{key:"crossRegionBoundary",value:function(t){if(t&&!this.args.static&&this.viewport){const e=this.viewport;if(!this.args.gone&&this.args.moving&&Math.abs(this.args.y-(t.args.y+-t.args.height))<=Math.abs(this.args.ySpeed||this.args.gSpeed)&&t.entryParticle){const r=new o.Tag(t.entryParticle);r.node&&(r.age=0,r.x=this.args.x,r.style({"--x":this.args.x,"--y":t.args.y+-t.args.height+-8,"z-index":5,opacity:Math.random,"--particleScale":this.args.particleScale,"--time":320}),this.splashes.add(r),e.particles.add(r),e.onFrameOut(20,()=>{r.node&&e.particles.remove(r),this.splashes.delete(r)}))}}}},{key:"die",value:function(){this.args.dead||(this.viewport.args.inventory.splice(0),this.args.currentSheild=null,this.totalCombo(!0),this.args.groundAngle=0,this.args.ySpeed=0,this.args.xSpeed=0,this.args.jumping=!1,this.args.falling=!0,this.args.ignore=-1,this.args.mercy=0,this.args.float=0,this.args.rings=0,this.args.standingLayer=null,this.args.standingOn=null,this.lastLayer=null,this.args.dead=!0,this.noClip=!0,this.args.ySpeed=-12,this.focused=this.cofocused=null,this.y>this.viewport.meta.deathLine&&(this.args.ySpeed=-14),this.args.xSpeed=0,this.viewport.onFrameOut(120,()=>{this.args.dead&&this.respawn()}))}},{key:"respawn",value:function(){this.viewport&&(this.screenLock=null,this.args.xSpeed=0,this.args.ySpeed=0,this.args.gSpeed=0,this.args.respawning=!0,this.args.display="none",this.args.x=-this.viewport.args.x,this.args.y=-this.viewport.args.y,this.args.standingLayer=null,this.args.standingOn=null,this.lastLayer=null)}},{key:"sleep",value:function(){}},{key:"wakeUp",value:function(){}},{key:"urlWrap",value:function(t){return`url(${t})`}},{key:"facePoint",get:function(){return this.rotatePoint(-5*this.args.direction,-14+this.args.height)}},{key:"registerDebug",value:function(t){window[t]=this}},{key:"loseRings",value:function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;const r=this.viewport.objectPalette.ring;this.spawnRings=this.spawnRings||0;const n=t||Math.min(this.args.rings,16);let i=0;this.spawnRings,Math.floor(n/8);this.viewport.onFrameOut(4,()=>{for(;this.spawnRings<n;){const t=new r,n=Math.ceil(i/8),o=i%8*(Math.PI/4)+Math.PI/4,a=Math.cos(o),s=Math.sin(o);t.args.x=this.x-a*(8*n),t.args.y=this.y-s*(8*n)-this.args.height/4,t.args.xSpeed=0,t.args.ySpeed=0,t.noClip=!0,t.args.static=!1,t.args.float=18,t.args.ignore=30,t.args.width=16,t.args.height=16,t.dropped=!0,this.viewport.onFrameOut(2*(1+n),()=>{this.viewport.spawn.add({object:t})}),this.spawnRings++,i++,this.viewport.onFrameOut(2*n+6,()=>{t.args.xSpeed+=3*-a,t.args.ySpeed+=3*-s,t.args.ySpeed+=.75*-(n+1)}),i%3==2?(t.args.decoration=!0,t.noClip=!0,this.viewport.onFrameOut(100,()=>{this.viewport.actors.remove(t),this.spawnRings>0&&this.spawnRings--})):(t.args.decoration=!1,t.noClip=!1,this.viewport.onFrameOut(e||360-i%5*35,()=>{this.viewport.actors.remove(t),this.spawnRings>0&&this.spawnRings--}))}})}},{key:"collect",value:function(t){t.dropped&&(this.spawnRings&&this.spawnRings--,t.dropped=!1)}},{key:"angleTo",value:function(t){return Math.atan2(this.y-t.y,this.x-t.x)}},{key:"distanceTo",value:function(t){return Math.hypot(this.y-t.y,this.x-t.x)}},{key:"canSee",value:function(t){if(!1===this.castRayQuick(this.distanceTo(t),t.angleTo({x:this.args.x,y:this.args.y-this.args.height}),[0,-this.args.height],!1))return!0}},{key:"setTile",value:function(){const t=this.viewport.tileMap;t.ready.then(e=>{const r=t.getTile(this.args.tileId-1);r&&(this.args.spriteX=r[0],this.args.spriteY=r[1],this.args.spriteSheet=r[2]||this.args.spriteSheet)})}},{key:"halt",value:function(t){const e=this.args.hSpeed=this.args.gSpeed;this.args.gSpeed=0,this.viewport.onFrameOut(t,()=>{this.args.gSpeed=e,this.args.hSpeed=0})}},{key:"setAutoAttr",value:function(t,e){this.autoAttr.get(this.box)[e]=t}},{key:"invoke",value:function(t){for(var e=arguments.length,r=new Array(e>1?e-1:0),n=1;n<e;n++)r[n-1]=arguments[n];this.behaviors.forEach(e=>{"function"==typeof e[t]&&e[t](this,...r)})}},{key:"bMap",value:function(t){const e=new Map;for(var r=arguments.length,n=new Array(r>1?r-1:0),i=1;i<r;i++)n[i-1]=arguments[i];for(const r of this.behaviors)"function"==typeof r[t]&&e.set(r.constructor,r[t](this,...n));return e}},{key:"getBoundingLines",value:function(){if(this[B])return this[B];let t,e,r,n,i;switch(this.args.mode){case C:e=this.args.x-(this.isRegion?0:this.args.width/2),t=[[r=this.args.x+(this.isRegion?this.args.width:this.args.width/2),n=this.args.y-this.args.height,r,i=this.args.y],[e,n,e,i],[r,n,e,n],[r,i,e,i]];break;case 2:e=this.args.x-this.args.width/2,t=[[r=this.args.x+this.args.width/2,n=this.args.y,r,i=this.args.y+this.args.height],[e,n,e,i],[r,n,e,n],[r,i,e,i]];break;case 1:e=this.args.x,t=[[r=this.args.x+this.args.height,n=this.args.y-this.args.width/2,r,i=this.args.y+this.args.width/2],[e,n,e,i],[r,n,e,n],[r,i,e,i]];break;case 3:e=this.args.x-this.args.height,t=[[r=this.args.x,n=this.args.y-this.args.width/2,r,i=this.args.y+this.args.width/2],[e,n,e,i],[r,n,e,n],[r,i,e,i]]}return Object.freeze(t),this[B]=t}},{key:"filterSolids",value:function(t){return t.args!==this.args&&t.callCollideHandler(this)&&t.solid}},{key:"onSpawned",value:function(t){for(const e of this.behaviors)e.onSpawned&&e.onSpawned(this,t)}},{key:"onDespawned",value:function(t){for(const e of this.behaviors)e.onDespawned&&e.onDespawned(this,t)}},{key:"getCollisionMap",value:function(){if(!this.collisionMap){this.collisionMap=this.viewport.tileMap.getCollisionMap();for(const t of this.collisionMap.keys())"Art"===t.name.substr(0,3)?this.collisionMap.delete(t):"Moving Art"===t.name.substr(0,10)&&this.collisionMap.delete(t)}if(!this.viewport)return this.collisionMap;for(const t of this.collisionMap.keys())"Collision 0"===t.name?this.collisionMap.set(t,!0):t.name==="Collision "+this.args.layer?this.collisionMap.set(t,!0):"Door"===t.name.substr(0,4)?this.doorMap.has(t.index)&&this.collisionMap.set(t,this.doorMap.get(t.index)):"Platform"===t.name.substr(0,8)||"Grinding"===t.name.substr(0,8)?(this.args.ySpeed>=0?this.collisionMap.set(t,!0):this.collisionMap.set(t,!1),this.viewport.tileMap.getSolid(this.args.x+16,this.args.y+-16,t.index)&&this.viewport.tileMap.getSolid(this.args.x-16,this.args.y+-16,t.index)?this.collisionMap.set(t,!1):t.layer&&t.layer.meta.vertical&&(this.args.xSpeed&&Math.sign(t.layer.meta.vertical)!==Math.sign(this.args.xSpeed)||this.collisionMap.set(t,!0)),(this.args.climbing&&this.viewport.tileMap.getSolid(this.args.x,this.args.y,t.index)||this.args.flying&&t.layer.meta.vertical!==Math.sign(this.args.xSpeed)&&!this.viewport.tileMap.getSolid(this.args.x+this.args.xSpeed,this.args.y+-8,t.index)&&this.viewport.tileMap.getSolid(this.args.x,this.args.y,t.index))&&this.collisionMap.set(t,!1),t.layer.meta.vertical||this.args.mode||!this.viewport.tileMap.getSolid(this.args.x,this.args.y+-16,t.index)||this.collisionMap.set(t,!1)):"Moving"===t.name.substr(0,6)&&"Moving Art"!==t.name.substr(0,10)?this.collisionMap.set(t,!0):this.collisionMap.set(t,!1);return this.collisionMap}},{key:"command_0",value:function(){}},{key:"command_1",value:function(){}}])&&x(e.prototype,r),j&&x(e,j),Object.defineProperty(e,"prototype",{writable:!1}),E}();t.PointActor=D,T(D,"lastClick",0)}),require.register("actor/PowerupGlow.js",function(t,e,r){"use strict";function n(t){"@babel/helpers - typeof";return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(t,"__esModule",{value:!0}),t.PowerupGlow=void 0;var i=e("./PointActor"),o=e("curvature/base/Tag");function a(t,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,(o=i.key,void 0,"symbol"===n(a=function(t,e){if("object"!==n(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var i=r.call(t,e||"default");if("object"!==n(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(o,"string"))?a:String(a)),i)}var o,a}function s(){return(s="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=u(t)););return t}(t,e);if(n){var i=Object.getOwnPropertyDescriptor(n,e);return i.get?i.get.call(arguments.length<3?t:r):i.value}}).apply(this,arguments)}function c(t,e){return(c=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function l(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,i=u(t);if(e){var o=u(this).constructor;r=Reflect.construct(i,arguments,o)}else r=i.apply(this,arguments);return function(t,e){if(e&&("object"===n(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function u(t){return(u=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}let f=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&c(t,e)}(p,i.PointActor);var e,r,n,f=l(p);function p(){var t;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,p);for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];return(t=f.call(this,...r)).args.type="actor-item actor-powerup-glow",t.args.width=64,t.args.height=64,t}return e=p,(r=[{key:"onRendered",value:function(t){s(u(p.prototype),"onRendered",this).call(this,t),this.autoAttr.get(this.box)["data-closed"]="closed",this.icon=new o.Tag('<div class = "powerup-icon">'),this.halo=new o.Tag('<div class = "powerup-halo">'),this.tags.sprite.appendChild(this.icon.node),this.box.appendChild(this.halo.node)}},{key:"collideA",value:function(t){s(u(p.prototype),"collideA",this).call(this,t),t.controllable&&(this.onTimeout(125,()=>this.args.closed="closed"),this.onTimeout(4500,()=>this.args.closed=""))}},{key:"canStick",get:function(){return!1}},{key:"solid",get:function(){return!1}},{key:"isEffect",get:function(){return!0}}])&&a(e.prototype,r),n&&a(e,n),Object.defineProperty(e,"prototype",{writable:!1}),p}();t.PowerupGlow=f}),require.register("actor/Projectile.js",function(t,e,r){"use strict";function n(t){"@babel/helpers - typeof";return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(t,"__esModule",{value:!0}),t.Projectile=void 0;var i=e("./PointActor"),o=e("../behavior/Platformer"),a=e("../actor/Marker"),s=(e("../actor/Explosion"),e("curvature/base/Tag")),c=e("../region/Region"),l=e("./Spring"),u=e("./BreakableBlock");e("./Block");function f(t,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,(o=i.key,void 0,"symbol"===n(a=function(t,e){if("object"!==n(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var i=r.call(t,e||"default");if("object"!==n(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(o,"string"))?a:String(a)),i)}var o,a}function p(){return(p="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=d(t)););return t}(t,e);if(n){var i=Object.getOwnPropertyDescriptor(n,e);return i.get?i.get.call(arguments.length<3?t:r):i.value}}).apply(this,arguments)}function h(t,e){return(h=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function g(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,i=d(t);if(e){var o=d(this).constructor;r=Reflect.construct(i,arguments,o)}else r=i.apply(this,arguments);return function(t,e){if(e&&("object"===n(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function d(t){return(d=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}let y=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&h(t,e)}(b,i.PointActor);var e,r,n,y=g(b);function b(){var t,e;let r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1?arguments[1]:void 0;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,b);const i=r.gravity;return(e=y.call(this,r,n)).args.type="actor-item actor-projectile",e.args.subType&&(e.args.type=e.args.type+" "+e.args.subType),e.args.damageType=null!==(t=e.args.damageType)&&void 0!==t?t:"normal",e.behaviors.add(new o.Platformer),e.args.width=8,e.args.height=8,e.args.strength=e.args.strength||1,e.args.gravity=null!==i&&void 0!==i?i:.15,e.removeTimer=null,e.noClip=!0,e.deflected=!1,e}return e=b,(r=[{key:"update",value:function(){!this.removed&&this.viewport&&(this.args.falling||(this.args.gSpeed=0,this.args.xSpeed=0,this.args.ySpeed=0),p(d(b.prototype),"update",this).call(this),!this.args.xSpeed&&!this.args.ySpeed&&this.age>1&&this.explode(),this.viewport&&!this.removeTimer&&(this.removeTimer=this.viewport.onFrameOut(200,()=>this.explode())))}},{key:"collideA",value:function(t){if(!(t instanceof b)){if(t===this.args.owner||t instanceof c.Region||t instanceof l.Spring)return!1;if(t instanceof a.Marker||this.args.owner.controllable||t.controllable)return!(this.args.strength<=1&&t instanceof u.BreakableBlock)&&(!t.args.gone&&!this.deflected&&(t instanceof a.Marker||t.args.currentSheild&&t.args.currentSheild.immune(t,this,"projectile")?(this.args.xSpeed*=-1,this.args.ySpeed*=-1,void(this.deflected=!0)):!(!t.solid&&!t.controllable)&&(this.args.xSpeed=0,this.args.ySpeed=0,this.args.float=-1,this.args.owner&&!this.args.owner.args.gone&&(t.controllable||t instanceof u.BreakableBlock)&&t.damage(this,this.args.damageType),this.explode(),!1)))}}},{key:"explode",value:function(){const t=this.viewport;if(!t)return;const e=new s.Tag('<div class = "particle-explosion">');e.style({"--x":this.x,"--y":this.y}),t.particles.add(e),this.viewport.onFrameOut(20,()=>t.particles.remove(e)),this.viewport.actors.remove(this),this.remove()}},{key:"canStick",get:function(){return!1}},{key:"solid",get:function(){return!1}}])&&f(e.prototype,r),n&&f(e,n),Object.defineProperty(e,"prototype",{writable:!1}),b}();t.Projectile=y}),require.register("actor/PropellerPlatform.js",function(t,e,r){"use strict";function n(t){"@babel/helpers - typeof";return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(t,"__esModule",{value:!0}),t.PropellerPlatform=void 0;var i=e("./Block"),o=e("../audio/Sfx");function a(t,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,(o=i.key,void 0,"symbol"===n(a=function(t,e){if("object"!==n(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var i=r.call(t,e||"default");if("object"!==n(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(o,"string"))?a:String(a)),i)}var o,a}function s(){return(s="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=u(t)););return t}(t,e);if(n){var i=Object.getOwnPropertyDescriptor(n,e);return i.get?i.get.call(arguments.length<3?t:r):i.value}}).apply(this,arguments)}function c(t,e){return(c=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function l(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,i=u(t);if(e){var o=u(this).constructor;r=Reflect.construct(i,arguments,o)}else r=i.apply(this,arguments);return function(t,e){if(e&&("object"===n(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function u(t){return(u=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}let f=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&c(t,e)}(p,i.Block);var e,r,n,f=l(p);function p(){var t,e;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,p);for(var r=arguments.length,n=new Array(r),i=0;i<r;i++)n[i]=arguments[i];return(e=f.call(this,...n)).args.maxClimb=null!==(t=e.args.maxClimb)&&void 0!==t?t:256,e.args.width=64,e.args.height=53,e.args.platform=1,e.args.type="actor-item actor-propeller-platform",e.args.static=0,e.args.gravity=.2,e.args.spinning=0,e.args.bouncing=0,e}return e=p,(r=[{key:"onRendered",value:function(){s(u(p.prototype),"onRendered",this).call(this),this.autoAttr.get(this.box)["data-spinning"]="spinning",this.autoAttr.get(this.box)["data-bouncing"]="bouncing"}},{key:"update",value:function(){this.args.cameraBias=-.2,this.args.spinning>0?this.args.spinning--:this.args.spinning=0,this.args.bouncing>0?this.args.bouncing--:this.args.bouncing=0;const t=this.originalY+-this.args.maxClimb;this.args.y>this.originalY&&(this.args.y=this.originalY,this.args.ySpeed=0,this.args.float=-1),this.args.y<t&&(this.args.float=30,this.args.y=t,this.args.ySpeed=Math.max(0,this.args.ySpeed)),s(u(p.prototype),"update",this).call(this)}},{key:"collideA",value:function(t,e){if(!t.args.static)return t.args.falling&&t.args.y>this.args.y+-this.args.height&&t.args.y<this.args.y+-.75*this.args.height?(t.args.y=this.args.y+-this.args.height+this.args.ySpeed+3,s(u(p.prototype),"collideA",this).call(this,t,e)):!t.args.falling||t.args.ySpeed<0?s(u(p.prototype),"collideA",this).call(this,t,e):(this.args.ySpeed+=Math.min(-4,.5*-Math.abs(t.args.ySpeed)),this.args.float=10,this.args.spinning=30,this.args.bouncing=10,t.args.xSpeed*=.5,t.doubleSpin=!1,t.dashed?(t.dashed=!1,t.args.xSpeed=0,t.args.ySpeed=-t.args.airSpeed,t.args.ySpeed*=1.25,this.args.ySpeed*=1.75):(t.args.ySpeed>0&&(t.args.ySpeed=Math.min(-4,Math.max(-6,-Math.abs(t.args.ySpeed))),t.args.ySpeed+=this.args.ySpeed),t.args.ySpeed>this.args.ySpeed&&(t.args.ySpeed=this.args.ySpeed+-6)),o.Sfx.play("PROP_PLAT"),this.viewport.settings.rumble&&t.controller&&t.controller.rumble&&t.controller.rumble({duration:100,strongMagnitude:1,weakMagnitude:0}),this.args.y--,this.args.falling=!0,"airdash"===t.args.animation&&(t.args.animation="flip"),s(u(p.prototype),"collideA",this).call(this,t,e))}}])&&a(e.prototype,r),n&&a(e,n),Object.defineProperty(e,"prototype",{writable:!1}),p}();t.PropellerPlatform=f}),require.register("actor/Pulley.js",function(t,e,r){"use strict";function n(t){"@babel/helpers - typeof";return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(t,"__esModule",{value:!0}),t.Pulley=void 0;var i=e("./PointActor");e("./Ring");function o(t,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,(o=i.key,void 0,"symbol"===n(a=function(t,e){if("object"!==n(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var i=r.call(t,e||"default");if("object"!==n(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(o,"string"))?a:String(a)),i)}var o,a}function a(t,e){return(a=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function s(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,i=c(t);if(e){var o=c(this).constructor;r=Reflect.construct(i,arguments,o)}else r=i.apply(this,arguments);return function(t,e){if(e&&("object"===n(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function c(t){return(c=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}let l=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&a(t,e)}(l,i.PointActor);var e,r,n,c=s(l);function l(){var t;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,l);for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];return(t=c.call(this,...r)).args.width=64,t.args.height=64,t.args.type="actor-item actor-pulley",t.args.convey=0,t.args.conveyed=0,t.args.float=-1,t.noClip=!0,t}return e=l,(r=[{key:"update",value:function(){this.match?this.args.convey=-this.match.args.convey:this.match=this.viewport.actorsById[this.args.match],this.box&&this.box.style({"--convey":Math.abs(this.args.convey)}),this.box&&this.box.style({"--conveyDir":Math.sign(this.args.convey)}),this.args.conveyed+=this.match.args.convey,this.box&&this.box.style({"--conveyed":this.args.conveyed})}},{key:"isEffect",get:function(){return!0}}])&&o(e.prototype,r),n&&o(e,n),Object.defineProperty(e,"prototype",{writable:!1}),l}();t.Pulley=l}),require.register("actor/PulleySmall.js",function(t,e,r){"use strict";function n(t){"@babel/helpers - typeof";return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(t,"__esModule",{value:!0}),t.PulleySmall=void 0;var i=e("./Pulley");function o(t,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,(o=i.key,void 0,"symbol"===n(a=function(t,e){if("object"!==n(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var i=r.call(t,e||"default");if("object"!==n(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(o,"string"))?a:String(a)),i)}var o,a}function a(t,e){return(a=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function s(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,i=c(t);if(e){var o=c(this).constructor;r=Reflect.construct(i,arguments,o)}else r=i.apply(this,arguments);return function(t,e){if(e&&("object"===n(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function c(t){return(c=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}let l=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&a(t,e)}(l,i.Pulley);var e,r,n,c=s(l);function l(){var t;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,l);for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];return(t=c.call(this,...r)).args.width=32,t.args.height=32,t.args.type="actor-item actor-pulley-small",t.args.convey=0,t.args.float=-1,t.noClip=!0,t}return e=l,r&&o(e.prototype,r),n&&o(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}();t.PulleySmall=l}),require.register("actor/Pumpkin.js",function(t,e,r){"use strict";function n(t){"@babel/helpers - typeof";return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(t,"__esModule",{value:!0}),t.Pumpkin=void 0;var i=e("./PointActor");function o(t,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,(o=i.key,void 0,"symbol"===n(a=function(t,e){if("object"!==n(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var i=r.call(t,e||"default");if("object"!==n(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(o,"string"))?a:String(a)),i)}var o,a}function a(){return(a="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=u(t)););return t}(t,e);if(n){var i=Object.getOwnPropertyDescriptor(n,e);return i.get?i.get.call(arguments.length<3?t:r):i.value}}).apply(this,arguments)}function s(t,e){return(s=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function c(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,i=u(t);if(e){var o=u(this).constructor;r=Reflect.construct(i,arguments,o)}else r=i.apply(this,arguments);return function(t,e){if(e&&("object"===n(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return l(t)}(this,r)}}function l(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function u(t){return(u=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}let f=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&s(t,e)}(p,i.PointActor);var e,r,n,f=c(p);function p(){var t,e;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,p);for(var r=arguments.length,n=new Array(r),i=0;i<r;i++)n[i]=arguments[i];return(e=f.call(this,...n)).args.face=null!==(t=e.args.face)&&void 0!==t&&t,e.args.width=17,e.args.height=15,e.args.type="actor-item actor-pumpkin",e.bindTo("carriedBy",t=>{if(e.cX&&(e.cX(),e.cX=null),e.cY&&(e.cY(),e.cY=null),t)e.cX=t.args.bindTo("x",r=>e.args.x=r+8*t.args.direction),e.cY=t.args.bindTo("y",t=>e.args.y=t+-16),t.carrying.add(l(e)),e.args.float=-1;else if(e.carriedBy){const t=e.carriedBy;e.carriedBy=null,e.args.xSpeed=t.args.xSpeed,e.args.ySpeed=t.args.ySpeed,e.args.xSpeed+=4*Math.sign(t.args.gSpeed||t.args.xSpeed),e.args.ySpeed-=4,t.carrying.delete(l(e)),e.args.falling=!0,e.args.float=0}}),e}return e=p,(r=[{key:"onRendered",value:function(){a(u(p.prototype),"onRendered",this).call(this),this.autoAttr.get(this.box)["data-face"]="face"}},{key:"lift",value:function(t){this.carriedBy!==t?this.carriedBy=t:this.carriedBy=null}},{key:"solid",get:function(){return!1}}])&&o(e.prototype,r),n&&o(e,n),Object.defineProperty(e,"prototype",{writable:!1}),p}();t.Pumpkin=f}),require.register("actor/QuestionBlock.js",function(t,e,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.QuestionBlock=void 0;var n=e("./PointActor"),i=(e("./monitor/RingMonitor"),e("./monitor/SheildWaterMonitor"));function o(t){"@babel/helpers - typeof";return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function a(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,h(n.key),n)}}function s(t,e){return(s=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function c(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=f(t);if(e){var i=f(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===o(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return l(t)}(this,r)}}function l(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function u(){return(u="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=f(t)););return t}(t,e);if(n){var i=Object.getOwnPropertyDescriptor(n,e);return i.get?i.get.call(arguments.length<3?t:r):i.value}}).apply(this,arguments)}function f(t){return(f=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function p(t,e,r){return(e=h(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function h(t){var e=function(t,e){if("object"!==o(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==o(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===o(e)?e:String(e)}let g=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&s(t,e)}(g,n.PointActor);var e,r,o,h=c(g);function g(){var t;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,g);for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];return p(l(t=h.call(this,...r)),"maxBounce",4),p(l(t),"float",-1),p(l(t),"template",'<div\n\t\tclass = "point-actor [[type]] [[collType]]"\n\t\tstyle = "\n\t\t\tdisplay:[[display]];\n\t\t\t--angle:[[angle]];\n\t\t\t--airAngle:[[airAngle]];\n\t\t\t--display-angle:[[_angle]];\n\t\t\t--height:[[height]];\n\t\t\t--width:[[width]];\n\t\t\t--x:[[x]];\n\t\t\t--y:[[y]];\n\t\t"\n\t\tdata-colliding = "[[colliding]]"\n\t\tdata-falling   = "[[falling]]"\n\t\tdata-facing    = "[[facing]]"\n\t\tdata-angle     = "[[angle|rad2deg]]"\n\t\tdata-mode      = "[[mode]]"\n\t\tdata-empty     = "[[empty]]"\n\t\tcv-ref = "box"\n\t><div cv-ref = "sprite" class = "sprite"></div></div>'),t.args.type="actor-question-block actor-item",t.args.width=32,t.args.height=32,t.initY=null,t.empty=!1,t}return e=g,o=[{key:"fromDef",value:function(t){const e=u(f(g),"fromDef",this).call(this,t);return e.args.x=e.originalX=t.x+Math.floor(t.width/2),e.args.y=e.originalY=t.y,e}}],(r=[{key:"collideA",value:function(t,e){if(u(f(g.prototype),"collideA",this).call(this,t),null===this.initY&&(this.initY=this.y),2===e){const r=Math.abs(t.args.ySpeed);if(t.args.falling=!0,t.args.ySpeed>0?t.args.ySpeed+=this.args.ySpeed:(this.args.y-=r,t.args.y+=r),this.args.ySpeed>0&&this.args.ySpeed>t.args.ySpeed&&(t.args.ySpeed=Math.abs(t.args.ySpeed),t.args.y+=this.args.ySpeed),this.args.ySpeed<0&&(this.args.ySpeed=-Math.abs(this.args.ySpeed)),this.args.ySpeed)return!0;const n=this.maxBounce;let i=2===e?-Math.abs(t.args.ySpeed):t.args.ySpeed;Math.abs(i)>n&&(i=n*Math.sign(i)),this.args.ySpeed=i,t.args.ySpeed=-t.args.ySpeed}if(2===e&&!this.args.empty&&!this.args.empty){const t=new i.SheildWaterMonitor({x:this.x,y:this.y-96});this.viewport.spawn.add({object:t}),t.onRemove(()=>this.args.empty=!1),this.args.empty=!0}return!0}},{key:"update",value:function(){null!==this.initY&&(this.initY>this.y?this.args.ySpeed+=.75:this.initY<this.y&&(this.args.ySpeed-=.75),Math.abs(this.args.y-this.initY)<1&&Math.abs(this.args.ySpeed)<1&&(this.args.ySpeed=0,this.args.y=this.initY)),this.args.ySpeed*=.9,this.args.ySpeed=Math.floor(100*this.args.ySpeed)/100,this.args.y=Math.round(this.args.y);const t=this.maxBounce;Math.abs(this.args.ySpeed)>t&&(this.args.ySpeed=t*Math.sign(this.args.ySpeed)),u(f(g.prototype),"update",this).call(this)}},{key:"canStick",get:function(){return!1}},{key:"solid",get:function(){return!0}}])&&a(e.prototype,r),o&&a(e,o),Object.defineProperty(e,"prototype",{writable:!1}),g}();t.QuestionBlock=g}),require.register("actor/RailCar.js",function(t,e,r){"use strict";function n(t){"@babel/helpers - typeof";return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(t,"__esModule",{value:!0}),t.RailCar=void 0;var i=e("./Vehicle"),o=e("curvature/base/Tag");function a(t,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,(o=i.key,void 0,"symbol"===n(a=function(t,e){if("object"!==n(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var i=r.call(t,e||"default");if("object"!==n(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(o,"string"))?a:String(a)),i)}var o,a}function s(){return(s="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=u(t)););return t}(t,e);if(n){var i=Object.getOwnPropertyDescriptor(n,e);return i.get?i.get.call(arguments.length<3?t:r):i.value}}).apply(this,arguments)}function c(t,e){return(c=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function l(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,i=u(t);if(e){var o=u(this).constructor;r=Reflect.construct(i,arguments,o)}else r=i.apply(this,arguments);return function(t,e){if(e&&("object"===n(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function u(t){return(u=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}let f=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&c(t,e)}(p,i.Vehicle);var e,r,n,f=l(p);function p(){var t;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,p);for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];return(t=f.call(this,...r)).args.type="actor-item actor-rail-car",t.args.width=32,t.args.height=48,t.removeTimer=null,t.args.cartSpeed=t.args.cartSpeed||15,t.args.gSpeedMax=20,t.args.decel=0,t.args.accel=.75,t.args.gravity=1,t.args.seatHeight=44,t.args.skidTraction=.05,t.args.jumpForce=12,t.dustCount=0,t.args.particleScale=2,t.args.started=!1,t}return e=p,(r=[{key:"onRendered",value:function(t){s(u(p.prototype),"onRendered",this).call(this,t),this.box=this.findTag("div"),this.sprite=this.findTag("div.sprite"),this.frontWheel=new o.Tag('<div class = "rail-car-wheel rail-car-wheel-front">'),this.backWheel=new o.Tag('<div class = "rail-car-wheel rail-car-wheel-back">'),this.frontFrag=new o.Tag('<div class = "rail-car-frag rail-car-frag-front">'),this.backFrag=new o.Tag('<div class = "rail-car-frag rail-car-frag-back">'),this.sprite.appendChild(this.frontWheel.node),this.sprite.appendChild(this.backWheel.node),this.sprite.appendChild(this.frontFrag.node),this.sprite.appendChild(this.backFrag.node)}},{key:"update",value:function(){this.originalSpeed=this.args.gSpeed||this.args.xSpeed;const t=this.args.x,e=this.args.y;if(s(u(p.prototype),"update",this).call(this),!this.sprite)return;const r=this.x;if(0===this.args.gSpeed&&0===this.args.hSpeed&&0===this.args.xSpeed||(this.sprite.classList.add("moving"),this.args.started=!0),r===t&&!this.args.broken&&!this.args.hSpeed&&(this.sprite.classList.remove("moving"),this.args.started)){this.viewport;(!this.args.falling||this.args.xSpeed||this.args.ySpeed)&&(this.args.falling||this.args.hSpeed||this.args.x!==t||this.args.y!==e)||this.breakApart()}if(this.occupant&&!this.args.falling){const t=this.args.hSpeed||this.args.gSpeed;(Math.abs(t)<Math.abs(this.args.cartSpeed)||Math.sign(t)!==Math.sign(this.args.cartSpeed))&&(this.args.hSpeed?this.args.hSpeed+=.125*Math.sign(this.args.cartSpeed):this.args.gSpeed+=.125*Math.sign(this.args.cartSpeed),Math.abs(this.args.gSpeed)<1&&(this.args.gSpeed=Math.sign(this.args.gSpeed))),this.args.direction=Math.sign(this.args.hSpeed||this.args.gSpeed)}else this.args.hSpeed?this.args.hSpeed=this.args.xSpeed:this.args.xSpeed&&(this.args.gSpeed=this.args.xSpeed)}},{key:"breakApart",value:function(){if(!this.args.broken){this.viewport;this.occupant&&this.occupant.startle(),this.sprite.classList.add("breaking"),this.args.broken=!0,this.args.groundAngle=0,this.args.mode=0,this.args.dead=!0}}},{key:"sleep",value:function(){this.args.x=this.def.get("x"),this.args.y=this.def.get("y"),this.args.dead=!1,this.args.groundAngle=0,this.args.gSpeed=0,this.args.xSpeed=0,this.args.ySpeed=0,this.sprite.classList.remove("breaking"),this.sprite.classList.remove("broken"),this.args.broken=!1,this.args.started=!1,s(u(p.prototype),"sleep",this).call(this)}},{key:"processInputDirect",value:function(){}},{key:"solid",get:function(){return!this.args.broken&&!this.occupant}}])&&a(e.prototype,r),n&&a(e,n),Object.defineProperty(e,"prototype",{writable:!1}),p}();t.RailCar=f}),require.register("actor/Red.js",function(t,e,r){"use strict";function n(t){"@babel/helpers - typeof";return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(t,"__esModule",{value:!0}),t.Red=void 0;var i=e("./PointActor");function o(t,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,(o=i.key,void 0,"symbol"===n(a=function(t,e){if("object"!==n(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var i=r.call(t,e||"default");if("object"!==n(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(o,"string"))?a:String(a)),i)}var o,a}function a(t,e){return(a=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function s(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,i=c(t);if(e){var o=c(this).constructor;r=Reflect.construct(i,arguments,o)}else r=i.apply(this,arguments);return function(t,e){if(e&&("object"===n(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function c(t){return(c=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}let l=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&a(t,e)}(l,i.PointActor);var e,r,n,c=s(l);function l(){var t;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,l);for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];return(t=c.call(this,...r)).behaviors.add(new SkidDust),t.args.type="actor-item actor-red",t.args.animation="standing",t.args.accel=.1,t.args.decel=.5,t.args.width=16,t.args.height=16,t.args.float=-1,t}return e=l,r&&o(e.prototype,r),n&&o(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}();t.Red=l}),require.register("actor/RedBomb.js",function(t,e,r){"use strict";function n(t){"@babel/helpers - typeof";return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(t,"__esModule",{value:!0}),t.RedBomb=void 0;var i=e("./PointActor"),o=e("../audio/Sfx");e("curvature/base/Tag");function a(t,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,(o=i.key,void 0,"symbol"===n(a=function(t,e){if("object"!==n(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var i=r.call(t,e||"default");if("object"!==n(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(o,"string"))?a:String(a)),i)}var o,a}function s(){return(s="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=u(t)););return t}(t,e);if(n){var i=Object.getOwnPropertyDescriptor(n,e);return i.get?i.get.call(arguments.length<3?t:r):i.value}}).apply(this,arguments)}function c(t,e){return(c=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function l(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,i=u(t);if(e){var o=u(this).constructor;r=Reflect.construct(i,arguments,o)}else r=i.apply(this,arguments);return function(t,e){if(e&&("object"===n(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function u(t){return(u=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}let f=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&c(t,e)}(p,i.PointActor);var e,r,n,f=l(p);function p(){var t;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,p);for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];return(t=f.call(this,...r)).args.width=8,t.args.height=8,t.args.type="actor-item actor-red-bomb",t.args.decel=0,t.noClip=!0,t.explosions=new Set,t}return e=p,(r=[{key:"update",value:function(){this.args.falling||this.explosions.size||this.explode(),s(u(p.prototype),"update",this).call(this);for(const t of this.explosions)t.style({"--x":this.args.x,"--y":this.args.y+-16})}},{key:"collideA",value:function(t){t.controllable&&(t.damage(this),this.explode(),this.args.float=-1,this.args.xSpeed=0,this.args.ySpeed=0)}},{key:"explode",value:function(){this.exploded||(this.exploded=!0,this.viewport.actors.remove(this),o.Sfx.play("OBJECT_DESTROYED"))}}])&&a(e.prototype,r),n&&a(e,n),Object.defineProperty(e,"prototype",{writable:!1}),p}();t.RedBomb=f}),require.register("actor/RedEyeJet.js",function(t,e,r){"use strict";function n(t){"@babel/helpers - typeof";return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(t,"__esModule",{value:!0}),t.RedEyeJet=void 0;var i=e("curvature/base/Tag"),o=e("../audio/Bgm"),a=e("../audio/Sfx"),s=e("./PointActor"),c=e("./Projectile"),l=e("./MiniMace"),u=e("./MegaMace"),f=e("../lib/Analytic");function p(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,i,o,a,s=[],c=!0,l=!1;try{if(o=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=o.call(r)).done)&&(s.push(n.value),s.length!==e);c=!0);}catch(t){l=!0,i=t}finally{try{if(!c&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(l)throw i}}return s}}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return h(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return h(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function h(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function g(t,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,(o=i.key,void 0,"symbol"===n(a=function(t,e){if("object"!==n(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var i=r.call(t,e||"default");if("object"!==n(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(o,"string"))?a:String(a)),i)}var o,a}function d(){return(d="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=v(t)););return t}(t,e);if(n){var i=Object.getOwnPropertyDescriptor(n,e);return i.get?i.get.call(arguments.length<3?t:r):i.value}}).apply(this,arguments)}function y(t,e){return(y=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function b(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,i=v(t);if(e){var o=v(this).constructor;r=Reflect.construct(i,arguments,o)}else r=i.apply(this,arguments);return function(t,e){if(e&&("object"===n(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function v(t){return(v=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}let m=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&y(t,e)}(m,s.PointActor);var e,r,n,h=b(m);function m(t,e){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,m),(r=h.call(this,t,e)).args.gravity=.4,r.args.width=96,r.args.height=32,r.args.type="actor-item actor-red-eye-jet",r.args.float=-1,r.args.phase="idle",r.args.hitPoints=r.args.hitPoints||8,r.args.maxSpeed=9,r.args.bindTo("phase",t=>r.args.phaseFrameId=0),r}return e=m,(r=[{key:"wakeUp",value:function(){for(const e of this.hanging){var t=p(e,2);t[0];const r=t[1];for(const t of r)t.setPos()}}},{key:"collideA",value:function(t,e){let r;if(this.hanging.has(t))return!1;if(this.hanging.has(l.MiniMace)?r="MINI-MACE":this.hanging.has(u.MegaMace)&&(r="MEGA-MACE"),!(t.controllable||t instanceof c.Projectile))return;if(c.Projectile,this.args.hitPoints>0&&!(t.args.jumping||t.args.rolling||t.dashed||t instanceof c.Projectile))return t.damage(),!0;if(!this.args.falling&&"exploding"!==this.args.phase){if(!(t.args.jumping||t.args.rolling||t.dashed))return!0;this.box.setAttribute("data-phase","exploding"),this.args.phase="exploding",this.viewport.clearCheckpoints();const e=this.viewport;e.onFrameOut(80,()=>{this.box.setAttribute("data-phase","exploded"),this.args.falling=!0,this.args.ySpeed=-12,this.noClip=!0,a.Sfx.play("OBJECT_DESTROYED")}),e.onFrameOut(100,()=>{this.viewport.args.cutScene=!0}),e.onFrameOut(150,()=>{this.viewport.controlActor.controller.replay({axes:[1,0,0,1]}),this.viewport.controlActor.readInput()}),e.onFrameOut(210,()=>{this.viewport.controlActor.controller.replay({buttons:[1]}),this.viewport.controlActor.readInput()}),e.onFrameOut(211,()=>{this.viewport.controlActor.dropDashCharge=30}),e.onFrameOut(285,()=>{this.viewport.controlActor.controller.replay({buttons:[0,0,0,0,0,0]}),this.viewport.controlActor.readInput(),this.args.phase="done"}),e.onFrameOut(500,()=>{this.args.xSpeed=0,this.args.ySpeed=0,this.args.y=-1024})}this.ignores.set(t,15),2===e&&(a.Sfx.play("BOSS_DUDHIT"),t.args.ySpeed=Math.max(7,Math.abs(t.args.ySpeed)));const n=Math.max(Math.abs(t.args.xSpeed),Math.abs(this.args.xSpeed));this.args.hitPoints>1&&this.args.falling?this.args.xSpeed=t.args.xSpeed:this.args.xSpeed=0;let i=!1;if(1===e&&(this.handleDamage(t),i=!0,this.args.hitPoints>0?(t.args.xSpeed=1.25*-n,t.args.xSpeed=Math.min(-7,-this.args.xSpeed),this.args.hitPoints--):(t.args.xSpeed=-2,t.args.ignore=-2)),3===e&&(this.handleDamage(t),i=!0,this.args.hitPoints>0?(t.args.xSpeed=1.25*n,t.args.xSpeed=Math.max(7,-this.args.xSpeed),this.args.hitPoints--):(t.args.xSpeed=2,t.args.ignore=-2)),i&&t&&t.controller&&t.controller.rumble&&this.viewport.settings.rumble&&(t.controller.rumble({duration:120,strongMagnitude:1,weakMagnitude:1}),this.onTimeout(100,()=>{t.controller.rumble({duration:100,strongMagnitude:0,weakMagnitude:.5})})),t instanceof c.Projectile||1===e||3===e||0===e){if(["dead","exploding","damaged","done"].includes(this.args.phase)||(this.args.phase="damaged",this.args.animation="",this.args.animation="damaged",0===this.args.hitPoints&&"exploding"!==this.args.phase&&(this.box.setAttribute("data-phase","dead"),this.args.animation="",this.args.phase="dead","function"==typeof ga&&f.Analytic.report({eventCategory:"boss",eventAction:"defeated",eventLabel:`${this.viewport.args.actName}::${this.args.id}`})),this.viewport.onFrameOut(20,()=>{"intro"!==this.args.phase&&(this.args.hitPoints>0?(this.args.animation="attacking",this.args.phase="attacking"):["dead","exploding","done"].includes(this.args.phase)||(this.box.setAttribute("data-phase","dead"),this.args.animation="dead",this.args.phase="dead",this.args.xSpeed=0,t.args.score+=2e4))})),0===e){t.args.y=this.y-this.args.height;const e=t.args.animation,r=t.args.ySpeed;this.onNextFrame(()=>{t.args.animation=e,t.args.falling=!0,t.args.xSpeed=-4*Math.sign(this.x-t.x),t.args.ySpeed=-Math.floor(Math.abs(r))||-4}),a.Sfx.play("BOSS_DAMAGED")}const r=t.args.gSpeed;t.args.gSpeed=-r,t.args.rolling&&this.onNextFrame(()=>{t.args.gSpeed=-r,t.args.rolling=!0,t.args.direction,Math.sign(r)})}return t.args.ignore=1,this.args.hitPoints||(o.Bgm.stop("ZONE-BOSS"),o.Bgm.stop("ACT-BOSS"),t.args.ignore=-2),!0}},{key:"handleDamage",value:function(t){if(a.Sfx.play("BOSS_DAMAGED"),t){const e={label:["LUCKY SHOT","IM GOING EASY","OKAY","NICE","WOW","JEEZ","DAMN!","STOP!"][t.args.popChain.length],points:1e3*t.args.popChain.length,multiplier:1};t.args.popChain.push(e),t.args.popCombo+=1}}},{key:"update",value:function(){if(this.args.phaseFrameId++,this.args.frameId++,"idle"!==this.args.phase){if(this.viewport){if("intro"===this.args.phase){if(this.hanging.has(l.MiniMace)){for(const t of this.hanging.get(l.MiniMace))t.args.ropeLength=80;o.Bgm.play("ACT-BOSS",{loop:!0,interlude:!0})}if(this.hanging.has(u.MegaMace)){for(const t of this.hanging.get(u.MegaMace))t.args.ropeLength=96;o.Bgm.play("ZONE-BOSS",{loop:!0,interlude:!0})}this.args.maxSpeed=12,this.args.phaseFrameId>240&&(this.args.phase="attacking")}else this.hanging.has(l.MiniMace)?this.viewport.onFrameOut(45,()=>{for(const t of this.hanging.get(l.MiniMace))t.args.ropeLength=128}):this.hanging.has(u.MegaMace)&&this.viewport.onFrameOut(45,()=>{for(const t of this.hanging.get(u.MegaMace))t.args.ropeLength=176});if("attacking"===this.args.phase){if(this.args.maxSpeed=9,this.hanging.has(l.MiniMace))for(const t of this.hanging.get(l.MiniMace))t.args.float=0;if(this.hanging.has(u.MegaMace))for(const t of this.hanging.get(u.MegaMace))t.args.float=0;Math.abs(this.viewport.controlActor.x-this.x)>255&&(this.args.phase="chasing")}if("chasing"===this.args.phase&&Math.abs(this.viewport.controlActor.x-this.x)<8&&this.y<this.viewport.controlActor.y&&(this.args.phase="attacking"),"exploding"!==this.args.phase)"damaged"===this.args.phase&&(this.args.xSpeed*=.999),this.box&&(this.x-this.viewport.controlActor.x>0?Math.abs(this.x-this.viewport.controlActor.x)>128?this.box.setAttribute("data-looking","far-left"):-1===this.viewport.controlActor.args.direction?this.box.setAttribute("data-looking","far-left"):this.box.setAttribute("data-looking","left"):this.x-this.viewport.controlActor.x<0&&(this.box.setAttribute("data-looking","far-right"),Math.abs(this.x-this.viewport.controlActor.x)>128?this.box.setAttribute("data-looking","far-right"):1===this.viewport.controlActor.args.direction?this.box.setAttribute("data-looking","far-right"):this.box.setAttribute("data-looking","right")),32>this.y-this.viewport.controlActor.y?this.box.setAttribute("data-ducking","true"):this.box.setAttribute("data-ducking","false")),this.args.hitPoints&&["attacking","intro","chasing"].includes(this.args.phase)&&(Math.abs(this.x-this.viewport.controlActor.x)>384&&(this.args.x=this.viewport.controlActor.x+384*Math.sign(this.x-this.viewport.controlActor.x)),this.args.xSpeed+=.35*-Math.sign(this.x-this.viewport.controlActor.x)),this.args.hitPoints?(this.args.falling=!0,this.args.float=-1):this.args.float=0,"intro"!==this.args.phase&&"attacking"!==this.args.phase||(this.args.maxSpeed=11),"chasing"===this.args.phase?Math.abs(this.x-this.viewport.controlActor.x)<128&&(this.args.maxSpeed=Math.max(this.args.maxSpeed,this.viewport.controlActor.args.xSpeed)):Math.abs(this.args.xSpeed)>this.args.maxSpeed&&(this.args.xSpeed=Math.sign(this.args.xSpeed)*this.args.maxSpeed),d(v(m.prototype),"update",this).call(this);else{const t=this.viewport;if(t&&t.args.frameId%3==0){const e=new i.Tag('<div class = "particle-explosion">');a.Sfx.play("BOSS_DAMAGED");const r=this.args.width*Math.random()-this.args.width/2,n=this.args.height*Math.random()-this.args.height/2;e.style({"--x":this.x+r,"--y":this.y+n+-16}),t.particles.add(e),setTimeout(()=>t.particles.remove(e),512)}d(v(m.prototype),"update",this).call(this)}}}else this.args.phaseFrameId>120&&(this.args.phase="intro")}},{key:"onRendered",value:function(t){d(v(m.prototype),"onRendered",this).call(this,t),this.body=new i.Tag('<div class = "body-center">'),this.bodyL=new i.Tag('<div class = "body-left">'),this.bodyR=new i.Tag('<div class = "body-right">'),this.fireA=new i.Tag('<div class = "boost-fire boost-fire-left">'),this.fireB=new i.Tag('<div class = "boost-fire boost-fire-right">'),this.eye=new i.Tag('<div class = "orange-eye">'),this.box.appendChild(this.body.node),this.box.appendChild(this.bodyL.node),this.box.appendChild(this.bodyR.node),this.box.appendChild(this.fireA.node),this.box.appendChild(this.fireB.node),this.box.appendChild(this.eye.node)}},{key:"solid",get:function(){return!1}}])&&g(e.prototype,r),n&&g(e,n),Object.defineProperty(e,"prototype",{writable:!1}),m}();t.RedEyeJet=m}),require.register("actor/Redz.js",function(t,e,r){"use strict";function n(t){"@babel/helpers - typeof";return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(t,"__esModule",{value:!0}),t.Redz=void 0;e("./Flickie");var i=e("curvature/base/Mixin"),o=(e("curvature/base/Tag"),e("./PointActor")),a=e("../behavior/SkidDust"),s=e("../behavior/Patrol"),c=e("../mixin/CanPop"),l=(e("../actor/Explosion"),e("../actor/SpitFire"));function u(t,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,(o=i.key,void 0,"symbol"===n(a=function(t,e){if("object"!==n(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var i=r.call(t,e||"default");if("object"!==n(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(o,"string"))?a:String(a)),i)}var o,a}function f(){return(f="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=g(t)););return t}(t,e);if(n){var i=Object.getOwnPropertyDescriptor(n,e);return i.get?i.get.call(arguments.length<3?t:r):i.value}}).apply(this,arguments)}function p(t,e){return(p=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function h(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,i=g(t);if(e){var o=g(this).constructor;r=Reflect.construct(i,arguments,o)}else r=i.apply(this,arguments);return function(t,e){if(e&&("object"===n(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function g(t){return(g=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}let d=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&p(t,e)}(y,i.Mixin.from(o.PointActor,c.CanPop));var e,r,n,d=h(y);function y(){var t;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,y);for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];return(t=d.call(this,...r)).behaviors.add(new a.SkidDust),t.behaviors.add(new s.Patrol),t.args.type="actor-item actor-redz",t.args.animation="standing",t.args.gSpeedMax=5,t.args.jumpForce=5,t.args.gravity=.5,t.args.width=18,t.args.height=32,t.willStick=!1,t.stayStuck=!1,t.args.patrolBeat=t.args.patrolBeat||160,t.args.patrolPause=t.args.patrolPause||60,t.args.patrolSpeed=t.args.patrolSpeed||.25,t}return e=y,(r=[{key:"update",value:function(){f(g(y.prototype),"update",this).call(this);const t=this.args.direction=Math.sign(this.args.gSpeed)||this.args.direction;if(this.box&&(Math.sign(this.args.gSpeed)!==t&&Math.abs(this.args.gSpeed-t)>5?this.box.setAttribute("data-animation","skidding"):this.args.moving&&this.args.gSpeed?this.box.setAttribute("data-animation","walking"):this.box.setAttribute("data-animation","shooting")),this.age%this.args.patrolBeat==this.args.patrolBeat-this.args.patrolPause){const e=new l.SpitFire({owner:this,direction:t,x:this.x+59*t,y:this.y-3,z:this.z+1}),r=this.viewport;r.spawn.add({object:e}),this._onRemove.add(()=>r.actors.remove(e))}}},{key:"effect",value:function(t){f(g(y.prototype),"effect",this).call(this,t)}},{key:"solid",get:function(){return!1}},{key:"isEffect",get:function(){return!1}}])&&u(e.prototype,r),n&&u(e,n),Object.defineProperty(e,"prototype",{writable:!1}),y}();t.Redz=d}),require.register("actor/Relief.js",function(t,e,r){"use strict";function n(t){"@babel/helpers - typeof";return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(t,"__esModule",{value:!0}),t.Relief=void 0;var i=e("./PointActor"),o=(e("./Block"),e("../audio/Sfx"),e("../ObjectPalette"));function a(t,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,(o=i.key,void 0,"symbol"===n(a=function(t,e){if("object"!==n(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var i=r.call(t,e||"default");if("object"!==n(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(o,"string"))?a:String(a)),i)}var o,a}function s(){return(s="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=u(t)););return t}(t,e);if(n){var i=Object.getOwnPropertyDescriptor(n,e);return i.get?i.get.call(arguments.length<3?t:r):i.value}}).apply(this,arguments)}function c(t,e){return(c=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function l(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,i=u(t);if(e){var o=u(this).constructor;r=Reflect.construct(i,arguments,o)}else r=i.apply(this,arguments);return function(t,e){if(e&&("object"===n(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function u(t){return(u=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}let f=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&c(t,e)}(p,i.PointActor);var e,r,n,f=l(p);function p(){var t,e,r;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,p);for(var n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return(r=f.call(this,...i)).args.width=24,r.args.height=80,r.args.type="actor-item actor-relief",r.noClip=!0,r.args.float=-1,r.args.offset=null!==(t=r.args.offset)&&void 0!==t?t:45,r.args.animation="idle",r.args.shoots=null!==(e=r.args.shoots)&&void 0!==e?e:"spitsteam",r.launching=new Set,r}return e=p,(r=[{key:"update",value:function(){if(s(u(p.prototype),"update",this).call(this),!((this.viewport.args.frameId+-this.args.offset)%60)){if(!this.shoots&&o.ObjectPalette[this.args.shoots]){var t;const e=o.ObjectPalette[this.args.shoots],r=null!==(t=this.args.direction)&&void 0!==t?t:1;this.shoots=new e({owner:this,direction:r,x:this.x,y:this.y+-24,z:this.z+1}),this.shoots.args.x+=.5*this.shoots.args.width*r+.3*this.args.width*r,this.shoots.args.y+=.5*this.shoots.args.height,this.viewport.spawn.add({object:this.shoots})}this.shoots.args.gone&&(this.shoots=null)}}},{key:"collideA",value:function(t){return!0}},{key:"solid",get:function(){return!0}}])&&a(e.prototype,r),n&&a(e,n),Object.defineProperty(e,"prototype",{writable:!1}),p}();t.Relief=f}),require.register("actor/RhinoBot.js",function(t,e,r){"use strict";function n(t){"@babel/helpers - typeof";return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(t,"__esModule",{value:!0}),t.RhinoBot=void 0;e("./Flickie");var i=e("curvature/base/Mixin"),o=e("./PointActor"),a=(e("../behavior/Patrol"),e("../mixin/CanPop"));function s(t,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,(o=i.key,void 0,"symbol"===n(a=function(t,e){if("object"!==n(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var i=r.call(t,e||"default");if("object"!==n(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(o,"string"))?a:String(a)),i)}var o,a}function c(){return(c="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=f(t)););return t}(t,e);if(n){var i=Object.getOwnPropertyDescriptor(n,e);return i.get?i.get.call(arguments.length<3?t:r):i.value}}).apply(this,arguments)}function l(t,e){return(l=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function u(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,i=f(t);if(e){var o=f(this).constructor;r=Reflect.construct(i,arguments,o)}else r=i.apply(this,arguments);return function(t,e){if(e&&("object"===n(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function f(t){return(f=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}let p=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&l(t,e)}(h,i.Mixin.from(o.PointActor,a.CanPop));var e,r,n,p=u(h);function h(){var t;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,h);for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];return(t=p.call(this,...r)).args.type="actor-item actor-rhino-bot",t.args.animation="standing",t.args.accel=.75,t.args.decel=.5,t.args.gSpeedMax=15,t.args.jumpForce=5,t.args.gravity=.5,t.args.width=44,t.args.height=32,t.chasing=!1,t}return e=h,(r=[{key:"onRendered",value:function(t){c(f(h.prototype),"onRendered",this).call(this,t)}},{key:"update",value:function(){this.args.shotTelegraph,this.args.patrolBeat;const t=this.args.x-this.xLast;if(this.args.tailOffset+=isNaN(t)?0:t,this.box&&(this.args.moving&&this.args.gSpeed?this.box.setAttribute("data-animation","walking"):this.box.setAttribute("data-animation","standing")),this.viewport&&this.viewport.controlActor&&Math.abs(this.viewport.controlActor.args.x-this.args.x)<768&&(this.chasing=this.viewport.controlActor),this.chasing){this.args.gSpeed+=.1*(this.chasing.args.x-this.args.x);const t=Math.abs(this.chasing.args.x-this.chasing.args.x),e=Math.max(6,Math.abs(this.chasing.args.gSpeed||this.chasing.args.xSpeed)*(t>256?1.2:1));Math.abs(this.args.gSpeed)>e&&(this.args.gSpeed=Math.sign(this.args.gSpeed)*e)}c(f(h.prototype),"update",this).call(this),this.args.direction=Math.sign(this.args.gSpeed),this.args.facing=this.args.direction>0?"right":"left"}},{key:"effect",value:function(t){c(f(h.prototype),"effect",this).call(this,t)}},{key:"solid",get:function(){return!1}},{key:"isEffect",get:function(){return!1}}])&&s(e.prototype,r),n&&s(e,n),Object.defineProperty(e,"prototype",{writable:!1}),h}();t.RhinoBot=p}),require.register("actor/Ring.js",function(t,e,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Ring=void 0;var n=e("./PointActor"),i=e("./Spring"),o=e("../audio/Sfx"),a=e("../lib/Analytic");function s(t){"@babel/helpers - typeof";return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function c(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,d(n.key),n)}}function l(){return(l="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=h(t)););return t}(t,e);if(n){var i=Object.getOwnPropertyDescriptor(n,e);return i.get?i.get.call(arguments.length<3?t:r):i.value}}).apply(this,arguments)}function u(t,e){return(u=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function f(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=h(t);if(e){var i=h(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===s(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return p(t)}(this,r)}}function p(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function h(t){return(h=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function g(t,e,r){return(e=d(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function d(t){var e=function(t,e){if("object"!==s(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==s(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===s(e)?e:String(e)}let y=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&u(t,e)}(y,n.PointActor);var e,r,s,d=f(y);function y(){var t,e,r,n;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,y);for(var o=arguments.length,a=new Array(o),s=0;s<o;s++)a[s]=arguments[s];return g(p(n=d.call(this,...a)),"template",'<div class  = "point-actor [[type]]">\n\t\t<div class = "sprite" cv-ref = "sprite"></div>\n\t</div>'),g(p(n),"float",-1),n[i.Spring.WontSpring]=!0,n.args.type="actor-item actor-ring",n.args.width=32,n.args.height=32,n.args.static=null===(t=n.args.static)||void 0===t||t,n.args.dropped=null===(e=n.args.dropped)||void 0===e||e,n.args.gone=!1,n.args.gravity=.4,n.args.delay=null!==(r=n.args.delay)&&void 0!==r?r:48,n}return e=y,(r=[{key:"update",value:function(){if(!this.viewport)return;const t=this.viewport.args.frameId-this.startFrame;this.args.noClip?this.noClip=!0:this.args.decoration?this.noClip=!0:this.args.ySpeed<0?this.noClip=!0:this.attract||(this.noClip=!1),this.args.decoration&&(this.args.type="actor-item actor-ring decoration",this.args.gravity=.36),this.dropped&&(this.args.type="actor-item actor-ring dropped",this.args.height=14);const e=this.viewport;this.dropped&&this.viewport&&!this.viewport.actorIsOnScreen(this,256)&&e.onFrameOut(15,()=>{e.actors.remove(this)}),this.args.reward&&this.args.gone&&e.onFrameOut(15,()=>{e.actors.remove(this)}),(this.args.reward||this.dropped||this.attract)&&l(h(y.prototype),"update",this).call(this),this.args.reward||(this.dropped&&!this.attract&&this.getMapSolidAt(this.args.x,this.args.y+-this.args.height)&&!this.getMapSolidAt(this.args.x,this.args.y)?(this.args.y+=this.args.height+1,this.args.ySpeed=Math.abs(this.args.ySpeed)||8):this.dropped&&!this.attract&&this.getMapSolidAt(this.args.x+this.args.xSpeed*this.args.direction,this.args.y+-8,!1)&&(this.args.xSpeed*=-1),!this.dropped&&!this.scattered||this.args.falling&&this.args.ySpeed||(this.args.ySpeed=Math.min(.75*-Math.abs(this.args.ySpeed||this.ySpeedLast||0),t>6?-2:0),this.args.gSpeed=0,this.args.x+=this.args.xSpeed,this.args.y+=this.args.ySpeed,this.args.falling=!0,this.args.groundAngle=0))}},{key:"callCollideHandler",value:function(t){return!(t instanceof y)&&l(h(y.prototype),"callCollideHandler",this).call(this,t)}},{key:"collideA",value:function(t){if(t instanceof this.constructor)return;if(!this.viewport||this.args.gone||this.args.ignore)return!1;const e=this.viewport.args.frameId-this.startFrame;if(this.dropped&&e<this.args.delay)return!1;if(t.args.owner&&(t=t.args.owner),t.occupant&&(t=t.occupant),!t.controllable&&!t.occupant&&!t.args.owner)return!1;l(h(y.prototype),"collideA",this).call(this,t),t.controllable&&(t.args.rings+=1),this.args.gone=!0,this.viewport.auras.delete(this),this.args.static=!0,this.args.float=-1,this.args.type="actor-item actor-ring collected",this.args.xSpeed=0,this.args.ySpeed=0,this.viewport.args.audio&&o.Sfx.play("RING_COLLECTED"),this.viewport.onFrameOut(5,()=>{this.args.type="actor-item actor-ring collected gone"});this.args.x,this.args.y,this.viewport;this.viewport.onFrameOut(4200,()=>{this.restore=!0}),t.collect&&("function"==typeof ga&&a.Analytic.report({eventCategory:"ring",eventAction:"collected",eventLabel:`${this.viewport.args.actName}::${this.args.id}`}),this.viewport.onFrameOut(1,()=>{t.collect(this)}))}},{key:"wakeUp",value:function(){this.def&&this.restore&&(this.args.x=this.def.get("x"),this.args.y=this.def.get("y"),this.args.gone=this.restore=!1,this.args.type="actor-item actor-ring")}},{key:"solid",get:function(){return!1}},{key:"rotateLock",get:function(){return!0}}])&&c(e.prototype,r),s&&c(e,s),Object.defineProperty(e,"prototype",{writable:!1}),y}();t.Ring=y}),require.register("actor/RoadBarrier.js",function(t,e,r){"use strict";function n(t){"@babel/helpers - typeof";return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(t,"__esModule",{value:!0}),t.RoadBarrier=void 0;var i=e("./PointActor");function o(t,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,(o=i.key,void 0,"symbol"===n(a=function(t,e){if("object"!==n(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var i=r.call(t,e||"default");if("object"!==n(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(o,"string"))?a:String(a)),i)}var o,a}function a(t,e){return(a=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function s(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,i=c(t);if(e){var o=c(this).constructor;r=Reflect.construct(i,arguments,o)}else r=i.apply(this,arguments);return function(t,e){if(e&&("object"===n(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function c(t){return(c=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}let l=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&a(t,e)}(l,i.PointActor);var e,r,n,c=s(l);function l(){var t;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,l);for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];return(t=c.call(this,...r)).args.width=t.args.width||64,t.args.height=t.args.height||32,t.args.type="actor-item actor-road-barrier",t.args.z=0,t}return e=l,(r=[{key:"solid",get:function(){return!1}}])&&o(e.prototype,r),n&&o(e,n),Object.defineProperty(e,"prototype",{writable:!1}),l}();t.RoadBarrier=l}),require.register("actor/Rocket.js",function(t,e,r){"use strict";function n(t){"@babel/helpers - typeof";return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(t,"__esModule",{value:!0}),t.Rocket=void 0;var i=e("./PointActor"),o=e("curvature/base/Tag"),a=e("../audio/Sfx");function s(t,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,(o=i.key,void 0,"symbol"===n(a=function(t,e){if("object"!==n(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var i=r.call(t,e||"default");if("object"!==n(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(o,"string"))?a:String(a)),i)}var o,a}function c(){return(c="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=f(t)););return t}(t,e);if(n){var i=Object.getOwnPropertyDescriptor(n,e);return i.get?i.get.call(arguments.length<3?t:r):i.value}}).apply(this,arguments)}function l(t,e){return(l=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function u(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,i=f(t);if(e){var o=f(this).constructor;r=Reflect.construct(i,arguments,o)}else r=i.apply(this,arguments);return function(t,e){if(e&&("object"===n(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function f(t){return(f=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}let p=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&l(t,e)}(h,i.PointActor);var e,r,n,p=u(h);function h(){var t,e,r;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,h);for(var n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return(r=p.call(this,...i)).args.width=64,r.args.height=16,r.args.xMax=null!==(t=r.args.xMax)&&void 0!==t?t:24,r.args.yMax=null!==(e=r.args.yMax)&&void 0!==e?e:24,r.args.type="actor-item actor-rocket",r.args.launched=!1,r.args.bindTo(["xSpeed","ySpeed"],t=>{!t&&r.args.launched&&r.explode()}),r}return e=h,(r=[{key:"update",value:function(){this.viewport&&(this.thrusterSound?(this.thrusterSound.volume=.2+-.05*Math.random(),this.thrusterSound.currentTime>1.5&&(this.thrusterSound.currentTime=.5)):this.thrusterSound=new Audio("/Sonic/mecha-sonic-thruster.wav"),c(f(h.prototype),"update",this).call(this),this.args.launched&&Math.abs(this.args.xSpeed)<Math.abs(this.args.xMax)&&(this.args.xSpeed+=.5*Math.sign(this.args.xMax)),this.args.launched&&Math.abs(this.args.ySpeed)<Math.abs(this.args.yMax)&&(this.args.ySpeed-=.5*Math.sign(this.args.yMax)),this.args.launched&&0===this.args.xSpeed&&0===this.args.ySpeed&&this.explode())}},{key:"activate",value:function(){this.viewport.auras.add(this),this.viewport.args.audio&&this.thrusterSound&&this.thrusterSound.play(),this.args.launched=!0,this.args.xMax&&(this.args.xSpeed+=.5),this.args.yMax&&(this.args.ySpeed-=.5)}},{key:"sleep",value:function(){this.args.launched&&this.explode()}},{key:"wakeUp",value:function(){}},{key:"explode",value:function(){const t=this.viewport;if(!t)return;a.Sfx.play("OBJECT_DESTROYED"),this.thrusterSound&&this.thrusterSound.pause();const e=new o.Tag('<div class = "particle-explosion">');e.style({"--x":this.x,"--y":this.y-8}),t.particles.add(e),setTimeout(()=>t.particles.remove(e),512),this.args.xSpeed=0,this.args.ySpeed=0,this.args.opacity=0,this.args.launched=!1,this.viewport.setColCell(this),this.viewport.onFrameOut(60,()=>{});const r=new CustomEvent("exploded",{detail:{actor:this}});this.dispatchEvent(r),this.args.launched=!1,this.args.opacity=1,this.args.x=this.def.get("x"),this.args.y=this.def.get("y"),this.viewport.setColCell(this),this.viewport.auras.delete(this)}}])&&s(e.prototype,r),n&&s(e,n),Object.defineProperty(e,"prototype",{writable:!1}),h}();t.Rocket=p}),require.register("actor/RocketPlatform.js",function(t,e,r){"use strict";function n(t){"@babel/helpers - typeof";return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(t,"__esModule",{value:!0}),t.RocketPlatform=void 0;var i=e("./Block");e("../audio/Sfx");function o(t,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,(o=i.key,void 0,"symbol"===n(a=function(t,e){if("object"!==n(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var i=r.call(t,e||"default");if("object"!==n(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(o,"string"))?a:String(a)),i)}var o,a}function a(){return(a="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=l(t)););return t}(t,e);if(n){var i=Object.getOwnPropertyDescriptor(n,e);return i.get?i.get.call(arguments.length<3?t:r):i.value}}).apply(this,arguments)}function s(t,e){return(s=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function c(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,i=l(t);if(e){var o=l(this).constructor;r=Reflect.construct(i,arguments,o)}else r=i.apply(this,arguments);return function(t,e){if(e&&("object"===n(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function l(t){return(l=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}let u=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&s(t,e)}(f,i.Block);var e,r,n,u=c(f);function f(){var t;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,f);for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];return(t=u.call(this,...r)).args.width=96,t.args.height=64,t.args.platform=1,t.args.type="actor-item actor-rocket-platform",t.args.static=0,t.args.activeTime=0,t}return e=f,(r=[{key:"update",value:function(){this.args.cameraBias=.25,this.standingUnder.size?(this.args.activeTime++,this.args.active=!0):(this.args.activeTime=0,this.args.active=!1);for(const t of this.standingUnder)t.args.dead?(this.args.ySpeed=0,this.standingUnder.delete(t)):this.args.falling||(t.args.y=Math.round(t.args.y));a(l(f.prototype),"update",this).call(this),this.args.activeTime>1&&(this.args.ySpeed-=.1,this.args.float=1,this.args.falling||(this.args.falling=!0,this.args.ySpeed=-1,this.args.y--))}},{key:"collideA",value:function(t,e){return 0!==e?a(l(f.prototype),"collideA",this).call(this,t,e):t.controllable?(this.args.ySpeed-=.1,this.args.float=1,this.args.ySpeed<-3&&(this.args.ySpeed=-3),a(l(f.prototype),"collideA",this).call(this,t,e)):a(l(f.prototype),"collideA",this).call(this,t,e)}}])&&o(e.prototype,r),n&&o(e,n),Object.defineProperty(e,"prototype",{writable:!1}),f}();t.RocketPlatform=u}),require.register("actor/Rocks.js",function(t,e,r){"use strict";function n(t){"@babel/helpers - typeof";return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(t,"__esModule",{value:!0}),t.Rocks=void 0;var i=e("./PointActor"),o=e("../actor/Projectile"),a=e("curvature/base/Tag"),s=e("../audio/Sfx");function c(t,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,(o=i.key,void 0,"symbol"===n(a=function(t,e){if("object"!==n(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var i=r.call(t,e||"default");if("object"!==n(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(o,"string"))?a:String(a)),i)}var o,a}function l(){return(l="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=p(t)););return t}(t,e);if(n){var i=Object.getOwnPropertyDescriptor(n,e);return i.get?i.get.call(arguments.length<3?t:r):i.value}}).apply(this,arguments)}function u(t,e){return(u=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function f(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,i=p(t);if(e){var o=p(this).constructor;r=Reflect.construct(i,arguments,o)}else r=i.apply(this,arguments);return function(t,e){if(e&&("object"===n(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function p(t){return(p=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}let h=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&u(t,e)}(g,i.PointActor);var e,r,n,h=f(g);function g(t,e){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,g),(r=h.call(this,t,e)).args.type="actor-item actor-rocks-tall",r.args.width=48,r.args.height=80,r.gone=!1,r.particleA=new a.Tag('<div class = "particle-rock">'),r.particleB=new a.Tag('<div class = "particle-rock">'),r.particleC=new a.Tag('<div class = "particle-rock">'),r.particleD=new a.Tag('<div class = "particle-rock">'),r.particleE=new a.Tag('<div class = "particle-rock">'),r.particleF=new a.Tag('<div class = "particle-rock">'),r.particleG=new a.Tag('<div class = "particle-rock">'),r.particleH=new a.Tag('<div class = "particle-rock">'),r}return e=g,(r=[{key:"onRendered",value:function(t){l(p(g.prototype),"onRendered",this).call(this,t);let e=-1;const r=this.particleA,n=this.particleB,i=this.particleC,o=this.particleD,a=this.particleE,s=this.particleF,c=this.particleG,u=this.particleH;r.style({"--x":this.x-8,"--y":this.y-8,"--fallSpeed":1550+20*Math.random(),"--xMomentum":60*e+20*Math.random(),"--yMomentum":40,"z-index":0}),e*=-1,n.style({"--x":this.x+8,"--y":this.y-0,"--fallSpeed":1550+20*Math.random(),"--xMomentum":60*e+20*Math.random(),"--yMomentum":40,"z-index":0}),e*=-1,i.style({"--x":this.x,"--y":this.y-18,"--fallSpeed":1550+20*Math.random(),"--xMomentum":60*e+20*Math.random(),"--yMomentum":44,"z-index":0}),e*=-1,o.style({"--x":this.x+8,"--y":this.y-10,"--fallSpeed":1550+20*Math.random(),"--xMomentum":60*e+20*Math.random(),"--yMomentum":44,"z-index":0}),e*=-1,a.style({"--x":this.x-8,"--y":this.y-28,"--fallSpeed":1550+20*Math.random(),"--xMomentum":60*e+20*Math.random(),"--yMomentum":48,"z-index":0}),e*=-1,s.style({"--x":this.x+8,"--y":this.y-20,"--fallSpeed":1550+20*Math.random(),"--xMomentum":60*e+20*Math.random(),"--yMomentum":48,"z-index":0}),e*=-1,c.style({"--x":this.x-8,"--y":this.y-30,"--fallSpeed":1550+20*Math.random(),"--xMomentum":60*e+20*Math.random(),"--yMomentum":48,"z-index":0}),e*=-1,u.style({"--x":this.x+8,"--y":this.y-30,"--fallSpeed":1550+20*Math.random(),"--xMomentum":60*e+20*Math.random(),"--yMomentum":65,"z-index":0})}},{key:"collideA",value:function(t,e){return!this.args.gone&&(l(p(g.prototype),"collideA",this).call(this,t,e),t.occupant||t.args.rolling||t.punching?(this.pop(t),!1):2!==e&&(!this.args.falling||-1===this.args.float)&&t.args.ySpeed>0&&t.y<this.y&&this.viewport&&!this.args.gone?(this.args.falling&&Math.abs(t.args.ySpeed)>0&&(t.args.xSpeed*=-1),this.pop(t),!1):!((1===e||3===e)&&t instanceof o.Projectile&&this.viewport&&!this.args.gone)||(this.pop(t),!1))}},{key:"pop",value:function(t){this.args.gone=!0;const e=this.viewport;if(!e)return;s.Sfx.play("ROCKS_DESTROYED");const r=this.particleA,n=this.particleB,i=this.particleC,o=this.particleD,a=this.particleE,c=this.particleF,l=this.particleG,u=this.particleH;e.particles.add(r),e.particles.add(n),e.particles.add(i),e.particles.add(o),e.particles.add(a),e.particles.add(c),e.particles.add(l),e.particles.add(u),setTimeout(()=>{e.particles.remove(r),e.particles.remove(n),e.particles.remove(i),e.particles.remove(o),e.particles.remove(a),e.particles.remove(c),e.particles.remove(l),e.particles.remove(u)},2500),this.onNextFrame(()=>e.actors.remove(this))}},{key:"canStick",get:function(){return!1}},{key:"solid",get:function(){return!this.args.gone}}])&&c(e.prototype,r),n&&c(e,n),Object.defineProperty(e,"prototype",{writable:!1}),g}();t.Rocks=h}),require.register("actor/RollingSign.js",function(t,e,r){"use strict";function n(t){"@babel/helpers - typeof";return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(t,"__esModule",{value:!0}),t.RollingSign=void 0;var i=e("./PointActor");function o(t,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,(o=i.key,void 0,"symbol"===n(a=function(t,e){if("object"!==n(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var i=r.call(t,e||"default");if("object"!==n(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(o,"string"))?a:String(a)),i)}var o,a}function a(t,e){return(a=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function s(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,i=l(t);if(e){var o=l(this).constructor;r=Reflect.construct(i,arguments,o)}else r=i.apply(this,arguments);return function(t,e){if(e&&("object"===n(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function c(){return(c="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=l(t)););return t}(t,e);if(n){var i=Object.getOwnPropertyDescriptor(n,e);return i.get?i.get.call(arguments.length<3?t:r):i.value}}).apply(this,arguments)}function l(t){return(l=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}let u=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&a(t,e)}(f,i.PointActor);var e,r,n,u=s(f);function f(){var t,e;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,f);for(var r=arguments.length,n=new Array(r),i=0;i<r;i++)n[i]=arguments[i];return(e=u.call(this,...n)).args.width=20,e.args.height=null!==(t=e.args.height)&&void 0!==t?t:80,e.args.type="actor-item actor-rolling-sign",e}return e=f,n=[{key:"fromDef",value:function(t){const e=c(l(f),"fromDef",this).call(this,t);return e.args.width=t.width,e.args.height=t.height,e}}],(r=[{key:"solid",get:function(){return!1}}])&&o(e.prototype,r),n&&o(e,n),Object.defineProperty(e,"prototype",{writable:!1}),f}();t.RollingSign=u}),require.register("actor/Scratch.js",function(t,e,r){"use strict";function n(t){"@babel/helpers - typeof";return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(t,"__esModule",{value:!0}),t.Scratch=void 0;e("./Flickie");var i=e("curvature/base/Mixin"),o=e("./PointActor"),a=e("../behavior/Patrol"),s=e("../mixin/CanPop");function c(t,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,(o=i.key,void 0,"symbol"===n(a=function(t,e){if("object"!==n(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var i=r.call(t,e||"default");if("object"!==n(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(o,"string"))?a:String(a)),i)}var o,a}function l(){return(l="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=p(t)););return t}(t,e);if(n){var i=Object.getOwnPropertyDescriptor(n,e);return i.get?i.get.call(arguments.length<3?t:r):i.value}}).apply(this,arguments)}function u(t,e){return(u=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function f(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,i=p(t);if(e){var o=p(this).constructor;r=Reflect.construct(i,arguments,o)}else r=i.apply(this,arguments);return function(t,e){if(e&&("object"===n(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function p(t){return(p=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}let h=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&u(t,e)}(g,i.Mixin.from(o.PointActor,s.CanPop));var e,r,n,h=f(g);function g(){var t,e,r,n;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,g);for(var i=arguments.length,o=new Array(i),s=0;s<i;s++)o[s]=arguments[s];return(n=h.call(this,...o)).behaviors.add(new a.Patrol),n.args.type="actor-item actor-scratch",n.args.animation="standing",n.args.accel=.1,n.args.decel=.5,n.args.gSpeedMax=5,n.args.jumpForce=5,n.args.gravity=.5,n.args.width=32,n.args.height=39,n.willStick=!1,n.stayStuck=!1,n.args.patrolPause=null!==(t=n.args.patrolPause)&&void 0!==t?t:20,n.args.patrolBeat=null!==(e=n.args.patrolBeat)&&void 0!==e?e:120,n.args.patrolSpeed=null!==(r=n.args.patrolSpeed)&&void 0!==r?r:1,n}return e=g,(r=[{key:"onRendered",value:function(){l(p(g.prototype),"onRendered",this).call(this),this.autoAttr.get(this.box)["data-color"]="color"}},{key:"update",value:function(){this.args.direction,this.args.shotTelegraph,this.args.patrolBeat;this.box&&(this.args.moving&&this.args.gSpeed?this.box.setAttribute("data-animation","walking"):this.box.setAttribute("data-animation","standing")),l(p(g.prototype),"update",this).call(this),this.args.direction=Math.sign(this.args.gSpeed)}},{key:"effect",value:function(t){l(p(g.prototype),"effect",this).call(this,t)}},{key:"solid",get:function(){return!1}},{key:"isEffect",get:function(){return!1}}])&&c(e.prototype,r),n&&c(e,n),Object.defineProperty(e,"prototype",{writable:!1}),g}();t.Scratch=h}),require.register("actor/Sean.js",function(t,e,r){"use strict";function n(t){"@babel/helpers - typeof";return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(t,"__esModule",{value:!0}),t.Sean=void 0;var i=e("./PointActor"),o=(e("curvature/base/Tag"),e("../behavior/SkidDust"));function a(t,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,(o=i.key,void 0,"symbol"===n(a=function(t,e){if("object"!==n(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var i=r.call(t,e||"default");if("object"!==n(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(o,"string"))?a:String(a)),i)}var o,a}function s(){return(s="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=u(t)););return t}(t,e);if(n){var i=Object.getOwnPropertyDescriptor(n,e);return i.get?i.get.call(arguments.length<3?t:r):i.value}}).apply(this,arguments)}function c(t,e){return(c=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function l(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,i=u(t);if(e){var o=u(this).constructor;r=Reflect.construct(i,arguments,o)}else r=i.apply(this,arguments);return function(t,e){if(e&&("object"===n(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function u(t){return(u=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}let f=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&c(t,e)}(p,i.PointActor);var e,r,n,f=l(p);function p(){var t;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,p);for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];return(t=f.call(this,...r)).behaviors.add(new o.SkidDust),t.args.type="actor-item actor-sean",t.args.normalHeight=35,t.args.rollingHeight=28,t.args.accel=.25,t.args.decel=.4,t.args.gSpeedMax=18,t.args.jumpForce=11,t.args.gravity=.5,t.args.width=18,t.args.height=35,t}return e=p,(r=[{key:"onRendered",value:function(t){s(u(p.prototype),"onRendered",this).call(this,t),this.box=this.findTag("div")}},{key:"update",value:function(){const t=this.args.falling;if(this.box){if(t)this.args.jumping&&this.box.setAttribute("data-animation","jumping");else{this.yAxis>0?this.args.crouching=!0:this.args.crouching=!1;const t=this.args.direction,e=this.args.gSpeed,r=Math.abs(e),n=this.args.gSpeedMax;this.args.rolling?this.box.setAttribute("data-animation","rolling"):Math.sign(this.args.gSpeed)!==t&&Math.abs(this.args.gSpeed-t)>5?this.box.setAttribute("data-animation","standing"):r>.25*n?this.box.setAttribute("data-animation","running"):this.args.moving&&e?this.box.setAttribute("data-animation","walking"):this.box.setAttribute("data-animation","standing")}s(u(p.prototype),"update",this).call(this)}else s(u(p.prototype),"update",this).call(this)}},{key:"solid",get:function(){return!1}},{key:"canRoll",get:function(){return!0}},{key:"isEffect",get:function(){return!1}},{key:"controllable",get:function(){return!0}}])&&a(e.prototype,r),n&&a(e,n),Object.defineProperty(e,"prototype",{writable:!1}),p}();t.Sean=f}),require.register("actor/SeeSaw.js",function(t,e,r){"use strict";function n(t){"@babel/helpers - typeof";return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(t,"__esModule",{value:!0}),t.SeeSaw=void 0;var i=e("./PointActor"),o=e("./Ring"),a=e("curvature/base/Tag");function s(t,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,(o=i.key,void 0,"symbol"===n(a=function(t,e){if("object"!==n(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var i=r.call(t,e||"default");if("object"!==n(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(o,"string"))?a:String(a)),i)}var o,a}function c(){return(c="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=f(t)););return t}(t,e);if(n){var i=Object.getOwnPropertyDescriptor(n,e);return i.get?i.get.call(arguments.length<3?t:r):i.value}}).apply(this,arguments)}function l(t,e){return(l=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function u(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,i=f(t);if(e){var o=f(this).constructor;r=Reflect.construct(i,arguments,o)}else r=i.apply(this,arguments);return function(t,e){if(e&&("object"===n(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function f(t){return(f=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}Symbol("Side");let p=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&l(t,e)}(h,i.PointActor);var e,r,n,p=u(h);function h(t,e){var r,n,i;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,h),(i=p.call(this,t,e)).args.width=96,i.args.height=32,i.noClip=!0,i.args.float=-1,i.args.power=null!==(r=i.args.power)&&void 0!==r?r:20,i.tiltTime=0,i.args.power=null!==(n=i.args.power)&&void 0!==n?n:12,i.args.type="actor-item actor-see-saw",i.args.bindTo("tilt",t=>{i.args.type=`actor-item actor-see-saw ${t}`,i.tiltTime=0}),i}return e=h,(r=[{key:"onRendered",value:function(t){c(f(h.prototype),"onRendered",this).call(this,t),this.hub||(this.hub=new a.Tag('<div class = "see-saw-hub">'),this.box.appendChild(this.hub.node))}},{key:"collideA",value:function(t,e){if(!(t instanceof o.Ring)&&t.args.falling&&!(t.args.ySpeed<=0)&&(t.args.groundAngle=0,Math.abs(t.x-this.x)>4)){const e=Math.sign(t.x-this.x);this.reflectImpulse(t,e*t.args.weight*Math.abs(t.args.ySpeed)),t.x<this.x?(this.tiltClass="tilt-left",this.tilt=-1):t.x>this.x&&(this.tiltClass="tilt-right",this.tilt=1),this.args.tilt=this.tiltClass}}},{key:"reflectImpulse",value:function(t,e){this.reflectObject&&this.reflectObject.args.falling&&!t.args.falling||this.tilt!==Math.sign(e)&&(this.reflectObject=t,this.reflectForce=e)}},{key:"update",value:function(){this.tiltTime++,c(f(h.prototype),"update",this).call(this)}},{key:"updateEnd",value:function(){c(f(h.prototype),"updateEnd",this).call(this);const t=this.viewport.collisions.get(this);if(!t)return this.reflectObject=null,void(this.reflectForce=0);for(const e of t.keys()){if(e.args.falling)continue;e.args.groundAngle=0;const t=e.x-this.x,r=Math.abs(t/(this.args.width/2)),n=Math.sign(t);if(!this.reflectForce||n===Math.sign(this.reflectForce))continue;if(Math.abs(t)<4)continue;r<.75&&(e.args.x+=t/2,e.args.y-=8);const i=Math.abs(this.reflectForce/e.args.weight),o=Math.min(1,Math.ceil(3*r)/3);e.args.gSpeed=0,e.args.xSpeed=0,e.args.ySpeed=Math.min(-6.5,-i*o*1.2),e.args.y-=16,e.args.falling=!0}this.reflectObject=null,this.reflectForce=0}}])&&s(e.prototype,r),n&&s(e,n),Object.defineProperty(e,"prototype",{writable:!1}),h}();t.SeeSaw=p}),require.register("actor/Seymour.js",function(t,e,r){"use strict";function n(t){"@babel/helpers - typeof";return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(t,"__esModule",{value:!0}),t.Seymour=void 0;var i=e("./PointActor"),o=(e("curvature/base/Tag"),e("./Spring")),a=e("../behavior/SkidDust");function s(t,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,(o=i.key,void 0,"symbol"===n(a=function(t,e){if("object"!==n(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var i=r.call(t,e||"default");if("object"!==n(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(o,"string"))?a:String(a)),i)}var o,a}function c(){return(c="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=f(t)););return t}(t,e);if(n){var i=Object.getOwnPropertyDescriptor(n,e);return i.get?i.get.call(arguments.length<3?t:r):i.value}}).apply(this,arguments)}function l(t,e){return(l=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function u(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,i=f(t);if(e){var o=f(this).constructor;r=Reflect.construct(i,arguments,o)}else r=i.apply(this,arguments);return function(t,e){if(e&&("object"===n(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function f(t){return(f=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}let p=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&l(t,e)}(h,i.PointActor);var e,r,n,p=u(h);function h(){var t;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,h);for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];return(t=p.call(this,...r)).behaviors.add(new a.SkidDust),t.args.type="actor-item actor-seymour",t.args.spriteSheet=t.spriteSheet="/secret/seymour-color-corrected.png",t.superSpriteSheet="/secret/super-seymour.png",t.args.normalHeight=44,t.args.rollingHeight=23,t.args.accel=.25,t.args.decel=.4,t.args.gSpeedMax=18,t.args.jumpForce=11,t.args.gravity=.5,t.args.width=18,t.args.height=32,t}return e=h,(r=[{key:"onRendered",value:function(t){c(f(h.prototype),"onRendered",this).call(this,t),this.box=this.findTag("div")}},{key:"update",value:function(){const t=this.args.falling;if(this.box){if(t)this.args.jumping&&(this.args.animation="jumping");else{this.springing=!1,this.yAxis>0?this.args.crouching=!0:this.args.crouching=!1;const t=this.args.direction,e=this.args.gSpeed,r=Math.abs(e),n=this.args.gSpeedMax;this.args.rolling?this.args.animation="rolling":Math.sign(this.args.gSpeed)!==t&&Math.abs(this.args.gSpeed-t)>5?this.args.animation="standing":r>.5*n?this.args.animation="running":this.args.moving&&e?this.args.animation="walking":this.args.animation="standing"}this.args.falling&&this.springing&&(this.args.groundAngle=0,this.args.animation="springing"),c(f(h.prototype),"update",this).call(this)}else c(f(h.prototype),"update",this).call(this)}},{key:"command_3",value:function(){this.isSuper=!this.isSuper,this.onTimeout(150,()=>{0===this.args.rings&&this.setProfile()}),this.setProfile()}},{key:"setProfile",value:function(){this.isSuper?this.args.spriteSheet=this.superSpriteSheet:this.args.spriteSheet=this.spriteSheet}},{key:"collideA",value:function(t){t instanceof o.Spring&&this.onNextFrame(()=>{this.args.falling&&(this.springing=!0,this.args.animation="springing")})}},{key:"solid",get:function(){return!1}},{key:"canRoll",get:function(){return!0}},{key:"isEffect",get:function(){return!1}},{key:"controllable",get:function(){return!0}}])&&s(e.prototype,r),n&&s(e,n),Object.defineProperty(e,"prototype",{writable:!1}),h}();t.Seymour=p}),require.register("actor/Signpost.js",function(t,e,r){"use strict";function n(t){"@babel/helpers - typeof";return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(t,"__esModule",{value:!0}),t.Signpost=void 0;var i=e("../ui/CharacterString"),o=e("./PointActor"),a=e("curvature/base/Tag");function s(t,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,(o=i.key,void 0,"symbol"===n(a=function(t,e){if("object"!==n(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var i=r.call(t,e||"default");if("object"!==n(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(o,"string"))?a:String(a)),i)}var o,a}function c(){return(c="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=f(t)););return t}(t,e);if(n){var i=Object.getOwnPropertyDescriptor(n,e);return i.get?i.get.call(arguments.length<3?t:r):i.value}}).apply(this,arguments)}function l(t,e){return(l=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function u(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,i=f(t);if(e){var o=f(this).constructor;r=Reflect.construct(i,arguments,o)}else r=i.apply(this,arguments);return function(t,e){if(e&&("object"===n(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function f(t){return(f=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}let p=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&l(t,e)}(h,o.PointActor);var e,r,n,p=u(h);function h(){var t;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,h);for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];return(t=p.call(this,...r)).args.type="actor-item actor-signpost",t.args.width=48,t.args.height=256,t.args.active=!1,t.args.follow=!1,t.args.activeTime=0,t.cleared=!1,t.willActivate=!1,t.clearedBy=null,t}return e=h,(r=[{key:"collideA",value:function(t){if(!t.controllable||this.args.active)return;if(this.willActivate=!0,this.viewport.onFrameOut(10,()=>{this.args.active=!0,this.clearedBy=t}),this.following)return;this.viewport.clearCheckpoints(),!this.finishReward&&t.args.popChain.length&&(this.finishReward={label:"Big Finish",points:1e3,multiplier:1,color:"orange"},t.args.popChain.push(this.finishReward));const e=60*((t.args.gSpeed||t.args.xSpeed)/32)*3;t.args.clearSpeed=Math.abs(e),this.args.charStrings.push(new i.CharacterString({value:`Speed: ${e.toFixed(2)} ft/sec`})),this.following=t,this.args.falling=!0,this.args.follow=!0,this.args.xSpeed=1.1*(t.args.gSpeed||t.args.xSpeed),this.args.ySpeed=-7,this.args.y--}},{key:"clear",value:function(t){let e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];this.cleared=!0,t.totalCombo(),this.box.setAttribute("data-cleared-by",t.args.name),this.tally=this.viewport.clearAct(`${t.args.name} GOT THROUGH\n${this.viewport.args.actName}`,e),this.viewport.onFrameOut(30,()=>{this.args.follow=!1,this.args.boss}),this.viewport.onFrameOut(600,()=>{if(!this.args.boss)return;const e=this.viewport.actorsById[this.args.boss];this.viewport.auras.add(e),e.args.x=this.x+(this.x<125e3?768:-768),e.args.y=this.y-144,this.viewport.controlActor&&this.viewport.controlActor.args.jumpForce<10.5&&(e.args.y+=48),e.args.phase="intro",t.args.clearSpeed=0})}},{key:"update",value:function(){if(this.args.active&&this.args.activeTime++,this.args.follow){const t=this.following;!t.skidding||t.args.rolling||t.args.falling||(this.args.xStart||(this.skidLabel=new i.CharacterString({value:"Skid: 0"}),this.args.xStart=this.x,this.args.charStrings.push(this.skidLabel)),this.args.dragged=Math.trunc(Math.abs(this.args.xStart-this.x)),this.skidLabel.args.value=`Skid: ${this.args.dragged}`,t.args.dragBonus=this.args.dragged);const e=Math.max(this.x,this.viewport.controlActor.x+-160);if(e!==this.x){if(!this.args.falling){const t=new a.Tag('<div class = "particle-dust">'),e=this.rotatePoint(this.args.gSpeed,0);t.style({"--x":e[0]+this.x+-4,"--y":e[1]+this.y,"z-index":0,opacity:2*Math.random()});const r=this.viewport;r.particles.add(t),r.onFrameOut(30,()=>r.particles.remove(t))}for(t.args.rolling=!1,this.args.x=e;this.getMapSolidAt(this.x,this.y-1);)this.args.y--}}c(f(h.prototype),"update",this).call(this),this.args.active&&!this.cleared&&this.clear(this.clearedBy)}},{key:"rotateLock",get:function(){return!0}}])&&s(e.prototype,r),n&&s(e,n),Object.defineProperty(e,"prototype",{writable:!1}),h}();t.Signpost=p}),require.register("actor/SkateBoard.js",function(t,e,r){"use strict";function n(t){"@babel/helpers - typeof";return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(t,"__esModule",{value:!0}),t.SkateBoard=void 0;var i=e("./SnowBoard"),o=e("curvature/base/Tag");function a(t,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,(o=i.key,void 0,"symbol"===n(a=function(t,e){if("object"!==n(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var i=r.call(t,e||"default");if("object"!==n(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(o,"string"))?a:String(a)),i)}var o,a}function s(){return(s="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=u(t)););return t}(t,e);if(n){var i=Object.getOwnPropertyDescriptor(n,e);return i.get?i.get.call(arguments.length<3?t:r):i.value}}).apply(this,arguments)}function c(t,e){return(c=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function l(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,i=u(t);if(e){var o=u(this).constructor;r=Reflect.construct(i,arguments,o)}else r=i.apply(this,arguments);return function(t,e){if(e&&("object"===n(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function u(t){return(u=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}let f=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&c(t,e)}(p,i.SnowBoard);var e,r,n,f=l(p);function p(){var t;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,p);for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];return(t=f.call(this,...r)).args.height=10,t.args.width=12,t.args.seatHeight=12,t.sparks=new Set,t.args.accelOrig=.5,t.args.decelOrig=.6,t.args.decel=.6,t.args.accel=.8,t.args.gravity=.65,t.args.skidTraction=.85,t.args.jumpForce=12.5,t.args.type="actor-item actor-snow-board actor-skate-board",t.args.trick=null,t.args.seatAngle=0,t.args.gSpeedMax=18,t.trickTimer=0,t.flipReward=!1,t.args.rotated=0,t.canGrind=!0,t.fakie=!1,t.silentSkid=!0,t.bindTo("occupant",e=>{e&&(t.args.gSpeed=e.xSpeedLast||0)}),t.args.bindTo("trick",e=>{if(!t.args.falling&&"manual"!==e)return;if(!e||t.args.grinding)return;const r={label:"",points:100,multiplier:1};switch(e){case"insult":r.label=(t.fakie?"fakie ":"")+"leanback",t.occupant.args.popChain.push(r),t.occupant.args.popCombo+=1;break;case"handstand":r.label=(t.fakie?"fakie ":"")+"handstand",t.occupant.args.popChain.push(r),t.occupant.args.popCombo+=1;break;case"manual":t.occupant.args.popCombo&&(r.label=(t.fakie?"fakie ":"")+"manual",t.occupant.args.popChain.push(r),t.occupant.args.popCombo+=1)}}),t}return e=p,(r=[{key:"update",value:function(){if(this.args.falling?(this.args.jumping&&1===this.fallTime&&(this.args.groundAngle+=Math.PI/8),this.args.rolling=!1):this.args.rolling=1===this.args.mode&&this.args.gSpeed>0||3===this.args.mode&&this.args.gSpeed<0||Math.sign(this.args.gSpeed)===Math.sign(this.args.direction)&&!this.xAxis,this.args.falling||(this.flipReward=!1),this.occupant?(this.args.width=24,this.args.height=40):(this.args.width=64,this.args.height=12),this.trickTimer>0?this.trickTimer--:(this.args.trick=null,this.trickTimer=0),s(u(p.prototype),"update",this).call(this),this.args.falling?this.args.rotated=this.args.groundAngle:this.fakie=this.args.reversing,this.occupant&&!this.trickTimer&&!this.args.grinding&&this.groundTime>1&&"manual"!==this.args.trick&&(this.occupant.totalCombo(),this.args.trick=null),this.ridingAnimation=this.args.gSpeed||this.args.xSpeed||this.args.ySpeed?"grinding":"standing",this.idleTime>30&&(this.ridingAnimation="idle"),this.crouching=!1,this.yAxis>.55&&!this.args.falling&&(this.ridingAnimation="grinding-crouching",this.crouching=!0),this.args.accel=this.args.accelOrig,this.args.decel=this.args.decelOrig,this.crouching&&(this.args.decel=.1),this.args.animation="idle-2","handstand"===this.args.trick&&(this.ridingAnimation="handstand",(this.trickTimer>20||this.trickTimer<10)&&(this.ridingAnimation="flip")),!this.args.grinding&&this.grindReward&&(this.grindReward=null),this.args.grinding){if(this.ridingAnimation="board-grinding",this.args.animation="grinding",this.occupant&&this.occupant.args.popCombo)if(this.grindReward)this.grindReward.points+=10;else{const t={label:(this.fakie?"fakie ":"")+"rail grind",points:100,multiplier:1};this.grindReward=t,this.occupant.args.popChain.push(t),this.occupant.args.popCombo+=1}}else"manual"!==this.args.trick||this.args.falling?"insult"===this.args.trick&&(this.ridingAnimation="insult"):(this.ridingAnimation="manual",this.args.animation="manual");if(this.args.grinding&&!this.args.falling){const t=document.createElement("div");t.classList.add("particle-sparks");const e=new o.Tag(t),r=document.createElement("div");r.classList.add("envelope-sparks");const n=new o.Tag(r);n.appendChild(e.node);const i=this.rotatePoint(17.5*this.args.direction,8),a=Math.sign(this.args.gSpeed);n.style({"--x":i[0]+this.args.x,"--y":i[1]+this.args.y+-3*Math.random(),"z-index":0,"animation-delay":.25*-Math.random()+"s","--xMomentum":Math.max(Math.abs(this.args.gSpeed),4)*a,"--flip":a,"--angle":this.realAngle,opacity:2*Math.random()}),n.particle=e,this.viewport.particles.add(n),this.sparks.add(n);const s=this.viewport;this.viewport.onFrameOut(30,()=>{s.particles.remove(n),this.sparks.delete(n)})}}},{key:"command_1",value:function(){this.args.grinding||this.trickTimer>10||(this.args.trick="insult",this.trickTimer=30)}},{key:"hold_1",value:function(){this.trickTimer>10||"insult"!==this.args.trick||(this.trickTimer=Math.max(15,this.trickTimer),this.idleTime=10)}},{key:"release_1",value:function(){"insult"===this.args.trick&&(this.args.trick="insult",this.trickTimer=10)}},{key:"command_2",value:function(){this.trickTimer>10||(this.args.trick="handstand",this.trickTimer=30)}},{key:"hold_2",value:function(){this.trickTimer>10||"handstand"!==this.args.trick||(this.args.trick="handstand",this.trickTimer=Math.max(15,this.trickTimer),this.idleTime=10)}},{key:"release_2",value:function(){"handstand"===this.args.trick&&(this.trickTimer=10)}},{key:"command_3",value:function(){this.args.grinding||this.args.trick&&this.args.falling&&"manual"!==this.args.trick||this.trickTimer>10||(this.args.trick="manual",this.trickTimer=30)}},{key:"hold_3",value:function(){this.args.falling&&"manual"===this.args.trick?this.trickTimer=Math.max(15,this.trickTimer):this.args.falling||"manual"!==this.args.trick||this.trickTimer>10&&"manual"!==this.args.trick||(this.args.trick="manual",this.trickTimer=Math.max(15,this.trickTimer),this.idleTime=10)}},{key:"release_3",value:function(){"manual"===this.args.trick&&(this.args.trick="manual",this.trickTimer=10)}}])&&a(e.prototype,r),n&&a(e,n),Object.defineProperty(e,"prototype",{writable:!1}),p}();t.SkateBoard=f}),require.register("actor/Skorp.js",function(t,e,r){"use strict";function n(t){"@babel/helpers - typeof";return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(t,"__esModule",{value:!0}),t.Skorp=void 0;var i=e("curvature/base/Tag"),o=(e("./Flickie"),e("curvature/base/Mixin")),a=e("./PointActor"),s=e("../behavior/Patrol"),c=e("../mixin/CanPop"),l=e("../actor/Projectile"),u=e("../audio/Sfx");function f(t,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,(o=i.key,void 0,"symbol"===n(a=function(t,e){if("object"!==n(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var i=r.call(t,e||"default");if("object"!==n(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(o,"string"))?a:String(a)),i)}var o,a}function p(){return(p="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=d(t)););return t}(t,e);if(n){var i=Object.getOwnPropertyDescriptor(n,e);return i.get?i.get.call(arguments.length<3?t:r):i.value}}).apply(this,arguments)}function h(t,e){return(h=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function g(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,i=d(t);if(e){var o=d(this).constructor;r=Reflect.construct(i,arguments,o)}else r=i.apply(this,arguments);return function(t,e){if(e&&("object"===n(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function d(t){return(d=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}let y=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&h(t,e)}(b,o.Mixin.from(a.PointActor,c.CanPop));var e,r,n,y=g(b);function b(){var t,e,r,n,i;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,b);for(var o=arguments.length,a=new Array(o),c=0;c<o;c++)a[c]=arguments[c];return(i=y.call(this,...a)).behaviors.add(new s.Patrol),i.args.type="actor-item actor-skorp",i.args.animation="standing",i.args.accel=.1,i.args.decel=.5,i.args.gSpeedMax=5,i.args.jumpForce=5,i.args.gravity=.5,i.args.width=24,i.args.height=32,i.args.color=null!==(t=i.args.color)&&void 0!==t?t:"green",i.willStick=!1,i.stayStuck=!1,i.args.patrolPause=null!==(e=i.args.patrolPause)&&void 0!==e?e:20,i.args.patrolBeat=null!==(r=i.args.patrolBeat)&&void 0!==r?r:120,i.args.patrolSpeed=null!==(n=i.args.patrolSpeed)&&void 0!==n?n:1,i.args.segmentCount=5,i.args.segmentAngle=Math.PI/2,i.aggroCount=0,i.coolDown=0,i.args.shooting=0,i}return e=b,(r=[{key:"onRendered",value:function(){if(p(d(b.prototype),"onRendered",this).call(this),this.autoAttr.get(this.box)["data-color"]="color",this.autoAttr.get(this.box)["data-shooting"]="shooting",this.autoAttr.get(this.box)["data-aiming"]="aimDirection",this.autoStyle.get(this.box)["--segments"]="segmentCount",this.autoStyle.get(this.box)["--segmentAngle"]="segmentAngle",this.autoStyle.get(this.box)["--aim-direction"]="aimDirection",this.autoStyle.get(this.box)["--tail-angle"]="tailAngle",!this.tail){this.tail=new i.Tag('<div class = "tail">');const t=[new i.Tag('<div   class = "segment" style = "--index:0">'),new i.Tag('<div class = "segment" style = "--index:1">'),new i.Tag('<div class = "segment" style = "--index:2">'),new i.Tag('<div class = "segment" style = "--index:3">'),new i.Tag('<div class = "segment" style = "--index:4">'),new i.Tag('<div class = "end gun" style = "--index:5">')];let e;for(const r of t)e?e.append(r.node):this.tail.append(r.node),e=r;this.box.appendChild(this.tail.node)}}},{key:"update",value:function(){this.args.direction,this.args.shotTelegraph,this.args.patrolBeat;this.box&&(this.args.moving&&this.args.gSpeed?this.box.setAttribute("data-animation","walking"):this.box.setAttribute("data-animation","standing"));const t=this.castRayQuick(256,Math.PI,[0,-16],!1)||256,e=this.castRayQuick(256,0,[0,-16],!1)||256,r=this.viewport.actorsAtLine(this.x,this.y-16,this.x-t,this.y+-16),n=this.viewport.actorsAtLine(this.x,this.y-16,this.x+e,this.y+-16),i=[...r.keys()].filter(t=>t.controllable),o=[...n.keys()].filter(t=>t.controllable);if(i.length?this.args.aimDirection=-1:o.length?this.args.aimDirection=1:this.args.aimDirection=0,this.args.aimDirection?(this.args.aimDirection!==this.args.direction?this.args.tailAngle=-19*this.args.aimDirection:this.args.tailAngle=-21*this.args.aimDirection,this.coolDown=30,this.aggroCount++):(this.coolDown<=0?(this.args.tailAngle=-8*this.args.direction,this.args.gSpeed||(this.args.tailAngle=0)):this.coolDown--,this.aggroCount=0),this.aggroCount>20)if(this.args.aimDirection!==this.args.direction){const t=new l.Projectile({x:this.args.x+60*this.args.aimDirection,y:this.args.y-28,xSpeed:4*this.args.aimDirection,ySpeed:.55,float:-1,owner:this});this.viewport.spawn.add({object:t}),this.aggroCount=10,this.args.shooting=6,u.Sfx.play("SHOT_FIRED")}else{const t=new l.Projectile({x:this.args.x+54*this.args.aimDirection,y:this.args.y-42,xSpeed:4*this.args.aimDirection,ySpeed:.55,float:-1,owner:this});this.viewport.spawn.add({object:t}),this.aggroCount=10,this.args.shooting=6,u.Sfx.play("SHOT_FIRED")}else this.args.shooting>0&&this.args.shooting--;p(d(b.prototype),"update",this).call(this),this.args.direction=Math.sign(this.args.gSpeed)||this.args.direction}},{key:"effect",value:function(t){p(d(b.prototype),"effect",this).call(this,t)}},{key:"solid",get:function(){return!1}},{key:"isEffect",get:function(){return!1}}])&&f(e.prototype,r),n&&f(e,n),Object.defineProperty(e,"prototype",{writable:!1}),b}();t.Skorp=y}),require.register("actor/Skull.js",function(t,e,r){"use strict";function n(t){"@babel/helpers - typeof";return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(t,"__esModule",{value:!0}),t.Skull=void 0;var i=e("./PointActor");function o(t,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,(o=i.key,void 0,"symbol"===n(a=function(t,e){if("object"!==n(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var i=r.call(t,e||"default");if("object"!==n(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(o,"string"))?a:String(a)),i)}var o,a}function a(t,e){return(a=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function s(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,i=l(t);if(e){var o=l(this).constructor;r=Reflect.construct(i,arguments,o)}else r=i.apply(this,arguments);return function(t,e){if(e&&("object"===n(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return c(t)}(this,r)}}function c(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function l(t){return(l=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}let u=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&a(t,e)}(u,i.PointActor);var e,r,n,l=s(u);function u(){var t;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,u);for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];return(t=l.call(this,...r)).args.width=17,t.args.height=15,t.args.type="actor-item actor-skull",t.bindTo("carriedBy",e=>{if(t.cX&&(t.cX(),t.cX=null),t.cY&&(t.cY(),t.cY=null),e)t.cX=e.args.bindTo("x",r=>t.args.x=r+8*e.args.direction),t.cY=e.args.bindTo("y",e=>t.args.y=e+-16),e.carrying.add(c(t)),t.args.float=-1;else if(t.carriedBy){const e=t.carriedBy;t.carriedBy=null,t.args.xSpeed=e.args.xSpeed,t.args.ySpeed=e.args.ySpeed,t.args.xSpeed+=4*Math.sign(e.args.gSpeed||e.args.xSpeed),t.args.ySpeed-=4,e.carrying.delete(c(t)),t.args.falling=!0,t.args.float=0}}),t}return e=u,(r=[{key:"lift",value:function(t){this.carriedBy!==t?this.carriedBy=t:this.carriedBy=null}},{key:"solid",get:function(){return!1}}])&&o(e.prototype,r),n&&o(e,n),Object.defineProperty(e,"prototype",{writable:!1}),u}();t.Skull=u}),require.register("actor/SlotMachine.js",function(t,e,r){"use strict";function n(t){"@babel/helpers - typeof";return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(t,"__esModule",{value:!0}),t.SlotMachine=void 0;var i=e("curvature/base/Tag"),o=e("../audio/Sfx"),a=e("./PointActor"),s=e("./Ring"),c=e("./AntiRing");function l(t,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,(o=i.key,void 0,"symbol"===n(a=function(t,e){if("object"!==n(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var i=r.call(t,e||"default");if("object"!==n(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(o,"string"))?a:String(a)),i)}var o,a}function u(){return(u="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=h(t)););return t}(t,e);if(n){var i=Object.getOwnPropertyDescriptor(n,e);return i.get?i.get.call(arguments.length<3?t:r):i.value}}).apply(this,arguments)}function f(t,e){return(f=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function p(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,i=h(t);if(e){var o=h(this).constructor;r=Reflect.construct(i,arguments,o)}else r=i.apply(this,arguments);return function(t,e){if(e&&("object"===n(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function h(t){return(h=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}let g=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&f(t,e)}(d,a.PointActor);var e,r,n,g=p(d);function d(){var t;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,d);for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];return(t=g.call(this,...r)).args.width=96,t.args.height=32,t.args.type="actor-item actor-slot-machine",t.args.float=-1,t}return e=d,(r=[{key:"onRendered",value:function(t){u(h(d.prototype),"onRendered",this).call(this,t),this.boxes||(this.boxes=[new i.Tag('<div class = "slot-panel slot-panel-a">'),new i.Tag('<div class = "slot-panel slot-panel-b">'),new i.Tag('<div class = "slot-panel slot-panel-c">')],this.boxes.forEach(t=>this.box.appendChild(t.node)))}},{key:"dropDelay",value:function(t){if(!t.controllable)return;this.args.type="actor-item actor-slot-machine actor-slot-machine-rolling";const e=Symbol,r=Array(8).fill(0);return this.boxes.map(t=>{t[e]=t[e]||0;const r=32+t[e]+Math.floor(8*Math.random());return t.style({"--scrollTo":32*r+"px"}),t[e]=r,t[e]%8}).forEach(t=>r[t]++),new Promise(e=>{this.viewport.onFrameOut(85,()=>(this.args.type="actor-item actor-slot-machine",1===r[0]?(this.onTimeout(30,()=>o.Sfx.play("FAIL")),t.args.rings>50?this.punish(t,10).then(e):e()):2===r[0]?this.punish(t,50).then(e):3===r[0]?t.args.rings>0?(t.args.rings=0,e()):this.punish(t,100).then(e):2===r[5]?this.reward(t,25).then(e):3===r[5]?this.reward(t,100).then(e):2===r[6]?this.reward(t,50).then(e):3===r[6]?this.reward(t,75).then(e):2===r[7]?this.reward(t,15).then(e):3===r[7]?this.reward(t,20).then(e):3===r[2]||3===r[3]||3===r[4]?this.reward(t,50).then(e):1===r[1]?this.reward(t,2).then(e):2===r[1]?this.reward(t,30).then(e):3===r[1]?this.reward(t,60).then(e):void e()))})}},{key:"reward",value:function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:100;const r=this.viewport;let n=-1.57;for(let i=0;i<e;i++){const e=Math.cos(n),o=Math.sin(n),a=new s.Ring({x:t.x+288*e,y:t.y+288*o,xSpeed:7*-e,ySpeed:7*-o,static:!1,reward:!0,noClip:!0,float:-1});a.noClip=!0,r.spawn.add({object:a,frame:3*i+r.args.frameId}),n+=Math.PI+(i%2?.3:0)}return new Promise(t=>r.onFrameOut(3*(16+e),()=>t()))}},{key:"punish",value:function(t,e){o.Sfx.play("FAIL");const r=this.viewport;let n=-1.57;for(let i=0;i<e;i++){const e=Math.cos(n),o=Math.sin(n),a=new c.AntiRing({x:t.x+288*e,y:t.y+288*o,xSpeed:7*-e,ySpeed:7*-o,static:!1,reward:!0,noClip:!0,float:-1});r.spawn.add({object:a,frame:3*i+r.args.frameId}),n-=Math.PI+(i%2?.3:0)}return new Promise(t=>r.onFrameOut(3*(16+e),()=>t()))}},{key:"solid",get:function(){return!1}}])&&l(e.prototype,r),n&&l(e,n),Object.defineProperty(e,"prototype",{writable:!1}),d}();t.SlotMachine=g}),require.register("actor/SnailBot.js",function(t,e,r){"use strict";function n(t){"@babel/helpers - typeof";return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(t,"__esModule",{value:!0}),t.SnailBot=void 0;var i=e("curvature/base/Mixin"),o=e("./PointActor"),a=e("../behavior/Patrol"),s=e("../mixin/CanPop");function c(t,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,(o=i.key,void 0,"symbol"===n(a=function(t,e){if("object"!==n(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var i=r.call(t,e||"default");if("object"!==n(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(o,"string"))?a:String(a)),i)}var o,a}function l(){return(l="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=p(t)););return t}(t,e);if(n){var i=Object.getOwnPropertyDescriptor(n,e);return i.get?i.get.call(arguments.length<3?t:r):i.value}}).apply(this,arguments)}function u(t,e){return(u=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function f(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,i=p(t);if(e){var o=p(this).constructor;r=Reflect.construct(i,arguments,o)}else r=i.apply(this,arguments);return function(t,e){if(e&&("object"===n(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function p(t){return(p=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}let h=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&u(t,e)}(g,i.Mixin.from(o.PointActor,s.CanPop));var e,r,n,h=f(g);function g(){var t,e,r,n;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,g);for(var i=arguments.length,o=new Array(i),s=0;s<i;s++)o[s]=arguments[s];return(n=h.call(this,...o)).behaviors.add(new a.Patrol),n.args.type="actor-item actor-snailbot",n.args.animation="standing",n.args.accel=.1,n.args.decel=.5,n.args.gSpeedMax=5,n.args.gravity=.5,n.args.width=24,n.args.height=32,n.willStick=!1,n.stayStuck=!1,n.args.patrolPause=null!==(t=n.args.patrolPause)&&void 0!==t?t:20,n.args.patrolBeat=null!==(e=n.args.patrolBeat)&&void 0!==e?e:100,n.args.patrolSpeed=null!==(r=n.args.patrolSpeed)&&void 0!==r?r:1,n}return e=g,(r=[{key:"update",value:function(){l(p(g.prototype),"update",this).call(this),this.args.moving&&this.args.gSpeed?this.args.animation="walking":this.args.animation="standing",this.args.direction=Math.sign(this.args.gSpeed)}},{key:"solid",get:function(){return!1}},{key:"isEffect",get:function(){return!1}}])&&c(e.prototype,r),n&&c(e,n),Object.defineProperty(e,"prototype",{writable:!1}),g}();t.SnailBot=h}),require.register("actor/SnowBoard.js",function(t,e,r){"use strict";function n(t){"@babel/helpers - typeof";return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(t,"__esModule",{value:!0}),t.SnowBoard=void 0;var i=e("./Vehicle"),o=(e("curvature/base/Tag"),e("../behavior/SkidDust"));function a(t,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,(o=i.key,void 0,"symbol"===n(a=function(t,e){if("object"!==n(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var i=r.call(t,e||"default");if("object"!==n(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(o,"string"))?a:String(a)),i)}var o,a}function s(){return(s="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=u(t)););return t}(t,e);if(n){var i=Object.getOwnPropertyDescriptor(n,e);return i.get?i.get.call(arguments.length<3?t:r):i.value}}).apply(this,arguments)}function c(t,e){return(c=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function l(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,i=u(t);if(e){var o=u(this).constructor;r=Reflect.construct(i,arguments,o)}else r=i.apply(this,arguments);return function(t,e){if(e&&("object"===n(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function u(t){return(u=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}let f=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&c(t,e)}(p,i.Vehicle);var e,r,n,f=l(p);function p(){var t;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,p);for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];return(t=f.call(this,...r)).behaviors.add(new o.SkidDust("particle-dust")),t.args.type="actor-item actor-snow-board",t.args.width=24,t.args.height=32,t.removeTimer=null,t.args.gSpeedMax=15,t.args.decel=.25,t.args.accel=.75,t.args.gravity=.75,t.args.seatHeight=1,t.args.skidTraction=.5,t.args.jumpForce=9.5,t.dustCount=0,t.args.particleScale=2,t.args.started=!1,t.ridingAnimation="grinding",t.dustDist=-16,t.dustFreq=1,t.broad=!0,t.slowSpin=!0,t.addEventListener("jump",e=>{t.args.groundAngle+=.125*Math.PI*Math.sign(t.args.gSpeed||t.args.direction)}),t}return e=p,(r=[{key:"update",value:function(){this.originalSpeed=this.args.gSpeed||this.args.xSpeed,s(u(p.prototype),"update",this).call(this),this.occupant&&(this.args.z=this.occupant.args.z-1),0===this.args.gSpeed&&0===this.args.xSpeed||(this.sprite.classList.add("moving"),this.args.started=!0)}},{key:"solid",get:function(){return!this.occupant}}])&&a(e.prototype,r),n&&a(e,n),Object.defineProperty(e,"prototype",{writable:!1}),p}();t.SnowBoard=f}),require.register("actor/Sonic.js",function(t,e,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Sonic=void 0;var n=e("./PointActor"),i=e("../behavior/Platformer"),o=e("../audio/Sfx"),a=e("curvature/base/Tag"),s=e("curvature/base/View"),c=(e("../effects/Twist"),e("../effects/Pinch"),e("../sprite/Png")),l=e("./Ring"),u=e("./Spring"),f=(e("../powerups/FireSheild"),e("../powerups/BubbleSheild"),e("../powerups/ElectricSheild"),e("../region/GrindingRegion")),p=e("./Marker"),h=e("../behavior/SkidDust"),g=e("../behavior/SuperForm"),d=e("../behavior/EmeraldHalo"),y=e("../lib/Color");e("curvature/base/Router");function b(t){"@babel/helpers - typeof";return(b="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function v(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,x(n.key),n)}}function m(){return(m="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=j(t)););return t}(t,e);if(n){var i=Object.getOwnPropertyDescriptor(n,e);return i.get?i.get.call(arguments.length<3?t:r):i.value}}).apply(this,arguments)}function w(t,e){return(w=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function S(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=j(t);if(e){var i=j(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===b(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return O(t)}(this,r)}}function O(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function j(t){return(j=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function x(t){var e=function(t,e){if("object"!==b(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==b(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===b(e)?e:String(e)}let P=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&w(t,e)}(_,n.PointActor);var r,b,P,k=S(_);function _(){var t,r,n,i;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,_);for(var o=arguments.length,a=new Array(o),l=0;l<o;l++)a[l]=arguments[l];return t=k.call(this,...a),r=O(t),n="png",i=new c.Png("/Sonic/sonic.png"),(n=x(n))in r?Object.defineProperty(r,n,{value:i,enumerable:!0,configurable:!0,writable:!0}):r[n]=i,window.sonic=O(t),t.behaviors.add(new h.SkidDust),t.behaviors.add(new g.SuperForm),t.behaviors.add(new d.EmeraldHalo),t.args.canonical="Sonic",t.args.type="actor-sonic actor-item",t.accelNormal=.15,t.accelSuper=.24,t.markers=new Set,t.springing=!1,t.args.boltCount=0,t.args.accel=t.accelNormal,t.args.decel=.4,t.gSpeedMaxNormal=18,t.gSpeedMaxSuper=20,t.gSpeedMaxHyper=23,t.jumpForceNormal=11,t.jumpForceSuper=13,t.jumpForceHyper=15,t.args.gSpeedMax=t.gSpeedMaxNormal,t.args.jumpForce=t.jumpForceNormal,t.args.gravity=.5,t.args.width=16,t.args.height=40,t.args.normalHeight=40,t.args.rollingHeight=28,t.sparks=new Set,t.spindashCharge=0,t.dropDashCharge=0,t.willStick=!1,t.stayStuck=!1,t.lightDashed=!0,t.dashed=!1,t.airControlCard=s.View.from(e("../cards/sonic-air-controls.html")),t.controlCard=s.View.from(e("../cards/sonic-controls.html")),t.moveCard=s.View.from(e("../cards/basic-moves.html")),t.args.spriteSheet=t.spriteSheet="/Sonic/sonic.png",t.hyperSheet=0,t.costumes={Santiago:{h:-30,s:1.5,v:1.25},Sequel:{h:-10,s:1.5,v:1.25},White:{h:0,s:0,v:1.25},RedHot:{h:115,s:1.75,v:1},Brown:{h:125,s:1.15,v:.5}},t.args.bindTo("falling",e=>{e||(!t.willStick||1!==t.args.mode&&3!==t.args.mode?t.onNextFrame(()=>{t.args.wallSticking=!1}):(t.args.wallSticking=!0,t.onNextFrame(()=>{t.dashed=!1})))}),t.transformTime=0,t.args.minRingsSuper=50,t.args.minRingsHyper=75,t}return r=_,(b=[{key:"shiftColor",value:function(t,e,r,n){return new y.Color(t).rotate(e,r,n)}},{key:"onRendered",value:function(t){m(j(_.prototype),"onRendered",this).call(this,t);const e={"8080e0":"e0e080","6060c0":"e0e000","4040a0":"e0e001",202080:"a0a000"},r={"8080e0":"fcfcfc","6060c0":"fcfcfc","4040a0":"fcd8d8",202080:"fcb4b4"},n={"8080e0":"fcfcfc","6060c0":"fcfcfc","4040a0":"fcd8fc",202080:"d8b4d8"},i={"8080e0":"d8fcfc","6060c0":"fcfcfc","4040a0":"b4d8fc",202080:"90b4fc"},o={"8080e0":"d8d8ff","6060c0":"b4b4d8","4040a0":"a4a4d8",202080:"6c6cb4"},s={"8080e0":"d8fcfc","6060c0":"d8fcd8","4040a0":"b4fcb4",202080:"00fc24"},c={"8080e0":"d8fcfc","6060c0":"d8fcb4","4040a0":"d8fc48",202080:"d8d800"},l={"8080e0":"ffffff","6060c0":"fcfcfc","4040a0":"d8d8d8",202080:"b4b4b4"};this.rotatedSpriteSheet=this.spriteSheet;const u=()=>{var t,e,r;let n=Number(null!==(t=this.viewport.customColor.h)&&void 0!==t?t:0),i=Number(null!==(e=this.viewport.customColor.s)&&void 0!==e?e:1),o=Number(null!==(r=this.viewport.customColor.v)&&void 0!==r?r:1);this.rotateMainColor(n,i,o),this.box.node.style.setProperty("--sprite-sheet",`url(${this.args.rotatedSpriteSheet})`)},f=this.viewport.customColor.bindTo("h",u,{wait:0}),p=this.viewport.customColor.bindTo("s",u,{wait:0}),h=this.viewport.customColor.bindTo("v",u,{wait:0});if(this.onRemove(f),this.onRemove(p),this.onRemove(h),this.viewport.args.networked)if(this.args.netplayer){const t="Santiago";Object.assign(this.viewport.customColor,this.costumes[t])}else{const t="Sequel";Object.assign(this.viewport.customColor,this.costumes[t])}else this.viewport.args.mainPallet&&this.costumes[this.viewport.args.mainPallet]&&Object.assign(this.viewport.customColor,this.costumes[this.viewport.args.mainPallet]);this.superSpriteSheetLoader||(this.superSpriteSheetLoader=this.png.ready.then(()=>{const t=this.png.recolor(e);this.superSpriteSheet=t.toUrl()})),this.hyperSpriteSheetLoader||(this.hyperSpriteSheetLoader=this.png.ready.then(()=>this.hyperSpriteSheets=[this.png.recolor(r).toUrl(),this.png.recolor(i).toUrl(),this.png.recolor(n).toUrl(),this.png.recolor(l).toUrl(),this.png.recolor(s).toUrl(),this.png.recolor(o).toUrl(),this.png.recolor(c).toUrl()])),this.arm||(this.arm=new a.Tag('<div class = "rear-arm">'),this.box.appendChild(this.arm.node)),this.swoosh||(this.swoosh=new a.Tag('<div class = "double-spin">'),this.box.appendChild(this.swoosh.node)),this.autoAttr.get(this.box)["data-doublespin"]="doubleSpin"}},{key:"updateStart",value:function(){this.args.grinding&&this.args.falling&&this.args.ySpeed>0&&(this.args.animation="airdash",this.args.grinding=!1),m(j(_.prototype),"updateStart",this).call(this),this.args.dead&&(this.args.animation="dead")}},{key:"updateEnd",value:function(){!this.args.falling&&this.pinchFilterBg&&this.pinch(0,0),m(j(_.prototype),"updateEnd",this).call(this)}},{key:"update",value:function(){if(this.args.falling&&this.isHyper&&this.dashed&&this.yAxis<-.5&&(this.args.ySpeed-=.6),(!this.args.falling&&this.groundTime>3||this.args.falling&&this.fallTime>90)&&(this.args.trickRamp=!1,this.args.twistRamp=!1),this.args.dead)return this.args.animation="dead",void m(j(_.prototype),"update",this).call(this);if(this.isSuper){const t=this.isHyper?30:60;this.viewport.args.frameId%t==0&&(this.args.rings<2&&(this.isHyper=!1,this.setProfile()),this.args.rings>0?this.args.rings--:(this.isSuper=!1,this.isHyper=!1,this.setProfile()))}this.args.isSuper=this.isSuper,this.args.isHyper=this.isHyper,this.isHyper&&this.viewport.args.frameId%45==0&&(this.args.spriteSheet=this.hyperSpriteSheets[this.hyperSheet++],this.hyperSheet>=this.hyperSpriteSheets.length&&(this.hyperSheet=0)),this.args.falling?(this.args.wallSticking&&!this.dashed&&(1===this.args.mode?(this.args.direction=-1,this.args.facing="left"):3===this.args.mode&&(this.args.direction=1,this.args.facing="right"),this.args.animation="wall-dropping-start",this.onTimeout(150,()=>{this.args.falling&&this.args.wallDropping&&(this.args.animation="wall-dropping")}),this.args.wallDropping=!0,this.args.groundAngle=0,this.args.ignore=30),this.args.wallDropping&&(this.args.groundAngle=0),"hanging"===this.args.animation&&this.args.ySpeed>-3&&(this.args.animation="wall-dropping"),this.args.wallSticking=!1):(this.args.wallDropping=!1,this.swing=!1,this.springing&&(this.args.groundAngle=0),this.springing=!1,this.args.doubleSpin=this.dashed=!1,this.args.mode%2==0&&(this.args.wallSticking=!1),this.args.wallSticking||(this.willStick=!1)),this.lightDashingCoolDown>0&&this.lightDashingCoolDown--,this.dashTimer>0&&this.dashTimer--;const t=this.args.falling;if(t&&(this.args.cameraBias=0),this.args.wallSticking){this.args.animation="wall-stick";let t=3;this.yAxis<0?(this.args.animation="wall-stick-brake",this.stayStuck=!0,t=0):this.yAxis>0&&(t=6),this.args.modeTime<15&&(t=0),1===this.args.mode?(this.args.facing="left",this.args.direction=1,Math.abs(this.args.gSpeed)<t?this.args.gSpeed+=1:this.args.gSpeed=t):3===this.args.mode&&(this.args.facing="right",this.args.direction=-1,Math.abs(this.args.gSpeed)<t?this.args.gSpeed-=1:this.args.gSpeed=-t);const e=Math.ceil(this.args.width/2),r=Math.sign(this.args.gSpeed),n=this.rotatePoint(e*-r,this.args.height);this.getMapSolidAt(this.x+n[0],this.y+n[1])&&this.bMap("doJump",0)}else if(this.lightDashing){const e=Math.sign(this.args.xSpeed)||Math.sign(this.args.gSpeed);e<0?this.args.animation="lightdash-back":e>0&&(this.args.animation="lightdash"),t&&(this.args.direction=Math.sign(this.args.xSpeed)||this.args.direction,this.args.mode=0)}else if(t)this.dashed?t&&!this.args.jumping&&this.isSuper&&this.args.ySpeed>0&&(this.args.animation="dropping",this.onTimeout(150,()=>{this.args.falling&&(this.args.animation="dropping")})):(this.args.height=this.args.rollingHeight,this.args.jumping?this.args.animation="jumping":!this.args.xSpeed&&this.args.ySpeed);else{const t=this.gSpeedMaxNormal/(this.isSuper?2:1),e=this.getLocalFriction(),r=this.args.direction,n=this.args.gSpeed,i=Math.abs(n)/Math.pow(e,2);this.args.gSpeedMax;if(this.dashed=!1,this.lightDashed=!1,this.lightDashReward=null,this.args.height=this.args.normalHeight,this.spindashCharge)if(this.spindashCharge<1)this.spindashCharge=0;else{this.args.animation="spindash",this.spindashCharge-=.2,this.dashDust&&this.dashDust.style({"--dashCharge":this.spindashCharge});let t=this.spindashCharge/20;t>1&&(t=1),this.twist(120*t*this.args.direction)}else if(!this.args.rolling)if(this.args.crouching=!1,e>.5&&Math.sign(r)&&Math.sign(n)&&Math.sign(n)!==Math.sign(r)&&!this.args.antiSkid)this.args.animation="skidding";else if(this.args.moving&&i>.75*t)this.xAxis||e>=.5?this.isSuper&&this.args.moving&&i>1.85*t?this.args.animation="super-run":this.args.moving&&i>2.25*t?this.args.animation="running-4":this.args.moving&&i>1.75*t?this.args.animation="running-3":this.args.moving&&i>1.25*t?this.args.animation="running-2":this.args.animation="running":this.args.animation="sliding";else if(this.args.moving&&this.args.gSpeed)this.xAxis||e>.5?this.args.animation="walking":this.args.animation="sliding";else if(this.xAxis&&0===e)this.args.animation="running",this.args.facing=-1===this.xAxis?"left":"right";else if(this.args.moving&&this.args.gSpeed)this.args.pushing=Math.sign(this.args.gSpeed);else if(this.yAxis>.5&&!this.args.ignore&&!this.carrying.size)this.args.animation="crouching",this.args.crouching=!0,this.args.lookTime--,this.args.lookTime<-45&&(this.args.cameraBias=-.5);else if(this.yAxis&&this.yAxis<-.5&&!this.args.ignore)this.args.animation="looking-up",this.args.lookTime++,this.args.lookTime>45&&(this.args.cameraBias=.25);else{const t=this.viewport.meta.fieldType;this.args.teeter?(this.args.animation="teeter",-1===this.args.teeter&&(this.args.animation="teeter--1"),2===this.args.teeter&&(this.args.animation="teeter-2")):"garden"===t||"adventure"===t?this.args.animation="standing":this.idleTime>18e3?this.args.animation="idle-3":this.idleTime>250?this.args.animation="idle-2":this.idleTime>200?this.args.animation="idle":this.args.animation="standing",this.args.cameraBias=0,this.args.lookTime=0}!this.spindashCharge&&this.dashDust&&(this.dashDust.remove(),this.dashDust=null),this.dropDashCharge&&(this.args.animation="spindash",this.args.rolling=!0)}if(t&&"standing"===this.args.animation&&(this.args.animation="walking"),"skidding"===this.args.animation&&this.fallTime>16&&(Math.abs(this.args.groundAngle)>Math.PI/2?this.args.animation="walking":this.args.animation="skidding-falling"),this.args.hangingFrom?this.args.animation="hanging":this.swing&&(this.args.animation="jumping"),this.args.rolling&&("spindash"!==this.args.animation?this.args.animation="rolling":(this.viewport.onFrameOut(14,()=>this.args.animation="rolling"),this.args.animation="spindash")),!this.skidding||this.args.rolling||this.args.falling||this.spindashCharge)this.spindashCharge||this.twister&&(this.twister.args.scale=0);else{this.args.xOff=8*-this.args.direction,this.args.yOff=32;let t=22*-this.args.gSpeed;Math.abs(t)>256&&(t=256*Math.sign(t)),this.twist(t)}if(this.args.standingOn&&this.args.standingOn.isVehicle&&(this.args.animation=this.args.standingOn.ridingAnimation||"standing"),this.viewport.args.frameId%this.viewport.settings.frameSkip==0&&this.args.grinding&&!this.args.falling){const t=document.createElement("div");t.classList.add("particle-sparks");const e=new a.Tag(t),r=document.createElement("div");r.classList.add("envelope-sparks");const n=new a.Tag(r);n.appendChild(e.node);const i=this.rotatePoint(1.75*-this.args.gSpeed*this.args.direction,8),o=Math.sign(this.args.gSpeed);n.style({"--x":i[0]+this.args.x,"--y":i[1]+this.args.y+-3*Math.random(),"z-index":0,"animation-delay":.25*-Math.random()+"s","--xMomentum":Math.max(Math.abs(this.args.gSpeed),4)*o,"--flip":o,"--angle":this.realAngle,opacity:2*Math.random()}),n.particle=e,this.viewport.particles.add(n),this.sparks.add(n);const s=this.viewport;this.viewport.onFrameOut(30,()=>{s.particles.remove(n),this.sparks.delete(n)})}if(this.pincherBg&&(this.pincherBg.args.scale*=.85,Math.abs(this.pincherBg.args.scale)),this.twister||this.twist(0),this.args.grinding&&(this.args.rolling=!1,this.yAxis>.5?this.args.animation="grinding-crouching":this.args.animation="grinding"),m(j(_.prototype),"update",this).call(this),!this.yAxis&&this.spindashCharge&&this.spindash(),this.args.falling&&this.springing&&this.args.ySpeed>=0&&(this.args.groundAngle=0,this.args.animation="dropping-start",this.springing=!1,this.onTimeout(150,()=>{this.args.falling&&"dropping-start"===this.args.animation&&(this.args.animation="dropping")})),this.args.boltDash){this.dimmer=this.dimmer||new a.Tag('<div class = "particle particle-dimmer">');const t=new a.Tag('<div class = "particle particle-bolt">'),e=this.args.falling?this.args.airSpeed:this.args.gSpeed,r=this.rotatePoint(e<0?8:-8,this.args.falling?this.dashed?e<0?28:32:14:28);this.dimmer.style({"--x":this.args.x+r[0],"--y":this.args.y+r[1]}),this.args.boltCount++;const n=Math.sign(this.args.gSpeed||this.args.xSpeed);t.attr({"data-direction":n}),t.style({"--x":this.args.x+r[0],"--y":this.args.y+r[1],"--index":this.args.boltCount,"--direction":n,"--mod":this.viewport.args.frameId%4,"--wipe":Math.abs(e),"--angle":this.args.falling?this.args.airAngle:this.realAngle,"--dashCharge":0}),this.viewport.particles.add(t),Math.abs(e)<20&&this.args.falling&&(this.args.boltDash=!1),this.viewport.particles.add(this.dimmer),this.viewport.onFrameOut(30,()=>{this.viewport.particles.remove(t)})}if([...this.regions].filter(t=>t.isWater).length&&!this.bMap("checkBelow",this.args.x,this.args.y+16).get(i.Platformer)&&this.args.falling&&this.dashed&&(this.yAxis<0&&(this.args.xSpeed=.95*this.args.xSpeed,this.args.ySpeed-=.05*Math.abs(this.args.xSpeed)),this.yAxis>0&&(this.args.xSpeed+=.05*Math.abs(this.args.ySpeed)*Math.sign(this.args.xSpeed),this.args.ySpeed=.95*this.args.ySpeed)),this.viewport.args.frameId%this.viewport.settings.frameSkip==0&&this.args.grinding&&!this.args.falling&&this.args.gSpeed)for(const t of this.sparks){const e=this.rotatePoint(1.75*this.args.direction,8);t.style({opacity:2*Math.random(),"--x":e[0]+this.x,"--y":e[1]+this.y})}if(Math.abs(this.ySpeedLast)>16){const t=Math.min(8,this.ySpeedLast/3)*(this.args.rolling?.5:1);this.groundTime&&this.groundTime>2&&this.groundTime<t&&this.ySpeedLast&&(this.args.animation="landing")}this.args.sliding&&(this.args.animation="sliding"),this.args.trickRamp&&(this.args.animation="adventure-pose"),this.args.twistRamp&&(this.args.animation="side-flip")}},{key:"readInput",value:function(){this.lightDashing||m(j(_.prototype),"readInput",this).call(this)}},{key:"airDash",value:function(t){if(this.args.stuck||this.carrying.size)return;if(this.dashed||this.args.ignore&&-2!==this.args.ignore)return;let e=t*(this.isSuper||this.isHyper?13:8);this.args.wallSticking&&(this.args.x+=e,e=t*(this.isSuper||this.isHyper?18:9)),this.args.mode=0,this.args.float=2,this.args.rolling=!1,this.args.height=this.args.normalHeight,this.args.xSpeed&&Math.sign(this.args.xSpeed)!==Math.sign(t)&&(e=t*Math.abs(e),this.args.float=4,this.args.xSpeed=0),this.args.falling=!0,this.args.mercy&&(e*=.75);const r=this.args.xSpeed+e;this.args.animation="rolling",this.viewport.onFrameOut(3,()=>this.args.animation="airdash"),this.args.xSpeed=r,this.args.ySpeed=0,this.args.gSpeed=0,this.dashTimer=0,this.dashed=!0,this.args.mode=0,this.args.groundAngle=0}},{key:"command_0",value:function(){if(this.args.crouching&&!this.args.rolling&&this.yAxis){this.spindashCharge+=10;let t=this.spindashCharge/20;return t>1&&(t=1),this.args.xOff=5*-this.args.direction,this.args.yOff=32,this.twist(120*t*this.args.direction),this.dashDust?this.dashDust&&this.dashDust.style({"--dashCharge":this.spindashCharge}):this.showDashDust(),void(this.willJump=!1)}if(this.dropDashCharge=0,this.args.jumping&&!this.args.wasHanging&&!this.dashed&&(!this.args.doubleSpin||2===this.args.doubleSpin)&&(!this.args.currentSheild||"normal"===this.args.currentSheild.type||"super"===this.args.currentSheild.type)){this.args.mercy<120&&(this.args.mercy=0),this.args.doubleSpin=!0,this.args.xOff=0,this.args.yOff=32,this.viewport.onFrameOut(5,()=>this.pinch(-600,50));const t=new p.Marker({x:this.args.x,y:this.args.y});t.owner=this,this.markers.add(t),this.viewport.spawn.add({object:t});const e=this.args.bindTo("x",(e,r)=>t.args[r]=e),r=this.args.bindTo("y",(e,r)=>t.args[r]=e+18);this.viewport.onFrameOut(25,()=>{this.viewport.actors.remove(t),e(),r()})}m(j(_.prototype),"command_0",this).call(this)}},{key:"command_4",value:function(){this.args.ignore||this.args.falling&&(this.airDash(-1),this.willStick=2,this.stayStuck=!0)}},{key:"hold_4",value:function(t){this.args.ignore||(this.args.jumping||this.dashed)&&(this.dropDashCharge=0,this.willStick=2,this.stayStuck=!0)}},{key:"release_4",value:function(){if(this.onNextFrame(()=>{this.willStick=!1,this.stayStuck=!1}),this.args.wallSticking&&!this.dashed){this.args.falling=!0,this.args.ySpeed>128||(this.args.ySpeed=0);const t=this.args.mode;this.airDash(1===t?1:-1),this.args.facing=1===t?"left":"right",this.args.mode=0,this.dashed=!0}}},{key:"command_5",value:function(){this.args.ignore||this.args.falling&&(this.airDash(1),this.willStick=2,this.stayStuck=!0)}},{key:"hold_5",value:function(t){this.args.ignore||(this.args.jumping||this.dashed&&2!==this.args.mode)&&(this.dropDashCharge=0,this.willStick=2,this.stayStuck=!0)}},{key:"release_5",value:function(){if(this.onNextFrame(()=>{this.willStick=!1,this.stayStuck=!1}),this.args.wallSticking&&!this.dashed){this.args.falling=!0,this.args.ySpeed=0;const t=this.args.mode;this.airDash(1===t?1:-1),this.args.facing=1===t?"left":"right",this.args.mode=0,this.dashed=!0}}},{key:"command_1",value:function(){if(!this.args.ignore&&(this.args.wallSticking&&(this.args.x+=this.args.width/2*(1===this.args.mode?1:-1),this.bMap("doJump",0)),this.args.gSpeed&&!this.args.falling&&!this.args.rolling&&Math.sign(this.args.gSpeed)===this.args.direction)){this.args.rolling=!0;const t=()=>{const e=[this.args.width/2,this.args.height+4];if(this.getMapSolidAt(this.x-e[0],this.y-e[1]))return this.viewport.onFrameOut(10,t),this.args.gSpeed=this.args.gSpeed||4*this.args.direction||4,void(this.args.rolling=!0);this.args.rolling=!1};this.viewport.onFrameOut(20,t)}}},{key:"release_1",value:function(){this.dropDashCharge=0,this.spindashCharge&&(this.yAxis||(this.args.crouching=!1))}},{key:"spindash",value:function(){this.spindashCharge<5&&(this.args.modeTime<45||this.args.skidding)&&(this.spindashCharge=15);const t="left"===this.args.facing?-1:1;let e=this.spindashCharge/40;e>1&&(e=1),this.args.rolling=!0;const r=32*e;this.castRayQuick(r*Math.sign(t),[Math.PI,0,0][1+Math.sign(t)],[0,this.args.height/2]),Math.sign(t)!==Math.sign(this.args.gSpeed)?this.args.gSpeed=r*Math.sign(t):this.args.gSpeed+=r*Math.sign(t),this.args.ignore=1,this.args.rolling=!0,this.spindashCharge=0,this.dashDust&&this.dashDust.remove()}},{key:"hold_1",value:function(t){if(this.args.mercy)return;if(this.carrying.size)return;if(this.yAxis=this.yAxis||1,this.args.ignore||this.args.rolling)return;if(this.args.jumping&&this.dropDashCharge<15)return void this.dropDashCharge++;if(0===this.args.modeTime)return;if(this.dropDashCharge)return;if(this.args.falling||this.willJump||this.args.gSpeed&&!this.skidding)return void(this.skidding||(this.spindashCharge=0));if(!this.spindashCharge&&t.time>6)return;this.args.ignore=1;let e=this.spindashCharge/20;e>1&&(e=1),this.spindashCharge=this.spindashCharge||1,this.yAxis>.5&&(this.spindashCharge=this.spindashCharge||10),this.args.crouching=!0,this.dashDust?this.dashDust&&this.dashDust.style({"--dashCharge":this.spindashCharge}):this.showDashDust(),this.spindashCharge++,this.args.xOff=5*-this.args.direction,this.args.yOff=32,this.twist(120*e*this.args.direction),this.args.animation="spindash",this.args.direction<0?this.args.facing="left":this.args.direction>0&&(this.args.facing="right")}},{key:"showDashDust",value:function(){const t=this.viewport,e=new a.Tag('<div class = "particle-spindash-dust">'),r=this.rotatePoint(0,0);e.style({"--x":r[0]+this.args.x,"--y":r[1]+this.args.y,"--direction":this.args.direction,"--dashCharge":this.spindashCharge}),e.setAttribute("data-facing",this.args.facing),t.particles.add(e),this.dashDust=e}},{key:"hold_2",value:function(){if(this.args.stuck||!this.args.falling)return;if(this.lightDashing)return;if(this.lightDashingCoolDown>0)return;const t=this.findDashableRing(48);return t?(this.lightDash(t),void(this.lightDashingCoolDown=9)):void 0}},{key:"command_2",value:function(){if(this.viewport.collisions.has(this)){const t=this.viewport.collisions.get(this);for(const e of t.keys())this.carrying.size&&!this.carrying.has(e)||"function"==typeof e.lift&&e.lift(this)}this.onNextFrame(()=>{const t=this.args.falling?this.args.airSpeed:this.args.gSpeed;if(this.isSuper&&!this.lightDashing&&!this.args.boltDash&&Math.abs(t)>6){const t=this.args.xSpeed,e=this.args.ySpeed,r=this.args.gSpeed;this.args.falling?(this.args.xSpeed=Math.max(-64,Math.min(this.args.xSpeed,64)),this.args.ySpeed=Math.max(-64,Math.min(this.args.ySpeed,64)),this.args.float=5,this.args.xSpeed*=5,this.args.ySpeed*=5):(this.args.gSpeed*=3,this.args.gSpeed=Math.max(-128,Math.min(this.args.gSpeed,128))),this.args.boltCount=0,this.args.boltDash=!0,o.Sfx.play("LIGTNING_STRIKE"),this.args.opacity=0,this.viewport.onFrameOut(35,()=>{this.args.opacity=1,this.args.boltDash=!1,this.args.xSpeed=this.args.xSpeed?t:0,this.args.ySpeed=this.args.ySpeed?e:0,this.args.gSpeed=this.args.gSpeed?r:0,this.dimmer&&this.viewport.particles.remove(this.dimmer),this.dimmer=!1})}})}},{key:"release_2",value:function(){this.args.boltDash&&(this.args.opacity=1,this.args.boltDash=!1,this.args.xSpeed/=2,this.args.ySpeed/=2,this.args.gSpeed/=3,this.dimmer&&this.viewport.particles.remove(this.dimmer),this.dimmer=!1)}},{key:"command_3",value:function(){}},{key:"setProfile",value:function(){this.isHyper?(this.args.spriteSheet=this.superSpriteSheet,this.args.gSpeedMax=this.gSpeedMaxHyper,this.args.jumpForce=this.jumpForceHyper,this.args.accel=this.accelSuper):this.isSuper?(this.args.spriteSheet=this.superSpriteSheet,this.args.gSpeedMax=this.gSpeedMaxSuper,this.args.jumpForce=this.jumpForceSuper,this.args.accel=this.accelSuper):(this.args.spriteSheet=this.rotatedSpriteSheet,this.args.gSpeedMax=this.gSpeedMaxNormal,this.args.jumpForce=this.jumpForceNormal,this.args.accel=this.accelNormal)}},{key:"findNearestRing",value:function(){return this.findDashableRing(64)}},{key:"findDashableRing",value:function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:128;const e=t=>{if(!(t instanceof l.Ring))return!1;const e=Math.sign(this.args.xSpeed);return!(e>0&&t.x<this.x)&&!(e<0&&t.x>this.x)},r=this.findNearestActor(e,t);if(!r)return;const n=r.findNearestActor(e,t);if(!n)return;const i=Math.atan2(this.y-r.y,this.x-r.x),o=Math.atan2(r.y-n.y,r.x-n.x);return Math.abs(i-o)>Math.PI/2?void 0:r}},{key:"lightDash",value:function(t){if(!this.args.falling)return this.lightDashing=!1,!1;let e;this.args.popChain.length&&(this.lightDashReward?this.lightDashReward.points+=10:(this.lightDashReward={label:"lightdash",points:10,multiplier:1},this.args.popChain.push(this.lightDashReward))),this.lightDashed=!0,this.spindashCharge=0;let r=Math.atan2(t.y-this.y+8,t.x-this.x);e=this.args.groundAngle;const n=Math.abs(e-r);let i=4*this.distanceFrom(t)*(Math.PI/2/n);i>55&&(i=55);Math.sign(this.args.xSpeed)||Math.sign(this.args.gSpeed);this.args.direction<0?this.args.animation="lightdash-back":this.args.direction>0&&(this.args.animation="lightdash");Math.PI;this.lightDashing=!0,this.args.xSpeed=i*Math.cos(r)*.5,this.args.ySpeed=i*Math.sin(r)*.5,this.lightDashTimeout()}},{key:"collect",value:function(t){if(m(j(_.prototype),"collect",this).call(this,t),t instanceof l.Ring&&this.lightDashing){const t=this.findNearestActor(t=>t instanceof l.Ring,128);t?this.lightDash(t):(this.lightDashing=!1,this.args.float=0)}}},{key:"lightDashTimeout",value:function(){this.clearLightDash&&(this.clearLightDash(),this.clearLightDash=!1),this.clearLightDash=this.viewport.onFrameOut(9,()=>{this.lightDashing=!1,this.args.float=0})}},{key:"setCameraMode",value:function(){if(!this.args.falling&&this.regions)for(const t of this.regions)if(t.args.perspective)return void(this.args.cameraMode="perspective");this.args.boltDash?this.args.cameraMode="draggable":this.args.wallSticking?"panning"!==this.args.cameraMode&&("popping"!==this.args.cameraMode||Math.abs(this.args.ySpeed)<Math.abs(this.args.xSpeed))&&(this.args.cameraMode="aerial"):m(j(_.prototype),"setCameraMode",this).call(this)}},{key:"startle",value:function(t){m(j(_.prototype),"startle",this).call(this,t),this.onNextFrame(()=>this.args.animation="startle")}},{key:"die",value:function(){m(j(_.prototype),"die",this).call(this),this.onNextFrame(()=>this.args.animation="dead"),this.pinch(0,0),this.twist(0),o.Sfx.play("PLAYER_DAMAGED")}},{key:"loseRings",value:function(t,e){m(j(_.prototype),"loseRings",this).call(this,t,e),o.Sfx.play("RINGS_SCATTERED")}},{key:"collideA",value:function(t){t instanceof u.Spring&&this.onNextFrame(()=>{this.args.falling&&(this.springing=!0,this.args.animation="springdash")}),t.pop&&this.isHyper&&t.pop(this)}},{key:"solid",get:function(){return!1}},{key:"canRoll",get:function(){return!this.args.wallSticking}},{key:"isEffect",get:function(){return!1}},{key:"controllable",get:function(){return!this.args.npc}},{key:"facePoint",get:function(){return this.args.wallSticking?this.rotatePoint(0,-5):m(j(_.prototype),"facePoint",this)}},{key:"crossRegionBoundary",value:function(t,e){if(t instanceof f.GrindingRegion&&!e){for(const e of this.regions)if(e!==t&&e instanceof f.GrindingRegion)return;this.args.wasGrinding&&this.args.falling?this.args.animation="springdash":this.args.grinding=!1}m(j(_.prototype),"crossRegionBoundary",this).call(this,t,e)}},{key:"rotateMainColor",value:function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;const n={"8080e0":new y.Color("8080e0").rotate(t,e,r).toString(),"6060c0":new y.Color("6060c0").rotate(t,e,r).toString(),"4040a0":new y.Color("4040a0").rotate(t,e,r).toString(),202080:new y.Color("202080").rotate(t,e,r).toString()};this.png.ready.then(()=>{const t=this.png.recolor(n);this.args.rotatedSpriteSheet=this.rotatedSpriteSheet=this.args.spriteSheet=this.spriteSheet=t.toUrl()})}}])&&v(r.prototype,b),P&&v(r,P),Object.defineProperty(r,"prototype",{writable:!1}),_}();t.Sonic=P}),require.register("actor/Sparkle.js",function(t,e,r){"use strict";function n(t){"@babel/helpers - typeof";return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(t,"__esModule",{value:!0}),t.Sparkle=void 0;var i=e("curvature/base/Mixin"),o=e("curvature/base/Tag"),a=(e("./Flickie"),e("./PointActor")),s=(e("../behavior/SkidDust"),e("../mixin/CanPop")),c=(e("../actor/Explosion"),e("../actor/Projectile"));function l(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,i,o,a,s=[],c=!0,l=!1;try{if(o=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=o.call(r)).done)&&(s.push(n.value),s.length!==e);c=!0);}catch(t){l=!0,i=t}finally{try{if(!c&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(l)throw i}}return s}}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return u(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return u(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function u(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function f(t,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,(o=i.key,void 0,"symbol"===n(a=function(t,e){if("object"!==n(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var i=r.call(t,e||"default");if("object"!==n(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(o,"string"))?a:String(a)),i)}var o,a}function p(){return(p="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=d(t)););return t}(t,e);if(n){var i=Object.getOwnPropertyDescriptor(n,e);return i.get?i.get.call(arguments.length<3?t:r):i.value}}).apply(this,arguments)}function h(t,e){return(h=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function g(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,i=d(t);if(e){var o=d(this).constructor;r=Reflect.construct(i,arguments,o)}else r=i.apply(this,arguments);return function(t,e){if(e&&("object"===n(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function d(t){return(d=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}let y=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&h(t,e)}(y,i.Mixin.from(a.PointActor,s.CanPop));var e,r,n,u=g(y);function y(){var t,e;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,y);for(var r=arguments.length,n=new Array(r),i=0;i<r;i++)n[i]=arguments[i];return(e=u.call(this,...n)).args.type="actor-item actor-sparkle",e.args.animation="standing",e.args.width=24,e.args.height=24,e.willStick=!0,e.stayStuck=!0,e.args.float=-1,e.args.static=!0,e.args.invincible=!0,e.args.offset=null!==(t=e.args.offset)&&void 0!==t?t:0,e}return e=y,(r=[{key:"collideA",value:function(t,e){if(t instanceof c.Projectile)return!1;p(d(y.prototype),"collideA",this).call(this,t,e)}},{key:"update",value:function(){if(!this.viewport)return;const t=this.viewport;this.lightning||(this.lightning=new o.Tag('<div class = "particle-sparkle-lightning">'),t.particles.add(this.lightning),this.lightning.style({"--x":this.args.x,"--y":this.args.y+-64}));const e=t.args.frameId+-this.args.offset;this.args.animation=e%180>150?"flicker-fast":e%180>120?"flicker":"standing";const r=0===this.args.mode?1:-1,n=-Math.PI/2*r;if(e%180>168){const e=this.castRayQuick(2048,n);this.args.invincible=!0,this.lightning.style({height:`${e-this.args.height}px`});const r=this.args.x+Math.round(Math.cos(n)*(e+-1)),o=this.args.y+Math.round(Math.sin(n)*(e+-1)),a=t.actorsAtLine(this.args.x,this.args.y,r,o);a.delete(this);for(const t of a){var i=l(t,2);const e=i[0];i[1];e.controllable&&(e.damage(this,"electric"),e.pop&&e.pop(this))}}else this.lightning.style({height:"0px"}),this.args.invincible=!1;if(e%180==0){const e=this.castRayQuick(2048,n);this.lightning.style({"--x":this.args.x,"--y":this.args.y+.5*-e+(2===this.args.mode?e:0)+r*this.args.height*.5});const i=this.args.x+Math.round(Math.cos(n)*(e+-1)),o=this.args.y+Math.round(Math.sin(n)*(e+-1));if(this.args.x=i,this.args.y=o,this.args.facing=r>0?"right":"left",this.args.mode=0===this.args.mode?2:0,this.vizi){const e=.25,n=new c.Projectile({owner:this,subType:"spark",damageType:"electric",gravity:0,ySpeed:e*r,xSpeed:-e,x:this.args.x,y:this.args.y}),i=new c.Projectile({owner:this,subType:"spark",damageType:"electric",gravity:0,ySpeed:e*r,xSpeed:e,x:this.args.x,y:this.args.y});t.spawn.add({object:n}),t.spawn.add({object:i})}}p(d(y.prototype),"update",this).call(this)}},{key:"effect",value:function(t){p(d(y.prototype),"effect",this).call(this,t)}},{key:"pop",value:function(t){const e=this.viewport;p(d(y.prototype),"pop",this).call(this,t),this.args.gone&&e.particles.remove(this.lightning)}},{key:"solid",get:function(){return!1}},{key:"isEffect",get:function(){return!1}}])&&f(e.prototype,r),n&&f(e,n),Object.defineProperty(e,"prototype",{writable:!1}),y}();t.Sparkle=y}),require.register("actor/Spawner.js",function(t,e,r){"use strict";function n(t){"@babel/helpers - typeof";return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(t,"__esModule",{value:!0}),t.Spawner=void 0;var i=e("./PointActor"),o=e("../ObjectPalette");function a(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,i,o,a,s=[],c=!0,l=!1;try{if(o=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=o.call(r)).done)&&(s.push(n.value),s.length!==e);c=!0);}catch(t){l=!0,i=t}finally{try{if(!c&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(l)throw i}}return s}}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return s(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return s(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function s(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function c(t,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,(o=i.key,void 0,"symbol"===n(a=function(t,e){if("object"!==n(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var i=r.call(t,e||"default");if("object"!==n(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(o,"string"))?a:String(a)),i)}var o,a}function l(t,e){return(l=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function u(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,i=f(t);if(e){var o=f(this).constructor;r=Reflect.construct(i,arguments,o)}else r=i.apply(this,arguments);return function(t,e){if(e&&("object"===n(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function f(t){return(f=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}let p=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&l(t,e)}(f,i.PointActor);var e,r,n,s=u(f);function f(){var t;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,f);for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];return(t=s.call(this,...r)).args.width=16,t.args.height=32,t.args.type="actor-item actor-spawner",t}return e=f,(r=[{key:"activate",value:function(){if(!this.args.spawn||!this.args.point)return;const t=this.viewport.objDefs.get(this.args.point),e=o.ObjectPalette[this.args.spawn];if(!t||!e)return;const r=new e({x:t.x,y:t.y});for(const t of this.def){var n=a(t,2);const e=n[0],i=n[1];"point"!==e&&"type"!==e&&(r.args[e]=i)}r.args[name]=this.args.spawn,this.viewport.spawn.add({object:r}),this.viewport.setColCell(r)}},{key:"solid",get:function(){return!1}}])&&c(e.prototype,r),n&&c(e,n),Object.defineProperty(e,"prototype",{writable:!1}),f}();t.Spawner=p}),require.register("actor/SpikeBomb.js",function(t,e,r){"use strict";function n(t){"@babel/helpers - typeof";return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(t,"__esModule",{value:!0}),t.SpikeBomb=void 0;var i=e("./PointActor"),o=e("../audio/Sfx"),a=(e("curvature/base/Tag"),e("./RedBomb"));function s(t,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,(o=i.key,void 0,"symbol"===n(a=function(t,e){if("object"!==n(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var i=r.call(t,e||"default");if("object"!==n(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(o,"string"))?a:String(a)),i)}var o,a}function c(){return(c="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=f(t)););return t}(t,e);if(n){var i=Object.getOwnPropertyDescriptor(n,e);return i.get?i.get.call(arguments.length<3?t:r):i.value}}).apply(this,arguments)}function l(t,e){return(l=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function u(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,i=f(t);if(e){var o=f(this).constructor;r=Reflect.construct(i,arguments,o)}else r=i.apply(this,arguments);return function(t,e){if(e&&("object"===n(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function f(t){return(f=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}let p=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&l(t,e)}(h,i.PointActor);var e,r,n,p=u(h);function h(){var t;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,h);for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];return(t=p.call(this,...r)).args.width=24,t.args.height=24,t.args.type="actor-item actor-spike-bomb",t.args.decel=0,t.explosions=new Set,t}return e=h,(r=[{key:"update",value:function(){!this.args.falling&&this.groundTime>1&&this.explode(),c(f(h.prototype),"update",this).call(this);for(const t of this.explosions)t.style({"--x":this.args.x,"--y":this.args.y+-16})}},{key:"collideA",value:function(t){t.controllable&&(t.damage(this),this.explode(),this.args.float=-1)}},{key:"explode",value:function(){if(this.exploded)return;this.exploded=!0,this.args.type="actor-item actor-air-bomb hide";const t=new a.RedBomb({x:this.args.x,y:this.args.y+-1,owner:this}),e=new a.RedBomb({x:this.args.x,y:this.args.y+-1,owner:this});t.args.ySpeed=.5*-this.ySpeedLast,e.args.ySpeed=.5*-this.ySpeedLast,t.args.xSpeed=.35*-this.ySpeedLast,e.args.xSpeed=.35*+this.ySpeedLast,this.viewport.spawn.add({object:t}),this.viewport.spawn.add({object:e}),this.viewport.actors.remove(this),o.Sfx.play("OBJECT_DESTROYED")}}])&&s(e.prototype,r),n&&s(e,n),Object.defineProperty(e,"prototype",{writable:!1}),h}();t.SpikeBomb=p}),require.register("actor/SpikeRing.js",function(t,e,r){"use strict";function n(t){"@babel/helpers - typeof";return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(t,"__esModule",{value:!0}),t.SpikeRing=void 0;var i=e("./PointActor");function o(t,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,(o=i.key,void 0,"symbol"===n(a=function(t,e){if("object"!==n(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var i=r.call(t,e||"default");if("object"!==n(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(o,"string"))?a:String(a)),i)}var o,a}function a(t,e){return(a=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function s(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,i=c(t);if(e){var o=c(this).constructor;r=Reflect.construct(i,arguments,o)}else r=i.apply(this,arguments);return function(t,e){if(e&&("object"===n(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function c(t){return(c=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}let l=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&a(t,e)}(l,i.PointActor);var e,r,n,c=s(l);function l(){var t;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,l);for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];return(t=c.call(this,...r)).args.width=64,t.args.height=32,t.args.type="actor-item actor-spike-ring",t.args.float=-1,t.oscMode=0,t}return e=l,(r=[{key:"collideA",value:function(t){t.controllable&&t.damage(this)}},{key:"update",value:function(){this.oscMode?(this.args.y-=1.75*Math.sign(this.args.y-this.objDef.y),Math.abs(this.args.y-this.objDef.y)<1.75&&(this.args.y=this.objDef.y,this.oscMode=0)):(this.args.y-=1.75*Math.sign(this.args.y-this.args.riseTo),Math.abs(this.args.y-this.args.riseTo)<1.75&&(this.args.y=this.args.riseTo,this.oscMode=1))}}])&&o(e.prototype,r),n&&o(e,n),Object.defineProperty(e,"prototype",{writable:!1}),l}();t.SpikeRing=l}),require.register("actor/Spikes.js",function(t,e,r){"use strict";function n(t){"@babel/helpers - typeof";return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(t,"__esModule",{value:!0}),t.Spikes=void 0;var i=e("./PointActor"),o=e("../audio/Sfx"),a=e("./Block");function s(t,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,(o=i.key,void 0,"symbol"===n(a=function(t,e){if("object"!==n(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var i=r.call(t,e||"default");if("object"!==n(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(o,"string"))?a:String(a)),i)}var o,a}function c(t,e){return(c=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function l(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,i=f(t);if(e){var o=f(this).constructor;r=Reflect.construct(i,arguments,o)}else r=i.apply(this,arguments);return function(t,e){if(e&&("object"===n(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function u(){return(u="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=f(t)););return t}(t,e);if(n){var i=Object.getOwnPropertyDescriptor(n,e);return i.get?i.get.call(arguments.length<3?t:r):i.value}}).apply(this,arguments)}function f(t){return(f=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}let p=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&c(t,e)}(h,i.PointActor);var e,r,n,p=l(h);function h(){var t,e;let r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1?arguments[1]:void 0;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,h),(e=p.call(this,r,n)).args.type="actor-item actor-spikes",e.args.width=r.width||32,e.args.height=r.height||32,e.args.pointing=e.args.pointing||0,e.args.retractible=null!==(t=e.args.retractible)&&void 0!==t&&t,e.args.retracted=!1,e.args.offset=e.args.offset||0,e.args.beat=e.args.beat||90,e.hazard=!0,e}return e=h,n=[{key:"fromDef",value:function(t){const e=u(f(h),"fromDef",this).call(this,t);return e.args.width=t.width,e.args.height=t.height,e.args.x=e.originalX=t.x+Math.floor(t.width/2),e}}],(r=[{key:"updateStart",value:function(){if(this.args.retractible){this.args.wasRetracted=this.args.retracted;const t=this.viewport.args.frameId+-this.viewport.args.startFrameId+-this.args.offset;if(this.args.retracted=!!(Math.floor(t/this.args.beat)%2),!this.args.retracted&&this.args.wasRetracted){this.vizi&&o.Sfx.play("SPIKES_OUT");const t=this.viewport.actorsAtPoint(this.args.x,this.args.y,this.args.width,this.args.height);for(const e of t)if(e!==this&&!e.isRegion&&!e.args.static)switch(this.args.pointing){case 0:e.args.y=this.args.y+-this.args.height+-1;break;case 1:e.args.x=this.args.x+-this.args.width/2+-e.args.width/2+-1,e.damage(this);break;case 2:e.args.y=this.args.y+other.args.height;break;case 3:e.args.x=this.args.y+this.args.width/2+e.args.width/2+1,e.damage(this)}}this.args.retracted&&!this.args.wasRetracted&&this.vizi&&o.Sfx.play("SPIKES_IN")}u(f(h.prototype),"updateStart",this).call(this)}},{key:"onRendered",value:function(t){u(f(h.prototype),"onRendered",this).call(this,t),this.autoAttr.get(this.box)["data-pointing"]="pointing",this.autoAttr.get(this.box)["data-retracted"]="retracted"}},{key:"startle",value:function(){}},{key:"damage",value:function(){}},{key:"collideA",value:function(t,e){if(this.args.retracted)return!1;if(!t.isRegion){if(!this.args.static&&this.args.falling&&!this.args.float)return t.damage(!1),!0;if(!(t instanceof a.Block)&&e===this.args.pointing)if(3===this.args.pointing){(t.args.xSpeed||t.args.gSpeed*(2===t.args.mode?-1:1))<=0&&(t.noClip||this.args.retracted||!this.args.wasRetracted||(t.args.x=this.args.x+this.args.width/2+t.args.width/2+4),t.damage(this))}else if(1===this.args.pointing){(t.args.xSpeed||t.args.gSpeed*(2===t.args.mode?-1:1))>=0&&(t.noClip||this.args.retracted||!this.args.wasRetracted||(t.args.x=this.args.x+-this.args.width/2+-t.args.width/2+-4),t.damage(this))}else if(2===this.args.pointing){(t.args.ySpeed||t.args.gSpeed*(1===t.args.mode?-1:1))<=0&&(t.noClip||this.args.retracted||!this.args.wasRetracted||(t.args.y=this.args.y+t.args.height),t.damage(this))}else if(0===this.args.pointing){(t.args.ySpeed||t.args.gSpeed*(3===t.args.mode?-1:1))>=0&&(t.noClip||this.args.retracted||!this.args.wasRetracted||(t.args.y=this.args.y+-this.args.height+0),t.damage(this))}return!0}}},{key:"solid",get:function(){return!this.args.retracted&&!this.args.wasRetracted}}])&&s(e.prototype,r),n&&s(e,n),Object.defineProperty(e,"prototype",{writable:!1}),h}();t.Spikes=p}),require.register("actor/SpikesSmall.js",function(t,e,r){"use strict";function n(t){"@babel/helpers - typeof";return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(t,"__esModule",{value:!0}),t.SpikesSmall=void 0;var i=e("curvature/base/Tag"),o=e("../audio/Sfx"),a=(e("./PointActor"),e("./Spikes"));function s(t,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,(o=i.key,void 0,"symbol"===n(a=function(t,e){if("object"!==n(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var i=r.call(t,e||"default");if("object"!==n(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(o,"string"))?a:String(a)),i)}var o,a}function c(t,e){return(c=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function l(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,i=f(t);if(e){var o=f(this).constructor;r=Reflect.construct(i,arguments,o)}else r=i.apply(this,arguments);return function(t,e){if(e&&("object"===n(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function u(){return(u="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=f(t)););return t}(t,e);if(n){var i=Object.getOwnPropertyDescriptor(n,e);return i.get?i.get.call(arguments.length<3?t:r):i.value}}).apply(this,arguments)}function f(t){return(f=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}let p=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&c(t,e)}(h,a.Spikes);var e,r,n,p=l(h);function h(){var t;let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=arguments.length>1?arguments[1]:void 0;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,h),(t=p.call(this,e,r)).args.type="actor-item actor-spikes actor-spikes-small",t.args.width=e.width||32,t.args.height=10,t.args.pointing=t.args.pointing||0,t.hazard=!0,t.args.width<16&&(t.args.narrow=!0),t}return e=h,n=[{key:"fromDef",value:function(t){const e=u(f(h),"fromDef",this).call(this,t);return e.args.width=t.width,e.args.height=10,e.args.x=e.originalX=t.x+Math.floor(t.width/2),e}}],(r=[{key:"update",value:function(){u(f(h.prototype),"update",this).call(this);this.sprite&&!this.graphic&&(this.graphic=new i.Tag(`<svg style  = "--breakSplit: 4;" data-narrow = "${this.args.narrow}">\n\t\t\t\t<defs>\n\t\t\t\t\t<pattern\n\t\t\t\t\t\tid     = "spikes-${this._id}"\n\t\t\t\t\t\twidth  = "${16/this.args.width}"\n\t\t\t\t\t\theight = "1"\n\t\t\t\t\t\tx      = "0"\n\t\t\t\t\t\ty      = "0"\n\t\t\t\t\t>\n\t\t\t\t\t\t<image href = "/Sonic/spikes-small-single.png">\n\t\t\t\t\t</pattern>\n\t\t\t\t</defs>\n\t\t\t\t<rect fill = "url(#spikes-${this._id})"></rect>\n\t\t\t\t<rect fill = "url(#spikes-${this._id})"></rect>\n\t\t\t</svg>`),this.sprite.appendChild(this.graphic.node))}},{key:"collideA",value:function(t,e){if(this.args.broken||t instanceof a.Spikes||t.args.static)return!1;if(t.isVehicle){this.args.broken=!0,this.args.gravity=.4,t.halt(10);const e=8+(t.args.width+this.args.width)/2;return t.args.x=this.x+-e*Math.sign(this.x-t.x),this.args.type="actor-item actor-spikes actor-spikes-small actor-spikes-breaking",this.viewport.onFrameOut(7,()=>{this.args.falling=!0,this.args.xSpeed=.25*t.args.hSpeed+1*Math.pow(Math.random(),2),this.args.ySpeed=-5*Math.pow(Math.random(),2)-5,this.args.type="actor-item actor-spikes actor-spikes-small actor-spikes-broken",o.Sfx.play("BLOCK_DESTROYED")}),this.args.float=8,this.noClip=!0,!1}return u(f(h.prototype),"collideA",this).call(this,t,e)}},{key:"activate",value:function(){this.args.float=0,this.noClip=!0}},{key:"solid",get:function(){return!this.args.broken&&!this.noClip}}])&&s(e.prototype,r),n&&s(e,n),Object.defineProperty(e,"prototype",{writable:!1}),h}();t.SpikesSmall=p}),require.register("actor/SpinBridge.js",function(t,e,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SpinBridge=void 0;var n=e("./Block");function i(t){"@babel/helpers - typeof";return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function o(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,f(n.key),n)}}function a(){return(a="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=u(t)););return t}(t,e);if(n){var i=Object.getOwnPropertyDescriptor(n,e);return i.get?i.get.call(arguments.length<3?t:r):i.value}}).apply(this,arguments)}function s(t,e){return(s=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function c(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=u(t);if(e){var o=u(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===i(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return l(t)}(this,r)}}function l(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function u(t){return(u=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function f(t){var e=function(t,e){if("object"!==i(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==i(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===i(e)?e:String(e)}let p=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&s(t,e)}(h,n.Block);var e,r,i,p=c(h);function h(){var t;let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=arguments.length>1?arguments[1]:void 0;var n,i,o;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,h),t=p.call(this,e,r),n=l(t),i="segments",o=new Set,(i=f(i))in n?Object.defineProperty(n,i,{value:o,enumerable:!0,configurable:!0,writable:!0}):n[i]=o,t.args.offset=t.args.offset||0,t.args.speed=t.args.speed||1,t}return e=h,(r=[{key:"initialize",value:function(){if(a(u(h.prototype),"initialize",this).call(this),!this.getMapSolidAt(this.args.x+this.args.width,this.args.y)){const t=this.args.prevSegment?this.args.prevSegment.args.firstSegment:this;if(this.args.segmentIndex||(this.args.segmentIndex=0,this.args.firstSegment=this,this.segments.add(t)),this.args.segmentIndex>=7)return;const e=new this.constructor({platform:this.args.platform,segmentIndex:this.args.segmentIndex+1,prevSegment:this,firstSegment:t,float:-1,width:this.args.width,height:this.args.height,tileId:this.args.tileId,speed:this.args.speed,offset:this.args.offset,x:this.args.x+this.args.width,y:this.args.y+4});t.segments.add(e),this.args.nextSegment=e,this.viewport.spawn.add({object:e}),t.args.platform=!0}}},{key:"updateEnd",value:function(){const t=this.viewport.args.frameId*this.args.speed+this.args.offset,e=this.args.firstSegment.args.x,r=this.args.firstSegment.args.y,n=16*this.args.segmentIndex;this.args.x=e+Math.cos(t/120*Math.PI)*n,this.args.y=r+Math.sin(t/120*Math.PI)*n,a(u(h.prototype),"updateEnd",this).call(this)}},{key:"collideA",value:function(t,e){return!(t instanceof h)&&a(u(h.prototype),"collideA",this).call(this,t,e)}}])&&o(e.prototype,r),i&&o(e,i),Object.defineProperty(e,"prototype",{writable:!1}),h}();t.SpinBridge=p}),require.register("actor/Sping.js",function(t,e,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Sping=void 0;e("./Flickie");var n=e("curvature/base/Mixin"),i=(e("curvature/base/Tag"),e("./PointActor")),o=e("../behavior/SkidDust"),a=e("../mixin/CanPop"),s=(e("../actor/Explosion"),e("../actor/Projectile"));function c(t){"@babel/helpers - typeof";return(c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function l(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,d(n.key),n)}}function u(){return(u="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=g(t)););return t}(t,e);if(n){var i=Object.getOwnPropertyDescriptor(n,e);return i.get?i.get.call(arguments.length<3?t:r):i.value}}).apply(this,arguments)}function f(t,e){return(f=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function p(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=g(t);if(e){var i=g(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===c(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return h(t)}(this,r)}}function h(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function g(t){return(g=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function d(t){var e=function(t,e){if("object"!==c(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==c(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===c(e)?e:String(e)}let y=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&f(t,e)}(b,n.Mixin.from(i.PointActor,a.CanPop));var e,r,c,y=p(b);function b(){var t,e,r,n;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,b);for(var i=arguments.length,a=new Array(i),s=0;s<i;s++)a[s]=arguments[s];return t=y.call(this,...a),e=h(t),n="Spiny",(r=d(r="name"))in e?Object.defineProperty(e,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[r]=n,t.behaviors.add(new o.SkidDust),t.args.type="actor-item actor-sping",t.args.animation="standing",t.args.accel=.1,t.args.decel=.5,t.args.gSpeedMax=5,t.args.jumpForce=5,t.args.gravity=.5,t.args.width=48,t.args.height=22,t.willStick=!1,t.stayStuck=!1,t}return e=b,(r=[{key:"update",value:function(){this.args.direction;if(this.age%90<65&&(Math.floor(this.age/90)%2?this.args.gSpeed=-.125:this.args.gSpeed=.125),this.box&&(this.box.setAttribute("data-animation","walking"),(this.age%90<15||this.age%90>85)&&this.box.setAttribute("data-animation","shooting")),u(g(b.prototype),"update",this).call(this),this.age%90==87){const t=this.x-2,e=this.y-12,r=-1,n=-1.5*Math.sign(this.gSpeedLast),i=-3,o=this,a=new s.Projectile({x:t,y:e,z:r,owner:o});if(!this.viewport)return;this.viewport.onFrameOut(2,()=>{Object.assign(a.args,{xSpeed:n,ySpeed:i})}),this.viewport.spawn.add({object:a})}}},{key:"effect",value:function(t){u(g(b.prototype),"effect",this).call(this,t)}},{key:"solid",get:function(){return!1}},{key:"isEffect",get:function(){return!1}}])&&l(e.prototype,r),c&&l(e,c),Object.defineProperty(e,"prototype",{writable:!1}),b}();t.Sping=y}),require.register("actor/Spinner.js",function(t,e,r){"use strict";function n(t){"@babel/helpers - typeof";return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(t,"__esModule",{value:!0}),t.Spinner=void 0;var i=e("./PointActor"),o=e("./Block"),a=e("../audio/Sfx");function s(t,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,(o=i.key,void 0,"symbol"===n(a=function(t,e){if("object"!==n(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var i=r.call(t,e||"default");if("object"!==n(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(o,"string"))?a:String(a)),i)}var o,a}function c(){return(c="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=f(t)););return t}(t,e);if(n){var i=Object.getOwnPropertyDescriptor(n,e);return i.get?i.get.call(arguments.length<3?t:r):i.value}}).apply(this,arguments)}function l(t,e){return(l=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function u(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,i=f(t);if(e){var o=f(this).constructor;r=Reflect.construct(i,arguments,o)}else r=i.apply(this,arguments);return function(t,e){if(e&&("object"===n(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function f(t){return(f=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}Symbol("Boosted");let p=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&l(t,e)}(h,i.PointActor);var e,r,n,p=u(h);function h(){var t;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,h);for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];return(t=p.call(this,...r)).args.type="actor-item actor-spinner",t.args.width=64,t.args.height=24,t.args.direction=t.args.direction||1,t.args.static=!0,t}return e=h,(r=[{key:"update",value:function(){c(f(h.prototype),"update",this).call(this)}},{key:"collideA",value:function(t){if(t.isRegion||t.args.static||t instanceof o.Block)return;if(t instanceof h)return;if(t.args.gSpeed,t.args.falling||Math.sign(t.args.gSpeed)===Math.sign(this.args.direction)&&Math.abs(t.args.gSpeed)>this.args.toSpeed)return;this.ignores.set(t,30);const e=this.args.toSpeed||40;t.args.ignore=2,t.args.direction=this.args.direction,t.args.facing=this.args.direction>0?"right":"left",t.args.gSpeed=Math.max(Math.abs(t.args.gSpeed),e)*Math.sign(this.args.direction||1),t.xAxis=0,a.Sfx.play("SPEEDPAD_HIT")}}])&&s(e.prototype,r),n&&s(e,n),Object.defineProperty(e,"prototype",{writable:!1}),h}();t.Spinner=p}),require.register("actor/SpinningFloat.js",function(t,e,r){"use strict";function n(t){"@babel/helpers - typeof";return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(t,"__esModule",{value:!0}),t.SpinningFloat=void 0;var i=e("./Block");e("../audio/Sfx"),e("../region/Region");function o(t,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,(o=i.key,void 0,"symbol"===n(a=function(t,e){if("object"!==n(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var i=r.call(t,e||"default");if("object"!==n(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(o,"string"))?a:String(a)),i)}var o,a}function a(){return(a="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=l(t)););return t}(t,e);if(n){var i=Object.getOwnPropertyDescriptor(n,e);return i.get?i.get.call(arguments.length<3?t:r):i.value}}).apply(this,arguments)}function s(t,e){return(s=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function c(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,i=l(t);if(e){var o=l(this).constructor;r=Reflect.construct(i,arguments,o)}else r=i.apply(this,arguments);return function(t,e){if(e&&("object"===n(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function l(t){return(l=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}let u=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&s(t,e)}(f,i.Block);var e,r,n,u=c(f);function f(){var t;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,f);for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];return(t=u.call(this,...r)).hitBlocks=!0,t.invertsBias=!0,t.args.width=64,t.args.height=64,t.args.platform=1,t.args.type="actor-item actor-spinning-float",t.args.static=0,t.args.gravity=.4,t.args.spinning=0,t.args.bouncing=0,t.args.treadmill=!0,t.args.trackX=!0,t.args.particleScale=1.25,t.lastConvey=0,t}return e=f,(r=[{key:"collideA",value:function(t,e){return!t.args.platform&&a(l(f.prototype),"collideA",this).call(this,t,e)}},{key:"update",value:function(){a(l(f.prototype),"update",this).call(this),this.args.moving=this.args.falling||this.args.gSpeed;let t=!1,e=!1;const r=this.viewport.regionsAtPoint(this.args.x,this.args.y-36);for(const e of this.regions)e.isWater&&(t=!0);for(const t of r)t.isWater&&(e=!0);e&&(this.args.ySpeed-=this.args.gravity,this.args.falling=!0,this.args.ySpeed>0&&(this.args.ySpeed*=.95));const n=.25+3.5*Math.abs(this.args.convey/20);t&&this.args.falling&&Math.abs(this.args.ySpeed)<n&&(this.args.ySpeed>0||this.args.convey)&&(!e&&this.args.ySpeed>0||e&&this.args.ySpeed<0)&&(this.args.ySpeed=Math.sign(this.args.ySpeed)*n),this.standingUnder.forEach(e=>{e.args.xSpeed=this.args.xSpeed||this.args.gSpeed,e.xAxis&&Math.abs(e.args.gSpeed)>1&&(this.args.falling?t||(e.args.gSpeed*=.99):e.args.gSpeed*=.9),Math.abs(e.args.gSpeed)>14&&(e.args.gSpeed=14*Math.sign(e.args.gSpeed)),Math.abs(this.args.convey)>8?e.args.x=this.args.x:(e.groundTime<2&&(e.args.gSpeed=0,e.args.xSpeed=0,this.args.convey=0),Math.abs(this.args.x-e.args.x)<1&&(e.args.x=this.args.x),e.args.x+=.2*(this.args.x-e.args.x))}),!this.args.falling&&Math.abs(this.args.gSpeed)<Math.abs(this.args.convey)?(this.args.gSpeed=this.args.convey,this.args.xSpeed=this.args.gSpeed):t&&(!this.args.xSpeed&&this.gSpeedLast&&(this.args.xSpeed=this.gSpeedLast,this.gSpeedLast=0),e&&this.getMapSolidAt(this.x,this.y+1)&&this.args.y--,Math.abs(this.args.xSpeed)<8&&(this.args.xSpeed+=.005*this.args.convey),this.args.falling?this.args.xSpeed*=.99:this.args.gSpeed=this.args.xSpeed)}},{key:"sleep",value:function(){this.args.y=this.originalY}}])&&o(e.prototype,r),n&&o(e,n),Object.defineProperty(e,"prototype",{writable:!1}),f}();t.SpinningFloat=u}),require.register("actor/SpitFire.js",function(t,e,r){"use strict";function n(t){"@babel/helpers - typeof";return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(t,"__esModule",{value:!0}),t.SpitFire=void 0;var i=e("./PointActor");function o(t,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,(o=i.key,void 0,"symbol"===n(a=function(t,e){if("object"!==n(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var i=r.call(t,e||"default");if("object"!==n(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(o,"string"))?a:String(a)),i)}var o,a}function a(){return(a="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=l(t)););return t}(t,e);if(n){var i=Object.getOwnPropertyDescriptor(n,e);return i.get?i.get.call(arguments.length<3?t:r):i.value}}).apply(this,arguments)}function s(t,e){return(s=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function c(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,i=l(t);if(e){var o=l(this).constructor;r=Reflect.construct(i,arguments,o)}else r=i.apply(this,arguments);return function(t,e){if(e&&("object"===n(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function l(t){return(l=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}let u=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&s(t,e)}(f,i.PointActor);var e,r,n,u=c(f);function f(){var t;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,f);for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];return(t=u.call(this,...r)).args.type="actor-item actor-spitfire",t.args.width=99,t.args.height=32,t.args.float=-1,t.noClip=!0,t}return e=f,(r=[{key:"update",value:function(){if(this.age>45)return this.args.gone=!0,this.viewport.actors.remove(this),void this.remove();a(l(f.prototype),"update",this).call(this)}},{key:"collideA",value:function(t){this.age<10||t.immune(this,"fire")||this.args.owner&&!this.args.owner.args.gone&&t.controllable&&t.damage(this,"fire")}}])&&o(e.prototype,r),n&&o(e,n),Object.defineProperty(e,"prototype",{writable:!1}),f}();t.SpitFire=u}),require.register("actor/SpitSteam.js",function(t,e,r){"use strict";function n(t){"@babel/helpers - typeof";return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(t,"__esModule",{value:!0}),t.SpitSteam=void 0;var i=e("./PointActor");function o(t,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,(o=i.key,void 0,"symbol"===n(a=function(t,e){if("object"!==n(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var i=r.call(t,e||"default");if("object"!==n(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(o,"string"))?a:String(a)),i)}var o,a}function a(){return(a="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=l(t)););return t}(t,e);if(n){var i=Object.getOwnPropertyDescriptor(n,e);return i.get?i.get.call(arguments.length<3?t:r):i.value}}).apply(this,arguments)}function s(t,e){return(s=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function c(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,i=l(t);if(e){var o=l(this).constructor;r=Reflect.construct(i,arguments,o)}else r=i.apply(this,arguments);return function(t,e){if(e&&("object"===n(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function l(t){return(l=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}let u=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&s(t,e)}(f,i.PointActor);var e,r,n,u=c(f);function f(){var t;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,f);for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];return(t=u.call(this,...r)).args.type="actor-item actor-spitsteam",t.args.width=79,t.args.height=16,t.args.float=-1,t.noClip=!0,t}return e=f,(r=[{key:"update",value:function(){if(this.age>30)return this.args.gone=!0,this.viewport.actors.remove(this),void this.remove();a(l(f.prototype),"update",this).call(this)}},{key:"collideA",value:function(t){this.age<8||t.controllable&&this.args.owner&&!this.args.owner.args.gone&&(t.args.ignore=3,t.args.antiSkid=8,t.args.x+=this.args.direction,t.args.xSpeed=12*this.args.direction,t.args.falling=!0)}}])&&o(e.prototype,r),n&&o(e,n),Object.defineProperty(e,"prototype",{writable:!1}),f}();t.SpitSteam=u}),require.register("actor/Splats.js",function(t,e,r){"use strict";function n(t){"@babel/helpers - typeof";return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(t,"__esModule",{value:!0}),t.Splats=void 0;e("./Flickie");var i=e("curvature/base/Mixin"),o=e("./PointActor"),a=e("../behavior/Patrol"),s=e("../mixin/CanPop");function c(t,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,(o=i.key,void 0,"symbol"===n(a=function(t,e){if("object"!==n(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var i=r.call(t,e||"default");if("object"!==n(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(o,"string"))?a:String(a)),i)}var o,a}function l(){return(l="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=p(t)););return t}(t,e);if(n){var i=Object.getOwnPropertyDescriptor(n,e);return i.get?i.get.call(arguments.length<3?t:r):i.value}}).apply(this,arguments)}function u(t,e){return(u=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function f(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,i=p(t);if(e){var o=p(this).constructor;r=Reflect.construct(i,arguments,o)}else r=i.apply(this,arguments);return function(t,e){if(e&&("object"===n(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function p(t){return(p=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}let h=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&u(t,e)}(g,i.Mixin.from(o.PointActor,s.CanPop));var e,r,n,h=f(g);function g(){var t,e,r,n;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,g);for(var i=arguments.length,o=new Array(i),s=0;s<i;s++)o[s]=arguments[s];return(n=h.call(this,...o)).behaviors.add(new a.Patrol),n.args.type="actor-item actor-splats",n.args.animation="standing",n.args.accel=.1,n.args.decel=.5,n.args.gSpeedMax=5,n.args.jumpForce=5,n.args.gravity=.5,n.args.width=24,n.args.height=48,n.willStick=!1,n.stayStuck=!1,n.args.patrolPause=null!==(t=n.args.patrolPause)&&void 0!==t?t:40,n.args.patrolBeat=null!==(e=n.args.patrolBeat)&&void 0!==e?e:140,n.args.patrolSpeed=null!==(r=n.args.patrolSpeed)&&void 0!==r?r:1,n}return e=g,(r=[{key:"update",value:function(){this.args.direction,this.args.shotTelegraph,this.args.patrolBeat;this.box&&(this.args.moving&&this.args.gSpeed?this.box.setAttribute("data-animation","walking"):this.box.setAttribute("data-animation","standing")),l(p(g.prototype),"update",this).call(this),this.args.direction=Math.sign(this.args.xSpeed||this.args.gSpeed),this.args.falling||this.jumpTimer||(this.jumpTimer=this.onNextFrame(()=>{this.args.ySpeed=Math.max(-this.ySpeedLast,-12)||-6,this.args.xSpeed=this.args.gSpeed,this.args.falling=!0,this.jumpTimer=!1,this.args.y-=32}))}},{key:"effect",value:function(t){l(p(g.prototype),"effect",this).call(this,t)}},{key:"solid",get:function(){return!1}},{key:"isEffect",get:function(){return!1}}])&&c(e.prototype,r),n&&c(e,n),Object.defineProperty(e,"prototype",{writable:!1}),g}();t.Splats=h}),require.register("actor/Spring.js",function(t,e,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Spring=void 0;var n=e("./LayerSwitch"),i=e("./PointActor"),o=e("./BreakableBlock"),a=e("../region/Region"),s=e("../audio/Sfx"),c=e("./Projectile");function l(t){"@babel/helpers - typeof";return(l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function u(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,i,o,a,s=[],c=!0,l=!1;try{if(o=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=o.call(r)).done)&&(s.push(n.value),s.length!==e);c=!0);}catch(t){l=!0,i=t}finally{try{if(!c&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(l)throw i}}return s}}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return f(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return f(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function f(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function p(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,m(n.key),n)}}function h(t,e){return(h=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function g(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=b(t);if(e){var i=b(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===l(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return d(t)}(this,r)}}function d(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function y(){return(y="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=b(t)););return t}(t,e);if(n){var i=Object.getOwnPropertyDescriptor(n,e);return i.get?i.get.call(arguments.length<3?t:r):i.value}}).apply(this,arguments)}function b(t){return(b=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function v(t,e,r){return(e=m(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function m(t){var e=function(t,e){if("object"!==l(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==l(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===l(e)?e:String(e)}const w=Symbol("WillSpring"),S=Symbol("WontSpring");let O=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&h(t,e)}(m,i.PointActor);var e,r,l,f=g(m);function m(){var t,e;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,m);for(var r=arguments.length,n=new Array(r),i=0;i<r;i++)n[i]=arguments[i];return v(d(e=f.call(this,...n)),"float",-1),v(d(e),"keepAngle",!0),v(d(e),"template",'<div\n\t\tclass = "point-actor actor-item [[type]] [[collType]] [[active]]"\n\t\tstyle = "\n\t\t\tdisplay:[[display]];\n\t\t\t--angle:[[angle]];\n\t\t\t--airAngle:[[airAngle]];\n\t\t\t--ground-angle:[[groundAngle]];\n\t\t\t--height:[[height]];\n\t\t\t--width:[[width]];\n\t\t\t--x:[[x]];\n\t\t\t--y:[[y]];\n\t\t"\n\t\tdata-colliding = "[[colliding]]"\n\t\tdata-diagonal  = "[[diagonal]]"\n\t\tdata-falling   = "[[falling]]"\n\t\tdata-facing    = "[[facing]]"\n\t\tdata-angle     = "[[angle|rad2deg]]"\n\t\tdata-mode      = "[[mode]]"\n\t>\n\t\t<div\n\t\t\tdata-color = "[[color]]"\n\t\t\tdata-type  = "[[base]]"\n\t\t\tclass      = "spring-pad"\n\t\t\tstyle = "--color:[[color]]deg"\n\t\t></div>\n\t\t<div class = "sprite"></div>\n\t</div>'),e.args.type="actor-item actor-spring",e.args.width=e.args.width||32,e.args.height=e.args.height||32,e.args.color=e.args.color||0,e.args.static=null===(t=e.args.static)||void 0===t||t,e.args.standingOn&&(e.args.static=!1,e.args.float=0),e.args.actingOn=new Set,e.args.blocked=!1,e.holding=new Set,e}return e=m,l=[{key:"fromDef",value:function(t){const e=y(b(m),"fromDef",this).call(this,t);return e.args.angle=Number(e.args.angle),e.args.width=t.width||32,e.args.height=t.height||32,e}}],(r=[{key:"updateEnd",value:function(){if(y(b(m.prototype),"updateEnd",this).call(this),this.args.blocked=!1,this.viewport.collisions.has(this))for(const e of this.viewport.collisions.get(this)){var t=u(e,2);const r=t[0];-1===t[1]&&!r.broken&&r instanceof o.BreakableBlock&&(this.args.blocked=!0)}if(this.args.blocked)return!1;for(const t of this.holding)this.springActor(t),this.viewport.onFrameOut(5,()=>{this.holding.delete(t)})}},{key:"collideA",value:function(t,e){return!(t instanceof c.Projectile)&&(!this.args.blocked&&(!t.carriedBy&&(t.args.hangingFrom&&t.args.hangingFrom.unhook(t),!t[w]&&!t[S]&&(!t.args.static&&(!(t instanceof this.constructor)&&(!(t instanceof n.LayerSwitch)&&(y(b(m.prototype),"collideA",this).call(this,t,e),!this.args.actingOn.has(t)&&(!t.args.platform&&(!(t instanceof a.Region)&&(t.args.falling=!0,this.holding.add(t),t.controllable&&(this.args.gSpeed=0),!1))))))))))}},{key:"springActor",value:function(t){if(t[w])return!1;s.Sfx.play("SPRING_HIT");const e=this.roundAngle(this.args.angle,8,!0);if(t.args.x=this.args.x+4*Math.cos(e),t.args.y=this.args.y+4*Math.sin(e),this.args.actingOn.add(t),this.viewport.onFrameOut(1,()=>{this.args.active=!0}),this.viewport.onFrameOut(5,()=>{delete t[w],this.args.active=!1,this.args.actingOn.delete(t)}),t.noClip)return!1;t.args.gSpeed=0,t.args.xSpeed=0,t.args.ySpeed=0,t[w]=!0,t.args.mercy=0,this.viewport.settings.rumble&&t.controller&&t.controller.rumble&&(t.controller.rumble({duration:120,strongMagnitude:1,weakMagnitude:1}),this.onTimeout(100,()=>{t.controller.rumble({duration:500,strongMagnitude:0,weakMagnitude:.25})})),t.locked=2,t.args.jumping=!1,t.args.ignore=t.args.ignore||(t.args.falling?12:2),t.args.float=Math.max(2,t.args.float),this.viewport.onFrameOut(1,()=>{t.args.float=Math.max(2,t.args.float),t.args.mode=0,t.args.direction=Math.sign(r)||t.args.direction,t.args.flying=!1,t.impulse(this.args.power,e,![0,Math.PI].includes(this.args.angle)&&Math.abs(Math.PI-this.args.angle)>.01)});const r=Number(Number(1*Math.cos(e)).toFixed(3)),n=Number(Number(1*Math.sin(e)).toFixed(3)),i=t.args.rolling;![0,Math.PI].includes(this.args.angle)&&Math.abs(Math.PI-this.args.angle)>.01||t.args.falling||0!==t.args.mode?(t.args.falling=!0,t.args.mode=0):this.viewport.onFrameOut(1,()=>t.args.rolling=i),Math.abs(t.args.xSpeed)<3||Math.sign(t.args.xSpeed)!==Math.sign(r)?t.args.xSpeed=r:t.args.xSpeed+=r,Math.abs(t.args.ySpeed)<3||Math.sign(t.args.ySpeed)!==Math.sign(n)?t.args.ySpeed=n:t.args.ySpeed+=n,t.args.airAngle=this.args.angle,t.args.displayAngle=0,t.args.groundAngle=0,t.args.airAngle=-Math.PI/2,t.args.mode=0}},{key:"sleep",value:function(){this.args.actingOn.clear(),this.args.active=!1}},{key:"canStick",get:function(){return!1}},{key:"solid",get:function(){return!1}}])&&p(e.prototype,r),l&&p(e,l),Object.defineProperty(e,"prototype",{writable:!1}),m}();t.Spring=O,v(O,"WontSpring",S)}),require.register("actor/SpringTurtle.js",function(t,e,r){"use strict";function n(t){"@babel/helpers - typeof";return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(t,"__esModule",{value:!0}),t.SpringTurtle=void 0;var i=e("curvature/base/Mixin"),o=e("./PointActor"),a=e("../behavior/Patrol"),s=e("../mixin/CanPop");e("./Ring");function c(t,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,(o=i.key,void 0,"symbol"===n(a=function(t,e){if("object"!==n(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var i=r.call(t,e||"default");if("object"!==n(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(o,"string"))?a:String(a)),i)}var o,a}function l(){return(l="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=p(t)););return t}(t,e);if(n){var i=Object.getOwnPropertyDescriptor(n,e);return i.get?i.get.call(arguments.length<3?t:r):i.value}}).apply(this,arguments)}function u(t,e){return(u=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function f(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,i=p(t);if(e){var o=p(this).constructor;r=Reflect.construct(i,arguments,o)}else r=i.apply(this,arguments);return function(t,e){if(e&&("object"===n(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function p(t){return(p=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}let h=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&u(t,e)}(g,i.Mixin.from(o.PointActor,s.CanPop));var e,r,n,h=f(g);function g(){var t,e,r,n;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,g);for(var i=arguments.length,o=new Array(i),s=0;s<i;s++)o[s]=arguments[s];return(n=h.call(this,...o)).behaviors.add(new a.Patrol),n.args.type="actor-item actor-spring-turtle",n.args.animation="standing",n.args.accel=.1,n.args.decel=.5,n.args.gSpeedMax=3,n.args.gravity=.5,n.args.width=24,n.args.height=32,n.willStick=!1,n.stayStuck=!1,n.args.patrolPause=null!==(t=n.args.patrolPause)&&void 0!==t?t:10,n.args.patrolBeat=null!==(e=n.args.patrolBeat)&&void 0!==e?e:120,n.args.patrolSpeed=null!==(r=n.args.patrolSpeed)&&void 0!==r?r:1,n.args.lastSpring=0,n}return e=g,(r=[{key:"onRendered",value:function(t){l(p(g.prototype),"onRendered",this).call(this,t),this.autoAttr.get(this.box)["data-spring"]="springing"}},{key:"collideA",value:function(t,e){if(!t.args.static)return 0===e||t.args.falling?(this.ignores.set(t,15),t.args.ySpeed=-20,t.args.xSpeed=0,void(this.args.lastSpring=10)):l(p(g.prototype),"collideA",this).call(this,t,e)}},{key:"update",value:function(){l(p(g.prototype),"update",this).call(this),this.args.lastSpring>0&&this.args.lastSpring--,this.args.springing=!!this.args.lastSpring,this.args.moving&&this.args.gSpeed?this.args.animation="walking":this.args.animation="standing",this.args.direction=Math.sign(this.args.gSpeed)}},{key:"solid",get:function(){return!1}},{key:"isEffect",get:function(){return!1}}])&&c(e.prototype,r),n&&c(e,n),Object.defineProperty(e,"prototype",{writable:!1}),g}();t.SpringTurtle=h}),require.register("actor/Springboard.js",function(t,e,r){"use strict";function n(t){"@babel/helpers - typeof";return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(t,"__esModule",{value:!0}),t.Springboard=void 0;var i=e("./PointActor"),o=e("../audio/Sfx");function a(t,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,(o=i.key,void 0,"symbol"===n(a=function(t,e){if("object"!==n(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var i=r.call(t,e||"default");if("object"!==n(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(o,"string"))?a:String(a)),i)}var o,a}function s(t,e){return(s=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function c(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,i=l(t);if(e){var o=l(this).constructor;r=Reflect.construct(i,arguments,o)}else r=i.apply(this,arguments);return function(t,e){if(e&&("object"===n(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function l(t){return(l=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}let u=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&s(t,e)}(u,i.PointActor);var e,r,n,l=c(u);function u(){var t;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,u);for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];return(t=l.call(this,...r)).args.type="actor-item actor-springboard",t.args.width=56,t.args.height=16,t.args.animation="idle",t}return e=u,(r=[{key:"collideA",value:function(t,e){if(this.args.ignore)return;let r=Math.min(1,Math.max(0,1+(-this.x-26+t.x)/56));if(r<.5&&(r*=.5),this.args.animation="depressed",t.args.jumping&&"idle"!==this.args.animation&&t.args.ySpeed<0){this.args.ignore=6,this.args.animation="idle";const e=Math.max(t.args.gSpeed/2,t.args.xSpeed);this.onNextFrame(()=>{t.args.xSpeed=e,t.args.ySpeed+=-12*r}),o.Sfx.play("SPRING_HIT")}if(-this.x+t.x<=-26&&(this.args.animation="idle"),(-this.x+t.x>=26||Math.abs(t.args.gSpeed)>13)&&0===t.args.mode){this.args.ignore=6;const e=Math.max(t.args.gSpeed/2,t.args.xSpeed);this.onNextFrame(()=>{t.args.falling=!0,t.args.xSpeed=e,t.args.ySpeed=-8}),this.viewport.onFrameOut(5,()=>this.args.animation="idle"),o.Sfx.play("SPRING_HIT")}t.args.ySpeed<0&&(this.args.animation="idle")}}])&&a(e.prototype,r),n&&a(e,n),Object.defineProperty(e,"prototype",{writable:!1}),u}();t.Springboard=u}),require.register("actor/StarBalloon.js",function(t,e,r){"use strict";function n(t){"@babel/helpers - typeof";return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(t,"__esModule",{value:!0}),t.StarBalloon=void 0;var i=e("./Balloon"),o=e("./Spring");function a(t,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,(o=i.key,void 0,"symbol"===n(a=function(t,e){if("object"!==n(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var i=r.call(t,e||"default");if("object"!==n(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(o,"string"))?a:String(a)),i)}var o,a}function s(){return(s="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=u(t)););return t}(t,e);if(n){var i=Object.getOwnPropertyDescriptor(n,e);return i.get?i.get.call(arguments.length<3?t:r):i.value}}).apply(this,arguments)}function c(t,e){return(c=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function l(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,i=u(t);if(e){var o=u(this).constructor;r=Reflect.construct(i,arguments,o)}else r=i.apply(this,arguments);return function(t,e){if(e&&("object"===n(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function u(t){return(u=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}let f=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&c(t,e)}(p,i.Balloon);var e,r,n,f=l(p);function p(){var t;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,p);for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];return(t=f.call(this,...r)).args.type="actor-item actor-balloon actor-star-balloon",t.args.target=t.args.target||0,t.args.gravity=.475,t[o.Spring.WontSpring]=!0,t}return e=p,(r=[{key:"update",value:function(){s(u(p.prototype),"update",this).call(this),this.popped||(this.launched?(this.args.ySpeed||(this.args.ySpeed=-1),this.args.ySpeed>-8&&(this.args.ySpeed-=.08),this.args.y<this.args.target&&(this.args.y=this.args.target,this.args.ySpeed=0)):this.args.ySpeed=Math.sin(this.viewport.args.frameId/10)/5),this.args.groundAngle=0}},{key:"activate",value:function(){this.args.ySpeed=2,this.viewport.onFrameOut(20,()=>this.launched=!0)}},{key:"collideA",value:function(t){return!(!t.controllable||t.args.hangingFrom)&&(!this.popped&&void((t.args.ySpeed>=0||t.args.spinning)&&(t.args.ySpeed=-14,this.pop())))}},{key:"sleep",value:function(){this.viewport&&(this.tags.sprite&&this.tags.sprite.classList.remove("popped"),this.args.x=this.def.get("x"),this.args.y=this.def.get("y"),this.args.xSpeed=0,this.args.ySpeed=0,this.args.float=-1,this.popped=this.launched=!1,this.args.falling=!0,this.viewport.setColCell(this),this.noClip=!1)}},{key:"damage",value:function(){this.pop()}},{key:"pop",value:function(){const t=new CustomEvent("exploded",{detail:{actor:this}});this.dispatchEvent(t),this.tags.sprite.classList.add("popped"),this.popped=!0,this.args.float=0,this.noClip=!0}}])&&a(e.prototype,r),n&&a(e,n),Object.defineProperty(e,"prototype",{writable:!1}),p}();t.StarBalloon=f}),require.register("actor/StarPost.js",function(t,e,r){"use strict";function n(t){"@babel/helpers - typeof";return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(t,"__esModule",{value:!0}),t.StarPost=void 0;e("../ui/CharacterString");var i=e("./PointActor"),o=e("curvature/base/Tag"),a=e("../audio/Sfx"),s=(e("./Monitor"),e("./monitor/RingMonitor")),c=e("./monitor/SheildElectricMonitor"),l=e("./monitor/SheildWaterMonitor"),u=e("./monitor/SheildFireMonitor"),f=e("../lib/Analytic");function p(t,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,(o=i.key,void 0,"symbol"===n(a=function(t,e){if("object"!==n(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var i=r.call(t,e||"default");if("object"!==n(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(o,"string"))?a:String(a)),i)}var o,a}function h(){return(h="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=y(t)););return t}(t,e);if(n){var i=Object.getOwnPropertyDescriptor(n,e);return i.get?i.get.call(arguments.length<3?t:r):i.value}}).apply(this,arguments)}function g(t,e){return(g=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function d(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,i=y(t);if(e){var o=y(this).constructor;r=Reflect.construct(i,arguments,o)}else r=i.apply(this,arguments);return function(t,e){if(e&&("object"===n(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function y(t){return(y=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}let b=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&g(t,e)}(v,i.PointActor);var e,r,n,b=d(v);function v(){var t,e;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,v);for(var r=arguments.length,n=new Array(r),i=0;i<r;i++)n[i]=arguments[i];return(e=b.call(this,...n)).args.type="actor-item actor-star-post",e.args.width=16,e.args.height=48,e.args.active=null!==(t=e.args.active)&&void 0!==t&&t,e.args.static=!0,e.spinning=!1,e}return e=v,(r=[{key:"update",value:function(){if(h(y(v.prototype),"update",this).call(this),this.args.wasActive){const t=new s.RingMonitor({direction:0,ySpeed:-4,x:this.x-10,y:this.y-48});this.viewport.onFrameOut(12,()=>{this.viewport.spawn.add({object:t})}),this.args.wasActive=!1}}},{key:"onRendered",value:function(){h(y(v.prototype),"onRendered",this).call(this),this.headBox=new o.Tag('<div class = "star-post-head-box">'),this.head=new o.Tag('<div class = "star-post-head">'),this.headBox.appendChild(this.head.node),this.box.appendChild(this.headBox.node)}},{key:"collideA",value:function(t){if(h(y(v.prototype),"collideA",this).call(this,t),t.args.owner&&(t=t.args.owner),(t.controllable||t.occupant)&&this.box&&!this.args.active){this.args.active=!0,this.box.setAttribute("data-direction",t.args.direction),this.box.setAttribute("data-active","true"),this.box.setAttribute("data-spin","true"),a.Sfx.play("STARPOST_HIT");let e=t.args.gSpeed||t.args.xSpeed;Math.abs(e)>20&&(e+=3);const r=this.viewport.args.frameId+-this.viewport.args.startFrameId,n=t.args.rings>50?[s.RingMonitor,u.SheildFireMonitor,l.SheildWaterMonitor,c.SheildElectricMonitor]:[s.RingMonitor],i=new(0,n[r%n.length])({direction:t.args.direction,xSpeed:e,ySpeed:-5,x:this.x-10,y:this.y-48});this.viewport.storeCheckpoint(t.args.canonical,this.oid||this.args.id),this.viewport.spawn.add({object:i}),this.spinning=!0,this.viewport.onFrameOut(36,()=>{this.spinning=!1}),"function"==typeof ga&&f.Analytic.report({eventCategory:"starpost",eventAction:"activated",eventLabel:`${this.viewport.args.actName}::${this.args.id}`})}}},{key:"solid",get:function(){return!1}}])&&p(e.prototype,r),n&&p(e,n),Object.defineProperty(e,"prototype",{writable:!1}),v}();t.StarPost=b}),require.register("actor/SteelCrate.js",function(t,e,r){"use strict";function n(t){"@babel/helpers - typeof";return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(t,"__esModule",{value:!0}),t.SteelCrate=void 0;var i=e("./Block"),o=e("./BreakableBlock"),a=e("./Projectile");function s(t,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,(o=i.key,void 0,"symbol"===n(a=function(t,e){if("object"!==n(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var i=r.call(t,e||"default");if("object"!==n(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(o,"string"))?a:String(a)),i)}var o,a}function c(){return(c="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=f(t)););return t}(t,e);if(n){var i=Object.getOwnPropertyDescriptor(n,e);return i.get?i.get.call(arguments.length<3?t:r):i.value}}).apply(this,arguments)}function l(t,e){return(l=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function u(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,i=f(t);if(e){var o=f(this).constructor;r=Reflect.construct(i,arguments,o)}else r=i.apply(this,arguments);return function(t,e){if(e&&("object"===n(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function f(t){return(f=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}let p=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&l(t,e)}(h,o.BreakableBlock);var e,r,n,p=u(h);function h(){var t,e;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,h);for(var r=arguments.length,n=new Array(r),i=0;i<r;i++)n[i]=arguments[i];return(e=p.call(this,...n)).args.type="actor-item actor-breakable-block actor-steel-crate",e.args.width=64,e.args.height=64,e.args.static=null!==(t=e.args.static)&&void 0!==t&&t,e}return e=h,(r=[{key:"collideA",value:function(t,e){return t instanceof i.Block||(t instanceof a.Projectile&&!this.broken?(this.break(),!0):t.args.bouncing&&!this.broken?(this.break(),!0):t.punching&&!this.broken?(this.break(),!1):!(!t.args.rolling||this.broken)||(!(0!==e||!t.controllable)||(1!==e&&3!==e||t.y<=this.y-this.args.height||!!this.viewport&&(-1!==e&&!t.args.rolling||c(f(h.prototype),"collideA",this).call(this,t,e)))))}},{key:"setTile",value:function(){this.args.spriteSheet="/custom/steel-crate.png"}}])&&s(e.prototype,r),n&&s(e,n),Object.defineProperty(e,"prototype",{writable:!1}),h}();t.SteelCrate=p}),require.register("actor/StoneAltar.js",function(t,e,r){"use strict";function n(t){"@babel/helpers - typeof";return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(t,"__esModule",{value:!0}),t.StoneAltar=void 0;var i=e("./Block"),o=e("./WindStone");function a(t,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,(o=i.key,void 0,"symbol"===n(a=function(t,e){if("object"!==n(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var i=r.call(t,e||"default");if("object"!==n(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(o,"string"))?a:String(a)),i)}var o,a}function s(){return(s="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=u(t)););return t}(t,e);if(n){var i=Object.getOwnPropertyDescriptor(n,e);return i.get?i.get.call(arguments.length<3?t:r):i.value}}).apply(this,arguments)}function c(t,e){return(c=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function l(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,i=u(t);if(e){var o=u(this).constructor;r=Reflect.construct(i,arguments,o)}else r=i.apply(this,arguments);return function(t,e){if(e&&("object"===n(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function u(t){return(u=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}let f=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&c(t,e)}(p,i.Block);var e,r,n,f=l(p);function p(){var t;let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=arguments.length>1?arguments[1]:void 0;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,p),(t=f.call(this,e,r)).args.float=-1,t.args.static=!0,t.args.hidden=!0,t.args.platform=!0,t.args.activated=!1,t}return e=p,(r=[{key:"update",value:function(){s(u(p.prototype),"update",this).call(this),this.args.active=!1;for(const t of this.standingUnder)t instanceof o.WindStone&&(t.args.inPlace=!0,this.args.active=!0)}}])&&a(e.prototype,r),n&&a(e,n),Object.defineProperty(e,"prototype",{writable:!1}),p}();t.StoneAltar=f}),require.register("actor/Stopper.js",function(t,e,r){"use strict";function n(t){"@babel/helpers - typeof";return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(t,"__esModule",{value:!0}),t.Stopper=void 0;var i=e("./BreakableBlock");function o(t,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,(o=i.key,void 0,"symbol"===n(a=function(t,e){if("object"!==n(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var i=r.call(t,e||"default");if("object"!==n(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(o,"string"))?a:String(a)),i)}var o,a}function a(){return(a="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=l(t)););return t}(t,e);if(n){var i=Object.getOwnPropertyDescriptor(n,e);return i.get?i.get.call(arguments.length<3?t:r):i.value}}).apply(this,arguments)}function s(t,e){return(s=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function c(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,i=l(t);if(e){var o=l(this).constructor;r=Reflect.construct(i,arguments,o)}else r=i.apply(this,arguments);return function(t,e){if(e&&("object"===n(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function l(t){return(l=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}let u=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&s(t,e)}(f,i.BreakableBlock);var e,r,n,u=c(f);function f(){var t;let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=arguments.length>1?arguments[1]:void 0;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,f),(t=u.call(this,e,r)).args.type="actor-item actor-breakable-block actor-stopper",t.args.height=16,t.args.float=-1,t}return e=f,(r=[{key:"collideA",value:function(t,e){return!!t.isVehicle||!this.broken&&(!this.broken&&2===e||Math.abs(t.args.ySpeed)>20&&0===e?!(t.args.ySpeed>0||t.ySpeedLast>0)||(t.args.groundAngle=0,t.args.x=this.args.x,t.args.xSpeed=0,t.args.ySpeed=Math.abs(t.args.gSpeed),t.args.falling=!0,t.args.bouncing=!1,t.args.jumping=!1,t.args.mode=0,this.break(),!1):!(t.args.jumping&&t.args.ySpeed>0||t.args.rolling)||(t.args.x=this.args.x,t.args.y=this.args.y,this.viewport.onFrameOut(1,()=>{t.args.groundAngle=0,t.args.falling=!0,t.args.animation="rolling",t.args.x=this.args.x,t.args.gSpeed=0,t.args.xSpeed=0,t.args.ySpeed=Math.abs(t.args.gSpeed)}),t.args.jumping&&(t.args.gSpeed=0,t.args.xSpeed=0,t.args.ySpeed=0,t.args.ignore=30,t.args.float=30,this.viewport.onFrameOut(30,()=>{t.args.xSpeed=0,t.args.ySpeed=10})),a(l(f.prototype),"collideA",this).call(this,t,e)))}}])&&o(e.prototype,r),n&&o(e,n),Object.defineProperty(e,"prototype",{writable:!1}),f}();t.Stopper=u}),require.register("actor/SuperRing.js",function(t,e,r){"use strict"}),require.register("actor/Switch.js",function(t,e,r){"use strict";function n(t){"@babel/helpers - typeof";return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(t,"__esModule",{value:!0}),t.Switch=void 0;var i=e("./PointActor"),o=e("../audio/Sfx");function a(t,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,(o=i.key,void 0,"symbol"===n(a=function(t,e){if("object"!==n(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var i=r.call(t,e||"default");if("object"!==n(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(o,"string"))?a:String(a)),i)}var o,a}function s(){return(s="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=u(t)););return t}(t,e);if(n){var i=Object.getOwnPropertyDescriptor(n,e);return i.get?i.get.call(arguments.length<3?t:r):i.value}}).apply(this,arguments)}function c(t,e){return(c=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function l(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,i=u(t);if(e){var o=u(this).constructor;r=Reflect.construct(i,arguments,o)}else r=i.apply(this,arguments);return function(t,e){if(e&&("object"===n(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function u(t){return(u=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}let f=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&c(t,e)}(p,i.PointActor);var e,r,n,f=l(p);function p(){var t,e;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,p);for(var r=arguments.length,n=new Array(r),i=0;i<r;i++)n[i]=arguments[i];return(e=f.call(this,...n)).args.type="actor-item actor-switch",e.args.width=32,e.args.height=10,e.removeTimer=null,e.args.active=!1,e.args.latch=e.args.latch||!1,e.activator=null,e.args.bindTo("active",t=>{e.box&&e.box.setAttribute("data-active",t?"true":"false")}),e.args.threshold=null!==(t=e.args.threshold)&&void 0!==t?t:100,e.ignore=0,e.args.activeTime=0,e}return e=p,(r=[{key:"update",value:function(){s(u(p.prototype),"update",this).call(this),this.ignore>0?this.ignore--:this.args.latch||(this.args.active?this.args.activeTime++:this.args.activeTime=0,this.args.activeTime>2&&(!this.activator||this.activator.args.standingOn!==this||this.activator.y===this.args.y)&&(this.args.active=!1,this.activator=null))}},{key:"updateEnd",value:function(){s(u(p.prototype),"updateEnd",this).call(this),this.args.active}},{key:"onRendered",value:function(t){s(u(p.prototype),"onRendered",this).call(this,t),this.box=this.findTag("div")}},{key:"collideA",value:function(t,e){if(t.args.y>=this.args.y)return!1;if(this.activator===t&&t.y>this.args.y)return this.ignore=8,!0;if(t.args.ySpeed<0)return!1;if(this.args.active&&t.y<this.y)return!0;if(!t.isEffect&&!t.isRegion){if(t.y>this.y-this.args.height+0)return!1;if(this.args.threshold&&t.args.weight<this.args.threshold)return!0;if(t.onRemove(()=>this.activator=null),t.y<=this.y-this.args.height){if(this.args.active||this.activate(t),this.ignore=8,this.args.active=!0,this.activator=t,t.args.falling&&t.args.ySpeed>1&&(t.args.ySpeed=1),this.activator&&Math.abs(this.activator.args.x-this.args.x)>4&&this.args.activeTime<1){const t=this.activator.args.xSpeed;this.viewport.onFrameOut(1,()=>{this.activator.args.gSpeed=t,this.activator.args.groundAngle=0})}return!0}return!1}}},{key:"activate",value:function(t){if(this.beep(),this.args.target&&this.viewport.actorsById[this.args.target]){this.viewport.actorsById[this.args.target].activate(t,this)}if(this.args.destroyLayer){const t=this.args.destroyLayer,e=this.viewport.args.layers[t];e&&(e.args.destroyed=!0)}if(this.args.water){var e,r;const t=this.viewport.actorsById[this.args.water],n=this.viewport.objDefs.get(this.args.setPoint);t.target=Number(t.y||0)-Number(n.y||0),t.args.fillSpeed=null!==(e=this.args.fillSpeed)&&void 0!==e?e:t.args.fillSpeed,t.args.drainSpeed=null!==(r=this.args.drainSpeed)&&void 0!==r?r:t.args.drainSpeed}const n=this.viewport.objDefs.get(this.args.point),i=this.viewport.objectPalette[this.args.spawn];i&&n&&this.viewport.spawn.add({object:new i({x:n.x,y:n.y})}),this.args.active=!0}},{key:"beep",value:function(){this.viewport&&(this.args.silent||o.Sfx.play("SWITCH_HIT"))}},{key:"sleep",value:function(){this.viewport&&this.def&&(this.args.x=this.def.get("x"),this.args.y=this.def.get("y"),this.onNextFrame(()=>{this.args.x=this.def.get("x"),this.args.y=this.def.get("y"),this.viewport.setColCell(this),this.args.xSpeed=0,this.args.ySpeed=0,this.args.pushed=0,this.args.float=0}))}},{key:"solid",get:function(){return this.args.active}}])&&a(e.prototype,r),n&&a(e,n),Object.defineProperty(e,"prototype",{writable:!1}),p}();t.Switch=f}),require.register("actor/Tails.js",function(t,e,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Tails=void 0;var n=e("./PointActor"),i=e("curvature/base/Tag"),o=e("./Spring"),a=e("../behavior/SkidDust"),s=e("../behavior/Spindash"),c=e("../behavior/Crouch"),l=e("../behavior/LookUp"),u=e("../behavior/EmeraldHalo"),f=e("../behavior/SuperForm"),p=e("../lib/Color"),h=e("../sprite/Png");function g(t){"@babel/helpers - typeof";return(g="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function d(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,O(n.key),n)}}function y(){return(y="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=w(t)););return t}(t,e);if(n){var i=Object.getOwnPropertyDescriptor(n,e);return i.get?i.get.call(arguments.length<3?t:r):i.value}}).apply(this,arguments)}function b(t,e){return(b=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function v(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=w(t);if(e){var i=w(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===g(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return m(t)}(this,r)}}function m(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function w(t){return(w=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function S(t,e,r){return(e=O(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function O(t){var e=function(t,e){if("object"!==g(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==g(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===g(e)?e:String(e)}let j=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&b(t,e)}(j,n.PointActor);var e,r,g,O=v(j);function j(){var t;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,j);for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];return S(m(t=O.call(this,...r)),"png",new h.Png("/Sonic/tails.png")),S(m(t),"pngTails",new h.Png("/Sonic/tails-tails.png")),t.args.canonical="Tails",t.behaviors.add(new a.SkidDust),t.behaviors.add(new s.Spindash),t.behaviors.add(new c.Crouch),t.behaviors.add(new l.LookUp),t.behaviors.add(new f.SuperForm),t.behaviors.add(new u.EmeraldHalo),t.args.type="actor-item actor-tails",t.accelNormal=.15,t.accelSuper=.24,t.args.accel=t.accelNormal,t.args.decel=.4,t.args.flySpeedMax=25,t.gSpeedMaxNormal=18,t.gSpeedMaxSuper=20,t.gSpeedMaxHyper=23,t.jumpForceNormal=11,t.jumpForceSuper=13,t.jumpForceHyper=15,t.args.maxFlyTimeNormal=350,t.args.maxFlyTimeSuper=600,t.args.maxFlyTimeHyper=1/0,t.args.flyBoostNormal=-1.5,t.args.flyBoostSuper=-1.75,t.args.flyBoostHyper=-2,t.args.flyBoost=t.args.flyBoostNormal,t.args.maxFlyTime=t.args.maxFlyTimeNormal,t.args.gSpeedMax=t.gSpeedMaxNormal,t.args.jumpForce=t.jumpForceNormal,t.args.gravity=.5,t.args.normalGravity=t.args.gravity,t.args.slowGravity=.125*t.args.gravity,t.args.width=16,t.args.height=34,t.args.weight=80,t.args.normalHeight=32,t.args.rollingHeight=28,t.willStick=!1,t.stayStuck=!1,t.flyTime=0,t.sparks=new Set,t.spriteSheet="/Sonic/tails.png",t.args.spriteSheet=`url('${t.args.spriteSheet}')`,t.spriteSheetTails="/Sonic/tails-tails.png",t.args.spriteSheetTails=`url('${t.spriteSheetTails}')`,t.costumes={SkyCamo:{h:120,s:.8,v:1},Copper:{h:-45,s:1,v:1},Patina:{h:90,s:.8,v:.85},Arctic:{h:0,s:0,v:.85}},t.args.minRingsSuper=40,t.args.minRingsHyper=60,t.transformTime=0,t}return e=j,(r=[{key:"onRendered",value:function(t){if(y(w(j.prototype),"onRendered",this).call(this,t),this.tails)return;this.tails=new i.Tag('<div class = "tails-tails">'),this.sprite.appendChild(this.tails.node),this.flyingSound=new Audio("/Sonic/tails-flying.wav"),this.flyingSound.volume=.35+-.3*Math.random(),this.flyingSound.loop=!0,this.rotatedSpriteSheet=this.spriteSheet,this.rotatedSpriteSheetTails=this.spriteSheetTails,this.autoStyle.get(this.box)["--sprite-sheet"]="spriteSheet",this.autoStyle.get(this.box)["--sprite-sheet-tails"]="spriteSheetTails";const e=()=>{var t,e,r;let n=Number(null!==(t=this.viewport.customColor.h)&&void 0!==t?t:0),i=Number(null!==(e=this.viewport.customColor.s)&&void 0!==e?e:1),o=Number(null!==(r=this.viewport.customColor.v)&&void 0!==r?r:1);this.rotateMainColor(n,i,o).then(()=>{this.box.node.style.setProperty("--sprite-sheet",`url(${this.args.rotatedSpriteSheet})`),this.box.node.style.setProperty("--sprite-sheet-tails",`url(${this.args.rotatedSpriteSheetTails})`)})},r=this.viewport.customColor.bindTo("h",e,{wait:0}),n=this.viewport.customColor.bindTo("s",e,{wait:0}),o=this.viewport.customColor.bindTo("v",e,{wait:0});this.onRemove(r),this.onRemove(n),this.onRemove(o),this.viewport.args.mainPallet&&this.costumes[this.viewport.args.mainPallet]&&Object.assign(this.viewport.customColor,this.costumes[this.viewport.args.mainPallet]),this.superSheet=0;const a={ffb691:"efefef",fcb400:"ebebeb",fc9000:"d4d4d4",b46c48:"b8b8b8"},s={ffb691:"fff79e",fcb400:"fefb00",fc9000:"fef500",b46c48:"ceae30"};this.superSpriteSheetLoaders||(this.superSpriteSheetLoaders=this.png.ready.then(()=>this.superSpriteSheets=[this.png.recolor(a).toUrl(),this.png.recolor(s).toUrl()]),this.superSpriteSheetTailsLoaders=this.pngTails.ready.then(()=>this.superSpriteSheetsTails=[this.pngTails.recolor(a).toUrl(),this.pngTails.recolor(s).toUrl()])),this.hyperSheet=0;const c={ffb691:"fcfcfc",fcb400:"fcfcfc",fc9000:"fcd8d8",b46c48:"fcb4b4"},l={ffb691:"fcfcfc",fcb400:"fcfcfc",fc9000:"fcd8fc",b46c48:"d8b4d8"},u={ffb691:"d8fcfc",fcb400:"fcfcfc",fc9000:"b4d8fc",b46c48:"90b4fc"},f={ffb691:"d8d8ff",fcb400:"b4b4d8",fc9000:"a4a4d8",b46c48:"6c6cb4"},p={ffb691:"d8fcfc",fcb400:"d8fcd8",fc9000:"b4fcb4",b46c48:"00fc24"},h={ffb691:"d8fcfc",fcb400:"d8fcb4",fc9000:"d8fc48",b46c48:"d8d800"},g={ffb691:"ffffff",fcb400:"fcfcfc",fc9000:"d8d8d8",b46c48:"b4b4b4"};this.hyperSpriteSheetLoader||(this.hyperSpriteSheetLoader=this.png.ready.then(()=>this.hyperSpriteSheets=[this.png.recolor(c).toUrl(),this.png.recolor(u).toUrl(),this.png.recolor(l).toUrl(),this.png.recolor(g).toUrl(),this.png.recolor(p).toUrl(),this.png.recolor(f).toUrl(),this.png.recolor(h).toUrl()]),this.hyperSpriteSheetLoaderTails=this.pngTails.ready.then(()=>this.hyperSpriteSheetsTails=[this.pngTails.recolor(c).toUrl(),this.pngTails.recolor(u).toUrl(),this.pngTails.recolor(l).toUrl(),this.pngTails.recolor(g).toUrl(),this.pngTails.recolor(p).toUrl(),this.pngTails.recolor(f).toUrl(),this.pngTails.recolor(h).toUrl()]))}},{key:"startle",value:function(){y(w(j.prototype),"startle",this).call(this),this.args.animation="startle",this.onNextFrame(()=>this.args.animation="startle")}},{key:"updateStart",value:function(){this.args.grinding&&this.args.falling&&this.args.ySpeed>0&&(this.args.animation="springdash",this.args.grinding=!1),y(w(j.prototype),"updateStart",this).call(this),this.args.dead&&(this.args.animation="dead")}},{key:"update",value:function(){if(this.isSuper){this.isHyper?(this.viewport.args.frameId%15==0&&(this.hyperSheet++,this.hyperSheet>=this.hyperSpriteSheets.length&&(this.hyperSheet=0)),this.hyperSpriteSheet=this.hyperSpriteSheets[this.hyperSheet],this.hyperSpriteSheetTails=this.hyperSpriteSheetsTails[this.hyperSheet],this.args.spriteSheet=`url(${this.hyperSpriteSheet})`,this.args.spriteSheetTails=`url(${this.hyperSpriteSheetTails})`):(this.viewport.args.frameId%15==0&&(this.superSheet++,this.superSheet>=this.superSpriteSheets.length&&(this.superSheet=0)),this.superSpriteSheet=this.superSpriteSheets[this.superSheet],this.superSpriteSheetTails=this.superSpriteSheetsTails[this.superSheet],this.args.spriteSheet=`url(${this.superSpriteSheet})`,this.args.spriteSheetTails=`url(${this.superSpriteSheetTails})`);const t=this.isHyper?30:60;this.viewport.args.frameId%t==0&&(this.args.rings<2&&(this.isHyper=!1,this.setProfile()),this.args.rings>0?this.args.rings--:(this.isSuper=!1,this.isHyper=!1,this.setProfile()))}this.args.isSuper=this.isSuper,this.args.isHyper=this.isHyper,(!this.args.falling&&this.groundTime>3||this.args.falling&&this.fallTime>90)&&(this.args.twistRamp=!1),0===this.yAxis&&(this.args.lookTime=0,this.args.cameraBias=0);const t=this.args.falling;if(this.viewport)if((this.args.bouncing||this.args.wasHanging)&&(this.args.flying=!1,this.flyingSound&&this.flyingSound.pause()),this.args.flying?(this.args.gravity=this.args.slowGravity,this.args.ySpeed=Math.min(3,this.args.ySpeed)):this.args.gravity=this.args.normalGravity,this.viewport.args.audio&&this.flyingSound&&(this.flyingSound.paused||(this.flyingSound.volume=.35+-.3*Math.random()),this.flyingSound.currentTime>.2&&(this.flyingSound.currentTime=0)),this.box){if(this.args.tailFlyCoolDown>0&&this.args.tailFlyCoolDown--,this.args.tailFlyCoolDown<0&&this.args.tailFlyCoolDown++,this.args.tailFlyCoolDown,t)this.args.flying&&!this.args.startled?this.yAxis>0&&this.args.flying?(this.flyingSound.pause(),this.args.animation="jumping",this.args.float=0,this.args.flying=!1,this.args.ySpeed=this.args.ySpeed>this.args.jumpForce?this.args.ySpeed:this.args.jumpForce):(this.viewport.args.audio&&this.flyingSound.play(),this.args.animation="flying",this.flyTime>this.args.maxFlyTime&&(this.args.animation="flying-tired")):this.args.jumping&&(this.flyingSound.pause(),this.args.animation="jumping");else{this.args.tailFlyCoolDown=0,this.flyingSound.pause();const t=this.args.direction,e=this.args.gSpeed,r=Math.abs(e),n=this.args.gSpeedMax;this.args.grinding?(this.args.animation="grinding",this.args.rolling=!1):this.args.rolling?this.args.animation="rolling":Math.sign(this.args.gSpeed)!==t&&Math.abs(this.args.gSpeed-t)>5?this.args.animation="skidding":r>n?this.args.animation="running-2":r>n/2?this.args.animation="running":this.args.moving&&this.args.gSpeed?this.args.animation="walking":this.args.teeter?this.args.animation="teeter":this.idleTime>60?this.args.animation="idle":this.args.animation="standing"}if(this.args.startled&&(this.flyingSound.pause(),this.args.flying=!1),y(w(j.prototype),"update",this).call(this),this.args.hangingFrom&&(this.args.flying=!1,this.flyTime=0,this.args.animation="hanging"),this.args.grinding&&!this.args.falling&&this.args.gSpeed){const t=new i.Tag('<div class = "particle-sparks">'),e=new i.Tag('<div class = "envelope-sparks">');e.appendChild(t.node);const r=this.rotatePoint(1.75*-this.args.gSpeed*this.args.direction,8),n=Math.sign(this.args.gSpeed);e.style({"--x":r[0]+this.x,"--y":r[1]+this.y+-3*Math.random,"z-index":0,"animation-delay":.25*-Math.random()+"s","--xMomentum":Math.max(Math.abs(this.args.gSpeed),4)*n,"--flip":n,"--angle":this.realAngle,opacity:2*Math.random()}),e.particle=t,this.viewport.particles.add(e),this.sparks.add(e),this.viewport.onFrameOut(30,()=>{this.viewport.particles.remove(e),this.sparks.delete(e)})}if(this.sparks.size)for(const t of this.sparks){const e=this.rotatePoint(1.75*this.args.direction,8);t.style({opacity:2*Math.random(),"--x":e[0]+this.x,"--y":e[1]+this.y})}this.args.flying&&this.flyTime++,this.args.falling?"springdash"===this.args.animation&&this.args.ySpeed>=0&&(this.args.animation="dropping"):(this.flyTime=0,this.args.flying=!1),this.args.twistRamp&&(this.args.animation="side-flip"),this.args.falling||(this.dashed=!1)}else y(w(j.prototype),"update",this).call(this)}},{key:"updateEnd",value:function(){y(w(j.prototype),"updateEnd",this).call(this)}},{key:"command_0",value:function(t){this.args.hangingFrom?y(w(j.prototype),"command_0",this).call(this):(y(w(j.prototype),"command_0",this).call(this,t),this.args.jumping&&(this.args.wasHanging||(this.args.falling?this.args.flying&&0===this.args.tailFlyCoolDown?this.args.tailFlyCoolDown=80:this.args.flying&&(this.flyTime>this.args.maxFlyTime||this.args.float)||(this.args.flying&&!this.args.float&&(this.args.ySpeed=this.args.flyBoost,this.args.float=8),this.args.tailFlyCoolDown=80,this.args.flying=!0,this.flyingSound.volume=.35+-.3*Math.random(),this.viewport.args.audio&&this.flyingSound.paused&&this.flyingSound.play()):this.args.tailFlyCoolDown=-80)))}},{key:"hold_0",value:function(t){this.args.flying&&t.time>10&&t.time<30&&this.flyTime<400&&(this.args.ySpeed*=.99,this.args.float=16)}},{key:"sleep",value:function(){this.flyingSound&&this.flyingSound.pause()}},{key:"collideA",value:function(t){t instanceof o.Spring&&this.onNextFrame(()=>{this.args.falling&&(this.springing=!0,this.args.animation="springdash")}),t.pop&&this.isHyper&&t.pop(this)}},{key:"damage",value:function(){this.args.flying=!1,this.flyingSound&&this.flyingSound.pause(),y(w(j.prototype),"damage",this).call(this)}},{key:"rotateMainColor",value:function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;const n={ffb691:new p.Color("ffb691").rotate(t,e,r).toString(),fcb400:new p.Color("fcb400").rotate(t,e,r).toString(),fc9000:new p.Color("fc9000").rotate(t,e,r).toString(),b46c48:new p.Color("b46c48").rotate(t,e,r).toString()};return this.png.ready.then(()=>{const t=this.png.recolor(n);this.args.rotatedSpriteSheet=this.rotatedSpriteSheet=this.spriteSheet=t.toUrl(),this.args.spriteSheet=`url(${this.spriteSheet})`}),this.pngTails.ready.then(()=>{const t=this.pngTails.recolor(n);this.args.rotatedSpriteSheetTails=this.rotatedSpriteSheetTails=this.spriteSheetTails=t.toUrl(),this.args.spriteSheetTails=`url(${this.spriteSheetTails})`}),Promise.all([this.png.ready,this.pngTails.ready])}},{key:"setProfile",value:function(){this.isHyper?(this.args.spriteSheet=`url('${this.hyperSpriteSheet}')`,this.args.spriteSheetTails=`url('${this.hyperSpriteSheetTails}')`,this.args.maxFlyTime=this.args.maxFlyTimeHyper,this.args.flyBoost=this.args.flyBoostHyper,this.args.gSpeedMax=this.gSpeedMaxHyper,this.args.jumpForce=this.jumpForceHyper,this.args.accel=this.accelSuper):this.isSuper?(this.args.spriteSheet=`url('${this.superSpriteSheet}')`,this.args.spriteSheetTails=`url('${this.superSpriteSheetTails}')`,this.args.maxFlyTime=this.args.maxFlyTimeSuper,this.args.flyBoost=this.args.flyBoostSuper,this.args.gSpeedMax=this.gSpeedMaxSuper,this.args.jumpForce=this.jumpForceSuper,this.args.accel=this.accelSuper):(this.args.spriteSheet=`url('${this.rotatedSpriteSheet}')`,this.args.spriteSheetTails=`url('${this.rotatedSpriteSheetTails}')`,this.args.maxFlyTime=this.args.maxFlyTimeNormal,this.args.flyBoost=this.args.flyBoostNormal,this.args.gSpeedMax=this.gSpeedMaxNormal,this.args.jumpForce=this.jumpForceNormal,this.args.accel=this.accelNormal)}},{key:"command_2",value:function(){if(this.viewport.collisions.has(this)){const t=this.viewport.collisions.get(this);for(const e of t.keys())this.carrying.size&&!this.carrying.has(e)||"function"==typeof e.lift&&e.lift(this)}}},{key:"command_3",value:function(){}},{key:"solid",get:function(){return!1}},{key:"canRoll",get:function(){return!0}},{key:"canFly",get:function(){return!0}},{key:"isEffect",get:function(){return!1}},{key:"controllable",get:function(){return!this.args.npc}}])&&d(e.prototype,r),g&&d(e,g),Object.defineProperty(e,"prototype",{writable:!1}),j}();t.Tails=j}),require.register("actor/TechnoSqueak.js",function(t,e,r){"use strict";function n(t){"@babel/helpers - typeof";return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(t,"__esModule",{value:!0}),t.TechnoSqueak=void 0;e("./Flickie");var i=e("curvature/base/Mixin"),o=e("./PointActor"),a=e("../behavior/Patrol"),s=e("../mixin/CanPop");function c(t,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,(o=i.key,void 0,"symbol"===n(a=function(t,e){if("object"!==n(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var i=r.call(t,e||"default");if("object"!==n(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(o,"string"))?a:String(a)),i)}var o,a}function l(){return(l="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=p(t)););return t}(t,e);if(n){var i=Object.getOwnPropertyDescriptor(n,e);return i.get?i.get.call(arguments.length<3?t:r):i.value}}).apply(this,arguments)}function u(t,e){return(u=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function f(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,i=p(t);if(e){var o=p(this).constructor;r=Reflect.construct(i,arguments,o)}else r=i.apply(this,arguments);return function(t,e){if(e&&("object"===n(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function p(t){return(p=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}let h=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&u(t,e)}(g,i.Mixin.from(o.PointActor,s.CanPop));var e,r,n,h=f(g);function g(){var t,e,r,n;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,g);for(var i=arguments.length,o=new Array(i),s=0;s<i;s++)o[s]=arguments[s];return(n=h.call(this,...o)).behaviors.add(new a.Patrol),n.args.type="actor-item actor-techno-squeak",n.args.animation="standing",n.args.accel=.75,n.args.decel=.5,n.args.gSpeedMax=15,n.args.jumpForce=5,n.args.gravity=.5,n.args.width=24,n.args.height=14,n.willStick=!0,n.stayStuck=!0,n.args.patrolPause=null!==(t=n.args.patrolPause)&&void 0!==t?t:20,n.args.patrolBeat=null!==(e=n.args.patrolBeat)&&void 0!==e?e:120,n.args.patrolSpeed=null!==(r=n.args.patrolSpeed)&&void 0!==r?r:4,n.args.tailOffset=0,n.stayStuck=!0,n}return e=g,(r=[{key:"onRendered",value:function(t){l(p(g.prototype),"onRendered",this).call(this,t),this.autoStyle.get(this.box)["--tailOffset"]="tailOffset",this.autoAttr.get(this.box)["data-color"]="color"}},{key:"update",value:function(){this.args.shotTelegraph,this.args.patrolBeat;const t=this.args.x-this.xLast;this.args.tailOffset+=isNaN(t)?0:t,this.box&&(this.args.moving&&this.args.gSpeed?this.box.setAttribute("data-animation","walking"):this.box.setAttribute("data-animation","standing")),l(p(g.prototype),"update",this).call(this),this.args.direction=Math.sign(this.args.gSpeed)}},{key:"effect",value:function(t){l(p(g.prototype),"effect",this).call(this,t)}},{key:"solid",get:function(){return!1}},{key:"isEffect",get:function(){return!1}}])&&c(e.prototype,r),n&&c(e,n),Object.defineProperty(e,"prototype",{writable:!1}),g}();t.TechnoSqueak=h}),require.register("actor/Tester.js",function(t,e,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Tester=void 0;var n=e("./PointActor"),i=(e("./Cursor"),e("../ObjectPalette"));function o(t){"@babel/helpers - typeof";return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function a(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,p(n.key),n)}}function s(t,e){return(s=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function c(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=u(t);if(e){var i=u(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===o(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return l(t)}(this,r)}}function l(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function u(t){return(u=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function f(t,e,r){return(e=p(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function p(t){var e=function(t,e){if("object"!==o(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==o(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===o(e)?e:String(e)}window.testRuns=[];let h=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&s(t,e)}(p,n.PointActor);var e,r,o,u=c(p);function p(){var t;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,p);for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];return f(l(t=u.call(this,...r)),"count",0),f(l(t),"char",null),t}return e=p,(r=[{key:"update",value:function(){if(this.char){const t=this.char.controller,e=4;5===this.char.age&&t.press(e,1),6===this.char.age&&t.press(e,0),this.char.readInput()}else{const t=i.ObjectPalette.sonic,e=this.count;this.char=new t({name:`Test #${e}`,x:this.x+-e%160+80,y:this.y});const r=this.char.args.bindTo("falling",()=>{const t=this.char.x;this.viewport.onFrameOut(5,()=>{console.log({count:e,landed:t,groundAngle:this.char.args.groundAngle,gSpeed:this.char.args.gSpeed})}),r()},{now:!1,frame:1});window.testRuns[e]=this.char,this.count++,this.viewport.spawn.add({object:this.char})}if(this.char.args.dead){const t=this.char;this.char=null,this.viewport.onFrameOut(100,()=>this.viewport.actors.remove(t))}else this.char.age>30&&(this.char.xAxis=1)}},{key:"updateEnd",value:function(){this.char}}])&&a(e.prototype,r),o&&a(e,o),Object.defineProperty(e,"prototype",{writable:!1}),p}();t.Tester=h}),require.register("actor/TextActor.js",function(t,e,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TextActor=void 0;var n=e("./PointActor"),i=e("../ui/CharacterString");function o(t){"@babel/helpers - typeof";return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function a(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,p(n.key),n)}}function s(){return(s="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=f(t)););return t}(t,e);if(n){var i=Object.getOwnPropertyDescriptor(n,e);return i.get?i.get.call(arguments.length<3?t:r):i.value}}).apply(this,arguments)}function c(t,e){return(c=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function l(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=f(t);if(e){var i=f(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===o(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return u(t)}(this,r)}}function u(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function f(t){return(f=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function p(t){var e=function(t,e){if("object"!==o(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==o(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===o(e)?e:String(e)}let h=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&c(t,e)}(g,n.PointActor);var e,r,o,h=l(g);function g(){var t;let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=arguments.length>1?arguments[1]:void 0;var n,o,a;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,g),t=h.call(this,e,r),n=u(t),a=-1,(o=p(o="float"))in n?Object.defineProperty(n,o,{value:a,enumerable:!0,configurable:!0,writable:!0}):n[o]=a,t.args.type="actor-item actor-text-actor",t.args.float=-1,t.args.static=!0,t.text=new i.CharacterString({value:""}),t.args.bindTo("content",r=>{t.text.args.value=r,t.text.args.color=e.color,t.args.width=r?18*r.length:0,t.args.height=18}),t}return e=g,(r=[{key:"onRendered",value:function(t){s(f(g.prototype),"onRendered",this).call(this,t),this.sprite=this.findTag("div.sprite"),this.text.render(this.sprite)}},{key:"solid",get:function(){return!1}},{key:"isEffect",get:function(){return!0}}])&&a(e.prototype,r),o&&a(e,o),Object.defineProperty(e,"prototype",{writable:!1}),g}();t.TextActor=h}),require.register("actor/TilesetSwapper.js",function(t,e,r){"use strict";function n(t){"@babel/helpers - typeof";return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(t,"__esModule",{value:!0}),t.TilesetSwapper=void 0;var i=e("./PointActor"),o=e("../effects/ScreenFire"),a=e("../BackdropPalette");function s(t,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,(o=i.key,void 0,"symbol"===n(a=function(t,e){if("object"!==n(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var i=r.call(t,e||"default");if("object"!==n(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(o,"string"))?a:String(a)),i)}var o,a}function c(t,e){return(c=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function l(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,i=u(t);if(e){var o=u(this).constructor;r=Reflect.construct(i,arguments,o)}else r=i.apply(this,arguments);return function(t,e){if(e&&("object"===n(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function u(t){return(u=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}let f=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&c(t,e)}(f,i.PointActor);var e,r,n,u=l(f);function f(t,e){var r;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,f),(r=u.call(this,t,e)).args.hidden=!0;new Image("../Sonic/tiles/azure-lake/azure-lake-burnt.png");if(a.BackdropPalette[r.args.backdrop]){const t=a.BackdropPalette[r.args.backdrop];r.args.backdrop=new t}return r}return e=f,(r=[{key:"activate",value:function(t,e){this.activated||(this.activated=!0,this.viewport.onFrameOut(15,()=>{const t=new o.ScreenFire;this.viewport.args.screenEffects.add(t),this.viewport.onFrameOut(300,()=>{this.viewport.args.screenEffects.remove(t),t.remove()}),this.viewport.onFrameOut(90,()=>{this.viewport.tileMap.replacements.set("/map/../Sonic/tiles/azure-lake/azure-lake.png","/map/../Sonic/tiles/azure-lake/azure-lake-burnt.png"),this.viewport.args.backdrop=this.args.backdrop,this.viewport.tileMap.replacements.set("/map/../Sonic/tiles/azure-lake/azure-lake-shapes.png","/map/../Sonic/tiles/azure-lake/azure-lake-burnt-shapes.png"),this.viewport.tileMap.replacements.set("/map/../Sonic/tiles/azure-lake/rolling.png","/map/../Sonic/tiles/azure-lake/rolling-burnt.png"),this.viewport.tileMap.replacements.set("/map/../Sonic/tiles/azure-lake/giant-loop.png","/map/../Sonic/tiles/azure-lake/giant-loop-burnt.png"),this.viewport.tileMap.replacements.set("/map/../Sonic/azure-lake-platform.png","/map/../Sonic/azure-lake-platform-burnt.png")})}))}}])&&s(e.prototype,r),n&&s(e,n),Object.defineProperty(e,"prototype",{writable:!1}),f}();t.TilesetSwapper=f}),require.register("actor/Torch.js",function(t,e,r){"use strict";function n(t){"@babel/helpers - typeof";return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(t,"__esModule",{value:!0}),t.Torch=void 0;var i=e("./PointActor");function o(t,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,(o=i.key,void 0,"symbol"===n(a=function(t,e){if("object"!==n(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var i=r.call(t,e||"default");if("object"!==n(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(o,"string"))?a:String(a)),i)}var o,a}function a(t,e){return(a=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function s(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,i=c(t);if(e){var o=c(this).constructor;r=Reflect.construct(i,arguments,o)}else r=i.apply(this,arguments);return function(t,e){if(e&&("object"===n(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function c(t){return(c=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}let l=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&a(t,e)}(l,i.PointActor);var e,r,n,c=s(l);function l(){var t;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,l);for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];return(t=c.call(this,...r)).args.width=16,t.args.height=32,t.args.type="actor-item actor-torch",t.args.float=-1,t}return e=l,(r=[{key:"solid",get:function(){return!1}}])&&o(e.prototype,r),n&&o(e,n),Object.defineProperty(e,"prototype",{writable:!1}),l}();t.Torch=l}),require.register("actor/Tornado.js",function(t,e,r){"use strict";function n(t){"@babel/helpers - typeof";return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(t,"__esModule",{value:!0}),t.Tornado=void 0;var i=e("./Vehicle"),o=e("curvature/base/Tag");function a(t,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,(o=i.key,void 0,"symbol"===n(a=function(t,e){if("object"!==n(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var i=r.call(t,e||"default");if("object"!==n(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(o,"string"))?a:String(a)),i)}var o,a}function s(){return(s="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=u(t)););return t}(t,e);if(n){var i=Object.getOwnPropertyDescriptor(n,e);return i.get?i.get.call(arguments.length<3?t:r):i.value}}).apply(this,arguments)}function c(t,e){return(c=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function l(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,i=u(t);if(e){var o=u(this).constructor;r=Reflect.construct(i,arguments,o)}else r=i.apply(this,arguments);return function(t,e){if(e&&("object"===n(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function u(t){return(u=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}let f=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&c(t,e)}(p,i.Vehicle);var e,r,n,f=l(p);function p(){var t;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,p);for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];return(t=f.call(this,...r)).args.type="actor-item actor-tornado",t.args.width=96,t.args.height=48,t.removeTimer=null,t.args.xSpeedMaxThrusting=64,t.args.xSpeedMaxOriginal=32,t.args.xSpeedMax=t.args.xSpeedMaxOriginal,t.args.gSpeedMax=5,t.args.decel=.15,t.args.accel=.5,t.args.seatHeight=14,t.args.seatForward=-32,t.args.skidTraction=.95,t.dustCount=0,t.args.flyAngle=-.25,t.args.particleScale=2,t.args.float=-1,t.args.thrusting=!1,t.args.landingGear=!0,t.args.jumpForce=8,t.args.fuelLevel=100,t.args.thrusterFill=0,t.args.noThrust=0,t.plane=new o.Tag('<div class = "plane">'),t.fuselage=new o.Tag('<div class = "fuselage">'),t.propeller=new o.Tag('<div class = "propeller">'),t.thruster=new o.Tag('<div class = "thruster">'),t.fuelMeter=new o.Tag('<div class = "fuel-meter">'),t.frontGear=new o.Tag('<div class = "front-landing-gear">'),t.rearGear=new o.Tag('<div class = "rear-landing-gear">'),t}return e=p,(r=[{key:"onRendered",value:function(t){s(u(p.prototype),"onRendered",this).call(this,t),this.box=this.findTag("div"),this.sprite=this.findTag("div.sprite"),this.sprite.appendChild(this.plane.node),this.thruster.appendChild(this.fuelMeter.node),this.plane.appendChild(this.thruster.node),this.plane.appendChild(this.propeller.node),this.plane.appendChild(this.frontGear.node),this.plane.appendChild(this.rearGear.node),this.plane.appendChild(this.fuselage.node),this.args.bindTo("landingGear",t=>{this.plane&&this.plane.setAttribute("data-landing-gear",t)}),this.args.bindTo("thrusting",t=>{this.plane&&this.plane.setAttribute("data-thrusting",t)})}},{key:"update",value:function(){if(this.occupant&&this.args.falling||(this.args.flyAngle=this.args.falling?.26:-.26,this.args.flying=!1,this.args.float=0),!this.args.thrusting&&Math.abs(this.args.xSpeed)<8?(this.args.float=0,this.args.flying=!1):this.args.falling&&(this.args.float=-1,this.args.flying=!0),!this.args.jumping&&0===this.args.xSpeed&&this.args.falling)return this.args.flying=!1,this.args.float=0,this.args.thrusting&&(this.args.crashed=!0,this.args.thrusting=!1,this.args.noThrust=Date.now()+500),void s(u(p.prototype),"update",this).call(this);const t=this.args.xSpeedMaxThrusting;if(this.args.thrusting&&this.args.fuelLevel<=0&&(this.args.thrusting=!1,this.args.noThrust=Date.now()+500,this.args.thrusterFill=Date.now()+500),this.args.thrusting?(this.args.xSpeedMax=this.args.xSpeedMaxThrusting,this.args.fuelLevel>0&&(this.args.fuelLevel-=.1)):(this.args.xSpeedMax=this.args.xSpeedMaxOriginal,this.args.thrusterFill<Date.now()&&this.args.fuelLevel<100&&(this.args.fuelLevel+=.25)),this.fuelMeter.style({"--fuelLevel":this.args.fuelLevel/100}),!this.args.thrusting&&Math.abs(this.args.xSpeed)>t&&(this.args.xSpeed-=.2*Math.sign(this.args.xSpeed)),this.args.thrusting&&(Math.sign(this.args.xSpeed)!==this.args.direction||Math.abs(this.args.xSpeed)<t)&&(this.args.falling||0!==this.args.xSpeed||(this.args.flyAngle=-.26,this.args.falling=!0,this.args.flying=!0,this.args.ySpeed=-5),this.args.xSpeed+=4*Math.sign(this.args.direction)),Math.abs(this.args.xSpeed)>this.args.xSpeedMax/2&&!this.args.thrusting&&!this.xAxis&&(this.args.xSpeed*=.95),Math.abs(this.args.xSpeed)>t&&(this.args.xSpeed=t*Math.sign(this.args.direction)),this.args.flying){if(0===this.args.ySpeed&&(this.args.flyAngle=0),this.args.landingGear?!this.args.thrusting&&this.args.flyAngle<Math.PI/4?this.args.flyAngle+=.005:this.args.thrusting&&this.args.flyAngle>-Math.PI/4&&(this.args.flyAngle-=.005):Math.abs(this.args.flyAngle)>.00125?this.args.flyAngle-=.00125*Math.sign(this.args.flyAngle):this.args.flyAngle=0,!this.args.xSpeed)return void(this.args.flying=!1);const t=this.args.flyAngle+.035*Math.sign(this.yAxis);if(this.args.flyAngle>0?this.args.xSpeed*=1.025:this.args.flyAngle>0&&(this.args.xSpeed/=1.025),this.yAxis&&Math.abs(t)<Math.PI/2&&(this.args.flyAngle=t),Math.sign(this.args.xSpeed)===this.args.direction){const t=this.args.xSpeed||this.args.gSpeed;this.args.ySpeed=Math.sin(this.args.flyAngle)*t*(this.args.direction||Math.sign(t))*2}}else!this.args.thrusting&&this.args.flyAngle<Math.PI/2&&this.args.ySpeed>0&&(this.args.flyAngle+=.025);this.args.flying&&(this.args.airAngle=this.args.flyAngle,this.args.jumping=!1),this.args.falling||(this.args.landingGear=!0,this.args.flyAngle=-.26),s(u(p.prototype),"update",this).call(this),this.args.flying&&(this.args.cameraMode="airplane")}},{key:"command_1",value:function(){this.args.falling&&(this.args.landingGear=!this.args.landingGear)}},{key:"hold_2",value:function(){!this.args.thrusting&&this.args.fuelLevel<=1||this.args.fuelLevel<=0||(this.args.crashed||this.args.noThrust>Date.now()?this.args.false=!0:this.args.thrusting=!0)}},{key:"release_2",value:function(){this.args.thrusting=!1,this.args.crashed=!1}},{key:"solid",get:function(){return!this.occupant}}])&&a(e.prototype,r),n&&a(e,n),Object.defineProperty(e,"prototype",{writable:!1}),p}();t.Tornado=f}),require.register("actor/ToxicBarrel.js",function(t,e,r){"use strict";function n(t){"@babel/helpers - typeof";return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(t,"__esModule",{value:!0}),t.ToxicBarrel=void 0;var i=e("./MarbleBlock"),o=e("./BarnacleTrap"),a=e("../audio/Sfx");function s(t,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,(o=i.key,void 0,"symbol"===n(a=function(t,e){if("object"!==n(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var i=r.call(t,e||"default");if("object"!==n(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(o,"string"))?a:String(a)),i)}var o,a}function c(){return(c="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=f(t)););return t}(t,e);if(n){var i=Object.getOwnPropertyDescriptor(n,e);return i.get?i.get.call(arguments.length<3?t:r):i.value}}).apply(this,arguments)}function l(t,e){return(l=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function u(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,i=f(t);if(e){var o=f(this).constructor;r=Reflect.construct(i,arguments,o)}else r=i.apply(this,arguments);return function(t,e){if(e&&("object"===n(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function f(t){return(f=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}let p=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&l(t,e)}(h,i.MarbleBlock);var e,r,n,p=u(h);function h(){var t;let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,h),(t=p.call(this,e)).args.type="actor-item actor-toxic-barrel",t.args.density=t.args.density||9.5,t.played=!1,t.args.width=23,t.args.height=32,t.args.weight=0,t}return e=h,(r=[{key:"collideA",value:function(t,e){return!(t instanceof o.BarnacleTrap)&&(this.args.falling&&t.pop&&this.pop(),"exploding"===this.args.animation?(t.damage&&t.damage(this,"explosion"),t.pop&&t.pop(this),!1):(this.args.falling&&t.args.modeTime<3&&(t.args.gSpeed=0),!this.args.falling&&c(f(h.prototype),"collideA",this).call(this,t,e)))}},{key:"update",value:function(){"exploding"===this.args.animation&&(this.args.float=-1,this.args.xSpeed=0,this.args.ySpeed=0,this.castRayQuick(32,0,[0,-16]),this.castRayQuick(32,Math.PI,[0,-16]),this.castRayQuick(32,Math.PI/2,[0,-16]),this.castRayQuick(32,Math.PI/-2,[0,-16])),c(f(h.prototype),"update",this).call(this),!this.args.falling&&this.ySpeedLast>3&&this.pop()}},{key:"pop",value:function(){this.args.animation="exploding";const t=this.viewport;t.onFrameOut(20,()=>t.actors.remove(this)),this.played||(a.Sfx.play("BARREL_EXPLODE"),this.played=!0)}},{key:"sleep",value:function(){this.args.x=this.def.get("x"),this.args.y=this.def.get("y"),this.ySpeedLast=0,this.onNextFrame(()=>{this.args.x=this.def.get("x"),this.args.y=this.def.get("y"),this.viewport.setColCell(this),this.args.xSpeed=0,this.args.ySpeed=0,this.args.pushed=0,this.args.float=0})}},{key:"solid",get:function(){return!this.args.falling&&!this.args.hangingFrom}}])&&s(e.prototype,r),n&&s(e,n),Object.defineProperty(e,"prototype",{writable:!1}),h}();t.ToxicBarrel=p}),require.register("actor/Tree.js",function(t,e,r){"use strict";function n(t){"@babel/helpers - typeof";return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(t,"__esModule",{value:!0}),t.Tree=void 0;var i=e("./PointActor"),o=e("./Coconut"),a=e("curvature/base/Tag");function s(t,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,(o=i.key,void 0,"symbol"===n(a=function(t,e){if("object"!==n(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var i=r.call(t,e||"default");if("object"!==n(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(o,"string"))?a:String(a)),i)}var o,a}function c(t,e){return(c=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function l(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,i=f(t);if(e){var o=f(this).constructor;r=Reflect.construct(i,arguments,o)}else r=i.apply(this,arguments);return function(t,e){if(e&&("object"===n(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function u(){return(u="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=f(t)););return t}(t,e);if(n){var i=Object.getOwnPropertyDescriptor(n,e);return i.get?i.get.call(arguments.length<3?t:r):i.value}}).apply(this,arguments)}function f(t){return(f=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}let p=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&c(t,e)}(h,i.PointActor);var e,r,n,p=l(h);function h(){var t;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,h);for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];return(t=p.call(this,...r)).args.type="actor-item actor-tree",t.args.z=-1,t.args.width=80,t.args.lean=0,t.args.coconutCount=4,t.args.shakeTime=0,t}return e=h,n=[{key:"fromDef",value:function(t){const e=u(f(h),"fromDef",this).call(this,t);return e.args.height=t.height,e}}],(r=[{key:"updateEnd",value:function(){u(f(h.prototype),"updateEnd",this).call(this);const t=this.viewport.collisions.get(this);let e=!1;if(t)for(const r of t.keys())"shakingTree"===r.args.currentState&&(e=Math.sign(this.args.x-r.args.x));this.args.shaking=e}},{key:"update",value:function(){this.viewport.args.frameId;this.args.shaking?(this.args.lean=Math.trunc(this.args.shakeTime/10)%2*2+-1*this.args.shaking,this.args.shakeTime++):(this.viewport.args.frameId-this.args.lastChange>1200&&this.args.coconutCount<4&&(this.args.coconutCount++,this.args.lastChange=this.viewport.args.frameId),this.args.shakeTime=0,this.args.lean=0),this.args.shakeTime>120&&(this.args.shakeTime=-60,this.dropFruit()),u(f(h.prototype),"update",this).call(this)}},{key:"onRendered",value:function(t){u(f(h.prototype),"onRendered",this).call(this,t),this.box&&!this.top&&(this.top=new a.Tag('<div class = "tree-top">'),this.box.appendChild(this.top.node)),this.autoStyle.get(this.box)["--count"]="coconutCount",this.autoStyle.get(this.box)["--lean"]="lean"}},{key:"collideA",value:function(t,e){t.controllable&&(Math.abs(t.args.x-this.args.x)>20||t.args.y>this.args.y+-this.args.height+64||(this.ignores.set(t,45),this.dropFruit(t)))}},{key:"dropFruit",value:function(t){if(this.args.coconutCount){this.args.coconutCount--,this.args.lastChange=this.viewport.args.frameId;const e=new o.Coconut;e.args.x=this.args.x,e.args.y=this.args.y+-this.args.height+48,this.viewport.spawn.add({object:e}),t?(this.viewport.onFrameOut(1,()=>e.args.xSpeed=t.args.xSpeed||t.args.direction*Math.random()*2),this.args.lean=5*Math.sign(t.args.xSpeed)):this.viewport.onFrameOut(1,()=>e.args.xSpeed=.5*this.args.lean+2.5*this.args.lean*Math.random()),this.viewport.onFrameOut(10,()=>this.args.lean=0)}}},{key:"sleep",value:function(){this.args.coconutCount=4}},{key:"solid",get:function(){return!1}}])&&s(e.prototype,r),n&&s(e,n),Object.defineProperty(e,"prototype",{writable:!1}),h}();t.Tree=p}),require.register("actor/TrickRamp.js",function(t,e,r){"use strict";function n(t){"@babel/helpers - typeof";return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(t,"__esModule",{value:!0}),t.TrickRamp=void 0;var i=e("./PointActor");function o(t,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,(o=i.key,void 0,"symbol"===n(a=function(t,e){if("object"!==n(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var i=r.call(t,e||"default");if("object"!==n(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(o,"string"))?a:String(a)),i)}var o,a}function a(t,e){return(a=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function s(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,i=l(t);if(e){var o=l(this).constructor;r=Reflect.construct(i,arguments,o)}else r=i.apply(this,arguments);return function(t,e){if(e&&("object"===n(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function c(){return(c="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=l(t)););return t}(t,e);if(n){var i=Object.getOwnPropertyDescriptor(n,e);return i.get?i.get.call(arguments.length<3?t:r):i.value}}).apply(this,arguments)}function l(t){return(l=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}let u=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&a(t,e)}(f,i.PointActor);var e,r,n,u=s(f);function f(){var t;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,f);for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];return(t=u.call(this,...r)).args.type="actor-item actor-trick-ramp",t.args.width=t.args.width||64,t.args.height=t.args.height||64,t.args.float=-1,t.args.static=1,t.args.power=t.args.power||24,t}return e=f,n=[{key:"fromDef",value:function(t){const e=c(l(f),"fromDef",this).call(this,t);return e.args.width=t.width,e.args.height=t.height,e}}],(r=[{key:"collideA",value:function(t){if(!(t.args.x<this.args.x)&&!(Math.abs(t.args.gSpeed)<8&&t.willJump)&&(!(Math.abs(t.args.gSpeed)<14&&t.args.rolling)||t.willJump)&&(t.willJump||t.args.rolling)){if(!t.args.falling){const e={label:"OFF THE RAMP",points:100,multiplier:1,color:"orange",special:!0};t.args.popChain.push(e),t.args.popCombo+=1}const e=Math.sign(t.args.gSpeed||t.gSpeedLast);t.args.trickRamp=!0,t.args.ignore=5,t.args.xSpeed=this.args.power*e,t.args.ySpeed=.65*-this.args.power,t.args.float=18,t.args.y-=5,t.args.rolling=!0,t.args.falling=!0,t.willJump=!1,t.dashed=!0}}}])&&o(e.prototype,r),n&&o(e,n),Object.defineProperty(e,"prototype",{writable:!1}),f}();t.TrickRamp=u}),require.register("actor/TruckBody.js",function(t,e,r){"use strict";function n(t){"@babel/helpers - typeof";return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(t,"__esModule",{value:!0}),t.TruckBody=void 0;var i=e("./PointActor"),o=e("curvature/base/Mixin");function a(t,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,(o=i.key,void 0,"symbol"===n(a=function(t,e){if("object"!==n(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var i=r.call(t,e||"default");if("object"!==n(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(o,"string"))?a:String(a)),i)}var o,a}function s(t,e){return(s=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function c(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,i=l(t);if(e){var o=l(this).constructor;r=Reflect.construct(i,arguments,o)}else r=i.apply(this,arguments);return function(t,e){if(e&&("object"===n(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function l(t){return(l=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}let u=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&s(t,e)}(u,o.Mixin.from(i.PointActor));var e,r,n,l=c(u);function u(){var t;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,u);for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];return(t=l.call(this,...r)).args.type="actor-item actor-truck-body",t.args.width=145,t.args.height=48,t.args.gravity=.4,t.args.float=-1,t.noClip=1,t.args.driver=t.args.driver||null,t.args.ramming=!0,t}return e=u,(r=[{key:"collideA",value:function(t,e){this.args.destroyed||(t.break?t.break(this):t.pop?t.pop(this):t.controllable&&t.damage(this))}}])&&a(e.prototype,r),n&&a(e,n),Object.defineProperty(e,"prototype",{writable:!1}),u}();t.TruckBody=u}),require.register("actor/TruckCab.js",function(t,e,r){"use strict";function n(t){"@babel/helpers - typeof";return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(t,"__esModule",{value:!0}),t.TruckCab=void 0;var i=e("./PointActor"),o=e("curvature/base/Mixin");function a(t,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,(o=i.key,void 0,"symbol"===n(a=function(t,e){if("object"!==n(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var i=r.call(t,e||"default");if("object"!==n(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(o,"string"))?a:String(a)),i)}var o,a}function s(t,e){return(s=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function c(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,i=l(t);if(e){var o=l(this).constructor;r=Reflect.construct(i,arguments,o)}else r=i.apply(this,arguments);return function(t,e){if(e&&("object"===n(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function l(t){return(l=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}let u=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&s(t,e)}(u,o.Mixin.from(i.PointActor));var e,r,n,l=c(u);function u(){var t;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,u);for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];return(t=l.call(this,...r)).args.type="actor-item actor-truck-cab",t.args.width=49,t.args.height=51,t.args.gravity=.4,t.args.float=-1,t.noClip=1,t.args.driver=t.args.driver||null,t.args.ramming=!0,t}return e=u,(r=[{key:"collideA",value:function(t,e){this.args.destroyed||(t.break?t.break(this):t.pop?t.pop(this):t.controllable&&t.damage(this))}}])&&a(e.prototype,r),n&&a(e,n),Object.defineProperty(e,"prototype",{writable:!1}),u}();t.TruckCab=u}),require.register("actor/Tumbler.js",function(t,e,r){"use strict";function n(t){"@babel/helpers - typeof";return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(t,"__esModule",{value:!0}),t.Tumbler=void 0;var i=e("./PointActor");function o(t,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,(o=i.key,void 0,"symbol"===n(a=function(t,e){if("object"!==n(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var i=r.call(t,e||"default");if("object"!==n(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(o,"string"))?a:String(a)),i)}var o,a}function a(){return(a="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=l(t)););return t}(t,e);if(n){var i=Object.getOwnPropertyDescriptor(n,e);return i.get?i.get.call(arguments.length<3?t:r):i.value}}).apply(this,arguments)}function s(t,e){return(s=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function c(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,i=l(t);if(e){var o=l(this).constructor;r=Reflect.construct(i,arguments,o)}else r=i.apply(this,arguments);return function(t,e){if(e&&("object"===n(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function l(t){return(l=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}let u=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&s(t,e)}(f,i.PointActor);var e,r,n,u=c(f);function f(){var t;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,f);for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];return(t=u.call(this,...r)).args.decel=.1,t.args.width=96,t.args.height=35,t.args.type="actor-item actor-tumbler",t.args.color=t.args.color||["red","green","blue"][Math.trunc(3*Math.random())],t.tumbling=!1,t.bounced=0,t}return e=f,(r=[{key:"onRendered",value:function(t){a(l(f.prototype),"onRendered",this).call(this,t),this.autoAttr.get(this.box)["data-color"]="color",this.autoAttr.get(this.box)["data-model"]="model"}},{key:"update",value:function(){this.tumbling&&!this.args.falling&&(this.args.xSpeed=this.xSpeedLast,this.args.ySpeed=Math.max(-10,-this.ySpeedLast),this.args.y--,this.args.falling=!0,this.bounced++),this.tumbling,this.noClip=!!this.bounced,this.noClip&&(this.args.xSpeed=this.args.gSpeed=0),a(l(f.prototype),"update",this).call(this)}},{key:"collideA",value:function(t,e){if(!t.controllable&&!t.isVehicle||this.args.falling)return;const r=t.args.gSpeed||t.args.xSpeed;Math.abs(r)>8&&(this.args.animation="tumbling",this.args.xSpeed=r+5*Math.random(),this.args.ySpeed=Math.max(-10,-Math.abs(.25*r)+-2*Math.random()),this.args.falling=!0,this.tumbling=!0,this.isGhost=!0),a(l(f.prototype),"collideA",this).call(this,t,e)}}])&&o(e.prototype,r),n&&o(e,n),Object.defineProperty(e,"prototype",{writable:!1}),f}();t.Tumbler=u}),require.register("actor/Turtloid.js",function(t,e,r){"use strict";function n(t){"@babel/helpers - typeof";return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(t,"__esModule",{value:!0}),t.Turtloid=void 0;var i=e("./Block");e("../audio/Sfx");function o(t,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,(o=i.key,void 0,"symbol"===n(a=function(t,e){if("object"!==n(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var i=r.call(t,e||"default");if("object"!==n(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(o,"string"))?a:String(a)),i)}var o,a}function a(){return(a="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=l(t)););return t}(t,e);if(n){var i=Object.getOwnPropertyDescriptor(n,e);return i.get?i.get.call(arguments.length<3?t:r):i.value}}).apply(this,arguments)}function s(t,e){return(s=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function c(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,i=l(t);if(e){var o=l(this).constructor;r=Reflect.construct(i,arguments,o)}else r=i.apply(this,arguments);return function(t,e){if(e&&("object"===n(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function l(t){return(l=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}let u=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&s(t,e)}(f,i.Block);var e,r,n,u=c(f);function f(){var t;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,f);for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];return(t=u.call(this,...r)).args.width=56,t.args.height=24,t.args.platform=1,t.args.float=-1,t.args.type="actor-item actor-turtloid",t.args.static=0,t.args.pathSpeed=4,t}return e=f,(r=[{key:"updateStart",value:function(){!this.standingUnder.size||this.others.guard&&!this.others.guard.removed?this.otherDefs.path=null:this.otherDefs.path=this.otherDefs.ridePath,a(l(f.prototype),"updateStart",this).call(this),this.xLast&&(this.args.direction=Math.sign(this.args.x-this.xLast)||this.args.direction);const t=this.xLast-this.args.x,e=this.yLast-this.args.y;this.args.animation=t?"swimming":e?"sinking":"idle"}}])&&o(e.prototype,r),n&&o(e,n),Object.defineProperty(e,"prototype",{writable:!1}),f}();t.Turtloid=u}),require.register("actor/TwistRamp.js",function(t,e,r){"use strict";function n(t){"@babel/helpers - typeof";return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(t,"__esModule",{value:!0}),t.TwistRamp=void 0;var i=e("./PointActor");function o(t,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,(o=i.key,void 0,"symbol"===n(a=function(t,e){if("object"!==n(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var i=r.call(t,e||"default");if("object"!==n(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(o,"string"))?a:String(a)),i)}var o,a}function a(t,e){return(a=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function s(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,i=l(t);if(e){var o=l(this).constructor;r=Reflect.construct(i,arguments,o)}else r=i.apply(this,arguments);return function(t,e){if(e&&("object"===n(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function c(){return(c="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=l(t)););return t}(t,e);if(n){var i=Object.getOwnPropertyDescriptor(n,e);return i.get?i.get.call(arguments.length<3?t:r):i.value}}).apply(this,arguments)}function l(t){return(l=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}let u=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&a(t,e)}(f,i.PointActor);var e,r,n,u=s(f);function f(){var t;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,f);for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];return(t=u.call(this,...r)).args.type="actor-item actor-twist-ramp",t.args.width=t.args.width||64,t.args.height=t.args.height||64,t.args.float=-1,t.args.static=1,t.args.power=t.args.power||24,t}return e=f,n=[{key:"fromDef",value:function(t){const e=c(l(f),"fromDef",this).call(this,t);return e.args.width=t.width,e.args.height=t.height,e}}],(r=[{key:"collideA",value:function(t){if(!(t.args.x<this.args.x)&&!(Math.abs(t.args.gSpeed)<8&&t.willJump)&&(!(Math.abs(t.args.gSpeed)<14&&t.args.rolling)||t.willJump)&&Math.abs(t.args.gSpeed)>8){const e=Math.sign(t.args.gSpeed||t.gSpeedLast);t.args.twistRamp=!0,t.args.ignore=5,0===t.args.mode?(t.args.xSpeed=this.args.power*e,t.args.ySpeed=.65*-this.args.power,t.args.y-=5):2===t.args.mode?(t.args.xSpeed=-this.args.power*e,t.args.ySpeed=.65*this.args.power,t.args.y+=5):3===t.args.mode?(t.args.xSpeed=.65*-this.args.power,t.args.ySpeed=-this.args.power*e,t.args.x-=5):1===t.args.mode&&(t.args.xSpeed=.65*this.args.power,t.args.ySpeed=this.args.power*e,t.args.x+=5),t.args.float=18,t.args.rolling=!0,t.args.falling=!0,t.willJump=!1,t.dashed=!0}}}])&&o(e.prototype,r),n&&o(e,n),Object.defineProperty(e,"prototype",{writable:!1}),f}();t.TwistRamp=u}),require.register("actor/Umbrella.js",function(t,e,r){"use strict";function n(t){"@babel/helpers - typeof";return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(t,"__esModule",{value:!0}),t.Umbrella=void 0;var i=e("./PointActor");function o(t,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,(o=i.key,void 0,"symbol"===n(a=function(t,e){if("object"!==n(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var i=r.call(t,e||"default");if("object"!==n(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(o,"string"))?a:String(a)),i)}var o,a}function a(t,e){return(a=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function s(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,i=l(t);if(e){var o=l(this).constructor;r=Reflect.construct(i,arguments,o)}else r=i.apply(this,arguments);return function(t,e){if(e&&("object"===n(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function c(){return(c="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=l(t)););return t}(t,e);if(n){var i=Object.getOwnPropertyDescriptor(n,e);return i.get?i.get.call(arguments.length<3?t:r):i.value}}).apply(this,arguments)}function l(t){return(l=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}let u=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&a(t,e)}(f,i.PointActor);var e,r,n,u=s(f);function f(){var t,e;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,f);for(var r=arguments.length,n=new Array(r),i=0;i<r;i++)n[i]=arguments[i];return(e=u.call(this,...n)).args.width=20,e.args.height=null!==(t=e.args.height)&&void 0!==t?t:80,e.args.type="actor-item actor-umbrella",e}return e=f,n=[{key:"fromDef",value:function(t){const e=c(l(f),"fromDef",this).call(this,t);return e.args.width=t.width,e.args.height=t.height,e}}],(r=[{key:"solid",get:function(){return!1}}])&&o(e.prototype,r),n&&o(e,n),Object.defineProperty(e,"prototype",{writable:!1}),f}();t.Umbrella=u}),require.register("actor/UnbreakableCrate.js",function(t,e,r){"use strict";function n(t){"@babel/helpers - typeof";return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(t,"__esModule",{value:!0}),t.UnbreakableCrate=void 0;e("./PointActor");var i=e("./Block");function o(t,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,(o=i.key,void 0,"symbol"===n(a=function(t,e){if("object"!==n(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var i=r.call(t,e||"default");if("object"!==n(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(o,"string"))?a:String(a)),i)}var o,a}function a(){return(a="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=l(t)););return t}(t,e);if(n){var i=Object.getOwnPropertyDescriptor(n,e);return i.get?i.get.call(arguments.length<3?t:r):i.value}}).apply(this,arguments)}function s(t,e){return(s=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function c(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,i=l(t);if(e){var o=l(this).constructor;r=Reflect.construct(i,arguments,o)}else r=i.apply(this,arguments);return function(t,e){if(e&&("object"===n(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function l(t){return(l=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}let u=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&s(t,e)}(f,i.Block);var e,r,n,u=c(f);function f(t,e){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,f),(r=u.call(this,t,e)).args.type="actor-item actor-unbreakable-crate",r.args.width=64,r.args.height=64,r.args.static=!1,r}return e=f,(r=[{key:"update",value:function(){if(this.viewport&&this.args.gate){this.viewport.actorsById[this.args.gate].args.hitPoints||this.viewport.actors.remove(this)}a(l(f.prototype),"update",this).call(this)}},{key:"collideA",value:function(t,e){return!0}},{key:"damage",value:function(t,e){return!0}}])&&o(e.prototype,r),n&&o(e,n),Object.defineProperty(e,"prototype",{writable:!1}),f}();t.UnbreakableCrate=u}),require.register("actor/Vehicle.js",function(t,e,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Vehicle=void 0;var n=e("./PointActor");function i(t){"@babel/helpers - typeof";return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function o(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,f(n.key),n)}}function a(){return(a="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=u(t)););return t}(t,e);if(n){var i=Object.getOwnPropertyDescriptor(n,e);return i.get?i.get.call(arguments.length<3?t:r):i.value}}).apply(this,arguments)}function s(t,e){return(s=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function c(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=u(t);if(e){var o=u(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===i(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return l(t)}(this,r)}}function l(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function u(t){return(u=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function f(t){var e=function(t,e){if("object"!==i(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==i(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===i(e)?e:String(e)}let p=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&s(t,e)}(h,n.PointActor);var e,r,i,p=c(h);function h(){var t,e,r,n;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,h);for(var i=arguments.length,o=new Array(i),a=0;a<i;a++)o[a]=arguments[a];return t=p.call(this,...o),e=l(t),n=!1,(r=f(r="dead"))in e?Object.defineProperty(e,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[r]=n,t}return e=h,(r=[{key:"update",value:function(){this.occupant&&(this.running=this.occupant.running,this.crawling=this.occupant.crawling),a(u(h.prototype),"update",this).call(this)}},{key:"collideA",value:function(t,e){if(t.noClip)return!1;if(t.controllable){if(t.args.falling&&this.y+-t.y+24<=this.args.seatHeight)return!1;if(t.args.ySpeed>0&&!this.occupant){const e=this.args.seatHeight||0;return t.args.ySpeed=0,t.args.y=this.y+-e+1,t.args.x=this.x,t.args.standingOn=this,!0}return!1}return!(t.y>=this.y)&&(t.args.float||(t.args.ySpeed=-t.args.ySpeed,t.args.xSpeed=t.args.xSpeed||5*t.args.direction,t.args.ySpeed>-5&&(t.args.ySpeed=-5)),!1)}},{key:"standBelow",value:function(t){t.controllable||(t.args.ySpeed=-t.args.ySpeed,t.args.xSpeed=t.args.xSpeed||5*t.args.direction,t.args.ySpeed>-5&&(t.args.ySpeed=-5))}},{key:"isVehicle",get:function(){return!0}},{key:"sleep",value:function(){a(u(h.prototype),"sleep",this).call(this),this.dead&&this.viewport.actors.remove(this)}}])&&o(e.prototype,r),i&&o(e,i),Object.defineProperty(e,"prototype",{writable:!1}),h}();t.Vehicle=p}),require.register("actor/Voltorb.js",function(t,e,r){"use strict";function n(t){"@babel/helpers - typeof";return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(t,"__esModule",{value:!0}),t.Voltorb=void 0;var i=e("../actor/GohlaBall");function o(t,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,(o=i.key,void 0,"symbol"===n(a=function(t,e){if("object"!==n(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var i=r.call(t,e||"default");if("object"!==n(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(o,"string"))?a:String(a)),i)}var o,a}function a(){return(a="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=l(t)););return t}(t,e);if(n){var i=Object.getOwnPropertyDescriptor(n,e);return i.get?i.get.call(arguments.length<3?t:r):i.value}}).apply(this,arguments)}function s(t,e){return(s=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function c(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,i=l(t);if(e){var o=l(this).constructor;r=Reflect.construct(i,arguments,o)}else r=i.apply(this,arguments);return function(t,e){if(e&&("object"===n(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function l(t){return(l=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}let u=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&s(t,e)}(f,i.GohlaBall);var e,r,n,u=c(f);function f(){var t;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,f);for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];return(t=u.call(this,...r)).args.type="actor-item actor-gohla-ball actor-voltorb",t}return e=f,(r=[{key:"update",value:function(){if(a(l(f.prototype),"update",this).call(this),!this.viewport)return;if(!this.viewport.controlActor)return;const t=this.viewport.controlActor;this.direction=Math.sign(this.x-t.x),this.args.facing=this.direction<0?"left":"right",Math.abs(t.y-this.y)<=16&&Math.abs(t.x-this.x)<34?(this.args.animation="sparking",t.damage(this,"electric")):t.args.dead||t.args.mercy||(this.args.animation="standing")}}])&&o(e.prototype,r),n&&o(e,n),Object.defineProperty(e,"prototype",{writable:!1}),f}();t.Voltorb=u}),require.register("actor/WaterController.js",function(t,e,r){"use strict";function n(t){"@babel/helpers - typeof";return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(t,"__esModule",{value:!0}),t.WaterController=void 0;var i=e("./PointActor");function o(t,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,(o=i.key,void 0,"symbol"===n(a=function(t,e){if("object"!==n(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var i=r.call(t,e||"default");if("object"!==n(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(o,"string"))?a:String(a)),i)}var o,a}function a(){return(a="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=l(t)););return t}(t,e);if(n){var i=Object.getOwnPropertyDescriptor(n,e);return i.get?i.get.call(arguments.length<3?t:r):i.value}}).apply(this,arguments)}function s(t,e){return(s=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function c(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,i=l(t);if(e){var o=l(this).constructor;r=Reflect.construct(i,arguments,o)}else r=i.apply(this,arguments);return function(t,e){if(e&&("object"===n(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function l(t){return(l=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}let u=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&s(t,e)}(f,i.PointActor);var e,r,n,u=c(f);function f(t,e){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,f),(r=u.call(this,t,e)).args.activated=!1,r.args.levelLimit=r.args.levelLimit||0,r.args.levelSpeed=r.args.levelSpeed||1,r.args.level=r.args.level||0,r.args.static=!0,r.args.hidden=!0,r}return e=f,(r=[{key:"updateStart",value:function(){a(l(f.prototype),"updateStart",this).call(this),this.args.switch&&!this.switch&&(this.switch=this.viewport.actorsById[this.args.switch]),this.switch&&this.switch.args.active>0&&this.activate(this.switch.activator,this.switch)}},{key:"update",value:function(){if(this.args.level<this.args._levelLimit&&(this.args.level+=this.args.levelSpeed||0),this.args.level>this.args._levelLimit){this.args.levelSpeed=0,this.args.level=this.args._levelLimit;const t=this.viewport;t.onFrameOut(30,()=>{if(t.auras.delete(this),void 0!==this.args.target){const e=t.actorsById[this.args.target];t.auras.delete(e)}})}}},{key:"activate",value:function(t,e){if(!this.args.activated&&(this.args._levelLimit=this.args.levelLimit||4096,this.viewport.auras.add(this),this.args.activated=!0,void 0!==this.args.target&&this.viewport.actorsById[this.args.target])){const e=this.viewport.actorsById[this.args.target];this.viewport.auras.add(e),e.activate(t,this)}}}])&&o(e.prototype,r),n&&o(e,n),Object.defineProperty(e,"prototype",{writable:!1}),f}();t.WaterController=u}),require.register("actor/WaterFall.js",function(t,e,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.WaterFall=void 0;var n=e("./PointActor");function i(t){"@babel/helpers - typeof";return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function o(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,f(n.key),n)}}function a(t,e){return(a=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function s(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=u(t);if(e){var o=u(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===i(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return c(t)}(this,r)}}function c(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function l(){return(l="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=u(t)););return t}(t,e);if(n){var i=Object.getOwnPropertyDescriptor(n,e);return i.get?i.get.call(arguments.length<3?t:r):i.value}}).apply(this,arguments)}function u(t){return(u=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function f(t){var e=function(t,e){if("object"!==i(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==i(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===i(e)?e:String(e)}let p=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&a(t,e)}(h,n.PointActor);var e,r,i,p=s(h);function h(){var t,e,r,n,i;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,h);for(var o=arguments.length,a=new Array(o),s=0;s<o;s++)a[s]=arguments[s];return e=p.call(this,...a),r=c(e),i=-1,(n=f(n="float"))in r?Object.defineProperty(r,n,{value:i,enumerable:!0,configurable:!0,writable:!0}):r[n]=i,e.args.width=e.args.width||32,e.args.height=e.args.height||64,e.args.upward=null!==(t=e.args.upward)&&void 0!==t&&t,e.args.type="actor-item actor-water-fall",e.args.active=!1,e.args.static=!0,e}return e=h,i=[{key:"fromDef",value:function(t){const e=l(u(h),"fromDef",this).call(this,t);return e.args.width=t.width,e.args.height=t.height,e.args.toHeight=t.toHeight||0,e.args.x=t.x+32,e.args.yOriginal=t.y,e}}],(r=[{key:"onRendered",value:function(){l(u(h.prototype),"onRendered",this).call(this),this.autoAttr.get(this.box)["data-upward"]="upward"}},{key:"wakeUp",value:function(){this.switch=this.viewport.actorsById[this.args.switch]}},{key:"update",value:function(){if(l(u(h.prototype),"update",this).call(this),this.args.toHeight!==this.args.height){const t=this.args.toHeight-this.args.height,e=32*Math.sign(t);t<=e?(this.args.height=this.args.toHeight,this.args.y=this.args.yOriginal+this.args.toHeight):(this.args.height+=e,this.args.y+=e)}this.switch&&this.switch.args.active>0&&!this.args.active&&(this.args.active=!0,this.args.toHeight=this.args.openHeight,this.args.y-=this.args.openOffset)}},{key:"solid",get:function(){return!1}},{key:"isEffect",get:function(){return!0}}])&&o(e.prototype,r),i&&o(e,i),Object.defineProperty(e,"prototype",{writable:!1}),h}();t.WaterFall=p}),require.register("actor/WaterJet.js",function(t,e,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.WaterJet=void 0;var n=e("./PointActor");function i(t){"@babel/helpers - typeof";return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function o(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,f(n.key),n)}}function a(t,e){return(a=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function s(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=u(t);if(e){var o=u(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===i(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return c(t)}(this,r)}}function c(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function l(){return(l="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=u(t)););return t}(t,e);if(n){var i=Object.getOwnPropertyDescriptor(n,e);return i.get?i.get.call(arguments.length<3?t:r):i.value}}).apply(this,arguments)}function u(t){return(u=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function f(t){var e=function(t,e){if("object"!==i(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==i(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===i(e)?e:String(e)}let p=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&a(t,e)}(h,n.PointActor);var e,r,i,p=s(h);function h(){var t,e,r,n;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,h);for(var i=arguments.length,o=new Array(i),a=0;a<i;a++)o[a]=arguments[a];return t=p.call(this,...o),e=c(t),n=-1,(r=f(r="float"))in e?Object.defineProperty(e,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[r]=n,t.args.width=t.args.width||32,t.args.height=t.args.height||64,t.args.type="actor-item actor-water-jet",t.args.active=!1,t.args.static=!0,t}return e=h,i=[{key:"fromDef",value:function(t){const e=l(u(h),"fromDef",this).call(this,t);return e.args.width=t.width,e.args.height=t.height,e.args.x=t.x+t.width/2,e}}],(r=[{key:"wakeUp",value:function(){this.switch=this.viewport.actorsById[this.args.switch]}},{key:"update",value:function(){l(u(h.prototype),"update",this).call(this),this.viewport&&this.args.switch&&this.switch&&this.switch.args.active&&!this.args.active&&(this.args.active=!0,this.onNextFrame(()=>{this.args.x+=.5*this.args.openWidth+-.5*this.args.width,this.args.width=this.args.openWidth}))}},{key:"solid",get:function(){return!1}},{key:"isEffect",get:function(){return!0}}])&&o(e.prototype,r),i&&o(e,i),Object.defineProperty(e,"prototype",{writable:!1}),h}();t.WaterJet=p}),require.register("actor/WaterSpout.js",function(t,e,r){"use strict";function n(t){"@babel/helpers - typeof";return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(t,"__esModule",{value:!0}),t.WaterSpout=void 0;var i=e("./PointActor");function o(t,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,(o=i.key,void 0,"symbol"===n(a=function(t,e){if("object"!==n(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var i=r.call(t,e||"default");if("object"!==n(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(o,"string"))?a:String(a)),i)}var o,a}function a(t,e){return(a=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function s(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,i=l(t);if(e){var o=l(this).constructor;r=Reflect.construct(i,arguments,o)}else r=i.apply(this,arguments);return function(t,e){if(e&&("object"===n(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function c(){return(c="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=l(t)););return t}(t,e);if(n){var i=Object.getOwnPropertyDescriptor(n,e);return i.get?i.get.call(arguments.length<3?t:r):i.value}}).apply(this,arguments)}function l(t){return(l=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}let u=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&a(t,e)}(f,i.PointActor);var e,r,n,u=s(f);function f(){var t,e,r;let n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=arguments.length>1?arguments[1]:void 0;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,f),(r=u.call(this,n,i)).args.type="actor-item actor-water-spout",r.args.float=null!==(t=r.args.float)&&void 0!==t?t:-1,r.args.static=null===(e=r.args.static)||void 0===e||e,r.args.width=n.width||32,r.args.height=n.height||64,r}return e=f,n=[{key:"fromDef",value:function(t){const e=c(l(f),"fromDef",this).call(this,t);return e.args.rotation=t.rotation,e.args.height=t.height,e}}],(r=[{key:"solid",get:function(){return!1}}])&&o(e.prototype,r),n&&o(e,n),Object.defineProperty(e,"prototype",{writable:!1}),f}();t.WaterSpout=u}),require.register("actor/WindStone.js",function(t,e,r){"use strict";function n(t){"@babel/helpers - typeof";return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(t,"__esModule",{value:!0}),t.WindStone=void 0;var i=e("../ui/CharacterString"),o=e("./PointActor");function a(t,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,(o=i.key,void 0,"symbol"===n(a=function(t,e){if("object"!==n(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var i=r.call(t,e||"default");if("object"!==n(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(o,"string"))?a:String(a)),i)}var o,a}function s(){return(s="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=f(t)););return t}(t,e);if(n){var i=Object.getOwnPropertyDescriptor(n,e);return i.get?i.get.call(arguments.length<3?t:r):i.value}}).apply(this,arguments)}function c(t,e){return(c=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function l(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,i=f(t);if(e){var o=f(this).constructor;r=Reflect.construct(i,arguments,o)}else r=i.apply(this,arguments);return function(t,e){if(e&&("object"===n(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return u(t)}(this,r)}}function u(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function f(t){return(f=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}let p=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&c(t,e)}(h,o.PointActor);var e,r,n,p=l(h);function h(){var t;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,h);for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];return(t=p.call(this,...r)).args.width=8,t.args.height=24,t.args.type="actor-item actor-wind-stone",t.args.inPlace=!1,t.label=new i.CharacterString({value:"❷"}),t.args.charStrings=[t.label],t.args.bindTo("inPlace",e=>{e?t.args.charStrings.splice(0):t.args.charStrings[0]=t.label}),t.bindTo("carriedBy",e=>{if(t.cX&&(t.cX(),t.cX=null),t.cY&&(t.cY(),t.cY=null),e)t.cX=e.args.bindTo("x",r=>t.args.x=r+8*e.args.direction),t.cY=e.args.bindTo("y",e=>t.args.y=e+-16),e.carrying.add(u(t)),t.args.float=-1,t.args.charStrings.splice(0);else if(t.carriedBy){const e=t.carriedBy;t.carriedBy=null,t.args.xSpeed=e.args.xSpeed,t.args.ySpeed=e.args.ySpeed,t.args.xSpeed+=4*Math.sign(e.args.gSpeed||e.args.xSpeed),t.args.ySpeed-=4,e.carrying.delete(u(t)),t.args.falling=!0,t.args.float=0,t.args.inPlace||(t.args.charStrings[0]=t.label)}}),t}return e=h,(r=[{key:"lift",value:function(t){this.args.inPlace||(this.carriedBy!==t?this.carriedBy=t:this.carriedBy=null)}},{key:"update",value:function(){s(f(h.prototype),"update",this).call(this),this.args.inPlace&&(this.args.x+=Math.sign(this.args.standingOn.args.x-this.args.x))}},{key:"solid",get:function(){return!1}}])&&a(e.prototype,r),n&&a(e,n),Object.defineProperty(e,"prototype",{writable:!1}),h}();t.WindStone=p}),require.register("actor/Window.js",function(t,e,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Window=void 0;var n=e("./PointActor");function i(t){"@babel/helpers - typeof";return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function o(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,u(n.key),n)}}function a(t,e){return(a=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function s(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=l(t);if(e){var o=l(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===i(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return c(t)}(this,r)}}function c(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function l(t){return(l=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function u(t){var e=function(t,e){if("object"!==i(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==i(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===i(e)?e:String(e)}let f=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&a(t,e)}(f,n.PointActor);var e,r,i,l=s(f);function f(){var t,e,r,n;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,f);for(var i=arguments.length,o=new Array(i),a=0;a<i;a++)o[a]=arguments[a];return t=l.call(this,...o),e=c(t),n=-1,(r=u(r="float"))in e?Object.defineProperty(e,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[r]=n,t.args.type="actor-item actor-window",t.args.width=64,t.args.height=160,t}return e=f,(r=[{key:"solid",get:function(){return!1}},{key:"isEffect",get:function(){return!0}}])&&o(e.prototype,r),i&&o(e,i),Object.defineProperty(e,"prototype",{writable:!1}),f}();t.Window=f}),require.register("actor/WoodenCrate.js",function(t,e,r){"use strict";function n(t){"@babel/helpers - typeof";return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(t,"__esModule",{value:!0}),t.WoodenCrate=void 0;var i=e("./BreakableBlock"),o=e("../behavior/Platformer"),a=e("./Projectile"),s=e("./Spring"),c=e("./Block"),l=e("../audio/Sfx"),u=e("./OrbSmall");function f(t,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,(o=i.key,void 0,"symbol"===n(a=function(t,e){if("object"!==n(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var i=r.call(t,e||"default");if("object"!==n(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(o,"string"))?a:String(a)),i)}var o,a}function p(){return(p="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=d(t)););return t}(t,e);if(n){var i=Object.getOwnPropertyDescriptor(n,e);return i.get?i.get.call(arguments.length<3?t:r):i.value}}).apply(this,arguments)}function h(t,e){return(h=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function g(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,i=d(t);if(e){var o=d(this).constructor;r=Reflect.construct(i,arguments,o)}else r=i.apply(this,arguments);return function(t,e){if(e&&("object"===n(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function d(t){return(d=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}let y=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&h(t,e)}(b,i.BreakableBlock);var e,r,n,y=g(b);function b(){var t;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,b);for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];return(t=y.call(this,...r)).args.type="actor-item actor-breakable-block actor-wooden-crate",t.args.width=64,t.args.height=64,t.args.static=!1,t[s.Spring.WontSpring]=!0,t}return e=b,(r=[{key:"updateStart",value:function(){this.args.static?this.args.static=!!this.bMap("checkBelow",this.x,this.y+1).get(o.Platformer):this.args.static=!this.args.falling,(this.args.gSpeed||this.args.xSpeed)&&(this.args.static=!1),p(d(b.prototype),"updateStart",this).call(this)}},{key:"update",value:function(){const t=this.args.falling;p(d(b.prototype),"update",this).call(this),t&&!this.args.falling&&this.ySpeedLast>9&&l.Sfx.play("WOOD_THUD")}},{key:"collideA",value:function(t,e){return!t.args.ramming&&(t instanceof c.Block||(!(0!==e||!t.controllable)||(t instanceof u.OrbSmall&&!this.broken?(this.break(t),!1):t instanceof a.Projectile&&!this.broken?(this.break(t),!0):1!==e&&3!==e||t.y<=this.y-this.args.height||(t.args.rolling||2===e?(this.args.gSpeed=0,this.args.xSpeed=0,this.break(t),!1):t.punching&&!this.broken?(this.args.gSpeed=0,this.args.xSpeed=0,this.break(t),!1):!!this.viewport&&(-1!==e&&!t.args.rolling||p(d(b.prototype),"collideA",this).call(this,t,e))))))}},{key:"setTile",value:function(){this.args.spriteSheet="/Sonic/wooden-crate.png"}}])&&f(e.prototype,r),n&&f(e,n),Object.defineProperty(e,"prototype",{writable:!1}),b}();t.WoodenCrate=y}),require.register("actor/Zipline.js",function(t,e,r){"use strict";function n(t){"@babel/helpers - typeof";return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(t,"__esModule",{value:!0}),t.Zipline=void 0;var i=e("./PointActor");function o(t,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,(o=i.key,void 0,"symbol"===n(a=function(t,e){if("object"!==n(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var i=r.call(t,e||"default");if("object"!==n(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(o,"string"))?a:String(a)),i)}var o,a}function a(){return(a="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=l(t)););return t}(t,e);if(n){var i=Object.getOwnPropertyDescriptor(n,e);return i.get?i.get.call(arguments.length<3?t:r):i.value}}).apply(this,arguments)}function s(t,e){return(s=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function c(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,i=l(t);if(e){var o=l(this).constructor;r=Reflect.construct(i,arguments,o)}else r=i.apply(this,arguments);return function(t,e){if(e&&("object"===n(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function l(t){return(l=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}let u=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&s(t,e)}(f,i.PointActor);var e,r,n,u=c(f);function f(){var t;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,f);for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];return(t=u.call(this,...r)).args.width=1,t.args.height=1,t.args.type="actor-item actor-zipline",t.args.z=128,t.args.static=!1,t.breakable=!1,t.args.decel=0,t.args.accel=0,t}return e=f,(r=[{key:"activate",value:function(){this.viewport.auras.add(this),this.args.launched=!0}},{key:"update",value:function(){if(this.args.launched){this.args.gSpeed<1&&(this.args.gSpeed=1),this.args.gSpeed+=.1;const t=1/0;this.args.gSpeed>t&&(this.args.gSpeed=t)}a(l(f.prototype),"update",this).call(this)}},{key:"collideA",value:function(t,e){return!this.breakable||a(l(f.prototype),"collideA",this).call(this,t,e)}}])&&o(e.prototype,r),n&&o(e,n),Object.defineProperty(e,"prototype",{writable:!1}),f}();t.Zipline=u}),require.register("actor/monitor/InfoMonitor.js",function(t,e,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.InfoMonitor=void 0;var n=e("../Monitor");e("../../audio/Sfx");function i(t){"@babel/helpers - typeof";return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function o(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,f(n.key),n)}}function a(){return(a="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=u(t)););return t}(t,e);if(n){var i=Object.getOwnPropertyDescriptor(n,e);return i.get?i.get.call(arguments.length<3?t:r):i.value}}).apply(this,arguments)}function s(t,e){return(s=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function c(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=u(t);if(e){var o=u(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===i(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return l(t)}(this,r)}}function l(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function u(t){return(u=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function f(t){var e=function(t,e){if("object"!==i(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==i(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===i(e)?e:String(e)}let p=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&s(t,e)}(h,n.Monitor);var e,r,i,p=c(h);function h(){var t,e,r,n;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,h);for(var i=arguments.length,o=new Array(i),a=0;a<i;a++)o[a]=arguments[a];return t=p.call(this,...o),e=l(t),n="Info Monitor",(r=f(r="name"))in e?Object.defineProperty(e,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[r]=n,t}return e=h,(r=[{key:"onRendered",value:function(t){a(u(h.prototype),"onRendered",this).call(this,t),this.box.attr({"data-monitor":"info"})}},{key:"effect",value:function(t){if(this.args.target&&this.viewport.actorsById[this.args.target]){this.viewport.actorsById[this.args.target].activate(t,this,!0),t.args.xSpeed*=.25,t.dropDashCharge=0}}}])&&o(e.prototype,r),i&&o(e,i),Object.defineProperty(e,"prototype",{writable:!1}),h}();t.InfoMonitor=p}),require.register("actor/monitor/RingMonitor.js",function(t,e,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.RingMonitor=void 0;var n=e("../Monitor"),i=e("../../audio/Sfx");function o(t){"@babel/helpers - typeof";return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function a(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,p(n.key),n)}}function s(){return(s="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=f(t)););return t}(t,e);if(n){var i=Object.getOwnPropertyDescriptor(n,e);return i.get?i.get.call(arguments.length<3?t:r):i.value}}).apply(this,arguments)}function c(t,e){return(c=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function l(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=f(t);if(e){var i=f(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===o(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return u(t)}(this,r)}}function u(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function f(t){return(f=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function p(t){var e=function(t,e){if("object"!==o(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==o(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===o(e)?e:String(e)}let h=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&c(t,e)}(g,n.Monitor);var e,r,o,h=l(g);function g(){var t,e,r,n;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,g);for(var i=arguments.length,o=new Array(i),a=0;a<i;a++)o[a]=arguments[a];return t=h.call(this,...o),e=u(t),n="Ring Monitor",(r=p(r="name"))in e?Object.defineProperty(e,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[r]=n,t}return e=g,(r=[{key:"onRendered",value:function(t){s(f(g.prototype),"onRendered",this).call(this,t),this.box.attr({"data-monitor":"ring"})}},{key:"effect",value:function(t){t.args.rings+=10,i.Sfx.play("RING_COLLECTED")}}])&&a(e.prototype,r),o&&a(e,o),Object.defineProperty(e,"prototype",{writable:!1}),g}();t.RingMonitor=h}),require.register("actor/monitor/SheildElectricMonitor.js",function(t,e,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SheildElectricMonitor=void 0;var n=e("../Monitor"),i=e("../../powerups/ElectricSheild");function o(t){"@babel/helpers - typeof";return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function a(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,p(n.key),n)}}function s(){return(s="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=f(t)););return t}(t,e);if(n){var i=Object.getOwnPropertyDescriptor(n,e);return i.get?i.get.call(arguments.length<3?t:r):i.value}}).apply(this,arguments)}function c(t,e){return(c=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function l(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=f(t);if(e){var i=f(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===o(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return u(t)}(this,r)}}function u(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function f(t){return(f=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function p(t){var e=function(t,e){if("object"!==o(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==o(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===o(e)?e:String(e)}let h=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&c(t,e)}(g,n.Monitor);var e,r,o,h=l(g);function g(){var t,e,r,n;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,g);for(var i=arguments.length,o=new Array(i),a=0;a<i;a++)o[a]=arguments[a];return t=h.call(this,...o),e=u(t),n="Lightning Monitor",(r=p(r="name"))in e?Object.defineProperty(e,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[r]=n,t}return e=g,(r=[{key:"onRendered",value:function(t){s(f(g.prototype),"onRendered",this).call(this,t),this.box&&this.box.attr({"data-monitor":"sheild-electric"})}},{key:"effect",value:function(t){if(!t.controllable)return;const e=new i.ElectricSheild;t.inventory.add(e)}}])&&a(e.prototype,r),o&&a(e,o),Object.defineProperty(e,"prototype",{writable:!1}),g}();t.SheildElectricMonitor=h}),require.register("actor/monitor/SheildFireMonitor.js",function(t,e,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SheildFireMonitor=void 0;var n=e("../Monitor"),i=e("../../powerups/FireSheild");function o(t){"@babel/helpers - typeof";return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function a(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,p(n.key),n)}}function s(){return(s="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=f(t)););return t}(t,e);if(n){var i=Object.getOwnPropertyDescriptor(n,e);return i.get?i.get.call(arguments.length<3?t:r):i.value}}).apply(this,arguments)}function c(t,e){return(c=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function l(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=f(t);if(e){var i=f(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===o(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return u(t)}(this,r)}}function u(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function f(t){return(f=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function p(t){var e=function(t,e){if("object"!==o(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==o(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===o(e)?e:String(e)}let h=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&c(t,e)}(g,n.Monitor);var e,r,o,h=l(g);function g(){var t,e,r,n;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,g);for(var i=arguments.length,o=new Array(i),a=0;a<i;a++)o[a]=arguments[a];return t=h.call(this,...o),e=u(t),n="Fire Monitor",(r=p(r="name"))in e?Object.defineProperty(e,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[r]=n,t}return e=g,(r=[{key:"onRendered",value:function(t){s(f(g.prototype),"onRendered",this).call(this,t),this.box.attr({"data-monitor":"sheild-fire"})}},{key:"effect",value:function(t){if(!t.controllable)return;const e=new i.FireSheild;t.inventory.add(e)}}])&&a(e.prototype,r),o&&a(e,o),Object.defineProperty(e,"prototype",{writable:!1}),g}();t.SheildFireMonitor=h}),require.register("actor/monitor/SheildNormalMonitor.js",function(t,e,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SheildNormalMonitor=void 0;var n=e("../Monitor"),i=e("../../powerups/NormalSheild");function o(t){"@babel/helpers - typeof";return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function a(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,p(n.key),n)}}function s(){return(s="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=f(t)););return t}(t,e);if(n){var i=Object.getOwnPropertyDescriptor(n,e);return i.get?i.get.call(arguments.length<3?t:r):i.value}}).apply(this,arguments)}function c(t,e){return(c=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function l(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=f(t);if(e){var i=f(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===o(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return u(t)}(this,r)}}function u(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function f(t){return(f=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function p(t){var e=function(t,e){if("object"!==o(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==o(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===o(e)?e:String(e)}let h=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&c(t,e)}(g,n.Monitor);var e,r,o,h=l(g);function g(){var t,e,r,n;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,g);for(var i=arguments.length,o=new Array(i),a=0;a<i;a++)o[a]=arguments[a];return t=h.call(this,...o),e=u(t),n="Shield Monitor",(r=p(r="name"))in e?Object.defineProperty(e,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[r]=n,t}return e=g,(r=[{key:"onRendered",value:function(t){s(f(g.prototype),"onRendered",this).call(this,t),this.box&&this.box.attr({"data-monitor":"sheild-normal"})}},{key:"effect",value:function(t){if(!t.controllable)return;const e=new i.NormalSheild;t.inventory.add(e)}}])&&a(e.prototype,r),o&&a(e,o),Object.defineProperty(e,"prototype",{writable:!1}),g}();t.SheildNormalMonitor=h}),require.register("actor/monitor/SheildStarMonitor.js",function(t,e,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SheildStarMonitor=void 0;var n=e("../Monitor"),i=e("../../powerups/StarSheild");function o(t){"@babel/helpers - typeof";return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function a(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,p(n.key),n)}}function s(){return(s="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=f(t)););return t}(t,e);if(n){var i=Object.getOwnPropertyDescriptor(n,e);return i.get?i.get.call(arguments.length<3?t:r):i.value}}).apply(this,arguments)}function c(t,e){return(c=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function l(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=f(t);if(e){var i=f(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===o(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return u(t)}(this,r)}}function u(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function f(t){return(f=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function p(t){var e=function(t,e){if("object"!==o(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==o(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===o(e)?e:String(e)}let h=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&c(t,e)}(g,n.Monitor);var e,r,o,h=l(g);function g(){var t,e,r,n;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,g);for(var i=arguments.length,o=new Array(i),a=0;a<i;a++)o[a]=arguments[a];return t=h.call(this,...o),e=u(t),n="Star Monitor",(r=p(r="name"))in e?Object.defineProperty(e,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[r]=n,t}return e=g,(r=[{key:"onRendered",value:function(t){s(f(g.prototype),"onRendered",this).call(this,t),this.box.attr({"data-monitor":"sheild-star"})}},{key:"effect",value:function(t){if(!t.controllable)return;const e=new i.StarSheild;t.inventory.add(e)}}])&&a(e.prototype,r),o&&a(e,o),Object.defineProperty(e,"prototype",{writable:!1}),g}();t.SheildStarMonitor=h}),require.register("actor/monitor/SheildWaterMonitor.js",function(t,e,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SheildWaterMonitor=void 0;var n=e("../Monitor"),i=e("../../powerups/BubbleSheild");function o(t){"@babel/helpers - typeof";return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function a(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,p(n.key),n)}}function s(){return(s="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=f(t)););return t}(t,e);if(n){var i=Object.getOwnPropertyDescriptor(n,e);return i.get?i.get.call(arguments.length<3?t:r):i.value}}).apply(this,arguments)}function c(t,e){return(c=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function l(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=f(t);if(e){var i=f(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===o(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return u(t)}(this,r)}}function u(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function f(t){return(f=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function p(t){var e=function(t,e){if("object"!==o(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==o(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===o(e)?e:String(e)}let h=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&c(t,e)}(g,n.Monitor);var e,r,o,h=l(g);function g(){var t,e,r,n;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,g);for(var i=arguments.length,o=new Array(i),a=0;a<i;a++)o[a]=arguments[a];return t=h.call(this,...o),e=u(t),n="Bubble Monitor",(r=p(r="name"))in e?Object.defineProperty(e,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[r]=n,t}return e=g,(r=[{key:"onRendered",value:function(t){s(f(g.prototype),"onRendered",this).call(this,t),this.box.attr({"data-monitor":"sheild-water"})}},{key:"effect",value:function(t){if(!t.controllable)return;const e=new i.BubbleSheild;t.inventory.add(e)}}])&&a(e.prototype,r),o&&a(e,o),Object.defineProperty(e,"prototype",{writable:!1}),g}();t.SheildWaterMonitor=h}),require.register("actor/monitor/TripleRingMonitor.js",function(t,e,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TripleRingMonitor=void 0;var n=e("../Monitor"),i=e("../../audio/Sfx");function o(t){"@babel/helpers - typeof";return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function a(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,p(n.key),n)}}function s(){return(s="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=f(t)););return t}(t,e);if(n){var i=Object.getOwnPropertyDescriptor(n,e);return i.get?i.get.call(arguments.length<3?t:r):i.value}}).apply(this,arguments)}function c(t,e){return(c=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function l(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=f(t);if(e){var i=f(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===o(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return u(t)}(this,r)}}function u(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function f(t){return(f=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function p(t){var e=function(t,e){if("object"!==o(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==o(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===o(e)?e:String(e)}let h=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&c(t,e)}(g,n.Monitor);var e,r,o,h=l(g);function g(){var t,e,r,n;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,g);for(var i=arguments.length,o=new Array(i),a=0;a<i;a++)o[a]=arguments[a];return t=h.call(this,...o),e=u(t),n="Triple Ring Monitor",(r=p(r="name"))in e?Object.defineProperty(e,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[r]=n,t}return e=g,(r=[{key:"onRendered",value:function(t){s(f(g.prototype),"onRendered",this).call(this,t),this.box.attr({"data-monitor":"triple-ring"})}},{key:"effect",value:function(t){t.args.rings+=30,this.viewport.onFrameOut(6,()=>i.Sfx.play("RING_COLLECTED")),this.viewport.onFrameOut(18,()=>i.Sfx.play("RING_COLLECTED")),this.viewport.onFrameOut(32,()=>i.Sfx.play("RING_COLLECTED"))}}])&&a(e.prototype,r),o&&a(e,o),Object.defineProperty(e,"prototype",{writable:!1}),g}();t.TripleRingMonitor=h}),require.register("actor/monitor/WebMonitor.js",function(t,e,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.WebMonitor=void 0;var n=e("../HtmlFrame"),i=e("../Monitor");function o(t){"@babel/helpers - typeof";return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function a(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,p(n.key),n)}}function s(){return(s="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=f(t)););return t}(t,e);if(n){var i=Object.getOwnPropertyDescriptor(n,e);return i.get?i.get.call(arguments.length<3?t:r):i.value}}).apply(this,arguments)}function c(t,e){return(c=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function l(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=f(t);if(e){var i=f(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===o(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return u(t)}(this,r)}}function u(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function f(t){return(f=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function p(t){var e=function(t,e){if("object"!==o(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==o(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===o(e)?e:String(e)}let h=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&c(t,e)}(g,i.Monitor);var e,r,o,h=l(g);function g(){var t,e,r,n;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,g);for(var i=arguments.length,o=new Array(i),a=0;a<i;a++)o[a]=arguments[a];return t=h.call(this,...o),e=u(t),n="Web Monitor",(r=p(r="name"))in e?Object.defineProperty(e,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[r]=n,t}return e=g,(r=[{key:"onRendered",value:function(t){s(f(g.prototype),"onRendered",this).call(this,t),this.box.attr({"data-monitor":"web-monitor"})}},{key:"effect",value:function(t){const e=new n.HtmlFrame({x:this.x,y:this.y,width:240,height:180});this.viewport.spawn.add({object:e})}}])&&a(e.prototype,r),o&&a(e,o),Object.defineProperty(e,"prototype",{writable:!1}),g}();t.WebMonitor=h}),require.register("audio/AudioManager.js",function(t,e,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AudioManager=void 0;var n=e("curvature/base/Pool"),i=e("curvature/net/Elicit"),o=e("curvature/base/Mixin"),a=e("curvature/mixin/EventTargetMixin");function s(t){"@babel/helpers - typeof";return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function c(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,g(n.key),n)}}function l(t,e){return(l=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function u(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=p(t);if(e){var i=p(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===s(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return f(t)}(this,r)}}function f(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function p(t){return(p=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function h(t,e,r){return(e=g(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function g(t){var e=function(t,e){if("object"!==s(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==s(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===s(e)?e:String(e)}let d=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&l(t,e)}(d,o.Mixin.with(a.EventTargetMixin));var e,r,p,g=u(d);function d(){var t;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,d);for(var e=arguments.length,r=new Array(e),i=0;i<e;i++)r[i]=arguments[i];return h(f(t=g.call(this,...r)),"volume",1),h(f(t),"theme","/Sonic/carnival-night-zone-act-2-beta.mp3"),h(f(t),"overlay","/audio/leslie-wai/feel-the-sunshine.mp3"),h(f(t),"tracks",new Map),h(f(t),"plays",new Map),h(f(t),"tags",new Map),h(f(t),"factors",new Map),h(f(t),"stack",[]),h(f(t),"playing",null),h(f(t),"id3",new Map),h(f(t),"request",[]),h(f(t),"pool",new n.Pool({max:2,init:t=>(t.open(),t)})),h(f(t),"throttle",new Map),h(f(t),"tracksPlaying",new Set),h(f(t),"tracksPaused",new Set),t}return e=d,(r=[{key:"setVolume",value:function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;this.volume=Math.max(0,Math.min(t,1)),this.playing&&(this.playing.volume=this.volume)}},{key:"register",value:function(t,e){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=r.maxConcurrent,o=void 0===n?1:n,a=r.volume,s=void 0===a?1:a,c=r.fudgeFactor,l=void 0===c?0:c,u=r.startTime,f=void 0===u?0:u,p=r.throttle,h=void 0===p?0:p;const g=new i.Elicit(e,{defer:!0});g.addEventListener("error",t=>t.preventDefault()),this.pool.add(g),"mp3"===e.substr(-3)?this.request.push(g.buffer().then(r=>{const n=Array(o).fill().map(t=>new Audio(e));this.tracks.set(t,n);for(const t of n)this.factors.set(t,{volume:s,fudgeFactor:l,startTime:f});const i=new Uint8Array(r);if("ID3"!==String.fromCharCode(...i.slice(0,3)))return;i[3],i[4],i[5];const a=i[6]<<21|i[7]<<14|i[8]<<7|i[9];let c=10;const u={};for(;c<a;){const t=String.fromCharCode(...i.slice(c,c+4)),e=10+(i[c+4]<<21|i[c+5]<<14|i[c+6]<<7|i[c+7]);if(10===e)break;if(c+e>a)break;const r=String.fromCharCode(...i.slice(c+11,c+e));if(!t)break;if(c+=e,!t)break;u[t]=r}for(const t of n)this.id3.set(t,u)})):g.objectUrl().then(e=>{const r=Array(o).fill().map(t=>new Audio(e));this.tracks.set(t,r);for(const t of r)this.factors.set(t,{volume:s,fudgeFactor:l,startTime:f,throttle:h})})}},{key:"play",value:function(t){let e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r={loop:e};if("object"===s(e)&&(r=e,e=e.loop),this.playing||(this.playing=this.stack[this.stack.length-1]),!this.tracks.has(t))return;const n=new Map,i=this.tracks.get(t);let o=null;for(const t of i){if(!this.plays.has(t)){o=t;break}n.set(t,this.plays.get(t))}if(!o){const t=[...n].sort((t,e)=>Math.sign(t[1]-e[1]));o=t[0][0]}if(o){let n=this.factors.get(o),i=n.volume,a=n.fudgeFactor,s=n.startTime,c=n.throttle;if(c&&Date.now()-this.throttle.get(t)<c)return;"volume"in r&&(i=r.volume);const l=this.volume*(i+a*(Math.random()+-.5));o.playbackRate=1,o.currentTime=s,o.volume=Math.max(0,Math.min(1,l)),o.loop=e,this.plays.set(o,Date.now()),this.playing=o,this.stack.push(this.playing);const u=t=>{this.playing=this.stack[this.stack.length-1],this.tracksPlaying.delete(o),this.stack.pop(),this.play()};this.tags.set(o,t);const f=new CustomEvent("play",{cancelable:!0});if(this.dispatchEvent(f))try{o.play(),e||this.playing.addEventListener("ended",u,{once:!0}),this.throttle.set(t,Date.now())}catch(t){console.warn(t)}return Promise.all(this.request).then(()=>{}),this.tracksPlaying.add(o),!0}}},{key:"stop",value:function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];null===t&&this.playing&&(this.playing.pause(),this.playing=null);for(const e of Object.keys(this.stack)){const r=this.stack[e];if(this.tags.has(r)){if(null===t||this.tags.get(r)===t){const t=!0,n=this.id3.get(this.playing),i=new CustomEvent("stop",{detail:n,cancelable:t});this.dispatchEvent(i)&&(r.paused||r.pause(),this.stack.splice(e,1))}}else this.stack.splice(e,1)}e&&(this.playing=this.stack[this.stack.length-1],this.playing&&this.play(this.tags.get(this.playing)))}},{key:"pause",value:function(){if(!this.playing||this.playing.paused)return;const t=this.id3.get(this.playing),e=new CustomEvent("pause",{detail:t,cancelable:!0});if(this.dispatchEvent(e))for(const t of this.tracksPlaying)this.tracksPaused.add(t),t.pause()}},{key:"unpause",value:function(){if(!this.playing||!this.playing.paused)return;const t=this.id3.get(this.playing),e=new CustomEvent("unpause",{detail:t,cancelable:!0});if(this.dispatchEvent(e))for(const t of this.tracksPaused)this.tracksPaused.delete(t),t.played&&t.played<1?t.play():this.tracksPaused.delete(t)}},{key:"fadeOut",value:function(t){return new Promise(e=>{let r,n,i,o;o=setInterval(()=>{if(!(r=this.playing))return;n||(i=r.volume,n=Date.now());const a=Date.now(),s=1-Math.min(1,(a-n)/t);r.volume=s*i,s||(this.stop(this.tags.get(r)),clearInterval(o),e())},16)})}}])&&c(e.prototype,r),p&&c(e,p),Object.defineProperty(e,"prototype",{writable:!1}),d}();t.AudioManager=d}),require.register("audio/Bgm.js",function(t,e,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BgmHandler=t.Bgm=void 0;var n=e("curvature/base/Pool"),i=e("curvature/net/Elicit"),o=e("curvature/base/Mixin"),a=e("curvature/mixin/EventTargetMixin");function s(t){"@babel/helpers - typeof";return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function c(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,i,o,a,s=[],c=!0,l=!1;try{if(o=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=o.call(r)).done)&&(s.push(n.value),s.length!==e);c=!0);}catch(t){l=!0,i=t}finally{try{if(!c&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(l)throw i}}return s}}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return l(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return l(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function l(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function u(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,y(n.key),n)}}function f(t,e){return(f=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function p(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=g(t);if(e){var i=g(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===s(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return h(t)}(this,r)}}function h(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function g(t){return(g=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function d(t,e,r){return(e=y(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function y(t){var e=function(t,e){if("object"!==s(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==s(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===s(e)?e:String(e)}let b=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&f(t,e)}(g,o.Mixin.with(a.EventTargetMixin));var e,r,s,l=p(g);function g(){var t;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,g);for(var e=arguments.length,r=new Array(e),i=0;i<e;i++)r[i]=arguments[i];return d(h(t=l.call(this,...r)),"volume",1),d(h(t),"tracks",new Map),d(h(t),"plays",new Map),d(h(t),"tags",new Map),d(h(t),"stack",[]),d(h(t),"playing",null),d(h(t),"id3",new Map),d(h(t),"request",[]),d(h(t),"pool",new n.Pool({max:3,init:t=>(t.open(),t)})),d(h(t),"downloads",new Map),d(h(t),"cancels",new Map),t}return e=g,(r=[{key:"setVolume",value:function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;this.volume=Math.max(0,Math.min(t,1)),this.playing&&(this.playing.volume=this.volume)}},{key:"register",value:function(t,e){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;const n=new i.Elicit(e,{defer:!0});n.addEventListener("error",t=>t.preventDefault());const o=n.blob();this.pool.add(n);const a=o.then(t=>Promise.all([t.arrayBuffer(),URL.createObjectURL(t)])).then(e=>{let n=c(e,2),i=n[0],o=n[1];this.downloads.delete(t);const a=Array(r).fill().map(t=>new Audio(o));this.tracks.set(t,a);const s=new Uint8Array(i);if("ID3"!==String.fromCharCode(...s.slice(0,3)))return;s[3],s[4],s[5];const l=s[6]<<21|s[7]<<14|s[8]<<7|s[9];let u=10;const f={};for(;u<l;){const t=String.fromCharCode(...s.slice(u,u+4)),e=10+(s[u+4]<<21|s[u+5]<<14|s[u+6]<<7|s[u+7]);if(10===e)break;if(u+e>l)break;const r=String.fromCharCode(...s.slice(u+11,u+e));if(!t)break;if(u+=e,!t)break;f[t]=r}f.COMM&&"XXXComment\0"===f.COMM.substr(0,"XXXComment\0".length)?f.COMM=f.COMM.slice("XXXComment\0".length):f.COMM&&"xxxComment\0"===f.COMM.substr(0,"xxxComment\0".length)&&(f.COMM=f.COMM.slice("xxxComment\0".length));for(const t of a)this.id3.set(t,f)});this.request.push(a),this.downloads.set(t,a)}},{key:"play",value:function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=e.loop,n=void 0!==r&&r,i=e.interlude,o=void 0!==i&&i,a=e.dontClear,s=void 0!==a&&a;if(this.downloads.has(t))return void this.downloads.get(t).then(()=>{this.downloads.delete(t),this.play(t,{loop:n,interlude:o,dontClear:s})});if(this.tags.get(this.playing)!==t&&!o&&!s){for(const t of this.stack)t.pause();this.stack.length=0,this.playing=!1}if(this.playing||(this.playing=this.stack[this.stack.length-1]),this.playing&&this.tags.get(this.playing)===t){if(this.playing.paused){const t=!0,e=this.id3.get(this.playing),r=new CustomEvent("play",{detail:e,cancelable:t});if(!this.dispatchEvent(r))return;return this.unpause()}}else this.playing&&this.playing.pause();if(!this.tracks.has(t))return;const c=new Map,l=this.tracks.get(t);let u=null;for(const t of l){if(!this.plays.has(t)){u=t;break}c.set(this.plays.get(t),t)}if(!u){const t=[...c].sort((t,e)=>Math.sign(t[0]-e[0]));u=t[0][1]}if(u&&u!==this.playing){u.playbackRate=1,u.currentTime=0,u.volume=this.volume,u.loop=n,this.plays.set(u,Date.now()),this.playing=u,this.stack.push(this.playing);const e=t=>{this.stack.pop(),this.playing=this.stack[this.stack.length-1]};n||this.playing.addEventListener("ended",e,{once:!0}),this.tags.set(u,t),Promise.all(this.request).then(()=>{const t=this.id3.get(u),e=new CustomEvent("play",{detail:t,cancelable:!0});if(this.dispatchEvent(e))try{u.play()}catch(t){console.warn(t)}})}}},{key:"stop",value:function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;null===t&&this.playing&&(this.playing.pause(),this.playing=null);for(const e of Object.keys(this.stack)){const r=this.stack[e];if(this.tags.has(r)){if(null===t||this.tags.get(r)===t){const t=!0,n=this.id3.get(this.playing),i=new CustomEvent("stop",{detail:n,cancelable:t});this.dispatchEvent(i)&&(r.paused||r.pause(),this.stack.splice(e,1))}}else this.stack.splice(e,1)}this.playing=this.stack[this.stack.length-1],this.playing&&this.play(this.tags.get(this.playing),{dontClear:!0})}},{key:"pause",value:function(){if(!this.playing||this.playing.paused)return;const t=this.id3.get(this.playing),e=new CustomEvent("pause",{detail:t,cancelable:!0});this.dispatchEvent(e)&&this.playing.pause()}},{key:"unpause",value:function(){if(!this.playing||!this.playing.paused)return;const t=this.id3.get(this.playing),e=new CustomEvent("unpause",{detail:t,cancelable:!0});this.dispatchEvent(e)&&this.playing&&this.playing.play()}},{key:"fadeOut",value:function(t){return new Promise(e=>{let r,n,i,o;r=this.playing;o=setInterval(()=>{if(!r)return void clearInterval(o);n||(i=r.volume,n=Date.now());const a=Date.now(),s=1-Math.min(1,(a-n)/t);r.volume=s*i,s||(this.stop(this.tags.get(r)),clearInterval(o),e())},16)})}}])&&u(e.prototype,r),s&&u(e,s),Object.defineProperty(e,"prototype",{writable:!1}),g}();t.BgmHandler=b;const v=new b;t.Bgm=v}),require.register("audio/Sfx.js",function(t,e,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Sfx=void 0;const n=new(e("./AudioManager").AudioManager);t.Sfx=n}),require.register("backdrop/AngelIsland.js",function(t,e,r){"use strict";function n(t){"@babel/helpers - typeof";return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(t,"__esModule",{value:!0}),t.AngelIsland=void 0;var i=e("./Backdrop");function o(t,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,(o=i.key,void 0,"symbol"===n(a=function(t,e){if("object"!==n(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var i=r.call(t,e||"default");if("object"!==n(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(o,"string"))?a:String(a)),i)}var o,a}function a(t,e){return(a=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function s(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,i=c(t);if(e){var o=c(this).constructor;r=Reflect.construct(i,arguments,o)}else r=i.apply(this,arguments);return function(t,e){if(e&&("object"===n(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function c(t){return(c=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}const l=[{990099:"fcfcfc",770077:"0048fc",550055:"90fcfc"},{990099:"90fcfc",770077:"fcfcfc",550055:"90fcfc"},{990099:"6c90fc",770077:"90fcfc",550055:"90fcfc"},{990099:"0048fc",770077:"6c90fc",550055:"90fcfc"},{990099:"fcfcfc",770077:"0048fc",550055:"6c90fc"},{990099:"90fcfc",770077:"fcfcfc",550055:"0048fc"},{990099:"6c90fc",770077:"90fcfc",550055:"fcfcfc"},{990099:"0048fc",770077:"6c90fc",550055:"90fcfc"}];let u=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&a(t,e)}(u,i.Backdrop);var e,r,n,c=s(u);function u(t,e){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,u),(r=c.call(this,t,e)).args.name="angel-island",r.args.strips=[{autoscroll:-.23,parallax:.005,url:"/Sonic/backdrop/angel-island/sky-0.png",height:196},{autoscroll:-.23,parallax:.005,url:"/Sonic/backdrop/angel-island/reflection.png",height:33},{autoscroll:0,parallax:.009,url:"/Sonic/backdrop/angel-island/water-1.png",interval:12,timeout:100,frame:0,recolor:l,height:-16},{autoscroll:0,parallax:.011,url:"/Sonic/backdrop/angel-island/water-2.png",height:8,interval:14,timeout:100,frame:0,recolor:l},{autoscroll:0,parallax:.013,url:"/Sonic/backdrop/angel-island/water-3.png",height:8,interval:16,timeout:100,frame:0,recolor:l},{autoscroll:0,parallax:.015,url:"/Sonic/backdrop/angel-island/water-4.png",height:16,interval:16,timeout:100,frame:0,recolor:l},{autoscroll:0,parallax:.017,url:"/Sonic/backdrop/angel-island/water-5.png",height:8,interval:16,timeout:100,frame:4,recolor:l},{autoscroll:0,parallax:.019,url:"/Sonic/backdrop/angel-island/water-6.png",height:8,interval:13,timeout:100,frame:0,recolor:l},{autoscroll:0,parallax:.021,url:"/Sonic/backdrop/angel-island/water-7.png",height:16,interval:11,timeout:100,frame:1,recolor:l},{autoscroll:0,parallax:.023,url:"/Sonic/backdrop/angel-island/water-8.png",height:8,interval:12,timeout:100,frame:2,recolor:l},{autoscroll:0,parallax:.025,url:"/Sonic/backdrop/angel-island/water-9.png",height:8,interval:11,timeout:100,frame:0,recolor:l},{autoscroll:0,parallax:.028,url:"/Sonic/backdrop/angel-island/water-10.png",height:8,interval:13,timeout:100,frame:3,recolor:l},{autoscroll:0,parallax:.03,url:"/Sonic/backdrop/angel-island/water-11.png",height:16,interval:13,timeout:100,frame:4,recolor:l},{autoscroll:0,parallax:.033,url:"/Sonic/backdrop/angel-island/water-12.png",height:8,interval:11,timeout:100,frame:5,recolor:l},{autoscroll:0,parallax:.035,url:"/Sonic/backdrop/angel-island/water-13.png",height:7,interval:15,timeout:100,frame:0,recolor:l},{autoscroll:0,parallax:.037,url:"/Sonic/backdrop/angel-island/water-14.png",height:8,interval:17,timeout:100,frame:1,recolor:l},{autoscroll:0,parallax:.039,url:"/Sonic/backdrop/angel-island/water-15.png",height:8,interval:19,timeout:100,frame:2,recolor:l},{autoscroll:0,parallax:.041,url:"/Sonic/backdrop/angel-island/water-16.png",height:6,interval:11,timeout:100,frame:3,recolor:l},{autoscroll:0,parallax:.044,url:"/Sonic/backdrop/angel-island/water-17.png",height:10,interval:13,timeout:100,frame:4,recolor:l},{autoscroll:0,parallax:0,url:"/Sonic/backdrop/angel-island/water-18.png",height:32}],r}return e=u,r&&o(e.prototype,r),n&&o(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}();t.AngelIsland=u}),require.register("backdrop/Backdrop.js",function(t,e,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Backdrop=void 0;var n=e("curvature/base/View"),i=e("../sprite/Png");function o(t){"@babel/helpers - typeof";return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function a(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,p(n.key),n)}}function s(t,e){return(s=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function c(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=u(t);if(e){var i=u(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===o(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return l(t)}(this,r)}}function l(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function u(t){return(u=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function f(t,e,r){return(e=p(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function p(t){var e=function(t,e){if("object"!==o(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==o(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===o(e)?e:String(e)}let h=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&s(t,e)}(p,n.View);var e,r,o,u=c(p);function p(){var t;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,p);for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];return f(l(t=u.call(this,...r)),"template",'<div class = "backdrop [[name]]">\n\t\t<div cv-ref = "backdrop" class = "parallax"></div>\n\t</div>'),f(l(t),"layers",[]),f(l(t),"urls",[]),f(l(t),"stacked",0),t}return e=p,(r=[{key:"onAttached",value:function(t){if(this.alreadyAttached)return;this.alreadyAttached=!0;const e=this.tags.backdrop,r=this.args.strips.reverse(),n=[],o=[],a=[];let s=0;for(const t in r){const e=[],c=r[t];n.push(`calc(100% - calc(1px * ${s}))`);let l="calc(var(--xOffset, 0px) * 1px)";if(c.parallax&&(l=`calc(${l} + calc(1px * calc(${c.parallax} * var(--xPan))))`),c.autoscroll&&(l=`calc(${l} + calc(1px * calc(${c.autoscroll} * var(--frame) )) )`),o.push(l),a.push(r[t].url),s+=r[t].height-1,c.recolor){const t=new i.Png(c.url);for(const r of c.recolor)e.push(t.ready.then(()=>t.recolor(r).toDataUri()));Promise.all(e).then(t=>c.frames=t)}}this.urls=a,this.stacked=s;const c=o.join(", "),l=n.join(", "),u=this.urls.map(t=>`url(${t})`).join(", ");this.args.xOffset=0,e.style({"background-position-y":l,"background-position-x":c,"background-repeat":"repeat-x","background-image":u,"--stackHeight":s}),this.args.bindTo(["x","y","xPan","yPan","bX","bY","width","height","right","xMax","yMax","frame","stacked","top","bottom","xOffset"],(t,r)=>e.style(f({},`--${r}`,t))),this.args.bindTo("frame",(t,e)=>{for(const t in this.args.strips){const e=this.args.strips[t];e.frames&&0==e.timeout--&&(e.timeout=e.interval,e.frame++,e.frame>=e.frames.length&&(e.frame=0),this.urls[t]=e.frames[e.frame],this.refreshLayers())}})}},{key:"refreshLayers",value:function(){this.tags.backdrop.style({"background-image":this.urls.map(t=>`url(${t})`).join(", ")})}}])&&a(e.prototype,r),o&&a(e,o),Object.defineProperty(e,"prototype",{writable:!1}),p}();t.Backdrop=h}),require.register("backdrop/City.js",function(t,e,r){"use strict";function n(t){"@babel/helpers - typeof";return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(t,"__esModule",{value:!0}),t.City=void 0;var i=e("./Backdrop");function o(t,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,(o=i.key,void 0,"symbol"===n(a=function(t,e){if("object"!==n(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var i=r.call(t,e||"default");if("object"!==n(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(o,"string"))?a:String(a)),i)}var o,a}function a(t,e){return(a=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function s(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,i=c(t);if(e){var o=c(this).constructor;r=Reflect.construct(i,arguments,o)}else r=i.apply(this,arguments);return function(t,e){if(e&&("object"===n(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function c(t){return(c=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}let l=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&a(t,e)}(l,i.Backdrop);var e,r,n,c=s(l);function l(t,e){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,l),(r=c.call(this,t,e)).args.name="city",r.args.strips=[{autoscroll:0,parallax:.128,url:"/bttf2/city/sky.png",height:85},{autoscroll:0,parallax:.096,url:"/bttf2/city/sky.png",height:85},{autoscroll:0,parallax:.064,url:"/bttf2/city/sky.png",height:85},{autoscroll:0,parallax:.048,url:"/bttf2/city/sky.png",height:85},{autoscroll:0,parallax:.032,url:"/bttf2/city/sky.png",height:85},{autoscroll:0,parallax:.05,url:"/bttf2/city/buildings-bg.png",height:76},{autoscroll:0,parallax:.1,url:"/bttf2/city/bushes.png",height:144},{autoscroll:0,parallax:.2,url:"/bttf2/city/buildings-fg-recolor.png",height:64}],r}return e=l,r&&o(e.prototype,r),n&&o(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}();t.City=l}),require.register("backdrop/DarkClouds.js",function(t,e,r){"use strict";function n(t){"@babel/helpers - typeof";return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(t,"__esModule",{value:!0}),t.DarkClouds=void 0;var i=e("./Backdrop");function o(t,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,(o=i.key,void 0,"symbol"===n(a=function(t,e){if("object"!==n(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var i=r.call(t,e||"default");if("object"!==n(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(o,"string"))?a:String(a)),i)}var o,a}function a(t,e){return(a=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function s(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,i=c(t);if(e){var o=c(this).constructor;r=Reflect.construct(i,arguments,o)}else r=i.apply(this,arguments);return function(t,e){if(e&&("object"===n(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function c(t){return(c=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}let l=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&a(t,e)}(l,i.Backdrop);var e,r,n,c=s(l);function l(t,e){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,l),(r=c.call(this,t,e)).args.name="dark-clouds",r.args.strips=[{autoscroll:.14,parallax:.02,url:"/Sonic/backdrop/west-side/clouds--1.png",height:64},{autoscroll:.14,parallax:.02,url:"/Sonic/backdrop/west-side/clouds-0.png",height:33},{autoscroll:.13,parallax:.014,url:"/Sonic/backdrop/west-side/clouds-1.png",height:32},{autoscroll:.12,parallax:.013,url:"/Sonic/backdrop/west-side/clouds-2.png",height:24},{autoscroll:.11,parallax:.012,url:"/Sonic/backdrop/west-side/clouds-3.png",height:16},{autoscroll:.1,parallax:.011,url:"/Sonic/backdrop/west-side/clouds-4.png",height:5},{autoscroll:.09,parallax:.01,url:"/Sonic/backdrop/west-side/clouds-5.png",height:3},{autoscroll:.08,parallax:.009,url:"/Sonic/backdrop/west-side/clouds-6.png",height:8},{autoscroll:.07,parallax:.008,url:"/Sonic/backdrop/west-side/clouds-7.png",height:5},{autoscroll:.06,parallax:.007,url:"/Sonic/backdrop/west-side/clouds-8.png",height:3},{autoscroll:.05,parallax:.006,url:"/Sonic/backdrop/west-side/clouds-9.png",height:8},{autoscroll:.04,parallax:.005,url:"/Sonic/backdrop/west-side/clouds-10.png",height:8},{autoscroll:.03,parallax:.004,url:"/Sonic/backdrop/west-side/clouds-11.png",height:32},{autoscroll:.02,parallax:.003,url:"/Sonic/backdrop/west-side/clouds-12.png",height:8},{autoscroll:.015,parallax:.002,url:"/Sonic/backdrop/west-side/clouds-13.png",height:32},{autoscroll:.015,parallax:.002,url:"/Sonic/backdrop/west-side/empty.png",height:120}],r.args.bindTo("frame",t=>{r.args.ligtening||Math.random()>.995&&(r.args.name="dark-clouds lightning",r.args.lightning=!0,r.onTimeout(1e3,()=>{r.args.name="dark-clouds",r.args.lightning=!1}))}),r}return e=l,r&&o(e.prototype,r),n&&o(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}();t.DarkClouds=l}),require.register("backdrop/Desert.js",function(t,e,r){"use strict";function n(t){"@babel/helpers - typeof";return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(t,"__esModule",{value:!0}),t.Desert=void 0;var i=e("./Backdrop");function o(t,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,(o=i.key,void 0,"symbol"===n(a=function(t,e){if("object"!==n(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var i=r.call(t,e||"default");if("object"!==n(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(o,"string"))?a:String(a)),i)}var o,a}function a(t,e){return(a=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function s(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,i=c(t);if(e){var o=c(this).constructor;r=Reflect.construct(i,arguments,o)}else r=i.apply(this,arguments);return function(t,e){if(e&&("object"===n(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function c(t){return(c=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}let l=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&a(t,e)}(l,i.Backdrop);var e,r,n,c=s(l);function l(t,e){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,l),(r=c.call(this,t,e)).args.name="desert",r.args.strips=[{autoscroll:0,parallax:0,url:"/Sonic/backdrop/desert-palace/sky.png",height:32},{autoscroll:0,parallax:0,url:"/Sonic/backdrop/desert-palace/sky.png",height:32},{autoscroll:0,parallax:0,url:"/Sonic/backdrop/desert-palace/sky.png",height:32},{autoscroll:0,parallax:0,url:"/Sonic/backdrop/desert-palace/sky.png",height:32},{autoscroll:0,parallax:.3,url:"/Sonic/backdrop/desert-palace/dunes.png",height:28},{autoscroll:0,parallax:.4,url:"/Sonic/backdrop/desert-palace/dunes-fg.png",height:12},{autoscroll:0,parallax:0,url:"/Sonic/backdrop/desert-palace/sand-color.png",height:8},{autoscroll:0,parallax:.5,url:"/Sonic/backdrop/desert-palace/dunes-fg.png",height:12},{autoscroll:0,parallax:0,url:"/Sonic/backdrop/desert-palace/sand-color.png",height:8},{autoscroll:0,parallax:0,url:"/Sonic/backdrop/desert-palace/sand-color.png",height:8},{autoscroll:0,parallax:0,url:"/Sonic/backdrop/desert-palace/sand-color.png",height:8},{autoscroll:0,parallax:0,url:"/Sonic/backdrop/desert-palace/sand-color.png",height:8},{autoscroll:0,parallax:.6,url:"/Sonic/backdrop/desert-palace/dunes-fg.png",height:12},{autoscroll:0,parallax:0,url:"/Sonic/backdrop/desert-palace/sand-color.png",height:8},{autoscroll:0,parallax:0,url:"/Sonic/backdrop/desert-palace/sand-color.png",height:8},{autoscroll:0,parallax:0,url:"/Sonic/backdrop/desert-palace/sand-color.png",height:8},{autoscroll:0,parallax:0,url:"/Sonic/backdrop/desert-palace/sand-color.png",height:8},{autoscroll:0,parallax:0,url:"/Sonic/backdrop/desert-palace/sand-color.png",height:8},{autoscroll:0,parallax:0,url:"/Sonic/backdrop/desert-palace/sand-color.png",height:8},{autoscroll:0,parallax:0,url:"/Sonic/backdrop/desert-palace/sand-color.png",height:8},{autoscroll:0,parallax:0,url:"/Sonic/backdrop/desert-palace/sand-color.png",height:8},{autoscroll:0,parallax:0,url:"/Sonic/backdrop/desert-palace/sand-color.png",height:8},{autoscroll:0,parallax:0,url:"/Sonic/backdrop/desert-palace/sand-color.png",height:8},{autoscroll:0,parallax:0,url:"/Sonic/backdrop/desert-palace/sand-color.png",height:8},{autoscroll:0,parallax:0,url:"/Sonic/backdrop/desert-palace/sand-color.png",height:8},{autoscroll:0,parallax:0,url:"/Sonic/backdrop/desert-palace/sand-color.png",height:8},{autoscroll:0,parallax:0,url:"/Sonic/backdrop/desert-palace/sand-color.png",height:8},{autoscroll:0,parallax:0,url:"/Sonic/backdrop/desert-palace/sand-color.png",height:8}],r}return e=l,r&&o(e.prototype,r),n&&o(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}();t.Desert=l}),require.register("backdrop/IceCap.js",function(t,e,r){"use strict";function n(t){"@babel/helpers - typeof";return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(t,"__esModule",{value:!0}),t.IceCap=void 0;var i=e("./Backdrop");function o(t,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,(o=i.key,void 0,"symbol"===n(a=function(t,e){if("object"!==n(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var i=r.call(t,e||"default");if("object"!==n(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(o,"string"))?a:String(a)),i)}var o,a}function a(t,e){return(a=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function s(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,i=c(t);if(e){var o=c(this).constructor;r=Reflect.construct(i,arguments,o)}else r=i.apply(this,arguments);return function(t,e){if(e&&("object"===n(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function c(t){return(c=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}let l=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&a(t,e)}(l,i.Backdrop);var e,r,n,c=s(l);function l(t,e){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,l),(r=c.call(this,t,e)).args.name="ice-cap",r.args.strips=[{autoscroll:0,parallax:0,url:"/Sonic/backdrop/ice-cap/mountains-13.png",height:64},{autoscroll:0,parallax:.01,url:"/Sonic/backdrop/ice-cap/mountains-12.png",height:4},{autoscroll:0,parallax:.02,url:"/Sonic/backdrop/ice-cap/mountains-11.png",height:12},{autoscroll:0,parallax:.025,url:"/Sonic/backdrop/ice-cap/mountains-10.png",height:11},{autoscroll:0,parallax:.03,url:"/Sonic/backdrop/ice-cap/mountains-9.png",height:13},{autoscroll:0,parallax:.03,url:"/Sonic/backdrop/ice-cap/mountains-8.png",height:24},{autoscroll:0,parallax:.045,url:"/Sonic/backdrop/ice-cap/mountains-7.png",height:80},{autoscroll:0,parallax:.05,url:"/Sonic/backdrop/ice-cap/mountains-6.png",height:3},{autoscroll:0,parallax:.06,url:"/Sonic/backdrop/ice-cap/mountains-5.png",height:7},{autoscroll:0,parallax:.07,url:"/Sonic/backdrop/ice-cap/mountains-4.png",height:14},{autoscroll:0,parallax:.08,url:"/Sonic/backdrop/ice-cap/mountains-3.png",height:24},{autoscroll:0,parallax:.09,url:"/Sonic/backdrop/ice-cap/mountains-2.png",height:32},{autoscroll:0,parallax:.9,url:"/Sonic/backdrop/ice-cap/mountains-1.png",height:32}],r}return e=l,r&&o(e.prototype,r),n&&o(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}();t.IceCap=l}),require.register("backdrop/Industrial.js",function(t,e,r){"use strict";function n(t){"@babel/helpers - typeof";return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(t,"__esModule",{value:!0}),t.Industrial=void 0;var i=e("./Backdrop");e("curvature/base/Tag");function o(t,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,(o=i.key,void 0,"symbol"===n(a=function(t,e){if("object"!==n(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var i=r.call(t,e||"default");if("object"!==n(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(o,"string"))?a:String(a)),i)}var o,a}function a(t,e){return(a=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function s(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,i=c(t);if(e){var o=c(this).constructor;r=Reflect.construct(i,arguments,o)}else r=i.apply(this,arguments);return function(t,e){if(e&&("object"===n(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function c(t){return(c=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}let l=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&a(t,e)}(l,i.Backdrop);var e,r,n,c=s(l);function l(t,e){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,l),(r=c.call(this,t,e)).args.name="industrial",r.args.sunrise=0,r.args.bindTo("sunrise",t=>{r.nodes[1]&&r.nodes[1].style.setProperty("--sunrise",t)}),r.args.strips=[{autoscroll:.7,parallax:.055,url:"/Sonic/backdrop/labrynth-industrial/0.png",height:24},{autoscroll:.65,parallax:.05,url:"/Sonic/backdrop/labrynth-industrial/1.png",height:24},{autoscroll:.6,parallax:.045,url:"/Sonic/backdrop/labrynth-industrial/0.png",height:24},{autoscroll:.55,parallax:.04,url:"/Sonic/backdrop/labrynth-industrial/1.png",height:24},{autoscroll:.5,parallax:.035,url:"/Sonic/backdrop/labrynth-industrial/0.png",height:24},{autoscroll:.4,parallax:.03,url:"/Sonic/backdrop/labrynth-industrial/1.png",height:24},{autoscroll:.35,parallax:.025,url:"/Sonic/backdrop/labrynth-industrial/0.png",height:24},{autoscroll:.3,parallax:.02,url:"/Sonic/backdrop/labrynth-industrial/1.png",height:24},{autoscroll:.25,parallax:.015,url:"/Sonic/backdrop/labrynth-industrial/2.png",height:24},{autoscroll:.2,parallax:.01,url:"/Sonic/backdrop/labrynth-industrial/3.png",height:24},{autoscroll:0,parallax:.02,url:"/Sonic/backdrop/labrynth-industrial/4-dist.png",height:70},{autoscroll:0,parallax:.05,url:"/Sonic/backdrop/labrynth-industrial/4.png",height:0},{autoscroll:0,parallax:.05,url:"/Sonic/backdrop/labrynth-industrial/flame-0.png",height:1,interval:1,timeout:0,frame:0,frames:["/Sonic/backdrop/labrynth-industrial/flame-0a.png","/Sonic/backdrop/labrynth-industrial/flame-1.png","/Sonic/backdrop/labrynth-industrial/flame-1.png","/Sonic/backdrop/labrynth-industrial/flame-2.png","/Sonic/backdrop/labrynth-industrial/flame-0.png","/Sonic/backdrop/labrynth-industrial/flame-2.png","/Sonic/backdrop/labrynth-industrial/flame-2.png","/Sonic/backdrop/labrynth-industrial/flame-2.png","/Sonic/backdrop/labrynth-industrial/flame-3.png","/Sonic/backdrop/labrynth-industrial/flame-0.png","/Sonic/backdrop/labrynth-industrial/flame-3.png","/Sonic/backdrop/labrynth-industrial/flame-3.png","/Sonic/backdrop/labrynth-industrial/flame-4.png","/Sonic/backdrop/labrynth-industrial/flame-0.png","/Sonic/backdrop/labrynth-industrial/flame-4.png","/Sonic/backdrop/labrynth-industrial/flame-5.png","/Sonic/backdrop/labrynth-industrial/flame-6.png","/Sonic/backdrop/labrynth-industrial/flame-0.png","/Sonic/backdrop/labrynth-industrial/flame-6.png","/Sonic/backdrop/labrynth-industrial/flame-6.png","/Sonic/backdrop/labrynth-industrial/flame-0.png","/Sonic/backdrop/labrynth-industrial/flame-0.png","/Sonic/backdrop/labrynth-industrial/flame-0.png","/Sonic/backdrop/labrynth-industrial/flame-0.png","/Sonic/backdrop/labrynth-industrial/flame-0.png","/Sonic/backdrop/labrynth-industrial/flame-0.png","/Sonic/backdrop/labrynth-industrial/flame-0.png","/Sonic/backdrop/labrynth-industrial/flame-0.png","/Sonic/backdrop/labrynth-industrial/flame-0.png","/Sonic/backdrop/labrynth-industrial/flame-0.png","/Sonic/backdrop/labrynth-industrial/flame-0.png","/Sonic/backdrop/labrynth-industrial/flame-0.png","/Sonic/backdrop/labrynth-industrial/flame-0.png","/Sonic/backdrop/labrynth-industrial/flame-0.png","/Sonic/backdrop/labrynth-industrial/flame-0.png","/Sonic/backdrop/labrynth-industrial/flame-0.png","/Sonic/backdrop/labrynth-industrial/flame-0.png","/Sonic/backdrop/labrynth-industrial/flame-0.png"]},{autoscroll:0,parallax:.05,url:"/Sonic/backdrop/labrynth-industrial/flame-0.png",height:1,interval:1,timeout:0,frame:0,frames:["/Sonic/backdrop/labrynth-industrial/flame-b-0a.png","/Sonic/backdrop/labrynth-industrial/flame-b-1.png","/Sonic/backdrop/labrynth-industrial/flame-b-1.png","/Sonic/backdrop/labrynth-industrial/flame-b-2.png","/Sonic/backdrop/labrynth-industrial/flame-b-0.png","/Sonic/backdrop/labrynth-industrial/flame-b-2.png","/Sonic/backdrop/labrynth-industrial/flame-b-2.png","/Sonic/backdrop/labrynth-industrial/flame-b-2.png","/Sonic/backdrop/labrynth-industrial/flame-b-3.png","/Sonic/backdrop/labrynth-industrial/flame-b-0.png","/Sonic/backdrop/labrynth-industrial/flame-b-3.png","/Sonic/backdrop/labrynth-industrial/flame-b-3.png","/Sonic/backdrop/labrynth-industrial/flame-b-4.png","/Sonic/backdrop/labrynth-industrial/flame-b-0.png","/Sonic/backdrop/labrynth-industrial/flame-b-4.png","/Sonic/backdrop/labrynth-industrial/flame-b-5.png","/Sonic/backdrop/labrynth-industrial/flame-b-6.png","/Sonic/backdrop/labrynth-industrial/flame-b-0.png","/Sonic/backdrop/labrynth-industrial/flame-b-6.png","/Sonic/backdrop/labrynth-industrial/flame-b-6.png","/Sonic/backdrop/labrynth-industrial/flame-b-0.png","/Sonic/backdrop/labrynth-industrial/flame-b-0.png","/Sonic/backdrop/labrynth-industrial/flame-b-0.png","/Sonic/backdrop/labrynth-industrial/flame-b-0.png","/Sonic/backdrop/labrynth-industrial/flame-b-0.png","/Sonic/backdrop/labrynth-industrial/flame-b-0.png","/Sonic/backdrop/labrynth-industrial/flame-b-0.png","/Sonic/backdrop/labrynth-industrial/flame-b-0.png","/Sonic/backdrop/labrynth-industrial/flame-b-0.png","/Sonic/backdrop/labrynth-industrial/flame-b-0.png","/Sonic/backdrop/labrynth-industrial/flame-b-0.png","/Sonic/backdrop/labrynth-industrial/flame-b-0.png","/Sonic/backdrop/labrynth-industrial/flame-b-0.png","/Sonic/backdrop/labrynth-industrial/flame-b-0.png","/Sonic/backdrop/labrynth-industrial/flame-b-0.png","/Sonic/backdrop/labrynth-industrial/flame-b-0.png","/Sonic/backdrop/labrynth-industrial/flame-b-0.png","/Sonic/backdrop/labrynth-industrial/flame-b-0.png"]},{autoscroll:0,parallax:.05,url:"/Sonic/backdrop/labrynth-industrial/flame-0.png",height:1,interval:1,timeout:0,frame:0,frames:["/Sonic/backdrop/labrynth-industrial/flame-c-0a.png","/Sonic/backdrop/labrynth-industrial/flame-c-1.png","/Sonic/backdrop/labrynth-industrial/flame-c-1.png","/Sonic/backdrop/labrynth-industrial/flame-c-2.png","/Sonic/backdrop/labrynth-industrial/flame-c-0.png","/Sonic/backdrop/labrynth-industrial/flame-c-2.png","/Sonic/backdrop/labrynth-industrial/flame-c-2.png","/Sonic/backdrop/labrynth-industrial/flame-c-2.png","/Sonic/backdrop/labrynth-industrial/flame-c-3.png","/Sonic/backdrop/labrynth-industrial/flame-c-0.png","/Sonic/backdrop/labrynth-industrial/flame-c-3.png","/Sonic/backdrop/labrynth-industrial/flame-c-3.png","/Sonic/backdrop/labrynth-industrial/flame-c-4.png","/Sonic/backdrop/labrynth-industrial/flame-c-0.png","/Sonic/backdrop/labrynth-industrial/flame-c-4.png","/Sonic/backdrop/labrynth-industrial/flame-c-5.png","/Sonic/backdrop/labrynth-industrial/flame-c-6.png","/Sonic/backdrop/labrynth-industrial/flame-c-0.png","/Sonic/backdrop/labrynth-industrial/flame-c-6.png","/Sonic/backdrop/labrynth-industrial/flame-c-6.png","/Sonic/backdrop/labrynth-industrial/flame-c-0.png"]},{autoscroll:0,parallax:.125,url:"/Sonic/backdrop/labrynth-industrial/5-bw-small.png",height:10},{autoscroll:0,parallax:.15,url:"/Sonic/backdrop/labrynth-industrial/5-bw-small.png",height:10},{autoscroll:0,parallax:.275,url:"/Sonic/backdrop/labrynth-industrial/5-dim.png",height:50},{autoscroll:0,parallax:.275,url:"/Sonic/backdrop/labrynth-industrial/5-pink-lights.png",height:1,interval:20,timeout:0,frame:0,frames:["/Sonic/backdrop/labrynth-industrial/5-lights-0.png","/Sonic/backdrop/labrynth-industrial/5-lights-0.png","/Sonic/backdrop/labrynth-industrial/5-lights-1.png","/Sonic/backdrop/labrynth-industrial/5-lights-1.png","/Sonic/backdrop/labrynth-industrial/5-lights-2.png","/Sonic/backdrop/labrynth-industrial/5-lights-2.png"]},{autoscroll:0,parallax:.275,url:"/Sonic/backdrop/labrynth-industrial/5-signals-0.png",height:1,interval:10,timeout:0,frame:0,frames:["/Sonic/backdrop/labrynth-industrial/5-signals-0.png","/Sonic/backdrop/labrynth-industrial/5-signals-1.png","/Sonic/backdrop/labrynth-industrial/5-signals-1.png","/Sonic/backdrop/labrynth-industrial/5-signals-1.png","/Sonic/backdrop/labrynth-industrial/5-signals-1.png","/Sonic/backdrop/labrynth-industrial/5-signals-0.png","/Sonic/backdrop/labrynth-industrial/5-signals-2.png","/Sonic/backdrop/labrynth-industrial/5-signals-2.png","/Sonic/backdrop/labrynth-industrial/5-signals-2.png","/Sonic/backdrop/labrynth-industrial/5-signals-2.png"]},{autoscroll:0,parallax:.35,url:"/Sonic/backdrop/labrynth-industrial/5.png",height:40},{autoscroll:0,parallax:.35,url:"/Sonic/backdrop/labrynth-industrial/5-pink-lights.png",height:1},{autoscroll:0,parallax:.35,url:"/Sonic/backdrop/labrynth-industrial/5-signals-0.png",height:1,interval:20,timeout:0,frame:0,frames:["/Sonic/backdrop/labrynth-industrial/5-signals-0.png","/Sonic/backdrop/labrynth-industrial/5-signals-2.png","/Sonic/backdrop/labrynth-industrial/5-signals-2.png","/Sonic/backdrop/labrynth-industrial/5-signals-2.png","/Sonic/backdrop/labrynth-industrial/5-signals-2.png","/Sonic/backdrop/labrynth-industrial/5-signals-0.png","/Sonic/backdrop/labrynth-industrial/5-signals-1.png","/Sonic/backdrop/labrynth-industrial/5-signals-1.png","/Sonic/backdrop/labrynth-industrial/5-signals-1.png","/Sonic/backdrop/labrynth-industrial/5-signals-1.png"]},{autoscroll:0,parallax:.4,url:"/Sonic/backdrop/labrynth-industrial/6-half.png",height:88}],r}return e=l,r&&o(e.prototype,r),n&&o(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}();t.Industrial=l}),require.register("backdrop/MarbleGarden.js",function(t,e,r){"use strict";function n(t){"@babel/helpers - typeof";return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(t,"__esModule",{value:!0}),t.MarbleGarden=void 0;var i=e("./Backdrop");function o(t,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,(o=i.key,void 0,"symbol"===n(a=function(t,e){if("object"!==n(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var i=r.call(t,e||"default");if("object"!==n(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(o,"string"))?a:String(a)),i)}var o,a}function a(t,e){return(a=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function s(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,i=c(t);if(e){var o=c(this).constructor;r=Reflect.construct(i,arguments,o)}else r=i.apply(this,arguments);return function(t,e){if(e&&("object"===n(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function c(t){return(c=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}let l=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&a(t,e)}(l,i.Backdrop);var e,r,n,c=s(l);function l(t,e){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,l),(r=c.call(this,t,e)).args.name="marble-garden",r.args.strips=[{autoscroll:-1.25,parallax:.015,url:"/Sonic/backdrop/marble-garden/0.png",height:32},{autoscroll:-1,parallax:.015,url:"/Sonic/backdrop/marble-garden/1.png",height:24},{autoscroll:-.9,parallax:.015,url:"/Sonic/backdrop/marble-garden/2.png",height:8},{autoscroll:-.8,parallax:.015,url:"/Sonic/backdrop/marble-garden/3.png",height:24},{autoscroll:-.7,parallax:.015,url:"/Sonic/backdrop/marble-garden/4.png",height:8},{autoscroll:-.6,parallax:.0125,url:"/Sonic/backdrop/marble-garden/5.png",height:24},{autoscroll:-.5,parallax:.0125,url:"/Sonic/backdrop/marble-garden/6.png",height:16},{autoscroll:-.45,parallax:.0125,url:"/Sonic/backdrop/marble-garden/7.png",height:8},{autoscroll:-.45,parallax:.0125,url:"/Sonic/backdrop/marble-garden/8.png",height:16},{autoscroll:-.4,parallax:.0125,url:"/Sonic/backdrop/marble-garden/9.png",height:8},{autoscroll:-.35,parallax:.0125,url:"/Sonic/backdrop/marble-garden/10.png",height:16},{autoscroll:-.3,parallax:.01,url:"/Sonic/backdrop/marble-garden/11.png",height:8},{autoscroll:-.25,parallax:.0075,url:"/Sonic/backdrop/marble-garden/12.png",height:8},{autoscroll:-.2,parallax:.0075,url:"/Sonic/backdrop/marble-garden/13.png",height:8},{autoscroll:-.15,parallax:.01,url:"/Sonic/backdrop/marble-garden/14.png",height:8},{autoscroll:-.1,parallax:.01,url:"/Sonic/backdrop/marble-garden/15.png",height:5},{autoscroll:0,parallax:.1,url:"/Sonic/backdrop/marble-garden/16.png",height:30},{autoscroll:0,parallax:.125,url:"/Sonic/backdrop/marble-garden/17.png",height:12},{autoscroll:0,parallax:.125,url:"/Sonic/backdrop/marble-garden/18.png",height:6},{autoscroll:0,parallax:.15,url:"/Sonic/backdrop/marble-garden/19.png",height:6},{autoscroll:0,parallax:.175,url:"/Sonic/backdrop/marble-garden/20.png",height:8},{autoscroll:0,parallax:.2,url:"/Sonic/backdrop/marble-garden/21.png",height:8},{autoscroll:0,parallax:.225,url:"/Sonic/backdrop/marble-garden/22.png",height:24},{autoscroll:0,parallax:.25,url:"/Sonic/backdrop/marble-garden/23.png",height:344}],r}return e=l,r&&o(e.prototype,r),n&&o(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}();t.MarbleGarden=l}),require.register("backdrop/Moon.js",function(t,e,r){"use strict";function n(t){"@babel/helpers - typeof";return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(t,"__esModule",{value:!0}),t.Moon=void 0;var i=e("./Backdrop");function o(t,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,(o=i.key,void 0,"symbol"===n(a=function(t,e){if("object"!==n(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var i=r.call(t,e||"default");if("object"!==n(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(o,"string"))?a:String(a)),i)}var o,a}function a(t,e){return(a=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function s(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,i=c(t);if(e){var o=c(this).constructor;r=Reflect.construct(i,arguments,o)}else r=i.apply(this,arguments);return function(t,e){if(e&&("object"===n(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function c(t){return(c=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}let l=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&a(t,e)}(l,i.Backdrop);var e,r,n,c=s(l);function l(t,e){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,l),(r=c.call(this,t,e)).args.name="moon",r.args.strips=[{autoscroll:.035,parallax:.0019,url:"/Sonic/backdrop/doomsday/backdrop-inverted-0-0a.png",height:13},{autoscroll:.03,parallax:.0016,url:"/Sonic/backdrop/doomsday/backdrop-inverted-0-0b.png",height:13},{autoscroll:.025,parallax:.0015,url:"/Sonic/backdrop/doomsday/backdrop-inverted-0-1.png",height:12},{autoscroll:.02,parallax:.0013,url:"/Sonic/backdrop/doomsday/backdrop-inverted-0-2.png",height:12},{autoscroll:.015,parallax:.001,url:"/Sonic/backdrop/doomsday/backdrop-inverted-0-3.png",height:8},{autoscroll:.01,parallax:9e-4,url:"/Sonic/backdrop/doomsday/backdrop-inverted-0-4.png",height:5},{autoscroll:.005,parallax:7e-4,url:"/Sonic/backdrop/doomsday/backdrop-inverted-0-5.png",height:14},{autoscroll:.0025,parallax:5e-4,url:"/Sonic/backdrop/doomsday/backdrop-inverted-0-6.png",height:140},{autoscroll:0,parallax:.015,url:"/mmpr/moon/terrain-00-00.png",height:0},{autoscroll:0,parallax:.035,url:"/mmpr/moon/terrain-00-01.png",height:2},{autoscroll:0,parallax:.045,url:"/mmpr/moon/terrain-00-02.png",height:3},{autoscroll:0,parallax:.055,url:"/mmpr/moon/terrain-00-03.png",height:4},{autoscroll:0,parallax:.065,url:"/mmpr/moon/terrain-00-04.png",height:4},{autoscroll:0,parallax:.075,url:"/mmpr/moon/terrain-00-05.png",height:10},{autoscroll:0,parallax:.085,url:"/mmpr/moon/terrain-00-06.png",height:5},{autoscroll:0,parallax:.095,url:"/mmpr/moon/terrain-00-07-b.png",height:10},{autoscroll:0,parallax:.1,url:"/mmpr/moon/terrain-00-08.png",height:10},{autoscroll:0,parallax:.105,url:"/mmpr/moon/terrain-00-09.png",height:12},{autoscroll:0,parallax:.115,url:"/mmpr/moon/terrain-00-10-b.png",height:12},{autoscroll:0,parallax:.125,url:"/mmpr/moon/terrain-00-11.png",height:5},{autoscroll:0,parallax:.1325,url:"/mmpr/moon/terrain-00-09-b.png",height:12},{autoscroll:0,parallax:.1435,url:"/mmpr/moon/terrain-00-12.png",height:22}],r}return e=l,r&&o(e.prototype,r),n&&o(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}();t.Moon=l}),require.register("backdrop/MushroomHill.js",function(t,e,r){"use strict";function n(t){"@babel/helpers - typeof";return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(t,"__esModule",{value:!0}),t.MushroomHill=void 0;var i=e("./Backdrop");function o(t,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,(o=i.key,void 0,"symbol"===n(a=function(t,e){if("object"!==n(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var i=r.call(t,e||"default");if("object"!==n(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(o,"string"))?a:String(a)),i)}var o,a}function a(t,e){return(a=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function s(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,i=c(t);if(e){var o=c(this).constructor;r=Reflect.construct(i,arguments,o)}else r=i.apply(this,arguments);return function(t,e){if(e&&("object"===n(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function c(t){return(c=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}let l=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&a(t,e)}(l,i.Backdrop);var e,r,n,c=s(l);function l(t,e){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,l),(r=c.call(this,t,e)).args.name="mushroom-hill-summer",r.args.strips=[{autoscroll:0,parallax:0,url:"/Sonic/backdrop/mushroom-hill/blank.png",height:332},{autoscroll:0,parallax:.05,url:"/Sonic/backdrop/marble-garden-1/hills-recolored_1.png",height:8},{autoscroll:0,parallax:.06,url:"/Sonic/backdrop/marble-garden-1/hills-recolored_2.png",height:8},{autoscroll:0,parallax:.07,url:"/Sonic/backdrop/marble-garden-1/hills-recolored_3.png",height:8},{autoscroll:0,parallax:.08,url:"/Sonic/backdrop/marble-garden-1/hills-recolored_4.png",height:24},{autoscroll:0,parallax:.09,url:"/Sonic/backdrop/marble-garden-1/hills-recolored_5.png",height:120},{autoscroll:0,parallax:.11,url:"/Sonic/backdrop/mushroom-hill/background-trees-summer-edit.png",height:0},{autoscroll:0,parallax:.165,url:"/Sonic/backdrop/mushroom-hill/foreground-summer.png",height:224}],r}return e=l,r&&o(e.prototype,r),n&&o(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}();t.MushroomHill=l}),require.register("backdrop/MysticCave.js",function(t,e,r){"use strict";function n(t){"@babel/helpers - typeof";return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(t,"__esModule",{value:!0}),t.MysticCave=void 0;var i=e("./Backdrop");function o(t,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,(o=i.key,void 0,"symbol"===n(a=function(t,e){if("object"!==n(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var i=r.call(t,e||"default");if("object"!==n(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(o,"string"))?a:String(a)),i)}var o,a}function a(t,e){return(a=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function s(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,i=c(t);if(e){var o=c(this).constructor;r=Reflect.construct(i,arguments,o)}else r=i.apply(this,arguments);return function(t,e){if(e&&("object"===n(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function c(t){return(c=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}let l=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&a(t,e)}(l,i.Backdrop);var e,r,n,c=s(l);function l(t,e){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,l),(r=c.call(this,t,e)).args.name="mystic-cave",r.args.strips=[{autoscroll:0,parallax:.27,url:"/Sonic/backdrop/mystic-cave/1.png",height:37},{autoscroll:0,parallax:.23,url:"/Sonic/backdrop/mystic-cave/2.png",height:23},{autoscroll:0,parallax:.21,url:"/Sonic/backdrop/mystic-cave/3.png",height:18},{autoscroll:0,parallax:.2,url:"/Sonic/backdrop/mystic-cave/4.png",height:7},{autoscroll:0,parallax:.19,url:"/Sonic/backdrop/mystic-cave/5.png",height:6},{autoscroll:0,parallax:.18,url:"/Sonic/backdrop/mystic-cave/6.png",height:1},{autoscroll:0,parallax:.17,url:"/Sonic/backdrop/mystic-cave/7.png",height:1},{autoscroll:0,parallax:.16,url:"/Sonic/backdrop/mystic-cave/8.png",height:1},{autoscroll:0,parallax:.15,url:"/Sonic/backdrop/mystic-cave/9.png",height:1},{autoscroll:0,parallax:.14,url:"/Sonic/backdrop/mystic-cave/10.png",height:1},{autoscroll:0,parallax:.13,url:"/Sonic/backdrop/mystic-cave/11.png",height:48},{autoscroll:0,parallax:.14,url:"/Sonic/backdrop/mystic-cave/12.png",height:13},{autoscroll:0,parallax:.15,url:"/Sonic/backdrop/mystic-cave/13.png",height:19},{autoscroll:0,parallax:.17,url:"/Sonic/backdrop/mystic-cave/14.png",height:34},{autoscroll:0,parallax:.2,url:"/Sonic/backdrop/mystic-cave/15.png",height:62},{autoscroll:0,parallax:.17,url:"/Sonic/backdrop/mystic-cave/16.png",height:32},{autoscroll:0,parallax:.14,url:"/Sonic/backdrop/mystic-cave/16.5.png",height:19},{autoscroll:0,parallax:.13,url:"/Sonic/backdrop/mystic-cave/17.png",height:13},{autoscroll:0,parallax:.12,url:"/Sonic/backdrop/mystic-cave/18.png",height:48},{autoscroll:0,parallax:.13,url:"/Sonic/backdrop/mystic-cave/19.png",height:1},{autoscroll:0,parallax:.14,url:"/Sonic/backdrop/mystic-cave/20.png",height:1},{autoscroll:0,parallax:.16,url:"/Sonic/backdrop/mystic-cave/21.png",height:1},{autoscroll:0,parallax:.18,url:"/Sonic/backdrop/mystic-cave/22.png",height:1},{autoscroll:0,parallax:.2,url:"/Sonic/backdrop/mystic-cave/23.png",height:1},{autoscroll:0,parallax:.22,url:"/Sonic/backdrop/mystic-cave/24.png",height:6},{autoscroll:0,parallax:.24,url:"/Sonic/backdrop/mystic-cave/25.png",height:7},{autoscroll:0,parallax:.28,url:"/Sonic/backdrop/mystic-cave/26.png",height:32},{autoscroll:0,parallax:.33,url:"/Sonic/backdrop/mystic-cave/27.png",height:18},{autoscroll:0,parallax:.35,url:"/Sonic/backdrop/mystic-cave/28.png",height:23},{autoscroll:0,parallax:.37,url:"/Sonic/backdrop/mystic-cave/29.png",height:37}],r}return e=l,r&&o(e.prototype,r),n&&o(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}();t.MysticCave=l}),require.register("backdrop/Overcast.js",function(t,e,r){"use strict";function n(t){"@babel/helpers - typeof";return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(t,"__esModule",{value:!0}),t.Overcast=void 0;var i=e("./Backdrop");function o(t,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,(o=i.key,void 0,"symbol"===n(a=function(t,e){if("object"!==n(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var i=r.call(t,e||"default");if("object"!==n(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(o,"string"))?a:String(a)),i)}var o,a}function a(t,e){return(a=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function s(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,i=c(t);if(e){var o=c(this).constructor;r=Reflect.construct(i,arguments,o)}else r=i.apply(this,arguments);return function(t,e){if(e&&("object"===n(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function c(t){return(c=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}let l=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&a(t,e)}(l,i.Backdrop);var e,r,n,c=s(l);function l(t,e){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,l),(r=c.call(this,t,e)).args.name="overcast",r.args.strips=[{autoscroll:.14,parallax:.06,url:"/Sonic/backdrop/stardust-speedway/sky-0.png",height:32},{autoscroll:.13,parallax:.055,url:"/Sonic/backdrop/stardust-speedway/sky-1.png",height:32},{autoscroll:.12,parallax:.05,url:"/Sonic/backdrop/stardust-speedway/sky-2.png",height:16},{autoscroll:.11,parallax:.045,url:"/Sonic/backdrop/stardust-speedway/sky-3.png",height:16},{autoscroll:.1,parallax:.05,url:"/Sonic/backdrop/stardust-speedway/sky-4.png",height:16},{autoscroll:.09,parallax:.05,url:"/Sonic/backdrop/stardust-speedway/sky-5.png",height:32},{autoscroll:.08,parallax:.04,url:"/Sonic/backdrop/stardust-speedway/sky-6.png",height:32},{autoscroll:.07,parallax:.03,url:"/Sonic/backdrop/stardust-speedway/sky-7.png",height:16},{autoscroll:.06,parallax:.02,url:"/Sonic/backdrop/stardust-speedway/sky-8.png",height:32},{autoscroll:.05,parallax:.01,url:"/Sonic/backdrop/stardust-speedway/sky-9.png",height:16},{autoscroll:.04,parallax:.005,url:"/Sonic/backdrop/stardust-speedway/sky-10.png",height:16},{autoscroll:.03,parallax:.004,url:"/Sonic/backdrop/stardust-speedway/sky-11.png",height:16},{autoscroll:.02,parallax:.003,url:"/Sonic/backdrop/stardust-speedway/sky-12.png",height:16},{autoscroll:.015,parallax:.002,url:"/Sonic/backdrop/stardust-speedway/sky-13.png",height:8},{autoscroll:.015,parallax:.002,url:"/Sonic/backdrop/stardust-speedway/sky-14.png",height:51},{autoscroll:.015,parallax:.002,url:"/Sonic/backdrop/west-side/empty.png",height:51}],r}return e=l,r&&o(e.prototype,r),n&&o(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}();t.Overcast=l}),require.register("backdrop/PhazonMines.js",function(t,e,r){"use strict";function n(t){"@babel/helpers - typeof";return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(t,"__esModule",{value:!0}),t.PhazonMines=void 0;var i=e("./Backdrop");function o(t,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,(o=i.key,void 0,"symbol"===n(a=function(t,e){if("object"!==n(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var i=r.call(t,e||"default");if("object"!==n(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(o,"string"))?a:String(a)),i)}var o,a}function a(t,e){return(a=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function s(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,i=c(t);if(e){var o=c(this).constructor;r=Reflect.construct(i,arguments,o)}else r=i.apply(this,arguments);return function(t,e){if(e&&("object"===n(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function c(t){return(c=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}let l=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&a(t,e)}(l,i.Backdrop);var e,r,n,c=s(l);function l(t,e){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,l),(r=c.call(this,t,e)).args.name="scrap-brain",r.args.strips=[{autoscroll:0,parallax:.1,url:"/Sonic/backdrop/tidal-tempest/phazon-mines.png",height:512}],r}return e=l,r&&o(e.prototype,r),n&&o(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}();t.PhazonMines=l}),require.register("backdrop/ProtoLabrynth.js",function(t,e,r){"use strict";function n(t){"@babel/helpers - typeof";return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(t,"__esModule",{value:!0}),t.ProtoLabrynth=void 0;var i=e("./Backdrop");function o(t,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,(o=i.key,void 0,"symbol"===n(a=function(t,e){if("object"!==n(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var i=r.call(t,e||"default");if("object"!==n(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(o,"string"))?a:String(a)),i)}var o,a}function a(t,e){return(a=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function s(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,i=c(t);if(e){var o=c(this).constructor;r=Reflect.construct(i,arguments,o)}else r=i.apply(this,arguments);return function(t,e){if(e&&("object"===n(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function c(t){return(c=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}let l=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&a(t,e)}(l,i.Backdrop);var e,r,n,c=s(l);function l(t,e){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,l),(r=c.call(this,t,e)).args.name="proto-labrynth",r.args.strips=[{autoscroll:0,parallax:.15,url:"/Sonic/backdrop/protolabrynth/0.png",height:48},{autoscroll:0,parallax:.125,url:"/Sonic/backdrop/protolabrynth/1.png",height:24},{autoscroll:0,parallax:.1,url:"/Sonic/backdrop/protolabrynth/2.png",height:8},{autoscroll:0,parallax:.075,url:"/Sonic/backdrop/protolabrynth/3.png",height:68},{autoscroll:0,parallax:.1,url:"/Sonic/backdrop/protolabrynth/4.png",height:18},{autoscroll:0,parallax:.125,url:"/Sonic/backdrop/protolabrynth/5.png",height:27},{autoscroll:0,parallax:.15,url:"/Sonic/backdrop/protolabrynth/5.png",height:27},{autoscroll:0,parallax:.175,url:"/Sonic/backdrop/protolabrynth/6.png",height:76}],r}return e=l,r&&o(e.prototype,r),n&&o(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}();t.ProtoLabrynth=l}),require.register("backdrop/ScrapBrainDark.js",function(t,e,r){"use strict";function n(t){"@babel/helpers - typeof";return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(t,"__esModule",{value:!0}),t.ScrapBrainDark=void 0;var i=e("./Backdrop");function o(t,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,(o=i.key,void 0,"symbol"===n(a=function(t,e){if("object"!==n(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var i=r.call(t,e||"default");if("object"!==n(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(o,"string"))?a:String(a)),i)}var o,a}function a(t,e){return(a=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function s(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,i=c(t);if(e){var o=c(this).constructor;r=Reflect.construct(i,arguments,o)}else r=i.apply(this,arguments);return function(t,e){if(e&&("object"===n(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function c(t){return(c=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}let l=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&a(t,e)}(l,i.Backdrop);var e,r,n,c=s(l);function l(t,e){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,l),(r=c.call(this,t,e)).args.name="scrap-brain",r.args.strips=[{autoscroll:0,parallax:.1,url:"/Sonic/backdrop/scrap-brain/indoors-dark.png",height:1024}],r}return e=l,r&&o(e.prototype,r),n&&o(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}();t.ScrapBrainDark=l}),require.register("backdrop/SouthRidge.js",function(t,e,r){"use strict";function n(t){"@babel/helpers - typeof";return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(t,"__esModule",{value:!0}),t.SouthRidge=void 0;var i=e("./Backdrop");function o(t,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,(o=i.key,void 0,"symbol"===n(a=function(t,e){if("object"!==n(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var i=r.call(t,e||"default");if("object"!==n(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(o,"string"))?a:String(a)),i)}var o,a}function a(t,e){return(a=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function s(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,i=c(t);if(e){var o=c(this).constructor;r=Reflect.construct(i,arguments,o)}else r=i.apply(this,arguments);return function(t,e){if(e&&("object"===n(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function c(t){return(c=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}let l=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&a(t,e)}(l,i.Backdrop);var e,r,n,c=s(l);function l(t,e){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,l),(r=c.call(this,t,e)).args.name="south-ridge",r.args.strips=[{autoscroll:-.03,parallax:.11,url:"/Sonic/backdrop/south-ridge/clouds-10.png",height:10},{autoscroll:0,parallax:.1,url:"/Sonic/backdrop/south-ridge/ridge.png",height:10},{autoscroll:-.06,parallax:.12,url:"/Sonic/backdrop/south-ridge/clouds-9.png",height:0},{autoscroll:-.06,parallax:.12,url:"/Sonic/backdrop/south-ridge/clouds-9b.png",height:8},{autoscroll:-.065,parallax:.13,url:"/Sonic/backdrop/south-ridge/clouds-8.png",height:11},{autoscroll:0,parallax:.11,url:"/Sonic/backdrop/south-ridge/ridge-b.png",height:20},{autoscroll:-.07,parallax:.14,url:"/Sonic/backdrop/south-ridge/clouds-7.png",height:-9},{autoscroll:-.075,parallax:.15,url:"/Sonic/backdrop/south-ridge/clouds-6.png",height:9},{autoscroll:-.08,parallax:.16,url:"/Sonic/backdrop/south-ridge/clouds-5.png",height:8},{autoscroll:-.09,parallax:.18,url:"/Sonic/backdrop/south-ridge/clouds-4.png",height:16},{autoscroll:-.1,parallax:.2,url:"/Sonic/backdrop/south-ridge/clouds-3.png",height:13},{autoscroll:-.1125,parallax:.22,url:"/Sonic/backdrop/south-ridge/clouds-2.png",height:17},{autoscroll:-.15,parallax:.21,url:"/Sonic/backdrop/south-ridge/clouds-1.png",height:15},{autoscroll:-.175,parallax:.21,url:"/Sonic/backdrop/south-ridge/clouds-0.png",height:16},{autoscroll:-.15,parallax:.22,url:"/Sonic/backdrop/south-ridge/clouds-1.png",height:15},{autoscroll:-.175,parallax:.23,url:"/Sonic/backdrop/south-ridge/clouds-0.png",height:16}],r}return e=l,r&&o(e.prototype,r),n&&o(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}();t.SouthRidge=l}),require.register("backdrop/Underground.js",function(t,e,r){"use strict";function n(t){"@babel/helpers - typeof";return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(t,"__esModule",{value:!0}),t.Underground=void 0;var i=e("./Backdrop");function o(t,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,(o=i.key,void 0,"symbol"===n(a=function(t,e){if("object"!==n(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var i=r.call(t,e||"default");if("object"!==n(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(o,"string"))?a:String(a)),i)}var o,a}function a(t,e){return(a=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function s(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,i=c(t);if(e){var o=c(this).constructor;r=Reflect.construct(i,arguments,o)}else r=i.apply(this,arguments);return function(t,e){if(e&&("object"===n(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function c(t){return(c=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}let l=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&a(t,e)}(l,i.Backdrop);var e,r,n,c=s(l);function l(t,e){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,l),(r=c.call(this,t,e)).args.name="underground",r.args.strips=[{autoscroll:.045,parallax:.075,url:"/Sonic/backdrop/wing-fortress/sky-1b-recolor.png",height:32},{autoscroll:.043,parallax:.07,url:"/Sonic/backdrop/wing-fortress/sky-0-recolor.png",height:48},{autoscroll:.041,parallax:.065,url:"/Sonic/backdrop/wing-fortress/sky-1-recolor.png",height:32},{autoscroll:.039,parallax:.06,url:"/Sonic/backdrop/wing-fortress/sky-2-recolor.png",height:48},{autoscroll:0,parallax:.075,url:"/Sonic/backdrop/aquatic-ruin/mountains-0-recolor.png",height:0},{autoscroll:0,parallax:0,url:"/Sonic/backdrop/aquatic-ruin/mountains-1-recolor.png",height:48},{autoscroll:0,parallax:0,url:"/Sonic/backdrop/aquatic-ruin/mountains-1-recolor.png",height:48},{autoscroll:0,parallax:0,url:"/Sonic/backdrop/aquatic-ruin/mountains-1-recolor.png",height:24}],r}return e=l,r&&o(e.prototype,r),n&&o(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}();t.Underground=l}),require.register("backdrop/WestSide.js",function(t,e,r){"use strict";function n(t){"@babel/helpers - typeof";return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(t,"__esModule",{value:!0}),t.WestSide=void 0;var i=e("./Backdrop");function o(t,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,(o=i.key,void 0,"symbol"===n(a=function(t,e){if("object"!==n(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var i=r.call(t,e||"default");if("object"!==n(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(o,"string"))?a:String(a)),i)}var o,a}function a(t,e){return(a=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function s(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,i=c(t);if(e){var o=c(this).constructor;r=Reflect.construct(i,arguments,o)}else r=i.apply(this,arguments);return function(t,e){if(e&&("object"===n(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function c(t){return(c=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}let l=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&a(t,e)}(l,i.Backdrop);var e,r,n,c=s(l);function l(t,e){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,l),(r=c.call(this,t,e)).args.name="west-side",r.args.strips=[{autoscroll:.001,parallax:.001,url:"/Sonic/backdrop/west-side/stars-before.png",height:64},{autoscroll:.001,parallax:.001,url:"/Sonic/backdrop/west-side/stars.png",height:205},{autoscroll:0,parallax:5e-4,url:"/Sonic/backdrop/west-side/island-dark.png",height:0},{autoscroll:0,parallax:5e-4,url:"/Sonic/backdrop/west-side/water-shine-0.png",height:3},{autoscroll:0,parallax:5e-4,url:"/Sonic/backdrop/west-side/water-shine-1.png",height:3},{autoscroll:0,parallax:.004,url:"/Sonic/backdrop/west-side/water-night.png",height:144},{autoscroll:.001,parallax:.001,url:"/Sonic/backdrop/west-side/stars-reflected.png",height:0},{autoscroll:0,parallax:5e-4,url:"/Sonic/backdrop/west-side/island-dark-reflected.png",height:0},{autoscroll:0,parallax:.03,url:"/Sonic/backdrop/launch-base/bushes-0-night.png",height:0},{autoscroll:0,parallax:.05,url:"/Sonic/backdrop/launch-base/bushes-1-night.png",height:0},{autoscroll:0,parallax:.05,url:"/Sonic/backdrop/launch-base/bushes-2-night.png",height:48},{autoscroll:0,parallax:.05,url:"/Sonic/backdrop/launch-base/bushes-3-night.png",height:128}],r}return e=l,r&&o(e.prototype,r),n&&o(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}();t.WestSide=l}),require.register("backdrop/WestSideCloudy.js",function(t,e,r){"use strict";function n(t){"@babel/helpers - typeof";return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(t,"__esModule",{value:!0}),t.WestSideCloudy=void 0;var i=e("./Backdrop");function o(t,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,(o=i.key,void 0,"symbol"===n(a=function(t,e){if("object"!==n(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var i=r.call(t,e||"default");if("object"!==n(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(o,"string"))?a:String(a)),i)}var o,a}function a(t,e){return(a=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function s(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,i=c(t);if(e){var o=c(this).constructor;r=Reflect.construct(i,arguments,o)}else r=i.apply(this,arguments);return function(t,e){if(e&&("object"===n(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function c(t){return(c=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}let l=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&a(t,e)}(l,i.Backdrop);var e,r,n,c=s(l);function l(t,e){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,l),(r=c.call(this,t,e)).args.name="west-side-cloudy",r.args.strips=[{autoscroll:.14,parallax:.02,url:"/Sonic/backdrop/west-side/clouds--1.png",height:64},{autoscroll:.14,parallax:.02,url:"/Sonic/backdrop/west-side/clouds-0.png",height:33},{autoscroll:.13,parallax:.014,url:"/Sonic/backdrop/west-side/clouds-1.png",height:32},{autoscroll:.12,parallax:.013,url:"/Sonic/backdrop/west-side/clouds-2.png",height:24},{autoscroll:.11,parallax:.012,url:"/Sonic/backdrop/west-side/clouds-3.png",height:16},{autoscroll:.1,parallax:.011,url:"/Sonic/backdrop/west-side/clouds-4.png",height:5},{autoscroll:.09,parallax:.01,url:"/Sonic/backdrop/west-side/clouds-5.png",height:3},{autoscroll:.08,parallax:.009,url:"/Sonic/backdrop/west-side/clouds-6.png",height:8},{autoscroll:.07,parallax:.008,url:"/Sonic/backdrop/west-side/clouds-7.png",height:5},{autoscroll:.06,parallax:.007,url:"/Sonic/backdrop/west-side/clouds-8.png",height:3},{autoscroll:.05,parallax:.006,url:"/Sonic/backdrop/west-side/clouds-9.png",height:8},{autoscroll:.04,parallax:.005,url:"/Sonic/backdrop/west-side/clouds-10.png",height:8},{autoscroll:.03,parallax:.004,url:"/Sonic/backdrop/west-side/clouds-11.png",height:32},{autoscroll:.02,parallax:.003,url:"/Sonic/backdrop/west-side/clouds-12.png",height:8},{autoscroll:.015,parallax:.002,url:"/Sonic/backdrop/west-side/clouds-13.png",height:32},{autoscroll:0,parallax:5e-4,url:"/Sonic/backdrop/west-side/water-shine-cloudy.png",height:2},{autoscroll:0,parallax:5e-4,url:"/Sonic/backdrop/west-side/island-dark-cloudy.png",height:0},{autoscroll:.015,parallax:.002,url:"/Sonic/backdrop/west-side/reflected-clouds-0.png",height:32},{autoscroll:.02,parallax:.003,url:"/Sonic/backdrop/west-side/reflected-clouds-1.png",height:8},{autoscroll:.03,parallax:.004,url:"/Sonic/backdrop/west-side/reflected-clouds-2.png",height:32},{autoscroll:.04,parallax:.005,url:"/Sonic/backdrop/west-side/reflected-clouds-3.png",height:8},{autoscroll:.05,parallax:.006,url:"/Sonic/backdrop/west-side/reflected-clouds-4.png",height:8},{autoscroll:.06,parallax:.007,url:"/Sonic/backdrop/west-side/reflected-clouds-5.png",height:3},{autoscroll:.07,parallax:.008,url:"/Sonic/backdrop/west-side/reflected-clouds-6.png",height:5},{autoscroll:.08,parallax:.009,url:"/Sonic/backdrop/west-side/reflected-clouds-7.png",height:16},{autoscroll:.09,parallax:.01,url:"/Sonic/backdrop/west-side/reflected-clouds-8.png",height:24},{autoscroll:.1,parallax:.011,url:"/Sonic/backdrop/west-side/reflected-clouds-9.png",height:20},{autoscroll:0,parallax:5e-4,url:"/Sonic/backdrop/west-side/island-dark-cloudy-reflected.png",height:0},{autoscroll:0,parallax:.004,url:"/Sonic/backdrop/west-side/water-cloudy.png",height:46},{autoscroll:0,parallax:0,url:"/Sonic/backdrop/west-side/water-cloudy-after.png",height:128}],r.args.bindTo("frame",t=>{r.args.ligtening||Math.random()>.995&&(r.args.name="west-side-cloudy lightning",r.args.lightning=!0,r.onTimeout(1e3,()=>{r.args.name="west-side-cloudy",r.args.lightning=!1}))}),r}return e=l,r&&o(e.prototype,r),n&&o(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}();t.WestSideCloudy=l}),require.register("backdrop/WestSideDay.js",function(t,e,r){"use strict";function n(t){"@babel/helpers - typeof";return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(t,"__esModule",{value:!0}),t.WestSideDay=void 0;var i=e("./Backdrop");function o(t,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,(o=i.key,void 0,"symbol"===n(a=function(t,e){if("object"!==n(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var i=r.call(t,e||"default");if("object"!==n(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(o,"string"))?a:String(a)),i)}var o,a}function a(t,e){return(a=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function s(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,i=c(t);if(e){var o=c(this).constructor;r=Reflect.construct(i,arguments,o)}else r=i.apply(this,arguments);return function(t,e){if(e&&("object"===n(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function c(t){return(c=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}const l=[,{e0e0e5:"afafc1"},{e0e0e5:"afafc1"},{e0e0e5:"afafc1"},{e0e0e5:"afafc1"},{e0e0e5:"afafc1"},{e0e0e5:"e0e0e5"},{e0e0e5:"afafc1"},{e0e0e5:"e0e0e5"},{e0e0e5:"e0e0e5"}];let u=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&a(t,e)}(u,i.Backdrop);var e,r,n,c=s(u);function u(t,e){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,u),(r=c.call(this,t,e)).args.name="west-side-day",r.args.strips=[{autoscroll:.001,parallax:.001,url:"/Sonic/backdrop/west-side/empty.png",height:64},{autoscroll:.001,parallax:.001,url:"/Sonic/backdrop/west-side/empty.png",height:205},{autoscroll:0,parallax:5e-4,url:"/Sonic/backdrop/west-side/island-day.png",height:0},{autoscroll:0,parallax:5e-4,url:"/Sonic/backdrop/west-side/water-shine-0.png",height:3},{autoscroll:0,parallax:5e-4,url:"/Sonic/backdrop/west-side/water-shine-1.png",height:3},{autoscroll:0,parallax:.004,url:"/Sonic/backdrop/west-side/water.png",height:144},{autoscroll:0,parallax:0,url:"/Sonic/backdrop/west-side/empty.png",height:0},{autoscroll:0,parallax:5e-4,url:"/Sonic/backdrop/west-side/island-day-reflected.png",height:0},{autoscroll:0,parallax:5e-4,url:"/Sonic/backdrop/west-side/island-shine.png",height:1,interval:26,timeout:100,frame:0,recolor:l},{autoscroll:0,parallax:.03,url:"/Sonic/backdrop/launch-base/bushes-0.png",height:0},{autoscroll:0,parallax:.05,url:"/Sonic/backdrop/launch-base/bushes-1.png",height:0},{autoscroll:0,parallax:.05,url:"/Sonic/backdrop/launch-base/bushes-2.png",height:48},{autoscroll:0,parallax:.05,url:"/Sonic/backdrop/launch-base/bushes-3.png",height:128}],r}return e=u,r&&o(e.prototype,r),n&&o(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}();t.WestSideDay=u}),require.register("backdrop/WestSideNight.js",function(t,e,r){"use strict";function n(t){"@babel/helpers - typeof";return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(t,"__esModule",{value:!0}),t.WestSideNight=void 0;var i=e("./Backdrop");function o(t,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,(o=i.key,void 0,"symbol"===n(a=function(t,e){if("object"!==n(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var i=r.call(t,e||"default");if("object"!==n(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(o,"string"))?a:String(a)),i)}var o,a}function a(t,e){return(a=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function s(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,i=c(t);if(e){var o=c(this).constructor;r=Reflect.construct(i,arguments,o)}else r=i.apply(this,arguments);return function(t,e){if(e&&("object"===n(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function c(t){return(c=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}let l=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&a(t,e)}(l,i.Backdrop);var e,r,n,c=s(l);function l(t,e){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,l),(r=c.call(this,t,e)).args.name="west-side",r.args.strips=[{autoscroll:0,parallax:.001,url:"/Sonic/backdrop/west-side/stars.png",height:0},{autoscroll:0,parallax:5e-4,url:"/Sonic/backdrop/west-side/island-dark.png",height:0},{autoscroll:0,parallax:5e-4,url:"/Sonic/backdrop/west-side/water-shine-0.png",height:3},{autoscroll:0,parallax:5e-4,url:"/Sonic/backdrop/west-side/water-shine-1.png",height:3},{autoscroll:0,parallax:4e-4,url:"/Sonic/backdrop/west-side/water-shine-2.png",height:3},{autoscroll:0,parallax:.004,url:"/Sonic/backdrop/west-side/water.png",height:142},{autoscroll:0,parallax:.001,url:"/Sonic/backdrop/west-side/stars-reflected.png",height:0},{autoscroll:0,parallax:5e-4,url:"/Sonic/backdrop/west-side/island-dark-reflected.png",height:0}],r}return e=l,r&&o(e.prototype,r),n&&o(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}();t.WestSideNight=l}),require.register("backdrop/Wood.js",function(t,e,r){"use strict";function n(t){"@babel/helpers - typeof";return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(t,"__esModule",{value:!0}),t.Wood=void 0;var i=e("./Backdrop");function o(t,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,(o=i.key,void 0,"symbol"===n(a=function(t,e){if("object"!==n(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var i=r.call(t,e||"default");if("object"!==n(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(o,"string"))?a:String(a)),i)}var o,a}function a(t,e){return(a=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function s(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,i=c(t);if(e){var o=c(this).constructor;r=Reflect.construct(i,arguments,o)}else r=i.apply(this,arguments);return function(t,e){if(e&&("object"===n(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function c(t){return(c=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}let l=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&a(t,e)}(l,i.Backdrop);var e,r,n,c=s(l);function l(t,e){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,l),(r=c.call(this,t,e)).args.name="wood",r.args.strips=[{autoscroll:0,parallax:.1,url:"/Sonic/backdrop/wood/forest.png",height:1600}],r}return e=l,r&&o(e.prototype,r),n&&o(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}();t.Wood=l}),require.register("behavior/Behavior.js",function(t,e,r){"use strict";function n(t){"@babel/helpers - typeof";return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function i(t,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,(o=i.key,void 0,"symbol"===n(a=function(t,e){if("object"!==n(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var i=r.call(t,e||"default");if("object"!==n(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(o,"string"))?a:String(a)),i)}var o,a}Object.defineProperty(t,"__esModule",{value:!0}),t.Behavior=void 0;let o=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}var e,r,n;return e=t,(r=[{key:"update",value:function(t){}}])&&i(e.prototype,r),n&&i(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();t.Behavior=o}),require.register("behavior/Crouch.js",function(t,e,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Crouch=void 0;e("curvature/base/Tag");var n=e("./Behavior");function i(t){"@babel/helpers - typeof";return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function o(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,u(n.key),n)}}function a(t,e){return(a=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function s(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=l(t);if(e){var o=l(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===i(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return c(t)}(this,r)}}function c(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function l(t){return(l=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function u(t){var e=function(t,e){if("object"!==i(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==i(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===i(e)?e:String(e)}let f=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&a(t,e)}(f,n.Behavior);var e,r,i,l=s(f);function f(){var t,e,r,n;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,f);for(var i=arguments.length,o=new Array(i),a=0;a<i;a++)o[a]=arguments[a];return t=l.call(this,...o),e=c(t),n=0,(r=u(r="spindashCharge"))in e?Object.defineProperty(e,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[r]=n,t}return e=f,(r=[{key:"command_0",value:function(t,e){t.yAxis>.55&&!t.args.falling&&t.args.gSpeed}},{key:"update",value:function(t){t.args.grinding?t.yAxis>.55?(t.args.animation="grinding-crouching",t.args.crouching=!0):t.args.crouching=!1:t.yAxis>.55&&!t.args.gSpeed&&!t.args.falling&&!t.spindashCharge?(t.args.lookTime--,t.args.lookTime<-45&&(t.args.cameraBias=-.5),t.args.animation="crouching",t.args.crouching=!0):t.args.crouching=!1}}])&&o(e.prototype,r),i&&o(e,i),Object.defineProperty(e,"prototype",{writable:!1}),f}();t.Crouch=f}),require.register("behavior/EmeraldHalo.js",function(t,e,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.EmeraldHalo=void 0;var n=e("curvature/base/Tag"),i=e("./Behavior");function o(t){"@babel/helpers - typeof";return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function a(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,p(n.key),n)}}function s(t,e){return(s=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function c(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=u(t);if(e){var i=u(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===o(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return l(t)}(this,r)}}function l(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function u(t){return(u=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function f(t,e,r){return(e=p(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function p(t){var e=function(t,e){if("object"!==o(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==o(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===o(e)?e:String(e)}let h=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&s(t,e)}(p,i.Behavior);var e,r,o,u=c(p);function p(){var t;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,p);for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];return f(l(t=u.call(this,...r)),"emeraldColors",["red-alt","yellow","green","cyan","white","purple","pink"]),f(l(t),"emeraldParticles",new Set),t}return e=p,(r=[{key:"command_3",value:function(t,e){if((t.isSuper||!(t.args.rings<t.args.minRingsSuper))&&!(t.isSuper&&!t.isHyper&&t.args.rings<t.args.minRingsHyper)&&!t.isHyper&&t.args.falling&&t.args.jumping)for(;this.emeraldParticles.size<7;){const e=this.emeraldColors[this.emeraldParticles.size],r=t.isSuper?new n.Tag(`<img src = "/Sonic/emerald-super-${e}-mini.png">`):new n.Tag(`<img src = "/Sonic/emerald-${e}-mini.png">`);r.index=this.emeraldParticles.size,r.style({"--x":t.args.x,"--y":t.args.y,"--z":t.args.z+1,width:t.isSuper?"14px":"8px",height:t.isSuper?"10px":"8px"}),t.viewport.particles.add(r),this.emeraldParticles.add(r),t.viewport.onFrameOut(60,()=>{t.viewport.particles.remove(r),this.emeraldParticles.delete(r)})}}},{key:"updateEnd",value:function(t){for(const e of this.emeraldParticles){const r=t.transformTime,n=2*Math.PI*e.index/this.emeraldParticles.size,i=r<30?Math.min(2*r,32)||3:45-r+15,o=Math.cos(n+.15*r)*i,a=-Math.sin(n+.15*r)*i,s=Math.cos(.075*r)*a;e.style({"--x":t.args.x+0+o,"--y":t.args.y+-.65*t.args.height+s,"z-index":t.args.z+-Math.sign(a)})}}}])&&a(e.prototype,r),o&&a(e,o),Object.defineProperty(e,"prototype",{writable:!1}),p}();t.EmeraldHalo=h}),require.register("behavior/Liftable.js",function(t,e,r){"use strict";function n(t){"@babel/helpers - typeof";return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(t,"__esModule",{value:!0}),t.Liftable=void 0;var i=e("./Behavior");function o(t,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,(o=i.key,void 0,"symbol"===n(a=function(t,e){if("object"!==n(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var i=r.call(t,e||"default");if("object"!==n(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(o,"string"))?a:String(a)),i)}var o,a}function a(t,e){return(a=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function s(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,i=c(t);if(e){var o=c(this).constructor;r=Reflect.construct(i,arguments,o)}else r=i.apply(this,arguments);return function(t,e){if(e&&("object"===n(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function c(t){return(c=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}const l=Symbol("rendered");let u=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&a(t,e)}(u,i.Behavior);var e,r,n,c=s(u);function u(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,u),c.apply(this,arguments)}return e=u,(r=[{key:"rendered",value:function(t){t[l]||(t[l]=!0,t.bindTo("carriedBy",e=>{if(t.cX&&(t.cX(),t.cX=null),t.cY&&(t.cY(),t.cY=null),t.carriedBy){const e=t.carriedBy;t.carriedBy=null,t.args.xSpeed=e.args.xSpeed,t.args.ySpeed=e.args.falling?e.args.ySpeed:0,t.args.xSpeed+=4*Math.sign(e.args.gSpeed||e.args.xSpeed),t.args.ySpeed-=4,e.carrying.delete(t),t.args.falling=!0,t.args.float=0}e&&(t.cX=e.args.bindTo("x",r=>t.args.x=r+e.args.direction*e.xHold),t.cY=e.args.bindTo("y",r=>t.args.y=r+-e.yHold),t.args.xSpeed=0,t.args.ySpeed=0,e.carrying.add(t),t.args.standingOn=null,t.args.float=-1)}))}},{key:"update",value:function(t){t.carriedBy&&(t.args.float=-1)}}])&&o(e.prototype,r),n&&o(e,n),Object.defineProperty(e,"prototype",{writable:!1}),u}();t.Liftable=u}),require.register("behavior/LookUp.js",function(t,e,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LookUp=void 0;e("curvature/base/Tag");var n=e("./Behavior");function i(t){"@babel/helpers - typeof";return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function o(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,u(n.key),n)}}function a(t,e){return(a=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function s(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=l(t);if(e){var o=l(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===i(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return c(t)}(this,r)}}function c(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function l(t){return(l=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function u(t){var e=function(t,e){if("object"!==i(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==i(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===i(e)?e:String(e)}let f=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&a(t,e)}(f,n.Behavior);var e,r,i,l=s(f);function f(){var t,e,r,n;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,f);for(var i=arguments.length,o=new Array(i),a=0;a<i;a++)o[a]=arguments[a];return t=l.call(this,...o),e=c(t),n=0,(r=u(r="lookTime"))in e?Object.defineProperty(e,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[r]=n,t}return e=f,(r=[{key:"update",value:function(t){0===t.args.mode&&(t.yAxis<-.55&&!t.args.gSpeed&&!t.args.falling&&!t.spindashCharge?(t.args.animation="looking-up",t.args.lookTime++,t.args.lookTime>45&&(t.args.cameraBias=.25)):this.lookTime=0)}}])&&o(e.prototype,r),i&&o(e,i),Object.defineProperty(e,"prototype",{writable:!1}),f}();t.LookUp=f}),require.register("behavior/Patrol.js",function(t,e,r){"use strict";function n(t){"@babel/helpers - typeof";return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(t,"__esModule",{value:!0}),t.Patrol=void 0;var i=e("./Behavior");function o(t,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,(o=i.key,void 0,"symbol"===n(a=function(t,e){if("object"!==n(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var i=r.call(t,e||"default");if("object"!==n(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(o,"string"))?a:String(a)),i)}var o,a}function a(t,e){return(a=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function s(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,i=c(t);if(e){var o=c(this).constructor;r=Reflect.construct(i,arguments,o)}else r=i.apply(this,arguments);return function(t,e){if(e&&("object"===n(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function c(t){return(c=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}let l=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&a(t,e)}(l,i.Behavior);var e,r,n,c=s(l);function l(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,l),c.apply(this,arguments)}return e=l,(r=[{key:"update",value:function(t){var e,r,n,i,o;e=t.args.direction;const a=null!==(r=t.args.patrolSpeed)&&void 0!==r?r:1,s=null!==(n=t.args.patrolOffset)&&void 0!==n?n:0,c=null!==(i=t.args.patrolBeat)&&void 0!==i?i:90,l=null!==(o=t.args.patrolPause)&&void 0!==o?o:25;t.age=t.age||0;const u=t.age+s;u%c<c-l?(Math.floor(u/c)%2?t.args.gSpeed=-a:t.args.gSpeed=a,t.args.direction=-Math.sign(t.args.gSpeed)||t.args.direction):t.args.direction=-Math.sign(t.gSpeedLast)||t.args.direction}}])&&o(e.prototype,r),n&&o(e,n),Object.defineProperty(e,"prototype",{writable:!1}),l}();t.Patrol=l}),require.register("behavior/Platformer.js",function(t,e,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Platformer=void 0;var n=e("curvature/base/Tag"),i=e("curvature/base/Bindable"),o=e("../actor/PointActor"),a=e("../viewport/Layer"),s=(e("../ui/CharacterString"),e("../powerups/StarSheild"));function c(t){"@babel/helpers - typeof";return(c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function l(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,u(n.key),n)}}function u(t){var e=function(t,e){if("object"!==c(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==c(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===c(e)?e:String(e)}let f=function(){function t(){var e,r,n;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),e=this,n=null,(r=u(r="collisionMap"))in e?Object.defineProperty(e,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[r]=n}var e,r,f;return e=t,(r=[{key:"updateStart",value:function(t){if(t.args.wasHanging=t.args.falling&&t.args.hangingFrom,this.stepsTaken=0,t.knocked&&(t.args.knocked=Math.sign(t.args.xSpeed||t.args.gSpeed)),!t.args.falling&&t.knocked&&(t.args.ySpeedLast<3&&t.pop&&t.pop(t.knocked),t.args.ySpeed=.7*-t.ySpeedLast,t.args.falling=!0,t.args.y--),t.args.falling||(t.modeLast=t.args.mode,t.args.grinding?t.args.wasGrinding=!0:t.args.wasGrinding=!1),t.args.sliding=!1,t.lastLayer=null,t.args.localCameraMode=null,!t.args.dead){if(t.args.standingLayer&&!t.args.static){const e=t.args.standingLayer.layer;let r=!1;for(const e of t.regions)e.grind&&(r=!0);t.controllable||t.canGrind?e&&e.meta.grinding?(t.args.grinding=!0,t.args.direction=Math.sign(t.args.xSpeed||t.args.gSpeed)):r||(t.args.grinding=!1):t.args.grinding=!1,t.args.grinding&&t.args.falling&&(t.args.grinding=!1)}t.args.falling||(t.fallTime=0)}}},{key:"updateEnd",value:function(t){if(t.args.falling?t.args.jumping&&(t.args.ySpeed>-3||t.args.ySpeed>=0&&t.ySpeedLast<0)&&(t.args.jumpArced=!0):t.args.jumpArced=!1,!t.args.static&&t.args.falling&&(t.args.standingLayer&&0===t.fallTime&&(t.args.xSpeed+=t.args.standingLayer.offsetXChanged||0,t.args.ySpeed+=t.args.standingLayer.offsetYChanged||0),t.args.standingLayer=null),t.controllable){if(t.args.popChain.length&&t.args.grinding&&(t.grindReward||(t.grindReward={label:"Rail Grind",points:100,multiplier:1,direction:Math.sign(t.args.gSpeed)},t.args.popChain.push(t.grindReward)),t.grindReward.points+=Math.round(t.args.gSpeed/10)*t.grindReward.direction||1),t.airReward&&t.args.falling&&(t.airReward.points+=Math.ceil(Math.abs(t.args.ySpeed)+Math.abs(t.args.xSpeed))),t.args.popChain||(t.grindReward=null,t.airReward=null),!t.args.falling&&!t.args.grinding&&t.groundTime>1&&(t.grindReward=null,t.airReward=null),t.follower){const e=t.viewport.serializePlayer(),r=t.follower;t.viewport.onFrameOut(5,()=>{e.input&&(r.controller&&r.controller.replay(e.input),r.readInput()),e.args&&(Object.assign(r.args,e.args),r.viewport&&r.viewport.setColCell(t))}),t.follower.args.dead&&(t.follower.args.dead=!1,t.follower.args.x=t.x,t.follower.args.y=t.y)}t.args.falling||t.args.rolling||t.args.hangingFrom||t.args.grinding||!(t.groundTime>1)||t.args.bouncing||t.punched||t.readyTime||!t.args.popChain.length||t.totalCombo()}}},{key:"update",value:function(t){if(t.args.mercy&&(t.args.spindashCharge=0,t.args.dropDashCharge=0),"number"==typeof t.args.standingOn){const e=t.args.standingOn,r=t.viewport.actorsById[e];r&&(t.args.standingOn=r,t.args.falling=!1,t.args.x=r.args.x,t.args.y=-1+r.args.y-r.args.height)}t.args.jumpBlocked=!1,t.xAxis&&Math.sign(t.args.gSpeed)===t.args.pushing&&Math.sign(t.xAxis)===t.args.pushing||(t.args.pushing=!1);t.args.x,t.args.y;if(t.noClip&&!t.controllable){let e;switch(t.args.xSpeed&&(t.args.x+=t.args.xSpeed),t.args.ySpeed&&(t.args.y+=t.args.ySpeed),!t.args.float&&t.args.falling&&(t.args.ySpeed+=t.args.gravity),null!==t.impulseMag&&this.applyImpulse(t),t.args.float>0&&t.args.float--,t.args.mode){case 2:e=viewport.actorsAtPoint(t.args.x,t.args.y+t.args.height,t.args.width,t.args.height);break;case 1:e=viewport.actorsAtPoint(t.args.x-t.args.height/2,t.args.y+t.args.width/2,t.args.height,t.args.width);break;case 3:e=viewport.actorsAtPoint(t.args.x+t.args.height/2,t.args.y+t.args.width/2,t.args.height,t.args.width);break;default:case 0:e=viewport.actorsAtPoint(t.args.x,t.args.y,t.args.width,t.args.height)}if(e)for(const r of e)r.args!==t.args&&r.callCollideHandler(t);return}if(!t.args.falling&&!t.args.rolling&&t.args.modeTime>=1&&(t.args.spinning=!1),(t.args.rolling||t.args.jumping||t.spindashCharge)&&(t.args.spinning=!0),t.viewport&&t.args.respawning&&!t.args.npc&&!t.viewport.args.isRecording&&!t.viewport.args.isReplaying){const e=t.viewport.getCheckpoint(t.args.canonical);let r,n;if(e&&e.checkpointId){const i=t.viewport,o=i.defsByMap.get(i.currentMap)[e.checkpointId];r=o.x,n=o.y}else if(t.def)r=t.def.get("x"),n=t.def.get("y");else if(!t.canRoll&&t.viewport.defsByName.get("wide-player-start")){const e=t.viewport.defsByName.get("wide-player-start");r=e.x,n=e.y}else if(t.viewport.defsByName.has("player-start")){const e=t.viewport.defsByName.get("player-start");r=e.x,n=e.y}t.args.animation="dropping",t.args.standingLayer=null,t.args.standingOn=null,t.lastLayer=null;const i=t.args.x-r,o=t.args.y-n,a=Math.max(Math.abs(i/8),16),s=Math.max(Math.abs(o/8),16);t.args.x-=Math.sign(i)*a,t.args.y-=Math.sign(o)*s;const c=t.viewport;return Math.abs(i)<=a&&(t.args.x=r),Math.abs(o)<=s&&(t.args.y=n),Math.abs(i)<=a&&Math.abs(o)<=s&&t.viewport.onFrameOut(60,()=>{t.viewport.args.networked?(t.args.dead=!1,t.noClip=!1,t.args.respawning=!1,t.args.display="initial",t.args.ignore=4,t.args.xSpeed=0,t.args.ySpeed=-3):(c.reset(),c.startLevel(!1)),c.args.paused=!1}),void(t.viewport&&t.viewport.setColCell(t))}if(t.viewport&&t.viewport.meta.deathLine&&!t.args.dead&&t.controllable&&t.y>t.viewport.meta.deathLine)return void t.die();if(t.controllable&&!t.args.dead){t.args.width,Math.sign(t.args.xSpeed);const e=Math.max(t.args.height,0),r=t.rotatePoint(0,.75*e);let n=t.getMapSolidAt(t.args.x+r[0],t.args.y+r[1]);if(Array.isArray(n)&&(n=!!n.filter(t=>!t.args.platform&&!t.isVehicle).length),t.args.rolling){const r=t.rotatePoint(0,e);let n=t.getMapSolidAt(t.args.x+r[0],t.args.y+r[1]);Array.isArray(n)&&(n=!!n.filter(t=>!t.args.platform&&!t.isVehicle).length,t.args.jumpBlocked=!!n),t.args.jumpBlocked=!!n}if(!t.args.hangingFrom&&!t.noClip&&!t.args.falling&&this.checkBelow(t,t.args.x,t.args.y)&&n)return void t.die();if(!t.args.falling&&0===t.args.mode){const e=t.castRay(t.maxStep,t.upAngle,this.findUpSpace);e&&(t.args.y-=e)}}if(t.args.skimming=!1,t.args.falling){if(t.args.airAngle=t.airAngle,t.args.displayAngle!==t.args.groundAngle){const e=t.args.groundAngle+-t.args.displayAngle;t.args.displayAngle+=Math.sign(e)*(Math.abs(e)>1?1:Math.abs(e))*.5}}else t.args.airAngle=0,t.args.displayAngle=t.args.groundAngle;if(t.args.halted<1&&t.args.halted>0&&(t.args.halted=0),t.args.halted>0)return void t.args.halted--;if(t.args.currentSheild&&"update"in t.args.currentSheild&&t.args.currentSheild.update(t),t.args.rolling?t.args.height=t.args.rollingHeight||t.args.height:t.args.jumping?t.args.height=t.args.rollingHeight||t.args.height:t.canRoll&&(t.args.height=t.args.normalHeight||t.args.height),t.args.dontJump>0&&t.args.dontJump--,t.args.dontJump<0&&(t.args.dontJump=0),!t.viewport||t.removed)return;if(t.args.modeTime++,!t.args.falling)if(Math.abs(t.args.gSpeed)<1&&!t.impulseMag&&t.args.modeTime>3&&(t.args.rolling=!1),Math.abs(t.args.gSpeed)<.01?t.args.gSpeed=0:t.canRoll&&t.yAxis>.55&&!t.args.ignore&&!t.carrying.size&&(t.args.rolling=!0),0!==t.args.mode||t.args.groundAngle)t.args.teeter=0;else{const e=t.getMapSolidAt(t.args.x+0*t.args.direction,t.args.y+2),r=t.getMapSolidAt(t.args.x+4*t.args.direction,t.args.y+2),n=t.getMapSolidAt(t.args.x+4*t.args.direction,t.args.y-2),i=t.getMapSolidAt(t.args.x+2*t.args.direction,t.args.y+2),o=t.getMapSolidAt(t.args.x-4*t.args.direction,t.args.y+2),a=t.getMapSolidAt(t.args.x-4*t.args.direction,t.args.y-2);!e||r||n?t.args.teeter=!e||o||a?0:-1:(t.args.teeter=1,i||(t.args.teeter=2))}if(t.args.driving=!1,t.args.standingOn&&t.args.standingOn.isVehicle&&!t.isVehicle){const e=t.args.standingOn;if(t.args.groundTimeTotal++,t.args.falling=!0,t.args.flying=!1,t.args.jumping=!1,t.args.driving=!0,t.processInput(),t.args.cameraMode=e.args.cameraMode,!t.args.standingOn.args.lockedIn&&t.willJump&&(t.yAxis<0||t.args.standingOn&&t.args.standingOn.quickDrop)){const r=t.args.standingOn;t.args.standingLayer=!1,t.args.standingOn=!1,t.willJump=!1,r.occupant=null,t.args.falling=!0,t.args.jumping=!0,t.args.y-=16,r&&r.quickDrop?t.args.ySpeed=-t.args.jumpForce+Math.max(r.args.ySpeed,0):(t.args.xSpeed=2*e.args.direction*-Math.sign(e.args.seatAngle||-1),t.args.ySpeed=-t.args.jumpForce),e.args.ySpeed=0}return t.args.groundAngle=(e.args.groundAngle||0)+(e.args.seatAngle||0),void(t.willJump&&t.yAxis>=0&&(t.args.standingOn.falling=!1,t.willJump=!1,t.args.standingOn.command_0()))}null!==t.impulseMag&&this.applyImpulse(t),-2===t.args.ignore&&(!1===t.args.falling||t.args.ySpeed>0)&&(t.args.ignore=0),-3===t.args.ignore&&(!t.args.falling||t.args.ySpeed>=-10)&&t.viewport.onFrameOut(1,()=>t.args.ignore=0),-4!==t.args.ignore||t.args.falling||(t.args.ignore=30),t.args.ignore<1&&t.args.ignore>0&&(t.args.ignore=0),t.args.ignore>0&&t.args.ignore--,t.args.cameraIgnore>0&&t.args.cameraIgnore--,t.args.mercy>0&&t.args.mercy--,t.args.startled>0&&t.args.startled--,t.args.antiSkid>0&&t.args.antiSkid--,t.args.float>0&&t.args.float--,t.args.standingOn instanceof o.PointActor&&t.args.standingOn.callCollideHandler(t),!t.args.float&&t.args.falling?t.args.standingOn&&t.args.standingOn.isVehicle||(t.args.standingOn=null,t.args.landed=!1,t.lastAngles.splice(0,t.lastAngles.length,...Array(t.angleAvg).fill(0)),t.args.jumping&&t.args.jumpedAt<t.args.y?t.args.deepJump=!0:t.args.jumping&&t.args.jumpedAt>t.args.y+160?t.args.highJump=!0:t.args.jumping&&(t.args.deepJump=!1,t.args.highJump=!1)):t.args.jumping&&!t.args.falling&&(t.args.jumping=!1,t.args.deepJump=!1,t.args.highJump=!1,t.args.jumpedAt=null),!t.args.falling&&t.args.standingOn&&t.args.rolling&&t.args.modeTime<3&&!t.args.dropDashCharge&&t.args.standingOn.args.convey&&(t.args.gSpeed=.8*-t.args.standingOn.args.convey);const e=t.getLocalDrag();t.args.gSpeedMax;let r=new Set;if(!t.isRegion){if(!t.noClip){r=t.viewport.regionsAtPoint(t.args.x,t.args.y);for(const e of t.regions)e.updateActor(t)}for(const n of r){if(t.args.density&&n.args.density&&t.args.density<n.args.density){n.args.density,t.args.density;let i=!1,o=t.getMapSolidAt(t.x,t.y-t.args.height);if(Array.isArray(o)&&(o.filter(t=>![...r].includes(t)),o.length&&(i=!0)),!i){const r=t.y-t.args.height,i=n.y-n.args.height,o=Math.min((r+-i+4)/t.args.height,1);t.args.float=1;const a=o*e;t.args.falling=!0,o>-1?(t.args.ySpeed-=a,t.args.ySpeed*=e):o<-1&&t.args.ySpeed<0&&Math.abs(o)<.25&&Math.abs(t.args.ySpeed)<1&&(t.args.ySpeed=0,t.args.y=-1+i+t.args.height)}}t.regions.has(n)||(t.regions.add(n),t.crossRegionBoundary(n,!0),n.enter(t))}for(const e of t.regions)r.has(e)||(t.regions.delete(e),t.crossRegionBoundary(e,!1),e.leave(t))}if(t.willJump&&!t.args.dontJump&&(!t.args.falling||t.falltime<2)){t.willJump=!1;t.viewport.tileMap;const r=Math.max(t.args.height,32),n=t.rotatePoint(0,r+1);let i=t.getMapSolidAt(t.args.x+n[0],t.args.y+n[1]);if(Array.isArray(i)&&(i=!!i.filter(t=>!t.args.platform&&!t.isVehicle).length),!i){let r=t.args.jumpForce*e;t.running?r*=1.5:t.crawling&&(r*=.5),this.doJump(t,r)}return}if(t.willJump=!1,!t.viewport)return;if(t.noClip&&(t.args.falling=!0),!t.args.static){const e=t.groundPoint,r=t.controllable||t.args.pushed||t.isVehicle?t.viewport.regionsAtPoint(e[0],e[1]+1):[],n=t.getMapSolidAt(...e)||!(!t.controllable||!t.args.groundAngle)&&t.getMapSolidAt(e[0],e[1]+1);if(t.args.dead||t.isRegion||0!==t.args.mode||!r.size)t.noClip||t.args.climbing||t.args.xSpeed||t.args.ySpeed||t.args.float||(t.args.falling=!t.args.float&&!this.checkBelow(t)||t.args.falling);else{let e=!n;if(!t.args.falling||t.broad)for(const n of r)if(t.broad||!Math.round(t.args.ySpeed)&&(Math.round(t.args.y)===n.args.y-n.args.height||Math.round(t.args.y+1)===n.args.y-n.args.height||Math.round(t.args.y+2)===n.args.y-n.args.height)){if(n.skimSpeed<1/0&&(t.broad||Math.max(Math.abs(t.args.gSpeed),Math.abs(t.args.xSpeed))>=n.skimSpeed)){const r=t.args.falling?Math.abs(t.args.xSpeed):Math.abs(t.args.gSpeed);t.args.gSpeed=r*Math.sign(t.args.gSpeed||t.args.xSpeed),t.args.y-32<n.args.y-n.args.height?(t.broad&&(t.args.falling=!1),t.args.skimming=!0,t.args.y=n.y-n.args.height-1,e=!1,n.skim(t)):t.broad&&t.args.ySpeed--;break}t.args.xSpeed=t.args.gSpeed||t.args.xSpeed}n instanceof a.Layer?t.args.standingOn=n:t.args.falling=t.args.falling||e,t.args.falling?t.args.standingLayer=null:t.args.gSpeed=t.args.gSpeed||t.args.xSpeed}if(t.args.static||t.noClip||!t.args.falling||(t.args.mode=0,t.args.gSpeed=0),!t.willStick&&(t.args.falling&&t.args.ySpeed>=0||t.args.standingOn)&&!t.args.static&&!t.noClip){let e=64;const r=.5*t.args.width;for(;t.getMapSolidAt(t.args.x-r,t.args.y-.5*t.args.height)&&!t.getMapSolidAt(t.args.x+r+1,t.args.y-.5*t.args.height)&&e>0;)t.args.x+=1,e--;for(;t.getMapSolidAt(t.args.x+r+-1,t.args.y-.5*t.args.height)&&!t.getMapSolidAt(t.args.x-r,t.args.y-.5*t.args.height)&&e>0;)t.args.x-=1,e--}if(!t.viewport)return;if(t.noClip||!t.isRegion&&!t.isEffect&&t.args.falling&&t.viewport){if(t.args.grinding&&(t.args.grinding=!1),t.args.pushing=!1,(t.args.xSpeed||t.args.ySpeed)&&(t.args.hangingFrom?(t.args.groundTimeTotal++,t.args.flying=!1):(this.updateAirPosition(t),t.swing=!1,t.args.airTimeTotal++)),t.args.animationBias=Math.abs(t.args.airSpeed/t.args.flySpeedMax),t.args.animationBias>1&&(t.args.animationBias=1),!t.args.canHide&&!t.noClip){let e,r=32;for(;!t.args.static&&0===t.args.mode&&!t.getMapSolidAt(t.args.x,t.args.y-t.args.height,t.args.layer,0)&&(e=t.getMapSolidAt(t.args.x,t.args.y-1,t.args.layer,0))&&(!e.find||e.find(e=>{const r=t.viewport.collisions.get(t);return r&&r.has(e)}));){if(--r<=0)return;t.args.y--}}}else if(!t.args.static&&(!t.noClip||t.args.standingLayer||!t.isRegion&&!t.isEffect&&!t.args.falling)){if(Math.abs(t.args.xSpeed)>Math.abs(t.args.gSpeed)&&(0===t.args.mode?t.args.gSpeed=t.args.xSpeed:2===t.args.mode&&(t.args.gSpeed=-t.args.xSpeed),t.args.standingLayer&&(t.args.gSpeed-=t.args.standingLayer.layer.offsetXChanged)),t.args.xSpeed=0,t.args.ySpeed=0,t.xLast=t.args.x,t.yLast=t.args.y,t.args.grinding&&!t.args.gSpeed&&t.args.modeTime>4&&(t.args.gSpeed=Math.sign(t.args.direction||t.axis||t.xSpeedLast||t.gSpeedLast||0)),!t.args.canHide&&!t.noClip){let e,r=32;for(;!t.args.static&&0===t.args.mode&&(e=t.getMapSolidAt(t.args.x,t.args.y-1))&&(!e.find||e.find(e=>{const r=t.viewport.collisions.get(t);return r&&r.has(e)}));){if(--r<=0)return;t.args.y--}}this.updateGroundPosition(t),t.args.groundTimeTotal++,t.args.animationBias=Math.abs((.75*t.args.hSpeed||t.args.gSpeed)/t.args.gSpeedMax),t.args.animationBias>1&&(t.args.animationBias=1)}if(t.args.rolling&&t.args.pushing&&(t.args.gSpeed=0),!t.viewport)return}const n=Math.ceil(t.args.width/2),i=Math.floor(t.args.height/2);if(!t.noClip&&!t.isRegion&&t.args.pushed){let e;const r=r=>{switch(t.args.mode){case 0:e=t.getMapSolidAt(t.x+n*r+(-1===r?0:-1),t.y-i);break;case 2:e=t.getMapSolidAt(t.x+n*r+(-1===r?0:-1),t.y+i);break;case 1:e=t.getMapSolidAt(t.x+i*(-1===r?0:2),t.y);break;case 3:e=t.getMapSolidAt(t.x-i*(-1===r?0:2),t.y)}return e&&Array.isArray(e)?e.filter(t=>!t.args.platform&&!t.isVehicle):e},o=r(-1),a=r(1);a&&!o&&(t.args.xSpeed>0&&(t.args.xSpeed=0),t.args.x--),o&&!a&&(t.args.xSpeed>0&&(t.args.xSpeed=0),t.args.x++)}if(!t.viewport||t.removed)return;t.viewport.objectPalette["layer-switch"];const s=[t.viewport.objectPalette["base-region"]];if(!(t.isGhost||t.isStatic||t.isRegion||s.some(e=>t instanceof e))){let e;switch(t.args.mode){case 2:e=viewport.actorsAtPoint(t.args.x,t.args.y+t.args.height,t.args.width,t.args.height);break;case 1:e=viewport.actorsAtPoint(t.args.x+t.args.height/2,t.args.y+t.args.width/2,t.args.height,t.args.width);break;case 3:e=viewport.actorsAtPoint(t.args.x-t.args.height/2,t.args.y+t.args.width/2,t.args.height,t.args.width);break;default:case 0:e=viewport.actorsAtPoint(t.args.x,t.args.y,t.args.width,t.args.height)}e.forEach(e=>e.args!==t.args&&!(t.args.static&&e.args.static)&&!e.isPushable&&e.callCollideHandler(t))}if(!t.viewport)return;t.viewport.tileMap;if((t.args.pushing||Math.abs(t.args.gSpeed)<2)&&!t.args.falling){let e=t.stayStuck;if(t.regions.forEach(t=>{e=e||t.args.sticky}),!e&&!t.args.climbing){Math.floor(t.args.width/2);const e=t.args.mode;if(0===t.args.mode&&t.args.groundAngle<=-Math.PI/4)t.args.gSpeed=1;else if(0===t.args.mode&&t.args.groundAngle>=Math.PI/4&&t.args.groundAngle<Math.PI)t.args.gSpeed=-1;else if(1===e&&t.args.groundAngle<.05*Math.PI)t.lastAngles.splice(0,t.lastAngles.length,...Array(t.angleAvg).fill(0)),t.args.mode=0,t.args.falling=!0,t.args.rolling?(t.args.x+=t.args.width,t.args.y+=t.args.height,t.args.ySpeed=t.args.gSpeed,t.args.float=1):(t.args.groundAngle=-Math.PI/2,t.args.x++),t.args.cameraIgnore=30,t.args.ignore=-4;else if(3===e&&t.args.groundAngle>.05*-Math.PI)t.lastAngles.splice(0,t.lastAngles.length,...Array(t.angleAvg).fill(0)),t.args.mode=0,t.args.falling=!0,t.args.rolling?(t.args.x-=t.args.width,t.args.y+=t.args.height,t.args.ySpeed=-t.args.gSpeed,t.args.float=1):(t.args.groundAngle=Math.PI/2,t.args.x--),t.args.cameraIgnore=30,t.args.ignore=-4;else if(2===e){t.lastAngles.splice(0,t.lastAngles.length,...Array(t.angleAvg).fill(0)),t.args.xSpeed=0,t.args.y++,t.args.falling=!0,t.willJump=!1;const e=t.args.gSpeed;t.args.groundAngle=Math.PI,t.args.mode=0,t.viewport.onFrameOut(1,()=>{t.args.mode=0,t.willJump=!1,t.args.xSpeed=-e}),t.args.rolling||(-1===Math.sign(t.xSpeedLast)?(t.args.direction=-1,t.args.facing="left"):1===Math.sign(t.xSpeedLast)&&(t.args.direction=1,t.args.facing="right")),t.args.cameraIgnore=30,t.args.ignore=-2}}}if(t.args.landed=!0,t.controllable&&(t.args.x=t.args.x,t.args.y=t.args.y),t.controllable&&t.processInput(),t.args.falling||t.args.gSpeed?t.args.stopped=0:t.args.stopped++,t.args.falling?t.lastAngles.splice(0,t.lastAngles.length,...Array(t.angleAvg).fill(0)):t.lastAngles.length>0&&(t.args.groundAngle=t.lastAngles.map(t=>Number(t)).reduce((t,e)=>t+e)/t.lastAngles.length),isNaN(t.args.groundAngle)&&console.log(t.lastAngles,t.lastAngles.length),!t.args.float&&!t.args.static&&!t.noClip){const e=t.getMapSolidAt(...t.groundPoint);if(Array.isArray(e)&&e.length&&!t.args.float){t.args.standingLayer=!1;const r=e.filter(e=>e.args!==t.args&&e.solid&&e.callCollideHandler(t));if(r.length)for(const e of r)!e.isVehicle&&t.args.y>1+e.args.y+-e.args.height||(t.args.groundAngle=e.groundAngle||0,t.args.standingOn=e)}else e?(t.args.standingOn=null,"object"===c(e)?(Array.isArray(e)||(t.args.standingLayer=e),t.args.modeTime<1&&e.xLayerSpeed):t.args.standingLayer=null):t.args.standingOn&&!t.args.standingOn.isVehicle&&(t.args.standingOn=null)}if(t.args.static||t.isRegion||t.noClip||t.args.xSpeed||t.args.ySpeed||!this.checkBelow(t,t.args.x,t.args.y)||(t.args.falling=!1),t.args.falling&&t.args.ySpeed<t.args.ySpeedMax){if(!t.args.float){let e=1;for(const r of t.regions)(r.args.gravity||1===r.args.gravity)&&(e*=r.args.gravity);t.args.ySpeed+=t.args.gravity*e}t.args.landed=!1}t.args.falling||(this.checkDropDash(t),t.args.jumping=!1),t.twister&&(t.viewport&&t.viewport.args.frameId%t.viewport.settings.frameSkip==0&&(t.twister.args.x=t.args.x,t.twister.args.y=t.args.y),t.args.mode?t.twister.args.xOff=t.args.xOff:t.twister.args.xOff=t.args.xOff+-8*t.args.direction,t.twister.args.yOff=t.args.yOff+16,t.twister.args.width=t.args.width,t.twister.args.height=t.args.height),t.pincherBg&&(t.viewport&&t.viewport.args.frameId%t.viewport.settings.frameSkip==0&&(t.pincherBg.args.x=t.args.x,t.pincherBg.args.y=t.args.y),t.pincherBg.args.xOff=t.args.xOff,t.pincherBg.args.yOff=t.args.yOff,t.pincherBg.args.width=t.args.width,t.pincherBg.args.height=t.args.height),t.pincherFg&&(t.viewport&&t.viewport.args.frameId%t.viewport.settings.frameSkip==0&&(t.pincherFg.args.x=t.args.x,t.pincherFg.args.y=t.args.y),t.pincherFg.args.xOff=t.args.xOff,t.pincherFg.args.yOff=t.args.yOff,t.pincherFg.args.width=t.args.width,t.pincherFg.args.height=t.args.height),t.args.falling?(t.groundTime=0,t.idleTime=0,t.args.rolling=!1,t.fallTime++):(t.groundTime++,t.idleTime++,(t.yAxis||t.xAxis)&&(t.idleTime=0)),t.args.carrying=!!t.carrying.size,t.args.carrying&&(Math.abs(t.args.gSpeed)>8&&(t.args.gSpeed=8*Math.sign(t.args.gSpeed)),t.idleTime=0,t.args.rolling=!1)}},{key:"applyImpulse",value:function(t){if(!t.args.dead){if(t.args.xSpeed+=Number(Number(Math.cos(t.impulseDir)*t.impulseMag).toFixed(3)),t.args.ySpeed+=Number(Number(Math.sin(t.impulseDir)*t.impulseMag).toFixed(3)),t.impulseFal)t.args.falling=t.impulseFal||t.args.falling;else switch(t.args.mode){case 0:t.args.gSpeed=Math.cos(t.impulseDir)*t.impulseMag;break;case 2:t.args.gSpeed=-Math.cos(t.impulseDir)*t.impulseMag;break;case 1:t.args.gSpeed=-Math.sin(t.impulseDir)*t.impulseMag;break;case 3:t.args.gSpeed=Math.sin(t.impulseDir)*t.impulseMag}t.impulseMag=null,t.impulseDir=null,t.impulseFal=null}}},{key:"updateGroundPosition",value:function(t){t.args.mercy&&Math.abs(t.args.gSpeed)>10&&(t.args.gSpeed=10*Math.sign(t.args.gSpeed));const e=t.getLocalDrag();let r=t.args.gSpeedMax;t.running?r=RUNNING_SPEED:t.crawling&&(r=CRAWLING_SPEED);let n=[0,0];const o=Math.ceil(t.args.width/2),a=t.paused;if(t.args.gSpeed||t.args.rolling||t.canRoll&&t.args.crouching){const r=Math.sign(t.args.gSpeed||t.args.direction),s=Math.abs(t.args.gSpeed),c=1;t.pause(!0);Math.PI;const l=e=>e.args!==t.args&&e.callCollideHandler(t)&&e.solid;for(let e=0;e<s;e+=c){if(t.args.height>8&&t.args.modeTime>1){t.args.gSpeed||(t.args.pushing=!1);const e=t.rotatePoint(o*-r,t.args.height);let n=t.getMapSolidAt(t.args.x+e[0],t.args.y+e[1]);if(Array.isArray(n)&&(n=n.filter(l).length),n){2===t.args.mode&&(t.args.x+=o*Math.sign(t.args.gSpeed),t.args.y+=t.args.height,t.args.mode=0),t.args.pushing=Math.sign(t.args.gSpeed);break}t.args.pushing=!1;let i=!1;if(!t.noClip&&t.controllable&&0===t.args.groundAngle){const e=t.rotatePoint(-o*Math.sign(t.args.gSpeed),.5*t.args.height);if(i=t.getMapSolidAt(t.args.x+e[0],t.args.y+e[1]),Array.isArray(i)&&(i=i.filter(l).length||!1),!1!==i&&i<=o){2===t.args.mode?(t.args.x+=o*Math.sign(t.args.gSpeed),t.args.y+=t.args.rollingeight||t.args.height,t.args.mode=0,t.args.gSpeed=0):0===t.args.mode&&(t.args.gSpeed=Math.min(1,i)*Math.sign(t.args.gSpeed)),t.args.gSpeed&&(t.args.pushing=Math.sign(t.args.gSpeed));break}}}for(const e of t.behaviors)e.movedGround&&e.movedGround(t);if(t.args.falling||t.locked)return;if(!(n=this.findNextStep(t,c*r)))break;if(n[3]){t.args.moving=!1,t.args.gSpeed=.15*Math.sign(t.args.gSpeed);break}if(!0===n[2]){const e=t.args.gSpeed||0,r=t.args.groundAngle||0;let n,i;switch(t.args.standingLayer=null,t.args.mode){case 0:n=t.args.width/2;const o=Math.max(1,Math.abs(e)-Math.abs(this.stepsTaken))||1,a=o*Math.sign(e||0);t.args.x+=a*Math.cos(r),t.args.y+=-a*Math.sin(r),t.args.xSpeed=e*Math.cos(r),t.args.ySpeed=-e*Math.sin(r),t.args.float=t.args.float<0?t.args.float:1;let s=!!t.args.gSpeed;this.checkBelow(t,t.args.x,t.args.y)&&(t.args.gSpeed=e,t.args.xSpeed=0,t.args.ySpeed=0,s=!1,t.canRoll&&t.yAxis>.55&&(t.args.rolling=!0)),t.args.falling=s,t.args.ignore=2;break;case 2:t.args.y+=t.args.height,t.args.y++,t.args.float=t.args.float<0?t.args.float:1,t.args.falling=!0,t.args.mode=0,t.args.xSpeed=-e*Math.cos(r),t.args.ySpeed=e*Math.sin(r),t.args.x+=-e*Math.cos(r),t.args.y+=e*Math.sin(r),t.lastAngles.splice(0,t.lastAngles.length,...Array(t.angleAvg).fill(0)),t.args.direction*=-1,t.args.rolling||t.args.grinding||(t.args.facing="left"===t.args.facing?"right":"left"),t.args.ignore=3;break;case 1:n=t.args.width/2,i=t.args.height/2,t.args.climbing||(Math.abs(t.args.gSpeed)<2&&!t.args.rolling?t.args.gSpeed<0||(t.args.x+=n):(t.args.ignore=-3,t.args.x+=t.controllable?n:1),t.args.xSpeed=e*Math.sin(r),t.args.ySpeed=e*Math.cos(r),t.args.x+=e*Math.sin(r),t.args.y+=e*Math.cos(r),t.isVehicle||!t.args.rolling&&!t.args.grinding?t.args.groundAngle=.5*-Math.PI:t.args.x+=n,t.args.mode=0,t.args.cameraIgnore=30),t.args.falling=!0;break;case 3:n=t.args.width/2,i=t.args.height/2,t.args.climbing||(Math.abs(t.args.gSpeed)<3&&!t.args.rolling?t.args.gSpeed>0||(t.args.x-=n):(t.args.ignore=-3,t.args.x-=t.controllable?n:1),t.args.xSpeed=-e*Math.sin(r),t.args.ySpeed=-e*Math.cos(r),t.args.x+=-e*Math.sin(r),t.args.y+=-e*Math.cos(r),t.isVehicle||!t.args.rolling&&!t.args.grinding?t.args.groundAngle=.5*Math.PI:t.args.x-=n,t.args.mode=0,t.args.cameraIgnore=30),t.args.falling=!0}break}if(n[0]||n[1]){if((n[0]||n[1])&&!t.rotateLock&&(t.args.moving=!0,!t.keepAngle)){let e=n[0]?Math.atan(n[1]/n[0]):Math.sign(n[1])*Math.PI/2;if(Math.abs(t.args.angle-e)>=.38*Math.PI){const r=6,i=this.findNextStep(t,-r),o=this.findNextStep(t,r);i[1]!==n[1]&&o[1]!==n[1]||(e=0)}t.args.angle=e,t.lastAngles.unshift(t.args.angle),t.lastAngles.splice(t.angleAvg)}}else switch(t.args.moving=!1,t.args.mode){case 0:case 2:t.args.gSpeed=0}if(t.rotateLock)t.args.x+=n[0],t.args.y-=n[1];else{switch(t.args.mode){case 0:t.args.x+=n[0],t.args.y-=n[1];break;case 2:t.args.x-=n[0],t.args.y+=n[1];break;case 1:t.args.x+=n[1],t.args.y+=n[0];break;case 3:t.args.x-=n[1],t.args.y-=n[0]}if(t.args.angle>Math.PI/4&&t.args.angle<Math.PI/2){const e=t.lastAngles.map(t=>Number(t)-Math.PI/2);switch(Object.defineProperty(e,i.Bindable.NoGetters,{value:!0}),t.lastAngles=e,t.args.mode){case 0:t.args.mode=3;break;case 3:t.args.mode=2;break;case 2:t.args.mode=1;break;case 1:t.args.mode=0}t.args.groundAngle-=Math.PI/2}else if(t.args.angle<-Math.PI/4&&t.args.angle>-Math.PI/2){t.args.mode;const e=t.lastAngles.map(t=>Number(t)+Math.PI/2);switch(Object.defineProperty(e,i.Bindable.NoGetters,{value:!0}),t.lastAngles=e,t.args.mode){case 0:t.args.mode=1;break;case 3:t.args.mode=0;break;case 2:t.args.mode=3;break;case 1:t.args.mode=2}t.args.groundAngle=Number(t.args.groundAngle)+Math.PI/2}}}t.args.pushing&&(t.args.gSpeed=Math.sign(t.args.gSpeed));const u=Math.round(t.args.height/2);let f=16;if(!t.args.static&&0===t.args.mode){for(;(t.args.gSpeed<=0||t.args.modeTime<3)&&t.getMapSolidAt(t.args.x-o,t.args.y-u,!1)&&f>0;)t.args.x++,f--;for(;(t.args.gSpeed>=0||t.args.modeTime<3)&&t.getMapSolidAt(t.args.x+o,t.args.y-u,!1)&&f>0;)t.args.x--,f--}a||t.pause(!1);const p=t.xAxis&&Math.sign(t.xAxis)===Math.sign(t.args.gSpeed),h=t.getLocalFriction();if(0===t.args.mode||2===t.args.mode||t.args.gSpeed<0&&1===t.args.mode||t.args.gSpeed>0&&3===t.args.mode){const n=t.xAxis&&Math.sign(t.xAxis)!==Math.sign(t.args.gSpeed),i=h*t.args.decel*(t.args.rolling&&n?3:.75);if(!t.args.climbing&&t.args.gSpeed&&(!p||t.args.rolling)){if(t.args.sliding);else if(t.args.grinding)Math.abs(t.yAxis)>.5||(t.args.gSpeed-=1*i/e*.125*Math.sign(t.args.gSpeed)),Math.abs(t.args.gSpeed)>40&&(t.args.gSpeed=40*r);else if(t.args.rolling)t.args.gSpeed-=1*i/e*.06125*Math.sign(t.args.gSpeed);else if(!t.args.grinding&&!t.args.rolling&&(!t.xAxis||n&&Math.abs(t.args.gSpeed)>6)){const r=1*i/e*Math.sign(t.args.gSpeed);Math.abs(t.args.gSpeed)>Math.abs(r)?t.args.gSpeed-=r:t.args.gSpeed=0}(Math.abs(t.args.gSpeed)<.1||n&&Math.abs(t.args.gSpeed)<1)&&(t.args.gSpeed=0)}}let g=0;if(!t.args.climbing){switch(t.args.mode){case 0:g=t.args.groundAngle/(Math.PI/2),r>0&&(g*=-1);break;case 2:g=-t.args.groundAngle/(Math.PI/2),r>0&&(g*=-1);break;case 3:r>0?(g=-1,g-=t.args.groundAngle/(Math.PI/2)):(g=1,g+=t.args.groundAngle/(Math.PI/2));break;case 1:r>0?(g=1,g-=t.args.groundAngle/(Math.PI/2)):(g=-1,g+=t.args.groundAngle/(Math.PI/2))}if(t.args.grinding){const e=Math.abs(t.args.gSpeed),r=Math.sign(t.args.gSpeed);t.args.direction=r,e<6?t.args.gSpeed=6*r:e>40?t.args.gSpeed=40*r:g<0?t.args.gSpeed*=1-(0-g/2*.015):g>0?t.args.gSpeed*=1.0015*(1+g/2*.045):t.args.gSpeed+=.1*r}else if(t.args.rolling||t.canRoll&&t.args.crouching){if(g>0&&t.args.modeTime>3){(t.args.gSpeed||Math.abs(g)>.25)&&(t.args.gSpeed+=.6*g*r),Math.abs(t.args.gSpeed)<1&&(t.args.gSpeed=(1+Math.pow(g,2))*Math.sign(t.args.gSpeed));const e=t.controllable||t.args.pushed||t.isVehicle?t.viewport.regionsAtPoint(t.args.x,t.args.y):[];for(const r of e)!r.args.maxSpeed||r.args.maxSpeed<0||r.args.maxSpeed<Math.abs(t.args.gSpeed)&&(t.args.gSpeed=r.args.maxSpeed*Math.sign(t.args.gSpeed));Math.abs(g)>.25&&Math.abs(t.args.gSpeed)<2&&Math.abs(Math.sign(t.args.gSpeed)-Math.sign(r))<2&&(t.args.gSpeed=2*r)}else if(g<-.3||g<0&&t.args.gSpeed)if(Math.abs(t.args.gSpeed)<10){const e=g*r;(t.args.gSpeed||g<-.075)&&(Math.sign(e)===Math.sign(t.args.gSpeed)?t.args.gSpeed+=1.65*g*r:t.args.gSpeed+=.25*g*r)}else t.args.gSpeed+=.65*g*r}else if(!t.stayStuck){if(g>.25)Math.abs(t.args.gSpeed)<2*t.args.gSpeedMax&&(t.args.gSpeed+=.125*g*r,Math.abs(t.args.gSpeed)<2&&Math.abs(Math.sign(t.args.gSpeed)-Math.sign(r))<2&&(t.args.gSpeed=2*r));else if(g<-.075){const e=Math.sign(t.args.gSpeed);Math.abs(t.args.gSpeed)<10&&(t.args.gSpeed+=.3*g*r),Math.sign(t.args.gSpeed)!==e&&(t.args.ignore=t.args.ignore||5,t.args.antiSkid=10,t.args.gSpeed+=.5*Math.sign(t.args.gSpeed))}else g>0&&h<.75&&(Math.abs(t.args.gSpeed)<1&&(t.args.gSpeed=r),t.args.gSpeed+=r*g);Math.abs(t.args.gSpeed)}}}(!n||!1===n[0]&&!1===n[1])&&(t.args.ignore=t.args.ignore||1,t.args.falling),t.args.heading=Math.sign(t.args.gSpeed)}},{key:"updateAirPosition",value:function(t){const e=t.args.xSpeed,r=t.args.ySpeed,n=t.airAngle;t.args.standingLayer=null;t.viewport;const i=Math.ceil(t.args.width/2),a=Math.sign(t.args.xSpeed),s=t.viewport.tileMap,l=Math.hypot(t.args.xSpeed,t.args.ySpeed);if(t.args.airSpeed=l,!l)return;if(t.fallTime>8&&(t.controllable||t.isVehicle)){let e=20;t.springing&&(e=125),t.args.groundAngle+=.001*-Math.sign(t.args.groundAngle)*e}if(Math.abs(t.args.groundAngle)<.08&&(t.args.groundAngle=0),t.noClip)return void(t.args.falling&&(t.xLast=t.args.x,t.yLast=t.args.y,t.args.x+=t.args.xSpeed,t.args.y+=t.args.ySpeed));t.args.jumping&&t.args.ySpeed<0&&t.args.ySpeed>-4&&(t.args.xSpeed-=t.args.xSpeed*(.078125*t.args.decel));const u=(t.args.flying?t.args.height+t.args.yMargin:t.args.height)||1;t.upScan=!0;const f=t.args.ySpeed<0?-t.args.ySpeed+u:0,p=t.castRayQuick(f,-Math.PI/2,[-.5*t.args.width+1,0]),h=t.castRayQuick(f,-Math.PI/2,[.5*t.args.width-1,0]);let g=!1;[p,h].some(t=>!1===t)||(g=Math.atan2(p-h,t.args.width));const d=!(!p&&!h)&&Math.min(...[p,h].filter(t=>!1!==t));t.upScan=!1;let y=[],b=[];if(!t.args.hLock&&!t.noClip){const e=t.args.xSpeed,r=Math.abs(t.args.groundAngle)>.5*Math.PI?Math.cos(t.args.groundAngle):1;y=(b=[!!e&&this.scanForward(t,e,.9*r),!!e&&this.scanForward(t,e,.5*r),!!e&&this.scanForward(t,e,.1*r)]).filter(t=>!1!==t)}if(t.args.ySpeed&&d&&t.lastLayer&&t.lastLayer.offsetYChanged)return t.args.y+=t.lastLayer.offsetYChanged+1,t.args.ySpeed=t.lastLayer.offsetYChanged+1,void(t.lastLayer=null);t.willStick||t.args.deepJump;if(p&&h&&d<=f&&(!t.args.flying||t.canStick)&&Math.abs(g)<Math.PI/4&&t.args.ySpeed<=0)return t.args.y-=d-t.args.height,t.args.ySpeed&&(t.args.falling=!0),void(t.args.ySpeed=Math.max(0,t.args.ySpeed));if(t.args.ySpeed>=0&&b[2]&&b[2]<=.5*t.args.width&&!1===b[1]&&!1===b[0]){const r=Math.sign(e);if(!t.getMapSolidAt(t.args.x+.5*t.args.width*r,t.args.y+4)){for(t.args.x+=r*Math.abs(b[2]);t.getMapSolidAt(t.args.x+.5*t.args.width*r,t.args.y);)t.args.y--;return}}else if(!t.willStick&&(y.length>1||b[2])){const r=Math.sign(e),n=-1+Math.min(...y),i=.5*t.args.width,o=i+-n,a=o*-r;isNaN(a)||a&&!(Math.abs(o)<i)&&Math.sign(a)===Math.sign(t.args.xSpeed)||(t.args.x+=a,t.args.flySpeed=0,t.args.xSpeed=0,t.args.gSpeed=0,t.args.mode=0),t.viewport&&t.viewport.actorsAtPoint(t.x+(0+i)*r,t.y,t.args.width,t.args.height).forEach(e=>{e!==t&&e.callCollideHandler(t,r<0?1:3)})}const v=l;let m=t.castRayQuick(v,n);Math.abs(t.args.xSpeed)<=Math.abs(t.args.ySpeed)&&(m=!1!==(m=!1!==m?m:t.castRayQuick(v,n,[-1,0]))?m:t.castRayQuick(v,n,[1,0]));const w=!1!==m&&[Math.cos(n)*m+t.args.x,Math.sin(n)*m+t.args.y];let S=w;if(!t.rotateLock){const e=-3*Math.sign(t.args.ySpeed||1),r=t.castRayQuick(v,n,[0,e]);S=!1!==r?[Math.cos(n)*r+t.args.x,Math.sin(n)*r+t.args.y+e]:S}const O=w,j=S;t.willJump=!1;let x=!1,P=!1;if([O,j].some(t=>!1===t)||(P=Math.atan2(O[1]-j[1],O[0]-j[0])),t.xLast!==t.args.x&&(t.xLast=t.args.x),t.yLast!==t.args.y&&(t.yLast=t.args.y),!1!==O){let n=!1;if(e<0){const t=Math.abs(P-Math.PI/2)%Math.PI;n=Math.abs(O[1]-j[1])>1&&O[0]>=-1+j[0]&&t<Math.PI/4}if(e>0){const t=Math.abs(P-Math.PI/2)%Math.PI;n=Math.abs(O[1]-j[1])>1&&O[0]<=1+j[0]&&t<Math.PI/4}const i=n&&e<0,o=n&&e>0,s=this.checkBelow(t,O[0],O[1]+1);t.willStick||0!==t.args.mode||n?(O[0]=Math.round(O[0]),O[1]=Math.round(O[1])):(t.args.gSpeed=t.args.xSpeed,s&&"object"===c(s)&&(s.args&&s.args.treadmill?t.args.gSpeed=0:s.offsetXChanged&&(t.args.gSpeed-=s.offsetXChanged))),t.willStick&&(O[0]=Math.round(O[0]),O[1]=Math.round(O[1]));const l=O[0],u=O[1];if(t.removed)return;t.args.x=Math.round(l),t.args.y=Math.round(u),n&&!t.willStick&&(t.args.x-=.5*t.args.width*Math.sign(e),t.args.falling=!0,y.length>2&&(t.args.xSpeed=0)),x=t.getMapSolidAt(t.args.x+a,t.args.y),Array.isArray(x)&&((x=x.filter(e=>!1!==e.callCollideHandler(t))).length||(x=!1)),t.rotateLock||(!1!==g&&g<0?(t.args.gSpeed=0,t.args.mode=1,t.args.groundAngle=0,t.args.direction=1,t.args.facing="right"):!1!==g&&g>0?(t.args.gSpeed=0,t.args.mode=3,t.args.groundAngle=0,t.args.direction=-1,t.args.facing="left"):!t.willStick&&(i||o)||t.getMapSolidAt(t.args.x-a,t.args.y)||t.getMapSolidAt(t.args.x-a,t.args.y+1)||(i?(t.args.gSpeed=0,t.args.mode=1,t.args.direction=1,t.args.facing="right"):o?(t.args.gSpeed=0,t.args.mode=3,t.args.direction=-1,t.args.facing="left"):!1!==g&&(t.args.mode=2)));Math.floor(t.args.width/2);const f=6,p=this.findNextStep(t,.5*-f),h=this.findNextStep(t,.5*f),d=Math.trunc(t.args.xSpeed);if(d>0&&h&&h[3])t.willStick||(t.args.x-=t.args.width);else if(d<0&&p&&p[3])t.willStick||(t.args.x+=t.args.width);else if(!h||!1!==h[0]&&!1!==h[1]||!p||!1!==p[0]&&!1!==p[1]){let i=0;if(h&&p){var k,_,R,M;if(i=r<0&&g?-g:Math.atan2((null!==(k=h[1])&&void 0!==k?k:0)-(null!==(_=p[1])&&void 0!==_?_:0),(null!==(R=h[0])&&void 0!==R?R:0)-(null!==(M=p[0])&&void 0!==M?M:0)),Math.abs(i)>=.25*Math.PI){const e=this.findNextStep(t,-f),r=this.findNextStep(t,f);e[1]!==p[1]&&r[1]!==h[1]||h[3]&&r[3]&&p[3]&&e[3]||(i=0)}t.ySpeedLast<0&&(i*=-1)}if(isNaN(i))throw console.log(i),new Error("angle is NAN!");if(n&&!t.willStick);else if(!(Math.abs(i)<Math.PI/2+-Math.PI/16&&h&&p&&!1!==h[0]&&!1!==p[0]&&!1!==h[1]&&!1!==p[1])||h[2]||p[2]||h[3]&&p[3]){if(!t.args.dead&&t.args.startled<175&&t.args.ySpeed>0&&(h&&h[2]&&(!p||!p[3])||(!h||!h[3])&&p&&p[2])){const r=e;return t.args.falling=!1,t.args.gSpeed=r,t.args.float=t.args.float||1,t.args.x+=h[0],t.args.y-=h[1],void(t.viewport.settings.rumble&&!t.controller.willRumble&&t.controller.rumble&&t.controller.rumble({duration:80,strongMagnitude:0,weakMagnitude:Math.min(40,Math.max(Math.abs(10*t.args.ySpeed),10))/40}))}}else{t.canRoll&&(t.yAxis>.55||t.args.dropDashCharge)&&!t.carrying.size&&(t.args.rolling=!0),t.args.startled<175&&(t.args.falling=!1,t.viewport.settings.rumble&&!t.controller.willRumble&&t.controller.rumble&&t.controller.rumble({duration:80,strongMagnitude:0,weakMagnitude:Math.min(40,Math.max(Math.abs(10*t.args.ySpeed),10))/40}));const n=.25*Math.PI,o=i;i<-n?(t.args.mode=1,i+=n):i>n&&(t.args.mode=3,i-=n),t.args.groundAngle=i,t.lastAngles.splice(0,t.lastAngles.length,...Array(t.angleAvg).fill(i));const a=-o/(.4*Math.PI);let l=0;l+=e,l+=r*a,x&&x.length&&(l=0),t.args.mode,"object"===c(s)&&(Array.isArray(s)||(t.args.standingLayer=s),s.offsetXChanged&&(l-=s.offsetXChanged,t.args.x+=s.offsetXChanged)),!l||t.args.climbing||t.args.standingOn&&t.args.standingOn.args.treadmill||(t.args.gSpeed=l,2===t.args.mode&&(t.args.gSpeed*=-1))}Math.abs(t.args.gSpeed)}}else if(t.args.ySpeed>0){if(1===t.args.mode||3===t.args.mode){const e=1===t.args.mode?-1:1;t.args.direction=e,t.args.groundAngle=Math.PI/2*e}t.args.falling||t.args.gSpeed||(t.args.gSpeed=Math.floor(e)),O&&(yPointDir===ySpeedDir||!yPointDir&&1===ySpeedDir)&&(t.args.x=Number(O[0]),t.args.y=Number(O[1]),t.args.falling=!1,t.viewport.settings.rumble&&t.controller.rumble&&t.controller.rumble({duration:80,strongMagnitude:0,weakMagnitude:Math.min(40,Math.max(Math.abs(10*t.args.ySpeed),10))/40}))}if(s.getSolid(t.args.x+t.args.width/2*Math.sign(t.args.xSpeed),t.args.y,t.getCollisionMap())||(Math.abs(t.args.xSpeed)>t.args.xSpeedMax&&(t.args.xSpeed=t.args.xSpeedMax*Math.sign(t.args.xSpeed)),Math.abs(t.args.ySpeed)>t.args.ySpeedMax&&(t.args.ySpeed=t.args.ySpeedMax*Math.sign(t.args.ySpeed))),!1===O){if(t.args.xSpeed){const e=!t.willStick&&t.getMapSolidAt(t.args.x+(1+i)*Math.sign(t.args.xSpeed),t.args.y-t.args.height/2),r=t.getMapSolidAt(t.args.x,t.args.y-t.args.height);e||(t.args.x=Number(t.args.x)+Number(t.args.xSpeed)),r&&(t.args.y+=1)}t.args.ySpeed&&(t.args.y=Number(t.args.y)+Number(t.args.ySpeed),t.args.flying&&t.args.ySpeed<0&&d>0&&(t.args.y+=u-d+4,t.args.ySpeed=0))}else if(t.viewport&&t.ySpeedLast>0){const e=t.getCollisionMap();t.viewport.tileMap.getSolid(t.args.x,t.args.y,e)&&!t.viewport.tileMap.getSolid(t.args.x,t.args.y-1,e)&&t.args.y--}if(t.args.standingOn instanceof o.PointActor){const e=t.args.standingOn.args.y+-t.args.standingOn.args.height+-1;(t.args.y<e||t.args.ySpeed<0)&&(t.args.standingOn=null)}}},{key:"checkDropDash",value:function(t){if(t.dropDashCharge&&0===t.args.mode){const e=t.dropDashCharge*Math.sign(t.args.direction);t.dropDashCharge=0,t.viewport.onFrameOut(1,()=>{t.args.gSpeed+=e,t.args.rolling=!0});const r=t.viewport,i=new n.Tag('<div class = "particle-dust">'),o=t.rotatePoint(t.args.gSpeed,0);i.style({"--x":o[0]+t.args.x,"--y":o[1]+t.args.y,"z-index":0,opacity:2*Math.random()}),r.particles.add(i),setTimeout(()=>{r.particles.remove(i)},350)}}},{key:"findDownSolid",value:function(t,e,r,n){if(!n.viewport)return;const i=n.viewport,o=i.tileMap;if(0===n.args.mode&&0===n.args.groundAngle&&(n.controllable||n.args.pushed||n.isVehicle)){const i=n.viewport.regionsAtPoint(e[0],e[1],r);for(const r of i)if(-1+e[1]===r.args.y+-r.args.height&&Math.abs(n.args.gSpeed)>=r.skimSpeed)return-1+t}return o.getSolid(e[0],e[1],n.getCollisionMap())?t:i.actorsAtPoint(e[0],e[1],0,0,{nearbyActors:r}).filter(t=>t.args!==n.args&&t.callCollideHandler(n)&&t.solid).length>0?t:void 0}},{key:"findUpSpace",value:function(t,e,r,n){if(!n.viewport)return;const i=n.viewport,o=i.tileMap.getSolid(e[0],e[1],n.getCollisionMap());if(o)return;const a=i.actorsAtPoint(e[0],e[1],0,0,{nearbyActors:r}).filter(t=>t.args!==n.args&&t.callCollideHandler(n)&&t.solid);if(n.args.groundAngle<=0){const i=n.controllable||n.args.pushed||n.isVehicle?n.viewport.regionsAtPoint(e[0],e[1],r):[];for(const r of i)if(0===a.length&&!o&&(0!==n.args.mode||e[1]!==1+r.args.y+-r.args.height||Math.abs(n.args.gSpeed)<=r.skimSpeed))return t}return 0!==a.length||o?void 0:t}},{key:"findNextStep",value:function(t,e){if(!t.viewport)return;t.viewport.tileMap;const r=t.maxStep*(t.args.falling?2:1),n=(Math.max(t.args.width/2,1),Math.sign(e));let i=!1,o=!1,a=0,s=0,c=0;for(;c<Math.abs(e);c+=1){let e;i=!1,o=!1;const l=(1+c)*n;switch(t.args.mode){case 0:e=[l,1];break;case 3:e=[1,-l];break;case 2:e=[-l,-1];break;case 1:e=[-1,l]}if(!1===(i=t.castRay(r,t.downAngle,e,this.findDownSolid)))return[!1,!1,!0];const u=s-i;if(Math.abs(u)>=r)return[!1,!1,u<0,u>0];if(0===i){let e;switch(t.args.mode){case 0:e=[l,0];break;case 3:e=[0,-l];break;case 2:e=[-l,0];break;case 1:e=[0,l]}const n=1+r;o=t.castRay(n,t.upAngle,e,this.findUpSpace);const i=Math.abs(a-o);if(!1===o)return[!1,!1,!1,!0];if(i>=r)return[!1,!1,!1,!0];a=o}else s=i;this.stepsTaken++}return!1!==o?[c*n,o,!1]:[c*n,-i,!1]}},{key:"doJump",value:function(t,e){var r;if(t.args.climbing&&t.getMapSolidAt(t.args.x,t.args.y-t.args.height)&&(t.args.y+=t.args.height),t.args.ignore||t.args.falling||!t.args.landed||t.args.float)return;const n=new CustomEvent("jump",{cancelable:!0,detail:{host:t,force:e}});if(!t.dispatchEvent(n))return;t.args.standingOn&&t.args.standingOn.args.yForce?e+=Math.max(0,.25*t.args.standingOn.args.yForce):t.args.standingOn&&t.args.standingOn.yLast&&(e+=Math.max(0,t.args.standingOn.yLast-t.args.standingOn.args.y));const i=t.args.width/2,o=Math.min(i,4),a=this.findNextStep(t,-o),s=this.findNextStep(t,+o),c=2*o;let l=Math.atan2(a[1]-s[1],Math.ceil(c));t.args.pushing=!1,t.args.landed=!1,t.args.falling=!0;t.args.mode;switch(t.args.mode){case 0:t.args.y-=16;break;case 3:l+=-Math.PI/2,t.args.x+=-t.args.width/2;break;case 2:l+=Math.PI,t.args.y+=t.args.normalHeight||t.args.height;break;case 1:l+=Math.PI/2,t.args.x+=t.args.width/2}let u=0,f=null!==(r=t.args.gSpeed)&&void 0!==r?r:0;t.args.standingOn&&t.args.standingOn.args.convey&&(f+=t.args.standingOn.args.convey),t.args.standingOn&&t.args.standingOn.args.trackX&&(u=t.args.standingOn.args.xSpeed||t.args.standingOn.args.gSpeed),t.args.standingOn=null,t.args.xSpeed=f*Math.cos(l),t.args.ySpeed=f*Math.sin(l);const p=l-Math.PI/2;let h=e*Math.cos(p),g=e*Math.sin(p);Math.abs(h)<.01&&(h=0),Math.abs(g)<.01&&(g=0),t.args.airAngle=p,t.args.xSpeed+=h,t.args.ySpeed+=g,t.args.jumpedAt=t.args.y,t.args.jumping=!0,t.viewport.tileMap.getSolid(t.args.x+t.args.width/2*Math.sign(t.args.xSpeed),t.args.y,t.getCollisionMap())&&(t.args.xSpeed=0),t.args.rolling=!1,t.args.mode=0,t.args.groundAngle=0,t.args.gSpeed=0,t.args.xSpeed+=u}},{key:"impulse",value:function(t,e,r){let n=arguments.length>3&&void 0!==arguments[3]&&arguments[3];t.args.dead||(t.impulseMag=e,t.impulseDir=r,t.impulseFal=n)}},{key:"scanForward",value:function(t,e){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:.5;!(arguments.length>3&&void 0!==arguments[3])||arguments[3];const n=Math.sign(e),i=t.args.width/2,o=Math.abs(e),a=t.args.falling?[0,-t.args.height*r]:t.rotatePoint(0,t.args.height*r),s=t.args.falling?[Math.PI,0,0][n+1]:t.realAngle+[0,0,Math.PI][n+1];return t.castRayQuick(t.args.falling?o+i+1:o+1,s,a)}},{key:"scanBottomEdge",value:function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;const e=host.viewport.tileMap,r=host.args.width/2,n=host.getCollisionMap(),i=e.getSolid(host.x-r,host.y-1,n),o=e.getSolid(host.x+r,host.y-1,n);if(!i||!o)return host.castRay(host.args.width,t<0?Math.PI:0,[-t*r,0],(t,r)=>{if(!host.viewport.actorsAtPoint(r[0],r[1]).filter(t=>t.args!==host.args).length&&!e.getSolid(r[0],r[1]+1,n))return t})}},{key:"checkBelow",value:function(t){var e,r;let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;n=null!==(e=n)&&void 0!==e?e:t.args.x,i=null!==(r=i)&&void 0!==r?r:t.args.y;const o=[],a=[];switch(t.args.mode){case 0:o[0]=n+0,o[1]=i+1,a[0]=n-0,a[1]=i+1;break;case 1:o[0]=n-1,o[1]=i+0,a[0]=n-1,a[1]=i-0;break;case 2:o[0]=n-0,o[1]=i-1,a[0]=n+0,a[1]=i-1;break;case 3:o[0]=n+1,o[1]=i+0,a[0]=n+1,a[1]=i-0}let s=t.getMapSolidAt(...o);return Array.isArray(s)&&(s=s.filter(e=>!1!==e.callCollideHandler(t))),s}},{key:"onSpawned",value:function(t,e){if(!t.args.onLayer)return;const r=t.args.onLayer,n=e.tileMap.tileLayers;for(const e of n)if(e.name===r){t.args.standingLayer=e;break}}},{key:"command_0",value:function(t,e){if(t.args.hangingFrom&&t.args.hangingFrom.unhook){const e=t.getLocalDrag();return t.args.ySpeed=-t.args.jumpForce*e*.75,t.args.hangingFrom.unhook(t),void(t.swing=!1)}if((t.args.falling||t.willJump||t.args.dontJump)&&t.args.standingOn&&!t.args.standingOn.isVehicle){if(t.args.ignore&&-4!==t.args.ignore)return;return t.viewport.auras.delete(t.args.standingOn),void(t.willJump=!0)}t.willJump||(t.args.standingOn&&t.args.standingOn.quickDrop&&(t.ignores.set(t.args.standingOn,15),t.args.ignore=0),t.willJump=!0)}},{key:"release_0",value:function(t,e){t.args.float||t.args.ignore||(!t.args.jumping||t.lightDashed||t.dashed?t.args.jumping&&!t.lightDashed&&!t.dashed&&t.args.ySpeed<-4&&(t.args.ySpeed=-4):t.args.ySpeed<0&&(t.args.ySpeed*=.5))}},{key:"command_1",value:function(t,e){t.canRoll&&t.args.gSpeed&&(t.args.rolling=!0)}},{key:"command_11",value:function(t,e){if(t.args.currentSheild&&!(t.args.currentSheild instanceof s.StarSheild)){const e=t.args.currentSheild;e.unequip&&e.unequip(t),t.args.currentSheild=null}}}])&&l(e.prototype,r),f&&l(e,f),Object.defineProperty(e,"prototype",{writable:!1}),t}();t.Platformer=f}),require.register("behavior/SkidDust.js",function(t,e,r){"use strict";function n(t){"@babel/helpers - typeof";return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(t,"__esModule",{value:!0}),t.SkidDust=void 0;var i=e("curvature/base/Tag"),o=e("./Behavior");function a(t,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,(o=i.key,void 0,"symbol"===n(a=function(t,e){if("object"!==n(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var i=r.call(t,e||"default");if("object"!==n(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(o,"string"))?a:String(a)),i)}var o,a}function s(t,e){return(s=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function c(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,i=l(t);if(e){var o=l(this).constructor;r=Reflect.construct(i,arguments,o)}else r=i.apply(this,arguments);return function(t,e){if(e&&("object"===n(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function l(t){return(l=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}let u=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&s(t,e)}(u,o.Behavior);var e,r,n,l=c(u);function u(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,u),(e=l.call(this)).dustType=t||"particle-dust",e}return e=u,(r=[{key:"update",value:function(t){if(t.args.falling||t.args.rolling||t.args.sliding||t.spindashCharge)return;if(t.args.wallSticking||t.args.climbing)return;const e=t.args.direction;if(!Math.sign(t.args.gSpeed)||!Math.sign(e))return;if(Math.abs(t.args.gSpeed-e)<5)return;if(!t.alwaysSkidding){if(Math.sign(t.args.gSpeed)===Math.sign(e))return;if(!t.skidding)return}if(t.silentSkid)return;const r=t.viewport,n=t.dustFreq||3;if(r.args.frameId%n!=0)return;const o=new i.Tag(document.createElement("div"));o.classList.add(this.dustType);const a=Math.sign(t.args.gSpeed)*t.dustDist||0,s=t.groundPoint;o.style({"--x":s[0]+a,"--y":s[1],"z-index":0,opacity:.25*Math.random()+.5}),r.particles.add(o),r.onFrameOut(20,()=>{r.particles.remove(o)})}}])&&a(e.prototype,r),n&&a(e,n),Object.defineProperty(e,"prototype",{writable:!1}),u}();t.SkidDust=u}),require.register("behavior/Spindash.js",function(t,e,r){"use strict";function n(t){"@babel/helpers - typeof";return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(t,"__esModule",{value:!0}),t.Spindash=void 0;var i=e("curvature/base/Tag"),o=e("./Behavior");function a(t,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,(o=i.key,void 0,"symbol"===n(a=function(t,e){if("object"!==n(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var i=r.call(t,e||"default");if("object"!==n(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(o,"string"))?a:String(a)),i)}var o,a}function s(t,e){return(s=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function c(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,i=l(t);if(e){var o=l(this).constructor;r=Reflect.construct(i,arguments,o)}else r=i.apply(this,arguments);return function(t,e){if(e&&("object"===n(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function l(t){return(l=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}let u=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&s(t,e)}(u,o.Behavior);var e,r,n,l=c(u);function u(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,u),l.apply(this,arguments)}return e=u,(r=[{key:"command_0",value:function(t,e){if(!t.args.falling&&!t.args.gSpeed&&!(t.yAxis<.55&&!t.args.gSpeed||t.groundTime<5))return t.spindashCharge+=10,this.showDashDust(t),!1}},{key:"update",value:function(t){if(t.spindashCharge=t.spindashCharge||0,t.spindashCharge)if(t.spindashCharge<1)t.spindashCharge=0;else{t.args.animation="spindash",t.spindashCharge-=.2,this.dashDust&&this.dashDust.style({"--dashCharge":t.spindashCharge});let e=t.spindashCharge/20;e>1&&(e=1)}if(!t.yAxis&&t.spindashCharge){t.spindashCharge<5&&(t.args.modeTime<45||t.args.skidding)&&(t.spindashCharge=15);const e="left"===t.args.facing?-1:1;let r=t.spindashCharge/40;r>1&&(r=1),t.args.rolling=!0;const n=32*r;t.castRayQuick(n*Math.sign(e),[Math.PI,0,0][1+Math.sign(e)],[0,t.args.height/2]),Math.sign(e)!==Math.sign(t.args.gSpeed)?t.args.gSpeed=n*Math.sign(e):t.args.gSpeed+=n*Math.sign(e),t.args.ignore=1,t.args.rolling=!0,t.spindashCharge=0,this.dashDust&&(this.dashDust.remove(),this.dashDust=!1)}}},{key:"showDashDust",value:function(t){const e=t.rotatePoint(0,0);if(this.dashDust)return void this.dashDust.style({"--x":e[0]+t.args.x,"--y":e[1]+t.args.y,"--direction":t.args.direction,"--dashCharge":t.spindashCharge});const r=t.viewport,n=new i.Tag('<div class = "particle-spindash-dust">');n.style({"--x":e[0]+t.args.x,"--y":e[1]+t.args.y,"--direction":t.args.direction,"--dashCharge":t.spindashCharge}),n.setAttribute("data-facing",t.args.facing),r.particles.add(n),this.dashDust=n}}])&&a(e.prototype,r),n&&a(e,n),Object.defineProperty(e,"prototype",{writable:!1}),u}();t.Spindash=u}),require.register("behavior/SuperForm.js",function(t,e,r){"use strict";function n(t){"@babel/helpers - typeof";return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(t,"__esModule",{value:!0}),t.SuperForm=void 0;e("curvature/base/Tag");var i=e("./Behavior");function o(t,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,(o=i.key,void 0,"symbol"===n(a=function(t,e){if("object"!==n(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var i=r.call(t,e||"default");if("object"!==n(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(o,"string"))?a:String(a)),i)}var o,a}function a(t,e){return(a=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function s(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,i=c(t);if(e){var o=c(this).constructor;r=Reflect.construct(i,arguments,o)}else r=i.apply(this,arguments);return function(t,e){if(e&&("object"===n(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function c(t){return(c=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}let l=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&a(t,e)}(l,i.Behavior);var e,r,n,c=s(l);function l(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,l),c.apply(this,arguments)}return e=l,(r=[{key:"command_3",value:function(t,e){var r,n;if(t.args.halted)return;const i=null!==(r=t.args.minRingsSuper)&&void 0!==r?r:50,o=null!==(n=t.args.minRingsHyper)&&void 0!==n?n:75;if(t.isSuper&&!t.isHyper&&t.args.rings<o||!t.args.falling||!t.args.jumping||t.args.rings<i||t.args.ignore||t.isHyper)return t.isSuper=!1,t.isHyper=!1,void t.setProfile();t.isHyper||(t.args.halted=45,t.args.animation="transform",t.args.jumping=!1,t.args.ySpeed=Math.min(t.args.ySpeed,0),t.args.flying=!1,t.args.dashed=!1),t.isSuper?t.isHyper=!t.isHyper:t.isSuper=!t.isSuper,t.transformTime=0,t.setProfile()}},{key:"updateEnd",value:function(t){"transform"===t.args.animation?t.transformTime++:t.transformTime>0&&(t.transformTime=0)}}])&&o(e.prototype,r),n&&o(e,n),Object.defineProperty(e,"prototype",{writable:!1}),l}();t.SuperForm=l}),require.register("cards/basic-controls.html",function(t,e,r){r.exports='<div class = "control-card">\n\t<span class = "button-index">\n\t\t<span class = "arrow button arrow-west"></span>\n\t\t/ <span class = "arrow button arrow-east"></span>\n\t\t/ <b>wasd</b>\n\t</span>\n\n\t<span class = "button-index">\n\t\t<span class = "button ps ps-x"></span>\n\t\t<span class = "button xb xb-a"></span>\n\t\t<b>space</b>\n\t</span>\n\n\t<span class = "button-index">\n\t\t<span class = "button ps ps-o"></span>\n\t\t<span class = "button xb xb-b"></span>\n\t\t<b>ctrl</b>\n\t</span>\n\n\t<span class = "button-index">\n\t\t<span class = "button ps ps-s"></span>\n\t\t<span class = "button xb xb-x"></span>\n\t\t<b>shift</b>\n\t</span>\n\n\t<span class = "button-index">\n\t\t<span class = "button ps ps-t"></span>\n\t\t<span class = "button xb xb-y"></span>\n\t\t<b>z</b>\n\t</span>\n\n\t<span class = "button-index">\n\t\t<span class = "button ps ps-l1"></span>\n\t\t<span class = "button xb xb-lb"></span>\n\t\t<b>q</b>\n\t</span>\n\n\t<span class = "button-index">\n\t\t<span class = "button ps ps-r1"></span>\n\t\t<span class = "button xb xb-rb"></span>\n\t\t<b>e</b>\n\t</span>\n</div>\n'}),require.register("cards/basic-moves.html",function(t,e,r){r.exports='<p><b>jump</b> + <b>jump</b> - fly / double jump action</p>\n\n<p><span class = "arrow-button arrow-north"></span> + <b>jump</b> - disengage vehicle</p>\n\n\x3c!-- <p><span class = "arrow-button arrow-south"></span> + <b>jump</b> - spindash</p> --\x3e\n'}),require.register("cards/plane-air-controls.html",function(t,e,r){r.exports='<div class = "control-card">\n\t<span class = "button-index">\n\t\t<span class = "arrow button arrow-west"></span>\n\t\t/ <span class = "arrow button arrow-east"></span>\n\t\t/ <b>wasd</b>\n\t\t- move\n\t</span>\n\n\t<span class = "button-index">\n\t\t<span class = "button ps ps-x"></span>\n\t\t<span class = "button xb xb-a"></span>\n\t\t<b>space</b>\n\t\t- double barrier\n\t</span>\n\n\t<span class = "button-index">\n\t\t<span class = "button ps ps-o"></span>\n\t\t<span class = "button xb xb-b"></span>\n\t\t<b>ctrl</b>\n\t\t- <span>no action</span>\n\t</span>\n\n\t<span class = "button-index">\n\t\t<span class = "button ps ps-s"></span>\n\t\t<span class = "button xb xb-x"></span>\n\t\t<b>shift</b>\n\t\t- <span>light dash</span>\n\t</span>\n\n\t<span class = "button-index">\n\t\t<span class = "button ps ps-t"></span>\n\t\t<span class = "button xb xb-y"></span>\n\t\t<b>z</b>\n\t\t- <span>no action</span>\n\t</span>\n\n\t<span class = "button-index">\n\t\t<span class = "button ps ps-l1"></span>\n\t\t<span class = "button xb xb-lb"></span>\n\t\t<b>q</b>\n\t\t- <span>air dash left</span>\n\t</span>\n\n\t<span class = "button-index">\n\t\t<span class = "button ps ps-r1"></span>\n\t\t<span class = "button xb xb-rb"></span>\n\t\t<b>e</b>\n\t\t- <span>air dash right</span>\n\t</span>\n\n</div>\n'}),require.register("cards/sonic-air-controls.html",function(t,e,r){r.exports='<div class = "control-card">\n\t<span class = "button-index">\n\t\t<span class = "arrow button arrow-west"></span>\n\t\t/ <span class = "arrow button arrow-east"></span>\n\t\t/ <b>wasd</b>\n\t\t- move\n\t</span>\n\n\t<span class = "button-index">\n\t\t<span class = "button ps ps-x"></span>\n\t\t<span class = "button xb xb-a"></span>\n\t\t<b>space</b>\n\t\t- double barrier\n\t</span>\n\n\t<span class = "button-index">\n\t\t<span class = "button ps ps-o"></span>\n\t\t<span class = "button xb xb-b"></span>\n\t\t<b>ctrl</b>\n\t\t- <span>no action</span>\n\t</span>\n\n\t<span class = "button-index">\n\t\t<span class = "button ps ps-s"></span>\n\t\t<span class = "button xb xb-x"></span>\n\t\t<b>shift</b>\n\t\t- <span>light dash</span>\n\t</span>\n\n\t<span class = "button-index">\n\t\t<span class = "button ps ps-t"></span>\n\t\t<span class = "button xb xb-y"></span>\n\t\t<b>z</b>\n\t\t- <span>no action</span>\n\t</span>\n\n\t<span class = "button-index">\n\t\t<span class = "button ps ps-l1"></span>\n\t\t<span class = "button xb xb-lb"></span>\n\t\t<b>q</b>\n\t\t- <span>air dash left</span>\n\t</span>\n\n\t<span class = "button-index">\n\t\t<span class = "button ps ps-r1"></span>\n\t\t<span class = "button xb xb-rb"></span>\n\t\t<b>e</b>\n\t\t- <span>air dash right</span>\n\t</span>\n\n</div>\n'}),require.register("cards/sonic-controls.html",function(t,e,r){r.exports='<div class = "control-card">\n\n\t<span class = "button-index">\n\t\t<span class = "arrow button arrow-west"></span>\n\t\t/ <span class = "arrow button arrow-east"></span>\n\t\t/ <b>wasd</b>\n\t\t- move\n\t</span>\n\n\t<span class = "button-index">\n\t\t<span class = "button ps ps-x"></span>\n\t\t<span class = "button xb xb-a"></span>\n\t\t<b>space</b>\n\t\t- jump\n\t</span>\n\n\t<span class = "button-index">\n\t\t<span class = "button ps ps-o"></span>\n\t\t<span class = "button xb xb-b"></span>\n\t\t<b>ctrl</b>\n\t\t- <span>spindash</span>\n\t</span>\n\n\t<span class = "button-index">\n\t\t<span class = "button ps ps-s"></span>\n\t\t<span class = "button xb xb-x"></span>\n\t\t<b>z</b>\n\t\t- <span>no action</span>\n\t</span>\n\n\t<span class = "button-index">\n\t\t<span class = "button ps ps-t"></span>\n\t\t<span class = "button xb xb-y"></span>\n\t\t<b>x</b>\n\t\t- <span>super</span>\n\t</span>\n\n\t<span class = "button-index">\n\t\t<span class = "button ps ps-l1"></span>\n\t\t<span class = "button xb xb-lb"></span>\n\t\t<b>q</b>\n\t\t- <span>no action</span>\n\t</span>\n\n\t<span class = "button-index">\n\t\t<span class = "button ps ps-r1"></span>\n\t\t<span class = "button xb xb-rb"></span>\n\t\t<b>e</b>\n\t\t- <span>no action</span>\n\t</span>\n\n</div>\n'}),require.register("console/task/Chao.js",function(t,e,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Chao=void 0;e("curvature/base/Router");var n=e("subspace-console/Task"),i=e("../../actor/Chao");function o(t){"@babel/helpers - typeof";return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function a(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,f(n.key),n)}}function s(t,e){return(s=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function c(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=l(t);if(e){var i=l(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===o(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function l(t){return(l=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function u(t,e,r){return(e=f(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function f(t){var e=function(t,e){if("object"!==o(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==o(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===o(e)?e:String(e)}let p=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&s(t,e)}(u,n.Task);var e,r,o,l=c(u);function u(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,u),l.apply(this,arguments)}return e=u,(r=[{key:"init",value:function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"list";if("function"==typeof this["command_"+t]){for(var e=arguments.length,r=new Array(e>1?e-1:0),n=1;n<e;n++)r[n-1]=arguments[n];this["command_"+t](...r)}}},{key:"command_list",value:function(){if(!u.viewport)return;const t=u.viewport.actors;for(const e of t.items())e instanceof i.Chao&&this.print(`${Number(e.args.id)}) Chao "${e.args.name}" is at ${e.x}, ${e.y}.`)}},{key:"command_name",value:function(t,e){if(!u.viewport)return;const r=u.viewport.actorsById[t];r instanceof i.Chao&&(r.args.name=e)}},{key:"command_color",value:function(t){if(!u.viewport)return;const e=u.viewport.actorsById[t];if(e instanceof i.Chao){for(var r=arguments.length,n=new Array(r>1?r-1:0),o=1;o<r;o++)n[o-1]=arguments[o];this.recolor(e,...n)}}},{key:"recolor",value:function(t){for(var e=arguments.length,r=new Array(e>1?e-1:0),n=1;n<e;n++)r[n-1]=arguments[n];for(;r.length;){const e=r.shift(),n=r.shift();t.customColors[e]=n}}},{key:"command_store",value:function(t){if(!u.viewport)return;const e=u.viewport.actorsById[t];e instanceof i.Chao&&this.print(JSON.stringify(e.store()))}}])&&a(e.prototype,r),o&&a(e,o),Object.defineProperty(e,"prototype",{writable:!1}),u}();t.Chao=p,u(p,"viewport",null),u(p,"helpText","List the chao in the current map.")}),require.register("console/task/Impulse.js",function(t,e,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Impulse=void 0;var n=e("subspace-console/Task");function i(t){"@babel/helpers - typeof";return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function o(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,f(n.key),n)}}function a(t,e){return(a=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function s(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=l(t);if(e){var o=l(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===i(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return c(t)}(this,r)}}function c(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function l(t){return(l=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function u(t,e,r){return(e=f(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function f(t){var e=function(t,e){if("object"!==i(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==i(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===i(e)?e:String(e)}let p=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&a(t,e)}(f,n.Task);var e,r,i,l=s(f);function f(){var t;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,f);for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];return u(c(t=l.call(this,...r)),"title","Impulse task"),u(c(t),"prompt",".."),t}return e=f,(r=[{key:"init",value:function(t,e){if(!f.viewport.controlActor)return;let r=f.viewport.controlActor;r.standingOn&&r.standingOn.isVehicle&&(r=r.standingOn),r.impulse(t,e,!0)}},{key:"write",value:function(t){this.print(t)}}])&&o(e.prototype,r),i&&o(e,i),Object.defineProperty(e,"prototype",{writable:!1}),f}();t.Impulse=p,u(p,"viewport",null),u(p,"helpText","Apply an impulse to the player object."),u(p,"useText","input magnitude angle")}),require.register("console/task/Input.js",function(t,e,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Input=void 0;var n=e("subspace-console/Task");function i(t){"@babel/helpers - typeof";return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function o(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,f(n.key),n)}}function a(t,e){return(a=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function s(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=l(t);if(e){var o=l(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===i(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return c(t)}(this,r)}}function c(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function l(t){return(l=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function u(t,e,r){return(e=f(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function f(t){var e=function(t,e){if("object"!==i(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==i(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===i(e)?e:String(e)}let p=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&a(t,e)}(f,n.Task);var e,r,i,l=s(f);function f(){var t;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,f);for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];return u(c(t=l.call(this,...r)),"title","Input task"),u(c(t),"prompt",".."),t}return e=f,(r=[{key:"init",value:function(t){let e,r,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:500,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,o=()=>{};if(!f.viewport.controlActor)return;const a=f.viewport.controlActor,s=a.controller;if("a"===t[0]){const c=t.substring(1);this.print(`Setting axis ${c} to ${i} for ${n} milliseconds...`),e={axes:u({},c,i)},r=setInterval(()=>{s.replay(e),a.readInput()},16),o=(()=>{e.axes[c]=0,s.replay(e),a.readInput(),clearInterval(r)})}if("b"===t[0]){const i=t.substring(1);this.print(`Pressing button ${i} for ${n} milliseconds...`),e={buttons:u({},i,1)},r=setInterval(()=>{e.buttons[i]=1,s.replay(e),a.readInput()},16),o=(()=>{e.buttons[i]=0,s.replay(e),a.readInput(),clearInterval(r)})}return e?(s.replay(e),a.readInput(),new Promise(t=>{setTimeout(()=>{o(),t()},n)})):void 0}},{key:"write",value:function(t){this.print(t)}}])&&o(e.prototype,r),i&&o(e,i),Object.defineProperty(e,"prototype",{writable:!1}),f}();t.Input=p,u(p,"viewport",null),u(p,"helpText","Press a button x for y milliseconds."),u(p,"useText","input x y")}),require.register("console/task/Mark.js",function(t,e,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Mark=void 0;var n=e("curvature/base/Router"),i=e("subspace-console/Task");function o(t){"@babel/helpers - typeof";return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function a(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,f(n.key),n)}}function s(t,e){return(s=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function c(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=l(t);if(e){var i=l(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===o(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function l(t){return(l=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function u(t,e,r){return(e=f(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function f(t){var e=function(t,e){if("object"!==o(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==o(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===o(e)?e:String(e)}let p=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&s(t,e)}(u,i.Task);var e,r,o,l=c(u);function u(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,u),l.apply(this,arguments)}return e=u,(r=[{key:"init",value:function(t,e){if(!u.viewport.controlActor)return;const r=u.viewport.controlActor;this.print(`Character is at ${r.x}, ${r.y}.`),n.Router.setQuery("map",u.viewport.baseMap.replace(/^\/map\//,"")),n.Router.setQuery("start",`${Math.round(r.x)},${Math.round(r.y)}`)}}])&&a(e.prototype,r),o&&a(e,o),Object.defineProperty(e,"prototype",{writable:!1}),u}();t.Mark=p,u(p,"viewport",null),u(p,"helpText","Mark the current actor's position in space as a start position.")}),require.register("console/task/Move.js",function(t,e,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Move=void 0;var n=e("subspace-console/Task");function i(t){"@babel/helpers - typeof";return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function o(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,f(n.key),n)}}function a(t,e){return(a=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function s(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=l(t);if(e){var o=l(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===i(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return c(t)}(this,r)}}function c(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function l(t){return(l=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function u(t,e,r){return(e=f(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function f(t){var e=function(t,e){if("object"!==i(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==i(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===i(e)?e:String(e)}let p=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&a(t,e)}(f,n.Task);var e,r,i,l=s(f);function f(){var t;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,f);for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];return u(c(t=l.call(this,...r)),"prompt",".."),t}return e=f,(r=[{key:"init",value:function(t,e){if(!f.viewport.controlActor)return;this.print("Moving character to x, y...");const r=f.viewport.controlActor;r.args.x=parseFloat(t),r.args.y=parseFloat(e),r.viewport&&r.viewport.setColCell(r)}}])&&o(e.prototype,r),i&&o(e,i),Object.defineProperty(e,"prototype",{writable:!1}),f}();t.Move=p,u(p,"viewport",null),u(p,"helpText","Move the current actor to a position in space."),u(p,"useText","move x y")}),require.register("console/task/Pos.js",function(t,e,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Pos=void 0;var n=e("subspace-console/Task");function i(t){"@babel/helpers - typeof";return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function o(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,u(n.key),n)}}function a(t,e){return(a=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function s(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=c(t);if(e){var o=c(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===i(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function c(t){return(c=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function l(t,e,r){return(e=u(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function u(t){var e=function(t,e){if("object"!==i(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==i(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===i(e)?e:String(e)}let f=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&a(t,e)}(l,n.Task);var e,r,i,c=s(l);function l(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,l),c.apply(this,arguments)}return e=l,(r=[{key:"init",value:function(t,e){if(!l.viewport.controlActor)return;const r=l.viewport.controlActor;this.print(`Character is at ${r.x}, ${r.y}.`)}}])&&o(e.prototype,r),i&&o(e,i),Object.defineProperty(e,"prototype",{writable:!1}),l}();t.Pos=f,l(f,"viewport",null),l(f,"helpText","Check the current actor's position in space.")}),require.register("console/task/Settings.js",function(t,e,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Settings=void 0;var n=e("subspace-console/Task");function i(t){"@babel/helpers - typeof";return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function o(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,f(n.key),n)}}function a(t,e){return(a=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function s(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=l(t);if(e){var o=l(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===i(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return c(t)}(this,r)}}function c(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function l(t){return(l=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function u(t,e,r){return(e=f(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function f(t){var e=function(t,e){if("object"!==i(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==i(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===i(e)?e:String(e)}let p=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&a(t,e)}(f,n.Task);var e,r,i,l=s(f);function f(){var t;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,f);for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];return u(c(t=l.call(this,...r)),"prompt",".."),t}return e=f,(r=[{key:"init",value:function(t,e){const r=f.viewport;void 0!==e&&(r.settings[t]=JSON.parse(e)),this.print(JSON.stringify(r.settings[t]))}}])&&o(e.prototype,r),i&&o(e,i),Object.defineProperty(e,"prototype",{writable:!1}),f}();t.Settings=p,u(p,"viewport",null),u(p,"helpText","Get/set the values of settings variables."),u(p,"useText","set key val")}),require.register("console/task/Spawn.js",function(t,e,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Spawn=void 0;var n=e("subspace-console/Task");function i(t){"@babel/helpers - typeof";return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function o(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,u(n.key),n)}}function a(t,e){return(a=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function s(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=c(t);if(e){var o=c(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===i(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function c(t){return(c=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function l(t,e,r){return(e=u(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function u(t){var e=function(t,e){if("object"!==i(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==i(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===i(e)?e:String(e)}let f=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&a(t,e)}(l,n.Task);var e,r,i,c=s(l);function l(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,l),c.apply(this,arguments)}return e=l,(r=[{key:"init",value:function(t){if(!l.viewport||!l.viewport.controlActor)return;const e=l.viewport.objectPalette;l.viewport.controlActor;if(!t)return void this.print(Object.keys(e).join(", "));if(!(t in e))return void this.print(`Type not found: "${t}".`);const r=e[t],n=l.viewport.mouse.position;l.viewport.spawn.add({object:new r({x:n[0],y:n[1]})})}}])&&o(e.prototype,r),i&&o(e,i),Object.defineProperty(e,"prototype",{writable:!1}),l}();t.Spawn=f,l(f,"viewport",null),l(f,"helpText","Spawn an object.")}),require.register("controller/Axis.js",function(t,e,r){"use strict";function n(t){"@babel/helpers - typeof";return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function i(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,a(n.key),n)}}function o(t,e,r){return(e=a(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function a(t){var e=function(t,e){if("object"!==n(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var i=r.call(t,e||"default");if("object"!==n(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===n(e)?e:String(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.Axis=void 0;let s=function(){function t(e){let r=e.deadZone,n=void 0===r?0:r,i=e.proportional,a=void 0===i||i;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),o(this,"magnitude",0),o(this,"delta",0),n&&(this.proportional=a,this.deadZone=n)}var e,r,n;return e=t,(r=[{key:"tilt",value:function(t){t=this.deadZone&&Math.abs(t)>=this.deadZone?(Math.abs(t)-this.deadZone)/(1-this.deadZone)*Math.sign(t):0,this.delta=Number(t-this.magnitude).toFixed(3)-0,this.magnitude=Number(t).toFixed(3)-0}},{key:"zero",value:function(){this.magnitude=this.delta=0}}])&&i(e.prototype,r),n&&i(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();t.Axis=s}),require.register("controller/Button.js",function(t,e,r){"use strict";function n(t){"@babel/helpers - typeof";return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function i(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,a(n.key),n)}}function o(t,e,r){return(e=a(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function a(t){var e=function(t,e){if("object"!==n(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var i=r.call(t,e||"default");if("object"!==n(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===n(e)?e:String(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.Button=void 0;let s=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),o(this,"active",!1),o(this,"pressure",0),o(this,"delta",0),o(this,"time",0)}var e,r,n;return e=t,(r=[{key:"update",value:function(){arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.pressure?this.time++:!this.pressure&&this.time>0?this.time=-1:!this.pressure&&this.time<0&&this.time--,this.time<-1&&-1===this.delta&&(this.delta=0)}},{key:"press",value:function(t){this.delta=Number(t-this.pressure).toFixed(3)-0,this.pressure=Number(t).toFixed(3)-0,this.active=!0,this.time=this.time>0?this.time:0}},{key:"release",value:function(){this.delta=Number(-this.pressure).toFixed(3)-0,this.pressure=0,this.active=!1}},{key:"zero",value:function(){this.pressure=this.delta=0,this.active=!1}}])&&i(e.prototype,r),n&&i(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();t.Button=s}),require.register("controller/Controller.js",function(t,e,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Controller=void 0;var n=e("./Axis"),i=e("./Button");function o(t){"@babel/helpers - typeof";return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function a(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(i=n.key,void 0,"symbol"===o(a=function(t,e){if("object"!==o(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==o(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(i,"string"))?a:String(a)),n)}var i,a}const s={Space:0,Enter:0,NumpadEnter:0,ControlLeft:1,ControlRight:1,ShiftLeft:2,ShiftRight:2,KeyZ:3,KeyQ:4,KeyE:5,Digit1:6,Digit3:7,KeyBackspace:8,KeyW:12,KeyA:14,KeyS:13,KeyD:15,KeyH:112,KeyJ:113,KeyK:114,KeyL:115,KeyP:1020,KeyO:1209,Pause:1020,Tab:11,ArrowUp:12,ArrowDown:13,ArrowLeft:14,ArrowRight:15,KeyMeta:16,Numpad4:112,Numpad2:113,Numpad8:114,Numpad6:115,Backquote:1010,NumpadAdd:1011,NumpadSubtract:1012,NumpadMultiply:1013,NumpadDivide:1014,PageUp:1022,PageDown:1023,Home:1024,End:1025,Escape:[1020,1050],KeyB:1201};[...Array(12)].map((t,e)=>s[`F${e}`]=2e3+e);const c={12:-1,13:1,14:-0,15:0,112:-2,113:3,114:-3,115:2},l={"-6":14,"+6":15,"-7":12,"+7":13},u={0:1200,1:1201,9:1209,4:1022,5:1023};let f=function(){function t(e){e.keys;let r=e.deadZone,n=void 0===r?0:r;e.gamepad,e.keyboard;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.deadZone=n,Object.defineProperties(this,{buttons:{value:{}},pressure:{value:{}},axes:{value:{}},keys:{value:{}}})}var e,r,f;return e=t,(r=[{key:"update",value:function(){let t=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).gamepad;for(const t in this.buttons){this.buttons[t].update()}if(t&&this.willRumble){if("object"!==o(this.willRumble)&&(this.willRumble={duration:1e3,strongMagnitude:1,weakMagnitude:1}),t.id&&String(t.id).match(/playstation.{0,5}3/i)){this.willRumble.duration<100&&this.willRumble.strongMagnitude<.75&&(this.willRumble.duration=0,this.willRumble.weakMagnitude=0,this.willRumble.strongMagnitude=0),setTimeout(()=>{this.willRumble||t.vibrationActuator.playEffect("dual-rumble",{duration:0,weakMagnitude:0,strongMagnitude:0})},this.willRumble.duration+-1)}t.vibrationActuator&&t.vibrationActuator.playEffect&&t.vibrationActuator.playEffect("dual-rumble",this.willRumble),this.willRumble=!1}}},{key:"rumble",value:function(){let t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.willRumble=t}},{key:"readInput",value:function(t){let e=t.keyboard,r=t.gamepads,o=void 0===r?[]:r;const a={},f={},p={},h=new Set;for(let t=0;t<o.length;t++){const e=o[t];if(e)for(const t in e.buttons){const r=e.buttons[t];r.pressed&&(this.press(t,r.value),f[t]=!0,h.add(e))}}if(e){for(const t in[...Array(10)])f[t]||e.getKeyCode(t)>0&&(this.press(t,1),f[t]=!0,h.add(e));for(let t in s){if(f[t])continue;let r=s[t];Array.isArray(r)||(r=s[t]=[r]);for(const n of r)e.getKeyCode(t)>0&&(this.press(n,1),f[n]=!0)}}for(const t of o)if(t)for(const e in t.buttons){if(p[e])continue;if(f[e])continue;const r=t.buttons[e];this.buttons[e]&&!r.pressed&&this.buttons[e].active&&(this.release(e),p[e]=!0)}if(e){for(const t in[...Array(10)])p[t]||f[t]||e.getKeyCode(t)<0&&(this.release(t),p[t]=!0);for(let t in s){let r=s[t];Array.isArray(r)||(r=s[t]=[r]);for(const n of r)p[n]||f[n]||e.getKeyCode(t)<0&&(this.release(n),p[t]=!0)}}for(let t=0;t<o.length;t++){const e=o[t];if(e)for(const t in e.axes){const r=e.axes[t];Math.abs(r)<this.deadZone?a[t]||this.tilt(t,0):(a[t]=!0,this.tilt(t,r))}}for(let t in c){this.buttons[t]||(this.buttons[t]=new i.Button);const e=c[t],r=Math.sign(1/e),n=Math.abs(e);a[n]||(this.buttons[t].active?(a[n]=!0,this.tilt(n,r)):a[n]||this.tilt(n,0))}for(let t in l){const e=l[t];if(p[e])continue;if(f[e])continue;const r=[t.slice(0,1),t.slice(1)],i=(r[0],r[1]);this.axes[i]||(this.axes[i]=new n.Axis({deadZone:this.deadZone}));const o=this.axes[i];if(o.magnitude&&Math.sign(t)!==Math.sign(o.magnitude))continue;const a=Math.abs(o.magnitude);a?(this.press(e,a),f[e]=!0):(this.release(e,a),p[e]=!0)}for(const t in u){const e=u[t];p[e]||(f[e]||(this.buttons[e]||(this.buttons[e]=new i.Button),this.buttons[t]||(this.buttons[t]=new i.Button),this.buttons[t].active?(this.press(e,this.buttons[t].pressure),f[e]=!0):f[e]||(this.release(e,this.buttons[t].pressure),p[e]=!0)))}return h}},{key:"tilt",value:function(t,e){this.axes[t]||(this.axes[t]=new n.Axis({deadZone:this.deadZone})),this.axes[t].tilt(e)}},{key:"press",value:function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;this.buttons[t]||(this.buttons[t]=new i.Button),this.buttons[t].press(e)}},{key:"release",value:function(t){this.buttons[t]||(this.buttons[t]=new i.Button),this.buttons[t].release()}},{key:"serialize",value:function(){const t={};for(const e in this.buttons)t[e]=this.buttons[e].pressure;const e={};for(const t in this.axes)e[t]=this.axes[t].magnitude;return{axes:e,buttons:t}}},{key:"replay",value:function(t){if(t.buttons)for(const e in t.buttons)t.buttons[e]>0?this.press(e,t.buttons[e]):this.release(e);if(t.axes)for(const e in t.axes)t.axes[e].magnitude!==t.axes[e]&&this.tilt(e,t.axes[e])}},{key:"zero",value:function(){for(const t in this.axes)this.axes[t].zero();for(const t in this.buttons)this.buttons[t].zero()}},{key:"buttonIsMapped",value:function(t){return t in u}},{key:"keyIsMapped",value:function(t){return t in s}}])&&a(e.prototype,r),f&&a(e,f),Object.defineProperty(e,"prototype",{writable:!1}),t}();t.Controller=f}),require.register("controller/GamepadConfig.js",function(t,e,r){"use strict";function n(t){"@babel/helpers - typeof";return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(t,"__esModule",{value:!0}),t.GamepadConfig=void 0;var i=e("curvature/base/View"),o=e("../intro/SkippableCard"),a=e("./KbInput");function s(t,e,r){return(e=l(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function c(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,l(n.key),n)}}function l(t){var e=function(t,e){if("object"!==n(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var i=r.call(t,e||"default");if("object"!==n(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===n(e)?e:String(e)}function u(){return(u="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=h(t)););return t}(t,e);if(n){var i=Object.getOwnPropertyDescriptor(n,e);return i.get?i.get.call(arguments.length<3?t:r):i.value}}).apply(this,arguments)}function f(t,e){return(f=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function p(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,i=h(t);if(e){var o=h(this).constructor;r=Reflect.construct(i,arguments,o)}else r=i.apply(this,arguments);return function(t,e){if(e&&("object"===n(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function h(t){return(h=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}let g=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&f(t,e)}(d,o.SkippableCard);var r,n,l,g=p(d);function d(t,r){var n;switch(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,d),(n=g.call(this,t,r)).template=e("./gamepad-config.html"),n.args.cardName="gamepad-config-card",n.args.moves={},n.args.char=n.args.char||"Sonic",t.char){case"Sonic":n.args.moves={start:"Pause",dpad:"Move",a:"Jump",b:"Spindash / Roll / Dropdash",x:"Light Dash / Interact",y:"Super Transform",l1:"Air Dash",r1:"Air Dash",la:"Move",ra:"Switch Sheilds"};break;case"Tails":n.args.moves={start:"Pause",dpad:"Move",a:"Jump",aa:"Fly",ad:"Use Shield / Spindash",d:"Dive",x:"Interact",y:"Super Transform",la:"Move",ra:"Switch Sheilds"};break;case"Knuckles":n.args.moves={start:"Pause",dpad:"Move",a:"Jump",aa:"Fly",b:"Punch / Drop off wall",ad:"Use Shield / Spindash",d:"Dive",y:"Super Transform",la:"Move",ra:"Switch Sheilds"}}return"input-xbox"===n.args.inputType?(n.gamepads={xb:i.View.from(e("./xbox360-input.svg"),n.args.moves)},n.args.type="xb"):"input-playstation"===n.args.inputType?(n.gamepads={ps:i.View.from(e("./ps3-input.svg"),n.args.moves)},n.args.type="ps"):"input-dreamcast"===n.args.inputType?(n.gamepads={ps:i.View.from(e("./dc-input.svg"),n.args.moves)},n.args.type="dc"):"input-gamecube"===n.args.inputType?(n.gamepads={ps:i.View.from(e("./gc-input.svg"),n.args.moves)},n.args.type="gc"):n.gamepads={kb:new a.KbInput({char:n.args.char,moves:n.args.moves})},n.current=0,n.buttons=[],n.sticks={},n}return r=d,(n=[{key:"onAttached",value:function(){this.span=this.findTag("div"),this.args.text=Object.values(this.gamepads)[this.current],this.args.type=this.args.type||Object.keys(this.gamepads)[this.current]}},{key:"swap",value:function(){this.current++;const t=Object.values(this.gamepads),e=Object.keys(this.gamepads);this.current>=t.length&&(this.current=0),this.args.text=t[this.current],this.args.type=e[this.current]}},{key:"exit",value:function(){this.remove()}},{key:"input",value:function(t){if(u(h(d.prototype),"input",this).call(this,t),!this.span)return;let e=0,r=0,n=0,i=0;t.axes[0]&&(e=t.axes[0].magnitude),t.axes[1]&&(r=t.axes[1].magnitude),t.axes[2]&&(n=t.axes[2].magnitude),t.axes[3]&&(i=t.axes[3].magnitude),this.span.style({"--x":e,"--y":r,"--a":n,"--b":i});for(const e in t.buttons)t.buttons[e]?this.span.style(s({},`--pressed-${e}`,t.buttons[e].pressure)):this.span.style(s({},`--pressed-${e}`,0))}},{key:"play",value:function(t){}}])&&c(r.prototype,n),l&&c(r,l),Object.defineProperty(r,"prototype",{writable:!1}),d}();t.GamepadConfig=g}),require.register("controller/KbInput.js",function(t,e,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.KbInput=void 0;var n=e("curvature/base/View"),i=e("../ui/CharacterString");function o(t){"@babel/helpers - typeof";return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function a(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,f(n.key),n)}}function s(t,e){return(s=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function c(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=u(t);if(e){var i=u(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===o(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return l(t)}(this,r)}}function l(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function u(t){return(u=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function f(t){var e=function(t,e){if("object"!==o(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==o(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===o(e)?e:String(e)}let p=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&s(t,e)}(h,n.View);var r,o,u,p=c(h);function h(t,r){var n,o,a,s;switch(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,h),n=p.call(this,t,r),o=l(n),a="template",s=e("./kb-input.html"),(a=f(a))in o?Object.defineProperty(o,a,{value:s,enumerable:!0,configurable:!0,writable:!0}):o[a]=s,n.args.char){case"Sonic":n.args.lines=[new i.CharacterString({font:n.font,value:`⬲ ✚ ${n.args.moves.dpad}`}),new i.CharacterString({font:n.font,value:`⬚ ⓿ ${n.args.moves.a}`}),new i.CharacterString({font:n.font,value:`⬚ ❶ ${n.args.moves.b}`}),new i.CharacterString({font:n.font,value:`⬚ ❷ ${n.args.moves.x}`}),new i.CharacterString({font:n.font,value:`⬚ ❸ ${n.args.moves.y}`}),new i.CharacterString({font:n.font,value:`❹ ❺ ${n.args.moves.r1}`}),new i.CharacterString({font:n.font,value:`⬚ ▦ ${n.args.moves.ra}`}),new i.CharacterString({font:n.font,value:`⬚ ❾ ${n.args.moves.start}`})];break;case"Tails":n.args.lines=[new i.CharacterString({font:n.font,value:`⬲ ✚ ${n.args.moves.dpad}`}),new i.CharacterString({font:n.font,value:`⬚ ⓿ ${n.args.moves.a}`}),new i.CharacterString({font:n.font,value:`⓿ ⓿ ${n.args.moves.aa}`}),new i.CharacterString({font:n.font,value:`↓ ⓿ ${n.args.moves.ad}`}),new i.CharacterString({font:n.font,value:`↓ ⬚ ${n.args.moves.d}`}),new i.CharacterString({font:n.font,value:`⬚ ❷ ${n.args.moves.x}`}),new i.CharacterString({font:n.font,value:`⬚ ❸ ${n.args.moves.y}`}),new i.CharacterString({font:n.font,value:`⬚ ❾ ${n.args.moves.start}`})];break;case"Knuckles":n.args.lines=[new i.CharacterString({font:n.font,value:`⬲ ✚ ${n.args.moves.dpad}`}),new i.CharacterString({font:n.font,value:`⬚ ⓿ ${n.args.moves.a}`}),new i.CharacterString({font:n.font,value:`⬚ ❶ ${n.args.moves.b}`}),new i.CharacterString({font:n.font,value:`⓿ ⓿ ${n.args.moves.aa}`}),new i.CharacterString({font:n.font,value:`↓ ⓿ ${n.args.moves.ad}`}),new i.CharacterString({font:n.font,value:`↓ ⬚ ${n.args.moves.d}`}),new i.CharacterString({font:n.font,value:`⬚ ❸ ${n.args.moves.y}`}),new i.CharacterString({font:n.font,value:`⬚ ❾ ${n.args.moves.start}`})]}return n}return r=h,o&&a(r.prototype,o),u&&a(r,u),Object.defineProperty(r,"prototype",{writable:!1}),r}();t.KbInput=p}),require.register("controller/dc-input.svg",function(t,e,r){r.exports='<svg version="1.0" viewBox="0 0 512 288" xmlns="http://www.w3.org/2000/svg">\n <defs>\n  <clipPath id="a">\n   <ellipse cx="296.69" cy="214.12" rx="206.77" ry="205.42" display="none" fill="#4d4d4d"/>\n   <path class="powerclip" d="m8.0946 3.7805h575.41v590.04h-575.41zm495.36 210.34a206.77 205.42 0 0 0-206.77-205.42 206.77 205.42 0 0 0-206.77 205.42 206.77 205.42 0 0 0 206.77 205.42 206.77 205.42 0 0 0 206.77-205.42z" display="block" fill="#4d4d4d"/>\n  </clipPath>\n </defs>\n <g transform="translate(-260.34 -473.69)">\n  <path d="m437.18 546.97c0.0704-0.35215 1.3382-5.8456 1.479-6.7612 0.14086-0.91559 0.35215-1.4086 1.479-2.1833 10.576-7.2713 5.4994-7.4732 17.763-5.4952 2.1833 0.35214 5.0005 5.8456 5.0005 5.8456z" fill="#d8d8d8" fill-rule="evenodd" stroke="#000" stroke-width=".96695" data-button="button-6"/>\n  <path d="m595.5 546.97c-0.0704-0.35215-1.3382-5.8456-1.479-6.7612-0.14086-0.91559-0.35215-1.4086-1.479-2.1833-10.576-7.2713-5.4994-7.4732-17.763-5.4952-2.1833 0.35214-5.0005 5.8456-5.0005 5.8456z" fill="#d8d8d8" fill-rule="evenodd" stroke="#000" stroke-width=".96695" data-button="button-7"/>\n  <path d="m604.24 553.13c-0.0704-0.35215-1.3382-5.8456-1.479-6.7612-0.14086-0.91559-0.35215-1.4086-1.479-2.1833-10.576-7.2713-22.951-10.782-35.215-8.8037-2.1833 0.35214-5.0005 5.8456-5.0005 5.8456z" fill="#d8d8d8" fill-rule="evenodd" stroke="#000" stroke-width=".96695" data-button="button-5"/>\n  <path d="m428.44 553.13c0.0704-0.35215 1.3382-5.8456 1.479-6.7612 0.14086-0.91559 0.35215-1.4086 1.479-2.1833 10.576-7.2713 22.951-10.782 35.215-8.8037 2.1833 0.35214 5.0005 5.8456 5.0005 5.8456z" fill="#d8d8d8" fill-rule="evenodd" stroke="#000" stroke-width=".96695" data-button="button-4"/>\n  <g transform="matrix(.34401 0 0 .34401 414.97 503.95)">\n   <ellipse cx="294.98" cy="208.06" rx="205.59" ry="199.11" fill="none" stroke="#000" stroke-width="7.4"/>\n   <ellipse cx="295.57" cy="214.12" rx="206.77" ry="205.42" display="block" fill="#e6e6e6"/>\n   <rect x="255.55" y="18.994" width="93.05" height="71.373" fill="#d35f5f" stroke-width=".67124"/>\n   <rect x="234.74" y="140.67" width="129.82" height="113.54" fill="#666"/>\n   <g transform="translate(-1.12)" fill="#1a1a1a">\n    <g>\n     <path d="m243.78 111.34c0.838 0 1.818-0.043 2.687-0.135s1.481-0.397 2.167-0.636 1.377-0.643 2.02-1.261c0.637-0.618 1.157-1.316 1.548-2.099 0.392-0.784 0.673-1.659 0.845-2.632 0.171-0.967 0.239-1.952 0.196-2.95-0.042-1.12-0.343-1.953-0.648-2.907-0.306-0.955-0.881-2.154-1.671-2.803-0.869-0.716-1.493-1.224-2.387-1.481-0.894-0.251-2.154-0.637-3.599-0.637-0.881 0-2.05 0.062-2.62 0.128-0.593 0.074-1.138 0.147-1.885 0.159l0.196 17.228c1.162 0.038 2.154 0.026 3.151 0.026z" fill="#1a1a1a"/>\n     <path d="m278.33 102.96c-0.031-0.624 0-0.416-0.073-0.765-0.074-0.343-0.166-0.618-0.349-0.991-0.184-0.367-0.502-0.624-0.795-0.894-0.294-0.27-0.643-0.478-1.053-0.618-0.404-0.147-1.01-0.22-1.475-0.22-0.501 0-0.948 0.153-1.395 0.312s-0.838 0.374-1.175 0.649c-0.336 0.275-0.618 0.6-0.844 0.967-0.227 0.367-0.392 0.729-0.496 1.071-0.042 0.135-0.049 0.147-0.042 0.153 6e-3 6e-3 0.03-0.012-0.025 0.336z" fill="#1a1a1a"/>\n     <path d="m291.54 104.42c-0.3 0.27-0.441 0.343-0.587 0.453-0.147 0.11-0.361 0.171-0.551 0.269-0.19 0.092-0.447 0.116-0.68 0.202-0.226 0.085-1.022 0.11-1.346 0.153-0.691 0.086-1.15 0.159-1.426 0.27-0.6 0.214-0.955 0.275-1.298 0.496-0.342 0.22-0.612 0.551-0.838 0.808-0.227 0.257-0.312 0.49-0.404 0.747-0.104 0.318-0.092 0.655-0.073 0.998 0.018 0.538 0.434 1.132 0.734 1.523 0.293 0.398 0.3 0.257 0.679 0.526 0.379 0.263 0.918 0.404 1.518 0.404 0.374 0 0.759-0.031 1.157-0.092 0.306-0.043 0.637-0.239 1.096-0.392 0.146-0.049 0.489-0.361 0.655-0.422 0 0 0.422-0.342 0.844-1.077 0.422-0.734 0.508-1.952 0.508-1.952z" fill="#1a1a1a"/>\n     <path d="m341.81 104.23c-0.294 0.27-0.44 0.349-0.588 0.459-0.146 0.11-0.379 0.153-0.569 0.251-0.189 0.092-0.428 0.135-0.66 0.22-0.227 0.086-1.022 0.11-1.347 0.153-0.691 0.085-1.15 0.159-1.426 0.269-0.6 0.22-0.961 0.282-1.304 0.496-0.343 0.221-0.618 0.551-0.845 0.808s-0.318 0.489-0.404 0.747c-0.104 0.318-0.085 0.655-0.073 1.003 0.019 0.533 0.435 1.132 0.734 1.524 0.3 0.398 0.3 0.257 0.686 0.526 0.38 0.263 0.918 0.404 1.524 0.404 0.373 0 0.759-0.03 1.162-0.092 0.307-0.042 0.643-0.245 1.096-0.392 0.146-0.049 0.489-0.361 0.655-0.422 0 0 0.422-0.343 0.844-1.077 0.423-0.729 0.509-1.953 0.509-1.953z" fill="#1a1a1a"/>\n     <path d="m79.619 239.47c24.811 0 44.995-20.073 44.995-44.748s-20.184-44.748-44.995-44.748-44.997 20.073-44.997 44.748 20.192 44.748 44.997 44.748z" fill="#ececec"/>\n     <polygon transform="matrix(1.6291,0,0,1.6291,-178.01,-257.79)" points="318.12 444.41 293.78 403.06 269.44 444.41" fill="#fff" stroke-width=".61384"/>\n     <path d="m119.14 577.38c12.815-43.023 10.985-43.023 17.393-58.582 6.408-15.562 19.223-16.475 35.698-20.135 15.404-3.42 80.508-11.378 123.02-12.431 6e-3 0.117 0 0 0 0l11.652-0.15207-0.013-0.092s75.652 4.8914 112.49 12.675c16.476 3.66 29.291 4.578 35.698 20.135 6.407 15.564 4.578 15.564 17.394 58.582 12.814 43.018 69.554-66.818 95.184-228.83 25.631-162.01-11.848-224.91-22.222-230.4-10.373-5.49-79.382-20.404-79.382-20.404-18.269-23.911-37.871-41.377-57.039-54.199v181.14c0 53.85-43.807 97.657-97.656 97.657h-21.524c-53.85 0-97.657-43.808-97.657-97.657v-187.17c-22.156 13.194-45.296 32.319-66.624 60.232 0 0-69.009 14.908-79.382 20.404-10.374 5.49-47.853 68.385-22.222 230.4 25.624 162.01 82.375 271.85 95.19 228.83zm373.77-258.73c-13.801 0-25.031-11.223-25.031-25.024s11.23-25.031 25.031-25.031c13.8 0 25.024 11.224 25.024 25.031 1e-3 13.802-11.224 25.024-25.024 25.024zm48.207-96.432c13.801 0 25.03 11.224 25.03 25.031 0 13.801-11.229 25.025-25.03 25.025s-25.031-11.224-25.031-25.025 11.23-25.031 25.031-25.031zm-47.601-46.989c13.801 0 25.031 11.224 25.031 25.031 0 13.8-11.23 25.024-25.031 25.024s-25.03-11.224-25.03-25.024c5e-3 -13.801 11.229-25.031 25.03-25.031zm-48.207 46.383c13.801 0 25.024 11.224 25.024 25.031 0 13.801-11.224 25.025-25.024 25.025s-25.031-11.224-25.031-25.025c6e-3 -13.807 11.236-25.031 25.031-25.031zm-176.43 232.05 28.458-48.342c1.408-2.418 5.056-2.441 6.5-6e-3l28.451 48.342c0.729 1.242 0.759 2.662 0.099 3.818-0.655 1.15-1.91 1.842-3.33 1.842h-56.928c-1.426 0-2.674-0.691-3.335-1.842-0.668-1.156-0.631-2.582 0.085-3.812zm-136.01-171.33c2.699 0 4.896 2.191 4.896 4.89v26.23h26.23c2.693 0 4.89 2.191 4.89 4.891v23.801c0 2.697-2.191 4.889-4.89 4.889h-26.23v26.23c0 2.693-2.191 4.891-4.896 4.891h-23.801c-2.692 0-4.89-2.191-4.89-4.891v-26.23h-26.23c-2.693 0-4.89-2.191-4.89-4.889v-23.801c0-2.693 2.191-4.891 4.89-4.891h26.23v-26.23c0-2.699 2.191-4.89 4.89-4.89zm-54.009-133.64c24.902 0 45.166 20.263 45.166 45.166s-20.263 45.166-45.166 45.166-45.166-20.263-45.166-45.166 20.264-45.166 45.166-45.166z" clip-path="url(#b)" fill="#e6e6e6"/>\n     <path d="m371.79 133.6h-142.4v126.1h142.4zm-8.256 117.31c0 0.985-0.796 1.781-1.781 1.781h-122.33c-0.979 0-1.781-0.796-1.781-1.781v-108.51c0-0.985 0.795-1.781 1.781-1.781h122.33c0.985 0 1.781 0.795 1.781 1.781z" fill="#1a1a1a"/>\n     <path d="m289.82 316.22h21.523c50.558 0 91.537-40.985 91.537-91.536v-6.089l0.0627-180.67c-46.252-27.867-85.605-28.475-100.38-29.284-3.6348-0.19916-6.7928-0.03767-6.7928-0.03767s-2.9265-0.19568-6.6277-0.015294c-13.717 0.66851-50.54 2.3407-91.789 25.089l0.93221 184.88v6.12c0 50.552 40.986 91.537 91.537 91.537zm66.506-218.18 1.806-0.061c0.018-0.379-0.031-1.567-0.031-2.497 0-0.453-0.227-0.869-0.41-1.096 0.82-0.184 2.069-0.563 2.638-0.728-6e-3 1.469 0.099 3.556 0.117 4.321l3.684 0.055c-0.019 0.63 0.049 0.851 0.062 1.419l-1.016-0.122h-2.705l-0.05 8.103-0.024 0.679c0.024 0.723 0.123 1.641 0.282 2.001 0.159 0.361 0.385 0.496 0.679 0.655 0.3 0.159 0.637 0.196 0.949 0.196 0.22 0 0.551-6e-3 0.808-6e-3s0.435-0.019 1.071-0.202c-0.08 0.478-0.209 0.741-0.294 1.536-0.588 0.166-0.857 0.208-1.206 0.245-0.349 0.043-0.679-0.067-0.997-0.067-0.777 0-1.414-0.11-1.903-0.337-0.49-0.22-0.869-0.575-1.139-1.071-0.275-0.49-0.465-1.708-0.496-2.552-6e-3 -0.11-6e-3 -0.3-0.012-0.575 0-0.275-0.019-0.551 0-2.197l-0.056-6.402h-1.774c0.023-0.397 0.023-0.519 0.017-1.297zm-2.932 9.309c-0.135-0.184-0.643-0.618-0.899-0.838-0.257-0.227-0.937-0.557-1.824-0.924-0.899-0.379-2.044-0.74-2.46-1.089-0.416-0.355-1.175-0.759-1.475-1.132s-0.526-0.74-0.68-1.12c-0.153-0.374-0.043-0.943-0.055-1.328-0.024-0.618 0.36-1.254 0.728-1.836 0.361-0.575 0.992-0.9 1.714-1.188 0.723-0.281 1.579-0.428 2.564-0.428 1.102 0 2.166 0.214 3.501 0.471 0.073 0.753-0.099 1.273-7e-3 1.897-0.961-0.636-2.025-0.955-3.072-0.955-0.568 0-1.145 0.086-1.621 0.233-0.478 0.146-1.01 0.624-1.218 0.918-0.215 0.3-0.331 0.581-0.318 0.936 6e-3 0.233 0.079 0.618 0.165 0.833 0.086 0.214 0.648 0.808 0.942 0.937 0.404 0.177 0.245 0.153 0.612 0.232 0.416 0.092 1.444 0.618 2.423 1.083 1.017 0.483 1.946 1.089 2.265 1.408 0.324 0.318 0.637 0.759 0.931 1.438 0.165 0.38 0.257 0.826 0.257 1.145 0 0.551-0.146 0.625-0.129 0.967 0.031 0.673-0.141 0.924-0.514 1.5s-1.071 1.126-1.849 1.444c-0.777 0.318-1.604 0.582-2.576 0.582-0.416 0-1.377 0.049-1.934-6e-3 -0.558-0.049-1.035-0.239-1.427-0.312s-0.643-0.092-1.224-0.232l-0.202-0.985c-6e-3 -0.116-0.263-0.771-0.373-1.396 1.646 0.906 3.385 1.542 4.633 1.542 0.654 0 1.304-0.19 1.75-0.361 0.447-0.171 0.882-0.489 1.096-0.826 0.208-0.336 0.44-0.661 0.521-1.016 0.049-0.196 0.11-0.459 0.061-0.637-0.067-0.211-0.171-0.774-0.306-0.957zm-86.138-55.282c0.324-2.111 0.955-4.223 1.364-5.673 0.973-3.47 3.581-8.672 4.841-10.429s1.762-2.295 3.592-4.339 0.783-0.637 4.174-3.421c3.384-2.785 7.938-4.78 9.933-5.587 1.995-0.814 5.037-2.301 10.521-2.668s8.794 0.312 11.854 0.667c3.586 0.417 10.435 2.754 10.435 2.754s3.996 1.805 7.093 3.837c1.671 1.004 3.158 2.987 4.676 4.927 2.087 2.668 4.131 6.028 4.425 6.505 0.508 0.814 2.778 4.908 3.256 6.426s1.542 7.117 1.628 7.729 0.937 4.051-2.001 4.253c-3.22 0.22-3.55-3.066-3.758-4.002-0.214-0.942-2.387-8.158-3.14-9.517s-5.264-7.962-7.265-10.135-5.894-4.951-10.141-6.255c-4.063-1.254-10.961-2.479-15.6-2.276-4.076 0.177-5.416 0.459-7.191 1.022-3.629 1.157-6.812 2.993-9.015 4.382-2.203 1.383-5.899 4.357-7.515 6.383-1.916 2.405-5.166 8.354-5.888 11.64-1.334 6.114-0.502 12.014-0.502 12.014s1.506 11.579 9.015 17.521c2.938 2.332 5.336 3.562 12.02 5.379 0.937 0.257 3.978 0.471 7.778 0.496 3.801 0.019 4.957-0.11 7.124-0.869 2.16-0.759 2.852-0.894 4.504-1.75 1.659-0.857 4.505-1.799 7.559-4.811 1.707-1.689 3.837-5.006 4.719-8.329 0.514-1.946 0.189-2.552 0.122-5.104-0.019-0.783-0.092-1.493-0.153-2.167-0.146-1.524-0.397-2.938-0.93-5.178-0.771-3.231-0.539-2.387-1.292-4.449-0.52-1.42-1.107-2.577-1.523-3.25s-0.814-1.12-1.273-1.818c-3.17-4.841-9.431-8.011-15.232-8.201-1.934-0.067-4.314 0.135-6.714 0.894-1.628 0.514-3.268 1.346-4.786 2.271-0.63 0.379-1.23 0.673-1.812 1.132-0.587 0.471-0.942 0.606-1.462 1.157-0.471 0.501-1.114 1.628-1.5 2.136-4.725 6.065-3.629 11.689-3.629 11.689s-0.44 13.207 13.52 14.646c3.525 0.171 9.89-2.087 12.301-4.67 1.481-1.591 1.585-4.437 1.536-6.964-0.036-2.001-1.016-5.551-2.552-6.922-3.342-2.98-6.12-3.072-7.576-3.158-1.94-0.123-4.7 0.477-5.79 4.725-0.38 1.475 0.777 4.547 2.962 4.982 1.879 0.379 3.88 0 4.762 0.128 0.783 0.11 1.971-0.153 1.971 2.313-0.221 4.321-9.633 1.903-9.737 1.812-0.722-0.624-4.969-3.042-5.134-7.631-0.178-4.847 2.099-8.507 6.236-10.576 1.041-0.52 2.956-0.783 4.254-0.838 3.524 0.171 6.021 0.63 8.604 2.02 0.483 0.263 0.979 0.477 1.512 0.838 0.165 0.11 0.802 0.557 0.899 0.618 3.023 2.601 4.284 6.035 4.884 9.499 0.238 1.377 0.232 2.662 0.275 3.678 0.08 1.738-0.122 3.843-1.01 5.82-0.942 2.112-2.638 4.082-5 5.318-2.295 1.2-5.643 3.103-10.264 3.672-2.784 0.342-6.021 0.287-9.773-0.924-10.643-3.439-11.646-15.514-11.646-15.514s-2.173-8.898 3.69-16.916c0.618-0.844 1.322-1.928 2.129-2.735 2.644-2.644 5.012-4.015 7.185-5.166 3.99-2.111 6.916-2.595 7.779-2.595 0.618 0 2.093-0.085 3.824 0.043 1.983 0.141 4.309 0.526 6.065 0.955 1.928 0.471 3.537 0.851 4.792 1.383 1.188 0.508 2.038 1.175 2.968 1.744 1.922 1.169 4.982 3.488 6.017 5.055 1.07 1.628 2.589 3.715 3.77 7.387 0.691 2.154 1.273 5.232 1.983 8.703 1.064 5.196 0.679 10.447-0.502 13.764-0.129 0.355-1.451 4.566-5.637 8.513-4.187 3.954-9.455 6.193-11.016 6.817-1.567 0.625-3.795 2.521-12.332 2.381-7.387-0.123-12.987-2.081-14.651-2.754-1.665-0.673-6.059-2.068-10.833-7.319-4.773-5.257-5.814-8.648-6.573-10.949s-2.191-8.195-2.191-8.195 0.171-0.024-0.171-3.066c-0.129-1.359-0.111-3.133 0.159-4.908zm73.825 59.388c-0.465 0.386-0.937 0.673-1.236 0.857-0.637 0.134-1.021 0.281-1.426 0.312-0.404 0.037-0.783 0.049-1.15 0.049-1.212 0-2.1-0.367-2.791-0.686-0.691-0.318-1.261-0.875-1.622-1.523-0.36-0.649-0.44-1.243-0.471-2.008-0.019-0.446 0.11-0.905 0.22-1.279 0.104-0.379 0.251-0.716 0.447-1.022 0.189-0.306 0.33-0.539 0.691-0.851 0.361-0.306 0.575-0.478 0.979-0.673 0.403-0.202 0.777-0.288 1.315-0.483 0.539-0.196 1.524-0.263 2.785-0.441 0.385-0.098 0.71-0.073 0.979-0.177 0.27-0.104 0.509-0.208 0.717-0.306s0.385-0.214 0.538-0.349 0.294-0.3 0.416-0.49c0.129-0.196 0.215-0.141 0.27-0.336 0.055-0.196 0.024-0.294 0.019-0.496-0.019-0.489-0.043-0.765-0.337-1.107s-0.637-0.833-1.102-0.967c-0.459-0.141-1.23-0.361-1.849-0.361-0.575 0-1.046 0.073-1.646 0.178-0.6 0.104-1.114 0.232-1.549 0.373-0.429 0.147-0.918 0.361-1.561 0.649 0.062-0.435 0.013-1.065 0.062-1.922 1.053-0.306 1.609-0.453 2.387-0.563s1.928-0.178 2.674-0.178c0.796 0 1.292 0.171 1.995 0.337 0.698 0.165 1.586 0.777 1.91 1.261 0.336 0.496 0.648 0.856 0.819 1.334 0.172 0.478 0.404 1.42 0.429 1.958 0.024 0.679 0.062 0.239 0.037 1.842-0.024 1.609 0.073 4.547 0.061 5.912-6e-3 0.833 0.099 0.912 0.318 2.038-0.483-0.019-1.102 0.024-1.401 0.024-0.287 0-0.71-0.043-1.236-0.024v-1.53c7e-3 6e-3 -0.226 0.263-0.691 0.648zm-19.155-3.378c0.336 0.838 0.899 1.659 1.683 2.118s1.701 0.906 2.662 0.906c0.931 0 2.889-0.098 5.013-1.224-0.013 0.159-0.098 0.514-0.153 0.942-0.055 0.435-0.178 0.796-0.214 1.212-0.637 0.166-1.31 0.349-1.903 0.41-0.588 0.061-2.197 0.165-2.644 0.165-0.949 0-2.051-0.196-2.864-0.483-0.814-0.288-1.83-0.832-2.448-1.487-0.624-0.655-1.328-1.31-1.646-2.283s-0.545-1.909-0.581-2.993c-0.056-1.457 0.177-1.946 0.587-3.25 0.404-1.31 1.438-2.252 2.394-2.993 0.954-0.741 3.164-1.371 4.859-1.371 1.248 0 2.711 0.208 3.91 0.575 0.086 0.851 0.116 1.31 0.178 1.861-0.845-0.3-1.616-0.649-2.148-0.753s-1.199-0.202-1.652-0.202c-0.771 0-2.411 0.343-3.011 0.655-0.6 0.318-1.102 0.765-1.512 1.353-0.41 0.581-0.734 1.395-0.894 2.197s-0.221 0.869-0.189 1.702c0.04 1.125 0.23 2.104 0.573 2.943zm-6.898-5.263c-0.019-0.575-0.189-1.224-0.306-1.548-0.116-0.324-0.704-0.924-0.949-1.187-0.244-0.263-0.611-0.312-0.961-0.447-0.349-0.135-0.911-0.166-1.353-0.166-0.354 0-0.802 0.062-1.095 0.147-0.275 0.086-0.551 0.147-0.809 0.331-0.281 0.189-0.532 0.3-0.752 0.575-0.221 0.27-0.398 0.575-0.545 0.912-0.153 0.349-0.159 0.869-0.189 1.432-0.037 0.606 0.03 1.383 0.012 2.252-0.024 0.918-0.024 4.56 0 6.065l0.422 1.346c-0.514-0.018-1.272-0.03-1.529-0.03-0.239 0-0.894 6e-3 -1.457 0.03 0.043-1.224 0.19-0.11 0.196-1.407l0.024-5.594c0-1.108-0.013-2.057-0.043-2.833-0.019-0.508-0.079-0.686-0.184-1.041-0.098-0.355-0.275-0.802-0.532-1.096-0.251-0.293-0.808-0.765-1.15-0.918-0.35-0.153-0.839-0.269-1.268-0.269-0.452 0-0.746 0.049-1.138 0.22s-0.734 0.251-1.059 0.594c-0.318 0.336-0.588 0.373-0.796 0.869-0.208 0.489-0.367 0.385-0.459 1.181-0.098 0.795-0.141 3.69-0.135 5.667 6e-3 1.169 0.019 2.228 0.037 3.183 0.012 0.654 0.281 0.887 0.306 1.444-0.569-0.018-1.212-0.03-1.42-0.03-0.232 0-1.01 6e-3 -1.585 0.03l0.318-1.028c0.012-0.453 0.019-1.922 0.024-2.901l-0.147-8.292c-0.018-0.741-0.416-1.628-0.435-2.014 0.41 0.012 1.335-0.135 1.763-0.294 0.343-0.128 0.729-0.128 1.09-0.141l-6e-3 1.928c0.275-0.557 0.776-0.612 1.01-0.942 0.232-0.324 0.471-0.312 0.856-0.587s0.624-0.288 1.139-0.361c0.63-0.092 1.027-0.123 1.572-0.123 0.38 0 0.753 0.049 1.126 0.147 0.374 0.098 0.717 0.239 1.041 0.417 0.318 0.177 0.594 0.379 0.826 0.605 0.232 0.227 0.483 0.349 0.691 0.741 0.073 0.128 0.637-0.624 1.426-1.083 0.79-0.453 1.72-0.802 2.711-0.802 0.637 0 2.057 0.085 2.662 0.312 0.606 0.227 1.463 0.557 1.836 0.979 0.367 0.429 0.478 0.618 0.809 0.967 0.41 0.435 0.538 1.53 0.562 1.995 0.019 0.477 0.067 1.199 0.067 2.16l6e-3 6.818c0 0.655 0.19 0.734 0.312 1.481-0.471-0.019-1.083-0.031-1.353-0.031-0.281 0-0.955 6e-3 -1.506 0.031 0.367-1.169 0.294-0.771 0.325-1.487l0.024-6.181c-2e-3 -0.87-7e-3 -1.384-0.032-2.026zm-24.217 8.831c-0.459 0.386-0.937 0.667-1.23 0.857-0.637 0.135-1.016 0.282-1.42 0.312-0.404 0.031-0.79 0.049-1.151 0.049-1.206 0-2.093-0.367-2.784-0.686-0.692-0.318-1.255-0.875-1.616-1.524-0.361-0.648-0.441-1.242-0.471-2.007-0.019-0.447 0.116-0.906 0.22-1.279 0.104-0.374 0.251-0.716 0.44-1.022 0.19-0.306 0.331-0.539 0.692-0.844 0.361-0.306 0.575-0.478 0.979-0.673s0.771-0.288 1.31-0.483c0.539-0.19 1.524-0.263 2.778-0.441 0.38-0.098 0.71-0.073 0.979-0.177s0.508-0.208 0.716-0.306 0.386-0.214 0.539-0.349 0.294-0.3 0.417-0.49c0.128-0.196 0.214-0.263 0.269-0.459s0.024-0.294 0.019-0.496c-0.019-0.49-0.043-0.637-0.337-0.985-0.293-0.349-0.636-0.833-1.095-0.967s-1.224-0.361-1.842-0.361c-0.575 0-1.046 0.074-1.646 0.177-0.6 0.104-1.114 0.233-1.548 0.374-0.429 0.147-0.918 0.361-1.561 0.649 0.062-0.441 0.012-1.065 0.062-1.928 1.046-0.3 1.604-0.453 2.38-0.563 0.777-0.11 1.928-0.177 2.668-0.177 0.795 0 1.292 0.171 1.989 0.336 0.704 0.166 1.579 0.777 1.904 1.261 0.336 0.496 0.648 0.851 0.82 1.328 0.165 0.478 0.404 1.42 0.428 1.958 0.025 0.686 0.062 0.239 0.037 1.842-0.025 1.609 0.073 4.547 0.061 5.912-6e-3 0.826 0.098 0.912 0.318 2.038-0.478-0.019-1.096 0.024-1.402 0.024-0.281 0-0.709-0.043-1.236-0.024v-1.53c6e-3 0.011-0.227 0.268-0.686 0.654zm-19.975-3.109c0.422 0.875 0.991 1.438 1.769 1.891 0.777 0.447 1.805 0.839 2.791 0.839 1.139 0 3.213-0.478 4.915-1.328-0.085 0.539-0.263 1.242-0.336 2.075-0.838 0.238-2.222 0.771-2.84 0.856-0.618 0.086-1.23 0.104-1.848 0.104-1.102 0-2.197-0.275-3.084-0.569-0.888-0.3-1.775-0.912-2.424-1.652-0.655-0.735-1.297-1.536-1.603-2.491-0.312-0.948-0.386-1.909-0.429-2.968-0.055-1.475 0.184-2.025 0.637-3.286s1.401-2.179 2.387-2.901c0.979-0.722 2.246-1.083 3.794-1.083 0.802 0 1.713 0.062 2.454 0.325 0.74 0.263 1.365 0.539 1.867 1.071 0.508 0.539 0.93 1.071 1.224 1.86 0.294 0.79 0.361 0.802 0.526 1.72 0.074 0.429 0.129 1.102 0.092 1.438l-10.49 0.061c-0.012 0.545-0.049 0.814-0.037 1.096 0.029 1.045 0.212 2.067 0.635 2.942zm-11.12-10.288c0.318-0.067 1.102-0.177 1.518-0.189l6e-3 2.644c0.3-0.612 0.318-0.575 0.563-0.881 0.239-0.312 0.624-0.667 0.93-0.869 0.312-0.202 0.649-0.49 1.046-0.606 0.392-0.117 0.753-0.282 1.188-0.3 0.343-0.012 0.667-0.061 1.548 0.031 0.887 0.092 1.353 0.294 1.548 0.349 0.019 0.355-0.649 1.989-0.649 1.989s-0.636-0.055-1.211-0.293c-0.551-0.166-0.924-0.166-1.359-0.166-0.514 0-1.12 0.116-1.524 0.312-0.404 0.19-0.79 0.422-1.102 0.814s-0.52 0.796-0.71 1.34c-0.159 0.441-0.104 0.073-0.165 0.765-0.067 0.691-6e-3 7.326 0.049 8.819l0.263 0.857c-0.483-0.019-1.169 0-1.462 0-0.27 0-0.924 0.012-1.469 0.03 0-0.281 0.282-0.673 0.288-0.942 0.067-4.633-0.03-8.213-0.141-11.206l-0.049-1.261-0.44-1.071c0.446-0.05 1.052-0.111 1.334-0.166zm-18.654-6.224c0.533 0 1.322 0.086 2.436 0.062 1.114-0.025 2.105 0 2.546 0.042 1.585 0.147 1.989 0.233 3.078 0.502 0.826 0.196 2.393 1.034 3.091 1.53 0.704 0.496 1.401 1.064 1.97 1.866 0.563 0.802 0.845 1.059 1.224 1.989 0.508 1.261 0.802 2.625 0.851 3.892 0.067 1.732-0.116 3.06-0.618 4.651-0.496 1.591-1.603 2.772-2.668 3.837s-2.234 1.708-3.593 2.044c-1.365 0.336-2.901 0.667-4.596 0.667l-3.991-0.03-3.8-0.092 0.539-1.42-0.043-17.528c-0.012-0.508-0.251-1.034-0.501-1.922 1.198 0.027 3.224-0.09 4.075-0.09zm-17.797 168.64v-128.02c0-2.846 2.313-5.159 5.159-5.159h144.32c2.846 0 5.159 2.313 5.159 5.159v128.02c0 2.846-2.313 5.159-5.159 5.159h-144.32c-2.846 1e-3 -5.159-2.312-5.159-5.158z" fill="#1a1a1a"/>\n     <ellipse cx="493.55" cy="200.22" rx="25.204" ry="25.115" fill="#fff"/>\n     <circle cx="493.51" cy="200.26" r="18.911" fill="#1a1a1a"/>\n     <ellipse cx="444.94" cy="246.54" rx="25.204" ry="25.115" fill="#fff"/>\n     <path d="m445.3 265.55c10.422 0 18.904-8.482 18.904-18.905s-8.482-18.911-18.904-18.911c-10.429 0-18.911 8.482-18.911 18.911s8.482 18.905 18.911 18.905z" fill="#1a1a1a"/>\n     <ellipse cx="492.88" cy="293.45" rx="25.204" ry="25.115" fill="#fff"/>\n     <path d="m492.9 274.71c-10.429 0-18.911 8.482-18.911 18.911 0 10.428 8.482 18.905 18.911 18.905 10.422 0 18.904-8.482 18.904-18.905s-8.482-18.911-18.904-18.911z" fill="#1a1a1a"/>\n     <ellipse cx="541.23" cy="247.25" rx="25.204" ry="25.115" fill="#fff"/>\n     <circle cx="541.11" cy="247.25" r="18.911" fill="#1a1a1a"/>\n     <path d="m78.855 232.89c21.53 0 39.045-17.515 39.045-39.045s-17.515-39.045-39.045-39.045-39.046 17.515-39.046 39.045 17.522 39.045 39.046 39.045z" fill="#1a1a1a"/>\n     <polygon transform="translate(6.8088,8.7805)" points="124.82 332.13 155.94 332.13 155.94 310.78 124.82 310.78 124.82 279.67 103.48 279.67 103.48 310.78 72.364 310.78 72.364 332.13 103.48 332.13 103.48 363.25 124.82 363.25" fill="#1a1a1a"/>\n     <polygon transform="translate(6.8088,8.7805)" points="269.44 444.41 318.12 444.41 293.78 403.06" fill="#1a1a1a"/>\n    </g>\n   </g>\n   <g transform="translate(-1.12)" clip-path="url(#a)" fill="#1a1a1a">\n    <g clip-path="none">\n     <path d="m243.78 111.34c0.838 0 1.818-0.043 2.687-0.135s1.481-0.397 2.167-0.636 1.377-0.643 2.02-1.261c0.637-0.618 1.157-1.316 1.548-2.099 0.392-0.784 0.673-1.659 0.845-2.632 0.171-0.967 0.239-1.952 0.196-2.95-0.042-1.12-0.343-1.953-0.648-2.907-0.306-0.955-0.881-2.154-1.671-2.803-0.869-0.716-1.493-1.224-2.387-1.481-0.894-0.251-2.154-0.637-3.599-0.637-0.881 0-2.05 0.062-2.62 0.128-0.593 0.074-1.138 0.147-1.885 0.159l0.196 17.228c1.162 0.038 2.154 0.026 3.151 0.026z" fill="#1a1a1a"/>\n     <path d="m278.33 102.96c-0.031-0.624 0-0.416-0.073-0.765-0.074-0.343-0.166-0.618-0.349-0.991-0.184-0.367-0.502-0.624-0.795-0.894-0.294-0.27-0.643-0.478-1.053-0.618-0.404-0.147-1.01-0.22-1.475-0.22-0.501 0-0.948 0.153-1.395 0.312s-0.838 0.374-1.175 0.649c-0.336 0.275-0.618 0.6-0.844 0.967-0.227 0.367-0.392 0.729-0.496 1.071-0.042 0.135-0.049 0.147-0.042 0.153 6e-3 6e-3 0.03-0.012-0.025 0.336z" fill="#1a1a1a"/>\n     <path d="m291.54 104.42c-0.3 0.27-0.441 0.343-0.587 0.453-0.147 0.11-0.361 0.171-0.551 0.269-0.19 0.092-0.447 0.116-0.68 0.202-0.226 0.085-1.022 0.11-1.346 0.153-0.691 0.086-1.15 0.159-1.426 0.27-0.6 0.214-0.955 0.275-1.298 0.496-0.342 0.22-0.612 0.551-0.838 0.808-0.227 0.257-0.312 0.49-0.404 0.747-0.104 0.318-0.092 0.655-0.073 0.998 0.018 0.538 0.434 1.132 0.734 1.523 0.293 0.398 0.3 0.257 0.679 0.526 0.379 0.263 0.918 0.404 1.518 0.404 0.374 0 0.759-0.031 1.157-0.092 0.306-0.043 0.637-0.239 1.096-0.392 0.146-0.049 0.489-0.361 0.655-0.422 0 0 0.422-0.342 0.844-1.077 0.422-0.734 0.508-1.952 0.508-1.952z" fill="#1a1a1a"/>\n     <path d="m341.81 104.23c-0.294 0.27-0.44 0.349-0.588 0.459-0.146 0.11-0.379 0.153-0.569 0.251-0.189 0.092-0.428 0.135-0.66 0.22-0.227 0.086-1.022 0.11-1.347 0.153-0.691 0.085-1.15 0.159-1.426 0.269-0.6 0.22-0.961 0.282-1.304 0.496-0.343 0.221-0.618 0.551-0.845 0.808s-0.318 0.489-0.404 0.747c-0.104 0.318-0.085 0.655-0.073 1.003 0.019 0.533 0.435 1.132 0.734 1.524 0.3 0.398 0.3 0.257 0.686 0.526 0.38 0.263 0.918 0.404 1.524 0.404 0.373 0 0.759-0.03 1.162-0.092 0.307-0.042 0.643-0.245 1.096-0.392 0.146-0.049 0.489-0.361 0.655-0.422 0 0 0.422-0.343 0.844-1.077 0.423-0.729 0.509-1.953 0.509-1.953z" fill="#1a1a1a"/>\n     <path d="m119.14 577.38c12.815-43.023 10.985-43.023 17.393-58.582 6.408-15.562 19.223-16.475 35.698-20.135 82.805-10.454 167.09-15.742 247.15-7e-5 16.476 3.66 29.291 4.578 35.698 20.135 6.407 15.564 4.578 15.564 17.394 58.582 12.814 43.018 69.554-66.818 95.184-228.83 25.631-162.01-11.848-224.91-22.222-230.4-10.373-5.49-79.382-20.404-79.382-20.404-18.269-23.911-37.871-41.377-57.039-54.199v181.14c0 53.85-43.807 97.657-97.656 97.657h-21.524c-53.85 0-97.657-43.808-97.657-97.657v-187.17c-22.156 13.194-45.296 32.319-66.624 60.232 0 0-69.009 14.908-79.382 20.404-10.374 5.49-47.853 68.385-22.222 230.4 25.624 162.01 82.375 271.85 95.19 228.83zm373.77-258.73c-13.801 0-25.031-11.223-25.031-25.024s11.23-25.031 25.031-25.031c13.8 0 25.024 11.224 25.024 25.031 1e-3 13.802-11.224 25.024-25.024 25.024zm48.207-96.432c13.801 0 25.03 11.224 25.03 25.031 0 13.801-11.229 25.025-25.03 25.025s-25.031-11.224-25.031-25.025 11.23-25.031 25.031-25.031zm-47.601-46.989c13.801 0 25.031 11.224 25.031 25.031 0 13.8-11.23 25.024-25.031 25.024s-25.03-11.224-25.03-25.024c5e-3 -13.801 11.229-25.031 25.03-25.031zm-48.207 46.383c13.801 0 25.024 11.224 25.024 25.031 0 13.801-11.224 25.025-25.024 25.025s-25.031-11.224-25.031-25.025c6e-3 -13.807 11.236-25.031 25.031-25.031zm-176.43 232.05 28.458-48.342c1.408-2.418 5.056-2.441 6.5-6e-3l28.451 48.342c0.729 1.242 0.759 2.662 0.099 3.818-0.655 1.15-1.91 1.842-3.33 1.842h-56.928c-1.426 0-2.674-0.691-3.335-1.842-0.668-1.156-0.631-2.582 0.085-3.812zm-136.01-171.33c0.12593-2.6961 5.1037 2.1992 4.895 4.8902v26.23l26.231-1.6e-4c2.693-2e-5 4.89 2.191 4.89 4.891v23.801c0 2.697-2.191 4.889-4.89 4.889l-26.231 1.6e-4v26.23c0 2.693-2.19 4.8908-4.895 4.8908h-23.801c-2.692 0-4.89-2.191-4.89-4.891v-26.23h-26.23c-2.693 0-4.89-2.191-4.89-4.889v-23.801c0-2.693 2.191-4.891 4.89-4.891h26.23v-26.23c0-2.699 2.191-4.89 4.89-4.89 7.9337 0 15.867 169.86 23.801 0zm-54.009-133.64c24.902 0 45.166 20.263 45.166 45.166s-20.263 45.166-45.166 45.166-45.166-20.263-45.166-45.166 20.264-45.166 45.166-45.166z" fill="#f2f2f2" stroke="#000" stroke-width="3.2267"/>\n     <path d="m371.79 133.6h-142.4v126.1h142.4zm-8.256 117.31c0 0.985-0.796 1.781-1.781 1.781h-122.33c-0.979 0-1.781-0.796-1.781-1.781v-108.51c0-0.985 0.795-1.781 1.781-1.781h122.33c0.985 0 1.781 0.795 1.781 1.781z" fill="#1a1a1a"/>\n     <path d="m126.54 95.719a205.64 206.43 0 0 0-36.058 116.76 205.64 206.43 0 0 0 205.64 206.43 205.64 206.43 0 0 0 205.64-206.43 205.64 206.43 0 0 0-36.06-116.76z" clip-path="none" fill="none" stroke="#000" stroke-width="7.4"/>\n     <path d="m289.82 316.22h21.523c50.558 0 91.537-40.985 91.537-91.536v-185.14c-45.018-27.974-86.578-30.765-101.38-30.765-3.69 0-5.71 0.171-5.71 0.171s-2.026-0.171-5.71-0.171c-13.733 0-50.551 2.405-91.8 25.153v190.75c0 50.552 40.986 91.537 91.537 91.537zm66.506-218.18 1.806-0.061c0.018-0.379-0.031-1.567-0.031-2.497 0-0.453-0.227-0.869-0.41-1.096 0.82-0.184 2.069-0.563 2.638-0.728-6e-3 1.469 0.099 3.556 0.117 4.321l3.684 0.055c-0.019 0.63 0.049 0.851 0.062 1.419l-1.016-0.122h-2.705l-0.05 8.103-0.024 0.679c0.024 0.723 0.123 1.641 0.282 2.001 0.159 0.361 0.385 0.496 0.679 0.655 0.3 0.159 0.637 0.196 0.949 0.196 0.22 0 0.551-6e-3 0.808-6e-3s0.435-0.019 1.071-0.202c-0.08 0.478-0.209 0.741-0.294 1.536-0.588 0.166-0.857 0.208-1.206 0.245-0.349 0.043-0.679-0.067-0.997-0.067-0.777 0-1.414-0.11-1.903-0.337-0.49-0.22-0.869-0.575-1.139-1.071-0.275-0.49-0.465-1.708-0.496-2.552-6e-3 -0.11-6e-3 -0.3-0.012-0.575 0-0.275-0.019-0.551 0-2.197l-0.056-6.402h-1.774c0.023-0.397 0.023-0.519 0.017-1.297zm-2.932 9.309c-0.135-0.184-0.643-0.618-0.899-0.838-0.257-0.227-0.937-0.557-1.824-0.924-0.899-0.379-2.044-0.74-2.46-1.089-0.416-0.355-1.175-0.759-1.475-1.132s-0.526-0.74-0.68-1.12c-0.153-0.374-0.043-0.943-0.055-1.328-0.024-0.618 0.36-1.254 0.728-1.836 0.361-0.575 0.992-0.9 1.714-1.188 0.723-0.281 1.579-0.428 2.564-0.428 1.102 0 2.166 0.214 3.501 0.471 0.073 0.753-0.099 1.273-7e-3 1.897-0.961-0.636-2.025-0.955-3.072-0.955-0.568 0-1.145 0.086-1.621 0.233-0.478 0.146-1.01 0.624-1.218 0.918-0.215 0.3-0.331 0.581-0.318 0.936 6e-3 0.233 0.079 0.618 0.165 0.833 0.086 0.214 0.648 0.808 0.942 0.937 0.404 0.177 0.245 0.153 0.612 0.232 0.416 0.092 1.444 0.618 2.423 1.083 1.017 0.483 1.946 1.089 2.265 1.408 0.324 0.318 0.637 0.759 0.931 1.438 0.165 0.38 0.257 0.826 0.257 1.145 0 0.551-0.146 0.625-0.129 0.967 0.031 0.673-0.141 0.924-0.514 1.5s-1.071 1.126-1.849 1.444c-0.777 0.318-1.604 0.582-2.576 0.582-0.416 0-1.377 0.049-1.934-6e-3 -0.558-0.049-1.035-0.239-1.427-0.312s-0.643-0.092-1.224-0.232l-0.202-0.985c-6e-3 -0.116-0.263-0.771-0.373-1.396 1.646 0.906 3.385 1.542 4.633 1.542 0.654 0 1.304-0.19 1.75-0.361 0.447-0.171 0.882-0.489 1.096-0.826 0.208-0.336 0.44-0.661 0.521-1.016 0.049-0.196 0.11-0.459 0.061-0.637-0.067-0.211-0.171-0.774-0.306-0.957zm-86.138-55.282c0.324-2.111 0.955-4.223 1.364-5.673 0.973-3.47 3.581-8.672 4.841-10.429s1.762-2.295 3.592-4.339 0.783-0.637 4.174-3.421c3.384-2.785 7.938-4.78 9.933-5.587 1.995-0.814 5.037-2.301 10.521-2.668s8.794 0.312 11.854 0.667c3.586 0.417 10.435 2.754 10.435 2.754s3.996 1.805 7.093 3.837c1.671 1.004 3.158 2.987 4.676 4.927 2.087 2.668 4.131 6.028 4.425 6.505 0.508 0.814 2.778 4.908 3.256 6.426s1.542 7.117 1.628 7.729 0.937 4.051-2.001 4.253c-3.22 0.22-3.55-3.066-3.758-4.002-0.214-0.942-2.387-8.158-3.14-9.517s-5.264-7.962-7.265-10.135-5.894-4.951-10.141-6.255c-4.063-1.254-10.961-2.479-15.6-2.276-4.076 0.177-5.416 0.459-7.191 1.022-3.629 1.157-6.812 2.993-9.015 4.382-2.203 1.383-5.899 4.357-7.515 6.383-1.916 2.405-5.166 8.354-5.888 11.64-1.334 6.114-0.502 12.014-0.502 12.014s1.506 11.579 9.015 17.521c2.938 2.332 5.336 3.562 12.02 5.379 0.937 0.257 3.978 0.471 7.778 0.496 3.801 0.019 4.957-0.11 7.124-0.869 2.16-0.759 2.852-0.894 4.504-1.75 1.659-0.857 4.505-1.799 7.559-4.811 1.707-1.689 3.837-5.006 4.719-8.329 0.514-1.946 0.189-2.552 0.122-5.104-0.019-0.783-0.092-1.493-0.153-2.167-0.146-1.524-0.397-2.938-0.93-5.178-0.771-3.231-0.539-2.387-1.292-4.449-0.52-1.42-1.107-2.577-1.523-3.25s-0.814-1.12-1.273-1.818c-3.17-4.841-9.431-8.011-15.232-8.201-1.934-0.067-4.314 0.135-6.714 0.894-1.628 0.514-3.268 1.346-4.786 2.271-0.63 0.379-1.23 0.673-1.812 1.132-0.587 0.471-0.942 0.606-1.462 1.157-0.471 0.501-1.114 1.628-1.5 2.136-4.725 6.065-3.629 11.689-3.629 11.689s-0.44 13.207 13.52 14.646c3.525 0.171 9.89-2.087 12.301-4.67 1.481-1.591 1.585-4.437 1.536-6.964-0.036-2.001-1.016-5.551-2.552-6.922-3.342-2.98-6.12-3.072-7.576-3.158-1.94-0.123-4.7 0.477-5.79 4.725-0.38 1.475 0.777 4.547 2.962 4.982 1.879 0.379 3.88 0 4.762 0.128 0.783 0.11 1.971-0.153 1.971 2.313-0.221 4.321-9.633 1.903-9.737 1.812-0.722-0.624-4.969-3.042-5.134-7.631-0.178-4.847 2.099-8.507 6.236-10.576 1.041-0.52 2.956-0.783 4.254-0.838 3.524 0.171 6.021 0.63 8.604 2.02 0.483 0.263 0.979 0.477 1.512 0.838 0.165 0.11 0.802 0.557 0.899 0.618 3.023 2.601 4.284 6.035 4.884 9.499 0.238 1.377 0.232 2.662 0.275 3.678 0.08 1.738-0.122 3.843-1.01 5.82-0.942 2.112-2.638 4.082-5 5.318-2.295 1.2-5.643 3.103-10.264 3.672-2.784 0.342-6.021 0.287-9.773-0.924-10.643-3.439-11.646-15.514-11.646-15.514s-2.173-8.898 3.69-16.916c0.618-0.844 1.322-1.928 2.129-2.735 2.644-2.644 5.012-4.015 7.185-5.166 3.99-2.111 6.916-2.595 7.779-2.595 0.618 0 2.093-0.085 3.824 0.043 1.983 0.141 4.309 0.526 6.065 0.955 1.928 0.471 3.537 0.851 4.792 1.383 1.188 0.508 2.038 1.175 2.968 1.744 1.922 1.169 4.982 3.488 6.017 5.055 1.07 1.628 2.589 3.715 3.77 7.387 0.691 2.154 1.273 5.232 1.983 8.703 1.064 5.196 0.679 10.447-0.502 13.764-0.129 0.355-1.451 4.566-5.637 8.513-4.187 3.954-9.455 6.193-11.016 6.817-1.567 0.625-3.795 2.521-12.332 2.381-7.387-0.123-12.987-2.081-14.651-2.754-1.665-0.673-6.059-2.068-10.833-7.319-4.773-5.257-5.814-8.648-6.573-10.949s-2.191-8.195-2.191-8.195 0.171-0.024-0.171-3.066c-0.129-1.359-0.111-3.133 0.159-4.908zm73.825 59.388c-0.465 0.386-0.937 0.673-1.236 0.857-0.637 0.134-1.021 0.281-1.426 0.312-0.404 0.037-0.783 0.049-1.15 0.049-1.212 0-2.1-0.367-2.791-0.686-0.691-0.318-1.261-0.875-1.622-1.523-0.36-0.649-0.44-1.243-0.471-2.008-0.019-0.446 0.11-0.905 0.22-1.279 0.104-0.379 0.251-0.716 0.447-1.022 0.189-0.306 0.33-0.539 0.691-0.851 0.361-0.306 0.575-0.478 0.979-0.673 0.403-0.202 0.777-0.288 1.315-0.483 0.539-0.196 1.524-0.263 2.785-0.441 0.385-0.098 0.71-0.073 0.979-0.177 0.27-0.104 0.509-0.208 0.717-0.306s0.385-0.214 0.538-0.349 0.294-0.3 0.416-0.49c0.129-0.196 0.215-0.141 0.27-0.336 0.055-0.196 0.024-0.294 0.019-0.496-0.019-0.489-0.043-0.765-0.337-1.107s-0.637-0.833-1.102-0.967c-0.459-0.141-1.23-0.361-1.849-0.361-0.575 0-1.046 0.073-1.646 0.178-0.6 0.104-1.114 0.232-1.549 0.373-0.429 0.147-0.918 0.361-1.561 0.649 0.062-0.435 0.013-1.065 0.062-1.922 1.053-0.306 1.609-0.453 2.387-0.563s1.928-0.178 2.674-0.178c0.796 0 1.292 0.171 1.995 0.337 0.698 0.165 1.586 0.777 1.91 1.261 0.336 0.496 0.648 0.856 0.819 1.334 0.172 0.478 0.404 1.42 0.429 1.958 0.024 0.679 0.062 0.239 0.037 1.842-0.024 1.609 0.073 4.547 0.061 5.912-6e-3 0.833 0.099 0.912 0.318 2.038-0.483-0.019-1.102 0.024-1.401 0.024-0.287 0-0.71-0.043-1.236-0.024v-1.53c7e-3 6e-3 -0.226 0.263-0.691 0.648zm-19.155-3.378c0.336 0.838 0.899 1.659 1.683 2.118s1.701 0.906 2.662 0.906c0.931 0 2.889-0.098 5.013-1.224-0.013 0.159-0.098 0.514-0.153 0.942-0.055 0.435-0.178 0.796-0.214 1.212-0.637 0.166-1.31 0.349-1.903 0.41-0.588 0.061-2.197 0.165-2.644 0.165-0.949 0-2.051-0.196-2.864-0.483-0.814-0.288-1.83-0.832-2.448-1.487-0.624-0.655-1.328-1.31-1.646-2.283s-0.545-1.909-0.581-2.993c-0.056-1.457 0.177-1.946 0.587-3.25 0.404-1.31 1.438-2.252 2.394-2.993 0.954-0.741 3.164-1.371 4.859-1.371 1.248 0 2.711 0.208 3.91 0.575 0.086 0.851 0.116 1.31 0.178 1.861-0.845-0.3-1.616-0.649-2.148-0.753s-1.199-0.202-1.652-0.202c-0.771 0-2.411 0.343-3.011 0.655-0.6 0.318-1.102 0.765-1.512 1.353-0.41 0.581-0.734 1.395-0.894 2.197s-0.221 0.869-0.189 1.702c0.04 1.125 0.23 2.104 0.573 2.943zm-6.898-5.263c-0.019-0.575-0.189-1.224-0.306-1.548-0.116-0.324-0.704-0.924-0.949-1.187-0.244-0.263-0.611-0.312-0.961-0.447-0.349-0.135-0.911-0.166-1.353-0.166-0.354 0-0.802 0.062-1.095 0.147-0.275 0.086-0.551 0.147-0.809 0.331-0.281 0.189-0.532 0.3-0.752 0.575-0.221 0.27-0.398 0.575-0.545 0.912-0.153 0.349-0.159 0.869-0.189 1.432-0.037 0.606 0.03 1.383 0.012 2.252-0.024 0.918-0.024 4.56 0 6.065l0.422 1.346c-0.514-0.018-1.272-0.03-1.529-0.03-0.239 0-0.894 6e-3 -1.457 0.03 0.043-1.224 0.19-0.11 0.196-1.407l0.024-5.594c0-1.108-0.013-2.057-0.043-2.833-0.019-0.508-0.079-0.686-0.184-1.041-0.098-0.355-0.275-0.802-0.532-1.096-0.251-0.293-0.808-0.765-1.15-0.918-0.35-0.153-0.839-0.269-1.268-0.269-0.452 0-0.746 0.049-1.138 0.22s-0.734 0.251-1.059 0.594c-0.318 0.336-0.588 0.373-0.796 0.869-0.208 0.489-0.367 0.385-0.459 1.181-0.098 0.795-0.141 3.69-0.135 5.667 6e-3 1.169 0.019 2.228 0.037 3.183 0.012 0.654 0.281 0.887 0.306 1.444-0.569-0.018-1.212-0.03-1.42-0.03-0.232 0-1.01 6e-3 -1.585 0.03l0.318-1.028c0.012-0.453 0.019-1.922 0.024-2.901l-0.147-8.292c-0.018-0.741-0.416-1.628-0.435-2.014 0.41 0.012 1.335-0.135 1.763-0.294 0.343-0.128 0.729-0.128 1.09-0.141l-6e-3 1.928c0.275-0.557 0.776-0.612 1.01-0.942 0.232-0.324 0.471-0.312 0.856-0.587s0.624-0.288 1.139-0.361c0.63-0.092 1.027-0.123 1.572-0.123 0.38 0 0.753 0.049 1.126 0.147 0.374 0.098 0.717 0.239 1.041 0.417 0.318 0.177 0.594 0.379 0.826 0.605 0.232 0.227 0.483 0.349 0.691 0.741 0.073 0.128 0.637-0.624 1.426-1.083 0.79-0.453 1.72-0.802 2.711-0.802 0.637 0 2.057 0.085 2.662 0.312 0.606 0.227 1.463 0.557 1.836 0.979 0.367 0.429 0.478 0.618 0.809 0.967 0.41 0.435 0.538 1.53 0.562 1.995 0.019 0.477 0.067 1.199 0.067 2.16l6e-3 6.818c0 0.655 0.19 0.734 0.312 1.481-0.471-0.019-1.083-0.031-1.353-0.031-0.281 0-0.955 6e-3 -1.506 0.031 0.367-1.169 0.294-0.771 0.325-1.487l0.024-6.181c-2e-3 -0.87-7e-3 -1.384-0.032-2.026zm-24.217 8.831c-0.459 0.386-0.937 0.667-1.23 0.857-0.637 0.135-1.016 0.282-1.42 0.312-0.404 0.031-0.79 0.049-1.151 0.049-1.206 0-2.093-0.367-2.784-0.686-0.692-0.318-1.255-0.875-1.616-1.524-0.361-0.648-0.441-1.242-0.471-2.007-0.019-0.447 0.116-0.906 0.22-1.279 0.104-0.374 0.251-0.716 0.44-1.022 0.19-0.306 0.331-0.539 0.692-0.844 0.361-0.306 0.575-0.478 0.979-0.673s0.771-0.288 1.31-0.483c0.539-0.19 1.524-0.263 2.778-0.441 0.38-0.098 0.71-0.073 0.979-0.177s0.508-0.208 0.716-0.306 0.386-0.214 0.539-0.349 0.294-0.3 0.417-0.49c0.128-0.196 0.214-0.263 0.269-0.459s0.024-0.294 0.019-0.496c-0.019-0.49-0.043-0.637-0.337-0.985-0.293-0.349-0.636-0.833-1.095-0.967s-1.224-0.361-1.842-0.361c-0.575 0-1.046 0.074-1.646 0.177-0.6 0.104-1.114 0.233-1.548 0.374-0.429 0.147-0.918 0.361-1.561 0.649 0.062-0.441 0.012-1.065 0.062-1.928 1.046-0.3 1.604-0.453 2.38-0.563 0.777-0.11 1.928-0.177 2.668-0.177 0.795 0 1.292 0.171 1.989 0.336 0.704 0.166 1.579 0.777 1.904 1.261 0.336 0.496 0.648 0.851 0.82 1.328 0.165 0.478 0.404 1.42 0.428 1.958 0.025 0.686 0.062 0.239 0.037 1.842-0.025 1.609 0.073 4.547 0.061 5.912-6e-3 0.826 0.098 0.912 0.318 2.038-0.478-0.019-1.096 0.024-1.402 0.024-0.281 0-0.709-0.043-1.236-0.024v-1.53c6e-3 0.011-0.227 0.268-0.686 0.654zm-19.975-3.109c0.422 0.875 0.991 1.438 1.769 1.891 0.777 0.447 1.805 0.839 2.791 0.839 1.139 0 3.213-0.478 4.915-1.328-0.085 0.539-0.263 1.242-0.336 2.075-0.838 0.238-2.222 0.771-2.84 0.856-0.618 0.086-1.23 0.104-1.848 0.104-1.102 0-2.197-0.275-3.084-0.569-0.888-0.3-1.775-0.912-2.424-1.652-0.655-0.735-1.297-1.536-1.603-2.491-0.312-0.948-0.386-1.909-0.429-2.968-0.055-1.475 0.184-2.025 0.637-3.286s1.401-2.179 2.387-2.901c0.979-0.722 2.246-1.083 3.794-1.083 0.802 0 1.713 0.062 2.454 0.325 0.74 0.263 1.365 0.539 1.867 1.071 0.508 0.539 0.93 1.071 1.224 1.86 0.294 0.79 0.361 0.802 0.526 1.72 0.074 0.429 0.129 1.102 0.092 1.438l-10.49 0.061c-0.012 0.545-0.049 0.814-0.037 1.096 0.029 1.045 0.212 2.067 0.635 2.942zm-11.12-10.288c0.318-0.067 1.102-0.177 1.518-0.189l6e-3 2.644c0.3-0.612 0.318-0.575 0.563-0.881 0.239-0.312 0.624-0.667 0.93-0.869 0.312-0.202 0.649-0.49 1.046-0.606 0.392-0.117 0.753-0.282 1.188-0.3 0.343-0.012 0.667-0.061 1.548 0.031 0.887 0.092 1.353 0.294 1.548 0.349 0.019 0.355-0.649 1.989-0.649 1.989s-0.636-0.055-1.211-0.293c-0.551-0.166-0.924-0.166-1.359-0.166-0.514 0-1.12 0.116-1.524 0.312-0.404 0.19-0.79 0.422-1.102 0.814s-0.52 0.796-0.71 1.34c-0.159 0.441-0.104 0.073-0.165 0.765-0.067 0.691-6e-3 7.326 0.049 8.819l0.263 0.857c-0.483-0.019-1.169 0-1.462 0-0.27 0-0.924 0.012-1.469 0.03 0-0.281 0.282-0.673 0.288-0.942 0.067-4.633-0.03-8.213-0.141-11.206l-0.049-1.261-0.44-1.071c0.446-0.05 1.052-0.111 1.334-0.166zm-18.654-6.224c0.533 0 1.322 0.086 2.436 0.062 1.114-0.025 2.105 0 2.546 0.042 1.585 0.147 1.989 0.233 3.078 0.502 0.826 0.196 2.393 1.034 3.091 1.53 0.704 0.496 1.401 1.064 1.97 1.866 0.563 0.802 0.845 1.059 1.224 1.989 0.508 1.261 0.802 2.625 0.851 3.892 0.067 1.732-0.116 3.06-0.618 4.651-0.496 1.591-1.603 2.772-2.668 3.837s-2.234 1.708-3.593 2.044c-1.365 0.336-2.901 0.667-4.596 0.667l-3.991-0.03-3.8-0.092 0.539-1.42-0.043-17.528c-0.012-0.508-0.251-1.034-0.501-1.922 1.198 0.027 3.224-0.09 4.075-0.09zm-17.797 168.64v-128.02c0-2.846 2.313-5.159 5.159-5.159h144.32c2.846 0 5.159 2.313 5.159 5.159v128.02c0 2.846-2.313 5.159-5.159 5.159h-144.32c-2.846 1e-3 -5.159-2.312-5.159-5.158z" fill="#1a1a1a"/>\n     <ellipse cx="444.94" cy="246.54" rx="25.204" ry="25.115" fill="#fff"/>\n     <path d="m445.3 265.55c10.422 0 18.904-8.482 18.904-18.905s-8.482-18.911-18.904-18.911c-10.429 0-18.911 8.482-18.911 18.911s8.482 18.905 18.911 18.905z" fill="#1a1a1a"/>\n     <ellipse cx="492.88" cy="293.45" rx="25.204" ry="25.115" fill="#fff"/>\n     <path d="m492.9 274.71c-10.429 0-18.911 8.482-18.911 18.911 0 10.428 8.482 18.905 18.911 18.905 10.422 0 18.904-8.482 18.904-18.905s-8.482-18.911-18.904-18.911z" fill="#1a1a1a"/>\n     <ellipse cx="541.23" cy="247.25" rx="25.204" ry="25.115" fill="#fff"/>\n     <circle cx="541.11" cy="247.25" r="18.911" fill="#1a1a1a"/>\n     <path d="m78.855 232.89c21.53 0 39.045-17.515 39.045-39.045s-17.515-39.045-39.045-39.045-39.046 17.515-39.046 39.045 17.522 39.045 39.046 39.045z" fill="#1a1a1a"/>\n     <polygon transform="translate(6.8088,8.7805)" points="124.82 279.67 103.48 279.67 103.48 310.78 72.364 310.78 72.364 332.13 103.48 332.13 103.48 363.25 124.82 363.25 124.82 332.13 155.94 332.13 155.94 310.78 124.82 310.78" fill="#1a1a1a"/>\n     <polygon transform="translate(6.8088,8.7805)" points="318.12 444.41 293.78 403.06 269.44 444.41" fill="#1a1a1a"/>\n     <polygon transform="translate(6.8088,8.7805)" points="124.82 332.13 155.94 332.13 155.94 310.78 124.82 310.78 124.82 279.67 103.48 279.67 103.48 310.78 72.364 310.78 72.364 332.13 103.48 332.13 103.48 363.25 124.82 363.25" fill="#1a1a1a"/>\n     <ellipse cx="409.18" cy="244.08" rx="25.204" ry="25.115" fill="#fff"/>\n    </g>\n   </g>\n   <path d="m444.19 415.9c23.103 0 41.897-18.795 41.897-41.897s-18.794-41.897-41.897-41.897c-23.103 0-41.898 18.795-41.898 41.897s18.802 41.897 41.898 41.897z" stroke-width=".86172"/>\n   <path d="m444.19 412.57c21.38 0 38.773-17.297 38.773-38.56 0-21.263-17.393-38.56-38.773-38.56-21.38 0-38.775 17.297-38.775 38.56 0 21.263 17.4 38.56 38.775 38.56z" fill="#ececec" stroke-width=".86172"/>\n   <path d="m444.19 407.65c18.553 0 33.646-15.093 33.646-33.646 0-18.553-15.093-33.646-33.646-33.646-18.553 0-33.647 15.093-33.647 33.646 0 18.553 15.099 33.646 33.647 33.646z" fill="#333" stroke="#000" stroke-width="2.9069" data-button="button-11"/>\n   <path d="m78.499 243.34c26.81 0 48.62-21.811 48.62-48.621s-21.81-48.621-48.62-48.621-48.622 21.811-48.622 48.621 21.819 48.621 48.622 48.621z"/>\n   <path d="m78.499 239.47c24.811 0 44.995-20.073 44.995-44.748s-20.184-44.748-44.995-44.748-44.997 20.073-44.997 44.748 20.192 44.748 44.997 44.748z" fill="#ececec"/>\n   <path d="m78.499 233.76c21.53 0 39.045-17.515 39.045-39.045s-17.515-39.045-39.045-39.045-39.046 17.515-39.046 39.045 17.522 39.045 39.046 39.045z" fill="#333" stroke="#000" stroke-width="2.9069" data-button="button-10"/>\n   <path d="m491.78 320.33c14.996 0 27.196-12.2 27.196-27.196s-12.199-27.196-27.196-27.196c-14.996 0-27.197 12.2-27.197 27.196s12.204 27.196 27.197 27.196z"/>\n   <path d="m491.78 317.32c13.408 0 24.317-10.848 24.317-24.183s-10.908-24.183-24.317-24.183c-13.409 0-24.317 10.848-24.317 24.183s10.912 24.183 24.317 24.183z" fill="#ececec"/>\n   <path d="m491.78 314.23c11.635 0 21.101-9.4653 21.101-21.101 0-11.635-9.4653-21.101-21.101-21.101-11.635 0-21.101 9.4653-21.101 21.101 0 11.635 9.4692 21.101 21.101 21.101z" fill="#a02c2c" data-button="button-0"/>\n   <path d="m539.97 273.92c14.738 0 26.727-11.99 26.727-26.728s-11.989-26.728-26.727-26.728c-14.738 0-26.728 11.99-26.728 26.728s11.994 26.728 26.728 26.728z"/>\n   <path d="m539.97 270.95c13.177 0 23.898-10.661 23.898-23.767 0-13.105-10.72-23.767-23.898-23.767s-23.899 10.661-23.899 23.767c0 13.105 10.724 23.767 23.899 23.767z" fill="#ececec"/>\n   <path d="m539.97 267.92c11.435 0 20.738-9.3024 20.738-20.738 0-11.435-9.3024-20.738-20.738-20.738-11.435 0-20.738 9.3024-20.738 20.738 0 11.435 9.3062 20.738 20.738 20.738z" fill="#06f" data-button="button-1"/>\n   <path d="m493.22 227.32c14.738 0 26.727-11.99 26.727-26.728s-11.989-26.728-26.727-26.728c-14.738 0-26.728 11.99-26.728 26.728s11.994 26.728 26.728 26.728z"/>\n   <path d="m493.22 224.36c13.177 0 23.898-10.661 23.898-23.767 0-13.105-10.72-23.767-23.898-23.767s-23.899 10.661-23.899 23.767c0 13.105 10.724 23.767 23.899 23.767z" fill="#ececec"/>\n   <path d="m493.22 221.33c11.435 0 20.738-9.3024 20.738-20.738 0-11.435-9.3024-20.738-20.738-20.738-11.435 0-20.738 9.3024-20.738 20.738 0 11.435 9.3062 20.738 20.738 20.738z" fill="#1ccb1c" data-button="button-3"/>\n   <path d="m444.79 268.33c14.738 0 26.727-11.99 26.727-26.728s-11.989-26.728-26.727-26.728c-14.738 0-26.728 11.99-26.728 26.728s11.994 26.728 26.728 26.728z"/>\n   <path d="m444.79 265.37c13.177 0 23.898-10.661 23.898-23.767 0-13.105-10.72-23.767-23.898-23.767s-23.899 10.661-23.899 23.767c0 13.105 10.724 23.767 23.899 23.767z" fill="#fff"/>\n   <path d="m444.79 262.34c11.435 0 20.738-9.3024 20.738-20.738 0-11.435-9.3024-20.738-20.738-20.738-11.435 0-20.738 9.3024-20.738 20.738 0 11.435 9.3062 20.738 20.738 20.738z" fill="#fa9900" data-button="button-2"/>\n   <polygon transform="matrix(1.7101,0,0,1.7148,-202.93,-294.51)" points="269.44 444.41 318.12 444.41 293.78 403.06" fill="#fff" stroke="#000" stroke-linecap="round" stroke-linejoin="round" stroke-width="2.0439"/>\n   <g transform="matrix(1.2116 0 0 1.2405 -56.477 -89.866)" fill="#333" stroke="#000" stroke-width="2.3711">\n    <polygon points="269.44 444.41 318.12 444.41 293.78 403.06" fill="#333" stroke="#000" stroke-width="2.3711" data-button="button-9"/>\n   </g>\n   <text x="484.67032" y="210.79993" fill="#000000" fill-opacity=".75" font-family="sans-serif" font-size="40px" letter-spacing="0px" stroke-width="1.8197" word-spacing="0px" style="line-height:1.25" xml:space="preserve"><tspan x="484.67032" y="210.79993" fill="#000000" fill-opacity=".75" font-family="sans-serif" font-size="28px" stroke-width="1.8197" style="font-variant-caps:normal;font-variant-east-asian:normal;font-variant-ligatures:normal;font-variant-numeric:normal">Y</tspan></text>\n   <text x="435.22971" y="251.80605" fill="#000000" fill-opacity=".75" font-family="sans-serif" font-size="40px" letter-spacing="0px" stroke-width="1.8197" word-spacing="0px" style="line-height:1.25" xml:space="preserve"><tspan x="435.22971" y="251.80605" fill="#000000" fill-opacity=".75" font-family="sans-serif" font-size="28px" stroke-width="1.8197" style="font-variant-caps:normal;font-variant-east-asian:normal;font-variant-ligatures:normal;font-variant-numeric:normal">X</tspan></text>\n   <text x="531.4353" y="257.39502" fill="#000000" fill-opacity=".75" font-family="sans-serif" font-size="40px" letter-spacing="0px" stroke-width="1.8197" word-spacing="0px" style="line-height:1.25" xml:space="preserve"><tspan x="531.4353" y="257.39502" fill="#000000" fill-opacity=".75" font-family="sans-serif" font-size="28px" stroke-width="1.8197" style="font-variant-caps:normal;font-variant-east-asian:normal;font-variant-ligatures:normal;font-variant-numeric:normal">B</tspan></text>\n   <text x="482.2132" y="303.34509" fill="#000000" fill-opacity=".75" font-family="sans-serif" font-size="40px" letter-spacing="0px" stroke-width="1.8197" word-spacing="0px" style="line-height:1.25" xml:space="preserve"><tspan x="482.2132" y="303.34509" fill="#000000" fill-opacity=".75" font-family="sans-serif" font-size="28px" stroke-width="1.8197" style="font-variant-caps:normal;font-variant-east-asian:normal;font-variant-ligatures:normal;font-variant-numeric:normal">A</tspan></text>\n   <path d="m173.25 347.86v-35.975h-35.335v-35.719h-36.421v35.719h-35.602v35.975h35.602v35.944h36.421v-35.944z" fill="#fff" stroke="#000" stroke-linecap="round" stroke-linejoin="round" stroke-miterlimit="6.6" stroke-width="3.1826"/>\n   <g fill="#333" stroke="#000" stroke-width="2.0348" data-button="dpad-0">\n    <polygon transform="matrix(1.1296 0 0 1.1296 -9.6574 -33.438)" points="103.48 363.25 124.82 363.25 124.82 332.13 155.94 332.13 155.94 310.78 124.82 310.78 124.82 279.67 103.48 279.67 103.48 310.78 72.364 310.78 72.364 332.13 103.48 332.13" fill="#333" stroke="#000" stroke-width="1.8014"/>\n   </g>\n   <path d="m246.43 423.18c9.522 0 17.268-7.7465 17.268-17.268 0-9.522-7.7461-17.268-17.268-17.268-9.522 0-17.269 7.7465-17.269 17.268 0 9.522 7.7493 17.268 17.269 17.268z" stroke-width=".63497"/>\n   <path d="m246.43 420.5c8.0934 0 14.678-6.5481 14.678-14.597 0-8.0492-6.5842-14.597-14.678-14.597-8.0937 0-14.678 6.5481-14.678 14.597 0 8.0492 6.5869 14.597 14.678 14.597z" fill="#ececec" stroke-width=".60362"/>\n   <path d="m246.43 418.33c6.8504 0 12.424-5.5729 12.424-12.424 0-6.8504-5.5729-12.424-12.424-12.424-6.8504 0-12.424 5.5729-12.424 12.424 0 6.8504 5.5752 12.424 12.424 12.424z" fill="#333" stroke="#000" stroke-width="1.4535" data-button="button-8"/>\n   <path d="m352.5 423.18c9.522 0 17.268-7.7465 17.268-17.268 0-9.522-7.7461-17.268-17.268-17.268-9.522 0-17.269 7.7465-17.269 17.268 0 9.522 7.7493 17.268 17.269 17.268z" stroke-width=".63497"/>\n   <path d="m352.5 420.5c8.0934 0 14.678-6.5481 14.678-14.597 0-8.0492-6.5842-14.597-14.678-14.597-8.0937 0-14.678 6.5481-14.678 14.597 0 8.0492 6.5869 14.597 14.678 14.597z" fill="#ececec" stroke-width=".60362"/>\n   <path d="m352.5 418.33c6.8504 0 12.424-5.5729 12.424-12.424 0-6.8504-5.5729-12.424-12.424-12.424-6.8504 0-12.424 5.5729-12.424 12.424 0 6.8504 5.5752 12.424 12.424 12.424z" fill="#333" stroke="#000" stroke-width="1.4535" data-button="button-16"/>\n   <text x="281.13306" y="481.78577" fill="#000000" font-family="sans-serif" font-size="40px" letter-spacing="0px" stroke-width="1.8191" word-spacing="0px" style="line-height:1.25" xml:space="preserve"><tspan x="281.13306" y="481.78577" fill="#000000" font-family="sans-serif" font-size="11.628px" stroke-width="1.8191" style="font-variant-caps:normal;font-variant-east-asian:normal;font-variant-ligatures:normal;font-variant-numeric:normal">START</tspan></text>\n   <text x="224.14134" y="384.38974" fill="#000000" font-family="sans-serif" font-size="40px" letter-spacing="0px" stroke-width="1.8191" word-spacing="0px" style="line-height:1.25" xml:space="preserve"><tspan x="224.14134" y="384.38974" fill="#000000" font-family="sans-serif" font-size="11.628px" stroke-width="1.8191" style="font-variant-caps:normal;font-variant-east-asian:normal;font-variant-ligatures:normal;font-variant-numeric:normal">SELECT</tspan></text>\n   <text x="334.6618" y="384.38974" fill="#000000" font-family="sans-serif" font-size="40px" letter-spacing="0px" stroke-width="1.8191" word-spacing="0px" style="line-height:1.25" xml:space="preserve"><tspan x="334.6618" y="384.38974" fill="#000000" font-family="sans-serif" font-size="11.628px" stroke-width="1.8191" style="font-variant-caps:normal;font-variant-east-asian:normal;font-variant-ligatures:normal;font-variant-numeric:normal">HOME</tspan></text>\n  </g>\n </g>\n <g transform="translate(-260.34 -473.69)">\n  <g cv-if = "a">\n  \t<path d="m591.98 611.79 68.946 20.079" fill="none" stroke="#000" stroke-width=".5"/>\n  </g>\n  <g cv-if = "x">\n  \t<path d="m576.4 592.1 84.526 24.701" fill="none" stroke="#000" stroke-width=".5"/>\n  </g>\n  <g cv-if = "y">\n  \t<path d="m595.33 575.12 65.6 18.183" fill="none" stroke="#000" stroke-width=".5"/>\n  </g>\n  <g cv-if = "b">\n  \t<path d="m609.93 591.65 50.998 15.219" fill="none" stroke="#000" stroke-width=".5"/>\n  </g>\n  <text x="662.21619" y="608.90283" fill="#000000" font-family="sans-serif" font-size="40px" letter-spacing="0px" word-spacing="0px" style="line-height:1.25" xml:space="preserve"><tspan x="662.21619" y="608.90283" font-family="sans-serif" font-size="6px" style="font-variant-caps:normal;font-variant-east-asian:normal;font-variant-ligatures:normal;font-variant-numeric:normal">[[b]]</tspan></text>\n  <text x="662.5141" y="634.3454" fill="#000000" font-family="sans-serif" font-size="40px" letter-spacing="0px" word-spacing="0px" style="line-height:1.25" xml:space="preserve"><tspan x="662.5141" y="634.3454" font-family="sans-serif" font-size="6px" style="font-variant-caps:normal;font-variant-east-asian:normal;font-variant-ligatures:normal;font-variant-numeric:normal">[[a]]</tspan></text>\n  <text x="662.27887" y="619.60553" fill="#000000" font-family="sans-serif" font-size="40px" letter-spacing="0px" word-spacing="0px" style="line-height:1.25" xml:space="preserve"><tspan x="662.27887" y="619.60553" font-family="sans-serif" font-size="6px" style="font-variant-caps:normal;font-variant-east-asian:normal;font-variant-ligatures:normal;font-variant-numeric:normal">[[x]]</tspan></text>\n  <text x="661.63348" y="595.76831" fill="#000000" font-family="sans-serif" font-size="40px" letter-spacing="0px" word-spacing="0px" style="line-height:1.25" xml:space="preserve"><tspan x="661.63348" y="595.76831" font-family="sans-serif" font-size="6px" style="font-variant-caps:normal;font-variant-east-asian:normal;font-variant-ligatures:normal;font-variant-numeric:normal">[[y]]</tspan></text>\n  <g cv-if = "r1">\n  \t<path d="m605.15 544.5 53.163 13.403" fill="none" stroke="#000" stroke-width=".5"/>\n  </g>\n  <text x="659.01825" y="560.35986" fill="#000000" font-family="sans-serif" font-size="40px" letter-spacing="0px" word-spacing="0px" style="line-height:1.25" xml:space="preserve"><tspan x="659.01825" y="560.35986" font-family="sans-serif" font-size="6px" style="font-variant-caps:normal;font-variant-east-asian:normal;font-variant-ligatures:normal;font-variant-numeric:normal">[[r1]]</tspan></text>\n  <g cv-if = "ra">\n  <path d="m582.92 636.21 78.008 22.519" fill="none" stroke="#000" stroke-width=".5"/>\n  </g>\n  <text x="664.28082" y="661.3197" fill="#000000" font-family="sans-serif" font-size="40px" letter-spacing="0px" word-spacing="0px" style="line-height:1.25" xml:space="preserve"><tspan x="664.28082" y="661.3197" font-family="sans-serif" font-size="6px" style="font-variant-caps:normal;font-variant-east-asian:normal;font-variant-ligatures:normal;font-variant-numeric:normal">[[ra]]</tspan></text>\n  <g cv-if = "l1">\n  \t<path d="m426.92 544.08-53.163 13.403" fill="none" stroke="#000" stroke-width=".5"/>\n  </g>\n  <text x="347.5455" y="559.51819" fill="#000000" font-family="sans-serif" font-size="40px" letter-spacing="0px" word-spacing="0px" style="line-height:1.25" xml:space="preserve"><tspan x="347.5455" y="559.51819" font-family="sans-serif" font-size="6px" style="font-variant-caps:normal;font-variant-east-asian:normal;font-variant-ligatures:normal;font-variant-numeric:normal">[[l1]]</tspan></text>\n  <g cv-if = "dpad">\n\t<path d="m438.09 626.74-67.043 18.472" fill="none" stroke="#000" stroke-width=".5"/>\n  </g>\n  <text x="352.86777" y="647.30273" fill="#000000" font-family="sans-serif" font-size="40px" letter-spacing="0px" word-spacing="0px" style="line-height:1.25" xml:space="preserve"><tspan x="352.86777" y="647.30273" font-family="sans-serif" font-size="6px" style="font-variant-caps:normal;font-variant-east-asian:normal;font-variant-ligatures:normal;font-variant-numeric:normal">[[dpad]]</tspan></text>\n  <g cv-if = "start">\n  \t<path d="m507.06 652.49-115.69 44.146" fill="none" stroke="#000" stroke-width=".5"/>\n  </g>\n  <text x="371.43689" y="698.36121" fill="#000000" font-family="sans-serif" font-size="40px" letter-spacing="0px" word-spacing="0px" style="line-height:1.25" xml:space="preserve"><tspan x="371.43689" y="698.36121" font-family="sans-serif" font-size="6px" style="font-variant-caps:normal;font-variant-east-asian:normal;font-variant-ligatures:normal;font-variant-numeric:normal">[[start]]</tspan></text>\n </g>\n</svg>\n'}),require.register("controller/gamepad-config.html",function(t,e,r){r.exports='<div class = "gamepad-config [[animation]] input-[[type]]">\n\t<span>[[text]]</span>\n\t<div>[[caption]]</div>\n\t\x3c!-- <div class = "buttons">\n\t\t<button cv-on = "click:swap">next</button>\n\t\t<button cv-on = "click:exit">exit</button>\n\t</div> --\x3e\n</div>\n'}),require.register("controller/gc-input.svg",function(t,e,r){r.exports='<?xml version="1.0" encoding="UTF-8"?>\n<svg width="512" height="288" version="1.0" xmlns="http://www.w3.org/2000/svg"><g transform="translate(-260.34 -473.69)"><g transform="translate(134.82 68.294)"><g transform="matrix(.06485 0 0 .06485 172.41 452.75)" stroke-width="15.42"><g stroke-width="15.42" data-button="button-6"><g id="Shape_13_copy_1_" enable-background="new    " fill="#2d1650"><g id="Shape_13_copy" fill="#2d1650" stroke-width="15.42"><g fill="#2d1650" stroke-width="15.42"><ellipse cx="2016" cy="596" rx="394.32" ry="416.56" fill="#2d1650" stroke-width="15.42"/></g></g></g><g id="Shape_13_1_" enable-background="new    "><g stroke-width="15.42"><g stroke-width="15.42"><ellipse cx="2016" cy="600" rx="381.55" ry="410.27" fill="#eee" stroke-width="207.68"/></g></g></g></g><g stroke-width="15.42" data-button="button-7"><g id="Shape_13_copy_2_1_" enable-background="new    " fill="#2d1650"><g fill="#2d1650" stroke-width="15.42"><g fill="#2d1650" stroke-width="15.42"><ellipse cx="4444" cy="597" rx="394.32" ry="416.56" fill="#2d1650" stroke-width="15.42"/></g></g></g><g id="Shape_13_copy_3_1_" enable-background="new    "><g stroke-width="15.42"><g stroke-width="15.42"><ellipse cx="4444" cy="601" rx="381.55" ry="410.27" fill="#eee" stroke-width="207.68"/></g></g></g></g><text transform="matrix(.68482 0 0 .68587 845.52 -545.07)" fill="#000000" fill-opacity=".75" font-family="sans-serif" font-size="144px" letter-spacing="0px" stroke-width="22.5" word-spacing="0px" style="line-height:1.25;shape-inside:url(#rect1879-3-6-5-2);white-space:pre" xml:space="preserve"><tspan x="5247.6191" y="1275.3691"><tspan stroke-width="22.5">R</tspan></tspan></text><g stroke-width="15.42" data-button="button-5"><g id="Shape_14_copy_1_" transform="translate(63.785 -10.951)" enable-background="new    "><g id="Shape_14_copy" stroke-width="15.42"><g stroke-width="15.42"><path d="m4875.8 533.15c-9.153-20.295-141.3-109.76-312.96-156.14-171.66-46.381-446.05-75.91-470.47-66.579-24.426 9.331-20.68 96.067-20.68 96.067l755.06 236.36c0 1e-3 58.209-89.412 49.057-109.71z" fill="#490094" stroke-width="207.68"/></g></g></g><g id="Shape_14_1_" transform="translate(63.785 -10.951)" enable-background="new    "><g stroke-width="15.42"><g stroke-width="15.42"><path d="m4862.8 543.29c-8.855-19.636-136.71-106.2-302.8-151.08s-431.57-73.446-455.2-64.418-20.008 92.95-20.008 92.95l730.55 228.69s56.319-86.51 47.464-106.15z" fill="#5600ae" stroke-width="207.68"/></g></g></g></g><g stroke-width="15.42" data-button="button-4"><g transform="matrix(-1 0 0 1 6378.1 -10.674)" enable-background="new    "><g stroke-width="15.42"><g stroke-width="15.42"><path d="m4875.8 533.15c-9.153-20.295-141.3-109.76-312.96-156.14-171.66-46.381-446.05-75.91-470.47-66.579-24.426 9.331-20.68 96.067-20.68 96.067l755.06 236.36c0 1e-3 58.209-89.412 49.057-109.71z" fill="#490094" stroke-width="207.68"/></g></g></g><g transform="matrix(-1 0 0 1 6378.1 -10.674)" enable-background="new    "><g stroke-width="15.42"><g stroke-width="15.42"><path d="m4862.8 543.29c-8.855-19.636-136.71-106.2-302.8-151.08s-431.57-73.446-455.2-64.418-20.008 92.95-20.008 92.95l730.55 228.69s56.319-86.51 47.464-106.15z" fill="#5600ae" stroke-width="207.68"/></g></g></g></g><g id="Shape_15_copy_2_1_" enable-background="new    " stroke-width="15.42"><g fill="#2d1650" stroke-width="15.42"><g fill="#2d1650" stroke-width="15.42"><path d="m3227.9 120.17c-783.43 0-1504.4 382.76-1504.4 382.76l447.27 1463.6s200.02-494.06 1045-494.06c807.36 0 1061.2 473.81 1061.2 473.81l423.57-1451.3s-688.92-374.76-1472.6-374.76z" fill="#2d1650" stroke-width="15.42"/></g></g></g><g id="Shape_15_copy_3_1_" enable-background="new    " fill="#442178" stroke-width="15.42"><g fill="#442178" stroke-width="15.42"><g fill="#442178" stroke-width="15.42"><path d="m3228 136c-767.99 0-1504 388-1504 388l460 1390s194.99-457.37 1044-457.37c779.87 0 1036 437.37 1036 437.37l436-1378s-719.98-380-1472-380z" fill="#442178" stroke-width="15.42"/></g></g></g><text transform="matrix(.49661 0 0 .49737 -1067.6 -73.788)" fill="#000000" fill-opacity=".75" font-family="sans-serif" font-size="144px" letter-spacing="0px" stroke-width="31.027" word-spacing="0px" style="line-height:1.25;shape-inside:url(#rect1879-3-6-5-2-3-7);white-space:pre" xml:space="preserve"><tspan x="5247.6191" y="1275.3691"><tspan stroke-width="31.027">ZL</tspan></tspan></text><g id="Shape_12_1_" enable-background="new    " fill="#2d1650" stroke-width="15.42"><g fill="#2d1650" stroke-width="15.42"><g fill="#2d1650" stroke-width="15.42"><path d="m1376.2 941.81c-30.5 123.8-80.063 786.99-61.001 1136.3 19.063 349.28 53.376 702.99 282.13 725.09s244-265.28 270.69-371.39c26.688-106.11 163.94-711.83 163.94-711.83s-625.25-901.94-655.75-778.15z" fill="#2d1650" stroke-width="15.42"/></g></g></g><g id="Shape_12_copy_5_1_" enable-background="new    " fill="#442178" stroke-width="15.42"><g fill="#442178" stroke-width="15.42"><g fill="#442178" stroke-width="15.42"><path d="m1387.9 966.73c-28.94 121.04-75.969 769.48-57.881 1111s50.646 687.34 267.7 708.96c217.06 21.614 231.52-259.38 256.85-363.12 25.322-103.75 155.56-695.99 155.56-695.99s-593.28-881.87-622.22-760.83z" fill="#442178" stroke-width="15.42"/></g></g></g><g id="Shape_12_copy_6_1_" enable-background="new    " fill="#2d1650" stroke-width="15.42"><g fill="#2d1650" stroke-width="15.42"><g fill="#2d1650" stroke-width="15.42"><path d="m5071.2 945.81c-31.246-123.8-671.8 778.15-671.8 778.15s140.61 605.72 167.95 711.83c27.34 106.11 42.963 393.5 277.31 371.39s269.5-375.81 289.03-725.09-31.246-1012.5-62.493-1136.3z" fill="#2d1650" stroke-width="15.42"/></g></g></g><g id="Shape_12_copy_7_1_" enable-background="new    " fill="#442178" stroke-width="15.42"><g fill="#442178" stroke-width="15.42"><g fill="#442178" stroke-width="15.42"><path d="m5059.2 970.73c-29.648-121.04-637.45 760.83-637.45 760.83s133.42 592.24 159.36 695.99c25.942 103.75 40.768 384.74 263.13 363.12 222.36-21.615 255.72-367.45 274.25-708.96 18.531-341.51-29.649-989.94-59.297-1111z" fill="#442178" stroke-width="15.42"/></g></g></g><g id="Shape_12_copy_3_1_" enable-background="new    " fill="#2d1650" stroke-width="15.42"><g fill="#2d1650" stroke-width="15.42"><g fill="#2d1650" stroke-width="15.42"><path d="m3049.2 1753.4c-122.76-188.31-176.88-182.53-252.72-305.76-97.796-158.92 14.472-476-199.59-766.22-174.59-236.7-591.61-384.65-941.21-138.62-373.08 262.56-355.83 699.77-175.22 973.89 189.64 287.82 445.08 264.06 582.85 407.41 85.999 89.487 101.86 265.09 203.89 370.36 143.79 148.36 380.24 225.33 639.15 61.496 215.72-136.5 255.61-429.57 142.84-602.55z" fill="#2d1650" stroke-width="15.42"/></g></g></g><g id="Shape_12_copy_1_" enable-background="new    " fill="#442178" stroke-width="15.42"><g id="Shape_12_copy" fill="#442178" stroke-width="15.42"><g fill="#442178" stroke-width="15.42"><path d="m3044 1772c-111.08-187.17-185.56-195.03-260-316-96-156-1.5-502.6-192-760-171.76-232.08-571.05-373.11-920-140-362.3 242.03-364 668-172 956 188.32 282.48 434.64 257.5 568 400 108.42 115.84 111.85 264.14 196 356 154.8 168.97 400.25 242.11 644 68 224-160 208.51-441.82 136-564z" fill="#442178" stroke-width="15.42"/></g></g></g><g id="Shape_12_copy_4_1_" enable-background="new    " fill="#2d1650" stroke-width="15.42"><g fill="#2d1650" stroke-width="15.42"><g fill="#2d1650" stroke-width="15.42"><path d="m4789.3 542.8c-349.6-246.03-766.62-98.079-941.21 138.62-214.06 290.21-101.8 607.3-199.59 766.22-75.836 123.24-129.96 117.45-252.72 305.76-112.77 172.98-72.872 466.05 142.84 602.55 258.9 163.84 495.36 86.859 639.15-61.496 102.03-105.28 117.89-280.87 203.89-370.36 137.77-143.35 393.21-119.59 582.85-407.41 180.61-274.12 197.86-711.33-175.22-973.89z" fill="#2d1650" stroke-width="15.42"/></g></g></g><g id="Shape_12_copy_2_1_" enable-background="new    " fill="#442178" stroke-width="15.42"><g fill="#442178" stroke-width="15.42"><g fill="#442178" stroke-width="15.42"><path d="m4773 556c-348.95-233.11-748.24-92.075-920 140-190.5 257.4-96 604-192 760-74.444 120.97-148.92 128.83-260 316-72.508 122.18-88 404 136 564 243.75 174.11 489.2 100.97 644-68 84.154-91.858 87.58-240.16 196-356 133.36-142.5 379.68-117.52 568-400 192-288 190.3-713.97-172-956z" fill="#442178" stroke-width="15.42"/></g></g></g><g fill="#2d1650" stroke-width="15.42"><g fill="#2d1650" stroke-width="15.42"><ellipse cx="2064" cy="1112" rx="475.27" ry="470.42" fill="#2d1650" stroke-width="15.42"/></g></g><g id="Shape_2_copy" fill="#442178" stroke-width="15.42"><g fill="#442178" stroke-width="15.42"><ellipse cx="2064" cy="1112" rx="463.16" ry="458.44" fill="#442178" stroke-width="15.42"/></g></g><g stroke-width="15.42"><g stroke-width="15.42"><path d="m2277.5 911.54c-16.518-16.517-171.99-88.264-210.78-88.264-38.798 0-189.87 67.706-210.24 88.074-21.36 21.361-87.389 180.22-88.395 211.24-0.982 30.301 63.237 186.73 87.045 210.53 26.177 26.177 171.71 85.496 210.51 86.467 38.797 0.97 184.9-64.136 209.77-86.1 25.23-22.284 89.316-181.15 89.316-211.28-1e-3 -30.067-68.831-192.28-87.223-210.68z" stroke-width="15.42"/></g></g><g stroke-width="15.42"><g stroke-width="15.42"><path d="m2271 917.95c-16.014-16.014-166.74-85.57-204.35-85.57s-184.07 65.64-203.82 85.386c-20.709 20.709-84.722 174.72-85.696 204.8-0.952 29.376 61.307 181.03 84.389 204.11 25.377 25.377 166.47 82.886 204.08 83.827 37.613 0.939 179.26-62.179 203.36-83.472 24.46-21.604 86.591-175.62 86.591-204.83 0-29.15-66.729-186.42-84.561-204.25z" fill="#d1d1d1" stroke-width="207.68"/></g></g><g stroke-width="15.42" data-button="button-10"><g><g stroke-width="15.42"><ellipse cx="2065.6" cy="1124.9" rx="248.44" ry="238.77" stroke-width="15.42"/></g></g><g id="Shape_1_copy"><g stroke-width="15.42"><ellipse cx="2065.6" cy="1124.9" rx="234.29" ry="225.17" fill="#eee" stroke-width="207.68"/></g></g><g><g stroke-width="15.42"><ellipse cx="2064.1" cy="1125.8" rx="211.47" ry="199.69" fill="#acacac" stroke-width="207.68"/></g></g><g><g stroke-width="15.42"><ellipse cx="2064.1" cy="1125.8" rx="199.43" ry="188.32" fill="#eee" stroke-width="207.68"/></g></g><g><g stroke-width="15.42"><ellipse cx="2063.9" cy="1131.1" rx="135.66" ry="128.1" fill="#acacac" stroke-width="207.68"/></g></g><g><g stroke-width="15.42"><ellipse cx="2063.9" cy="1131.1" rx="123.95" ry="117.04" fill="#eee" stroke-width="207.68"/></g></g><g><g stroke-width="15.42"><ellipse cx="2066" cy="1131" rx="53.975" ry="50.966" fill="#acacac" stroke-width="207.68"/></g></g><g><g stroke-width="15.42"><ellipse cx="2066" cy="1131" rx="42.118" ry="39.771" fill="#eee" stroke-width="207.68"/></g></g></g><g stroke-width="15.42"><g stroke-width="15.42"><path d="m4035.5 1760.5c-16.518-16.517-171.99-88.264-210.78-88.264-38.798 0-189.87 67.706-210.24 88.074-21.361 21.361-87.389 180.22-88.395 211.24-0.982 30.301 63.237 186.73 87.045 210.53 26.177 26.177 171.71 85.496 210.51 86.466 38.798 0.971 184.9-64.135 209.77-86.099 25.229-22.284 89.316-181.15 89.316-211.28 0-30.067-68.831-192.28-87.223-210.68z" stroke-width="15.42"/></g></g><g stroke-width="15.42"><g stroke-width="15.42"><path d="m4029 1767c-16.014-16.014-166.74-85.57-204.35-85.57s-184.07 65.64-203.82 85.386c-20.709 20.709-84.722 174.72-85.696 204.8-0.952 29.376 61.307 181.03 84.389 204.11 25.377 25.377 166.47 82.886 204.08 83.827 37.613 0.939 179.26-62.179 203.36-83.472 24.46-21.604 86.591-175.62 86.591-204.83 0-29.15-66.729-186.42-84.561-204.25z" fill="#ffe400" stroke-width="207.68"/></g></g><g data-button="button-11"><g stroke-width="15.42"><g stroke-width="15.42"><circle cx="3824" cy="1976" r="144" fill="#5f5500" stroke-width="207.68"/></g></g><g id="Shape_9_copy" stroke-width="15.42"><g stroke-width="15.42"><circle cx="3824" cy="1976" r="128" fill="#ffe400" stroke-width="207.68"/></g></g><text transform="matrix(.68482 0 0 .68587 195.81 1137.2)" fill="#000000" fill-opacity=".75" font-family="sans-serif" font-size="144px" letter-spacing="0px" stroke-width="22.5" word-spacing="0px" style="line-height:1.25;shape-inside:url(#rect1879-3-6-5-2-7);white-space:pre" xml:space="preserve"><tspan x="5247.6191" y="1275.3691"><tspan stroke-width="22.5">C</tspan></tspan></text></g><text x="3826.5161" y="1970.2391" fill="#000000" font-family="sans-serif" font-size="40px" letter-spacing="0px" stroke-width="15.42" word-spacing="0px" style="line-height:1.25" xml:space="preserve"><tspan x="3826.5161" y="1970.2391" stroke-width="15.42"/></text><g fill="#2d1650" stroke-width="15.42"><g fill="#2d1650" stroke-width="15.42"><ellipse cx="2626.5" cy="1976.9" rx="320.41" ry="317.14" fill="#2d1650" stroke-width="15.42"/></g></g><g fill="#442178" stroke-width="15.42"><g fill="#442178" stroke-width="15.42"><ellipse cx="2626.5" cy="1976.9" rx="312.25" ry="309.06" fill="#442178" stroke-width="15.42"/></g></g><g stroke-width="15.42"><g stroke-width="15.42"><polygon points="2870.6 1901.9 2709.5 1901.9 2709.5 1737.1 2545.8 1737.1 2545.9 1899.5 2387.3 1899.5 2387.3 2055.9 2544.8 2057.1 2544.8 2221.9 2707.3 2221.9 2708.5 2054.7 2870.6 2053.5" stroke-width="15.42"/></g></g><g stroke-width="15.42" data-button="dpad-0"><g id="Shape_4_copy"><g stroke-width="15.42"><polygon points="2860.2 1911 2700.8 1911 2700.8 1747.6 2554.2 1747.6 2554.4 1908.7 2396.1 1908.7 2396.1 2047.5 2554.1 2048.7 2554.3 2211.4 2698.2 2211.4 2699.6 2046.4 2860.2 2045.3" fill="#eaeaea" stroke-width="207.68"/></g></g><g><g stroke-width="15.42"><polygon points="2674.2 1862 2627.3 1780.1 2578.7 1862" fill="#c7c7c7" stroke-width="207.68"/></g></g><g id="Shape_5_copy"><g stroke-width="15.42"><polygon points="2674.2 2103 2578.7 2103 2627.3 2184.9" fill="#c7c7c7" stroke-width="207.68"/></g></g><g><g stroke-width="15.42"><polygon points="2506 1934.7 2424 1981.7 2506 2030.3" fill="#c7c7c7" stroke-width="207.68"/></g></g><g><g stroke-width="15.42"><polygon points="2828.9 1981.7 2747 1934.7 2747 2030.3" fill="#c7c7c7" stroke-width="207.68"/></g></g><g><g stroke-width="15.42"><circle cx="2626.9" cy="1979.4" r="48.647" fill="#c7c7c7" stroke-width="207.68"/></g></g></g><g id="Shape_6_copy_1_" enable-background="new    " stroke-width="15.42"><g id="Shape_6_copy" stroke-width="15.42"></g></g><g id="START_x2F_PAUSE" transform="matrix(1.4379 0 0 1.1683 -1075.9 -163.29)" enable-background="new    " stroke-width="11.898"><text transform="matrix(.7382 0 0 1 3021.6 1148)" font-family="KhmerUI-Bold" font-size="86.409px" stroke-width="160.24">START</text></g><g fill="#2d1650" stroke-width="15.42"><g fill="#2d1650" stroke-width="15.42"><ellipse cx="4403.4" cy="1112" rx="475.27" ry="470.42" fill="#2d1650" stroke-width="15.42"/></g></g><g fill="#442178" stroke-width="15.42"><g fill="#442178" stroke-width="15.42"><ellipse cx="4403.4" cy="1112" rx="463.16" ry="458.44" fill="#442178" stroke-width="15.42"/></g></g><g stroke-width="15.42" data-button="button-0"><g id="Shape_7_copy"><g stroke-width="15.42"><circle cx="4408" cy="1104" r="240" stroke-width="15.42"/></g></g><g><g stroke-width="15.42"><circle cx="4408" cy="1104" r="224" fill="#00bc8e" stroke-width="207.68"/></g></g></g><g stroke-width="15.42" data-button="button-2"><g><g stroke-width="15.42"><circle cx="3968" cy="1336" r="148" stroke-width="15.42"/></g></g><g id="Shape_8_copy"><g stroke-width="15.42"><circle cx="3968" cy="1336" r="130" fill="#f00" stroke-width="207.68"/></g></g></g><g stroke-width="15.42" data-button="button-3"><g><g stroke-width="15.42"><path d="m4206 614c-40 18-216 108-140 216 94 100 146-2 226-40 104-40 210 18 210-118-8-128-256-76-296-58z" stroke-width="15.42"/></g></g><g id="Shape_10_copy"><g stroke-width="15.42"><path d="m4487.3 672.68c-8.889-112.4-236.65-62.308-273.91-45.485s-207.07 96.898-134.67 194.16c83.202 86.025 136.64-11.178 211.14-46.641 96.962-37.559 200.88 15.784 197.44-102.04z" fill="#eaeaea" stroke-width="207.68"/></g></g></g><g stroke-width="15.42" data-button="button-1"><g><g stroke-width="15.42"><path d="m4910.5 905.72c-18-40-108-216-216-140-100 94 2 146 40 226 40 104-18 210 118 210 128-8 76-256 58-296z" stroke-width="15.42"/></g></g><g><g stroke-width="15.42"><path d="m4897.3 913.11c-16.822-37.264-96.897-207.07-194.16-134.67-86.025 83.202 11.178 136.64 46.641 211.14 37.56 96.962-15.783 200.88 102.04 197.44 112.4-8.888 62.308-236.64 45.485-273.91z" fill="#eaeaea" stroke-width="207.68"/></g></g></g><text transform="translate(-888.84 -118.88)" fill="#000000" fill-opacity=".75" font-family="sans-serif" font-size="144px" letter-spacing="0px" stroke-width="15.42" word-spacing="0px" style="line-height:1.25;shape-inside:url(#rect1879-3);white-space:pre" xml:space="preserve"><tspan x="5247.6191" y="1275.3691"><tspan fill="#000000" fill-opacity=".75" stroke-width="15.42" style="shape-inside:url(#rect1879-3)">A</tspan></tspan></text><text transform="translate(-1331 113.12)" fill="#000000" fill-opacity=".75" font-family="sans-serif" font-size="144px" letter-spacing="0px" stroke-width="15.42" word-spacing="0px" style="line-height:1.25;shape-inside:url(#rect1879-3-6);white-space:pre" xml:space="preserve"><tspan x="5247.6191" y="1275.3691"><tspan stroke-width="15.42">B</tspan></tspan></text><text transform="matrix(.88915 0 0 .88915 -425.56 -389.36)" fill="#000000" fill-opacity=".75" font-family="sans-serif" font-size="144px" letter-spacing="0px" stroke-width="17.343" word-spacing="0px" style="line-height:1.25;shape-inside:url(#rect1879-3-6-5);white-space:pre" xml:space="preserve"><tspan x="5247.6191" y="1275.3691"><tspan stroke-width="17.343">Y</tspan></tspan></text><text transform="translate(-479.38 -261.09)" fill="#000000" fill-opacity=".75" font-family="sans-serif" font-size="144px" letter-spacing="0px" stroke-width="15.42" word-spacing="0px" style="line-height:1.25;shape-inside:url(#rect1879-3-6-5-5);white-space:pre" xml:space="preserve"><tspan x="5247.6191" y="1275.3691"><tspan stroke-width="15.42">X</tspan></tspan></text><text transform="matrix(.68482 0 0 .68587 -1678.4 -545.07)" fill="#000000" fill-opacity=".75" font-family="sans-serif" font-size="144px" letter-spacing="0px" stroke-width="22.5" word-spacing="0px" style="line-height:1.25;shape-inside:url(#rect1879-3-6-5-2-1);white-space:pre" xml:space="preserve"><tspan x="5247.6191" y="1275.3691"><tspan stroke-width="22.5">L</tspan></tspan></text><text transform="matrix(.49661 0 0 .49737 2207.6 -73.254)" fill="#000000" fill-opacity=".75" font-family="sans-serif" font-size="144px" letter-spacing="0px" stroke-width="31.027" word-spacing="0px" style="line-height:1.25;shape-inside:url(#rect1879-3-6-5-2-3);white-space:pre" xml:space="preserve"><tspan x="5247.6191" y="1275.3691"><tspan stroke-width="31.027">ZR</tspan></tspan></text><g stroke-width="15.42" data-button="button-16"><g transform="translate(-1196 -395.27)"><g stroke-width="15.42"><circle cx="4408" cy="1104" r="240" stroke-width="15.42"/></g></g><g><g transform="translate(-1196 -395.27)" stroke-width="15.42"><circle cx="4408" cy="1104" r="224" fill="#ebebeb" stroke-width="207.68"/></g></g></g><path d="m3170.6 561.51c-21.814 12.496-54.583 31.25-72.82 41.674l-33.157 18.954-0.026 170.4 72.068 42.783c39.638 23.53 73.022 43.032 74.185 43.336 1.3821 0.36118 17.016-8.291 45.019-24.916 23.596-14.009 56.552-33.525 73.235-43.371l30.335-17.901v-85.002c0-79.864-0.1179-84.957-1.9466-84.255-1.0711 0.41057-18.804 11.009-39.407 23.553-20.603 12.543-37.97 22.797-38.594 22.787-0.6235-0.0103-16.148-9.5256-34.499-21.145l-33.366-21.125-5.2696 3.0995c-2.8975 1.7042-17.847 10.754-33.219 20.109l-27.95 17.01 0.016 41.958 0.017 41.959 32.606 18.428c17.933 10.135 33.345 18.407 34.249 18.382 0.9044-0.025 16.698-8.3971 35.096-18.605l33.454-18.56 0.317-14.198 0.3162-14.199 14.426-8.7472c7.9335-4.8111 14.808-8.961 15.276-9.2219 0.4673-0.26094 0.8397 13.971 0.827 31.628l-0.023 32.102-50.01 29.247-50.01 29.246-26.228-15.523c-14.425-8.5379-37.327-22.118-50.893-30.176l-24.665-14.654v-116.2l50.068-28.856c27.537-15.871 50.482-29.02 50.988-29.22 0.5064-0.19976 15.973 8.6028 34.372 19.562 18.398 10.959 33.999 19.925 34.668 19.925 1.8597 0 46.5-27.347 46.5-28.486 0-0.54913-0.5337-0.99804-1.186-0.99804s-26.117-14.289-56.588-31.752c-30.471-17.464-56.103-31.752-56.96-31.752-0.8573 0-19.406 10.224-41.22 22.721" fill-opacity=".75" fill-rule="evenodd" stroke-width="237.78"/><g transform="translate(9.424)" data-button="button-8"><g transform="matrix(.58703 0 0 .58703 695.18 537.14)" stroke-width="26.268"><g stroke-width="26.268"><circle cx="3968" cy="1336" r="148" stroke-width="26.268"/></g></g><g transform="translate(-943.5 -14.586)" stroke-width="15.42"><g stroke-width="15.42"><circle cx="3968" cy="1336" r="76.314" fill="#ebebeb" stroke-width="207.68"/></g></g></g><g transform="matrix(1.4379 0 0 1.1683 -1486.6 -163.29)" enable-background="new    " stroke-width="11.898"><text transform="matrix(.7382 0 0 1 3021.6 1148)" font-family="KhmerUI-Bold" font-size="86.409px" stroke-width="160.24">SELECT</text></g><g data-button="button-9"><g transform="matrix(.58703 0 0 .58703 1084.2 537.14)" stroke-width="26.268"><g stroke-width="26.268"><circle cx="3968" cy="1336" r="148" stroke-width="26.268"/></g></g><g transform="translate(-554.5 -14.586)" stroke-width="15.42"><g stroke-width="15.42"><circle cx="3968" cy="1336" r="76.314" fill="#ebebeb" stroke-width="207.68"/></g></g></g></g></g></g><g transform="translate(-260.34 -473.69)"><g cv-if = "ra"><path d="m567.54 648.99h103.15" fill="none" stroke="#000" stroke-width=".5"/></g><g cv-if = "dpad"><path d="m374.56 649.32h103.15" fill="none" stroke="#000" stroke-width=".5"/></g><g cv-if = "a"><path d="m596.71 592.91h91.882" fill="none" stroke="#000" stroke-width=".5"/></g><g cv-if = "b"><path d="m568.05 607.66h103.15" fill="none" stroke="#000" stroke-width=".5"/></g><g><g cv-if = "y"><path d="m589.13 565.7h99.459" fill="none" stroke="#000" stroke-width=".5"/></g><g cv-if = "x"><path d="m622.99 583.02h65.606" fill="none" stroke="#000" stroke-width=".5"/></g><g cv-if = "r1"><path d="m628.97 554.91h59.627" fill="none" stroke="#000" stroke-width=".5"/></g><g cv-if = "start"><path d="m528.6 591.28v-82.736" fill="none" stroke="#000" stroke-width=".5"/></g><text x="519.64154" y="506.8317" fill="#000000" font-family="sans-serif" font-size="40px" letter-spacing="0px" word-spacing="0px" style="line-height:1.25" xml:space="preserve"><tspan x="519.64154" y="506.8317" font-family="sans-serif" font-size="6px" style="font-variant-caps:normal;font-variant-east-asian:normal;font-variant-ligatures:normal;font-variant-numeric:normal">[[start]]</tspan></text><text x="674.04346" y="651.5755" fill="#000000" font-family="sans-serif" font-size="40px" letter-spacing="0px" word-spacing="0px" style="line-height:1.25" xml:space="preserve"><tspan x="674.04346" y="651.5755" font-family="sans-serif" font-size="6px" style="font-variant-caps:normal;font-variant-east-asian:normal;font-variant-ligatures:normal;font-variant-numeric:normal">[[ra]]</tspan></text><text x="673.08386" y="609.31451" fill="#000000" font-family="sans-serif" font-size="40px" letter-spacing="0px" word-spacing="0px" style="line-height:1.25" xml:space="preserve"><tspan x="673.08386" y="609.31451" font-family="sans-serif" font-size="6px" style="font-variant-caps:normal;font-variant-east-asian:normal;font-variant-ligatures:normal;font-variant-numeric:normal">[[b]]</tspan></text><text x="691.40167" y="594.74054" fill="#000000" font-family="sans-serif" font-size="40px" letter-spacing="0px" word-spacing="0px" style="line-height:1.25" xml:space="preserve"><tspan x="691.40167" y="594.74054" font-family="sans-serif" font-size="6px" style="font-variant-caps:normal;font-variant-east-asian:normal;font-variant-ligatures:normal;font-variant-numeric:normal">[[a]]</tspan></text><text x="690.66138" y="584.66785" fill="#000000" font-family="sans-serif" font-size="40px" letter-spacing="0px" word-spacing="0px" style="line-height:1.25" xml:space="preserve"><tspan x="690.66138" y="584.66785" font-family="sans-serif" font-size="6px" style="font-variant-caps:normal;font-variant-east-asian:normal;font-variant-ligatures:normal;font-variant-numeric:normal">[[x]]</tspan></text><text x="691.40601" y="567.63531" fill="#000000" font-family="sans-serif" font-size="40px" letter-spacing="0px" word-spacing="0px" style="line-height:1.25" xml:space="preserve"><tspan x="691.40601" y="567.63531" font-family="sans-serif" font-size="6px" style="font-variant-caps:normal;font-variant-east-asian:normal;font-variant-ligatures:normal;font-variant-numeric:normal">[[y]]</tspan></text><text x="690.68622" y="557.03937" fill="#000000" font-family="sans-serif" font-size="40px" letter-spacing="0px" word-spacing="0px" style="line-height:1.25" xml:space="preserve"><tspan x="690.68622" y="557.03937" font-family="sans-serif" font-size="6px" style="font-variant-caps:normal;font-variant-east-asian:normal;font-variant-ligatures:normal;font-variant-numeric:normal">[[r1]]</tspan></text><g cv-if = "l1"><path d="m342.83 555.19h59.627" fill="none" stroke="#000" stroke-width=".5"/></g><text x="315.89267" y="557.19037" fill="#000000" font-family="sans-serif" font-size="40px" letter-spacing="0px" word-spacing="0px" style="line-height:1.25" xml:space="preserve"><tspan x="315.89267" y="557.19037" font-family="sans-serif" font-size="6px" style="font-variant-caps:normal;font-variant-east-asian:normal;font-variant-ligatures:normal;font-variant-numeric:normal">[[l1]]</tspan></text><text x="354.72061" y="651.14825" fill="#000000" font-family="sans-serif" font-size="40px" letter-spacing="0px" word-spacing="0px" style="line-height:1.25" xml:space="preserve"><tspan x="354.72061" y="651.14825" font-family="sans-serif" font-size="6px" style="font-variant-caps:normal;font-variant-east-asian:normal;font-variant-ligatures:normal;font-variant-numeric:normal">[[dpad]]</tspan></text></g></svg>\n'}),require.register("controller/kb-input.html",function(t,e,r){r.exports='<section cv-each = "lines:line">[[line]]</section>\n'}),require.register("controller/ps3-input.svg",function(t,e,r){r.exports='<?xml version="1.0" encoding="UTF-8"?>\n<svg width="512" height="288" version="1.0"\n\txmlns="http://www.w3.org/2000/svg">\n\t<g transform="translate(-260.34 -473.69)">\n\t\t<g transform="translate(134.82 68.294)">\n\t\t\t<path d="m435.57 481.84h33.046l-2.5898-4.9919c-1.698-3.2729-6.1119-5.7018-13.933-5.7018-7.8212 0-12.235 2.4289-13.933 5.7018z" fill="#7a7a7a" fill-rule="evenodd" stroke="#000" stroke-width="1.0793" data-button="button-7"/>\n\t\t\t<path d="m293.22 481.84h33.046l-2.5898-4.9919c-1.698-3.2729-6.1119-5.7018-13.933-5.7018-7.8212 0-12.235 2.4289-13.933 5.7018z" fill="#7a7a7a" fill-rule="evenodd" stroke="#000" stroke-width="1.0793" data-button="button-6"/>\n\t\t\t<path d="m320.62 497.85c-1.5358 0-2.75 1.2454-2.75 2.7812v73.156c0 1.5358 1.2142 2.75 2.75 2.75h121.78c1.5358 0 2.7812-1.2142 2.7812-2.75v-73.156c0-1.5358-1.2454-2.7812-2.7812-2.7812h-52.808c-0.2723 0.44907-0.77809 0.75-1.3438 0.75h-14.312c-0.56415 0-1.0398-0.30294-1.3125-0.75z" fill="#3f3f3f" fill-rule="evenodd" stroke="#000" stroke-linecap="round" stroke-linejoin="round"/>\n\t\t\t<rect x="324.17" y="504.14" width="114.69" height="68.484" rx="2.7723" ry="2.6797" fill="#262626" fill-rule="evenodd"/>\n\t\t\t<path d="m272.94 520.34c-5.4902 30.065-9.0709 62.226-11.765 76.34-4.2253 22.138 32.77 40.747 46.797 15.163 10.649-19.422 22.745-44.183 22.745-44.183z" fill="#262626" fill-rule="evenodd" stroke="#000"/>\n\t\t\t<path d="m435.52 483.74h33.15l-2.598-4.2714c-1.7033-2.8005-6.1312-4.8789-13.977-4.8789-7.8459 0-12.274 2.0784-13.977 4.8789z" fill="#7a7a7a" fill-rule="evenodd" stroke="#000" data-button="button-5"/>\n\t\t\t<path d="m293.16 483.74h33.15l-2.598-4.2714c-1.7033-2.8005-6.1312-4.8789-13.977-4.8789-7.8459 0-12.274 2.0784-13.977 4.8789z" fill="#7a7a7a" fill-rule="evenodd" stroke="#000" data-button="button-4"/>\n\t\t\t<path d="m330.59 504.54c-1.6994-10.98-2.4837-16.471-3.268-20.523-0.78432-4.0523-7.7124-6.1438-17.582-6.1438s-16.797 2.0915-17.582 6.1438c-0.78431 4.0523-1.5686 9.5425-3.268 20.523" fill="#262626" fill-rule="evenodd" stroke="#000"/>\n\t\t\t<circle cx="309.8" cy="529.75" r="37.909" fill="#333" fill-rule="evenodd" stroke="#000" stroke-linecap="round" stroke-linejoin="round"/>\n\t\t\t<path d="m472.94 504.54c-1.6994-10.98-2.4837-16.471-3.268-20.523-0.78432-4.0523-7.7124-6.1438-17.582-6.1438s-16.797 2.0915-17.582 6.1438c-0.78431 4.0523-1.5686 9.5425-3.268 20.523" fill="#262626" fill-rule="evenodd" stroke="#000"/>\n\t\t\t<circle cx="346.14" cy="566.61" r="24.052" fill="#333" fill-rule="evenodd" stroke="#000" stroke-linecap="round" stroke-linejoin="round"/>\n\t\t\t<circle cx="346.14" cy="566.61" r="18.562" fill-opacity=".51852" fill-rule="evenodd" stroke="#000" stroke-linecap="round" stroke-linejoin="round"/>\n\t\t\t<circle cx="346.14" cy="566.61" r="16.209" fill="#3b3b3b" fill-rule="evenodd" stroke="#000" stroke-linecap="round" stroke-linejoin="round" data-button="left-stick button-10"/>\n\t\t\t<path d="m490.08 520.34c5.4902 30.065 9.0709 62.749 11.765 76.34 4.3818 22.107-32.77 40.747-46.797 15.163-10.649-19.422-22.745-44.183-22.745-44.183z" fill="#262626" fill-rule="evenodd" stroke="#000"/>\n\t\t\t<circle transform="scale(-1,1)" cx="-453.21" cy="529.75" r="37.909" fill="#333" fill-rule="evenodd" stroke="#000" stroke-linecap="round" stroke-linejoin="round"/>\n\t\t\t<path d="m445.43 501.73c-1.5358 0-2.7812 1.2454-2.7812 2.7812v14.656h-14.688c-1.5358 0-2.75 1.2454-2.75 2.7812v15.594c0 1.5358 1.2142 2.7812 2.75 2.7812h14.688v14.656c0 1.5358 1.2454 2.7812 2.7812 2.7812h15.594c1.5358 0 2.75-1.2454 2.75-2.7812v-14.656h14.688c1.5358 0 2.75-1.2454 2.75-2.7812v-15.594c0-1.5358-1.2142-2.7812-2.75-2.7812h-14.688v-14.656c0-1.5358-1.2142-2.7812-2.75-2.7812z" fill="#262626" fill-rule="evenodd"/>\n\t\t\t<rect x="353.46" y="530.28" width="11.634" height="6.6667" rx="1.5686" ry="1.5686" fill="#595959" fill-rule="evenodd" stroke="#000" stroke-linecap="round" stroke-linejoin="round" data-button="button-8"/>\n\t\t\t<path d="m407.19 533.61-8.4967 3.3333c-0.80899 0.31737-1.5686-0.69961-1.5686-1.5686v-3.5294c0-0.86902 0.75963-1.886 1.5686-1.5686z" fill="#595959" fill-rule="evenodd" stroke="#000" stroke-linecap="round" stroke-linejoin="round" data-button="button-9"/>\n\t\t\t<circle cx="382.48" cy="551.32" r="7.9347" fill="#595959" fill-rule="evenodd" stroke="#000" stroke-linecap="round" stroke-linejoin="round" stroke-width="1.3796" data-button="button-16"/>\n\t\t\t<circle cx="453.21" cy="512.1" r="8.2353" fill="#5a5a5a" fill-rule="evenodd" stroke="#454545" stroke-linecap="round" stroke-linejoin="round" data-button="button-3"/>\n\t\t\t<circle cx="453.21" cy="547.53" r="8.2353" fill="#5a5a5a" fill-rule="evenodd" stroke="#454545" stroke-linecap="round" stroke-linejoin="round" data-button="button-0"/>\n\t\t\t<circle cx="470.93" cy="529.81" r="8.2353" fill="#5a5a5a" fill-rule="evenodd" stroke="#454545" stroke-linecap="round" stroke-linejoin="round" data-button="button-1"/>\n\t\t\t<circle cx="435.5" cy="529.81" r="8.2353" fill="#5a5a5a" fill-rule="evenodd" stroke="#454545" stroke-linecap="round" stroke-linejoin="round" data-button="button-2"/>\n\t\t\t<path d="m301.84 501.25c-1.5358 0-2.7812 1.2454-2.7812 2.7812v14.656h-14.688c-1.5358 0-2.75 1.2454-2.75 2.7812v15.594c0 1.5358 1.2142 2.7812 2.75 2.7812h14.688v14.656c0 1.5358 1.2454 2.7812 2.7812 2.7812h15.594c1.5358 0 2.75-1.2454 2.75-2.7812v-14.656h14.688c1.5358 0 2.75-1.2454 2.75-2.7812v-15.594c0-1.5358-1.2142-2.7812-2.75-2.7812h-14.688v-14.656c0-1.5358-1.2142-2.7812-2.75-2.7812z" fill="#262626" fill-rule="evenodd"/>\n\t\t\t<circle cx="416.21" cy="566.61" r="24.052" fill="#333" fill-rule="evenodd" stroke="#000" stroke-linecap="round" stroke-linejoin="round"/>\n\t\t\t<circle cx="416.21" cy="566.61" r="18.562" fill-opacity=".51852" fill-rule="evenodd" stroke="#000" stroke-linecap="round" stroke-linejoin="round"/>\n\t\t\t<circle cx="416.21" cy="566.61" r="16.209" fill="#3b3b3b" fill-rule="evenodd" stroke="#000" stroke-linecap="round" stroke-linejoin="round" data-button="right-stick button-11"/>\n\t\t\t<g fill="#3f3f3f" fill-rule="evenodd">\n\t\t\t\t<path transform="matrix(0 -.28374 -.51741 0 575.79 583.64)" d="m279.97 514.41-12.665 7.3123v-14.625z"/>\n\t\t\t\t<path transform="matrix(0 .28374 -.51741 0 575.79 474.89)" d="m279.97 514.41-12.665 7.3123v-14.625z"/>\n\t\t\t\t<path transform="matrix(.28374 0 0 -.51741 255.25 795.43)" d="m279.97 514.41-12.665 7.3123v-14.625z"/>\n\t\t\t\t<path transform="matrix(-.28374 0 0 -.51741 364 795.43)" d="m279.97 514.41-12.665 7.3123v-14.625z"/>\n\t\t\t</g>\n\t\t\t<rect x="430.79" y="525.1" width="9.4281" height="9.4281" rx="0" ry="0" fill="none" stroke="#ff01db"/>\n\t\t\t<path transform="matrix(.87668 0 0 .87521 59.31 61.955)" d="m455.3 518.14h-11.974l5.9871-10.37z" fill="none" stroke="#00ff83" stroke-width="1.1416"/>\n\t\t\t<circle transform="scale(-1)" cx="-470.93" cy="-529.81" r="5.6472" fill="none" stroke="#f00" stroke-linecap="round" stroke-linejoin="round"/>\n\t\t\t<path d="m449.04 543.43 8.5038 8.5038m0-8.5038-8.5038 8.5038" fill="none" stroke="#8243fb"/>\n\t\t\t<g fill="#5a5a5a" stroke="#454545">\n\t\t\t\t<path transform="translate(.35102 .37335)" d="m318.62 523.29a1.1789 1.1789 0 0 0-0.85742 0.44726l-3.5 4.4375a1.1789 1.1789 0 0 0-2e-3 1.457l3.5 4.4688a1.1789 1.1789 0 0 0 0.92382 0.45313l8.125 0.0312a1.1789 1.1789 0 0 0 1.1836-1.1797v-8.7812a1.1789 1.1789 0 0 0-1.1562-1.1777l-8.125-0.15625a1.1789 1.1789 0 0 0-0.0918 0z" fill="#5a5a5a" fill-rule="evenodd" stroke="#454545" stroke-linecap="round" stroke-linejoin="round" data-button="button-15"/>\n\t\t\t\t<g data-button="button-14">\n\t\t\t\t\t<path transform="matrix(-1 0 0 1 618.9 .2845)" d="m318.62 523.29a1.1789 1.1789 0 0 0-0.85742 0.44726l-3.5 4.4375a1.1789 1.1789 0 0 0-2e-3 1.457l3.5 4.4688a1.1789 1.1789 0 0 0 0.92382 0.45313l8.125 0.0312a1.1789 1.1789 0 0 0 1.1836-1.1797v-8.7812a1.1789 1.1789 0 0 0-1.1562-1.1777l-8.125-0.15625a1.1789 1.1789 0 0 0-0.0918 0z" fill="#5a5a5a" fill-rule="evenodd" stroke="#454545" stroke-linecap="round" stroke-linejoin="round"/>\n\t\t\t\t</g>\n\t\t\t\t<g data-button="button-13">\n\t\t\t\t\t<path transform="rotate(90 309.26 529.25)" d="m318.62 523.29a1.1789 1.1789 0 0 0-0.85742 0.44726l-3.5 4.4375a1.1789 1.1789 0 0 0-2e-3 1.457l3.5 4.4688a1.1789 1.1789 0 0 0 0.92382 0.45313l8.125 0.0312a1.1789 1.1789 0 0 0 1.1836-1.1797v-8.7812a1.1789 1.1789 0 0 0-1.1562-1.1777l-8.125-0.15625a1.1789 1.1789 0 0 0-0.0918 0z" fill="#5a5a5a" fill-rule="evenodd" stroke="#454545" stroke-linecap="round" stroke-linejoin="round"/>\n\t\t\t\t</g>\n\t\t\t\t<g data-button="button-12">\n\t\t\t\t\t<path transform="matrix(0 -1 -1 0 838.61 838.54)" d="m318.62 523.29a1.1789 1.1789 0 0 0-0.85742 0.44726l-3.5 4.4375a1.1789 1.1789 0 0 0-2e-3 1.457l3.5 4.4688a1.1789 1.1789 0 0 0 0.92382 0.45313l8.125 0.0312a1.1789 1.1789 0 0 0 1.1836-1.1797v-8.7812a1.1789 1.1789 0 0 0-1.1562-1.1777l-8.125-0.15625a1.1789 1.1789 0 0 0-0.0918 0z" fill="#5a5a5a" fill-rule="evenodd" stroke="#454545" stroke-linecap="round" stroke-linejoin="round"/>\n\t\t\t\t</g>\n\t\t\t</g>\n\t\t\t<path d="m307.47 481.42h1.038v6.7985h3.7358v0.87358h-4.7738v-7.6721"/>\n\t\t\t<path d="m454.02 485.5c0.22267 0.0754 0.43849 0.23638 0.64747 0.48303 0.2124 0.24666 0.4248 0.58582 0.6372 1.0175l1.0534 2.0966h-1.1151l-0.98149-1.9681c-0.25352-0.51387-0.50017-0.85473-0.73998-1.0226-0.23638-0.16786-0.56012-0.25179-0.97121-0.25179h-1.1305v3.2425h-1.038v-7.6721h2.3432c0.877 1e-5 1.5313 0.18329 1.963 0.54984 0.43164 0.36657 0.64747 0.91983 0.64747 1.6598 0 0.48304-0.11305 0.88386-0.33915 1.2024-0.22268 0.31861-0.54813 0.53957-0.97635 0.6629m-2.6002-3.222v2.7235h1.3052c0.50016 1e-5 0.877-0.11476 1.1305-0.34429 0.25693-0.23295 0.3854-0.57382 0.3854-1.0226 0-0.44877-0.12847-0.78622-0.3854-1.0123-0.25351-0.22953-0.63035-0.34429-1.1305-0.3443h-1.3052"/>\n\t\t\t<path d="m353.63 524.56v0.43917c-0.17091-0.0817-0.33216-0.14267-0.48375-0.1828-0.15159-0.0401-0.29798-0.0602-0.43917-0.0602-0.24522 0-0.43471 0.0476-0.56846 0.14267-0.13227 0.0951-0.19841 0.23036-0.19841 0.40573 0 0.14713 0.0438 0.2586 0.13153 0.33439 0.0892 0.0743 0.25711 0.1345 0.50382 0.18057l0.27197 0.0557c0.33587 0.0639 0.58332 0.17686 0.74234 0.33885 0.16051 0.16051 0.24076 0.37601 0.24077 0.64649-1e-5 0.3225-0.1085 0.56698-0.32548 0.73343-0.2155 0.16646-0.53205 0.24968-0.94967 0.24968-0.15753 0-0.32547-0.0178-0.50381-0.0535-0.17686-0.0357-0.3604-0.0884-0.55063-0.15828v-0.46369c0.1828 0.10255 0.36188 0.17983 0.53725 0.23185 0.17537 0.052 0.34777 0.078 0.51719 0.078 0.25711 0 0.45551-0.0505 0.59522-0.15159 0.1397-0.10106 0.20955-0.24522 0.20955-0.43248 0-0.16348-0.0505-0.29129-0.15159-0.38343-0.0996-0.0921-0.2638-0.16125-0.49267-0.20733l-0.2742-0.0535c-0.33588-0.0669-0.57887-0.17165-0.72897-0.31433-0.15011-0.14267-0.22516-0.34107-0.22516-0.59521 0-0.29426 0.10329-0.52611 0.30987-0.69553 0.20806-0.16943 0.49415-0.25414 0.85827-0.25414 0.15605 0 0.31507 0.0141 0.47706 0.0423 0.162 0.0283 0.3277 0.0706 0.49713 0.12707m0.90286-0.10923h2.1044v0.37898h-1.6541v0.98533h1.585v0.37898h-1.585v1.206h1.6942v0.37897h-2.1446v-3.3283m2.8891 0h0.45032v2.9493h1.6207v0.37897h-2.071v-3.3283m2.5414 0h2.1044v0.37898h-1.6541v0.98533h1.585v0.37898h-1.585v1.206h1.6942v0.37897h-2.1446v-3.3283m5.3815 0.25637v0.47483c-0.15159-0.14118-0.31359-0.2467-0.48598-0.31656-0.17092-0.0698-0.35297-0.10477-0.54617-0.10477-0.38047 0-0.67176 0.11667-0.87388 0.34999-0.20212 0.23185-0.30318 0.56773-0.30318 1.0076 0 0.43843 0.10106 0.77431 0.30318 1.0076 0.20212 0.23184 0.49341 0.34776 0.87388 0.34776 0.1932 0 0.37525-0.0349 0.54617-0.10477 0.17239-0.0698 0.33439-0.17537 0.48598-0.31656v0.47038c-0.15754 0.107-0.32473 0.18726-0.50159 0.24076-0.17537 0.0535-0.36114 0.0802-0.55732 0.0802-0.50381 0-0.90062-0.15382-1.1904-0.46146-0.2898-0.30912-0.43471-0.73045-0.43471-1.264 0-0.53502 0.14491-0.95635 0.43471-1.264 0.28981-0.30913 0.68662-0.46369 1.1904-0.46369 0.19915 0 0.38641 0.0267 0.56178 0.0802 0.17685 0.052 0.34256 0.13079 0.49713 0.23631m0.23853-0.25637h2.8156v0.37898h-1.1815v2.9493h-0.45254v-2.9493h-1.1815v-0.37898" fill="#e6e6e6"/>\n\t\t\t<path d="m396.51 524.56v0.43917c-0.17092-0.0817-0.33217-0.14267-0.48376-0.1828-0.15159-0.0401-0.29798-0.0602-0.43916-0.0602-0.24522 0-0.43471 0.0476-0.56847 0.14267-0.13227 0.0951-0.1984 0.23036-0.1984 0.40573 0 0.14713 0.0438 0.2586 0.13152 0.33439 0.0892 0.0743 0.25711 0.1345 0.50382 0.18057l0.27197 0.0557c0.33588 0.0639 0.58333 0.17686 0.74235 0.33885 0.1605 0.16051 0.24076 0.37601 0.24076 0.64649 0 0.3225-0.10849 0.56698-0.32547 0.73343-0.2155 0.16646-0.53206 0.24968-0.94967 0.24968-0.15754 0-0.32548-0.0178-0.50382-0.0535-0.17686-0.0357-0.3604-0.0884-0.55063-0.15828v-0.46369c0.1828 0.10255 0.36189 0.17983 0.53726 0.23185 0.17536 0.052 0.34776 0.078 0.51719 0.078 0.2571 0 0.45551-0.0505 0.59521-0.15159 0.1397-0.10106 0.20955-0.24522 0.20955-0.43248 0-0.16348-0.0505-0.29129-0.15159-0.38343-0.0996-0.0921-0.2638-0.16125-0.49267-0.20733l-0.2742-0.0535c-0.33587-0.0669-0.57886-0.17165-0.72897-0.31433-0.1501-0.14267-0.22516-0.34107-0.22515-0.59521-1e-5 -0.29426 0.10328-0.52611 0.30986-0.69553 0.20807-0.16943 0.49416-0.25414 0.85827-0.25414 0.15605 0 0.31507 0.0141 0.47707 0.0423 0.16199 0.0283 0.3277 0.0706 0.49713 0.12707m0.44139-0.10923h2.8156v0.37898h-1.1815v2.9493h-0.45254v-2.9493h-1.1815v-0.37898m4.0082 0.44362-0.61082 1.6564h1.2239l-0.61305-1.6564m-0.25413-0.44362h0.5105l1.2685 3.3283h-0.46815l-0.30318-0.85381h-1.5003l-0.30318 0.85381h-0.47484l1.2707-3.3283m3.841 1.7678c0.0966 0.0327 0.19023 0.10255 0.28089 0.20955 0.0921 0.10701 0.18429 0.25414 0.27643 0.4414l0.457 0.90954h-0.48375l-0.42579-0.85381c-0.10998-0.22292-0.21698-0.3708-0.32102-0.44362-0.10254-0.0728-0.24299-0.10924-0.42133-0.10924h-0.49044v1.4067h-0.45031v-3.3283h1.0166c0.38046 0 0.66432 0.0795 0.85158 0.23853s0.28088 0.39904 0.28089 0.72006c-1e-5 0.20955-0.0491 0.38343-0.14713 0.52165-0.0966 0.13821-0.2378 0.23407-0.42357 0.28757m-1.128-1.3978v1.1815h0.56624c0.21698 0 0.38046-0.0498 0.49044-0.14936 0.11146-0.10106 0.16719-0.24893 0.16719-0.44362s-0.0557-0.34108-0.16719-0.43917c-0.10998-0.0996-0.27346-0.14936-0.49044-0.14936h-0.56624m1.9328-0.37006h2.8156v0.37898h-1.1815v2.9493h-0.45254v-2.9493h-1.1815v-0.37898" fill="#e6e6e6"/>\n\t\t\t<text transform="scale(-1.6252 -.6153)" x="-223.68372" y="-815.48474" fill="#b3b3b3" font-family="Arial" stroke-width="1px" style="line-height:0%" xml:space="preserve">\n\t\t\t\t<tspan x="-223.68372" y="-815.48474" font-size="3.0753px" style="line-height:1.25">1</tspan>\n\t\t\t</text>\n\t\t\t<text transform="scale(-1.6252 -.6153)" x="-220.45108" y="-815.48474" fill="#b3b3b3" font-family="Arial" stroke-width="1px" style="line-height:0%" xml:space="preserve">\n\t\t\t\t<tspan x="-220.45108" y="-815.48474" font-size="3.0753px" style="line-height:1.25">2</tspan>\n\t\t\t</text>\n\t\t\t<text transform="scale(-1.6252 -.6153)" x="-216.92226" y="-815.5238" fill="#b3b3b3" font-family="Arial" stroke-width="1px" style="line-height:0%" xml:space="preserve">\n\t\t\t\t<tspan x="-216.92226" y="-815.5238" font-size="3.0753px" style="line-height:1.25">3</tspan>\n\t\t\t</text>\n\t\t\t<text transform="scale(-1.6252 -.6153)" x="-212.86066" y="-815.49377" fill="#b3b3b3" font-family="Arial" stroke-width="1px" style="line-height:0%" xml:space="preserve">\n\t\t\t\t<tspan x="-212.86066" y="-815.49377" font-size="3.0753px" style="line-height:1.25">4</tspan>\n\t\t\t</text>\n\t\t\t<rect x="343.44" y="498.32" width="2.0832" height="2.7005" rx="0" ry="1.5686" fill="#1a1a1a"/>\n\t\t\t<rect x="350" y="498.32" width="2.0832" height="2.7005" rx="0" ry="1.5686" fill="#1a1a1a"/>\n\t\t\t<rect x="355.86" y="498.32" width="2.0832" height="2.7005" rx="0" ry="1.5686" fill="#1a1a1a"/>\n\t\t\t<rect x="360.96" y="498.32" width="2.0832" height="2.7005" rx="0" ry="1.5686" fill="#f00"/>\n\t\t\t<g transform="matrix(.080659 0 0 .080659 351.05 512.47)" clip-rule="evenodd" fill-rule="evenodd" stroke-width="2.256">\n\t\t\t\t<path d="m394.88 444.14-0.0851 78.095-20.924-6.8051v-91.793l26.708 7.0613c17.096 4.5948 27.559 13.526 27.388 29.18-0.17 18.206-8.5908 25.521-25.007 20.757v-35.901c0-4.3389-8.0805-4.593-8.0805-0.59435z" fill="#de0029"/>\n\t\t\t\t<path d="m364.26 500.28-9.867 3.3186c-6.3802 2.2124-11.823-2.9768-5.9543-5.1048l4.763-1.7003-17.947-5.701c-5.5292 1.8724-10.718 5.8707-10.377 11.486 0.34027 5.6992 13.354 7.061 23.392 8.6775 9.3559 1.5306 17.862 0.68001 25.603-2.0424v-5.8705zm30.706 21.95 18.288-6.381-18.458-5.8692v11.824z" fill="#f3c202"/>\n\t\t\t\t<path d="m443.62 505.13 0.34-0.0857c7.9956-2.8065 11.398-6.7213 10.548-10.378-1.3611-6.1248-11.143-9.4434-26.199-10.55-10.802-0.76514-21.434 1.6162-31.811 5.1889l-1.7013 0.5962 18.628 5.7848 10.887-3.6586c11.398-2.1262 15.992 1.6165 5.0189 5.1048l-5.444 1.8705zm-69.748-27.052-8.2516 2.8065 8.2516 2.5524z" fill="#326db3"/>\n\t\t\t\t<path d="m413.25 515.85 30.366-10.718-19.734-6.1267-29.09 9.9534v1.0221zm-39.382-18.801-9.6118 3.2327 9.6118 3.0627zm20.924 5.0207v-12.166l18.628 5.7848zm-41.594-5.2748 20.67-7.4013v-5.9551l-8.2513-2.5524-29.941 10.124c-0.0851 0-0.25513 0.0841-0.42513 0.0841z" fill="#00aa9e"/>\n\t\t\t</g>\n\t\t</g>\n\t</g>\n\t<g transform="translate(-260.34 -473.69)">\n\t\t<g class = "a" class = "a" cv-if = "a">\n\t\t\t<path transform="translate(134.82 68.294)" d="m456.39 552.34 69.71 17.901" fill="none" stroke="#000" stroke-width=".5"/>\n\t\t</g>\n\t\t<g class = "x" class = "x" cv-if = "x">\n\t\t\t<path transform="translate(134.82 68.294)" d="m439.07 532.57 87.033 22.593" fill="none" stroke="#000" stroke-width=".5"/>\n\t\t</g>\n\t\t<g class = "y" class = "y" cv-if = "y">\n\t\t\t<path transform="translate(134.82 68.294)" d="m457.95 515.41 68.155 16.266" fill="none" stroke="#000" stroke-width=".5"/>\n\t\t</g>\n\t\t<g class = "b" class = "b" cv-if = "b">\n\t\t\t<path transform="translate(134.82 68.294)" d="m474.2 532.63 51.904 12.605" fill="none" stroke="#000" stroke-width=".5"/>\n\t\t</g>\n\t\t<text transform="translate(134.82 68.294)" x="527.39423" y="547.27045" fill="#000000" font-family="sans-serif" font-size="40px" letter-spacing="0px" word-spacing="0px" style="line-height:1.25" xml:space="preserve">\n\t\t\t<tspan class = "b" x="527.39423" y="547.27045" font-family="sans-serif" font-size="6px" style="font-variant-caps:normal;font-variant-east-asian:normal;font-variant-ligatures:normal;font-variant-numeric:normal">[[b]]</tspan>\n\t\t</text>\n\t\t<text transform="translate(134.82 68.294)" x="527.69214" y="572.71301" fill="#000000" font-family="sans-serif" font-size="40px" letter-spacing="0px" word-spacing="0px" style="line-height:1.25" xml:space="preserve">\n\t\t\t<tspan class = "a" x="527.69214" y="572.71301" font-family="sans-serif" font-size="6px" style="font-variant-caps:normal;font-variant-east-asian:normal;font-variant-ligatures:normal;font-variant-numeric:normal">[[a]]</tspan>\n\t\t</text>\n\t\t<text transform="translate(134.82 68.294)" x="527.45691" y="557.97314" fill="#000000" font-family="sans-serif" font-size="40px" letter-spacing="0px" word-spacing="0px" style="line-height:1.25" xml:space="preserve">\n\t\t\t<tspan class = "x" x="527.45691" y="557.97314" font-family="sans-serif" font-size="6px" style="font-variant-caps:normal;font-variant-east-asian:normal;font-variant-ligatures:normal;font-variant-numeric:normal">[[x]]</tspan>\n\t\t</text>\n\t\t<text transform="translate(134.82 68.294)" x="526.81152" y="534.13593" fill="#000000" font-family="sans-serif" font-size="40px" letter-spacing="0px" word-spacing="0px" style="line-height:1.25" xml:space="preserve">\n\t\t\t<tspan class = "y" x="526.81152" y="534.13593" font-family="sans-serif" font-size="6px" style="font-variant-caps:normal;font-variant-east-asian:normal;font-variant-ligatures:normal;font-variant-numeric:normal">[[y]]</tspan>\n\t\t</text>\n\t\t<g cv-if ="r1" class = "r1">\n\t\t\t<path transform="translate(134.82 68.294)" d="m470.33 481.76 53.163 13.403" fill="none" stroke="#000" stroke-width=".5"/>\n\t\t\t<text transform="translate(134.82 68.294)" x="524.19629" y="497.62772" fill="#000000" font-family="sans-serif" font-size="40px" letter-spacing="0px" word-spacing="0px" style="line-height:1.25" xml:space="preserve">\n\t\t\t\t<tspan class = "r1" x="524.19629" y="497.62772" font-family="sans-serif" font-size="6px" style="font-variant-caps:normal;font-variant-east-asian:normal;font-variant-ligatures:normal;font-variant-numeric:normal">[[r1]]</tspan>\n\t\t\t</text>\n\t\t</g>\n\t\t<g cv-if ="ra" class = "ra">\n\t\t\t<path transform="translate(134.82 68.294)" d="m435.96 571.55 90.146 25.55" fill="none" stroke="#000" stroke-width=".5"/>\n\t\t\t<text transform="translate(134.82 68.294)" x="529.45886" y="599.68732" fill="#000000" font-family="sans-serif" font-size="40px" letter-spacing="0px" word-spacing="0px" style="line-height:1.25" xml:space="preserve">\n\t\t\t\t<tspan x="529.45886" y="599.68732" font-family="sans-serif" font-size="6px" style="font-variant-caps:normal;font-variant-east-asian:normal;font-variant-ligatures:normal;font-variant-numeric:normal">[[ra]]</tspan>\n\t\t\t</text>\n\t\t</g>\n\t\t<g cv-if = "l1" class = "l1">\n\t\t\t<path transform="translate(134.82 68.294)" d="m292.1 481.01-53.163 13.403" fill="none" stroke="#000" stroke-width=".5"/>\n\t\t\t<text transform="translate(134.82 68.294)" x="212.72356" y="496.87265" fill="#000000" font-family="sans-serif" font-size="40px" letter-spacing="0px" word-spacing="0px" style="line-height:1.25" xml:space="preserve">\n\t\t\t\t<tspan class = "l1" x="212.72356" y="496.87265" font-family="sans-serif" font-size="6px" style="font-variant-caps:normal;font-variant-east-asian:normal;font-variant-ligatures:normal;font-variant-numeric:normal">[[l1]]</tspan>\n\t\t\t</text>\n\t\t</g>\n\t\t<g cv-if = "dpad" class = "dpad">\n\t\t\t<path transform="translate(134.82 68.294)" d="m294.23 543.48-55.024 27.964" fill="none" stroke="#000" stroke-width=".5"/>\n\t\t\t<text transform="translate(134.82 68.294)" x="220.96754" y="573.75909" fill="#000000" font-family="sans-serif" font-size="40px" letter-spacing="0px" word-spacing="0px" style="line-height:1.25" xml:space="preserve">\n\t\t\t\t<tspan x="220.96754" y="573.75909" font-family="sans-serif" font-size="6px" style="font-variant-caps:normal;font-variant-east-asian:normal;font-variant-ligatures:normal;font-variant-numeric:normal">[[dpad]]</tspan>\n\t\t\t</text>\n\t\t</g>\n\t\t<g cv-if = "start" class = "start">\n\t\t\t<path transform="translate(134.82 68.294)" d="m401.03 523.14v-50.774" fill="none" stroke="#000" stroke-width=".5"/>\n\t\t\t<text transform="translate(134.82 68.294)" x="392.06915" y="470.65366" fill="#000000" font-family="sans-serif" font-size="40px" letter-spacing="0px" word-spacing="0px" style="line-height:1.25" xml:space="preserve">\n\t\t\t\t<tspan class = "start" x="392.06915" y="470.65366" font-family="sans-serif" font-size="6px" style="font-variant-caps:normal;font-variant-east-asian:normal;font-variant-ligatures:normal;font-variant-numeric:normal">[[start]]</tspan>\n\t\t\t</text>\n\t\t</g>\n\t</g>\n</svg>\n'}),require.register("controller/xbox360-input.svg",function(t,e,r){r.exports='<?xml version="1.0" encoding="UTF-8" standalone="no"?>\n<svg\n   xmlns:dc="http://purl.org/dc/elements/1.1/"\n   xmlns:cc="http://creativecommons.org/ns#"\n   xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"\n   xmlns:svg="http://www.w3.org/2000/svg"\n   xmlns="http://www.w3.org/2000/svg"\n   xmlns:sodipodi="http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd"\n   xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape"\n   width="512"\n   height="288"\n   id="svg2"\n   sodipodi:version="0.32"\n   inkscape:version="1.0.2 (e86c870879, 2021-01-15)"\n   sodipodi:docname="xbox360-input.svg"\n   inkscape:output_extension="org.inkscape.output.svg.inkscape"\n   version="1.0">\n  <defs\n     id="defs4">\n    <inkscape:perspective\n       sodipodi:type="inkscape:persp3d"\n       inkscape:vp_x="0 : 663.1653 : 1"\n       inkscape:vp_y="0 : 1000 : 0"\n       inkscape:vp_z="744.09448 : 663.1653 : 1"\n       inkscape:persp3d-origin="372.04724 : 487.7716 : 1"\n       id="perspective10" />\n    <inkscape:perspective\n       id="perspective2390"\n       inkscape:persp3d-origin="372.04724 : 487.7716 : 1"\n       inkscape:vp_z="744.09448 : 663.1653 : 1"\n       inkscape:vp_y="0 : 1000 : 0"\n       inkscape:vp_x="0 : 663.1653 : 1"\n       sodipodi:type="inkscape:persp3d" />\n    <inkscape:perspective\n       id="perspective12"\n       inkscape:persp3d-origin="886.50018 : 236.98421 : 1"\n       inkscape:vp_z="1773.0004 : 286.98421 : 1"\n       inkscape:vp_y="0 : 1000 : 0"\n       inkscape:vp_x="0 : 286.98421 : 1"\n       sodipodi:type="inkscape:persp3d" />\n    <inkscape:perspective\n       id="perspective3355"\n       inkscape:persp3d-origin="67.123741 : 170.98342 : 1"\n       inkscape:vp_z="134.24748 : 187.98302 : 1"\n       inkscape:vp_y="0 : 1000 : 0"\n       inkscape:vp_x="0 : 187.98302 : 1"\n       sodipodi:type="inkscape:persp3d" />\n    <inkscape:perspective\n       id="perspective3443"\n       inkscape:persp3d-origin="177.16534 : 255.09444 : 1"\n       inkscape:vp_z="354.33069 : 314.14955 : 1"\n       inkscape:vp_y="0 : 1000 : 0"\n       inkscape:vp_x="0 : 314.14955 : 1"\n       sodipodi:type="inkscape:persp3d" />\n  </defs>\n  <sodipodi:namedview\n     id="base"\n     pagecolor="#ffffff"\n     bordercolor="#666666"\n     borderopacity="1.0"\n     gridtolerance="10000"\n     guidetolerance="10"\n     objecttolerance="10"\n     inkscape:pageopacity="0.0"\n     inkscape:pageshadow="2"\n     inkscape:zoom="1.7956884"\n     inkscape:cx="145.53463"\n     inkscape:cy="120.12192"\n     inkscape:document-units="px"\n     inkscape:current-layer="layer4"\n     showgrid="false"\n     inkscape:window-width="1920"\n     inkscape:window-height="1026"\n     inkscape:window-x="1050"\n     inkscape:window-y="31"\n     showguides="true"\n     inkscape:guide-bbox="true"\n     inkscape:document-rotation="0"\n     inkscape:window-maximized="1">\n    <sodipodi:guide\n       position="399.98588,184.41855"\n       orientation="1,0"\n       id="guide4464" />\n    <sodipodi:guide\n       position="113.8839,194.16412"\n       orientation="1,0"\n       id="guide5621" />\n  </sodipodi:namedview>\n  <metadata\n     id="metadata7">\n    <rdf:RDF>\n      <cc:Work\n         rdf:about="">\n        <dc:format>image/svg+xml</dc:format>\n        <dc:type\n           rdf:resource="http://purl.org/dc/dcmitype/StillImage" />\n        <dc:title></dc:title>\n      </cc:Work>\n    </rdf:RDF>\n  </metadata>\n  <g\n     inkscape:label="Layer 1"\n     inkscape:groupmode="layer"\n     id="layer1"\n     transform="translate(-260.34243,-473.69226)">\n    <g\n       id="g237"\n       transform="translate(134.82195,68.29447)">\n      <g\n         id="g817"\n         transform="matrix(0.32231801,0,0,0.32231801,260.60086,378.95899)">\n        <path\n           style="fill:#d8d8d8;fill-opacity:1;fill-rule:evenodd;stroke:#000000;stroke-width:3;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1"\n           d="m 628.39816,299.51068 c -0.21851,-1.09254 -4.15168,-18.13627 -4.58869,-20.97689 -0.43702,-2.84062 -1.09255,-4.37019 -4.5887,-6.77379 -32.81359,-22.55933 -17.06203,-23.18579 -55.11042,-17.04898 -6.77379,1.09254 -15.51417,18.13627 -15.51417,18.13627 z"\n           id="path3352-3-3"\n           sodipodi:nodetypes="cssscc"\n           data-button="button-7" />\n        <path\n           style="fill:#d8d8d8;fill-opacity:1;fill-rule:evenodd;stroke:#000000;stroke-width:3;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1"\n           d="m 124.78295,299.51068 c 0.21851,-1.09254 4.15168,-18.13627 4.58869,-20.97689 0.43702,-2.84062 1.09255,-4.37019 4.5887,-6.77379 32.81359,-22.55933 17.06203,-23.18579 55.11042,-17.04898 6.77379,1.09254 15.51417,18.13627 15.51417,18.13627 z"\n           id="path3352-3"\n           sodipodi:nodetypes="cssscc"\n           data-button="button-6" />\n        <g\n           id="g4442"\n           transform="matrix(0.5752286,0,0,0.5752286,161.90411,275.5957)"\n           style="stroke:#000000;stroke-width:2;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1">\n          <rect\n             style="fill:#4d4d4d;fill-opacity:1;stroke:#000000;stroke-width:2;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1"\n             id="rect4436"\n             width="45.344299"\n             height="27.532085"\n             x="390.84552"\n             y="630.43866"\n             ry="4.973381"\n             rx="4.973381" />\n          <rect\n             rx="4.973381"\n             ry="4.973381"\n             y="630.43866"\n             x="305.26193"\n             height="27.532085"\n             width="45.344299"\n             id="rect4438"\n             style="fill:#4d4d4d;fill-opacity:1;stroke:#000000;stroke-width:2;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1" />\n          <rect\n             style="fill:#4d4d4d;fill-opacity:1;stroke:#000000;stroke-width:2;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1"\n             id="rect4440"\n             width="32.910625"\n             height="27.325605"\n             x="354.27057"\n             y="630.23145"\n             ry="4.973381"\n             rx="4.973381" />\n        </g>\n        <path\n           sodipodi:nodetypes="cssscc"\n           id="path3365"\n           d="m 655.50745,318.60794 c -0.21851,-1.09254 -4.15168,-18.13627 -4.58869,-20.97689 -0.43702,-2.84062 -1.09255,-4.37019 -4.5887,-6.77379 -32.81359,-22.55933 -71.20626,-33.45047 -109.25465,-27.31366 -6.77379,1.09254 -15.51417,18.13627 -15.51417,18.13627 z"\n           style="fill:#d8d8d8;fill-opacity:1;fill-rule:evenodd;stroke:#000000;stroke-width:3;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1"\n           data-button="button-5" />\n        <path\n           style="fill:#d8d8d8;fill-opacity:1;fill-rule:evenodd;stroke:#000000;stroke-width:3;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1"\n           d="m 97.673659,318.60794 c 0.218509,-1.09254 4.151681,-18.13627 4.588691,-20.97689 0.43702,-2.84062 1.09255,-4.37019 4.5887,-6.77379 32.81359,-22.55933 71.20626,-33.45047 109.25465,-27.31366 6.77379,1.09254 15.51417,18.13627 15.51417,18.13627 z"\n           id="path3352"\n           sodipodi:nodetypes="cssscc"\n           data-button="button-4" />\n        <path\n           style="fill:#cccccc;fill-opacity:1;fill-rule:evenodd;stroke:none;stroke-width:3;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1"\n           d="m 692.40625,795.6875 c 36.84007,1.09337 52.80772,-18.83796 56.40625,-117.4375 3.77124,-103.33202 -63.29854,-299.68945 -82.96875,-349.21875 -19.67025,-49.52929 -118.71329,-75.82532 -163.65625,-47.5 -36.98649,23.31075 -77.50632,26.375 -127.03125,26.375 -49.52492,0 -90.0135,-3.06425 -127,-26.375 -12.6402,-7.9665 -29.58112,-11.63473 -47.8125,-11.65625 C 153.75246,269.82 98.606739,293.43208 84.46875,329.03125 64.798509,378.56054 -2.2712417,574.91797 1.5,678.25 c 3.5785642,98.05266 19.406856,118.31763 55.8125,117.45312 84.47581,-9.05099 93.14578,-56.86454 150.09375,-101.60937 52.79739,-41.48369 89.78117,-45.2585 167.46875,-43.75 77.68757,-1.50848 114.64011,2.26634 167.4375,43.75 56.94798,44.7448 65.61794,92.54276 150.09375,101.59375 z"\n           id="path3354"\n           sodipodi:nodetypes="cssssscsscscsc" />\n        <path\n           style="fill:#808080;fill-opacity:1;fill-rule:evenodd;stroke:none;stroke-width:3;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1"\n           d="m 376.55538,626.9578 c -70.07127,10e-6 -105.56406,1.53631 -141.34375,21.125 -74.56634,40.82366 -89.5368,105.33263 -168.59376,147.59375 77.18929,-11.18226 87.06449,-58.28282 142.1875,-101.59375 52.7974,-41.48366 89.78118,-45.2585 167.46876,-43.75 77.68757,-1.50851 114.64011,2.26634 167.4375,43.75 55.31458,43.46144 65.07175,90.74856 143,101.71875 -79.25058,-42.25894 -94.17658,-106.857 -168.8125,-147.71875 -35.77969,-19.58869 -71.27248,-21.125 -141.34375,-21.125 z"\n           id="path3191" />\n        <ellipse\n           style="opacity:1;fill:#d4d4d4;fill-opacity:1;fill-rule:evenodd;stroke:none;stroke-width:1.24301;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1"\n           id="path3339"\n           cx="485.73596"\n           cy="515.71448"\n           rx="90.509804"\n           ry="93.149673" />\n        <ellipse\n           style="opacity:1;fill:#d4d4d4;fill-opacity:1;fill-rule:evenodd;stroke:none;stroke-width:1;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1"\n           id="path3335"\n           cx="162.54053"\n           cy="382.21249"\n           rx="76.556213"\n           ry="71.276474" />\n        <ellipse\n           id="path3337"\n           style="opacity:1;fill:#d4d4d4;fill-opacity:1;fill-rule:evenodd;stroke:none;stroke-width:1.24301;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1"\n           cx="264.74118"\n           cy="515.71448"\n           rx="90.509804"\n           ry="93.149673" />\n        <circle\n           style="opacity:1;fill:#333333;fill-opacity:1;fill-rule:evenodd;stroke:#000000;stroke-width:3;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1"\n           id="path3249"\n           cx="265.90213"\n           cy="501.4498"\n           r="60.547413" />\n        <path\n           id="path3253"\n           style="fill:#3a3a3a;fill-opacity:1;fill-rule:evenodd;stroke:#515151;stroke-width:3;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:4;stroke-opacity:1"\n           d="m 249.60884,556.05516 c 0,5.37504 32.58658,4.96298 32.58658,0 0,-20.05425 16.27567,-36.33015 36.32964,-36.33015 5.24879,1.15665 7.27598,-35.55207 0,-36.55035 -20.05397,0 -36.32964,-16.2759 -36.32964,-36.33015 0,-5.39506 -32.58658,-5.80591 -32.58658,0 0,20.05425 -16.27567,36.33015 -36.32964,36.33015 -5.88003,-0.22498 -7.05562,36.34403 0,36.55035 20.05397,0 36.32964,16.2759 36.32964,36.33015 z"\n           sodipodi:nodetypes="ccccssccc"\n           data-button="dpad-0" />\n        <g\n           id="g3292"\n           data-button="button-9">\n          <rect\n             ry="16.450199"\n             rx="16.450203"\n             y="372.24924"\n             x="437.39334"\n             height="29.558952"\n             width="37.428303"\n             id="rect3288"\n             style="opacity:1;fill:#d1d1d1;fill-opacity:1;fill-rule:evenodd;stroke:#6d6d6d;stroke-width:1;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1" />\n          <path\n             transform="matrix(0,1.1259413,1.1259413,0,20.719223,57.395722)"\n             inkscape:randomized="0"\n             inkscape:rounded="0"\n             inkscape:flatsided="true"\n             sodipodi:arg2="0.52359878"\n             sodipodi:arg1="-0.52359878"\n             sodipodi:r2="4.7132702"\n             sodipodi:r1="9.4265404"\n             sodipodi:cy="386.38617"\n             sodipodi:cx="292.76215"\n             sodipodi:sides="3"\n             id="path3290"\n             style="opacity:1;fill:#717171;fill-opacity:1;fill-rule:evenodd;stroke:none;stroke-width:3;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1"\n             sodipodi:type="star"\n             d="m 300.92577,381.6729 -8.16362,14.13981 -8.16363,-14.13981 z" />\n        </g>\n        <g\n           id="g3296-7"\n           data-button="button-8">\n          <rect\n             style="opacity:1;fill:#d1d1d1;fill-opacity:1;fill-rule:evenodd;stroke:#6d6d6d;stroke-width:1;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1"\n             id="rect3298-5"\n             width="37.428303"\n             height="29.558952"\n             x="282.40161"\n             y="372.24924"\n             rx="16.450203"\n             ry="16.450199" />\n          <path\n             sodipodi:type="star"\n             style="opacity:1;fill:#717171;fill-opacity:1;fill-rule:evenodd;stroke:none;stroke-width:3;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1"\n             id="path3300-6"\n             sodipodi:sides="3"\n             sodipodi:cx="292.76215"\n             sodipodi:cy="386.38617"\n             sodipodi:r1="9.4265404"\n             sodipodi:r2="4.7132702"\n             sodipodi:arg1="-0.52359878"\n             sodipodi:arg2="0.52359878"\n             inkscape:flatsided="true"\n             inkscape:rounded="0"\n             inkscape:randomized="0"\n             transform="matrix(0,1.1259413,-1.1259413,0,738.02813,57.395722)"\n             d="m 300.92577,381.6729 -8.16362,14.13981 -8.16363,-14.13981 z" />\n        </g>\n        <circle\n           id="path3310"\n           style="opacity:1;fill:#a7a7a7;fill-opacity:1;fill-rule:evenodd;stroke:none;stroke-width:1.07159;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1"\n           cx="379.25415"\n           cy="382.24289"\n           r="27.00733" />\n        <g\n           id="g4372"\n           data-button="button-16">\n          <circle\n             id="path3304"\n             style="opacity:1;fill:#007800;fill-opacity:1;fill-rule:evenodd;stroke:#000000;stroke-width:1;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1"\n             cx="379.25418"\n             cy="387.28577"\n             r="42.671013" />\n          <circle\n             style="opacity:1;fill:#979797;fill-opacity:1;fill-rule:evenodd;stroke:#000000;stroke-width:1;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1"\n             id="path3302"\n             cx="379.25418"\n             cy="387.28577"\n             r="36.252529" />\n          <path\n             style="fill:#007800;fill-opacity:1;fill-rule:evenodd;stroke:none;stroke-width:0.25pt;stroke-linecap:butt;stroke-linejoin:miter;stroke-opacity:1"\n             d="m 344.94011,404.6356 c 11.61506,-28.78785 27.87652,-46.26619 54.74832,-50.37874 l 3.08442,2.57034 c -21.94963,7.88995 -42.83002,29.43216 -53.72019,53.46315 z"\n             id="path3306"\n             sodipodi:nodetypes="ccccc" />\n          <path\n             sodipodi:nodetypes="ccccc"\n             id="path3308"\n             d="M 412.64636,405.10615 C 401.90402,378.48134 383.44171,358.47214 358.58899,354.6686 l -2.85267,2.37721 c 20.3004,7.29712 43.03458,31.06484 53.1065,53.29021 z"\n             style="fill:#007800;fill-opacity:1;fill-rule:evenodd;stroke:none;stroke-width:0.25pt;stroke-linecap:butt;stroke-linejoin:miter;stroke-opacity:1" />\n        </g>\n        <text\n           xml:space="preserve"\n           style="font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;line-height:0%;font-family:\'DejaVu Sans Mono\';-inkscape-font-specification:\'DejaVu Sans Mono\';text-align:center;writing-mode:lr-tb;text-anchor:middle;fill:#000000;fill-opacity:1;stroke:none;stroke-width:3pt;stroke-linecap:butt;stroke-linejoin:miter;stroke-opacity:1"\n           x="472.78644"\n           y="364.41809"\n           id="text3312"><tspan\n             sodipodi:role="line"\n             id="tspan3314"\n             x="472.78644"\n             y="364.41809"\n             style="font-size:10.9335px;line-height:-2">START</tspan></text>\n        <path\n           d="m 542.19462,503.98223 c 0,31.40573 -25.48873,56.89446 -56.89447,56.89446 -31.40574,0 -56.89447,-25.48873 -56.89447,-56.89446 0,-31.40575 25.48873,-56.89448 56.89447,-56.89448 31.40574,0 56.89447,25.48873 56.89447,56.89448 z m -8.30373,-1e-5 c 0,26.82209 -21.76866,48.59074 -48.59074,48.59074 -26.82209,0 -48.59075,-21.76865 -48.59075,-48.59074 0,-26.82209 21.76866,-48.59074 48.59075,-48.59074 26.82208,0 48.59074,21.76865 48.59074,48.59074 z"\n           style="fill:#dfdfdf;fill-opacity:1;fill-rule:evenodd;stroke:none;stroke-width:2.06703;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:4;stroke-opacity:1"\n           id="path3348" />\n        <text\n           xml:space="preserve"\n           style="font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;line-height:0%;font-family:\'DejaVu Sans Mono\';-inkscape-font-specification:\'DejaVu Sans Mono\';text-align:center;writing-mode:lr-tb;text-anchor:middle;fill:#000000;fill-opacity:1;stroke:none;stroke-width:3pt;stroke-linecap:butt;stroke-linejoin:miter;stroke-opacity:1"\n           x="284.78766"\n           y="362.92157"\n           id="text3316"><tspan\n             sodipodi:role="line"\n             id="tspan3318"\n             x="284.78766"\n             y="362.92157"\n             style="font-size:10.9335px;line-height:1">BACK</tspan></text>\n        <path\n           id="path3350"\n           style="fill:#dfdfdf;fill-opacity:1;fill-rule:evenodd;stroke:none;stroke-width:2.06703;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:4;stroke-opacity:1"\n           d="m 218.67656,375.05998 c 0,30.22813 -24.533,54.76113 -54.76114,54.76113 -30.22814,0 -54.76114,-24.533 -54.76114,-54.76113 0,-30.22815 24.533,-54.76115 54.76114,-54.76115 30.22814,0 54.76114,24.533 54.76114,54.76115 z m -7.99237,-10e-6 c 0,25.81636 -20.95242,46.76877 -46.76877,46.76877 -25.81636,0 -46.76878,-20.95241 -46.76878,-46.76877 0,-25.81636 20.95242,-46.76877 46.76878,-46.76877 25.81635,0 46.76877,20.95241 46.76877,46.76877 z" />\n        <path\n           id="path3320"\n           style="fill:none;fill-opacity:1;fill-rule:evenodd;stroke:#969696;stroke-width:0.81337;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:4;stroke-opacity:1"\n           d="m 379.23104,433.61031 c 12.61575,0 24.35251,-4.77192 32.3309,-13.285 7.1145,-7.5913 15.68671,-13.9149 22.63475,-13.9149 6.94804,0 -0.53333,0 -0.53333,0 0,0 27.94422,0 27.94422,0 10.45366,0 18.93778,-8.48412 18.93778,-19.03121 0,-10.54708 -8.48412,-19.0312 -18.93778,-19.0312 0,0 -27.94422,0 -27.94422,0 0,0 7.48137,0 0.53333,0 -6.94804,0 -15.52025,-6.3236 -22.63475,-13.9149 -7.97839,-8.51308 -19.73829,-13.285 -32.3309,-13.285 -12.5926,0 -24.3525,4.77192 -32.33089,13.285 -7.1145,7.5913 -15.68671,13.9149 -22.63475,13.9149 -6.94804,0 0.53333,0 0.53333,0 0,0 -27.94422,0 -27.94422,0 -10.45366,0 -18.93778,8.48412 -18.93778,19.0312 0,10.54709 8.48412,19.03121 18.93778,19.03121 0,0 27.94422,0 27.94422,0 0,0 -7.48137,0 -0.53333,0 6.94804,0 15.52025,6.3236 22.63475,13.9149 7.97839,8.51308 19.71515,13.285 32.33089,13.285 z"\n           sodipodi:nodetypes="cssccsccsscssccsccssc" />\n        <path\n           id="path3341"\n           style="fill:#dfdfdf;fill-opacity:1;fill-rule:evenodd;stroke:none;stroke-width:2.06703;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:4;stroke-opacity:1"\n           d="m 338.14038,501.44979 c 0,39.8755 -32.36275,72.23825 -72.23826,72.23825 -39.87552,0 -72.23826,-32.36275 -72.23826,-72.23825 0,-39.87552 32.36274,-72.23827 72.23826,-72.23827 39.87551,0 72.23826,32.36275 72.23826,72.23827 z m -10.54315,-1e-5 c 0,34.0557 -27.63942,61.69511 -61.69511,61.69511 -34.0557,0 -61.69512,-27.63941 -61.69512,-61.69511 0,-34.0557 27.63942,-61.69511 61.69512,-61.69511 34.05569,0 61.69511,27.63941 61.69511,61.69511 z" />\n        <g\n           id="g3233-5"\n           data-button="button-10">\n          <circle\n             style="opacity:1;fill:#4d4d4d;fill-opacity:1;fill-rule:evenodd;stroke:#000000;stroke-width:3;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1"\n             id="path3235-6"\n             cx="163.84641"\n             cy="375.03775"\n             r="49.266716" />\n          <circle\n             id="path3237-6"\n             style="opacity:1;fill:#333333;fill-opacity:1;fill-rule:evenodd;stroke:none;stroke-width:3;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1"\n             cx="163.84641"\n             cy="375.03778"\n             r="34.993183" />\n          <g\n             id="g3239-4"\n             transform="matrix(1.0746269,0,0,1.0746269,-358.16498,-156.16434)">\n            <circle\n               transform="matrix(0.08411222,0,0,0.08411222,471.14277,452.73529)"\n               id="path3241-0"\n               style="fill:#9b9b9b;fill-opacity:1;fill-rule:evenodd;stroke:none;stroke-width:26.75;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1"\n               cx="491.28583"\n               cy="494.31305"\n               r="49.266716" />\n            <circle\n               style="fill:#9b9b9b;fill-opacity:1;fill-rule:evenodd;stroke:none;stroke-width:26.75;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1"\n               id="path3243-0"\n               transform="matrix(0.08411222,0,0,0.08411222,417.73213,452.73529)"\n               cx="491.28583"\n               cy="494.31305"\n               r="49.266716" />\n            <circle\n               style="fill:#9b9b9b;fill-opacity:1;fill-rule:evenodd;stroke:none;stroke-width:26.75;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1"\n               id="path3245-4"\n               transform="matrix(0,0.08411222,-0.08411222,0,527.33836,479.69524)"\n               cx="491.28583"\n               cy="494.31305"\n               r="49.266716" />\n            <circle\n               transform="matrix(0,0.08411222,-0.08411222,0,527.33836,426.2846)"\n               id="path3247-6"\n               style="fill:#9b9b9b;fill-opacity:1;fill-rule:evenodd;stroke:none;stroke-width:26.75;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1"\n               cx="491.28583"\n               cy="494.31305"\n               r="49.266716" />\n          </g>\n        </g>\n        <g\n           id="g3224"\n           data-button="button-11">\n          <circle\n             id="path3196"\n             style="opacity:1;fill:#4d4d4d;fill-opacity:1;fill-rule:evenodd;stroke:#000000;stroke-width:3;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1"\n             cx="491.28583"\n             cy="494.31305"\n             r="49.266716"\n             transform="translate(-5.525239)" />\n          <circle\n             style="opacity:1;fill:#333333;fill-opacity:1;fill-rule:evenodd;stroke:none;stroke-width:4.22368;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1"\n             id="path3198"\n             transform="matrix(0.7102804,0,0,0.7102804,136.8099,143.21219)"\n             cx="491.28583"\n             cy="494.31305"\n             r="49.266716" />\n          <g\n             transform="matrix(1.0746269,0,0,1.0746269,-36.250788,-36.889032)"\n             id="g3218">\n            <circle\n               style="fill:#9b9b9b;fill-opacity:1;fill-rule:evenodd;stroke:none;stroke-width:26.75;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1"\n               id="path3200"\n               transform="matrix(0.08411222,0,0,0.08411222,471.14277,452.73529)"\n               cx="491.28583"\n               cy="494.31305"\n               r="49.266716" />\n            <circle\n               transform="matrix(0.08411222,0,0,0.08411222,417.73213,452.73529)"\n               id="path3202"\n               style="fill:#9b9b9b;fill-opacity:1;fill-rule:evenodd;stroke:none;stroke-width:26.75;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1"\n               cx="491.28583"\n               cy="494.31305"\n               r="49.266716" />\n            <circle\n               transform="matrix(0,0.08411222,-0.08411222,0,527.33836,479.69524)"\n               id="path3210-6"\n               style="fill:#9b9b9b;fill-opacity:1;fill-rule:evenodd;stroke:none;stroke-width:26.75;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1"\n               cx="491.28583"\n               cy="494.31305"\n               r="49.266716" />\n            <circle\n               style="fill:#9b9b9b;fill-opacity:1;fill-rule:evenodd;stroke:none;stroke-width:26.75;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1"\n               id="path3212-9"\n               transform="matrix(0,0.08411222,-0.08411222,0,527.33836,426.2846)"\n               cx="491.28583"\n               cy="494.31305"\n               r="49.266716" />\n          </g>\n        </g>\n        <circle\n           id="path3405"\n           style="opacity:1;fill:#dadada;fill-opacity:1;fill-rule:evenodd;stroke:none;stroke-width:1.26316;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1"\n           cx="645.6366"\n           cy="385.60663"\n           r="36.203922" />\n        <path\n           sodipodi:nodetypes="cssssscsscscsc"\n           id="path3363"\n           d="m 692.40625,795.6875 c 36.84007,1.09337 52.80772,-18.83796 56.40625,-117.4375 3.77124,-103.33202 -63.29854,-299.68945 -82.96875,-349.21875 -19.67025,-49.52929 -118.71329,-75.82532 -163.65625,-47.5 -36.98649,23.31075 -77.50632,26.375 -127.03125,26.375 -49.52492,0 -90.0135,-3.06425 -127,-26.375 -12.6402,-7.9665 -29.58112,-11.63473 -47.8125,-11.65625 C 153.75246,269.82 98.606739,293.43208 84.46875,329.03125 64.798509,378.56054 -2.2712417,574.91797 1.5,678.25 c 3.5785642,98.05266 19.406856,118.31763 55.8125,117.45312 84.47581,-9.05099 93.14578,-56.86454 150.09375,-101.60937 52.79739,-41.48369 89.78117,-45.2585 167.46875,-43.75 77.68757,-1.50848 114.64011,2.26634 167.4375,43.75 56.94798,44.7448 65.61794,92.54276 150.09375,101.59375 z"\n           style="fill:none;fill-opacity:1;fill-rule:evenodd;stroke:#000000;stroke-width:3;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1" />\n        <circle\n           style="opacity:1;fill:#dadada;fill-opacity:1;fill-rule:evenodd;stroke:none;stroke-width:1.26316;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1"\n           id="path3403"\n           cx="536.64771"\n           cy="385.60663"\n           r="36.203922" />\n        <circle\n           style="opacity:1;fill:#dadada;fill-opacity:1;fill-rule:evenodd;stroke:none;stroke-width:1.26316;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1"\n           id="path3407"\n           cx="590.95355"\n           cy="333.56348"\n           r="36.203922" />\n        <circle\n           id="path3409"\n           style="opacity:1;fill:#dadada;fill-opacity:1;fill-rule:evenodd;stroke:none;stroke-width:1.26316;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1"\n           cx="590.95355"\n           cy="441.04388"\n           r="36.203922" />\n        <g\n           id="g4272"\n           data-button="button-2">\n          <circle\n             style="opacity:1;fill:#004cca;fill-opacity:1;fill-rule:evenodd;stroke:#000000;stroke-width:1;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1"\n             id="path3367"\n             cx="536.64771"\n             cy="382.96677"\n             r="25.267321" />\n          <path\n             style="fill:#ffffff;fill-opacity:0.486772;fill-rule:evenodd;stroke:none;stroke-width:1;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:4;stroke-opacity:1"\n             d="m 553.83094,369.19255 c 0,5.88801 -7.72084,1.63138 -17.23402,1.63138 -9.51318,0 -17.23402,4.25663 -17.23402,-1.63138 0,-5.888 7.72084,-10.66668 17.23402,-10.66668 9.51318,0 17.23402,4.77868 17.23402,10.66668 z"\n             id="path3433"\n             sodipodi:nodetypes="csssc" />\n          <path\n             sodipodi:nodetypes="csssc"\n             id="path3462"\n             d="m 557.61978,396.01861 c 0,-6.53475 -10.46192,4.49228 -21.02005,4.49228 -10.55813,0 -21.02005,-10.71153 -21.02005,-4.17678 0,6.53475 10.46192,11.52283 21.02005,11.52283 10.55813,0 21.02005,-5.30358 21.02005,-11.83833 z"\n             style="fill:#000000;fill-opacity:0.26455;fill-rule:evenodd;stroke:none;stroke-width:1;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:4;stroke-opacity:1" />\n        </g>\n        <text\n           xml:space="preserve"\n           style="font-style:normal;font-variant:normal;font-weight:bold;font-stretch:normal;line-height:0%;font-family:\'DejaVu Sans Mono\';-inkscape-font-specification:\'DejaVu Sans Mono Bold\';text-align:center;writing-mode:lr-tb;text-anchor:middle;fill:#000000;fill-opacity:0.70356804;stroke:none;stroke-width:3pt;stroke-linecap:butt;stroke-linejoin:miter;stroke-opacity:1;"\n           x="491.71802"\n           y="429.30984"\n           id="text3381"\n           transform="scale(1.0913562,0.91629113)"><tspan\n             sodipodi:role="line"\n             id="tspan3383"\n             x="491.71802"\n             y="429.30984"\n             style="font-size:31.1568px;line-height:-2;fill:#000000;fill-opacity:0.70356804;">X</tspan></text>\n        <g\n           id="g4267"\n           data-button="button-3">\n          <circle\n             id="path3371"\n             style="fill:#ffaa00;fill-opacity:1;fill-rule:evenodd;stroke:#000000;stroke-width:1;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1"\n             transform="scale(-1)"\n             cx="-591.33069"\n             cy="-328.28375"\n             r="25.267321" />\n          <path\n             sodipodi:nodetypes="csssc"\n             id="path3436"\n             d="m 609.04671,315.31534 c 0,5.88801 -7.72084,1.63138 -17.23402,1.63138 -9.51318,0 -17.23402,4.25663 -17.23402,-1.63138 0,-5.888 7.72084,-10.66668 17.23402,-10.66668 9.51318,0 17.23402,4.77868 17.23402,10.66668 z"\n             style="fill:#ffffff;fill-opacity:0.486772;fill-rule:evenodd;stroke:none;stroke-width:1;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:4;stroke-opacity:1" />\n          <path\n             sodipodi:nodetypes="csssc"\n             id="path3456"\n             d="m 612.51723,341.12116 c 0,-6.53475 -10.46192,4.49228 -21.02005,4.49228 -10.55813,0 -21.02005,-10.71153 -21.02005,-4.17678 0,6.53475 10.46192,11.52283 21.02005,11.52283 10.55813,0 21.02005,-5.30358 21.02005,-11.83833 z"\n             style="fill:#000000;fill-opacity:0.26455;fill-rule:evenodd;stroke:none;stroke-width:1;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:4;stroke-opacity:1" />\n        </g>\n        <text\n           xml:space="preserve"\n           style="font-style:normal;font-variant:normal;font-weight:bold;font-stretch:normal;line-height:0%;font-family:\'DejaVu Sans Mono\';-inkscape-font-specification:\'DejaVu Sans Mono Bold\';text-align:center;writing-mode:lr-tb;text-anchor:middle;fill:#000000;fill-opacity:0.70356804;stroke:none;stroke-width:3pt;stroke-linecap:butt;stroke-linejoin:miter;stroke-opacity:1;"\n           x="541.82349"\n           y="369.6312"\n           id="text3385"\n           transform="scale(1.0913562,0.91629113)"><tspan\n             sodipodi:role="line"\n             id="tspan3387"\n             x="541.82349"\n             y="369.6312"\n             style="font-size:31.1568px;line-height:-2;fill:#000000;fill-opacity:0.70356804;">Y</tspan></text>\n        <g\n           id="g4257"\n           data-button="button-0">\n          <circle\n             transform="scale(-1)"\n             style="fill:#009a00;fill-opacity:1;fill-rule:evenodd;stroke:#000000;stroke-width:1;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1"\n             id="path3373"\n             cx="-591.33069"\n             cy="-437.64978"\n             r="25.267321" />\n          <path\n             style="fill:#ffffff;fill-opacity:0.486772;fill-rule:evenodd;stroke:none;stroke-width:1;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:4;stroke-opacity:1"\n             d="m 609.04671,423.73903 c 0,5.88801 -7.72084,1.63138 -17.23402,1.63138 -9.51318,0 -17.23402,4.25663 -17.23402,-1.63138 0,-5.888 7.72084,-10.66668 17.23402,-10.66668 9.51318,0 17.23402,4.77868 17.23402,10.66668 z"\n             id="path3438"\n             sodipodi:nodetypes="csssc" />\n          <path\n             style="fill:#000000;fill-opacity:0.26455;fill-rule:evenodd;stroke:none;stroke-width:1;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:4;stroke-opacity:1"\n             d="m 612.51723,450.91606 c 0,-6.53475 -10.46192,4.49228 -21.02005,4.49228 -10.55813,0 -21.02005,-10.71153 -21.02005,-4.17678 0,6.53475 10.46192,11.52283 21.02005,11.52283 10.55813,0 21.02005,-5.30358 21.02005,-11.83833 z"\n             id="path3460"\n             sodipodi:nodetypes="csssc" />\n        </g>\n        <text\n           xml:space="preserve"\n           style="font-style:normal;font-variant:normal;font-weight:bold;font-stretch:normal;line-height:0%;font-family:\'DejaVu Sans Mono\';-inkscape-font-specification:\'DejaVu Sans Mono Bold\';text-align:center;writing-mode:lr-tb;text-anchor:middle;fill:#000000;fill-opacity:0.70356804;stroke:none;stroke-width:3pt;stroke-linecap:butt;stroke-linejoin:miter;stroke-opacity:1;"\n           x="541.82349"\n           y="488.98853"\n           id="text3389"\n           transform="scale(1.0913562,0.91629113)"><tspan\n             sodipodi:role="line"\n             id="tspan3391"\n             x="541.82349"\n             y="488.98853"\n             style="font-size:31.1568px;line-height:-2;fill:#000000;fill-opacity:0.70356804;">A</tspan></text>\n        <g\n           id="g4262"\n           data-button="button-1">\n          <circle\n             id="path3369"\n             style="opacity:1;fill:#740000;fill-opacity:1;fill-rule:evenodd;stroke:#000000;stroke-width:1;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1"\n             cx="646.01373"\n             cy="382.96677"\n             r="25.267321" />\n          <path\n             sodipodi:nodetypes="csssc"\n             id="path3440"\n             d="m 663.92784,369.52718 c 0,5.88801 -7.72084,1.63138 -17.23402,1.63138 -9.51318,0 -17.23402,4.25663 -17.23402,-1.63138 0,-5.888 7.72084,-10.66668 17.23402,-10.66668 9.51318,0 17.23402,4.77868 17.23402,10.66668 z"\n             style="fill:#ffffff;fill-opacity:0.486772;fill-rule:evenodd;stroke:none;stroke-width:1;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:4;stroke-opacity:1" />\n          <path\n             style="fill:#000000;fill-opacity:0.26455;fill-rule:evenodd;stroke:none;stroke-width:1;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:4;stroke-opacity:1"\n             d="m 667.73018,396.01861 c 0,-6.53475 -10.46192,4.49228 -21.02005,4.49228 -10.55813,0 -21.02005,-10.71153 -21.02005,-4.17678 0,6.53475 10.46192,11.52283 21.02005,11.52283 10.55813,0 21.02005,-5.30358 21.02005,-11.83833 z"\n             id="path3464"\n             sodipodi:nodetypes="csssc" />\n        </g>\n        <text\n           xml:space="preserve"\n           style="font-style:normal;font-variant:normal;font-weight:bold;font-stretch:normal;line-height:0%;font-family:\'DejaVu Sans Mono\';-inkscape-font-specification:\'DejaVu Sans Mono Bold\';text-align:center;writing-mode:lr-tb;text-anchor:middle;fill:#000000;fill-opacity:0.70356804;stroke:none;stroke-width:3pt;stroke-linecap:butt;stroke-linejoin:miter;stroke-opacity:1;"\n           x="591.54114"\n           y="429.32504"\n           id="text3393"\n           transform="scale(1.0913562,0.91629113)"><tspan\n             sodipodi:role="line"\n             id="tspan3395"\n             x="591.54114"\n             y="429.32504"\n             style="font-size:31.1568px;line-height:-2;fill:#000000;fill-opacity:0.70356804;">B</tspan></text>\n        <text\n           xml:space="preserve"\n           style="font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;line-height:0%;font-family:Arial;-inkscape-font-specification:Arial;text-align:start;writing-mode:lr-tb;text-anchor:start;fill:#808080;fill-opacity:1;stroke:none;stroke-width:1px;stroke-linecap:butt;stroke-linejoin:miter;stroke-opacity:1"\n           x="334.25269"\n           y="350.16708"\n           id="text4416"><tspan\n             sodipodi:role="line"\n             id="tspan4418"\n             x="334.25269"\n             y="350.16708"\n             style="font-size:19.0724px;line-height:1.25">1</tspan></text>\n        <text\n           id="text4420"\n           y="350.16708"\n           x="412.03046"\n           style="font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;line-height:0%;font-family:Arial;-inkscape-font-specification:Arial;text-align:start;writing-mode:lr-tb;text-anchor:start;fill:#808080;fill-opacity:1;stroke:none;stroke-width:1px;stroke-linecap:butt;stroke-linejoin:miter;stroke-opacity:1"\n           xml:space="preserve"><tspan\n             y="350.16708"\n             x="412.03046"\n             id="tspan4422"\n             sodipodi:role="line"\n             style="font-size:19.0724px;line-height:1.25">2</tspan></text>\n        <text\n           xml:space="preserve"\n           style="font-style:normal;font-weight:normal;line-height:0%;font-family:\'Bitstream Vera Sans\';fill:#007800;fill-opacity:1;stroke:none;stroke-width:1px;stroke-linecap:butt;stroke-linejoin:miter;stroke-opacity:1;"\n           x="337.12454"\n           y="424.88486"\n           id="text4424"><tspan\n             sodipodi:role="line"\n             id="tspan4426"\n             x="337.12454"\n             y="424.88486"\n             style="font-size:40px;line-height:1.25;fill:#007800;fill-opacity:1;"> </tspan></text>\n        <text\n           id="text4428"\n           y="436.35324"\n           x="334.25269"\n           style="font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;line-height:0%;font-family:Arial;-inkscape-font-specification:Arial;text-align:start;writing-mode:lr-tb;text-anchor:start;fill:#808080;fill-opacity:1;stroke:none;stroke-width:1px;stroke-linecap:butt;stroke-linejoin:miter;stroke-opacity:1"\n           xml:space="preserve"><tspan\n             y="436.35324"\n             x="334.25269"\n             id="tspan4430"\n             sodipodi:role="line"\n             style="font-size:19.0724px;line-height:1.25">3</tspan></text>\n        <text\n           xml:space="preserve"\n           style="font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;line-height:0%;font-family:Arial;-inkscape-font-specification:Arial;text-align:start;writing-mode:lr-tb;text-anchor:start;fill:#808080;fill-opacity:1;stroke:none;stroke-width:1px;stroke-linecap:butt;stroke-linejoin:miter;stroke-opacity:1"\n           x="412.03046"\n           y="436.35324"\n           id="text4432"><tspan\n             sodipodi:role="line"\n             id="tspan4434"\n             x="412.03046"\n             y="436.35324"\n             style="font-size:19.0724px;line-height:1.25">4</tspan></text>\n      </g>\n    </g>\n  </g>\n  <g\n     inkscape:groupmode="layer"\n     id="layer4"\n     inkscape:label="Layer 2"\n     transform="translate(-125.52048,-405.39779)">\n\t<g cv-if = "a" class = "a">\n    <path\n       style="fill:none;stroke:#000000;stroke-width:0.499999;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1"\n       d="m 455.79635,519.99047 69.71001,17.90083"\n       id="path4466-5-6"\n       sodipodi:nodetypes="cc" /></g>\n\t<g cv-if = "x" class = "x">\n    <path\n       style="fill:none;stroke:#000000;stroke-width:0.499999;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1"\n       d="m 438.47373,504.22466 87.03273,22.59255"\n       id="path4466-6"\n       sodipodi:nodetypes="cc" /></g>\n\t<g cv-if = "y" class = "y">\n    <path\n       style="fill:none;stroke:#000000;stroke-width:0.499999;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1"\n       d="m 457.35152,487.45952 68.15505,16.26615"\n       id="path4466-5-6-4"\n       sodipodi:nodetypes="cc" /></g>\n\t<g cv-if = "b" class = "b">\n    <path\n       style="fill:none;stroke:#000000;stroke-width:0.499999;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1"\n       d="m 473.60248,502.87892 51.90361,12.60482"\n       id="path4466-6-0"\n       sodipodi:nodetypes="cc" /></g>\n    <text\n       xml:space="preserve"\n       style="font-style:normal;font-weight:normal;font-size:40px;line-height:1.25;font-family:sans-serif;letter-spacing:0px;word-spacing:0px;fill:#000000;fill-opacity:1;stroke:none;stroke-width:1"\n       x="526.79633"\n       y="517.52081"\n       id="text3125-3-3-9-9"><tspan\n\t     class = "b"\n         sodipodi:role="line"\n         id="tspan3123-1-4-1-6"\n         x="526.79633"\n         y="517.52081"\n         style="font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;font-size:6.00001px;font-family:sans-serif;-inkscape-font-specification:\'sans-serif, Normal\';font-variant-ligatures:normal;font-variant-caps:normal;font-variant-numeric:normal;font-variant-east-asian:normal;stroke-width:1">[[b]]</tspan></text>\n    <text\n       xml:space="preserve"\n       style="font-style:normal;font-weight:normal;font-size:40px;line-height:1.25;font-family:sans-serif;letter-spacing:0px;word-spacing:0px;fill:#000000;fill-opacity:1;stroke:none;stroke-width:1"\n       x="527.09454"\n       y="540.36304"\n       id="text3125-3-3-9-9-0"><tspan\n\t     class = "a"\n         sodipodi:role="line"\n         id="tspan3123-1-4-1-6-4"\n         x="527.09454"\n         y="540.36304"\n         style="font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;font-size:6.00001px;font-family:sans-serif;-inkscape-font-specification:\'sans-serif, Normal\';font-variant-ligatures:normal;font-variant-caps:normal;font-variant-numeric:normal;font-variant-east-asian:normal;stroke-width:1">[[a]]</tspan></text>\n    <text\n       xml:space="preserve"\n       style="font-style:normal;font-weight:normal;font-size:40px;line-height:1.25;font-family:sans-serif;letter-spacing:0px;word-spacing:0px;fill:#000000;fill-opacity:1;stroke:none;stroke-width:1"\n       x="526.85919"\n       y="529.62354"\n       id="text3125-3-3-9-9-6"><tspan\n\t     class = "x"\n         sodipodi:role="line"\n         id="tspan3123-1-4-1-6-2"\n         x="526.85919"\n         y="529.62354"\n         style="font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;font-size:6.00001px;font-family:sans-serif;-inkscape-font-specification:\'sans-serif, Normal\';font-variant-ligatures:normal;font-variant-caps:normal;font-variant-numeric:normal;font-variant-east-asian:normal;stroke-width:1">[[x]]</tspan></text>\n    <text\n       xml:space="preserve"\n       style="font-style:normal;font-weight:normal;font-size:40px;line-height:1.25;font-family:sans-serif;letter-spacing:0px;word-spacing:0px;fill:#000000;fill-opacity:1;stroke:none;stroke-width:1"\n       x="526.21417"\n       y="506.18649"\n       id="text3125-3-3-9-9-67"><tspan\n\t     class = "y"\n         sodipodi:role="line"\n         id="tspan3123-1-4-1-6-5"\n         x="526.21417"\n         y="506.18649"\n         style="font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;font-size:6.00001px;font-family:sans-serif;-inkscape-font-specification:\'sans-serif, Normal\';font-variant-ligatures:normal;font-variant-caps:normal;font-variant-numeric:normal;font-variant-east-asian:normal;stroke-width:1">[[y]]</tspan></text>\n\t<g cv-if = "r1" class = "r1">\n    <path\n       style="fill:none;stroke:#000000;stroke-width:1.55126;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1"\n       d="M 656.93727,296.09185 821.8762,337.67559"\n       id="path4466-5-6-4-6"\n       sodipodi:nodetypes="cc"\n       transform="matrix(0.32231801,0,0,0.32231801,260.60086,378.95899)" />\n\t</g>\n    <text\n       xml:space="preserve"\n       style="font-style:normal;font-weight:normal;font-size:124.101px;line-height:1.25;font-family:sans-serif;letter-spacing:0px;word-spacing:0px;fill:#000000;fill-opacity:1;stroke:none;stroke-width:3.10253"\n       x="824.07147"\n       y="345.30997"\n       id="text3125-3-3-9-9-67-9"\n       transform="matrix(0.32231801,0,0,0.32231801,260.60086,378.95899)"><tspan\n\t     class = "r1"\n         sodipodi:role="line"\n         id="tspan3123-1-4-1-6-5-8"\n         x="824.07147"\n         y="345.30997"\n         style="font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;font-size:18.6152px;font-family:sans-serif;-inkscape-font-specification:\'sans-serif, Normal\';font-variant-ligatures:normal;font-variant-caps:normal;font-variant-numeric:normal;font-variant-east-asian:normal;stroke-width:3.10253">[[r1]]</tspan></text>\n\t<g cv-if = "l1" class = "l1">\n    <path\n       style="fill:none;stroke:#000000;stroke-width:1.55126;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1"\n       d="M 98.337471,294.83145 -66.601455,336.41519"\n       id="path4466-5-6-4-6-7"\n       sodipodi:nodetypes="cc"\n       transform="matrix(0.32231801,0,0,0.32231801,260.60086,378.95899)" /></g>\n    <text\n       xml:space="preserve"\n       style="font-style:normal;font-weight:normal;font-size:124.101px;line-height:1.25;font-family:sans-serif;letter-spacing:0px;word-spacing:0px;fill:#000000;fill-opacity:1;stroke:none;stroke-width:3.10253"\n       x="-147.9368"\n       y="344.04959"\n       id="text3125-3-3-9-9-67-9-2"\n       transform="matrix(0.32231801,0,0,0.32231801,260.60086,378.95899)"><tspan\n\t     class = "l1"\n         sodipodi:role="line"\n         id="tspan3123-1-4-1-6-5-8-8"\n         x="-147.9368"\n         y="344.04959"\n         style="font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;font-size:18.6152px;font-family:sans-serif;-inkscape-font-specification:\'sans-serif, Normal\';font-variant-ligatures:normal;font-variant-caps:normal;font-variant-numeric:normal;font-variant-east-asian:normal;stroke-width:3.10253">[[l1]]</tspan></text>\n\t<g cv-if = "dpad">\n    <path\n       style="fill:none;stroke:#000000;stroke-width:1.55126;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1"\n       d="M 195.45,507.2765 -65.76263,575.40558"\n       id="path4466-5-6-4-6-7-2"\n       sodipodi:nodetypes="cc"\n       transform="matrix(0.32231801,0,0,0.32231801,260.60086,378.95899)" />\n    <text\n       xml:space="preserve"\n       style="font-style:normal;font-weight:normal;font-size:124.101px;line-height:1.25;font-family:sans-serif;letter-spacing:0px;word-spacing:0px;fill:#000000;fill-opacity:1;stroke:none;stroke-width:3.10253"\n       x="-122.35963"\n       y="582.59192"\n       id="text3125-3-3-9-9-67-9-2-9"\n       transform="matrix(0.32231801,0,0,0.32231801,260.60086,378.95899)"><tspan\n         sodipodi:role="line"\n         id="tspan3123-1-4-1-6-5-8-8-9"\n         x="-122.35963"\n         y="582.59192"\n         style="font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;font-size:18.6152px;font-family:sans-serif;-inkscape-font-specification:\'sans-serif, Normal\';font-variant-ligatures:normal;font-variant-caps:normal;font-variant-numeric:normal;font-variant-east-asian:normal;stroke-width:3.10253">[[dpad]]</tspan></text></g>\n\t<g cv-if = "start">\n    <path\n       style="fill:none;stroke:#000000;stroke-width:1.55126;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1"\n       d="M 455.73274,349.69679 V 192.16781"\n       id="path3121"\n       sodipodi:nodetypes="cc"\n       transform="matrix(0.32231801,0,0,0.32231801,260.60086,378.95899)" />\n    <text\n       xml:space="preserve"\n       style="font-style:normal;font-weight:normal;font-size:124.101px;line-height:1.25;font-family:sans-serif;letter-spacing:0px;word-spacing:0px;fill:#000000;fill-opacity:1;stroke:none;stroke-width:3.10253"\n       x="427.94226"\n       y="186.86783"\n       id="text3125"\n       transform="matrix(0.32231801,0,0,0.32231801,260.60086,378.95899)"><tspan\n\t     class = "start"\n         sodipodi:role="line"\n         id="tspan3123"\n         x="427.94226"\n         y="186.86783"\n         style="font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;font-size:18.6152px;font-family:sans-serif;-inkscape-font-specification:\'sans-serif, Normal\';font-variant-ligatures:normal;font-variant-caps:normal;font-variant-numeric:normal;font-variant-east-asian:normal;stroke-width:3.10253">[[start]]</tspan></text></g>\n\t<g cv-if = "ra" class = "ra">\n    <path\n       style="fill:none;stroke:#000000;stroke-width:1.55126;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1"\n       d="M 542.19462,503.98223 821.8762,583.25165"\n       id="path2959"\n       sodipodi:nodetypes="cc"\n       transform="matrix(0.32231801,0,0,0.32231801,260.60086,378.95899)" /></g>\n    <text\n       xml:space="preserve"\n       style="font-style:normal;font-weight:normal;font-size:124.101px;line-height:1.25;font-family:sans-serif;letter-spacing:0px;word-spacing:0px;fill:#000000;fill-opacity:1;stroke:none;stroke-width:3.10253"\n       x="832.28497"\n       y="591.27563"\n       id="text3125-3"\n       transform="matrix(0.32231801,0,0,0.32231801,260.60086,378.95899)"><tspan\n         sodipodi:role="line"\n         id="tspan3123-1"\n         x="832.28497"\n         y="591.27563"\n         style="font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;font-size:18.6152px;font-family:sans-serif;-inkscape-font-specification:\'sans-serif, Normal\';font-variant-ligatures:normal;font-variant-caps:normal;font-variant-numeric:normal;font-variant-east-asian:normal;stroke-width:3.10253">[[ra]]</tspan></text>\n  </g>\n</svg>\n'}),require.register("debug/LineDump.js",function(t,e,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LineDump=void 0;var n=e("curvature/base/View");function i(t){"@babel/helpers - typeof";return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function o(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,u(n.key),n)}}function a(t,e){return(a=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function s(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=l(t);if(e){var o=l(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===i(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return c(t)}(this,r)}}function c(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function l(t){return(l=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function u(t){var e=function(t,e){if("object"!==i(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==i(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===i(e)?e:String(e)}let f=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&a(t,e)}(f,n.View);var e,r,i,l=s(f);function f(){var t,e,r,n;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,f);for(var i=arguments.length,o=new Array(i),a=0;a<i;a++)o[a]=arguments[a];return t=l.call(this,...o),e=c(t),n='<div class = "line-dump" style = "--x:[[x]];--y:[[y]];--length:[[len]];--angle:[[angle]]">\n\t\t<div class = "line" style = "border-color:[[color]]"></div>\n\t</div>',(r=u(r="template"))in e?Object.defineProperty(e,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[r]=n,t.args.x=t.args.x||0,t.args.y=t.args.y||0,t}return e=f,r&&o(e.prototype,r),i&&o(e,i),Object.defineProperty(e,"prototype",{writable:!1}),e}();t.LineDump=f}),require.register("debug/PointDump.js",function(t,e,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PointDump=void 0;var n=e("curvature/base/View");function i(t){"@babel/helpers - typeof";return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function o(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,u(n.key),n)}}function a(t,e){return(a=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function s(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=l(t);if(e){var o=l(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===i(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return c(t)}(this,r)}}function c(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function l(t){return(l=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function u(t){var e=function(t,e){if("object"!==i(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==i(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===i(e)?e:String(e)}let f=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&a(t,e)}(f,n.View);var e,r,i,l=s(f);function f(){var t,e,r,n;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,f);for(var i=arguments.length,o=new Array(i),a=0;a<i;a++)o[a]=arguments[a];return t=l.call(this,...o),e=c(t),n='<div class = "point-dump">\n\t\t<div class = "point" style = "--color:[[color]]">[[x]], [[y]]</div>\n\t</div>',(r=u(r="template"))in e?Object.defineProperty(e,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[r]=n,t.args.x=t.args.x||0,t.args.y=t.args.y||0,t}return e=f,r&&o(e.prototype,r),i&&o(e,i),Object.defineProperty(e,"prototype",{writable:!1}),e}();t.PointDump=f}),require.register("debug/arrow-east.svg",function(t,e,r){r.exports='<svg width="497.81px" height="497.81px" enable-background="new 0 0 497.812 497.812" version="1.1" viewBox="0 0 497.81 497.81" xmlns="http://www.w3.org/2000/svg">\n\t<g transform="matrix(-1 0 0 1 497.81 0)">\n\t\t<path d="m203.66 312.91 117.03 117.03-67.906 67.875-248.91-248.91 248.91-248.91 67.906 67.875-117.06 117.06 290.28-0.031 0.031 127.97z"/>\n\t</g>\n</svg>\n'}),require.register("effects/Cylinder.js",function(t,e,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Cylinder=void 0;var n=e("curvature/base/View"),i=e("curvature/base/Tag");function o(t){"@babel/helpers - typeof";return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function a(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,f(n.key),n)}}function s(t,e){return(s=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function c(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=u(t);if(e){var i=u(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===o(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return l(t)}(this,r)}}function l(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function u(t){return(u=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function f(t){var e=function(t,e){if("object"!==o(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==o(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===o(e)?e:String(e)}let p=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&s(t,e)}(h,n.View);var r,o,u,p=c(h);function h(t,r){var n,i,o,a;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,h),n=p.call(this,t,r),i=l(n),o="template",a=e("./twist.svg"),(o=f(o))in i?Object.defineProperty(i,o,{value:a,enumerable:!0,configurable:!0,writable:!0}):i[o]=a,n.args.scale=n.args.scale||0,n.args.id=n.args.id||"cylinder",n.args.width=n.args.width||64,n.args.height=n.args.height||64,n}return r=h,(o=[{key:"onRendered",value:function(){const t=new i.Tag(`<canvas width = "${this.args.width}" height = "${this.args.height}">`),e=t.getContext("2d");e.imageSmoothingEnabled=!1;const r=e.getImageData(0,0,this.args.width,this.args.height),n=r.data;for(let t=0;t<n.length;t+=4){var o,a,s;let e,r,i,c,l;const u=t/4,f=Math.floor(u/this.args.width),p=u%this.args.width-this.args.width/2,h=f-this.args.height/2;Math.hypot(p,h),Math.min(this.args.width,this.args.height);e=128+4*p*(l=Math.abs(p/this.args.width)/2),r=128,i=0,n[t+0]=null!==(o=e)&&void 0!==o?o:128,n[t+1]=null!==(a=r)&&void 0!==a?a:128,n[t+2]=null!==(s=i)&&void 0!==s?s:128,n[t+3]=null!==c&&void 0!==c?c:255}e.putImageData(r,0,0),t.toBlob(t=>this.args.blob=URL.createObjectURL(t),"image/png")}},{key:"name",get:function(){return`${this.args.id}`}}])&&a(r.prototype,o),u&&a(r,u),Object.defineProperty(r,"prototype",{writable:!1}),h}();t.Cylinder=p}),require.register("effects/Droop.js",function(t,e,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Droop=void 0;var n=e("curvature/base/View"),i=e("curvature/base/Tag");function o(t){"@babel/helpers - typeof";return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function a(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,p(n.key),n)}}function s(t,e){return(s=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function c(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=u(t);if(e){var i=u(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===o(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return l(t)}(this,r)}}function l(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function u(t){return(u=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function f(t,e,r){return(e=p(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function p(t){var e=function(t,e){if("object"!==o(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==o(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===o(e)?e:String(e)}let h=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&s(t,e)}(h,n.View);var r,o,u,p=c(h);function h(t,r){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,h),f(l(n=p.call(this,t,r)),"template",e("./droop.svg")),n.args.scale=n.args.scale||0,n.args.id=n.args.id||"droop",n.args.width=2*(t.width||64),n.args.height=t.height||64,n.args.intensity=1,n.args.droopWidth="102%",n}return r=h,u=[{key:"generateMap",value:function(t,e){const r=`${t}::${e}`,n=this.memoMaps;if(n.has(r))return n.get(r);const o=new i.Tag(`<canvas width = "${t}" height = "${e}">`),a=o.getContext("2d");a.imageSmoothingEnabled=!1;const s=a.getImageData(0,0,t,e),c=s.data;for(let e=0;e<c.length;e+=4){var l,u,f,p;let r,n,i,o;const a=e/4,s=a%t/t,h=(Math.floor(a/t),-Math.PI+s*Math.PI);r=128,n=128+Math.round(128*(.5*Math.cos(h)+.5)),i=0,o=255,c[e+0]=null!==(l=r)&&void 0!==l?l:128,c[e+1]=null!==(u=n)&&void 0!==u?u:128,c[e+2]=null!==(f=i)&&void 0!==f?f:128,c[e+3]=null!==(p=o)&&void 0!==p?p:255}a.putImageData(s,0,0);const h=new Promise(t=>o.toBlob(e=>{const r=URL.createObjectURL(e,"image/png");t(r)}));return n.set(r,h),h}}],(o=[{key:"onRendered",value:function(){this.constructor.generateMap(this.args.width,this.args.height).then(t=>{this.args.blob=t})}},{key:"name",get:function(){return`${this.args.id}`}}])&&a(r.prototype,o),u&&a(r,u),Object.defineProperty(r,"prototype",{writable:!1}),h}();t.Droop=h,f(h,"memoMaps",new Map)}),require.register("effects/Pinch.js",function(t,e,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Pinch=void 0;var n=e("curvature/base/View"),i=e("curvature/base/Tag");function o(t){"@babel/helpers - typeof";return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function a(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,f(n.key),n)}}function s(t,e){return(s=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function c(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=u(t);if(e){var i=u(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===o(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return l(t)}(this,r)}}function l(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function u(t){return(u=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function f(t){var e=function(t,e){if("object"!==o(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==o(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===o(e)?e:String(e)}let p=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&s(t,e)}(h,n.View);var r,o,u,p=c(h);function h(t,r){var n,i,o,a;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,h),n=p.call(this,t,r),i=l(n),o="template",a=e("./twist.svg"),(o=f(o))in i?Object.defineProperty(i,o,{value:a,enumerable:!0,configurable:!0,writable:!0}):i[o]=a,n.args.scale=n.args.scale||0,n.args.id=n.args.id||"pinch",n.args.width=n.args.width||64,n.args.height=n.args.height||64,n}return r=h,(o=[{key:"onRendered",value:function(){const t=new i.Tag(`<canvas width = "${this.args.width}" height = "${this.args.height}">`),e=t.getContext("2d");e.imageSmoothingEnabled=!1;const r=e.getImageData(0,0,this.args.width,this.args.height),n=r.data;for(let t=0;t<n.length;t+=4){var o,a,s;let e,r,i,c,l,u=0;const f=t/4,p=Math.floor(f/this.args.width),h=f%this.args.width-this.args.width/2,g=p-this.args.height/2,d=Math.hypot(h,g),y=Math.min(this.args.width,this.args.height)/2;d<y?(l=Math.pow(1-d/y,2),u=Math.pow(1-d/y,2)):(l=0,u=0),e=128+4*h*l,r=128+4*g*u,i=0,n[t+0]=null!==(o=e)&&void 0!==o?o:128,n[t+1]=null!==(a=r)&&void 0!==a?a:128,n[t+2]=null!==(s=i)&&void 0!==s?s:128,n[t+3]=null!==c&&void 0!==c?c:255}e.putImageData(r,0,0),t.toBlob(t=>this.args.blob=URL.createObjectURL(t),"image/png")}},{key:"name",get:function(){return`${this.args.id}`}}])&&a(r.prototype,o),u&&a(r,u),Object.defineProperty(r,"prototype",{writable:!1}),h}();t.Pinch=p}),require.register("effects/ScreenFire.js",function(t,e,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ScreenFire=void 0;var n=e("curvature/base/View");function i(t){"@babel/helpers - typeof";return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function o(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,u(n.key),n)}}function a(t,e){return(a=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function s(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=l(t);if(e){var o=l(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===i(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return c(t)}(this,r)}}function c(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function l(t){return(l=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function u(t){var e=function(t,e){if("object"!==i(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==i(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===i(e)?e:String(e)}let f=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&a(t,e)}(p,n.View);var r,i,l,f=s(p);function p(){var t,r,n,i;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,p);for(var o=arguments.length,a=new Array(o),s=0;s<o;s++)a[s]=arguments[s];return t=f.call(this,...a),r=c(t),n="template",i=e("./screen-fire"),(n=u(n))in r?Object.defineProperty(r,n,{value:i,enumerable:!0,configurable:!0,writable:!0}):r[n]=i,t}return r=p,(i=[{key:"onAttach",value:function(t){this.args.animation="playing"}}])&&o(r.prototype,i),l&&o(r,l),Object.defineProperty(r,"prototype",{writable:!1}),p}();t.ScreenFire=f}),require.register("effects/ScreenWarp.js",function(t,e,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ScreenWarp=void 0;var n=e("curvature/base/View");function i(t){"@babel/helpers - typeof";return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function o(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,u(n.key),n)}}function a(t,e){return(a=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function s(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=l(t);if(e){var o=l(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===i(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return c(t)}(this,r)}}function c(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function l(t){return(l=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function u(t){var e=function(t,e){if("object"!==i(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==i(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===i(e)?e:String(e)}let f=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&a(t,e)}(p,n.View);var r,i,l,f=s(p);function p(){var t,r,n,i;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,p);for(var o=arguments.length,a=new Array(o),s=0;s<o;s++)a[s]=arguments[s];return t=f.call(this,...a),r=c(t),n="template",i=e("./screen-fire"),(n=u(n))in r?Object.defineProperty(r,n,{value:i,enumerable:!0,configurable:!0,writable:!0}):r[n]=i,t}return r=p,(i=[{key:"onAttach",value:function(t){this.args.animation="playing",this.onTimeout(5e3,()=>this.remove())}}])&&o(r.prototype,i),l&&o(r,l),Object.defineProperty(r,"prototype",{writable:!1}),p}();t.ScreenWarp=f}),require.register("effects/Twist.js",function(t,e,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Twist=void 0;var n=e("curvature/base/View"),i=e("curvature/base/Tag");function o(t){"@babel/helpers - typeof";return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function a(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,f(n.key),n)}}function s(t,e){return(s=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function c(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=u(t);if(e){var i=u(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===o(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return l(t)}(this,r)}}function l(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function u(t){return(u=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function f(t){var e=function(t,e){if("object"!==o(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==o(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===o(e)?e:String(e)}let p=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&s(t,e)}(h,n.View);var r,o,u,p=c(h);function h(t,r){var n,i,o,a;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,h),n=p.call(this,t,r),i=l(n),o="template",a=e("./twist.svg"),(o=f(o))in i?Object.defineProperty(i,o,{value:a,enumerable:!0,configurable:!0,writable:!0}):i[o]=a,n.args.scale=n.args.scale||0,n.args.id=n.args.id||"twist",n.args.width=n.args.width||64,n.args.height=n.args.height||64,n.args.dx=0,n.args.dy=0,n}return r=h,(o=[{key:"onRendered",value:function(){const t=new i.Tag('<canvas width = "64" height = "64">'),e=t.getContext("2d");e.imageSmoothingEnabled=!1;const r=e.getImageData(0,0,64,64),n=r.data;for(let t=0;t<n.length;t+=4){var o,a;let e,r,i,s,c=1;const l=t/4,u=l%64-31.5,f=Math.floor(l/64)-31.5,p=Math.hypot(u,f);e=128+4*f*(c=p>32?0:Math.pow(1-p/32,3)),r=128-4*u*c,n[t+0]=null!==(o=e)&&void 0!==o?o:0,n[t+1]=null!==(a=r)&&void 0!==a?a:0,n[t+2]=null!==i&&void 0!==i?i:0,n[t+3]=null!==s&&void 0!==s?s:255}e.putImageData(r,0,0),t.toBlob(t=>this.args.blob=URL.createObjectURL(t),"image/png")}},{key:"name",get:function(){return`${this.args.id}`}}])&&a(r.prototype,o),u&&a(r,u),Object.defineProperty(r,"prototype",{writable:!1}),h}();t.Twist=p}),require.register("effects/droop.svg",function(t,e,r){r.exports='<svg\n\twidth  ="100%"\n\theight ="100%"\n>\n\t<defs>\n\n\t\t<filter\n\t\t\tcv-ref = "filter"\n\t\t\tcolor-interpolation-filters="sRGB"\n\t\t\tid = "[[id]]"\n\t\t\twidth  ="102%"\n\t\t\theight ="1204%"\n\t\t\tx  = "-1%"\n\t\t\ty  = "-2%"\n\n\t\t>\n\t\t\t<feImage\n\t\t\t\tpreserveAspectRatio = "none"\n\t\t\t\tresult  = "DisplacementSourceLeft"\n\t\t\t\tcv-attr = "width:droopWidthLeft,href:blob"\n\t\t\t/>\n\n\t\t\t<feImage\n\t\t\t\tpreserveAspectRatio = "none"\n\t\t\t\tresult  = "DisplacementSourceRightInvert"\n\t\t\t\tcv-attr = "x:droopRightStart,width:droopWidthRight,href:blob"\n\t\t\t/>\n\n\t\t\t<feColorMatrix\n\t\t\t\tin     = "DisplacementSourceRightInvert"\n\t\t\t\tresult = "DisplacementSourceRight"\n\t\t\t\ttype   = "matrix"\n\t\t\t\tvalues="\n\t\t\t\t\t1 0 0 0 0\n\t\t\t\t\t0 -1 0 0 1.5\n\t\t\t\t\t0 0 1 0 0\n\t\t\t\t\t0 0 0 1 0"\n\t\t\t/>\n\n\t\t\t<feComposite\n\t\t\t\toperator="over"\n\t\t\t\tin     = "DisplacementSourceLeft"\n\t\t\t\tin2    = "DisplacementSourceRight"\n\t\t\t\tresult = "DisplacementSource"\n\t\t\t\twidth  ="102%"\n\t\t\t/>\n\n\t\t\t<feFlood flood-color="#808000" result = "OffsetNeutral" />\n\n\t\t\t<feComposite\n\t\t\t\toperator="over"\n\t\t\t\tin     = "DisplacementSource"\n\t\t\t\tin2    = "OffsetNeutral"\n\t\t\t\tresult = "DisplacementResult"\n\t\t\t\twidth  ="102%"\n\t\t\t/>\n\n\t\t\t<feComposite\n\t\t\t\toperator="over"\n\t\t\t\tin     = "DisplacementSource"\n\t\t\t\tin2    = "OffsetNeutral"\n\t\t\t\tresult = "DisplacementResult"\n\t\t\t\twidth  ="102%"\n\t\t\t/>\n\n\t\t\t<feDisplacementMap\n\t\t\t\txChannelSelector = "R"\n\t\t\t\tyChannelSelector = "G"\n\t\t\t\tin      = "SourceGraphic"\n\t\t\t\tin2     = "DisplacementResult"\n\t\t\t\tcv-ref  = "displace"\n\t\t\t\tcv-attr = "scale:scale"\n\t\t\t\twidth  ="102%"\n\t\t\t/>\n\n\t\t</filter>\n\n\t</defs>\n</svg>\n'}),require.register("effects/screen-fire.html",function(t,e,r){r.exports='<div class = "screen-fire [[animation]]">\n\t<div class = "fire-strip" style = "--index:0"><div></div></div>\n\t<div class = "fire-strip" style = "--index:1"><div></div></div>\n\t<div class = "fire-strip" style = "--index:2"><div></div></div>\n\t<div class = "fire-strip" style = "--index:3"><div></div></div>\n\t<div class = "fire-strip" style = "--index:4"><div></div></div>\n\t<div class = "fire-strip" style = "--index:5"><div></div></div>\n\t<div class = "fire-strip" style = "--index:6"><div></div></div>\n\t<div class = "fire-strip" style = "--index:7"><div></div></div>\n\t<div class = "fire-strip" style = "--index:8"><div></div></div>\n\t<div class = "fire-strip" style = "--index:9"><div></div></div>\n\t<div class = "fire-strip" style = "--index:10"><div></div></div>\n\t<div class = "fire-strip" style = "--index:11"><div></div></div>\n\t<div class = "fire-strip" style = "--index:12"><div></div></div>\n\t<div class = "fire-strip" style = "--index:13"><div></div></div>\n\t<div class = "fire-strip" style = "--index:14"><div></div></div>\n\t<div class = "fire-strip" style = "--index:15"><div></div></div>\n\t<div class = "fire-strip" style = "--index:16"><div></div></div>\n</div>\n'}),require.register("effects/twist.svg",function(t,e,r){r.exports='<svg\n\theight ="100%"\n\twidth  ="100%"\n>\n\t<defs>\n\n\t\t<filter\n\t\t\tcv-ref = "filter"\n\t\t\tcolor-interpolation-filters="sRGB"\n\t\t\theight = "100%"\n\t\t\twidth  = "100%"\n\t\t\tid     = "[[id]]"\n\t\t\tx      = "0%"\n\t\t\ty      = "0%"\n\n\t\t>\n\t\t\t<feFlood\n\t\t\t\tflood-color="#808000"\n\t\t\t\theight = "100%"\n\t\t\t\twidth  = "100%"\n\t\t\t\tresult = "OffsetNeutral"\n\t\t\t\tx="0"\n\t\t\t\ty="0"\n\t\t\t/>\n\n\t\t\t<feImage\n\t\t\t\txlink:href="[[blob]]"\n\t\t\t\tresult = "DisplacementSource"\n\t\t\t\theight = "100%"\n\t\t\t\twidth  = "100%"\n\t\t\t/>\n\n\t\t\t<feOffset\n\t\t\t\tin      = "DisplacementSource"\n\t\t\t\tresult  = "OffsetSource"\n\t\t\t\tcv-attr =  "dx:dx,dy:dy"\n\t\t\t/>\n\n\t\t\t<feComposite\n\t\t\t\toperator="over"\n\t\t\t\tin2    = "OffsetNeutral"\n\t\t\t\tin     = "OffsetSource"\n\t\t\t\tresult = "DisplacementResult"\n\t\t\t/>\n\n\t\t\t<feDisplacementMap\n\t\t\t\txChannelSelector = "R"\n\t\t\t\tyChannelSelector = "G"\n\t\t\t\tin      = "SourceGraphic"\n\t\t\t\tin2     = "DisplacementResult"\n\t\t\t\tcv-ref  = "displace"\n\t\t\t\tcv-attr = "scale:scale"\n\t\t\t/>\n\n\t\t</filter>\n\n\t</defs>\n</svg>\n'}),require.register("initialize.js",function(t,e,r){"use strict";var n=e("./audio/Bgm"),i=e("./audio/Sfx"),o=e("./viewport/Viewport"),a=e("matrix-api/Matrix");if(n.Bgm.register("MENU_THEME","/Sonic/s3k-competition.mp3"),"/accept-sso"===location.pathname){const t="https://matrix.org/_matrix",e=new a.Matrix(t),r=new URLSearchParams(location.search).get("loginToken");e.completeSso(r)}else{const t=new o.Viewport;document.addEventListener("DOMContentLoaded",function(){console.log("Starting..."),navigator.serviceWorker&&navigator.serviceWorker.register("/worker-cache.js");let e=0;const r=n=>{const i=n-e;i<1e3/(t.args.maxFps||61)?requestAnimationFrame(r):(t.update(),t.args.fps=1e3/i,e=n,requestAnimationFrame(r))};t.render(document.body),r()}),n.Bgm.register("STAR_SHIELD","/audio/leslie-wai/feel-the-sunshine.mp3"),n.Bgm.register("RADICAL_CITY","/audio/colbreakz/848482_ColBreakz---My-Universe.mp3"),n.Bgm.register("WEST_SIDE","/audio/akselmcbossmcgee123/1066486_Blammed-By-Pico.mp3"),n.Bgm.register("UNDERGROUND_ZONE","/audio/tee-lopes/under-ground-zone-remix.mp3"),n.Bgm.register("MISTY_RUINS","audio/neil-voss/extol.mp3"),n.Bgm.register("MANIC_HARBOR","/audio/bobenshibobsled/1024371_Curse-Ska-Version.mp3"),n.Bgm.register("TITLE_THEME","/Sonic/carnival-night-zone-act-2-beta.mp3"),n.Bgm.register("TUTORIAL_THEME","/audio/teravex/1083419_Lowbeat.mp3"),n.Bgm.register("CITY_ESCAPE","/audio/senoue-jun/city-escape.mp3"),n.Bgm.register("AGORAPOLIS","/audio/AetheR/1063556_Forest.mp3"),n.Bgm.register("ACT-BOSS","/audio/F-777/Double-Cross.mp3"),n.Bgm.register("ZONE-BOSS","/audio/dex-arson/rampage.mp3"),n.Bgm.register("ACT_CLEAR","/audio/gta-sa/mission-passed.mp3",{volume:1}),n.Bgm.register("NO_WAY","/audio/sonic/no-way.mp3"),i.Sfx.register("WTF_BOOM","/audio/meme/wtf-boom.mp3"),i.Sfx.register("PLAYER_DAMAGED","/Sonic/S3K_35.wav"),i.Sfx.register("RINGS_SCATTERED","/Sonic/ring-loss.wav",{maxConcurrent:3,volume:.75,fudgeFactor:0}),i.Sfx.register("BUMPER_BOUNCE","/Sonic/S3K_AA.wav"),i.Sfx.register("BOOST_RING","/Sonic/S3K_CA.wav",{maxConcurrent:1,volume:.75,fudgeFactor:.2}),i.Sfx.register("RING_COLLECTED","/Sonic/ring-collect.wav",{maxConcurrent:3,volume:.25,fudgeFactor:.1}),i.Sfx.register("SPIKE_DAMAGE","/Sonic/S2_26.wav",{maxConcurrent:1,volume:.5,fudgeFactor:.1}),i.Sfx.register("EMBLEM_COLLECTED","/custom/emblem-collect.wav",{maxConcurrent:3,volume:.25,fudgeFactor:.1}),i.Sfx.register("EMERALD_COLLECTED","/Sonic/S3K_9C.wav"),i.Sfx.register("OBJECT_DESTROYED","/Sonic/object-destroyed.wav",{maxConcurrent:8,volume:.75,fudgeFactor:.3}),i.Sfx.register("BOX_DESTROYED","/Sonic/S3K_B4.wav",{maxConcurrent:4,volume:1,fudgeFactor:0,startTime:0}),i.Sfx.register("BLOCK_DESTROYED","/Sonic/0A3H.wav",{maxConcurrent:4,volume:1,fudgeFactor:0,startTime:.2,throttle:100}),i.Sfx.register("WORM_BLOCK_DESTROYED","/Sonic/0A3H.wav",{maxConcurrent:4,volume:.8,fudgeFactor:.2,startTime:.2,throttle:100}),i.Sfx.register("ROCKS_DESTROYED","/Sonic/rock-smash.wav"),i.Sfx.register("ROCK_BREAK_1","/Sonic/S1_B9.wav",{maxConcurrent:1,volume:.75,fudgeFactor:.3}),i.Sfx.register("ROCK_BREAK_2","/Sonic/S1_CB.wav",{maxConcurrent:1,volume:.5,fudgeFactor:.1}),i.Sfx.register("SPEEDPAD_HIT","/Sonic/S2_2B.wav",{maxConcurrent:3,volume:.75,fudgeFactor:.1}),i.Sfx.register("HALLBOOSTER_HIT","/Sonic/S3K_74.wav",{maxConcurrent:1,volume:.75,fudgeFactor:.1}),i.Sfx.register("SPRING_HIT","/Sonic/spring-activated.wav",{maxConcurrent:2,volume:.5,fudgeFactor:.1}),i.Sfx.register("NOTCH_SPRING_HIT","/Sonic/S3K_7B.wav",{maxConcurrent:1,volume:.5,fudgeFactor:.2}),i.Sfx.register("SWITCH_HIT","/Sonic/switch-activated.wav",{maxConcurrent:3,volume:.3,fudgeFactor:.2}),i.Sfx.register("ALT_BEEP","/Sonic/S2_28.wav",{maxConcurrent:8,volume:.5,fudgeFactor:.2}),i.Sfx.register("KNOCK_PLATFORM","/Sonic/S2_57.wav",{maxConcurrent:3,volume:.8,fudgeFactor:.2}),i.Sfx.register("STAR_TWINKLE","/Sonic/S2_27.wav",{maxConcurrent:3,volume:.8,fudgeFactor:.2}),i.Sfx.register("PAD_BOUNCE","/Sonic/S2_58.wav",{maxConcurrent:3,volume:.8,fudgeFactor:.2}),i.Sfx.register("SPRING_SHOT","/Sonic/S2_62.wav",{maxConcurrent:3,volume:.8,fudgeFactor:.2}),i.Sfx.register("QUICK_SLIDE","/Sonic/S2_5B.wav",{maxConcurrent:1,volume:.3,fudgeFactor:.2}),i.Sfx.register("SS_BWIP","/Sonic/S1_A9.wav",{maxConcurrent:1,volume:.7,fudgeFactor:.2}),i.Sfx.register("SS_BWIP_HIGH","/Sonic/S2_29.wav",{maxConcurrent:8,volume:.85,fudgeFactor:.2}),i.Sfx.register("WAIT_TONE","/Sonic/S3K_A7.wav",{maxConcurrent:8,volume:.5,fudgeFactor:.2}),i.Sfx.register("READY_TONE","/Sonic/S3K_AD.wav",{maxConcurrent:8,volume:.5,fudgeFactor:.2}),i.Sfx.register("STARPOST_HIT","/Sonic/starpost-active.wav",{volume:.5}),i.Sfx.register("SHOT_FIRED","/Sonic/shot-fired.wav",{volume:.5}),i.Sfx.register("THRUSTER_FIRED","/Sonic/mecha-sonic-thruster.wav"),i.Sfx.register("BOSS_DAMAGED","/Sonic/S3K_6E.wav"),i.Sfx.register("BOSS_DUDHIT","/Sonic/S2_59.wav"),i.Sfx.register("FAIL","/Sonic/S2_6D.wav"),i.Sfx.register("HEAVY_THUD","/Sonic/S3K_96.wav",{maxConcurrent:3,volume:1,fudgeFactor:.2,startTime:0}),i.Sfx.register("WOOD_THUD","/Sonic/S3K_5F_smoother.wav",{maxConcurrent:3,volume:1,fudgeFactor:.2,startTime:.04}),i.Sfx.register("WATER_ACQUIRE","/Sonic/S3K_3F.wav",{volume:.75,fudgeFactor:.1}),i.Sfx.register("WATER_BOUNCE","/Sonic/S3K_44.wav",{volume:.5,fudgeFactor:.1}),i.Sfx.register("ELECTRIC_ACQUIRE","/Sonic/S3K_41.wav",{volume:.75,fudgeFactor:.1}),i.Sfx.register("ELECTRIC_JUMP","/Sonic/S3K_45.wav",{maxConcurrent:3,volume:.5,fudgeFactor:.1}),i.Sfx.register("FIRE_ACQUIRE","/Sonic/S3K_3E.wav",{volume:.75,fudgeFactor:.1}),i.Sfx.register("FIRE_DASH","/Sonic/S3K_43.wav",{volume:.5,fudgeFactor:.1}),i.Sfx.register("CHOPPER_DRONE","/Sonic/drill-car-copter.wav"),i.Sfx.register("CHOPPER_GUN","/Sonic/010.Synth_MLT_se_ac_bf_ricochet.wav",{maxConcurrent:4,volume:.5,fudgeFactor:.25}),i.Sfx.register("MECHASONIC_TAKEOFF","/Sonic/mecha-sonic-takeoff.wav"),i.Sfx.register("MECHASONIC_SCRAPE","/Sonic/mecha-sonic-scrape.wav"),i.Sfx.register("MECHASONIC_SLAP","/Sonic/mecha-sonic-thruster-close.wav"),i.Sfx.register("TAILS_FLY","/Sonic/tails-flying.wav"),i.Sfx.register("DOOT_DOOT","/audio/meme/doot-doot.mp3"),i.Sfx.register("HOOK_GRABBED","/Sonic/S3K_4A.wav"),i.Sfx.register("LIGTNING_STRIKE","/Sonic/S3K_4E.wav",{maxConcurrent:1,volume:1,fudgeFactor:0}),i.Sfx.register("SECRET_FOUND","/doom/dssecret.wav"),i.Sfx.register("SICK_TRICK","/Sonic/S2_6C.wav",{volume:1,fudgeFactor:0,maxConcurrent:6}),i.Sfx.register("GRINDING","/Sonic/S3K_DB_sus.wav"),i.Sfx.register("SPIKES_OUT","/Sonic/S3K_A6.wav"),i.Sfx.register("SPIKES_IN","/Sonic/S3K_52.wav"),i.Sfx.register("LID_POP","/Sonic/S2_54.wav",{maxConcurrent:1,volume:.5,fudgeFactor:.25}),i.Sfx.register("PROP_PLAT","/Sonic/S3K_PropPlat.wav",{maxConcurrent:1,volume:.5,fudgeFactor:.25}),i.Sfx.register("POGO_BOUNCE","/Sonic/0A8H.wav",{maxConcurrent:3,volume:.5,fudgeFactor:.25}),i.Sfx.register("COPTER_SPIN","/Sonic/drill-car-copter.wav",{maxConcurrent:1,volume:.5,fudgeFactor:0}),i.Sfx.register("TOTAL_SCORE","/Sonic/S3K_B0.wav",{maxConcurrent:1,volume:1,fudgeFactor:0}),i.Sfx.register("TALLY_SCORE","/Sonic/B00_00_05.WAV",{maxConcurrent:1,volume:.5,fudgeFactor:0}),i.Sfx.register("TALLY_SCORE","/Sonic/027.Synth_MLT_menu_score menu text appear.wav",{maxConcurrent:1,volume:.5,fudgeFactor:0}),i.Sfx.register("RADIO_CHATTER_1","/thps2/CD_00171.wav",{maxConcurrent:1,volume:1,fudgeFactor:0}),i.Sfx.register("RADIO_CHATTER_2","/thps2/CD_00181.wav",{maxConcurrent:1,volume:1,fudgeFactor:0}),i.Sfx.register("BARREL_EXPLODE","/audio/doom/DSBAREXP.wav",{maxConcurrent:1,volume:1,fudgeFactor:0}),i.Sfx.register("SAP_HEALTH","/audio/pokemon/SFX_POISONED.wav",{maxConcurrent:1,volume:.5,fudgeFactor:.25,startTime:.1})}}),require.register("intro/BootCard.js",function(t,e,r){"use strict";function n(t){"@babel/helpers - typeof";return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(t,"__esModule",{value:!0}),t.BootCard=void 0;var i=e("./Card");function o(t,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,(o=i.key,void 0,"symbol"===n(a=function(t,e){if("object"!==n(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var i=r.call(t,e||"default");if("object"!==n(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(o,"string"))?a:String(a)),i)}var o,a}function a(t,e){return(a=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function s(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,i=c(t);if(e){var o=c(this).constructor;r=Reflect.construct(i,arguments,o)}else r=i.apply(this,arguments);return function(t,e){if(e&&("object"===n(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function c(t){return(c=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}let l=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&a(t,e)}(l,i.Card);var e,r,n,c=s(l);function l(t,e){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,l),(r=c.call(this,t,e)).args.cardName="boot-card",r.args.text="PRODUCED BY\nSEAN MORRIS UNDER\nTHE APACHE 2.0 LICENSE",r}return e=l,r&&o(e.prototype,r),n&&o(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}();t.BootCard=l}),require.register("intro/Card.js",function(t,e,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Card=void 0;var n=e("curvature/base/View");function i(t){"@babel/helpers - typeof";return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function o(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,u(n.key),n)}}function a(t,e){return(a=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function s(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=l(t);if(e){var o=l(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===i(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return c(t)}(this,r)}}function c(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function l(t){return(l=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function u(t){var e=function(t,e){if("object"!==i(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==i(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===i(e)?e:String(e)}let f=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&a(t,e)}(p,n.View);var r,i,l,f=s(p);function p(){var t;let r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1?arguments[1]:void 0;var i,o,a;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,p),t=f.call(this,r,n),i=c(t),o="template",a=e("./card.html"),(o=u(o))in i?Object.defineProperty(i,o,{value:a,enumerable:!0,configurable:!0,writable:!0}):i[o]=a,r.text=r.text||"this is an intro card.",t.args.timeout=t.args.timeout||1e3,t.args.animation="opening",t.done=new Promise(e=>t.accept=e),t}return r=p,(i=[{key:"play",value:function(t){this.onTimeout(50,()=>this.args.animation="opened");const e=this.args.waitFor||Promise.resolve();return new Promise(t=>{e.then(()=>{const e=this.args.timeout;e>0&&(this.onTimeout(e-500,()=>this.args.animation="closing"),this.onTimeout(e,()=>{this.args.animation="closed";const r=new Promise(t=>this.onTimeout(e,t));t(this.accept([r]))}))})})}}])&&o(r.prototype,i),l&&o(r,l),Object.defineProperty(r,"prototype",{writable:!1}),p}();t.Card=f}),require.register("intro/DebianCard.js",function(t,e,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DebianCard=void 0;var n=e("./SkippableCard");function i(t){"@babel/helpers - typeof";return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function o(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,u(n.key),n)}}function a(t,e){return(a=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function s(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=l(t);if(e){var o=l(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===i(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return c(t)}(this,r)}}function c(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function l(t){return(l=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function u(t){var e=function(t,e){if("object"!==i(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==i(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===i(e)?e:String(e)}let f=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&a(t,e)}(p,n.SkippableCard);var r,i,l,f=s(p);function p(t,r){var n,i,o,a;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,p),n=f.call(this,t,r),i=c(n),o="template",a=e("./debian-card.html"),(o=u(o))in i?Object.defineProperty(i,o,{value:a,enumerable:!0,configurable:!0,writable:!0}):i[o]=a,n.args.cardName="debian-card",n.args.text="",n}return r=p,i&&o(r.prototype,i),l&&o(r,l),Object.defineProperty(r,"prototype",{writable:!1}),r}();t.DebianCard=f}),require.register("intro/GamepadCard.js",function(t,e,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.GamepadCard=void 0;var n=e("./SkippableCard");function i(t){"@babel/helpers - typeof";return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function o(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,u(n.key),n)}}function a(t,e){return(a=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function s(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=l(t);if(e){var o=l(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===i(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return c(t)}(this,r)}}function c(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function l(t){return(l=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function u(t){var e=function(t,e){if("object"!==i(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==i(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===i(e)?e:String(e)}let f=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&a(t,e)}(p,n.SkippableCard);var r,i,l,f=s(p);function p(t,r){var n,i,o,a;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,p),n=f.call(this,t,r),i=c(n),o="template",a=e("./gamepad-card.html"),(o=u(o))in i?Object.defineProperty(i,o,{value:a,enumerable:!0,configurable:!0,writable:!0}):i[o]=a,n.args.timeout=2500,n.args.cardName="gamepad-card",n.args.text="",n}return r=p,i&&o(r.prototype,i),l&&o(r,l),Object.defineProperty(r,"prototype",{writable:!1}),r}();t.GamepadCard=f}),require.register("intro/LoadingCard.js",function(t,e,r){"use strict";function n(t){"@babel/helpers - typeof";return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(t,"__esModule",{value:!0}),t.LoadingCard=void 0;var i=e("./Card");function o(t,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,(o=i.key,void 0,"symbol"===n(a=function(t,e){if("object"!==n(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var i=r.call(t,e||"default");if("object"!==n(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(o,"string"))?a:String(a)),i)}var o,a}function a(t,e){return(a=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function s(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,i=c(t);if(e){var o=c(this).constructor;r=Reflect.construct(i,arguments,o)}else r=i.apply(this,arguments);return function(t,e){if(e&&("object"===n(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function c(t){return(c=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}let l=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&a(t,e)}(l,i.Card);var e,r,n,c=s(l);function l(t,e){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,l),(r=c.call(this,t,e)).args.cardName="loading-card",r}return e=l,r&&o(e.prototype,r),n&&o(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}();t.LoadingCard=l}),require.register("intro/LogoSplash.js",function(t,e,r){"use strict";function n(t){"@babel/helpers - typeof";return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(t,"__esModule",{value:!0}),t.LogoSplash=void 0;var i=e("curvature/base/View"),o=e("../audio/Sfx");function a(t,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,(o=i.key,void 0,"symbol"===n(a=function(t,e){if("object"!==n(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var i=r.call(t,e||"default");if("object"!==n(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(o,"string"))?a:String(a)),i)}var o,a}function s(t,e){return(s=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function c(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,i=l(t);if(e){var o=l(this).constructor;r=Reflect.construct(i,arguments,o)}else r=i.apply(this,arguments);return function(t,e){if(e&&("object"===n(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function l(t){return(l=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}let u=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&s(t,e)}(u,i.View);var e,r,n,l=c(u);function u(){var t;let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=arguments.length>1?arguments[1]:void 0;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,u),(t=l.call(this,e,r)).template='\n\t\t<div class = "player-waving"></div>\n\t\t<div class = "splash [[animation]]" style = "\n\t\t\tpointer-events: [[pointerEvents]]\n\t\t">\n\t\t\t<div class = "center">SEAN<span class = "min">MORRIS</span><div class = "sm">SM</div></div>\n\t\t\t<div class = "center">SEAN<span class = "min">MORRIS</span><div class = "sm">SM</div></div>\n\t\t\t<div class = "center">SEAN<span class = "min">MORRIS</span><div class = "sm">SM</div></div>\n\t\t</div>',t}return e=u,(r=[{key:"onAttached",value:function(){this.alreadyAttached||(this.alreadyAttached=!0,this.args.left=0,this.args.right=0,this.args.fade=1,this.args.frame=0,this.args.fullFade=1,this.args.pointerEvents="all",this.args.animation="hide",this.onTimeout(500,()=>this.args.animation="slide"),this.onTimeout(1250,()=>this.args.animation="show"),this.onTimeout(5e3,()=>this.args.animation="done"),this.onTimeout(1250,()=>o.Sfx.play("RING_COLLECTED")))}}])&&a(e.prototype,r),n&&a(e,n),Object.defineProperty(e,"prototype",{writable:!1}),u}();t.LogoSplash=u}),require.register("intro/NewgroundsCard.js",function(t,e,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.NewgroundsCard=void 0;var n=e("./SkippableCard");function i(t){"@babel/helpers - typeof";return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function o(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,u(n.key),n)}}function a(t,e){return(a=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function s(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=l(t);if(e){var o=l(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===i(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return c(t)}(this,r)}}function c(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function l(t){return(l=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function u(t){var e=function(t,e){if("object"!==i(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==i(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===i(e)?e:String(e)}let f=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&a(t,e)}(p,n.SkippableCard);var r,i,l,f=s(p);function p(t,r){var n,i,o,a;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,p),n=f.call(this,t,r),i=c(n),o="template",a=e("./newgrounds-card.html"),(o=u(o))in i?Object.defineProperty(i,o,{value:a,enumerable:!0,configurable:!0,writable:!0}):i[o]=a,n.args.timeout=2500,n.args.cardName="newgrounds-card",n.args.text="",n}return r=p,i&&o(r.prototype,i),l&&o(r,l),Object.defineProperty(r,"prototype",{writable:!1}),r}();t.NewgroundsCard=f}),require.register("intro/NoWayCard.js",function(t,e,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.NoWayCard=void 0;var n=e("./Card"),i=e("../audio/Bgm"),o=e("../ui/CharacterString");function a(t){"@babel/helpers - typeof";return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function s(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,p(n.key),n)}}function c(t,e){return(c=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function l(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=f(t);if(e){var i=f(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===a(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return u(t)}(this,r)}}function u(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function f(t){return(f=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function p(t){var e=function(t,e){if("object"!==a(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==a(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===a(e)?e:String(e)}let h=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&c(t,e)}(g,n.Card);var r,a,f,h=l(g);function g(t,r){var n,i,a,s;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,g),n=h.call(this,t,r),i=u(n),a="template",s=e("./no-way.html"),(a=p(a))in i?Object.defineProperty(i,a,{value:s,enumerable:!0,configurable:!0,writable:!0}):i[a]=s,n.args.cardName="no-way-card",n.args.text=new o.CharacterString({value:"Error: "+n.args.errorString}),n.args.backdrop="...",n}return r=g,(a=[{key:"onAttached",value:function(){i.Bgm.play("NO_WAY",{loop:!0})}}])&&s(r.prototype,a),f&&s(r,f),Object.defineProperty(r,"prototype",{writable:!1}),g}();t.NoWayCard=h}),require.register("intro/SaneCard.js",function(t,e,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SaneCard=void 0;var n=e("./SkippableCard");function i(t){"@babel/helpers - typeof";return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function o(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,u(n.key),n)}}function a(t,e){return(a=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function s(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=l(t);if(e){var o=l(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===i(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return c(t)}(this,r)}}function c(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function l(t){return(l=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function u(t){var e=function(t,e){if("object"!==i(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==i(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===i(e)?e:String(e)}let f=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&a(t,e)}(p,n.SkippableCard);var r,i,l,f=s(p);function p(t,r){var n,i,o,a;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,p),n=f.call(this,t,r),i=c(n),o="template",a=e("./sane-card.html"),(o=u(o))in i?Object.defineProperty(i,o,{value:a,enumerable:!0,configurable:!0,writable:!0}):i[o]=a,n.args.cardName="sane-card",n.args.text="",n}return r=p,i&&o(r.prototype,i),l&&o(r,l),Object.defineProperty(r,"prototype",{writable:!1}),r}();t.SaneCard=f}),require.register("intro/SeanCard.js",function(t,e,r){"use strict";function n(t){"@babel/helpers - typeof";return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(t,"__esModule",{value:!0}),t.SeanCard=void 0;var i=e("./Card"),o=e("./LogoSplash");function a(t,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,(o=i.key,void 0,"symbol"===n(a=function(t,e){if("object"!==n(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var i=r.call(t,e||"default");if("object"!==n(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(o,"string"))?a:String(a)),i)}var o,a}function s(t,e){return(s=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function c(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,i=l(t);if(e){var o=l(this).constructor;r=Reflect.construct(i,arguments,o)}else r=i.apply(this,arguments);return function(t,e){if(e&&("object"===n(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function l(t){return(l=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}let u=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&s(t,e)}(u,i.Card);var e,r,n,l=c(u);function u(t,e){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,u),(r=l.call(this,t,e)).args.cardName="sean-card",r.args.text=new o.LogoSplash({},e),r}return e=u,r&&a(e.prototype,r),n&&a(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}();t.SeanCard=u}),require.register("intro/Series.js",function(t,e,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Series=void 0;var n=e("curvature/base/View");e("./Card");function i(t){"@babel/helpers - typeof";return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function o(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,u(n.key),n)}}function a(t,e){return(a=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function s(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=l(t);if(e){var o=l(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===i(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return c(t)}(this,r)}}function c(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function l(t){return(l=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function u(t){var e=function(t,e){if("object"!==i(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==i(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===i(e)?e:String(e)}let f=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&a(t,e)}(f,n.View);var e,r,i,l=s(f);function f(){var t;let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=arguments.length>1?arguments[1]:void 0;var n,i,o;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,f),t=l.call(this,e,r),n=c(t),o='<div class = "intro-cards" cv-each = "cards:card:c">[[card]]</div>',(i=u(i="template"))in n?Object.defineProperty(n,i,{value:o,enumerable:!0,configurable:!0,writable:!0}):n[i]=o,t.cards=t.args.cards,t.args.cards=[],t.args.card=null,t.startTime=!1,t}return e=f,(r=[{key:"play",value:function(){if(!this.cards.length)return;const t=this.cards.shift(),e=new Promise(e=>t.onRemove(e)),r=t.play();this.args.cards.push(t),this.startTime=Date.now();const n=[e,t.done];return r&&n.push(r),Promise.race(n).then(e=>(e&&this.parent.onFrameOut(10,()=>t.remove()),this.cards.length?this.play():r))}},{key:"input",value:function(t){const e=this.args.cards[this.args.cards.length-1];e&&e.input&&e.input(t)}}])&&o(e.prototype,r),i&&o(e,i),Object.defineProperty(e,"prototype",{writable:!1}),f}();t.Series=f}),require.register("intro/SkippableCard.js",function(t,e,r){"use strict";function n(t){"@babel/helpers - typeof";return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(t,"__esModule",{value:!0}),t.SkippableCard=void 0;var i=e("./Card");function o(t,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,(o=i.key,void 0,"symbol"===n(a=function(t,e){if("object"!==n(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var i=r.call(t,e||"default");if("object"!==n(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(o,"string"))?a:String(a)),i)}var o,a}function a(){return(a="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=l(t)););return t}(t,e);if(n){var i=Object.getOwnPropertyDescriptor(n,e);return i.get?i.get.call(arguments.length<3?t:r):i.value}}).apply(this,arguments)}function s(t,e){return(s=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function c(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,i=l(t);if(e){var o=l(this).constructor;r=Reflect.construct(i,arguments,o)}else r=i.apply(this,arguments);return function(t,e){if(e&&("object"===n(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function l(t){return(l=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}let u=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&s(t,e)}(f,i.Card);var e,r,n,u=c(f);function f(t,e){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,f),(r=u.call(this,t,e)).args.cardName="skippable-card",r.args.text="",r}return e=f,(r=[{key:"input",value:function(t){!this.started||Date.now()+-this.started<500||(t.buttons[9]&&1===t.buttons[9].time||t.buttons[0]&&1===t.buttons[0].time)&&(this.onTimeout(200,()=>this.startPressed=!0),this.args.animation="closing")}},{key:"play",value:function(){return this.started=Date.now(),Promise.race([a(l(f.prototype),"play",this).call(this),new Promise(t=>this.onFrame(()=>{this.startPressed&&t()}))])}}])&&o(e.prototype,r),n&&o(e,n),Object.defineProperty(e,"prototype",{writable:!1}),f}();t.SkippableCard=u}),require.register("intro/ThankYouCard.js",function(t,e,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ThankYouCard=void 0;var n=e("./Card"),i=e("../ui/CharacterString");function o(t){"@babel/helpers - typeof";return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function a(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,f(n.key),n)}}function s(t,e){return(s=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function c(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=u(t);if(e){var i=u(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===o(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return l(t)}(this,r)}}function l(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function u(t){return(u=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function f(t){var e=function(t,e){if("object"!==o(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==o(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===o(e)?e:String(e)}let p=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&s(t,e)}(h,n.Card);var r,o,u,p=c(h);function h(t,r){var n,o,a,s;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,h),n=p.call(this,t,r),o=l(n),a="template",s=e("./thank-you.html"),(a=f(a))in o?Object.defineProperty(o,a,{value:s,enumerable:!0,configurable:!0,writable:!0}):o[a]=s,n.args.cardName="thank-you-card",n.args.text=new i.CharacterString({value:"Thank you for playing!"}),n.args.backdrop="...",n}return r=h,o&&a(r.prototype,o),u&&a(r,u),Object.defineProperty(r,"prototype",{writable:!1}),r}();t.ThankYouCard=p}),require.register("intro/TitleScreenCard.js",function(t,e,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TitleScreenCard=void 0;var n=e("./Card"),i=e("../ui/CharacterString"),o=e("../audio/Bgm"),a=e("../backdrop/MarbleGarden"),s=e("curvature/input/Keyboard");function c(t){"@babel/helpers - typeof";return(c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function l(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,d(n.key),n)}}function u(){return(u="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=g(t)););return t}(t,e);if(n){var i=Object.getOwnPropertyDescriptor(n,e);return i.get?i.get.call(arguments.length<3?t:r):i.value}}).apply(this,arguments)}function f(t,e){return(f=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function p(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=g(t);if(e){var i=g(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===c(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return h(t)}(this,r)}}function h(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function g(t){return(g=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function d(t){var e=function(t,e){if("object"!==c(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==c(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===c(e)?e:String(e)}let y=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&f(t,e)}(v,n.Card);var r,c,y,b=p(v);function v(t,r){var n,o,c,l;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,v),n=b.call(this,t,r),o=h(n),c="template",l=e("./titlescreen.html"),(c=d(c))in o?Object.defineProperty(o,c,{value:l,enumerable:!0,configurable:!0,writable:!0}):o[c]=l,n.args.cardName="title-screen-card",n.args.text="",n.args.backdrop="...",n.startPressed=!1;const u=new a.MarbleGarden;u.args.frame=0,u.args.x=0,u.args.y=140,u.args.xMax=1e4,u.args.yMax=800,n.started=0,s.Keyboard.get().reset();const f=s.Keyboard.get().codes.bindTo("Enter",t=>{!n.started||Date.now()-n.started<2e3||t<=0||void 0===t||(n.onTimeout(200,()=>n.startPressed=!0),n.args.animation="closing")});return n.onRemove(f),u.args.xPan=0,n.start=new Promise(t=>n.onFrame(()=>{if(n.started&&!(Date.now()-n.started<0)&&(u.args.xPan-=24,u.args.frame++,n.startPressed)){const e=new Promise(t=>n.onTimeout(200,t));t([e])}})),n.args.backdrop=u,n.args.pressStart=new i.CharacterString({value:"press start/enter"}),n}return r=v,(c=[{key:"input",value:function(t){if(!this.started||Date.now()-this.started<2e3)return void t.zero();t.buttons[9]&&1===t.buttons[9].time&&(this.onTimeout(200,()=>this.startPressed=!0),this.args.animation="closing")}},{key:"play",value:function(){this.onTimeout(1e3,()=>{this.onRemove(()=>o.Bgm.stop("TITLE_THEME")),o.Bgm.play("TITLE_THEME")}),this.onTimeout(2e3,()=>this.args.aurora="aurora"),this.started=Date.now();const t=u(g(v.prototype),"play",this).call(this);return Promise.race([this.start,t])}}])&&l(r.prototype,c),y&&l(r,y),Object.defineProperty(r,"prototype",{writable:!1}),v}();t.TitleScreenCard=y}),require.register("intro/WarningCard.js",function(t,e,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.WarningCard=void 0;var n=e("./SkippableCard");function i(t){"@babel/helpers - typeof";return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function o(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,u(n.key),n)}}function a(t,e){return(a=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function s(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=l(t);if(e){var o=l(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===i(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return c(t)}(this,r)}}function c(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function l(t){return(l=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function u(t){var e=function(t,e){if("object"!==i(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==i(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===i(e)?e:String(e)}let f=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&a(t,e)}(p,n.SkippableCard);var r,i,l,f=s(p);function p(t,r){var n,i,o,a;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,p),n=f.call(this,t,r),i=c(n),o="template",a=e("./warning-card.html"),(o=u(o))in i?Object.defineProperty(i,o,{value:a,enumerable:!0,configurable:!0,writable:!0}):i[o]=a,n.args.cardName="warning-card",n.args.text="",n}return r=p,i&&o(r.prototype,i),l&&o(r,l),Object.defineProperty(r,"prototype",{writable:!1}),r}();t.WarningCard=f}),require.register("intro/WebkitCard.js",function(t,e,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.WebkitCard=void 0;var n=e("./SkippableCard");function i(t){"@babel/helpers - typeof";return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function o(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,f(n.key),n)}}function a(){return(a="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=u(t)););return t}(t,e);if(n){var i=Object.getOwnPropertyDescriptor(n,e);return i.get?i.get.call(arguments.length<3?t:r):i.value}}).apply(this,arguments)}function s(t,e){return(s=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function c(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=u(t);if(e){var o=u(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===i(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return l(t)}(this,r)}}function l(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function u(t){return(u=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function f(t){var e=function(t,e){if("object"!==i(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==i(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===i(e)?e:String(e)}let p=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&s(t,e)}(g,n.SkippableCard);var r,i,p,h=c(g);function g(t,r){var n,i,o,a;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,g),n=h.call(this,t,r),i=l(n),o="template",a=e("./webkit-card.html"),(o=f(o))in i?Object.defineProperty(i,o,{value:a,enumerable:!0,configurable:!0,writable:!0}):i[o]=a,n.args.cardName="webkit-card",n.args.text="",n}return r=g,(i=[{key:"play",value:function(t){return this.onTimeout(1500,()=>this.args.animation="spindash-charge"),this.onTimeout(3e3,()=>this.args.animation="spindash"),a(u(g.prototype),"play",this).call(this,t)}}])&&o(r.prototype,i),p&&o(r,p),Object.defineProperty(r,"prototype",{writable:!1}),g}();t.WebkitCard=p}),require.register("intro/card.html",function(t,e,r){r.exports='<div class = "screen-card screen-card-[[cardName]] [[animation]]">\n\t<span>[[text]]</span>\n</div>\n'}),require.register("intro/debian-card.html",function(t,e,r){r.exports='<div class = "screen-card screen-card-[[cardName]] [[animation]] [[aurora]]">\n\t<div class = "main-elements-container">\n\t\t<div class = "debian-logo"></div>\n\t\t<div class = "caption">Built on Debian</div>\n\t</div>\n</div>\n'}),require.register("intro/gamepad-card.html",function(t,e,r){r.exports='<div class = "screen-card screen-card-[[cardName]] [[animation]] [[aurora]]">\n\t<div class = "main-elements-container">\n\t\t<div class = "gamepad-svg"></div>\n\t\t<div class = "caption">Supports HTML5 Gamepad API.</div>\n\t\t<div class = "button-callout">Toggle audio and fullscreen<div class = "arrow"></div></div>\n\t</div>\n</div>\n\n'}),require.register("intro/newgrounds-card.html",function(t,e,r){r.exports='<div class = "screen-card screen-card-[[cardName]] [[animation]] [[aurora]]">\n\t<div class = "main-elements-container">\n\t\t<div class = "caption">Special thanks to the artists on</div>\n\t\t<div class = "newgrounds-svg"></div>\n\t</div>\n</div>\n\n'}),require.register("intro/no-way.html",function(t,e,r){r.exports='<div class = "screen-card screen-card-[[cardName]] [[animation]] [[aurora]]">\n\t<div class = "player-waving"></div>\n\t<div class = "no-way"></div>\n\t<div class = "main-elements-container">\n\t\t[[text]]\n\t</div>\n</div>\n'}),require.register("intro/sane-card.html",function(t,e,r){r.exports='<div class = "screen-card screen-card-[[cardName]] [[animation]] [[aurora]]">\n\t<div class = "main-elements-container">\n\t\t<div><img src = "/icons/chaosean.svg" /></div>\n\t\t<div><img src = "/icons/sane-engine.svg" /></div>\n\t</div>\n</div>\n\n'}),require.register("intro/thank-you.html",function(t,e,r){r.exports='<div class = "screen-card screen-card-[[cardName]] [[animation]] [[aurora]]">\n\t<div class = "player-waving"></div>\n\t<div class = "main-elements-container">\n\t\t<div class = "title-emblem"></div>\n\t\t[[text]]\n\t</div>\n</div>\n'}),require.register("intro/titlescreen.html",function(t,e,r){r.exports='<div class = "screen-card screen-card-[[cardName]] [[animation]] [[aurora]]">\n\t[[backdrop]]\n\n\t<div class = "main-elements-container">\n\n\t\t<div class = "title-emblem"></div>\n\t\t<div class = "press-start">[[pressStart]]</div>\n\n\t</div>\n\n</div>\n'}),require.register("intro/warning-card.html",function(t,e,r){r.exports='<div class = "screen-card screen-card-[[cardName]] [[animation]] [[aurora]]">\n\t<div class = "main-elements-container">\n\t\t<div class = "warning-svg"></div>\n\t</div>\n</div>\n\n'}),require.register("intro/webkit-card.html",function(t,e,r){r.exports='<div class = "screen-card screen-card-[[cardName]] [[animation]] [[aurora]]">\n\t<div class = "main-elements-container">\n\t\t<div class = "chromium-logo"></div>\n\t\t<div class = "caption">WebKit recommended for best experience.</div>\n\t</div>\n</div>\n'}),require.register("legacy/Actor.js",function(t,e,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Actor=void 0;var n=e("curvature/base/View"),i=e("../debug/PointDump");function o(t){"@babel/helpers - typeof";return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function a(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,p(n.key),n)}}function s(t,e){return(s=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function c(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=u(t);if(e){var i=u(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===o(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return l(t)}(this,r)}}function l(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function u(t){return(u=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function f(t,e,r){return(e=p(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function p(t){var e=function(t,e){if("object"!==o(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==o(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===o(e)?e:String(e)}let h=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&s(t,e)}(h,n.View);var r,o,u,p=c(h);function h(){var t;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,h);for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return f(l(t=p.call(this,...n)),"speed",15),f(l(t),"template",e("./actor.html")),t.world=null,t.x=92,t.y=1024,t.width=64,t.height=64,t.boxWidth=64,t.boxHeight=64,t.directions=16,t.state="standing",t.gSpeed=0,t.gSpeedMax=40,t.xSpeed=0,t.ySpeed=0,t.angle=0,t.maxGravity=48,t.gravity=0,t.slopeFactor=.01,t.falling=!0,t.sensors={top:!1,bottom:!1,left:!1,right:!1},t.mode=t.args.mode=0,t.modes={floor:0,leftWall:1,ceiling:2,rightWall:3},t.animationClasses={},t.currentClasses=null,t.pdL=new i.PointDump({color:"red"}),t.pdR=new i.PointDump({color:"green"}),t.args.debugs=[t.pdL,t.pdR],t}return r=h,(o=[{key:"destroy",value:function(){}},{key:"update",value:function(){if(!this.tags.actor)return;let t=this.gSpeed;this.args.animspeed=Math.floor((this.gSpeedMax-Math.abs(t))/12),this.args.animspeed<1&&(this.args.animspeed=1);const e=Math.round(1e3*this.angle)/1e3;if(this.falling?(this.falling||this.jumped)&&(this.args.state="jumping"):(e>Math.PI/4&&e<2*Math.PI/4&&(this.mode===this.modes.floor?this.args.mode=this.mode=this.modes.leftWall:this.mode===this.modes.leftWall?this.args.mode=this.mode=this.modes.ceiling:this.mode===this.modes.ceiling?this.args.mode=this.mode=this.modes.rightWall:this.mode===this.modes.rightWall&&(this.args.mode=this.mode=this.modes.floor)),e<-Math.PI/4&&e>-2*Math.PI/4&&(this.mode===this.modes.floor?this.args.mode=this.mode=this.modes.rightWall:this.mode===this.modes.rightWall?this.args.mode=this.mode=this.modes.ceiling:this.mode===this.modes.ceiling?this.args.mode=this.mode=this.modes.leftWall:this.mode===this.modes.leftWall&&(this.args.mode=this.mode=this.modes.floor)),Math.abs(t)>this.gSpeedMax/2?this.args.state="running":Math.abs(t)>0?this.args.state="walking":this.args.state="standing",this.args.facing=t>0?"facing-right":"facing-left"),this.falling?this.mode==this.modes.floor?this.ySpeed++:this.mode==this.modes.ceiling?this.ySpeed--:this.mode==this.modes.leftWall?this.xSpeed--:this.mode==this.modes.rightWall&&this.xSpeed++:this.jumped||(this.xSpeed=0,this.ySpeed=0),this.x+=this.xSpeed,this.ySpeed&&(this.y+=this.ySpeed>0?1:-1),t){const e=8,r=Math.abs(t),n=r>e?e:r;for(let e=0;e<n;e++)this.iteratePosition(Math.floor(t/n))}else this.iteratePosition(0);this.ySpeed>32&&(this.ySpeed=32),this.ySpeed<-32&&(this.ySpeed=-32),this.xSpeed>32&&(this.xSpeed=32),this.xSpeed<-32&&(this.xSpeed=-32),this.tags.actor.style({"--x":Math.floor(this.x),"--y":Math.floor(this.y)}),this.mode===this.modes.floor?this.tags.actor.style({"--angle":this.angle}):this.mode===this.modes.leftWall?this.tags.actor.style({"--angle":this.angle+Math.PI/2*1}):this.mode===this.modes.ceiling?this.tags.actor.style({"--angle":this.angle+Math.PI/2*2}):this.mode===this.modes.rightWall&&this.tags.actor.style({"--angle":this.angle+Math.PI/2*3}),this.jumped&&(this.jumped=!1)}},{key:"iteratePosition",value:function(t){let e=Math.sin(this.angle),r=Math.cos(this.angle);const n=this.center,i=(this.top,this.bottom),o=(this.left,this.right);let a,s,c,l,u;this.mode==this.modes.floor||this.mode==this.modes.ceiling?(a=o-n[0],s=i-n[1]):this.mode!=this.modes.leftWall&&this.mode!=this.modes.rightWall||(a=o-n[1],s=i-n[0]),c=this.left-a*e+.5*a,l=this.right-a*e-.5*a,u=Math.abs(l-c);const f=this.viewport.tileMap;let p,h,g,d,y=0,b=0,v=!1,m=!1;const w=(this.falling,this.height),S=[[-w,0],[-w,w]];t:for(let t in S)for(y=S[t][0];y<S[t][1];){if(this.mode==this.modes.floor?(p=c,h=i+y):this.mode==this.modes.ceiling?(p=c,h=i-y):this.mode==this.modes.leftWall?(p=i-y,h=c):this.mode==this.modes.rightWall&&(p=i+y,h=c),v=f.getSolid(p,h)){if(0!==y)break t;break}y++}for(let t in S)for(b=S[t][0];b<S[t][1]&&(this.mode==this.modes.floor?(g=l,d=i+b):this.mode==this.modes.ceiling?(g=l,d=i-b):this.mode==this.modes.leftWall?(g=i-b,d=l):this.mode==this.modes.rightWall&&(g=i+b,d=l),!(m=f.getSolid(g,d)));)b++;if(this.pdL.args.x=p,this.pdL.args.y=h,this.pdR.args.x=g,this.pdR.args.y=d,this.angle=Math.atan((b-y)/u),!this.falling){let n=(y+b)/2;this.mode===this.modes.floor?(this.x+=t*r,this.y+=t*e):this.mode===this.modes.rightWall?(this.x+=t*e,this.y-=t*r):this.mode===this.modes.ceiling?(this.x-=t*r,this.y-=t*e):this.mode===this.modes.leftWall&&(this.x-=t*e,this.y+=t*r),v&&m&&y<=0&&b<=0&&(this.mode==this.modes.floor?this.y+=Math.ceil(n):this.mode==this.modes.ceiling?this.y-=Math.ceil(n):this.mode==this.modes.leftWall?this.x-=n:this.mode==this.modes.rightWall&&(this.x+=n))}this.falling=y>0&&b>0}},{key:"isColliding",value:function(t){}},{key:"animate",value:function(){this.animationClasses[animation]&&this.currentClasses!=this.animationClasses[animation]&&(this.currentClasses.map(function(t){this.tags.sprite.removeClass(t)}),this.animationClasses[animation].map(function(t){this.tags.sprite.addClass(t)}),this.currentClasses=this.animationClasses[animation])}},{key:"roundAngle",value:function(t,e){return 360*"Math.round"((t=Math.round(t*(180/Math.PI)))/(360/e))/e*(Math.PI/180)}},{key:"goLeft",value:function(){this.gSpeed>0&&(this.gSpeed=0),this.gSpeed>-this.gSpeedMax&&this.gSpeed--}},{key:"goRight",value:function(){this.gSpeed<0&&(this.gSpeed=0),this.gSpeed<this.gSpeedMax&&this.gSpeed++}},{key:"slowDown",value:function(){Math.abs(this.gSpeed)>32?this.gSpeed=.95*this.gSpeed:this.gSpeed=.75*this.gSpeed,Math.abs(this.gSpeed)<=.1&&(this.gSpeed=0)}},{key:"jump",value:function(){if(this.falling)return;let t;this.falling=!0,this.jumped=!0,this.mode=this.args.mode=this.modes.floor,this.mode===this.modes.floor?t=this.angle:this.mode===this.modes.leftWall?t=this.angle+Math.PI/2*1:this.mode===this.modes.ceiling?t=this.angle+Math.PI/2*2:this.mode===this.modes.rightWall&&(t=this.angle+Math.PI/2*3),this.angle=0,this.ySpeed=20*-Math.cos(t),this.xSpeed=20*Math.sin(t),this.mode!==this.modes.leftWall&&this.mode!==this.modes.rightWall||(this.gSpeed=0)}},{key:"center",get:function(){return[this.x+this.boxWidth/2,this.y+this.boxHeight/2]}},{key:"left",get:function(){return this.mode==this.modes.floor?this.center[0]-this.width/2:this.mode==this.modes.ceiling?this.center[0]+this.width/2:this.mode==this.modes.leftWall?this.center[1]-this.width/2:this.mode==this.modes.rightWall?this.center[1]+this.width/2:void 0}},{key:"right",get:function(){return this.mode==this.modes.floor?this.center[0]+this.width/2:this.mode==this.modes.ceiling?this.center[0]-this.width/2:this.mode==this.modes.leftWall?this.center[1]+this.width/2:this.mode==this.modes.rightWall?this.center[1]-this.width/2:void 0}},{key:"top",get:function(){return this.mode==this.modes.floor?this.center[1]-Math.floor(this.height/2):this.mode==this.modes.ceiling?this.center[1]+Math.floor(this.height/2):this.mode==this.modes.leftWall?this.center[0]+Math.floor(this.height/2):this.mode==this.modes.rightWall?this.center[0]-Math.floor(this.height/2):void 0}},{key:"bottom",get:function(){return this.mode==this.modes.floor?this.center[1]+Math.floor(this.height/2):this.mode==this.modes.ceiling?this.center[1]-Math.floor(this.height/2):this.mode==this.modes.leftWall?this.center[0]-Math.floor(this.height/2):this.mode==this.modes.rightWall?this.center[0]+Math.floor(this.height/2):void 0}}])&&a(r.prototype,o),u&&a(r,u),Object.defineProperty(r,"prototype",{writable:!1}),h}();t.Actor=h}),require.register("legacy/Walker.js",function(t,e,r){"use strict";function n(t){"@babel/helpers - typeof";return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(t,"__esModule",{value:!0}),t.Walker=void 0;var i=e("./Actor");function o(t,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,(o=i.key,void 0,"symbol"===n(a=function(t,e){if("object"!==n(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var i=r.call(t,e||"default");if("object"!==n(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(o,"string"))?a:String(a)),i)}var o,a}function a(t,e){return(a=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function s(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,i=c(t);if(e){var o=c(this).constructor;r=Reflect.construct(i,arguments,o)}else r=i.apply(this,arguments);return function(t,e){if(e&&("object"===n(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function c(t){return(c=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}let l=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&a(t,e)}(l,i.Actor);var e,r,n,c=s(l);function l(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,l),c.apply(this,arguments)}return e=l,r&&o(e.prototype,r),n&&o(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}();t.Walker=l}),require.register("legacy/actor.html",function(t,e,r){r.exports='<div class = "actor knuckles [[state]] [[facing]]" cv-ref = "actor" data-mode = "[[mode]]" style = "--animspeed:[[animspeed]]">\n\t<div class = "sprite" cv-ref = "sprite" ></div>\n</div>\n<div cv-each = "debugs:debug">[[debug]]</div>\n'}),require.register("lib/Analytic.js",function(t,e,r){"use strict";function n(t){"@babel/helpers - typeof";return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function i(t,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,(o=i.key,void 0,"symbol"===n(a=function(t,e){if("object"!==n(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var i=r.call(t,e||"default");if("object"!==n(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(o,"string"))?a:String(a)),i)}var o,a}Object.defineProperty(t,"__esModule",{value:!0}),t.Analytic=void 0;let o=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}var e,r,o;return e=t,o=[{key:"report",value:function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};"function"!==!("undefined"==typeof ga||n(ga))&&requestIdleCallback(()=>ga("send","event",t))}}],(r=null)&&i(e.prototype,r),o&&i(e,o),Object.defineProperty(e,"prototype",{writable:!1}),t}();t.Analytic=o}),require.register("lib/Color.js",function(t,e,r){"use strict";function n(t){"@babel/helpers - typeof";return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function i(t,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,(o=i.key,void 0,"symbol"===n(a=function(t,e){if("object"!==n(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var i=r.call(t,e||"default");if("object"!==n(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(o,"string"))?a:String(a)),i)}var o,a}function o(t){var e=c();return function(){var r,i=u(t);if(e){var o=u(this).constructor;r=Reflect.construct(i,arguments,o)}else r=i.apply(this,arguments);return function(t,e){if(e&&("object"===n(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function a(t){var e="function"==typeof Map?new Map:void 0;return(a=function(t){if(null===t||(r=t,-1===Function.toString.call(r).indexOf("[native code]")))return t;var r;if("function"!=typeof t)throw new TypeError("Super expression must either be null or a function");if(void 0!==e){if(e.has(t))return e.get(t);e.set(t,n)}function n(){return s(t,arguments,u(this).constructor)}return n.prototype=Object.create(t.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),l(n,t)})(t)}function s(t,e,r){return(s=c()?Reflect.construct.bind():function(t,e,r){var n=[null];n.push.apply(n,e);var i=new(Function.bind.apply(t,n));return r&&l(i,r.prototype),i}).apply(null,arguments)}function c(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}function l(t,e){return(l=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function u(t){return(u=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}Object.defineProperty(t,"__esModule",{value:!0}),t.Color=void 0;let f=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&l(t,e)}(c,a(Uint8Array));var e,r,n,s=o(c);function c(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,c),e=s.call(this,3),"string"==typeof t&&("#"===t[0]&&(t=t.substr(1)),"0"===t[0]||"x"===t[1]&&"X"===t[1]||(t="0x"+t),t=parseInt(t)),"number"==typeof t?(t>16777215&&(t%=16777215),e[0]=t>>16&255,e[1]=t>>8&255,e[2]=t>>0&255):Array.isArray(t)&&t.length<=3&&(e[0]=t[0],e[1]=t[1],e[2]=t[2]),e}return e=c,(r=[{key:"r",get:function(){return this[0]}},{key:"g",get:function(){return this[1]}},{key:"b",get:function(){return this[2]}},{key:"rf",get:function(){return this[0]/255}},{key:"gf",get:function(){return this[1]/255}},{key:"bf",get:function(){return this[2]/255}},{key:"rotate",value:function(t,e,r){const n=[this.rf,this.gf,this.bf],i=Math.max(...n),o=i-Math.min(...n);let a=0;o&&i===this.rf?a=(n[1]-n[2])/o%6*60:o&&i===this.gf?a=60*((n[2]-n[0])/o+2):o&&i===this.bf&&(a=60*((n[0]-n[1])/o+4));const s=0===o?0:o/i,c=i;let l=(a+t)%360;const u=Math.max(0,Math.min(s*e,1)),f=Math.max(0,Math.min(c*r,1));l<0&&(l+=360);const p=f*u,h=p*(1-Math.abs(l/60%2-1)),g=f-p;let d,y,b;return 0<=l&&l<60?(d=p+g,y=h+g,b=0+g):60<=l&&l<120?(d=h+g,y=p+g,b=0+g):120<=l&&l<180?(d=0+g,y=p+g,b=h+g):180<=l&&l<240?(d=0+g,y=h+g,b=p+g):240<=l&&l<300?(d=h+g,y=0+g,b=p+g):300<=l&&l<360&&(d=p+g,y=0+g,b=h+g),new this.constructor([255*d,255*y,255*b].map(Math.round))}},{key:"toString",value:function(){return String(Math.round(this[0]).toString(16).padStart(2,"0")+Math.round(this[1]).toString(16).padStart(2,"0")+Math.round(this[2]).toString(16).padStart(2,"0"))}},{key:"toPrimitive",value:function(){return(this[0]<<16)+(this[1]<<8)}}])&&i(e.prototype,r),n&&i(e,n),Object.defineProperty(e,"prototype",{writable:!1}),c}();t.Color=f}),require.register("mixin/CanPop.js",function(t,e,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CanPop=void 0;var n=e("curvature/base/Tag"),i=(e("../actor/Explosion"),e("../actor/Projectile")),o=e("../audio/Sfx"),a=e("../lib/Analytic");function s(t){"@babel/helpers - typeof";return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function c(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(i=n.key,void 0,"symbol"===s(o=function(t,e){if("object"!==s(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==s(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(i,"string"))?o:String(o)),n)}var i,o}let l=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}var e,r,s;return e=t,(r=[{key:"collideA",value:function(t,e){this.knocked&&t.pop&&this.pop(this.knocked);const r=this.viewport;if(this.args.invincible)return void t.damage(this);if(t.knocked)return t.pop&&t.pop(t.knocked),void this.pop(t.knocked);if(t.punching&&!this.knocked)return this.args.falling=!0,Math.abs(t.args.gSpeed||t.gSpeedLast)<5?void this.pop(t):(t.args.falling&&t.args.ySpeed<0?(this.args.ySpeed=-10+t.args.ySpeed,this.args.y-=18):(this.args.xSpeed=1.2*(t.args.gSpeed||t.gSpeedLast),this.args.ySpeed=-5,this.args.y-=18),this.args.x=t.args.x+24*t.args.direction+t.args.gSpeed,this.knocked=t,this.static=!1,this.viewport.onFrameOut(60,()=>this.pop(t)),!1);const n=this.args.currentSheild,o=t.immune(this,n?n.type:"normal");if(n&&!o||this.args.gone||!this.viewport||!(o||t.dashed||t.args.jumping||t.args.bellySliding||t.args.spinning||t instanceof i.Projectile&&t.args.owner&&t.args.owner.controllable))return!this.knocked&&t&&t.controllable&&!t.punching&&(r&&"function"==typeof ga&&a.Analytic.report({eventCategory:"badnik",eventAction:"damaged-player",eventLabel:`${r.args.actName}::${this.args.name}::${this.args.id}::${t.args.id}`}),t.args.mercy||(t.damage(this,n?n.type:"normal"),this.ignores.set(t,10))),!1;{const e=t.args.currentSheild;this.damage(t,e?e.type:t.args.damageType||"normal")}}},{key:"damage",value:function(t,e){if(this.args.invincible)return;if(!t)return void this.pop();const r=this.args.currentSheild,n=t.immune(this,r?r.type:"normal");r&&!n||this.args.gone||!this.viewport||!(n||t.dashed||t.args.jumping||t.args.bellySliding||t.args.spinning||t instanceof i.Projectile)||this.pop(t)}},{key:"pop",value:function(t){const e=this.viewport;if(!e||this.args.gone||this.args.invincible||t&&t.args.owner===this)return;this.args.gone=!0;const r=document.createElement("div");r.classList.add("particle-explosion");const i=new n.Tag(r);if(i.style({"--x":this.args.x,"--y":this.args.y-16}),e.particles.add(i),e.onFrameOut(30,()=>e.particles.remove(i)),e.onFrameOut(90,()=>this.screen&&this.screen.remove()),this.box&&this.box.setAttribute("data-animation","broken"),t&&t.dashed&&(Math.abs(t.args.xSpeed)>Math.abs(t.args.ySpeed)&&(t.args.gSpeed=0,t.args.xSpeed=-1.5*Math.sign(t.args.xSpeed),t.args.ySpeed=-10),t.dashed=!1),t){if(t.args.doubleSpin&&(t.args.doubleSpin=2),t.occupant&&(t=t.occupant),t.args.owner&&(t=t.args.owner),t.controllable&&"function"==typeof this.effect){let r=100;this.args.gold&&(r=1e4);const i={label:this.name||this.args.name,points:r,multiplier:1};if(this.args.gold&&(i.label="Gold "+i.label,i.color="orange",i.special=!0),!t.isVehicle&&t.args.ySpeed>5&&t.args.ySpeed<25&&Math.abs(t.args.ySpeed)>Math.abs(t.args.xSpeed)&&(t.args.cameraMode="popping"),t.args.popCombo+=1,t.args.popChain.push(i),t.args.ySpeed>25&&!t.args.bouncing){const r={label:"BIG AIR!!!",points:1e3,multiplier:2};t.args.popChain.push(r),t.args.popCombo+=1,!t.airReward&&Math.abs(t.args.xSpeed)>10&&(t.args.x=this.args.x,t.args.y=this.args.y+-8,e.onFrameOut(1,()=>e.args.frozen=25),e.args.invert="invert",e.onFrameOut(25,()=>e.args.invert=""),o.Sfx.play("SICK_TRICK"),o.Sfx.play("SICK_TRICK")),t.airReward=r}const a=document.createElement("div");switch(a.classList.add("particle-score"),new n.Tag(a).style({"--x":this.args.x,"--y":this.args.y-16}),!0){case this.args.gold:r=1e4;break;case 1===t.args.popCombo:r=100;break;case 2===t.args.popCombo:r=200;break;case 3===t.args.popCombo:r=300;break;case 4===t.args.popCombo:r=400;break;case 5===t.args.popCombo:r=500;break;case 6===t.args.popCombo:r=600;break;case 7===t.args.popCombo:r=700;break;case 8===t.args.popCombo:r=800;break;case 9===t.args.popCombo:r=900;break;case t.args.popCombo>=10:r=1e3}this.effect(t)}const r=Math.min(t.args.ySpeed,t.ySpeedLast);if(t.args.falling&&!t.punching){const n=t.args.spinning,i=t.args.jumping,o=t.args.flying,a=t.args.xSpeed||t.args.gSpeed;e.onFrameOut(1,()=>{r>=0?t.flyTime<5?t.args.ySpeed=Math.min(-r,-7):t.args.ySpeed=Math.min(-r,-2):t.args.ySpeed+=8,t.args.spinning=t.args.spinning||n,t.args.jumping=t.args.jumping||i,t.args.flying=t.args.flying||o,t.args.xSpeed=a,t.args.falling=!0})}t.dashed=!1,this.viewport.settings.rumble&&t&&t.controller&&t.controller.rumble&&(t.controller.rumble({duration:40,strongMagnitude:0,weakMagnitude:1}),this.viewport.onTimeout(40,()=>{t.controller.rumble({duration:110,strongMagnitude:.75,weakMagnitude:1})}))}if(this.args.target&&this.viewport.actorsById[this.args.target]){const e=this.viewport.actorsById[this.args.target];e&&(this.viewport.auras.add(e),e.activate(t,this))}o.Sfx.play("OBJECT_DESTROYED"),"function"==typeof ga&&a.Analytic.report({eventCategory:"badnik",eventAction:"defeated",eventLabel:`${e.args.actName}::${this.args.name}::${this.args.id}`}),this.viewport.actors.remove(this)}}])&&c(e.prototype,r),s&&c(e,s),Object.defineProperty(e,"prototype",{writable:!1}),t}();t.CanPop=l}),require.register("mixin/Constrainable.js",function(t,e,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Constrainable=void 0;var n=e("curvature/base/Tag");const i={initialize:function(){if(!this.others.tiedTo)return;const t=this.others.tiedTo;if(t&&!t.hanging.has(this.constructor)){t.hanging.set(this.constructor,new Set);const e=t.hanging.get(this.constructor);e.add(this),this.chain=new n.Tag('<div class = "chain">'),this.sprite.appendChild(this.chain.node),this.onRemove(()=>e.delete(this))}this.setPos()},wakeUp:function(){},sleep:function(){this.viewport&&!this.args.stay&&this.def&&this.viewport.onFrameOut(5,()=>{this.args.x=this.def.get("x"),this.args.y=this.def.get("y"),this.args.xSpeed=0,this.args.ySpeed=0,this.viewport.setColCell(this)})},setPos:function(){let t=null;if(t=this.getMapSolidAt(this.args.x,this.args.y),this.hooked&&Array.isArray(t)&&(t=t.filter(t=>!this.hooked.has(t)).length),t&&!this.getMapSolidAt(this.args.x,this.args.y+1)&&this.args.y++,!this.others.tiedTo)return;const e=this.others.tiedTo;if(!e)return!1;this.args.ropeLength=this.args.ropeLength||e.args.ropeLength,this.args.falling=!0;const r=e.args.x,n=e.args.y,i=r-this.args.x,o=n-this.args.y,a=Math.atan2(o,i),s=Math.hypot(o,i),c=this.args.ropeLength||64;this.chain&&this.chain.style({"--distance":Math.min(s,c)}),this.args.groundAngle=-(a+Math.PI/2);const l=a;if(s>c){const t=s-c,i=r-Math.cos(a)*c,o=n-Math.sin(a)*c;this.args.xSpeed+=Math.cos(l)*t,this.args.ySpeed+=Math.sin(l)*t,this.args.xSpeedMax<Math.abs(this.args.xSpeed)&&(this.args.xSpeed=this.args.xSpeedMax*Math.sign(this.args.xSpeed)),this.args.ySpeedMax<Math.abs(this.args.ySpeed)&&(this.args.ySpeed=this.args.ySpeedMax*Math.sign(this.args.ySpeed)),this.args.gSpeed=this.args.xSpeed,this.args.x=i,this.args.y=o,this.viewport&&this.viewport.setColCell(this),this.args.x!==r||e.args.xSpeed||e.args.gSpeed||(this.args.ySpeed=0)}e.args.ySpeed>0&&!e.args.xSpeed&&!this.args.xSpeed&&(this.args.x=r,this.args.y=n+this.args.ropeLength)}};t.Constrainable=i}),require.register("mixin/Pushable.js",function(t,e,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Pushable=void 0;var n=e("../actor/Ring");const i={collideA:function(t,e){if(t instanceof n.Ring)return!1;if(-1===e||t.isEffect)return!1;let r=Math.ceil(Math.abs(t.args.gSpeed||t.args.xSpeed))*Math.sign(t.args.gSpeed||t.args.xSpeed);if(Math.abs(t.args.ySpeed)>Math.abs(t.args.xSpeed))return!0;if(!this.args.falling&&1===e&&r<=0)return!1;if(!this.args.falling&&3===e&&r>=0)return!1;const i=this.y-this.args.height;if((1===e||3===e)&&(t.y>=this.y||t.y>i)){if(!r)return!0;this.args.gSpeed=r,this.args.pushed=Math.sign(r)||this.args.pushed;const n=this.viewport.tileMap,i=1===e?1:3===e&&-1,o=this.scanBottomEdge(i);if(n.getSolid(this.x+Math.ceil(this.args.width/2)*i,this.y))return!0;const a=this.args.width/2;if(i>0&&0===o)this.args.falling=!0;else if(i<0&&0===o)this.args.falling=!0;else if(!this.args.falling||o>0){const e=this.bMap("findNextStep",i).get(Platformer),r=this.bMap("findNextStep",i+a*Math.sign(i)).get(Platformer);if((!e[1]||e[2])&&!r[3]){const e=t.args.width,r=this.args.width/2;return this.args.x=t.args.x+i*(r+e),0===o}return!0}}return!0}};t.Pushable=i}),require.register("network/ChatBox.js",function(t,e,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ChatBox=void 0;var n=e("curvature/base/View");function i(t){"@babel/helpers - typeof";return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function o(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,u(n.key),n)}}function a(t,e){return(a=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function s(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=l(t);if(e){var o=l(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===i(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return c(t)}(this,r)}}function c(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function l(t){return(l=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function u(t){var e=function(t,e){if("object"!==i(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==i(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===i(e)?e:String(e)}let f=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&a(t,e)}(p,n.View);var r,i,l,f=s(p);function p(t,r){var i,o,a,s;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,p),i=f.call(this,t,r),o=c(i),a="template",s=e("./chat-box.html"),(a=u(a))in o?Object.defineProperty(o,a,{value:s,enumerable:!0,configurable:!0,writable:!0}):o[a]=s,i.args.outputLines=[];return i.listen(t.pipe,"open",t=>i.args.outputLines=["You joined the chat."]),i.listen(t.pipe,"message",t=>{const e=JSON.parse(t.detail);e.message&&(i.args.outputLines.push(n.View.from('> <span class = "incoming">[[message]]</span>',{message:e.message})),i.onNextFrame(()=>{const t=i.tags.chatOutput;t&&t.scrollTo(0,t.scrollHeight)}))}),i}return r=p,(i=[{key:"send",value:function(t){if(t&&t.key&&"Enter"!==t.key)return;const e=this.args.chatInput;e&&(this.args.outputLines.push(`< ${e}`),this.args.chatInput="",this.onNextFrame(()=>{const t=this.tags.chatOutput;t.scrollTo(0,t.scrollHeight),t.focus()}),this.args.pipe.send(JSON.stringify({message:e})))}}])&&o(r.prototype,i),l&&o(r,l),Object.defineProperty(r,"prototype",{writable:!1}),p}();t.ChatBox=f}),require.register("network/CryptoMessage.js",function(t,e,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CryptoMessage=void 0;var n=e("curvature/base/Uuid"),i=e("./CryptoReply");function o(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,i,o,a,s=[],c=!0,l=!1;try{if(o=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=o.call(r)).done)&&(s.push(n.value),s.length!==e);c=!0);}catch(t){l=!0,i=t}finally{try{if(!c&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(l)throw i}}return s}}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return a(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return a(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function a(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function s(t){"@babel/helpers - typeof";return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function c(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,u(n.key),n)}}function l(t,e,r){return(e=u(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function u(t){var e=function(t,e){if("object"!==s(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==s(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===s(e)?e:String(e)}let f=function(){function t(e){let r=e.content,i=e.sender,o=e.uuid,a=e.re,s=e.foreignKey,c=e.publicKey;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),l(this,"content",void 0),l(this,"sender",void 0),l(this,"uuid",void 0),l(this,"re",void 0),l(this,"encryptedSymmetricKey",void 0),l(this,"foreignKey",void 0),l(this,"publicKey",void 0),this.uuid=o||String(new n.Uuid),Object.assign(this,{content:r,sender:i,re:a,foreignKey:s,publicKey:c})}var e,r,a;return e=t,(r=[{key:"createReply",value:function(t){const e=window.crypto.subtle.generateKey({name:"AES-GCM",length:256},!0,["encrypt","decrypt"]),r=e.then(t=>window.crypto.subtle.exportKey("raw",t)),n=window.crypto.getRandomValues(new Uint8Array(12)),a=r.then(t=>{const e=new Uint8Array([...n,...new Uint8Array(t)]);return window.crypto.subtle.encrypt({name:"RSA-OAEP"},this.foreignKey,e)});"object"===s(t)&&(console.warn("Encoding non-string value with JSON.stringify()."),t=JSON.stringify(t));const c=fetch("data:text/plain,"+t).then(t=>t.arrayBuffer()),l=Promise.all([e,c]).then(t=>{let e=o(t,2),r=e[0],i=e[1];return window.crypto.subtle.encrypt({name:"AES-GCM",iv:n},r,i)}),u=window.crypto.subtle.exportKey("spki",this.publicKey);return Promise.all([l,a,u]).then(t=>{let e=o(t,3),r=e[0],n=e[1],a=e[2];return new i.CryptoReply({packet:btoa(String.fromCharCode(...new Uint8Array(r))),key:btoa(String.fromCharCode(...new Uint8Array(n))),pub:btoa(String.fromCharCode(...new Uint8Array(a))),uuid:this.uuid,to:this.sender,re:this.re})})}}])&&c(e.prototype,r),a&&c(e,a),Object.defineProperty(e,"prototype",{writable:!1}),t}();t.CryptoMessage=f}),require.register("network/CryptoMessageService.js",function(t,e,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CryptoMessageService=void 0;var n=e("./CryptoMessage"),i=e("curvature/base/Uuid");function o(t){"@babel/helpers - typeof";return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function a(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,i,o,a,s=[],c=!0,l=!1;try{if(o=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=o.call(r)).done)&&(s.push(n.value),s.length!==e);c=!0);}catch(t){l=!0,i=t}finally{try{if(!c&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(l)throw i}}return s}}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return s(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return s(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function s(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function c(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,l(n.key),n)}}function l(t){var e=function(t,e){if("object"!==o(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==o(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===o(e)?e:String(e)}let u=function(){function t(){var e,r,n;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),e=this,r="requests",n=new Map,(r=l(r))in e?Object.defineProperty(e,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[r]=n}var e,r,o;return e=t,(r=[{key:"invite",value:function(t){const e=String(new i.Uuid),r=window.crypto.subtle.generateKey({name:"RSA-OAEP",modulusLength:2048,publicExponent:new Uint8Array([1,0,1]),hash:"SHA-256"},!0,["encrypt","decrypt"]);return r.then(t=>this.requests.set(e,{keyPair:t})),r.then(t=>window.crypto.subtle.exportKey("spki",t.publicKey)).then(r=>({pub:btoa(String.fromCharCode(...new Uint8Array(r))),uuid:e,to:t}))}},{key:"accept",value:function(t){const e=t.content.pub,r=t.content.uuid,o=t.content.re,s=t.sender,c=String(new i.Uuid),l=fetch("data:text/plain;base64,"+e).then(t=>t.arrayBuffer()).then(t=>window.crypto.subtle.importKey("spki",t,{name:"RSA-OAEP",hash:"SHA-256"},!0,["encrypt"])),u=window.crypto.subtle.generateKey({name:"RSA-OAEP",modulusLength:2048,publicExponent:new Uint8Array([1,0,1]),hash:"SHA-256"},!0,["encrypt","decrypt"]);u.then(t=>this.requests.set(c,{keyPair:t}));let f=Promise.resolve();if(t.content.key&&this.requests.has(o)){const e=this.requests.get(o),r=t.content.key,n=(t.content.iv,t.content.packet);this.requests.delete(o);const i=fetch("data:text/plain;base64,"+r).then(t=>t.arrayBuffer()).then(t=>window.crypto.subtle.decrypt({name:"RSA-OAEP"},e.keyPair.privateKey,t)).then(t=>{const e=new Uint8Array(t),r=e.slice(0,12),n=e.slice(12),i=window.crypto.subtle.importKey("raw",n,{name:"AES-GCM",length:256},!0,["decrypt"]);return Promise.all([i,r])}),s=fetch("data:text/plain;base64,"+n).then(t=>t.arrayBuffer());f=Promise.all([i,s]).then(t=>{let e=a(t,2),r=e[0],n=e[1];return window.crypto.subtle.decrypt({name:"AES-GCM",iv:r[1]},r[0],n)}).then(t=>{return new Blob([t],{type:"text/plain; charset=utf-8"}).text()})}return Promise.all([u,l,f]).then(t=>{let e=a(t,3),i=e[0].publicKey,o=e[1],l=e[2];return new n.CryptoMessage({uuid:c,foreignKey:o,publicKey:i,content:l,sender:s,re:r})})}}])&&c(e.prototype,r),o&&c(e,o),Object.defineProperty(e,"prototype",{writable:!1}),t}();t.CryptoMessageService=u}),require.register("network/CryptoReply.js",function(t,e,r){"use strict";function n(t){"@babel/helpers - typeof";return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function i(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,a(n.key),n)}}function o(t,e,r){return(e=a(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function a(t){var e=function(t,e){if("object"!==n(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var i=r.call(t,e||"default");if("object"!==n(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===n(e)?e:String(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.CryptoReply=void 0;let s=function(t,e,r){return e&&i(t.prototype,e),r&&i(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}(function t(e){let r=e.packet,n=e.label,i=e.uuid,a=e.key,s=e.pub,c=e.re,l=e.to;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),o(this,"packet",void 0),o(this,"label",void 0),o(this,"uuid",void 0),o(this,"key",void 0),o(this,"pub",void 0),o(this,"re",void 0),o(this,"to",void 0),Object.assign(this,{packet:r,label:n,uuid:i,key:a,pub:s,re:c,to:l})});t.CryptoReply=s}),require.register("network/Lobby.js",function(t,e,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Lobby=void 0;var n=e("curvature/base/View"),i=(e("curvature/base/Uuid"),e("curvature/base/Bag")),o=e("./LobbyMessage"),a=e("./LobbyStatus"),s=e("./CryptoMessageService"),c=e("../audio/Bgm"),l=e("../audio/Sfx");function u(t){"@babel/helpers - typeof";return(u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function f(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,i,o,a,s=[],c=!0,l=!1;try{if(o=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=o.call(r)).done)&&(s.push(n.value),s.length!==e);c=!0);}catch(t){l=!0,i=t}finally{try{if(!c&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(l)throw i}}return s}}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return p(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return p(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function p(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function h(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,m(n.key),n)}}function g(t,e){return(g=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function d(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=b(t);if(e){var i=b(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===u(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return y(t)}(this,r)}}function y(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function b(t){return(b=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function v(t,e,r){return(e=m(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function m(t){var e=function(t,e){if("object"!==u(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==u(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===u(e)?e:String(e)}let w=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&g(t,e)}(m,n.View);var r,u,p,b=d(m);function m(t,r){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,m),v(y(n=b.call(this,t,r)),"template",e("./lobby.html")),v(y(n),"messageService",new s.CryptoMessageService),v(y(n),"floodControl",new Map),v(y(n),"requests",new Map),v(y(n),"users",new Map),v(y(n),"serverCandidates",new Set),v(y(n),"clientCandidates",new Set),v(y(n),"isClient",null),v(y(n),"sortByName",(t,e)=>t.username.localeCompare(e.username)),v(y(n),"sortByTime",(t,e)=>e.lastSeen-t.lastSeen),v(y(n),"sorting",!1),n.refreshRtc(),n.args.roomId=n.args.roomId||"!hJzXrccruagKGXTFUQ:matrix.org",n.args.invites=new i.Bag,n.args.loading=!0,n.args.userList=[],n.args.users=new i.Bag((t,e,r)=>{n.sortUsers()}),n.args.motd="Welcome to the Sonic 3000 test lobby! We're still building and testing, so check back soon for updates. Click a user's name on the left to send an invite.",n.args.messages=[],r.matrixConnect().then(t=>{n.matrix=t,n.matrix.putEvent(n.args.roomId,"sonic-3000.lobby.step-in",{}),t.whoAmI().then(t=>{n.user=t,n.args.username=t.user_id});const e=t.listenForRoomEvents(n.args.roomId);n.onRemove(()=>e.cancelled=!0),t.joinRoom(n.args.roomId),n.listen(t,"sonic-3000.lobby.message",t=>n.handleLobbyMessage(t)),n.listen(t,"sonic-3000.lobby.step-out",t=>n.handleLobbyStepOut(t)),n.listen(t,"sonic-3000.lobby.step-in",t=>n.handleLobbyStepIn(t)),n.listen(t,"sonic-3000.lobby.crypto-game-invite",t=>n.handleCryptoGameInvite(t)),n.listen(t,"sonic-3000.lobby.crypto-game-offer",t=>n.handleCryptoGameOffer(t)),n.listen(t,"sonic-3000.lobby.crypto-game-accept",t=>n.handleCryptoGameAccept(t)),n.listen(t,"sonic-3000.lobby.crypto-game-reject",t=>n.handleCryptoGameReject(t)),n.listen(t,"sonic-3000.lobby.crypto-candidate-invite",t=>n.handleCryptoCandidateInvite(t)),n.listen(t,"sonic-3000.lobby.crypto-candidate-present",t=>n.handleCryptoCandidatePresent(t)),n.listen(t,"sonic-3000.lobby.crypto-candidate-ack",t=>n.handleCryptoCandidateAck(t)),n.listen(window,"unload",t=>{n.matrix.putEvent(n.args.roomId,"sonic-3000.lobby.step-out",{})}),n.listen(t,"matrix-event",t=>{t.detail.sender&&(n.checkEventSender(t.detail),n.sortUsers())});const r=t.syncRoomHistory(n.args.roomId,t=>{if(n.removed)return!1;t.sender&&"sonic-3000.lobby.message"===t.type&&(t.origin_server_ts<1664651274e3?n.args.loading=!1:t.content.body&&(n.args.messages.length<=3&&l.Sfx.play("READY_TONE"),n.handleLobbyMessage({detail:t},y(n))))},Date.now()-6048e5,null,{types:["sonic-3000.lobby.message"]}),i=t.syncRoomHistory(n.args.roomId,t=>{if(n.removed)return!1;t.sender&&n.checkEventSender(t)},Date.now()-6048e5,null);Promise.all([r,i]).then(()=>n.args.loading=!1)}),n.args.input="",n}return r=m,(u=[{key:"input",value:function(){}},{key:"onAttached",value:function(){c.Bgm.fadeOut(250),this.onTimeout(250,()=>c.Bgm.stop())}},{key:"checkEventSender",value:function(t){const e=t.sender,r=f(e.slice(1).split(":"),2),n=r[0],i=r[1];if(!this.users.has(e)){const t={id:e,lastSeen:0,username:n,host:i};this.users.set(e,t),this.args.users.add(t),this.sortUsers()}const o=this.users.get(e);o.lastSeen=Math.max(o.lastSeen,t.origin_server_ts)}},{key:"sendMessage",value:function(t){this.args.input&&this.args.input.trim()&&this.matrix.putEvent(this.args.roomId,"sonic-3000.lobby.message",{msgtype:"m.text",body:this.args.input}).then(t=>this.args.input="").catch(t=>console.error(t)).finally(()=>{this.tags.input.focus(),l.Sfx.play("WAIT_TONE")})}},{key:"logOut",value:function(t){this.matrix.putEvent(this.args.roomId,"sonic-3000.lobby.step-out",{}),this.matrix.logOut(),this.remove()}},{key:"keyup",value:function(t){"Enter"===t.key&&this.sendMessage(t)}},{key:"sendCryptoGameInvite",value:function(t,e){let r=e.id;this.refreshRtc(),this.messageService.invite(r).then(t=>this.matrix.putEvent(this.args.roomId,"sonic-3000.lobby.crypto-game-invite",t)).then(e=>{this.args.messages.push(new a.LobbyStatus({message:`You invited ${r} to play!`,time:String(new Date(t.detail.origin_server_ts))})),this.onNextFrame(()=>this.tags.scroller.scrollTop=this.tags.scroller.scrollHeight)}).catch(t=>console.error(t)).finally(()=>this.tags.input.focus())}},{key:"handleCryptoGameInvite",value:function(t){if(!this.user||t.detail.content.to!==this.user.user_id)return;this.floodControl.has(t.detail.sender)||this.floodControl.set(t.detail.sender,{});const e=this.floodControl.get(t.detail.sender);e.invite&&Date.now()-e.invite<15e3?this.rejectCryptoGameInvite(t,t.detail,"flood_control",!0):(l.Sfx.play("KNOCK_PLATFORM"),this.args.messages.push(new a.LobbyStatus({message:`${t.detail.sender} invited you to play!`,time:String(new Date(t.detail.origin_server_ts))})),this.onNextFrame(()=>this.tags.scroller.scrollTop=this.tags.scroller.scrollHeight),this.args.invites.add(t.detail),e.invite=Date.now())}},{key:"acceptCryptoGameInvite",value:function(t,e){this.args.invites.delete(e);e.content.uuid,e.sender;this.args.messages.push(new a.LobbyStatus({message:`You accepted the invite from ${e.sender}!`})),this.onNextFrame(()=>this.tags.scroller.scrollTop=this.tags.scroller.scrollHeight),this.isClient=!0;const r=this.client.getIceCandidates();this.messageService.accept(e).then(t=>{Promise.all([r,this.client.offer()]).then(e=>{let r=f(e,2),n=r[0],i=r[1];return t.createReply(JSON.stringify({candidates:n,token:i}))}).then(t=>this.matrix.putEvent(this.args.roomId,"sonic-3000.lobby.crypto-game-offer",t))}),this.onTimeout(200,()=>this.args.showInvites="hide-invites"),this.args.showInvites="hiding-invites",l.Sfx.play("STAR_TWINKLE")}},{key:"rejectCryptoGameInvite",value:function(t,e){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",n=arguments.length>3&&void 0!==arguments[3]&&arguments[3];this.args.invites.delete(e);e.content.uuid,e.sender;n||(this.args.messages.push(new a.LobbyStatus({message:`You rejected the invite from ${e.sender}.`,time:String(new Date(t.detail.origin_server_ts))})),this.onNextFrame(()=>this.tags.scroller.scrollTop=this.tags.scroller.scrollHeight)),this.messageService.accept(e).then(t=>{t.createReply(r).then(t=>this.matrix.putEvent(this.args.roomId,"sonic-3000.lobby.crypto-game-reject",t))}),n||(this.onTimeout(200,()=>this.args.showInvites="hide-invites"),this.args.showInvites="hiding-invites",l.Sfx.play("OBJECT_DESTROYED"))}},{key:"handleCryptoGameOffer",value:function(t){if(!this.user||t.detail.content.to!==this.user.user_id)return;const e=t.detail;e.content.uuid,e.sender;this.messageService.accept(e).then(r=>{this.args.messages.push(new a.LobbyStatus({message:"Initializing RTC handshake...",time:String(new Date(t.detail.origin_server_ts))})),this.onNextFrame(()=>this.tags.scroller.scrollTop=this.tags.scroller.scrollHeight);let n=r.content;const i=/^s3ktp:\/\/request\/(.+)/.exec(n);i&&(n=atob(i[1]));const o=JSON.parse(n),s=o.token,c=o.candidates,u=this.server.answer(s);u.then(()=>{c.map(t=>this.server.addIceCandidate(t))}),Promise.all([this.server.getIceCandidates(),u]).then(t=>{let e=f(t,2),n=e[0],i=e[1];r.createReply(JSON.stringify({candidates:n,token:i})).then(t=>this.matrix.putEvent(this.args.roomId,"sonic-3000.lobby.crypto-game-accept",t))}),this.args.messages.push(new a.LobbyStatus({message:`${e.sender} accepted your invite!`,time:String(new Date(e.origin_server_ts))})),l.Sfx.play("STAR_TWINKLE"),this.onNextFrame(()=>this.tags.scroller.scrollTop=this.tags.scroller.scrollHeight)})}},{key:"handleCryptoGameAccept",value:function(t){if(!this.user||t.detail.content.to!==this.user.user_id)return;const e=t.detail;e.content.uuid,e.sender;this.messageService.accept(e).then(t=>{const e=JSON.parse(t.content),r=e.token,n=e.candidates;this.client.accept(r).then(()=>n.map(t=>this.client.addIceCandidate(t)))})}},{key:"handleCryptoGameReject",value:function(t){if(!this.user||t.detail.content.to!==this.user.user_id)return;const e=t.detail;e.content.uuid,e.sender;this.messageService.accept(e).then(e=>{let r=`${t.detail.sender} rejected your invite.`;e.content&&(r=`${t.detail.sender} rejected your invite: (${e.content})`),this.args.messages.push(new a.LobbyStatus({message:r})),this.onNextFrame(()=>this.tags.scroller.scrollTop=this.tags.scroller.scrollHeight)})}},{key:"handleLobbyMessage",value:function(t){let e=t.detail,r=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(e.room_id!==this.args.roomId||!e.content.body)return;this.checkEventSender(e);const n=this.users.get(e.sender);this.args.messages[r?"unshift":"push"](new o.LobbyMessage({message:e.content.body,time:String(new Date(e.origin_server_ts)),user:n})),this.onNextFrame(()=>this.tags.scroller.scrollTop=this.tags.scroller.scrollHeight),e.sender!==this.args.username&&(!r||this.args.messages.length<=3)&&l.Sfx.play("READY_TONE")}},{key:"refreshRtc",value:function(){const t=!this.server,e=!this.client;this.server=this.server||this.parent.getServer(),this.client=this.client||this.parent.getClient();const r=this.server,n=this.client,i=t=>{console.log("Connection Opened!"),this.parent.loadMap({mapUrl:"/map/emerald-isle.json",networked:!0}),this.remove()},o=t=>this.disconnect();t&&(r.addEventListener("open",i,{once:!0}),r.addEventListener("close",o,{once:!0})),e&&(n.addEventListener("open",i,{once:!0}),n.addEventListener("close",o,{once:!0}))}},{key:"toggleMenu",value:function(){this.args.showMenu&&"hide-menu"!=this.args.showMenu?(this.onTimeout(200,()=>this.args.showMenu="hide-menu"),this.args.showMenu="hiding-menu"):(this.onTimeout(200,()=>this.args.showMenu="show-menu"),this.args.showMenu="showing-menu")}},{key:"toggleInvites",value:function(){this.args.showInvites&&"hide-invites"!=this.args.showInvites?(this.onTimeout(200,()=>this.args.showInvites="hide-invites"),this.args.showInvites="hiding-invites"):(this.onTimeout(200,()=>this.args.showInvites="show-invites"),this.args.showInvites="showing-invites")}},{key:"disconnect",value:function(){this.server.close(),this.client.close(),this.refreshRtc(),this.parent.args.started&&this.parent.quit(2),this.parent.args.networked=!1,this.parent.args.chatBox=null}},{key:"sortUsers",value:function(){switch(arguments.length>0&&void 0!==arguments[0]?arguments[0]:null){case"abc":this.userSorter=this.sortByName;break;case"time":this.userSorter=this.sortByTime}this.sorting||(this.sorting=!0,this.onTimeout(100,()=>{const t=this.args.users.items();t.sort(this.userSorter||this.sortByTime),this.args.userList=t,this.sorting=!1}))}},{key:"closeMotd",value:function(t){this.args.motdClosed="closed"}},{key:"handleLobbyStepOut",value:function(t){this.args.messages.push(new a.LobbyStatus({message:`${t.detail.sender} stepped out.`,time:String(new Date(t.detail.origin_server_ts))})),this.onNextFrame(()=>this.tags.scroller.scrollTop=this.tags.scroller.scrollHeight),l.Sfx.play("MECHASONIC_SLAP")}},{key:"handleLobbyStepIn",value:function(t){this.args.messages.push(new a.LobbyStatus({message:`${t.detail.sender} stepped in.`,time:String(new Date(t.detail.origin_server_ts))})),this.onNextFrame(()=>this.tags.scroller.scrollTop=this.tags.scroller.scrollHeight),l.Sfx.play("SS_BWIP_HIGH")}}])&&h(r.prototype,u),p&&h(r,p),Object.defineProperty(r,"prototype",{writable:!1}),m}();t.Lobby=w}),require.register("network/LobbyInvite.js",function(t,e,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LobbyInvite=void 0;var n=e("curvature/base/View");function i(t){"@babel/helpers - typeof";return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function o(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,u(n.key),n)}}function a(t,e){return(a=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function s(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=l(t);if(e){var o=l(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===i(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return c(t)}(this,r)}}function c(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function l(t){return(l=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function u(t){var e=function(t,e){if("object"!==i(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==i(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===i(e)?e:String(e)}let f=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&a(t,e)}(f,n.View);var e,r,i,l=s(f);function f(){var t,e,r,n;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,f);for(var i=arguments.length,o=new Array(i),a=0;a<i;a++)o[a]=arguments[a];return t=l.call(this,...o),e=c(t),n='<div class = "lobby-invite">invite!</div>',(r=u(r="template"))in e?Object.defineProperty(e,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[r]=n,t}return e=f,r&&o(e.prototype,r),i&&o(e,i),Object.defineProperty(e,"prototype",{writable:!1}),e}();t.LobbyInvite=f}),require.register("network/LobbyMessage.js",function(t,e,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LobbyMessage=void 0;var n=e("curvature/base/View");function i(t){"@babel/helpers - typeof";return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function o(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,f(n.key),n)}}function a(t,e){return(a=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function s(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=l(t);if(e){var o=l(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===i(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return c(t)}(this,r)}}function c(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function l(t){return(l=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function u(t,e,r){return(e=f(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function f(t){var e=function(t,e){if("object"!==i(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==i(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===i(e)?e:String(e)}let p=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&a(t,e)}(f,n.View);var e,r,i,l=s(f);function f(){var t;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,f);for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];return u(c(t=l.call(this,...r)),"template",'<span title = "[[user.id]] [[time]]" class = "username">&lt;<b>[[user.username]]</b>&gt;</span>:&nbsp;<span class = "message" cv-bind = "message"></span>'),u(c(t),"preserve",!0),t}return e=f,r&&o(e.prototype,r),i&&o(e,i),Object.defineProperty(e,"prototype",{writable:!1}),e}();t.LobbyMessage=p}),require.register("network/LobbyStatus.js",function(t,e,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LobbyStatus=void 0;var n=e("curvature/base/View");function i(t){"@babel/helpers - typeof";return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function o(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,f(n.key),n)}}function a(t,e){return(a=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function s(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=l(t);if(e){var o=l(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===i(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return c(t)}(this,r)}}function c(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function l(t){return(l=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function u(t,e,r){return(e=f(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function f(t){var e=function(t,e){if("object"!==i(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==i(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===i(e)?e:String(e)}let p=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&a(t,e)}(f,n.View);var e,r,i,l=s(f);function f(){var t;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,f);for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];return u(c(t=l.call(this,...r)),"template",'<span class = "lobby-status-message" title = [[time]] cv-bind = "message"></span>'),u(c(t),"preserve",!0),t}return e=f,r&&o(e.prototype,r),i&&o(e,i),Object.defineProperty(e,"prototype",{writable:!1}),e}();t.LobbyStatus=p}),require.register("network/Rtc.js",function(t,e,r){"use strict";function n(t){"@babel/helpers - typeof";return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function i(t,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,(o=i.key,void 0,"symbol"===n(a=function(t,e){if("object"!==n(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var i=r.call(t,e||"default");if("object"!==n(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(o,"string"))?a:String(a)),i)}var o,a}Object.defineProperty(t,"__esModule",{value:!0}),t.Rtc=void 0;let o=function(t,e,r){return e&&i(t.prototype,e),r&&i(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}(function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)});t.Rtc=o}),require.register("network/RtcClient.js",function(t,e,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.RtcClient=void 0;var n=e("curvature/base/Mixin"),i=e("curvature/mixin/EventTargetMixin");function o(t){"@babel/helpers - typeof";return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function a(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,f(n.key),n)}}function s(t,e){return(s=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function c(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=u(t);if(e){var i=u(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===o(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return l(t)}(this,r)}}function l(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function u(t){return(u=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function f(t){var e=function(t,e){if("object"!==o(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==o(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===o(e)?e:String(e)}let p=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&s(t,e)}(p,n.Mixin.with(i.EventTargetMixin));var e,r,o,u=c(p);function p(t){var e,r,n,i;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,p),e=u.call(this),r=l(e),i=500,(n=f(n="candidateTimeout"))in r?Object.defineProperty(r,n,{value:i,enumerable:!0,configurable:!0,writable:!0}):r[n]=i,e.peerClient=new RTCPeerConnection(t),e.peerClientChannel=e.peerClient.createDataChannel("chat"),e.peerClientChannel.addEventListener("open",t=>{const r=new CustomEvent("open",{detail:t.data});r.originalEvent=t,e.dispatchEvent(r),e.connected=!0}),e.peerClientChannel.addEventListener("close",t=>{const r=new CustomEvent("close",{detail:t.data});r.originalEvent=t,e.dispatchEvent(r),e.connected=!1}),e.peerClientChannel.addEventListener("message",t=>{const r=new CustomEvent("message",{detail:t.data});r.originalEvent=t,e.dispatchEvent(r)}),e.peerClient.addEventListener("icecandidate",t=>{const r=new CustomEvent("icecandidate",{detail:t.data});r.originalEvent=t,e.dispatchEvent(r)}),e}return e=p,(r=[{key:"send",value:function(t){this.peerClientChannel&&"open"===this.peerClientChannel.readyState&&this.peerClientChannel.send(t)}},{key:"close",value:function(){return this.peerClient.close()}},{key:"getIceCandidates",value:function(){const t=new Set;return new Promise(e=>this.peerClient.addEventListener("icecandidate",r=>{t.add(r.candidate),r.candidate||e([...t])}))}},{key:"addIceCandidate",value:function(t){this.peerClient.addIceCandidate(t)}},{key:"offer",value:function(){return this.peerClient.createOffer().then(t=>this.peerClient.setLocalDescription(t)).then(()=>this.peerClient.localDescription)}},{key:"fullOffer",value:function(){return this.offer().then(t=>this.getIceCandidates().then(e=>({offer:t,candidates:e})))}},{key:"accept",value:function(t){const e=new RTCSessionDescription(t);return this.peerClient.setRemoteDescription(e)}},{key:"fullAccept",value:function(t){let e=t.answer,r=t.candidates;return this.accept(e).then(()=>r.map(t=>this.addIceCandidate(t)))}}])&&a(e.prototype,r),o&&a(e,o),Object.defineProperty(e,"prototype",{writable:!1}),p}();t.RtcClient=p}),require.register("network/RtcClientTask.js",function(t,e,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.RtcClientTask=void 0;var n=e("subspace-console/Task"),i=e("curvature/base/Tag"),o=e("./RtcClient");function a(t){"@babel/helpers - typeof";return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function s(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,h(n.key),n)}}function c(t,e){return(c=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function l(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=f(t);if(e){var i=f(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===a(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return u(t)}(this,r)}}function u(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function f(t){return(f=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function p(t,e,r){return(e=h(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function h(t){var e=function(t,e){if("object"!==a(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==a(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===a(e)?e:String(e)}const g=Symbol("accept");let d=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&c(t,e)}(h,n.Task);var e,r,a,f=l(h);function h(){var t;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,h);for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];return p(u(t=f.call(this,...r)),"title","RTC Client Task"),p(u(t),"connected",!1),t}return e=h,(r=[{key:"init",value:function(){return this.client=new o.RtcClient({iceServers:[{urls:"stun:stun1.l.google.com:19302"},{urls:"stun:stun2.l.google.com:19302"}]}),this.finally(()=>{console.log("Terminating connection..."),this.client.close()}),this.client.addEventListener("open",()=>{this.print("Remote peer client accepted!")}),this.client.addEventListener("close",()=>{this.print("Peer reset connection.")}),this.client.addEventListener("message",t=>{this.print(`> ${t.detail}`)}),this.client.offerToken.then(t=>{const e=JSON.stringify(t),r=`s3ktp://request/${btoa(e)}`;this.print(`Client request code: ${r}`);const n=new i.Tag('<textarea style = "display:none">');n.innerText=r,document.body.append(n.node),n.select(),document.execCommand("copy"),n.node.remove()}),new Promise(t=>{this[g]=t})}},{key:"main",value:function(t){t&&(this.client.connected?(this.print(`< ${t}`),this.client.send(t)):this.accept(t))}},{key:"accept",value:function(t){if(!t)return void this.print("Please supply server's accept string.");const e=/^s3ktp:\/\/accept\/(.+)/.exec(t);e&&(t=atob(e[1]));const r=JSON.parse(t);this.client.accept(r)}}])&&s(e.prototype,r),a&&s(e,a),Object.defineProperty(e,"prototype",{writable:!1}),h}();t.RtcClientTask=d,p(d,"helpText","RTC Client."),p(d,"useText","")}),require.register("network/RtcServer.js",function(t,e,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.RtcServer=void 0;var n=e("curvature/base/Mixin"),i=e("curvature/mixin/EventTargetMixin");function o(t){"@babel/helpers - typeof";return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function a(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,f(n.key),n)}}function s(t,e){return(s=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function c(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=u(t);if(e){var i=u(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===o(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return l(t)}(this,r)}}function l(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function u(t){return(u=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function f(t){var e=function(t,e){if("object"!==o(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==o(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===o(e)?e:String(e)}let p=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&s(t,e)}(p,n.Mixin.with(i.EventTargetMixin));var e,r,o,u=c(p);function p(t){var e,r,n,i;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,p),e=u.call(this),r=l(e),i=500,(n=f(n="candidateTimeout"))in r?Object.defineProperty(r,n,{value:i,enumerable:!0,configurable:!0,writable:!0}):r[n]=i,e.peerServer=new RTCPeerConnection(t),e.peerServer.addEventListener("datachannel",t=>{e.peerServerChannel=t.channel,e.peerServerChannel.addEventListener("open",t=>{const r=new CustomEvent("open",{detail:t.data});r.originalEvent=t,e.dispatchEvent(r),e.connected=!0}),e.peerServerChannel.addEventListener("close",t=>{const r=new CustomEvent("close",{detail:t.data});r.originalEvent=t,e.dispatchEvent(r),e.connected=!1}),e.peerServerChannel.addEventListener("message",t=>{const r=new CustomEvent("message",{detail:t.data});r.originalEvent=t,e.dispatchEvent(r)}),e.peerServerChannel.addEventListener("icecandidate",t=>{const r=new CustomEvent("icecandidate",{detail:t.data});r.originalEvent=t,e.dispatchEvent(r)})}),e}return e=p,(r=[{key:"send",value:function(t){this.peerServerChannel&&"open"===this.peerServerChannel.readyState&&this.peerServerChannel.send(t)}},{key:"close",value:function(){return this.peerServer.close()}},{key:"getIceCandidates",value:function(){const t=new Set;return new Promise(e=>this.peerServer.addEventListener("icecandidate",r=>{t.add(r.candidate),r.candidate||e([...t])}))}},{key:"addIceCandidate",value:function(t){this.peerServer.addIceCandidate(t)}},{key:"answer",value:function(t){return this.peerServer.setRemoteDescription(t).then(()=>this.peerServer.createAnswer()).then(t=>this.peerServer.setLocalDescription(t)).then(()=>this.peerServer.localDescription)}},{key:"fullAnswer",value:function(t){let e=t.offer,r=t.candidates;return this.answer(e).then(t=>Promise.all(r.map(t=>this.addIceCandidate(t))).then(()=>this.getIceCandidates().then(e=>({answer:t,candidates:e}))))}}])&&a(e.prototype,r),o&&a(e,o),Object.defineProperty(e,"prototype",{writable:!1}),p}();t.RtcServer=p}),require.register("network/RtcServerTask.js",function(t,e,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.RtcServerTask=void 0;var n=e("subspace-console/Task"),i=e("curvature/base/Tag"),o=e("./RtcServer");function a(t){"@babel/helpers - typeof";return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function s(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,h(n.key),n)}}function c(t,e){return(c=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function l(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=f(t);if(e){var i=f(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===a(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return u(t)}(this,r)}}function u(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function f(t){return(f=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function p(t,e,r){return(e=h(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function h(t){var e=function(t,e){if("object"!==a(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==a(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===a(e)?e:String(e)}const g=Symbol("accept");let d=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&c(t,e)}(h,n.Task);var e,r,a,f=l(h);function h(){var t;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,h);for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];return p(u(t=f.call(this,...r)),"title","RTC Server Task"),p(u(t),"connected",!1),t}return e=h,(r=[{key:"init",value:function(){return this.server=new o.RtcServer({iceServers:[{urls:"stun:stun1.l.google.com:19302"},{urls:"stun:stun2.l.google.com:19302"}]}),this.finally(()=>{this.print("Terminating connection..."),this.server.close()}),this.server.addEventListener("open",()=>{this.print("Remote peer client accepted!")}),this.server.addEventListener("close",()=>{this.print("Peer reset connection.")}),this.server.addEventListener("message",t=>{this.print(`> ${t.detail}`)}),this.server.answerToken.then(t=>{const e=JSON.stringify(t),r=`s3ktp://accept/${btoa(e)}`;this.print(`Server accept code: ${r}`);const n=new i.Tag('<textarea style = "display:none">');n.innerText=r,document.body.append(n.node),n.select(),document.execCommand("copy"),n.node.remove()}),this.printErr("Please supply client's request code."),new Promise(t=>{this[g]=t})}},{key:"main",value:function(t){t&&(this.server.connected?(this.print(`< ${t}`),this.server.send(t)):this.answer(t))}},{key:"answer",value:function(t){const e=/^s3ktp:\/\/request\/(.+)/.exec(t);console.log(e),e&&(t=atob(e[1]));const r=JSON.parse(t);this.server.answer(r)}},{key:"done",value:function(){}}])&&s(e.prototype,r),a&&s(e,a),Object.defineProperty(e,"prototype",{writable:!1}),h}();t.RtcServerTask=d,p(d,"helpText","RTC Server."),p(d,"useText","")}),require.register("network/chat-box.html",function(t,e,r){r.exports='<div class = "chatbox" data-click-barrier>\n\n\t<div class = "chat-output" cv-each = "outputLines:line" cv-ref = "chatOutput">\n\t\t<p>[[line]]</p>\n\t</div>\n\n\t<div class = "chat-input">\n\t\t<input cv-bind = "chatInput" cv-ref = "chatInput" cv-on = "keydown:send(event)">\n\t\t<button cv-on = "click:send">send</button>\n\t</div>\n\n</div>\n'}),require.register("network/lobby.html",function(t,e,r){r.exports='<div class = "lobby [[showMenu]] [[showInvites]]" data-click-barrier>\n\n\t<div class = "main column">\n\t\t<div class = "left-menu">\n\t\t\t<div>[[username]]</div>\n\t\t\t<button cv-on = "click:logOut">Log Out</button>\n\t\t</div>\n\n\t\t<div class = "topbar row">\n\t\t\t<div class = "row">\n\t\t\t\t<div class = "burger-button" cv-on = "click:toggleMenu">\n\t\t\t\t\t<div class = "stripe"></div>\n\t\t\t\t\t<div class = "stripe"></div>\n\t\t\t\t\t<div class = "stripe"></div>\n\t\t\t\t</div>\n\t\t\t\t<div class = "title">\n\t\t\t\t\t#sonic-3000-test-lobby\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t<div>\n\t\t\t\t<div cv-on = "click:toggleInvites" class = "invite button">\n\t\t\t\t\t<div class = "amount" cv-if = "invites.length">[[invites.length]]</div>\n\t\t\t\t\t<img class = "icon" src = "/icons/mail.svg" />\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\n\t\t<div class = "row wide">\n\n\t\t\t<div class = "users frame column">\n\t\t\t\t<div class = "sort-buttons">\n\t\t\t\t\t<button class = "sort-abc"  cv-on = \'click:sortUsers("abc")\'></button>\n\t\t\t\t\t<button class = "sort-time" cv-on = \'click:sortUsers("time")\'></button>\n\t\t\t\t</div>\n\t\t\t\t<div class = "scroller" cv-each = "userList:user">\n\t\t\t\t\t<div title = "[[user.id]]" class = "user" tabindex = "0">\n\t\t\t\t\t\t[[user.username]]\n\t\t\t\t\t\t<div class = "user-list-buttons">\n\t\t\t\t\t\t\t<button cv-on   = "click:sendCryptoGameInvite(event, user)">invite</button>\n\x3c!-- \t\t\t\t\t\t\t<button>message</button>\n\t\t\t\t\t\t\t<button>ignore</button> --\x3e\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\n\t\t\t<div class = "messages wide column">\n\t\t\t\t<div class = "row motd [[motdClosed]]">\n\t\t\t\t\t<button class="close-button" cv-on = "click:closeMotd"></button>\n\t\t\t\t\t<span>&lt;motd&gt;: [[motd]]</span>\n\t\t\t\t</div>\n\t\t\t\t<div class = "row wide frame">\n\t\t\t\t\t<div class = "scroller" cv-ref = "scroller">\n\t\t\t\t\t\t<div cv-if = "loading">\n\t\t\t\t\t\t\t<img class = "loader icon" src = "/icons/loader.svg" />\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class = "column" cv-each = "messages:message">\n\t\t\t\t\t\t\t<span class = "message">[[message]]</span>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<div class = "row">\n\t\t\t\t\t<input\n\t\t\t\t\t\ttype    = "text"\n\t\t\t\t\t\tcv-bind = "input"\n\t\t\t\t\t\tcv-on   = "keyup"\n\t\t\t\t\t\tcv-ref  = "input"\n\t\t\t\t\t/>\n\t\t\t\t\t<button cv-on   = "click:sendMessage">send</button>\n\t\t\t\t</div>\n\t\t\t</div>\n\n\t\t\t<div class = "invites">\n\t\t\t\t<div cv-if = "!invites.length">No pending invites.</div>\n\t\t\t\t<div class = "column" cv-each = "invites:invite:i">\n\t\t\t\t\t<div class = "column">\n\t\t\t\t\t\t<div>[[invite.sender]] invited you to play!</div>\n\t\t\t\t\t\t<div class = "row">\n\t\t\t\t\t\t\t<button cv-on = "click:acceptCryptoGameInvite(event, invite)">accept</button>\n\t\t\t\t\t\t\t<button cv-on = \'click:rejectCryptoGameInvite(event, invite, "button_clicked")\'>reject</button>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\n\t\t</div>\n\t</div>\n</div>\n'}),require.register("particle/Particle3d.js",function(t,e,r){"use strict";function n(t){"@babel/helpers - typeof";return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(t,"__esModule",{value:!0}),t.Particle3d=void 0;var i=e("curvature/base/Tag");function o(t,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,(o=i.key,void 0,"symbol"===n(a=function(t,e){if("object"!==n(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var i=r.call(t,e||"default");if("object"!==n(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(o,"string"))?a:String(a)),i)}var o,a}function a(t,e){return(a=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function s(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,i=c(t);if(e){var o=c(this).constructor;r=Reflect.construct(i,arguments,o)}else r=i.apply(this,arguments);return function(t,e){if(e&&("object"===n(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function c(t){return(c=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}let l=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&a(t,e)}(l,i.Tag);var e,r,n,c=s(l);function l(){var t;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,l),t=c.call(this,'<div class = "particle-3d">');const e=new i.Tag('<div class = "front-3d">'),r=new i.Tag('<div class = "back-3d">'),n=new i.Tag('<div class = "right-3d">'),o=new i.Tag('<div class = "left-3d">'),a=new i.Tag('<div class = "top-3d">'),s=new i.Tag('<div class = "bottom-3d">');return t.append(r.node),t.append(n.node),t.append(o.node),t.append(e.node),t.append(a.node),t.append(s.node),t}return e=l,r&&o(e.prototype,r),n&&o(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}();t.Particle3d=l}),require.register("powerups/BubbleSheild.js",function(t,e,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BubbleSheild=void 0;var n=e("curvature/base/Bindable"),i=e("./Sheild"),o=e("../audio/Sfx");function a(t){"@babel/helpers - typeof";return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function s(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,g(n.key),n)}}function c(){return(c="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=p(t)););return t}(t,e);if(n){var i=Object.getOwnPropertyDescriptor(n,e);return i.get?i.get.call(arguments.length<3?t:r):i.value}}).apply(this,arguments)}function l(t,e){return(l=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function u(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=p(t);if(e){var i=p(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===a(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return f(t)}(this,r)}}function f(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function p(t){return(p=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function h(t,e,r){return(e=g(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function g(t){var e=function(t,e){if("object"!==a(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==a(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===a(e)?e:String(e)}let d=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&l(t,e)}(d,i.Sheild);var e,r,a,g=u(d);function d(){var t;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,d);for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];return h(f(t=g.call(this,...r)),"template",'<div class = "sheild bubble-sheild [[bouncing]]"><div class = "bubble-sheild-shine"></div></div>'),h(f(t),"protect",!0),h(f(t),"type","water"),t}return e=d,(r=[{key:"unequip",value:function(t){c(p(d.prototype),"unequip",this).call(this,t),t.args.bouncing=!1,this.args.bouncing=!1,this.args.force=0}},{key:"acquire",value:function(t){if(!t.viewport)return;t.controllable&&o.Sfx.play("WATER_ACQUIRE");const e=r=>{if(t.args.currentSheild!==n.Bindable.make(this))return;r.preventDefault();const i=r.detail.other;i&&i.pop&&i.pop(t),this.onNextFrame(()=>{t.args.currentSheild=null,t.inventory.remove(this)}),t.removeEventListener("damage",e),t.startle(i)};t.addEventListener("damage",e)}},{key:"immune",value:function(t,e){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"normal";return"water"===r||"projectile"===r}},{key:"command_0",value:function(t,e){if(!(t.canFly&&t.yAxis<.55||t.dashed||t.args.standingOn&&t.args.standingOn.isVehicle))return this.args.force=10,t.args.jumping&&(t.impulse(14,Math.PI/2),this.args.bouncing="bouncing",t.args.bouncing=!0),(!t.args.falling||!t.yAxis)&&void 0}},{key:"hold_0",value:function(){this.args.bouncing&&this.args.force<25&&this.args.force++}},{key:"update",value:function(t){t.args.ySpeed<-5&&this.onNextFrame(()=>{t.args.bouncing=!1,this.args.bouncing=!1,this.args.force=0}),t.args.falling||this.args.bouncing&&this.args.force&&(this.onNextFrame(()=>{t.args.standingOn=null,t.args.bouncing=!1,t.args.falling=!0,t.args.jumping=!0,t.impulse(this.args.force,-Math.PI/2,!0)}),this.args.bouncing="",o.Sfx.play("WATER_BOUNCE"),t.viewport.settings.rumble&&t.controller.rumble({duration:200,strongMagnitude:1,weakMagnitude:1}))}}])&&s(e.prototype,r),a&&s(e,a),Object.defineProperty(e,"prototype",{writable:!1}),d}();t.BubbleSheild=d}),require.register("powerups/ElectricSheild.js",function(t,e,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ElectricSheild=void 0;var n=e("curvature/base/Bindable"),i=e("./Sheild"),o=e("../audio/Sfx"),a=e("curvature/base/Tag");function s(t){"@babel/helpers - typeof";return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function c(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,g(n.key),n)}}function l(t,e){return(l=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function u(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=p(t);if(e){var i=p(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===s(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return f(t)}(this,r)}}function f(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function p(t){return(p=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function h(t,e,r){return(e=g(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function g(t){var e=function(t,e){if("object"!==s(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==s(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===s(e)?e:String(e)}let d=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&l(t,e)}(g,i.Sheild);var e,r,s,p=u(g);function g(){var t;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,g);for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];return h(f(t=p.call(this,...r)),"template",'<div class = "sheild electric-sheild [[boosted]]"></div>'),h(f(t),"protect",!0),h(f(t),"type","electric"),h(f(t),"jumps",3),h(f(t),"attract",new Set),h(f(t),"magnetism",.25),h(f(t),"magnetTimeout",!1),h(f(t),"particles",new Set),t}return e=g,(r=[{key:"acquire",value:function(t){if(!t.viewport)return;t.controllable&&o.Sfx.play("ELECTRIC_ACQUIRE");const e=r=>{if(t.args.currentSheild!==n.Bindable.make(this))return;r.preventDefault();const i=r.detail.other;this.immune(t,i,r.detail.type)?r.detail.immune=!0:(i&&i.damage&&i.damage(t,"electric"),this.onNextFrame(()=>{t.args.currentSheild=null,t.inventory.remove(this)}),t.removeEventListener("damage",e),t.startle(i))};t.addEventListener("damage",e)}},{key:"immune",value:function(t,e){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"normal";return"electric"===r||"projectile"===r}},{key:"command_0",value:function(t,e){if(t.args.falling&&(!t.canFly||!(Math.abs(t.yAxis)<.55||t.args.flying))){if(this.jumps>0&&t.args.jumping){if(t.args.ySpeed=0,t.impulse(10,-Math.PI/2),this.jumps--,this.onTimeout(250,()=>this.args.boosted=""),o.Sfx.play("ELECTRIC_JUMP"),t.xAxis&&Math.sign(t.xAxis)!==Math.sign(t.args.xSpeed)&&(t.args.xSpeed=1*t.xAxis),viewport=t.viewport,!viewport)return;const e=new a.Tag(document.createElement("div")),r=new a.Tag(document.createElement("div"));e.classList.add("particle-electric-jump-spark"),r.classList.add("particle-electric-jump-spark"),e.style({"--x":t.args.x,"--y":t.args.y-30,"z-index":0}),r.style({"--x":t.args.x,"--y":t.args.y-30,"z-index":0}),e.age=0,e.y=t.args.y-30,e.x=t.args.x,e.d=-1,r.age=0,r.y=t.args.y-30,r.x=t.args.x,r.d=1,viewport.particles.add(e),viewport.particles.add(r),viewport.onFrameOut(200,()=>viewport.particles.remove(e)),viewport.onFrameOut(200,()=>viewport.particles.remove(r)),this.particles.add(e),this.particles.add(r)}return!(t.canFly&&Math.abs(t.yAxis)>.55)&&void 0}}},{key:"release_6",value:function(t,e){}},{key:"magnetize",value:function(t,e){if(!t.controllable)return;t.args.xOff=0,t.args.yOff=32,this.magnetism=Math.max(.25,e);const r=t.viewport.objectPalette.ring,n=t.findNearestActor(t=>!this.attract.has(t)&&t instanceof r&&!t.args.gone&&!t.restore,256);n&&(t.viewport.auras.add(n),this.attract.add(n))}},{key:"update",value:function(t){for(const t of this.particles)t.age&&t.style({"--x":t.x-(40-40/Math.pow(.35*t.age,2))*t.d,"--y":t.y+Math.pow(.35*t.age,2)}),t.age++;this.magnetize(t,2.5),t.args.falling||this.magnetTimeout||(this.magnetTimeout=this.onTimeout(100,()=>{this.magnetTimeout=!1,this.args.boosted=""})),t.canFly,t.args.falling||(this.jumps=3);let e=0;for(const r of this.attract){if(r.args.gone){this.attract.delete(r),r.attract=null;const e=t.viewport;e.onFrameOut(30,()=>{r.def&&(r.args.static=!1,r.args.xSpeed=0,r.args.ySpeed=0,r.args.x=r.def.get("x"),r.args.y=r.def.get("y"),e.setColCell(r),e.onFrameOut(300,()=>{e.auras.delete(r),r.args.float=-1,r.noClip=!1,r.restore=!0}))});continue}r.args.static=!1,r.attract=t,r.noClip=!0;const n=t.x-r.x,i=t.y-t.args.height/2-r.y,o=Math.atan2(i,n),a=Math.hypot(i,n),s=512,c=Math.sign(n),l=Math.sign(i),u=Math.sign(r.args.xSpeed||0)===c,f=Math.sign(r.args.ySpeed||0)===l;if(a>s){if(e>45)continue;r.args.x=t.x-Math.cos(o)*s,r.args.y=t.y-Math.sin(o)*s}t.viewport.setColCell(r),e++;const p=2*(this.magnetism||.75),h=Math.max(p,u?.45:.55),g=Math.max(p,.45);r.args.groundAngle=0;const d=this.magnetism?Math.random():1;(!u||Math.abs(r.args.xSpeed)<8||a>s)&&(r.args.xSpeed+=Math.max(.1,h*d)*c),(!f||Math.abs(r.args.ySpeed)<8||a>s)&&(r.args.ySpeed+=Math.max(.1,g*d)*l),r.args.falling=!0}}}])&&c(e.prototype,r),s&&c(e,s),Object.defineProperty(e,"prototype",{writable:!1}),g}();t.ElectricSheild=d}),require.register("powerups/FireSheild.js",function(t,e,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.FireSheild=void 0;var n=e("curvature/base/Bindable"),i=e("./Sheild"),o=e("../audio/Sfx");function a(t){"@babel/helpers - typeof";return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function s(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,h(n.key),n)}}function c(t,e){return(c=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function l(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=f(t);if(e){var i=f(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===a(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return u(t)}(this,r)}}function u(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function f(t){return(f=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function p(t,e,r){return(e=h(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function h(t){var e=function(t,e){if("object"!==a(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==a(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===a(e)?e:String(e)}let g=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&c(t,e)}(h,i.Sheild);var e,r,a,f=l(h);function h(){var t;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,h);for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];return p(u(t=f.call(this,...r)),"template",'<div class = "sheild fire-sheild [[boosted]]"></div>'),p(u(t),"protect",!0),p(u(t),"type","fire"),p(u(t),"power",15),t}return e=h,(r=[{key:"acquire",value:function(t){if(!t.viewport)return;t.controllable&&o.Sfx.play("FIRE_ACQUIRE");const e=r=>{if(t.args.currentSheild!==n.Bindable.make(this))return;r.preventDefault();const i=r.detail.other;i&&i.pop&&i.pop(t),this.onNextFrame(()=>{t.args.currentSheild=null,t.inventory.remove(this)}),t.removeEventListener("damage",e),t.startle(i)};t.addEventListener("damage",e)}},{key:"immune",value:function(t,e){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"normal";return"fire"===r||"projectile"===r}},{key:"update",value:function(t){t.args.falling||(this.didBoost=!1,this.power=15)}},{key:"hold_4",value:function(t,e){this.power<=0||(this.power--,t.canFly,t.args.falling?(t.impulse(1,Math.PI),this.args.boosted||(this.args.boosted="boosted",t.args.didBoost=!0,o.Sfx.play("FIRE_DASH"),t.viewport.onFrameOut(15,()=>this.args.boosted=""))):this.args.boosted="")}},{key:"hold_5",value:function(t,e){this.power<=0||(this.power--,t.canFly,t.args.falling?(t.impulse(1,0),this.args.boosted||(this.args.boosted="boosted",t.args.didBoost=!0,o.Sfx.play("FIRE_DASH"),t.viewport.onFrameOut(15,()=>this.args.boosted=""))):this.args.boosted="")}}])&&s(e.prototype,r),a&&s(e,a),Object.defineProperty(e,"prototype",{writable:!1}),h}();t.FireSheild=g}),require.register("powerups/NormalSheild.js",function(t,e,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.NormalSheild=void 0;var n=e("curvature/base/Bindable"),i=e("./Sheild");function o(t){"@babel/helpers - typeof";return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function a(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,p(n.key),n)}}function s(t,e){return(s=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function c(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=u(t);if(e){var i=u(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===o(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return l(t)}(this,r)}}function l(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function u(t){return(u=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function f(t,e,r){return(e=p(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function p(t){var e=function(t,e){if("object"!==o(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==o(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===o(e)?e:String(e)}let h=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&s(t,e)}(p,i.Sheild);var e,r,o,u=c(p);function p(){var t;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,p);for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];return f(l(t=u.call(this,...r)),"template",'<div class = "sheild normal-sheild"></div>'),f(l(t),"protect",!0),f(l(t),"type","normal"),t}return e=p,(r=[{key:"acquire",value:function(t){if(!t.viewport)return;const e=r=>{if(t.args.currentSheild!==n.Bindable.make(this))return;r.preventDefault();const i=r.detail.other;i&&i.damage&&i.damage(t),this.onNextFrame(()=>{t.args.currentSheild=null,t.inventory.remove(this)}),t.removeEventListener("damage",e),t.startle(i)};t.addEventListener("damage",e)}},{key:"immune",value:function(t,e){arguments.length>2&&void 0!==arguments[2]&&arguments[2];return!1}}])&&a(e.prototype,r),o&&a(e,o),Object.defineProperty(e,"prototype",{writable:!1}),p}();t.NormalSheild=h}),require.register("powerups/Powerup.js",function(t,e,r){"use strict";function n(t){"@babel/helpers - typeof";return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(t,"__esModule",{value:!0}),t.Powerup=void 0;var i=e("curvature/base/Bindable"),o=e("curvature/base/View");let a;function s(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,p(n.key),n)}}function c(t,e){return(c=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function l(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,i=f(t);if(e){var o=f(this).constructor;r=Reflect.construct(i,arguments,o)}else r=i.apply(this,arguments);return function(t,e){if(e&&("object"===n(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return u(t)}(this,r)}}function u(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function f(t){return(f=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function p(t){var e=function(t,e){if("object"!==n(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var i=r.call(t,e||"default");if("object"!==n(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===n(e)?e:String(e)}a=i.Bindable.NoGetters;let h=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&c(t,e)}(f,o.View);var e,r,n,i=l(f);function f(){var t,e,r,n;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,f);for(var o=arguments.length,s=new Array(o),c=0;c<o;c++)s[c]=arguments[c];return t=i.call(this,...s),e=u(t),n=!0,(r=p(r=a))in e?Object.defineProperty(e,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[r]=n,t}return e=f,(r=[{key:"equip",value:function(){}},{key:"unequip",value:function(){}},{key:"acquire",value:function(){}},{key:"drop",value:function(){}}])&&s(e.prototype,r),n&&s(e,n),Object.defineProperty(e,"prototype",{writable:!1}),f}();t.Powerup=h}),require.register("powerups/Sheild.js",function(t,e,r){"use strict";function n(t){"@babel/helpers - typeof";return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(t,"__esModule",{value:!0}),t.Sheild=void 0;var i=e("./Powerup");function o(t,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,(o=i.key,void 0,"symbol"===n(a=function(t,e){if("object"!==n(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var i=r.call(t,e||"default");if("object"!==n(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(o,"string"))?a:String(a)),i)}var o,a}function a(t,e){return(a=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function s(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,i=c(t);if(e){var o=c(this).constructor;r=Reflect.construct(i,arguments,o)}else r=i.apply(this,arguments);return function(t,e){if(e&&("object"===n(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function c(t){return(c=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}let l=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&a(t,e)}(l,i.Powerup);var e,r,n,c=s(l);function l(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,l),c.apply(this,arguments)}return e=l,r&&o(e.prototype,r),n&&o(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}();t.Sheild=l}),require.register("powerups/StarSheild.js",function(t,e,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.StarSheild=void 0;var n=e("./Sheild"),i=e("../audio/Bgm"),o=e("curvature/base/Tag");function a(t){"@babel/helpers - typeof";return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function s(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,h(n.key),n)}}function c(t,e){return(c=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function l(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=f(t);if(e){var i=f(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===a(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return u(t)}(this,r)}}function u(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function f(t){return(f=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function p(t,e,r){return(e=h(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function h(t){var e=function(t,e){if("object"!==a(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==a(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===a(e)?e:String(e)}let g=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&c(t,e)}(h,n.Sheild);var e,r,a,f=l(h);function h(){var t;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,h);for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];return p(u(t=f.call(this,...r)),"type","star"),p(u(t),"protect",!0),p(u(t),"template",'<div class = "sheild star-sheild">\n\t\t<div class = "star-sheild-stars"></div>\n\t</div>'),p(u(t),"frame",0),t}return e=h,(r=[{key:"acquire",value:function(t){const e=t.viewport;if(!e)return;const r=t.args.currentSheild,n=e=>{e.preventDefault();const r=e.detail.other;r&&r.pop&&r.pop(t)};t.addEventListener("damage",n),e.onFrameOut(1560,()=>{i.Bgm.stop("STAR_SHIELD"),t.inventory.remove(this),t.removeEventListener("damage",n),t.args.currentSheild=r,this.debindPaused&&this.debindPaused(),delete this.debindPaused}),t.onRemove(()=>i.Bgm.stop("STAR_SHIELD")),i.Bgm.play("STAR_SHIELD",{interlude:!0}),e.args.audio||i.Bgm.pause()}},{key:"immune",value:function(){return!0}},{key:"drop",value:function(t){console.log(this,t),this.debindPaused&&this.debindPaused(),delete this.debindPaused}},{key:"update",value:function(t){const e=t.viewport;if(!e)return;const r=new o.Tag('<div class = "particle-stars">'),n=t.rotatePoint(0,t.args.height/2),i=t.dashed||"springdash"===t.args.animation;t.args.falling;let a=-3;t.args.rolling&&(a=3),i&&(a=-16),r.style({"--frame":this.frame++,"--x":n[0]+t.x+-3+t.args.xSpeed,"--y":n[1]+t.y+t.args.ySpeed+a,"z-index":-1,opacity:2*Math.random()}),e.particles.add(r),e.onFrameOut(15,()=>e.particles.remove(r))}}])&&s(e.prototype,r),a&&s(e,a),Object.defineProperty(e,"prototype",{writable:!1}),h}();t.StarSheild=g}),require.register("powerups/SuperSheild.js",function(t,e,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SuperSheild=void 0;var n=e("./Sheild");function i(t){"@babel/helpers - typeof";return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function o(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,f(n.key),n)}}function a(t,e){return(a=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function s(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=l(t);if(e){var o=l(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===i(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return c(t)}(this,r)}}function c(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function l(t){return(l=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function u(t,e,r){return(e=f(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function f(t){var e=function(t,e){if("object"!==i(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==i(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===i(e)?e:String(e)}let p=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&a(t,e)}(f,n.Sheild);var e,r,i,l=s(f);function f(){var t;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,f);for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];return u(c(t=l.call(this,...r)),"template",'<div class = "sheild super-sheild">\n\t\t<div class = "super-sheild-shine"></div>\n\t\t<div class = "super-sheild-spark"></div>\n\t\t<div class = "super-sheild-flare"></div>\n\t</div>'),u(c(t),"type","super"),t}return e=f,(r=[{key:"immune",value:function(t,e){arguments.length>2&&void 0!==arguments[2]&&arguments[2];return!(!t.isSuper&&!t.isHyper)}}])&&o(e.prototype,r),i&&o(e,i),Object.defineProperty(e,"prototype",{writable:!1}),f}();t.SuperSheild=p}),require.register("region/BgShadeRegion.js",function(t,e,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BgShadeRegion=void 0;var n=e("./ShadeRegion");function i(t){"@babel/helpers - typeof";return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function o(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,f(n.key),n)}}function a(t,e){return(a=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function s(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=l(t);if(e){var o=l(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===i(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return c(t)}(this,r)}}function c(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function l(t){return(l=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function u(t,e,r){return(e=f(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function f(t){var e=function(t,e){if("object"!==i(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==i(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===i(e)?e:String(e)}let p=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&a(t,e)}(f,n.ShadeRegion);var e,r,i,l=s(f);function f(){var t;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,f);for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];return u(c(t=l.call(this,...r)),"currentFilter",-1),u(c(t),"filters",["studio","western","heat","hydro","lava","frost","eight-bit","corruption","black-hole","normal"]),t.args.type="region region-shade bg-region-shade",t}return e=f,r&&o(e.prototype,r),i&&o(e,i),Object.defineProperty(e,"prototype",{writable:!1}),e}();t.BgShadeRegion=p}),require.register("region/BossRegion.js",function(t,e,r){"use strict";function n(t){"@babel/helpers - typeof";return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(t,"__esModule",{value:!0}),t.BossRegion=void 0;var i=e("./Region");function o(t,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,(o=i.key,void 0,"symbol"===n(a=function(t,e){if("object"!==n(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var i=r.call(t,e||"default");if("object"!==n(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(o,"string"))?a:String(a)),i)}var o,a}function a(t,e){return(a=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function s(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,i=c(t);if(e){var o=c(this).constructor;r=Reflect.construct(i,arguments,o)}else r=i.apply(this,arguments);return function(t,e){if(e&&("object"===n(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function c(t){return(c=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}let l=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&a(t,e)}(l,i.Region);var e,r,n,c=s(l);function l(){var t;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,l);for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];return(t=c.call(this,...r)).args.type="region boss",t.args.hidden=!0,t}return e=l,(r=[{key:"updateActor",value:function(t){if(!t.args.falling&&!this.args._boss){const e=this.viewport.actorsById[this.args.boss];if(!e)return void(t.args.bossMode=!1);e.args.hitPoints?t.args.bossMode=!0:t.args.bossMode=!1}}}])&&o(e.prototype,r),n&&o(e,n),Object.defineProperty(e,"prototype",{writable:!1}),l}();t.BossRegion=l}),require.register("region/CorkscrewRegion.js",function(t,e,r){"use strict";function n(t){"@babel/helpers - typeof";return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(t,"__esModule",{value:!0}),t.CorkscrewRegion=void 0;var i=e("./Region");e("curvature/base/Tag");function o(t,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,(o=i.key,void 0,"symbol"===n(a=function(t,e){if("object"!==n(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var i=r.call(t,e||"default");if("object"!==n(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(o,"string"))?a:String(a)),i)}var o,a}function a(t,e){return(a=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function s(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,i=l(t);if(e){var o=l(this).constructor;r=Reflect.construct(i,arguments,o)}else r=i.apply(this,arguments);return function(t,e){if(e&&("object"===n(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function c(){return(c="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=l(t)););return t}(t,e);if(n){var i=Object.getOwnPropertyDescriptor(n,e);return i.get?i.get.call(arguments.length<3?t:r):i.value}}).apply(this,arguments)}function l(t){return(l=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}let u=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&a(t,e)}(f,i.Region);var e,r,n,u=s(f);function f(){var t;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,f);for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];return(t=u.call(this,...r)).args.type="region corkscrew",t.args.hidden=!0,t}return e=f,n=[{key:"fromDef",value:function(t){const e=t.width,r=t.height,n=(t.x,t.y),i=c(l(f),"fromDef",this).call(this,t);return i.args.width=e,i.args.height=r,i.args.y=n+r,i}}],(r=[{key:"updateActor",value:function(t){if(!t.canRoll||t.args.falling&&t.args.ySpeed<0)return;if(Math.abs(t.args.xSpeed)<1||Math.abs(t.args.ySpeed)>5)return void("corkscrew"===t.args.animation&&(t.args.animation="walking"));t.args.groundAngle=0;const e=(t.x-this.x)/this.args.width,r=1+Math.cos(-Math.PI+e*Math.PI*2),n=r*this.args.height*.5;t.args.y=this.y-n-1,t.args.ySpeed=0,t.args.xSpeed=Math.max(Math.abs(t.args.xSpeed)||t.args.width)*Math.sign(t.args.xSpeed),t.args.mode=0,t.args.ignore=-2,t.args.cameraMode="corkscrew",t.args.xSpeed+=Math.sign(t.args.xSpeed)*(-1+Math.abs(r))*.25,t.args.gSpeed=t.args.xSpeed,e>1||e<0?(t.args.animation="walking",t.args.y=this.y-1,t.args.corkscrew=0):(t.args.animation="corkscrew",t.args.corkscrew=e)}},{key:"collideA",value:function(t){return!1}},{key:"solid",get:function(){return!1}},{key:"isEffect",get:function(){return!0}}])&&o(e.prototype,r),n&&o(e,n),Object.defineProperty(e,"prototype",{writable:!1}),f}();t.CorkscrewRegion=u}),require.register("region/DarkRegion.js",function(t,e,r){"use strict";function n(t){"@babel/helpers - typeof";return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(t,"__esModule",{value:!0}),t.DarkRegion=void 0;var i=e("./Region"),o=e("curvature/base/Tag"),a=e("curvature/base/View");function s(t,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,(o=i.key,void 0,"symbol"===n(a=function(t,e){if("object"!==n(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var i=r.call(t,e||"default");if("object"!==n(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(o,"string"))?a:String(a)),i)}var o,a}function c(){return(c="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=f(t)););return t}(t,e);if(n){var i=Object.getOwnPropertyDescriptor(n,e);return i.get?i.get.call(arguments.length<3?t:r):i.value}}).apply(this,arguments)}function l(t,e){return(l=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function u(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,i=f(t);if(e){var o=f(this).constructor;r=Reflect.construct(i,arguments,o)}else r=i.apply(this,arguments);return function(t,e){if(e&&("object"===n(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function f(t){return(f=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}let p=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&l(t,e)}(h,i.Region);var e,r,n,p=u(h);function h(){var t;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,h);for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];return(t=p.call(this,...r)).args.type="region region-shade region-dark",t.paths=new Map,t.actors=new Set,t}return e=h,(r=[{key:"onRendered",value:function(t){c(f(h.prototype),"onRendered",this).call(this,t),this.basePath="M 0 0\n    \t\t\t\t\tL 0 545\n    \t\t\t\t\tL 544 545\n    \t\t\t\t\tL 544 0\n    \t\t\t\t\tZ",this.mask=a.View.from(`<svg style = "position:absolute; width: calc(100vw + 2px); height: calc(100vh + 2px); top: -1px; left: -1px">\n\t\t\t<defs>\n\t\t\t\t<clipPath id = "mask-${this.args.id}" clipPathUnits="userSpaceOnUse">\n\t\t\t\t\t<path data-lights />\n\t\t\t\t</clipPath>\n\t\t\t</defs>\n\t\t<svg>`),this.mask.render(this.tags.sprite),this.path=this.mask.findTag("path[data-lights]"),this.path.attr({d:`${this.basePath} ${this.lightPath}`}),this.tags.sprite.style({"--maskImage":`url(#mask-${this.args.id})`})}},{key:"update",value:function(){c(f(h.prototype),"update",this).call(this),!this.filterWrapper&&this.tags.sprite&&(this.filterWrapper=new o.Tag('<div class = "region-filter-wrapper">'),this.colorWrapper=new o.Tag('<div class = "region-color-wrapper">'),this.filter=new o.Tag('<div class = "region-filter">'),this.color=new o.Tag('<div class = "region-color">'),this.filterWrapper.appendChild(this.filter.node),this.colorWrapper.appendChild(this.color.node),this.tags.sprite.appendChild(this.filterWrapper.node),this.tags.sprite.appendChild(this.colorWrapper.node))}},{key:"updateEnd",value:function(){c(f(h.prototype),"updateEnd",this).call(this);for(const t of this.actors){const e=-this.viewport.args.y-(this.args.y-this.args.height),r=t.x+t.viewport.args.x,n=t.y+t.viewport.args.y-.5*t.args.height+(e<0?e:0);if(t.args.polygon){const e=Object.assign([],t.args.polygon),i=e.shift(),o=e.map(t=>`L ${r+t.x} ${n+t.y}`).join(" ");this.paths.set(t,`M ${r+i.x} ${n+i.y}\n\t\t\t\t\t ${o}\n\t\t\t\t\t Z`)}}this.path.attr({d:this.basePath+" "+[...this.paths.values()].join(" ")}),this.actors.clear(),this.paths.clear()}},{key:"updateActor",value:function(t){t.controllable,this.actors.add(t)}},{key:"solid",get:function(){return!1}},{key:"isEffect",get:function(){return!0}}])&&s(e.prototype,r),n&&s(e,n),Object.defineProperty(e,"prototype",{writable:!1}),h}();t.DarkRegion=p}),require.register("region/DebrisRegion.js",function(t,e,r){"use strict";function n(t){"@babel/helpers - typeof";return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(t,"__esModule",{value:!0}),t.DebrisRegion=void 0;var i=e("./Region"),o=e("curvature/base/Tag");e("curvature/base/View");function a(t,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,(o=i.key,void 0,"symbol"===n(a=function(t,e){if("object"!==n(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var i=r.call(t,e||"default");if("object"!==n(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(o,"string"))?a:String(a)),i)}var o,a}function s(){return(s="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=u(t)););return t}(t,e);if(n){var i=Object.getOwnPropertyDescriptor(n,e);return i.get?i.get.call(arguments.length<3?t:r):i.value}}).apply(this,arguments)}function c(t,e){return(c=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function l(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,i=u(t);if(e){var o=u(this).constructor;r=Reflect.construct(i,arguments,o)}else r=i.apply(this,arguments);return function(t,e){if(e&&("object"===n(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function u(t){return(u=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}let f=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&c(t,e)}(p,i.Region);var e,r,n,f=l(p);function p(){var t,e;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,p);for(var r=arguments.length,n=new Array(r),i=0;i<r;i++)n[i]=arguments[i];return(e=f.call(this,...n)).args.type="region region-shade region-debris",e.args.active=null===(t=e.args.active)||void 0===t||t,e}return e=p,(r=[{key:"update",value:function(){this.others.switch&&(this.args.active=this.others.switch.args.active),s(u(p.prototype),"update",this).call(this),!this.filterWrapper&&this.tags.sprite&&(this.filterWrapper=new o.Tag('<div class = "region-filter-wrapper">'),this.colorWrapper=new o.Tag('<div class = "region-color-wrapper">'),this.filter=new o.Tag('<div class = "region-filter">'),this.color=new o.Tag('<div class = "region-color">'),this.filterWrapper.appendChild(this.filter.node),this.colorWrapper.appendChild(this.color.node),this.tags.sprite.appendChild(this.filterWrapper.node),this.tags.sprite.appendChild(this.colorWrapper.node))}},{key:"solid",get:function(){return!1}},{key:"isEffect",get:function(){return!0}}])&&a(e.prototype,r),n&&a(e,n),Object.defineProperty(e,"prototype",{writable:!1}),p}();t.DebrisRegion=f}),require.register("region/DropVehicleRegion.js",function(t,e,r){"use strict";function n(t){"@babel/helpers - typeof";return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(t,"__esModule",{value:!0}),t.DropVehicleRegion=void 0;var i=e("./Region");e("../ObjectPalette");function o(t,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,(o=i.key,void 0,"symbol"===n(a=function(t,e){if("object"!==n(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var i=r.call(t,e||"default");if("object"!==n(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(o,"string"))?a:String(a)),i)}var o,a}function a(t,e){return(a=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function s(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,i=c(t);if(e){var o=c(this).constructor;r=Reflect.construct(i,arguments,o)}else r=i.apply(this,arguments);return function(t,e){if(e&&("object"===n(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function c(t){return(c=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}let l=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&a(t,e)}(l,i.Region);var e,r,n,c=s(l);function l(){var t;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,l);for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];return(t=c.call(this,...r)).args.type="region drop-vehicle",t}return e=l,(r=[{key:"updateActor",value:function(t){t.controllable&&(t.isVehicle||t.args.standingOn&&(t.args.standingOn=null))}}])&&o(e.prototype,r),n&&o(e,n),Object.defineProperty(e,"prototype",{writable:!1}),l}();t.DropVehicleRegion=l}),require.register("region/ExitRegion.js",function(t,e,r){"use strict";function n(t){"@babel/helpers - typeof";return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(t,"__esModule",{value:!0}),t.ExitRegion=void 0;var i=e("./Region");function o(t,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,(o=i.key,void 0,"symbol"===n(a=function(t,e){if("object"!==n(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var i=r.call(t,e||"default");if("object"!==n(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(o,"string"))?a:String(a)),i)}var o,a}function a(t,e){return(a=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function s(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,i=c(t);if(e){var o=c(this).constructor;r=Reflect.construct(i,arguments,o)}else r=i.apply(this,arguments);return function(t,e){if(e&&("object"===n(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function c(t){return(c=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}let l=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&a(t,e)}(l,i.Region);var e,r,n,c=s(l);function l(){var t;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,l);for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];return(t=c.call(this,...r)).args.type="region exit",t.args.hidden=!0,t.triggered=!1,t}return e=l,(r=[{key:"updateActor",value:function(t){if(!this.viewport)return;if(this.others.boss&&this.others.boss.args.hitPoints>0)return;if(t.occupant&&(t=t.occupant),!t.controllable)return;const e=this.viewport;e.clearCheckpoints(),this.triggered||e.onFrameOut(30,()=>{if(this.triggered)return;this.triggered=!0;const r=this.others.signpost&&this.others.signpost.tally;if(e.replay)e.quit(2);else if(this.args.nextStage){(r||e.clearAct(`${t.args.name} GOT THROUGH\n${e.args.actName}`,!1)).addEventListener("done",t=>e.quit(2,()=>e.loadMap({mapUrl:"/map/"+this.args.nextStage})))}else{(r||e.clearAct(`${t.args.name} GOT THROUGH\n${e.args.actName}`,!1)).addEventListener("done",t=>e.quit(2))}})}},{key:"solid",get:function(){return!1}},{key:"isEffect",get:function(){return!0}}])&&o(e.prototype,r),n&&o(e,n),Object.defineProperty(e,"prototype",{writable:!1}),l}();t.ExitRegion=l}),require.register("region/ExplodingRegion.js",function(t,e,r){"use strict";function n(t){"@babel/helpers - typeof";return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(t,"__esModule",{value:!0}),t.ExplodingRegion=void 0;var i=e("./Region"),o=e("../audio/Sfx"),a=e("curvature/base/Tag");function s(t,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,(o=i.key,void 0,"symbol"===n(a=function(t,e){if("object"!==n(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var i=r.call(t,e||"default");if("object"!==n(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(o,"string"))?a:String(a)),i)}var o,a}function c(){return(c="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=f(t)););return t}(t,e);if(n){var i=Object.getOwnPropertyDescriptor(n,e);return i.get?i.get.call(arguments.length<3?t:r):i.value}}).apply(this,arguments)}function l(t,e){return(l=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function u(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,i=f(t);if(e){var o=f(this).constructor;r=Reflect.construct(i,arguments,o)}else r=i.apply(this,arguments);return function(t,e){if(e&&("object"===n(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function f(t){return(f=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}let p=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&l(t,e)}(h,i.Region);var e,r,n,p=u(h);function h(){var t;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,h);for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];return(t=p.call(this,...r)).args.type="region region-exploding",t}return e=h,(r=[{key:"updateActor",value:function(t){this.args.active&&(t.controllable||(t.break&&(t.break(),this.viewport.actorIsOnScreen(t)||this.viewport.actors.remove(t)),t.pop&&(t.pop(),this.viewport.actorIsOnScreen(t)||this.viewport.actors.remove(t))))}},{key:"update",value:function(){c(f(h.prototype),"update",this).call(this);const t=this.viewport;if(t)if(this.args.active){if(t){Math.random()>.85&&o.Sfx.play("BOSS_DAMAGED");for(let e=0;e<1;e++){const e=document.createElement("div");e.classList.add("particle-explosion");const r=new a.Tag(e),n=(this.args.width,Math.random(),this.args.height,Math.random(),Math.max(this.x,-this.viewport.args.x)),i=Math.max(this.y,-this.viewport.args.y),o=Math.min(this.x+this.args.width,-this.viewport.args.x+this.viewport.args.width),s=Math.min(this.y-this.args.height,-this.viewport.args.y-this.viewport.args.height/2),c=o-n,l=i-s;r.style({"--x":n+c*Math.random(),"--y":s+l*Math.random()}),t.particles.add(r),setTimeout(()=>t.particles.remove(r),512)}}}else{if(this.args.target&&t.actorsById[this.args.target]){const e=t.actorsById[this.args.target];t.auras.delete(e)}t.auras.delete(this)}}},{key:"activate",value:function(){o.Sfx.play("BOSS_DAMAGED"),this.args.active=!0,this.viewport.onFrameOut(250,()=>this.args.active=!1),this.args.target&&this.viewport.actorsById[this.args.target]&&this.viewport.onFrameOut(60,()=>{const t=this.viewport.actorsById[this.args.target];this.viewport.auras.add(t),t.activate(other,this)})}}])&&s(e.prototype,r),n&&s(e,n),Object.defineProperty(e,"prototype",{writable:!1}),h}();t.ExplodingRegion=p}),require.register("region/FgShadeRegion.js",function(t,e,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.FgShadeRegion=void 0;var n=e("./ShadeRegion");function i(t){"@babel/helpers - typeof";return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function o(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,f(n.key),n)}}function a(t,e){return(a=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function s(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=l(t);if(e){var o=l(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===i(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return c(t)}(this,r)}}function c(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function l(t){return(l=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function u(t,e,r){return(e=f(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function f(t){var e=function(t,e){if("object"!==i(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==i(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===i(e)?e:String(e)}let p=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&a(t,e)}(f,n.ShadeRegion);var e,r,i,l=s(f);function f(){var t;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,f);for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];return u(c(t=l.call(this,...r)),"currentFilter",-1),u(c(t),"filters",["studio","western","heat","hydro","lava","frost","eight-bit","corruption","black-hole","normal"]),t.args.type="fg-region-shade region region-shade",t}return e=f,r&&o(e.prototype,r),i&&o(e,i),Object.defineProperty(e,"prototype",{writable:!1}),e}();t.FgShadeRegion=p}),require.register("region/ForceRegion.js",function(t,e,r){"use strict";function n(t){"@babel/helpers - typeof";return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(t,"__esModule",{value:!0}),t.ForceRegion=void 0;var i=e("./Region");e("curvature/base/Tag");function o(t,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,(o=i.key,void 0,"symbol"===n(a=function(t,e){if("object"!==n(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var i=r.call(t,e||"default");if("object"!==n(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(o,"string"))?a:String(a)),i)}var o,a}function a(){return(a="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=l(t)););return t}(t,e);if(n){var i=Object.getOwnPropertyDescriptor(n,e);return i.get?i.get.call(arguments.length<3?t:r):i.value}}).apply(this,arguments)}function s(t,e){return(s=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function c(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,i=l(t);if(e){var o=l(this).constructor;r=Reflect.construct(i,arguments,o)}else r=i.apply(this,arguments);return function(t,e){if(e&&("object"===n(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function l(t){return(l=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}let u=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&s(t,e)}(f,i.Region);var e,r,n,u=c(f);function f(t,e){var r,n,i,o;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,f),(o=u.call(this,t,e)).args.type="region region-force",o.args.xForce=null!==(r=o.args.xForce)&&void 0!==r?r:0,o.args.yForce=null!==(n=o.args.yForce)&&void 0!==n?n:-5,o.args.active=null!==(i=o.args.active)&&void 0!==i?i:1,o}return e=f,(r=[{key:"update",value:function(){this.originalHeight||(this.originalHeight=this.args.height),this.switch&&this.switch.args.active>0&&!this.args.active&&(this.args.active=!0),a(l(f.prototype),"update",this).call(this)}},{key:"onAttach",value:function(){this.viewport&&this.args.switch}},{key:"wakeUp",value:function(){this.switch=this.viewport.actorsById[this.args.switch]}},{key:"activate",value:function(){this.args.active=1}},{key:"updateActor",value:function(t){if(t instanceof i.Region||t.args.static)return;if(this.args.active<=0)return;if(t.args.falling){const e=t.args.xSpeed+Number(this.args.xForce);Math.abs(e)>Math.abs(this.args.xForceMax)&&Math.sign(this.args.xForceMax)===Math.sign(e)?t.args.xSpeed=this.args.xForceMax:t.args.xSpeed=e;const r=t.args.ySpeed+Number(this.args.yForce);return Math.abs(r)>Math.abs(this.args.yForceMax)&&Math.sign(this.args.yForceMax)===Math.sign(r)?(Math.abs(r)>=t.args.gravity||t.args.falling)&&(t.args.ySpeed=this.args.yForceMax):t.args.ySpeed=r,void(t.args.groundAngle=0)}let e;switch(t.args.mode){case 0:e=t.args.gSpeed+this.args.xForce,Math.abs(e)>Math.abs(this.args.xForceMax)&&Math.sign(this.args.xForceMax)===Math.sign(e)?t.args.gSpeed=this.args.xForceMax:t.args.gSpeed=e;break;case 1:t.args.gSpeed+=Math.sign(this.args.yForce);break;case 2:t.args.gSpeed-=Math.sign(this.args.xForce);break;case 3:t.args.gSpeed-=Math.sign(this.args.yForce)}}},{key:"solid",get:function(){return!1}},{key:"isEffect",get:function(){return!0}}])&&o(e.prototype,r),n&&o(e,n),Object.defineProperty(e,"prototype",{writable:!1}),f}();t.ForceRegion=u}),require.register("region/FrictionRegion.js",function(t,e,r){"use strict";function n(t){"@babel/helpers - typeof";return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(t,"__esModule",{value:!0}),t.FrictionRegion=void 0;var i=e("./Region");e("curvature/base/Tag");function o(t,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,(o=i.key,void 0,"symbol"===n(a=function(t,e){if("object"!==n(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var i=r.call(t,e||"default");if("object"!==n(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(o,"string"))?a:String(a)),i)}var o,a}function a(t,e){return(a=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function s(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,i=c(t);if(e){var o=c(this).constructor;r=Reflect.construct(i,arguments,o)}else r=i.apply(this,arguments);return function(t,e){if(e&&("object"===n(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function c(t){return(c=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}let l=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&a(t,e)}(l,i.Region);var e,r,n,c=s(l);function l(){var t,e;let r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1?arguments[1]:void 0;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,l),(e=c.call(this,r,n)).args.type="region region-friction",e.args.friction=null!==(t=r.friction)&&void 0!==t?t:1,e}return e=l,(r=[{key:"solid",get:function(){return!1}},{key:"isEffect",get:function(){return!0}}])&&o(e.prototype,r),n&&o(e,n),Object.defineProperty(e,"prototype",{writable:!1}),l}();t.FrictionRegion=l}),require.register("region/GrindingRegion.js",function(t,e,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.GrindingRegion=void 0;var n=e("./Region");e("curvature/base/Tag");function i(t){"@babel/helpers - typeof";return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function o(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,f(n.key),n)}}function a(){return(a="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=u(t)););return t}(t,e);if(n){var i=Object.getOwnPropertyDescriptor(n,e);return i.get?i.get.call(arguments.length<3?t:r):i.value}}).apply(this,arguments)}function s(t,e){return(s=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function c(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=u(t);if(e){var o=u(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===i(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return l(t)}(this,r)}}function l(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function u(t){return(u=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function f(t){var e=function(t,e){if("object"!==i(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==i(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===i(e)?e:String(e)}let p=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&s(t,e)}(h,n.Region);var e,r,i,p=c(h);function h(){var t,e,r,n;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,h);for(var i=arguments.length,o=new Array(i),a=0;a<i;a++)o[a]=arguments[a];return t=p.call(this,...o),e=l(t),n=!0,(r=f(r="grind"))in e?Object.defineProperty(e,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[r]=n,t.args.type="region grinding",t.args.hidden=!0,t}return e=h,(r=[{key:"update",value:function(){this.originalHeight||(this.originalHeight=this.args.height),a(u(h.prototype),"update",this).call(this)}},{key:"updateActor",value:function(t){t.args.falling||(t.args.grinding=!0)}},{key:"collideA",value:function(t,e){a(u(h.prototype),"collideA",this).call(this,t,e)}},{key:"collideB",value:function(t,e){a(u(h.prototype),"collideA",this).call(this,t,e)}},{key:"solid",get:function(){return!1}},{key:"isEffect",get:function(){return!0}}])&&o(e.prototype,r),i&&o(e,i),Object.defineProperty(e,"prototype",{writable:!1}),h}();t.GrindingRegion=p}),require.register("region/KillRegion.js",function(t,e,r){"use strict";function n(t){"@babel/helpers - typeof";return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(t,"__esModule",{value:!0}),t.KillRegion=void 0;var i=e("./Region");function o(t,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,(o=i.key,void 0,"symbol"===n(a=function(t,e){if("object"!==n(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var i=r.call(t,e||"default");if("object"!==n(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(o,"string"))?a:String(a)),i)}var o,a}function a(t,e){return(a=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function s(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,i=c(t);if(e){var o=c(this).constructor;r=Reflect.construct(i,arguments,o)}else r=i.apply(this,arguments);return function(t,e){if(e&&("object"===n(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function c(t){return(c=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}let l=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&a(t,e)}(l,i.Region);var e,r,n,c=s(l);function l(){var t;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,l);for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];return(t=c.call(this,...r)).args.type="region kill",t.args.hidden=!0,t}return e=l,(r=[{key:"updateActor",value:function(t){t.controllable&&t.die()}}])&&o(e.prototype,r),n&&o(e,n),Object.defineProperty(e,"prototype",{writable:!1}),l}();t.KillRegion=l}),require.register("region/LavaRegion.js",function(t,e,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LavaRegion=void 0;var n=e("./Region"),i=e("../actor/Ring"),o=e("../actor/MarbleBlock"),a=e("curvature/base/Tag"),s=e("curvature/base/Bindable");function c(t){"@babel/helpers - typeof";return(c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function l(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,d(n.key),n)}}function u(){return(u="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=g(t)););return t}(t,e);if(n){var i=Object.getOwnPropertyDescriptor(n,e);return i.get?i.get.call(arguments.length<3?t:r):i.value}}).apply(this,arguments)}function f(t,e){return(f=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function p(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=g(t);if(e){var i=g(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===c(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return h(t)}(this,r)}}function h(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function g(t){return(g=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function d(t){var e=function(t,e){if("object"!==c(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==c(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===c(e)?e:String(e)}let y=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&f(t,e)}(b,n.Region);var e,r,c,y=p(b);function b(){var t,e,r,n;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,b);for(var i=arguments.length,o=new Array(i),a=0;a<i;a++)o[a]=arguments[a];return t=y.call(this,...o),e=h(t),n=!0,(r=d(r="isWater"))in e?Object.defineProperty(e,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[r]=n,t.args.type="region region-lava",t.args.gravity=.5,t.args.drag=.85,t.args.density=15,t.skimSpeed=1/0,t}return e=b,(r=[{key:"update",value:function(){!this.filterWrapper&&this.tags.sprite&&(this.filterWrapper=new a.Tag('<div class = "region-filter-wrapper">'),this.colorWrapper=new a.Tag('<div class = "region-color-wrapper">'),this.filter=new a.Tag('<div class = "region-filter">'),this.color=new a.Tag('<div class = "region-color">'),this.filterWrapper.appendChild(this.filter.node),this.colorWrapper.appendChild(this.color.node),this.tags.sprite.appendChild(this.filterWrapper.node),this.tags.sprite.appendChild(this.colorWrapper.node)),this.originalHeight||(this.originalHeight=this.args.height),u(g(b.prototype),"update",this).call(this)}},{key:"updateActor",value:function(t){t instanceof i.Ring?t.args.ySpeed=-Math.abs(t.args.ySpeed||-6):t.noClip||(t.controllable||t instanceof i.Ring)&&(t.y<this.y+-this.args.height+8||t.args.ySpeed<0||t.args.ignore||t.args.mercy||t.immune(this,"fire")||t.damage(this,"fire"))}},{key:"collideA",value:function(t,e){if(!t.noClip)return!(t instanceof o.MarbleBlock)&&((!t.args.standingOn||t.args.standingOn===s.Bindable.make(this))&&(u(g(b.prototype),"collideA",this).call(this,t,e),!(!t.args.mercy&&!t.immune(this,"fire"))||(t.damage(this,"fire"),!0)))}},{key:"solid",get:function(){return!0}},{key:"isEffect",get:function(){return!0}}])&&l(e.prototype,r),c&&l(e,c),Object.defineProperty(e,"prototype",{writable:!1}),b}();t.LavaRegion=y}),require.register("region/LoadingRegion.js",function(t,e,r){"use strict";function n(t){"@babel/helpers - typeof";return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(t,"__esModule",{value:!0}),t.LoadingRegion=void 0;var i=e("./Region");function o(t,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,(o=i.key,void 0,"symbol"===n(a=function(t,e){if("object"!==n(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var i=r.call(t,e||"default");if("object"!==n(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(o,"string"))?a:String(a)),i)}var o,a}function a(){return(a="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=l(t)););return t}(t,e);if(n){var i=Object.getOwnPropertyDescriptor(n,e);return i.get?i.get.call(arguments.length<3?t:r):i.value}}).apply(this,arguments)}function s(t,e){return(s=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function c(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,i=l(t);if(e){var o=l(this).constructor;r=Reflect.construct(i,arguments,o)}else r=i.apply(this,arguments);return function(t,e){if(e&&("object"===n(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function l(t){return(l=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}let u=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&s(t,e)}(f,i.Region);var e,r,n,u=c(f);function f(){var t,e;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,f);for(var r=arguments.length,n=new Array(r),i=0;i<r;i++)n[i]=arguments[i];return(e=u.call(this,...n)).args.hidden=!0,e.loading=e.loaded=!1,e.args.xOffset=null!==(t=e.args.xOffset)&&void 0!==t?t:0,e}return e=f,(r=[{key:"updateActor",value:function(t){this.others.signpost&&!this.others.signpost.args.active&&this.others.signpostAlt&&!this.others.signpostAlt.args.active||t.controllable&&(this.loaded||this.loading||this.loading||(this.loading=!0))}},{key:"updateEnd",value:function(){if(a(l(f.prototype),"updateStart",this).call(this),this.loaded||!this.loading)return;const t=this.viewport,e=t.tileMap,r=(e.mapData.width,e.mapData.height,this.args.x/32+this.args.xOffset);this.others.signpost&&this.others.signpost.willActivate?(t.args.frozen=30,t.appendMap(this.args.map,r,0),this.loaded=!0):this.others.signpostAlt&&this.others.signpostAlt.willActivate&&(t.args.frozen=30,t.appendMap(this.args.map,r,0),this.loaded=!0)}},{key:"solid",get:function(){return!1}},{key:"isEffect",get:function(){return!0}}])&&o(e.prototype,r),n&&o(e,n),Object.defineProperty(e,"prototype",{writable:!1}),f}();t.LoadingRegion=u}),require.register("region/PerspectiveRegion.js",function(t,e,r){"use strict";function n(t){"@babel/helpers - typeof";return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(t,"__esModule",{value:!0}),t.PerspectiveRegion=void 0;var i=e("./Region");e("curvature/base/Tag");function o(t,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,(o=i.key,void 0,"symbol"===n(a=function(t,e){if("object"!==n(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var i=r.call(t,e||"default");if("object"!==n(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(o,"string"))?a:String(a)),i)}var o,a}function a(){return(a="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=l(t)););return t}(t,e);if(n){var i=Object.getOwnPropertyDescriptor(n,e);return i.get?i.get.call(arguments.length<3?t:r):i.value}}).apply(this,arguments)}function s(t,e){return(s=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function c(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,i=l(t);if(e){var o=l(this).constructor;r=Reflect.construct(i,arguments,o)}else r=i.apply(this,arguments);return function(t,e){if(e&&("object"===n(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function l(t){return(l=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}let u=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&s(t,e)}(f,i.Region);var e,r,n,u=c(f);function f(t,e){var r,n,i,o,a;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,f),(a=u.call(this,t,e)).args.sticky=!0,a.args.type="region rolling",a.args.destroyTruck=null!==(r=a.args.destroyTruck)&&void 0!==r&&r,a.args.maxSpeed=null!==(n=a.args.maxSpeed)&&void 0!==n?n:-1,a.args.minSpeed=null!==(i=a.args.minSpeed)&&void 0!==i?i:-1,a.args.canJump=null!==(o=a.args.canJump)&&void 0!==o&&o,a.args.hidden=!0,a.args.perspective=!0,a.args.shift=a.args.shift||600,a}return e=f,(r=[{key:"update",value:function(){this.originalHeight||(this.originalHeight=this.args.height),a(l(f.prototype),"update",this).call(this)}},{key:"updateActor",value:function(t){if(t!==this.viewport.controlActor)return;let e=(Math.abs(t.realAngle)+-Math.PI)/(.5*Math.PI);(e=-1+Math.abs(e))<0&&(e=1-++e),e=1-e,this.viewport.args.xPerspective=this.args.shift*e}},{key:"solid",get:function(){return!1}},{key:"isEffect",get:function(){return!0}}])&&o(e.prototype,r),n&&o(e,n),Object.defineProperty(e,"prototype",{writable:!1}),f}();t.PerspectiveRegion=u}),require.register("region/PhazonRegion.js",function(t,e,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PhazonRegion=void 0;var n=e("./Region"),i=e("../actor/Ring"),o=e("../actor/MarbleBlock"),a=e("curvature/base/Tag"),s=e("curvature/base/Bindable"),c=e("../actor/LavaBall");e("../audio/Sfx");function l(t){"@babel/helpers - typeof";return(l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function u(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,y(n.key),n)}}function f(){return(f="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=d(t)););return t}(t,e);if(n){var i=Object.getOwnPropertyDescriptor(n,e);return i.get?i.get.call(arguments.length<3?t:r):i.value}}).apply(this,arguments)}function p(t,e){return(p=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function h(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=d(t);if(e){var i=d(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===l(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return g(t)}(this,r)}}function g(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function d(t){return(d=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function y(t){var e=function(t,e){if("object"!==l(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==l(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===l(e)?e:String(e)}let b=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&p(t,e)}(v,n.Region);var e,r,l,b=h(v);function v(){var t,e,r,n;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,v);for(var i=arguments.length,o=new Array(i),a=0;a<i;a++)o[a]=arguments[a];return t=b.call(this,...o),e=g(t),n=!0,(r=y(r="isWater"))in e?Object.defineProperty(e,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[r]=n,t.args.type="region region-phazon",t.args.gravity=.5,t.args.drag=.85,t.args.density=15,t.skimSpeed=1/0,t.sapped=new Set,t.timings=new WeakMap,t.onRemove(()=>t.sapped.clear()),t}return e=v,(r=[{key:"update",value:function(){this.sapped.clear(),!this.filterWrapper&&this.tags.sprite&&(this.filterWrapper=new a.Tag('<div class = "region-filter-wrapper">'),this.colorWrapper=new a.Tag('<div class = "region-color-wrapper">'),this.filter=new a.Tag('<div class = "region-filter">'),this.color=new a.Tag('<div class = "region-color">'),this.filterWrapper.appendChild(this.filter.node),this.colorWrapper.appendChild(this.color.node),this.tags.sprite.appendChild(this.filterWrapper.node),this.tags.sprite.appendChild(this.colorWrapper.node)),this.originalHeight||(this.originalHeight=this.args.height),f(d(v.prototype),"update",this).call(this)}},{key:"updateActor",value:function(t){t instanceof i.Ring?t.args.ySpeed=-Math.abs(t.args.ySpeed||-6):t.noClip||(t.controllable||t instanceof i.Ring)&&(t.y<this.y+-this.args.height+8||t.args.ySpeed<0||t.args.ignore||!t.args.mercy&&t.immune(this,"fire"))}},{key:"collideA",value:function(t,e){if(!t.noClip){if(t instanceof o.MarbleBlock||t instanceof c.LavaBall)return!1;if(t.args.standingOn&&t.args.standingOn!==s.Bindable.make(this))return!1;if(t.args.y=Math.round(t.args.y),f(d(v.prototype),"collideA",this).call(this,t,e),t.args.mercy||t.immune(this,"phazon"))return!0;if(t.controllable&&!this.sapped.has(t)){let e=0;this.timings.has(t)||this.timings.set(t,e),e=this.timings.get(t),e++,this.timings.set(t,e),e%9==0&&(!t.args.float||t.fallTime<20)&&t.sap()}return this.sapped.add(t),!0}}},{key:"solid",get:function(){return!0}},{key:"isEffect",get:function(){return!0}}])&&u(e.prototype,r),l&&u(e,l),Object.defineProperty(e,"prototype",{writable:!1}),v}();t.PhazonRegion=b}),require.register("region/RainRegion.js",function(t,e,r){"use strict";function n(t){"@babel/helpers - typeof";return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(t,"__esModule",{value:!0}),t.RainRegion=void 0;var i=e("./Region"),o=e("curvature/base/Tag");e("curvature/base/View");function a(t,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,(o=i.key,void 0,"symbol"===n(a=function(t,e){if("object"!==n(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var i=r.call(t,e||"default");if("object"!==n(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(o,"string"))?a:String(a)),i)}var o,a}function s(){return(s="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=u(t)););return t}(t,e);if(n){var i=Object.getOwnPropertyDescriptor(n,e);return i.get?i.get.call(arguments.length<3?t:r):i.value}}).apply(this,arguments)}function c(t,e){return(c=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function l(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,i=u(t);if(e){var o=u(this).constructor;r=Reflect.construct(i,arguments,o)}else r=i.apply(this,arguments);return function(t,e){if(e&&("object"===n(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function u(t){return(u=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}let f=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&c(t,e)}(p,i.Region);var e,r,n,f=l(p);function p(){var t;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,p);for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];return(t=f.call(this,...r)).args.type="region region-shade region-rain",t}return e=p,(r=[{key:"update",value:function(){s(u(p.prototype),"update",this).call(this),!this.filterWrapper&&this.tags.sprite&&(this.filterWrapper=new o.Tag('<div class = "region-filter-wrapper">'),this.colorWrapper=new o.Tag('<div class = "region-color-wrapper">'),this.filter=new o.Tag('<div class = "region-filter">'),this.color=new o.Tag('<div class = "region-color">'),this.filterWrapper.appendChild(this.filter.node),this.colorWrapper.appendChild(this.color.node),this.tags.sprite.appendChild(this.filterWrapper.node),this.tags.sprite.appendChild(this.colorWrapper.node))}},{key:"solid",get:function(){return!1}},{key:"isEffect",get:function(){return!0}}])&&a(e.prototype,r),n&&a(e,n),Object.defineProperty(e,"prototype",{writable:!1}),p}();t.RainRegion=f}),require.register("region/Region.js",function(t,e,r){"use strict";function n(t){"@babel/helpers - typeof";return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(t,"__esModule",{value:!0}),t.Region=void 0;var i=e("curvature/base/Tag"),o=e("../actor/PointActor");function a(t,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,(o=i.key,void 0,"symbol"===n(a=function(t,e){if("object"!==n(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var i=r.call(t,e||"default");if("object"!==n(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(o,"string"))?a:String(a)),i)}var o,a}function s(t,e){return(s=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function c(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,i=u(t);if(e){var o=u(this).constructor;r=Reflect.construct(i,arguments,o)}else r=i.apply(this,arguments);return function(t,e){if(e&&("object"===n(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function l(){return(l="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=u(t)););return t}(t,e);if(n){var i=Object.getOwnPropertyDescriptor(n,e);return i.get?i.get.call(arguments.length<3?t:r):i.value}}).apply(this,arguments)}function u(t){return(u=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}let f=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&s(t,e)}(p,o.PointActor);var e,r,n,f=c(p);function p(){var t;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,p);for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];return(t=f.call(this,...r)).args.type="region",t.args.width=t.args.width||32,t.args.height=t.args.height||32,t.args.density=0,t.args.gravity=1,t.args.drag=1,t.skimSpeed=1/0,t.args.float=-1,t.isRegion=!0,t.skimmers=new WeakSet,t}return e=p,n=[{key:"fromDef",value:function(t){const e=l(u(p),"fromDef",this).call(this,t);return e.args.width=t.width,e.args.height=t.height,e.args.x=e.originalX=-0+Math.floor(t.x),e.args.y=e.originalY=-0+Math.floor(t.y),e.args.static=!0,e}}],(r=[{key:"onRendered",value:function(){this.mainElem=new i.Tag(this.tags.sprite.parentNode),l(u(p.prototype),"onRendered",this).call(this)}},{key:"skim",value:function(t){this.skimmers.add(t)}},{key:"updateStart",value:function(){this.skimmers=new WeakSet,l(u(p.prototype),"updateStart",this).call(this)}},{key:"update",value:function(){if(this.viewport&&(!this.focus&&this.args.focus&&(this.focus=this.viewport.actorsById[this.args.focus]),l(u(p.prototype),"update",this).call(this),this.viewport.args.frameId%this.viewport.settings.frameSkip==0)){var t;const e=-this.viewport.args.y-(this.args.y-this.args.height),r=-this.viewport.args.x-this.args.x;this.mainElem&&this.mainElem.style({"--viewportWidth":this.viewport.args.width+"px","--viewportHeight":this.viewport.args.height+"px","--leftBoundry":r+"px","--topBoundry":e+"px","--vpX":this.viewport.args.x+"px","--vpY":this.viewport.args.y+"px","--color":null!==(t=this.args.color)&&void 0!==t?t:"rgba(0,128,255,0.33)"})}}},{key:"updateActor",value:function(t){}},{key:"solid",get:function(){return!1}},{key:"isEffect",get:function(){return!0}},{key:"enter",value:function(t){}},{key:"leave",value:function(t){}}])&&a(e.prototype,r),n&&a(e,n),Object.defineProperty(e,"prototype",{writable:!1}),p}();t.Region=f}),require.register("region/RollingRegion.js",function(t,e,r){"use strict";function n(t){"@babel/helpers - typeof";return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(t,"__esModule",{value:!0}),t.RollingRegion=void 0;var i=e("./Region");e("curvature/base/Tag");function o(t,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,(o=i.key,void 0,"symbol"===n(a=function(t,e){if("object"!==n(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var i=r.call(t,e||"default");if("object"!==n(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(o,"string"))?a:String(a)),i)}var o,a}function a(){return(a="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=l(t)););return t}(t,e);if(n){var i=Object.getOwnPropertyDescriptor(n,e);return i.get?i.get.call(arguments.length<3?t:r):i.value}}).apply(this,arguments)}function s(t,e){return(s=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function c(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,i=l(t);if(e){var o=l(this).constructor;r=Reflect.construct(i,arguments,o)}else r=i.apply(this,arguments);return function(t,e){if(e&&("object"===n(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function l(t){return(l=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}let u=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&s(t,e)}(f,i.Region);var e,r,n,u=c(f);function f(t,e){var r,n,i,o,a;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,f),(a=u.call(this,t,e)).args.sticky=!0,a.args.type="region rolling",a.args.destroyTruck=null!==(r=a.args.destroyTruck)&&void 0!==r&&r,a.args.maxSpeed=null!==(n=a.args.maxSpeed)&&void 0!==n?n:-1,a.args.minSpeed=null!==(i=a.args.minSpeed)&&void 0!==i?i:-1,a.args.canJump=null!==(o=a.args.canJump)&&void 0!==o&&o,a.args.hidden=!0,a}return e=f,(r=[{key:"update",value:function(){this.originalHeight||(this.originalHeight=this.args.height),a(l(f.prototype),"update",this).call(this)}},{key:"updateActor",value:function(t){if(!t.controllable)return;if(t.args.falling)return;t.willStick=!1;const e=t.args.modeTime>5?t.gSpeedLast:0;Math.abs(t.args.gSpeed)<this.args.minSpeed&&(t.args.gSpeed=this.args.minSpeed*Math.sign(t.args.gSpeed||e||t.args.direction)),this.args.maxSpeed>0&&Math.abs(t.args.gSpeed)>this.args.maxSpeed&&(t.args.gSpeed=this.args.maxSpeed*Math.sign(t.args.gSpeed||e||t.args.direction),1===t.args.mode&&(t.args.gSpeed=t.ySpeedLast),3===t.args.mode&&(t.args.gSpeed=-t.ySpeedLast)),t.args.gSpeed||(t.args.gSpeed=2*Math.sign(e||t.args.direction)),t.args.rolling||(t.args.rolling=!0),t.willJump&&(this.args.canJump||(t.willJump=!1))}},{key:"solid",get:function(){return!1}},{key:"isEffect",get:function(){return!0}}])&&o(e.prototype,r),n&&o(e,n),Object.defineProperty(e,"prototype",{writable:!1}),f}();t.RollingRegion=u}),require.register("region/ShadeRegion.js",function(t,e,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ShadeRegion=void 0;var n=e("../ui/CharacterString"),i=e("../effects/Cylinder"),o=e("../effects/Pinch"),a=e("./Region"),s=e("curvature/base/Tag");function c(t){"@babel/helpers - typeof";return(c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function l(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,y(n.key),n)}}function u(){return(u="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=g(t)););return t}(t,e);if(n){var i=Object.getOwnPropertyDescriptor(n,e);return i.get?i.get.call(arguments.length<3?t:r):i.value}}).apply(this,arguments)}function f(t,e){return(f=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function p(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=g(t);if(e){var i=g(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===c(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return h(t)}(this,r)}}function h(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function g(t){return(g=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function d(t,e,r){return(e=y(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function y(t){var e=function(t,e){if("object"!==c(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==c(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===c(e)?e:String(e)}let b=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&f(t,e)}(b,a.Region);var e,r,c,y=p(b);function b(){var t;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,b);for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];return d(h(t=y.call(this,...r)),"currentFilter",-1),d(h(t),"filters",["western","heat","hydro","lava","black-hole","normal"]),t.args.type="region region-shade",t}return e=b,(r=[{key:"onRendered",value:function(){u(g(b.prototype),"onRendered",this).call(this),this.actorFilterWrapper=new s.Tag('<div class = "region-filter-wrapper">'),this.actorColorWrapper=new s.Tag('<div class = "region-color-wrapper">'),this.filterWrapper=new s.Tag('<div class = "region-filter-wrapper">'),this.colorWrapper=new s.Tag('<div class = "region-color-wrapper">'),this.actorFilter=new s.Tag('<div class = "region-filter">'),this.actorColor=new s.Tag('<div class = "region-color">'),this.filter=new s.Tag('<div class = "region-filter">'),this.color=new s.Tag('<div class = "region-color">'),this.filterWrapper.appendChild(this.filter.node),this.colorWrapper.appendChild(this.color.node),this.tags.sprite.appendChild(this.filterWrapper.node),this.tags.sprite.appendChild(this.colorWrapper.node),this.text=new n.CharacterString({value:""}),this.text.render(this.tags.sprite),this.cylinder=new i.Cylinder({id:"shade-cylinder",width:this.args.width,height:this.args.height}),this.cylinder.render(this.tags.sprite),this.pinch=new o.Pinch({id:"shade-pinch",width:this.args.width,height:this.args.height,scale:150}),this.pinch.render(this.tags.sprite),this.args.filter&&(this.filters=[this.args.filter]),this.rotateFilter()}},{key:"update",value:function(){u(g(b.prototype),"update",this).call(this),this.args.scale=175-Math.abs(25*Math.sin(Date.now()/200)),!this.switch&&this.args.switch&&(this.switch=this.viewport.actorsById[this.args.switch],this.switch&&this.switch.args.bindTo("active",t=>{t&&this.rotateFilter()}))}},{key:"rotateFilter",value:function(){this.mainElem&&this.args.filter&&this.mainElem.classList.remove(this.args.filter),this.mainElem&&(this.args.filter=this.filters[this.currentFilter++],this.currentFilter>=this.filters.length&&(this.currentFilter=0),this.args.filter&&this.mainElem.classList.add(this.args.filter),this.args.filter&&(this.text.remove(),this.text=new n.CharacterString({value:`${this.currentFilter}: ${this.args.filter}`}),this.text.render(this.tags.sprite)))}},{key:"solid",get:function(){return!1}},{key:"isEffect",get:function(){return!0}}])&&l(e.prototype,r),c&&l(e,c),Object.defineProperty(e,"prototype",{writable:!1}),b}();t.ShadeRegion=b}),require.register("region/SlidingRegion.js",function(t,e,r){"use strict";function n(t){"@babel/helpers - typeof";return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(t,"__esModule",{value:!0}),t.SlidingRegion=void 0;var i=e("./Region");e("curvature/base/Tag");function o(t,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,(o=i.key,void 0,"symbol"===n(a=function(t,e){if("object"!==n(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var i=r.call(t,e||"default");if("object"!==n(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(o,"string"))?a:String(a)),i)}var o,a}function a(t,e){return(a=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function s(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,i=c(t);if(e){var o=c(this).constructor;r=Reflect.construct(i,arguments,o)}else r=i.apply(this,arguments);return function(t,e){if(e&&("object"===n(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function c(t){return(c=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}let l=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&a(t,e)}(l,i.Region);var e,r,n,c=s(l);function l(t,e){var r,n,i;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,l),(i=c.call(this,t,e)).args.sticky=!0,i.args.hidden=!0,i.args.canJump=null===(r=i.args.canJump)||void 0===r||r,i.args.type="region sliding",i.args.toSpeed=null!==(n=i.args.toSpeed)&&void 0!==n?n:8,i}return e=l,(r=[{key:"updateActor",value:function(t){t.args.static||t.args.falling||t.controllable&&(t.willStick=!1,Math.abs(this.args.toSpeed-t.args.gSpeed)>1?t.args.gSpeed+=Math.sign(this.args.toSpeed-t.args.gSpeed):t.args.gSpeed=this.args.toSpeed,t.args.rolling=!1,t.args.sliding=!0,t.willJump&&(this.args.canJump||(t.willJump=!1)))}},{key:"solid",get:function(){return!1}},{key:"isEffect",get:function(){return!0}}])&&o(e.prototype,r),n&&o(e,n),Object.defineProperty(e,"prototype",{writable:!1}),l}();t.SlidingRegion=l}),require.register("region/SwitchRegion.js",function(t,e,r){"use strict";function n(t){"@babel/helpers - typeof";return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(t,"__esModule",{value:!0}),t.SwitchRegion=void 0;var i=e("./Region"),o=e("../actor/Rocket");function a(t,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,(o=i.key,void 0,"symbol"===n(a=function(t,e){if("object"!==n(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var i=r.call(t,e||"default");if("object"!==n(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(o,"string"))?a:String(a)),i)}var o,a}function s(t,e){return(s=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function c(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,i=l(t);if(e){var o=l(this).constructor;r=Reflect.construct(i,arguments,o)}else r=i.apply(this,arguments);return function(t,e){if(e&&("object"===n(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function l(t){return(l=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}let u=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&s(t,e)}(u,i.Region);var e,r,n,l=c(u);function u(){var t,e;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,u);for(var r=arguments.length,n=new Array(r),i=0;i<r;i++)n[i]=arguments[i];return(e=l.call(this,...n)).args.type="region region-switch",e.args.latch=null!==(t=n.latch)&&void 0!==t?t:e.args.latch,e.args.hidden=!0,e.activated=!1,e}return e=u,(r=[{key:"onAttach",value:function(t){return t&&t.preventDefault(),!1}},{key:"activate",value:function(t){if(!this.viewport)return;if(this.args.latch&&this.activated)return;this.args.latch&&(this.args.active=this.activated=!0);const e=this.viewport.actorsById[this.args.target];e&&e.activate&&e.activate(t,this)}},{key:"updateActor",value:function(t){if(this.args.rocket){if(t instanceof o.Rocket){const e=this.viewport.actorsById[this.args.target];if(!e||!e.activate)return;this.viewport.onFrameOut(this.args.delay||1,()=>e.activate(t,this)),t.explode()}}else t.isVehicle&&t.occupant&&(t=t.occupant),t.controllable&&this.viewport.onFrameOut(this.args.delay||1,()=>this.activate(t))}}])&&a(e.prototype,r),n&&a(e,n),Object.defineProperty(e,"prototype",{writable:!1}),u}();t.SwitchRegion=u}),require.register("region/ToxicRegion.js",function(t,e,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ToxicRegion=void 0;var n=e("./Region"),i=e("../actor/Ring"),o=e("../actor/MarbleBlock"),a=e("curvature/base/Tag"),s=e("curvature/base/Bindable");e("../audio/Sfx");function c(t){"@babel/helpers - typeof";return(c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function l(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,d(n.key),n)}}function u(){return(u="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=g(t)););return t}(t,e);if(n){var i=Object.getOwnPropertyDescriptor(n,e);return i.get?i.get.call(arguments.length<3?t:r):i.value}}).apply(this,arguments)}function f(t,e){return(f=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function p(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=g(t);if(e){var i=g(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===c(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return h(t)}(this,r)}}function h(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function g(t){return(g=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function d(t){var e=function(t,e){if("object"!==c(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==c(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===c(e)?e:String(e)}let y=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&f(t,e)}(b,n.Region);var e,r,c,y=p(b);function b(){var t,e,r,n;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,b);for(var i=arguments.length,o=new Array(i),a=0;a<i;a++)o[a]=arguments[a];return t=y.call(this,...o),e=h(t),n=!0,(r=d(r="isWater"))in e?Object.defineProperty(e,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[r]=n,t.args.type="region region-toxic",t.args.gravity=.5,t.args.drag=.85,t.args.density=15,t.skimSpeed=0,t.sapped=new Set,t.timings=new WeakMap,t.onRemove(()=>t.sapped.clear()),t}return e=b,(r=[{key:"update",value:function(){this.sapped.clear(),!this.filterWrapper&&this.tags.sprite&&(this.filterWrapper=new a.Tag('<div class = "region-filter-wrapper">'),this.colorWrapper=new a.Tag('<div class = "region-color-wrapper">'),this.filter=new a.Tag('<div class = "region-filter">'),this.color=new a.Tag('<div class = "region-color">'),this.filterWrapper.appendChild(this.filter.node),this.colorWrapper.appendChild(this.color.node),this.tags.sprite.appendChild(this.filterWrapper.node),this.tags.sprite.appendChild(this.colorWrapper.node)),this.originalHeight||(this.originalHeight=this.args.height),u(g(b.prototype),"update",this).call(this)}},{key:"updateActor",value:function(t){t instanceof i.Ring?t.args.ySpeed=-Math.abs(t.args.ySpeed||-6):t.noClip||(t.controllable||t instanceof i.Ring)&&(t.y<this.y+-this.args.height+8||t.args.ySpeed<0||t.args.ignore||!t.args.mercy&&t.immune(this,"fire"))}},{key:"collideA",value:function(t,e){if(!t.noClip){if(t instanceof o.MarbleBlock)return!1;if(t.args.standingOn&&t.args.standingOn!==s.Bindable.make(this))return!1;if(t.args.y=Math.round(t.args.y),u(g(b.prototype),"collideA",this).call(this,t,e),t.args.mercy||t.immune(this,"toxic"))return!0;if(t.controllable&&!this.sapped.has(t)){let e=0;this.timings.has(t)||this.timings.set(t,e),e=this.timings.get(t),e++,this.timings.set(t,e),e%27==0&&(!t.args.float||t.fallTime<20)&&t.sap()}return this.sapped.add(t),!0}}},{key:"solid",get:function(){return!0}},{key:"isEffect",get:function(){return!0}}])&&l(e.prototype,r),c&&l(e,c),Object.defineProperty(e,"prototype",{writable:!1}),b}();t.ToxicRegion=y}),require.register("region/VehicleRegion.js",function(t,e,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.VehicleRegion=void 0;var n=e("./Region"),i=e("../ObjectPalette");function o(t){"@babel/helpers - typeof";return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function a(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,f(n.key),n)}}function s(t,e){return(s=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function c(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=u(t);if(e){var i=u(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===o(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return l(t)}(this,r)}}function l(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function u(t){return(u=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function f(t){var e=function(t,e){if("object"!==o(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==o(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===o(e)?e:String(e)}let p=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&s(t,e)}(p,n.Region);var e,r,o,u=c(p);function p(){var t,e,r,n;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,p);for(var i=arguments.length,o=new Array(i),a=0;a<i;a++)o[a]=arguments[a];return t=u.call(this,...o),e=l(t),r="SpawnedFor",n=Symbol("SpawnedFor"),(r=f(r))in e?Object.defineProperty(e,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[r]=n,t.args.type="region vehicle",t}return e=p,(r=[{key:"updateActor",value:function(t){if(!1!==t[this.SpawnedFor]){if(t[this.SpawnedFor]){const e=t[this.SpawnedFor];e.args.x=t.args.x,e.args.y=t.args.y,e.args.xSpeed=t.args.xSpeed,e.args.ySpeed=t.args.ySpeed,e.args.gSpeed=t.args.gSpeed,t.args.standingOn=e}if(t.controllable&&!t.isVehicle&&!t.args.standingOn){const e=i.ObjectPalette[this.args.vehicle];if(!e)return;const r=new e({x:t.x,y:t.y,xSpeed:t.args.xSpeed,ySpeed:t.args.ySpeed,gSpeed:t.args.gSpeed,falling:t.args.falling,lockedIn:!0});this.viewport.spawn.add({object:r}),t.args.standingOn=r,t[this.SpawnedFor]=r}}}},{key:"leave",value:function(t){if(t.occupant&&(t=t.occupant),!this.args.restricted)return;if(!t.args.standingOn)return;if(!t.args.standingOn.isVehicle)return;t[this.SpawnedFor]=!1;const e=t.args.standingOn;e.args.lockedIn=!1,e.dead=!0,t.args.standingOn=null,t.args.x=e.args.x,t.args.y=e.args.y,t.args.gSpeed=e.args.gSpeed,t.args.xSpeed=e.args.xSpeed,t.args.ySpeed=e.args.ySpeed,t.args.falling=e.args.falling}}])&&a(e.prototype,r),o&&a(e,o),Object.defineProperty(e,"prototype",{writable:!1}),p}();t.VehicleRegion=p}),require.register("region/VerticalRegion.js",function(t,e,r){"use strict";function n(t){"@babel/helpers - typeof";return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(t,"__esModule",{value:!0}),t.VerticalRegion=void 0;var i=e("./Region");function o(t,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,(o=i.key,void 0,"symbol"===n(a=function(t,e){if("object"!==n(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var i=r.call(t,e||"default");if("object"!==n(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(o,"string"))?a:String(a)),i)}var o,a}function a(t,e){return(a=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function s(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,i=c(t);if(e){var o=c(this).constructor;r=Reflect.construct(i,arguments,o)}else r=i.apply(this,arguments);return function(t,e){if(e&&("object"===n(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function c(t){return(c=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}let l=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&a(t,e)}(l,i.Region);var e,r,n,c=s(l);function l(){var t;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,l);for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];return(t=c.call(this,...r)).args.type="region vertical",t.args.hidden=!0,t}return e=l,(r=[{key:"updateActor",value:function(t){t.args.falling&&(t.args.xSpeed=0)}}])&&o(e.prototype,r),n&&o(e,n),Object.defineProperty(e,"prototype",{writable:!1}),l}();t.VerticalRegion=l}),require.register("region/WaterRegion.js",function(t,e,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.WaterRegion=void 0;var n=e("./Region"),i=e("curvature/base/Tag");e("curvature/base/View");function o(t){"@babel/helpers - typeof";return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function a(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,i,o,a,s=[],c=!0,l=!1;try{if(o=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=o.call(r)).done)&&(s.push(n.value),s.length!==e);c=!0);}catch(t){l=!0,i=t}finally{try{if(!c&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(l)throw i}}return s}}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return s(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return s(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function s(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function c(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,g(n.key),n)}}function l(){return(l="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=h(t)););return t}(t,e);if(n){var i=Object.getOwnPropertyDescriptor(n,e);return i.get?i.get.call(arguments.length<3?t:r):i.value}}).apply(this,arguments)}function u(t,e){return(u=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function f(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=h(t);if(e){var i=h(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===o(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return p(t)}(this,r)}}function p(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function h(t){return(h=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function g(t){var e=function(t,e){if("object"!==o(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==o(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===o(e)?e:String(e)}let d=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&u(t,e)}(d,n.Region);var e,r,o,s=f(d);function d(){var t,e,r,n;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,d);for(var i=arguments.length,o=new Array(i),a=0;a<i;a++)o[a]=arguments[a];return t=s.call(this,...o),e=p(t),n=!0,(r=g(r="isWater"))in e?Object.defineProperty(e,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[r]=n,t.args.type="region region-water",t.entryParticle='<div class = "particle-splash">',t.args.gravity=.4,t.args.drag=.85,t.args.density=1,t.skimSpeed=15,t.draining=0,t.skimParticles=new Map,t}return e=d,(r=[{key:"skim",value:function(t){if(l(h(d.prototype),"skim",this).call(this,t),this.viewport.args.frameId%this.viewport.settings.frameSkip!=0)return;const e=t.rotatePoint(t.args.gSpeed,3);if(this.skimParticles.has(t)){const r=this.skimParticles.get(t),n=r.skimParticle;(0,r.timeout)();const i=this.viewport.onFrameOut(2,()=>{this.viewport.particles.remove(n),this.skimParticles.delete(t)});return r.timeout=i,void n.style({"--x":e[0]+t.x,"--y":e[1]+t.y,"z-index":0,"--flip":`${Math.sign(t.args.gSpeed)}`})}if(this.viewport){const e=new i.Tag('<div class = "particle-skim">');this.viewport.particles.add(e);const r=this.viewport.onFrameOut(2,()=>{this.viewport.particles.remove(e),this.skimParticles.delete(t)});this.skimParticles.set(t,{skimParticle:e,timeout:r})}}},{key:"update",value:function(){if(this.viewport){if(!this.filterWrapper&&this.tags.sprite&&(this.filterWrapper=new i.Tag('<div class = "region-filter-wrapper">'),this.colorWrapper=new i.Tag('<div class = "region-color-wrapper">'),this.filter=new i.Tag('<div class = "region-filter">'),this.color=new i.Tag('<div class = "region-color">'),this.colorWrapper.appendChild(this.color.node),this.filterWrapper.appendChild(this.filter.node),this.tags.sprite.appendChild(this.colorWrapper.node),this.tags.sprite.appendChild(this.filterWrapper.node)),this.args.controller){const t=this.viewport.actorsById[this.args.controller];t&&(this.args.height=t.args.level)}if(!this.switch&&this.args.switch&&(this.switch=this.viewport.actorsById[this.args.switch],this.switch&&this.switch.args.bindTo("active",t=>{!t&&this.draining,this.draining=t?1:-1})),this.originalHeight||(this.originalHeight=this.args.height),this.draining&&(this.draining>0&&this.args.height>=32?this.args.height-=3.5:this.draining<0&&this.args.height<this.originalHeight&&(this.args.height+=3.5),this.args.height<=0?(this.args.display="none",this.draining>0&&(this.draining=0)):this.args.display="initial"),this.target&&this.args.height!==this.target){var t,e;const r=this.args.height-this.target,n=null!==(t=this.args.drainSpeed)&&void 0!==t?t:1,i=null!==(e=this.args.fillSpeed)&&void 0!==e?e:1,o=r>0?n:i;Math.abs(this.args.height-this.target)>o?this.args.height-=Math.abs(o)*Math.sign(r):this.args.height=this.target}l(h(d.prototype),"update",this).call(this)}}},{key:"updateEnd",value:function(){if(l(h(d.prototype),"updateEnd",this).call(this),this.viewport.args.frameId%this.viewport.settings.frameSkip==0)for(const e of this.skimParticles){var t=a(e,2);const r=t[0],n=t[1].skimParticle,i=r.rotatePoint(0,3);n.style({"--x":i[0]+r.x+-32*Math.sign(r.args.gSpeed),"--y":i[1]+r.y,"z-index":0,"--flip":`${Math.sign(r.args.gSpeed)}`})}}},{key:"updateActor",value:function(t){if(t.controllable&&!(t.args.y-t.args.height<this.args.y-this.args.height)&&this.viewport.args.frameId%5==0&&Math.random()>.9){const e=this.viewport,r=new i.Tag('<div class = "particle-bubble">'),n=t.rotatePoint(...t.facePoint),o=(t.args.x,n[0],t.args.y+n[1]);r.style({"--startY":o,"--size":Math.random()});const a=e.onFrameInterval(1,()=>{const e=t.facePoint,n=t.args.x+e[0],i=t.args.y+e[1];t.args.y<this.args.y-this.args.height&&r.style({display:"none"}),i<this.args.y-this.args.height&&r.style({display:"none"}),r.style({"--x":n,"--y":i})}),s=e.onFrameInterval(1,()=>{r.style({"--maxY":this.args.y-this.args.height})});e.particles.add(r),e.onTimeout(350,()=>{r.classList.add("float"),a()}),e.onTimeout(1e3,()=>{r.classList.add("floating")}),setTimeout(()=>{e.particles.remove(r),s()},1500)}}},{key:"solid",get:function(){return!1}},{key:"isEffect",get:function(){return!0}}])&&c(e.prototype,r),o&&c(e,o),Object.defineProperty(e,"prototype",{writable:!1}),d}();t.WaterRegion=d}),require.register("region/WaterfallRegion.js",function(t,e,r){"use strict";function n(t){"@babel/helpers - typeof";return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(t,"__esModule",{value:!0}),t.WaterfallRegion=void 0;var i=e("./Region"),o=e("curvature/base/Tag");e("curvature/base/View");function a(t,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,(o=i.key,void 0,"symbol"===n(a=function(t,e){if("object"!==n(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var i=r.call(t,e||"default");if("object"!==n(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(o,"string"))?a:String(a)),i)}var o,a}function s(){return(s="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=u(t)););return t}(t,e);if(n){var i=Object.getOwnPropertyDescriptor(n,e);return i.get?i.get.call(arguments.length<3?t:r):i.value}}).apply(this,arguments)}function c(t,e){return(c=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function l(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,i=u(t);if(e){var o=u(this).constructor;r=Reflect.construct(i,arguments,o)}else r=i.apply(this,arguments);return function(t,e){if(e&&("object"===n(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function u(t){return(u=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}let f=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&c(t,e)}(p,i.Region);var e,r,n,f=l(p);function p(){var t;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,p);for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];return(t=f.call(this,...r)).args.type="region region-shade region-waterfall",t.args.density=0,t}return e=p,(r=[{key:"update",value:function(){s(u(p.prototype),"update",this).call(this),!this.filterWrapper&&this.tags.sprite&&(this.filterWrapper=new o.Tag('<div class = "region-filter-wrapper">'),this.colorWrapper=new o.Tag('<div class = "region-color-wrapper">'),this.filter=new o.Tag('<div class = "region-filter">'),this.color=new o.Tag('<div class = "region-color">'),this.filterWrapper.appendChild(this.filter.node),this.colorWrapper.appendChild(this.color.node),this.tags.sprite.appendChild(this.filterWrapper.node),this.tags.sprite.appendChild(this.colorWrapper.node),this.tags.sprite.style({"--maskImage":`url(#mask-${this.args.id})`}))}},{key:"solid",get:function(){return!1}},{key:"isEffect",get:function(){return!0}}])&&a(e.prototype,r),n&&a(e,n),Object.defineProperty(e,"prototype",{writable:!1}),p}();t.WaterfallRegion=f}),require.register("replay/Replay.js",function(t,e,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Replay=void 0;var n=e("curvature/base/Uuid"),i=e("curvature/model/Model");function o(t){"@babel/helpers - typeof";return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function a(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,h(n.key),n)}}function s(){return(s="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=f(t)););return t}(t,e);if(n){var i=Object.getOwnPropertyDescriptor(n,e);return i.get?i.get.call(arguments.length<3?t:r):i.value}}).apply(this,arguments)}function c(t,e){return(c=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function l(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=f(t);if(e){var i=f(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===o(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return u(t)}(this,r)}}function u(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function f(t){return(f=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function p(t,e,r){return(e=h(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function h(t){var e=function(t,e){if("object"!==o(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==o(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===o(e)?e:String(e)}const g=document.head.querySelector('meta[name="x-build-time"]'),d=g?g.getAttribute("content"):null;let y=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&c(t,e)}(g,i.Model);var e,r,o,h=l(g);function g(){var t;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,g);for(var e=arguments.length,r=new Array(e),i=0;i<e;i++)r[i]=arguments[i];return p(u(t=h.call(this,...r)),"class","Replay"),p(u(t),"uuid",String(new n.Uuid)),p(u(t),"created",Date.now()),p(u(t),"local",String(new Date)),p(u(t),"tz",Intl.DateTimeFormat().resolvedOptions().timeZone),p(u(t),"buildTime",d),p(u(t),"map",""),p(u(t),"frames",[]),p(u(t),"keyFrames",[]),p(u(t),"name",""),p(u(t),"lastFrame",0),p(u(t),"firstFrame",0),t}return e=g,(r=[{key:"consume",value:function(t){let e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const r=Object.assign(Object.create(null),t);if(r.keyFrames=Object.assign([],r.keyFrames),r.frames=Object.assign([],r.frames),r.frames=r.frames.map(t=>Object.assign([],t)),r.uuid=r.uuid||this.uuid||String(new n.Uuid),s(f(g.prototype),"consume",this).call(this,r,e=!1),r.frames){this.keyFrames=r.frames.filter(t=>Object.keys(t[2]).length).map(t=>t[0]);const t=this.frames.map(t=>t[0]);this.firstFrame=t.length?Math.min(...t):0,this.lastFrame=t.length?Math.max(...t):0}}},{key:"getIndexedFrames",value:function(){const t=new Map;for(const e of this.frames)t.set(e[0],e);return t}}])&&a(e.prototype,r),o&&a(e,o),Object.defineProperty(e,"prototype",{writable:!1}),g}();t.Replay=y}),require.register("replay/ReplayDatabase.js",function(t,e,r){"use strict";function n(t){"@babel/helpers - typeof";return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(t,"__esModule",{value:!0}),t.ReplayDatabase=void 0;var i=e("curvature/model/Database");function o(t,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,(o=i.key,void 0,"symbol"===n(a=function(t,e){if("object"!==n(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var i=r.call(t,e||"default");if("object"!==n(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(o,"string"))?a:String(a)),i)}var o,a}function a(t,e){return(a=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function s(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,i=c(t);if(e){var o=c(this).constructor;r=Reflect.construct(i,arguments,o)}else r=i.apply(this,arguments);return function(t,e){if(e&&("object"===n(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function c(t){return(c=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}let l=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&a(t,e)}(l,i.Database);var e,r,n,c=s(l);function l(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,l),c.apply(this,arguments)}return e=l,(r=[{key:"_version_1",value:function(t){const e=this.createObjectStore("replays",{keyPath:"id",autoIncrement:!0});e.createIndex("buildTime","buildTime",{unique:!1}),e.createIndex("created","created",{unique:!1}),e.createIndex("uuid","uuid",{unique:!0}),e.createIndex("id","id",{unique:!0})}},{key:"_version_2",value:function(t,e,r){const n=r.target.transaction.objectStore("replays");n.createIndex("name","name",{unique:!1}),n.createIndex("map","map",{unique:!1})}},{key:"_version_3",value:function(t,e,r){const n=r.target.transaction.objectStore("replays");n.createIndex("map-id",["map","id"],{unique:!0}),console.log("existing index names in store",n.indexNames)}}])&&o(e.prototype,r),n&&o(e,n),Object.defineProperty(e,"prototype",{writable:!1}),l}();t.ReplayDatabase=l}),require.register("replay/ReplayService.js",function(t,e,r){"use strict";function n(t){"@babel/helpers - typeof";return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function i(t,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,(o=i.key,void 0,"symbol"===n(a=function(t,e){if("object"!==n(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var i=r.call(t,e||"default");if("object"!==n(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(o,"string"))?a:String(a)),i)}var o,a}Object.defineProperty(t,"__esModule",{value:!0}),t.ReplayService=void 0;let o=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.viewport=e}var e,r,n;return e=t,(r=[{key:"startDemo",value:function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;const r=this.viewport;r.reset(),r.replayFrames=t.getIndexedFrames(),r.replayStart=r.replayFrames.get(e||t.firstFrame)||{},r.replay=t,r.maxReplayFrame=t.lastFrame,r.replayOffset=-1+t.firstFrame+e,Router.setQuery("demo",t.uuid),r.loadMap({mapUrl:t.map}).then(()=>{r.args.paused=!0,r.playback()})}}])&&i(e.prototype,r),n&&i(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();t.ReplayService=o}),require.register("save/Save.js",function(t,e,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Save=void 0;var n=e("curvature/base/Uuid"),i=e("curvature/model/Model"),o=e("./SaveDatabase");function a(t){"@babel/helpers - typeof";return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function s(){return(s="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=f(t)););return t}(t,e);if(n){var i=Object.getOwnPropertyDescriptor(n,e);return i.get?i.get.call(arguments.length<3?t:r):i.value}}).apply(this,arguments)}function c(t,e){return(c=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function l(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=f(t);if(e){var i=f(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===a(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return u(t)}(this,r)}}function u(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function f(t){return(f=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function p(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,y(n.key),n)}}function h(t,e,r){return e&&p(t.prototype,e),r&&p(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function g(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function d(t,e,r){return(e=y(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function y(t){var e=function(t,e){if("object"!==a(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==a(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===a(e)?e:String(e)}const b=o.SaveDatabase.open("saves",1);let v=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&c(t,e)}(r,i.Model);var e=l(r);function r(){var t;g(this,r);for(var n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return d(u(t=e.call(this,...i)),"id",null),d(u(t),"created",Date.now()),d(u(t),"emeralds",[]),d(u(t),"characters",{}),d(u(t),"zones",{}),t}return h(r,[{key:"getCharacterState",value:function(t){const e=this.characters[t]||{cleared:{}};return this.characters[t]=e}},{key:"getZoneState",value:function(t){const e=this.zones[t]||{lastCheckpoint:null,emblems:[],chao:[],rings:0,score:0,time:0};return this.zones[t]=e}},{key:"save",value:function(){b.then(t=>{this.id?t.update("saves",this):(this.id=String(new n.Uuid),t.insert("saves",this))})}},{key:"load",value:function(){}}],[{key:"from",value:function(t){const e=s(f(r),"from",this).call(this,t);e.emeralds=Object.assign([],e.emeralds);for(const t of Object.values(e.zones))t.emblems=Object.assign([],t.emblems),t.chao=Object.assign([],t.chao);return e}},{key:"index",value:function(){return b.then(t=>{const e=[];return t.select({direction:"next",index:"created",store:"saves"}).each(t=>e.push(t)).then(()=>e)})}}]),r}();t.Save=v}),require.register("save/SaveDatabase.js",function(t,e,r){"use strict";function n(t){"@babel/helpers - typeof";return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(t,"__esModule",{value:!0}),t.SaveDatabase=void 0;var i=e("curvature/model/Database");function o(t,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,(o=i.key,void 0,"symbol"===n(a=function(t,e){if("object"!==n(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var i=r.call(t,e||"default");if("object"!==n(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(o,"string"))?a:String(a)),i)}var o,a}function a(t,e){return(a=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function s(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,i=c(t);if(e){var o=c(this).constructor;r=Reflect.construct(i,arguments,o)}else r=i.apply(this,arguments);return function(t,e){if(e&&("object"===n(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function c(t){return(c=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}let l=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&a(t,e)}(l,i.Database);var e,r,n,c=s(l);function l(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,l),c.apply(this,arguments)}return e=l,(r=[{key:"_version_1",value:function(t){this.createObjectStore("saves",{keyPath:"id"}).createIndex("created","created",{unique:!1})}}])&&o(e.prototype,r),n&&o(e,n),Object.defineProperty(e,"prototype",{writable:!1}),l}();t.SaveDatabase=l}),require.register("sprite/Png.js",function(t,e,r){"use strict";function n(t){"@babel/helpers - typeof";return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,c(n.key),n)}}function a(t,e,r){return e&&o(t.prototype,e),r&&o(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function s(t,e,r){return(e=c(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function c(t){var e=function(t,e){if("object"!==n(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var i=r.call(t,e||"default");if("object"!==n(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===n(e)?e:String(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.Png=void 0;const l=[137,80,78,71,13,10,26,10];let u=function(){function t(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;i(this,t),s(this,"r",0),s(this,"g",0),s(this,"b",0),s(this,"a",1),this.r=e,this.g=r,this.b=n,this.a=o}return a(t,[{key:"mean",value:function(){return(this.r+this.g+this.b)/3}},{key:"hex",value:function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:3;return 3===t?`${this.r.toString(16).padStart(2,"0")}${this.g.toString(16).padStart(2,"0")}${this.b.toString(16).padStart(2,"0")}`:4===t?`${this.r.toString(16).padStart(2,"0")}${this.g.toString(16).padStart(2,"0")}${this.b.toString(16).padStart(2,"0")}${this.a.toString(16).padStart(2,"0")}`:void 0}},{key:"valueOf",value:function(){return`rgba(${this.r}, ${this.g}, ${this.b}, ${this.a})`}}]),t}(),f=function(){function t(){i(this,t),s(this,"previous",null),s(this,"content",null),s(this,"length",0),s(this,"start",0),s(this,"type",""),s(this,"crc",0)}return a(t,[{key:"text",get:function(){return this.bytes.map(t=>String.fromCharCode(t)).join("")}},{key:"bytes",get:function(){const t=[];for(let e=0;e<this.length;e++)t.push(this.content.getUint8(e));return t}}]),t}(),p=function(){function t(e){i(this,t),s(this,"buffer",null),s(this,"width",0),s(this,"height",0),s(this,"depth",0),s(this,"colorType",0),s(this,"compression",0),s(this,"filter",0),s(this,"interlace",0),"string"==typeof e?this.ready=fetch(e).then(t=>t.arrayBuffer()).then(t=>{this.buffer=t,this.checkHeader(),this.indexChunks()}):"object"===n(e)&&e instanceof t&&(this.ready=Promise.resolve(),this.buffer=e.buffer.slice(0),this.chunks=e.chunks.slice(0))}return a(t,[{key:"checkHeader",value:function(){const t=new Uint8Array(this.buffer);for(const e in l)if(l[e]!==t[e])throw new Error("Png is not valid.")}},{key:"readIhdr",value:function(){const t=this.chunks[0];this.width=t.content.getUint32(0),this.height=t.content.getUint32(4),this.depth=t.content.getUint8(8),this.colorType=t.content.getUint8(9),this.compression=t.content.getUint8(10),this.filter=t.content.getUint8(11),this.interlace=t.content.getUint8(12)}},{key:"palette",get:function(){const t=[];for(const e in this.chunks){const r=this.chunks[e];if("PLTE"===r.type){for(let e=0;e<r.bytes.length;e+=3){const n=new u(r.bytes[e+0],r.bytes[e+1],r.bytes[e+2]);t.push(n)}return t}}}},{key:"recolor",value:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const r=this.palette,n=[];for(const t in r){const i=r[t],o=i.hex();if(e[o]){const t=e[o],r=[t.substring(0,2),t.substring(2,4),t.substring(4,6)].map(t=>parseInt(t,16));n.push(...r)}else n.push(i.r,i.g,i.b)}const i=new t(this);for(const t in i.chunks){const e=i.chunks[t];if("PLTE"!==e.type)continue;const r=new Uint8Array(i.buffer),o=new DataView(i.buffer,e.start+e.length,4);r.set(n,e.start),o.setUint32(0,i.runCrc(e))}return i}},{key:"runCrc",value:function(e){if(!t.crcTable){t.crcTable=new Uint32Array(256);for(let e=0;e<256;e++){let r=e;for(let t=0;t<8;t++)1==(1&r)?r=3988292384^r>>>1:r>>>=1;t.crcTable[e]=r}}let r=4294967295;const n=new Uint8Array(this.buffer).slice(e.start-4,e.start+e.length);for(const e in n){const i=n[e];r=t.crcTable[255&(r^i)]^r>>>8}return r=(4294967295^r)>>>0}},{key:"indexChunks",value:function(){const t=[];let e=8;for(;e<this.buffer.byteLength;){const r=new DataView(this.buffer,e,4);e+=4;const n=new DataView(this.buffer,e,4);e+=4;const i=new f;i.start=e,i.length=r.getUint32();for(let t=0;t<4;t++){const e=n.getUint8(t),r=String.fromCharCode(e);i.type+=r}i.content=new DataView(this.buffer,e,i.length),e+=i.length;const o=new DataView(this.buffer,e,4);i.crc=o.getUint32(),i.previous=t[t.length-1],t.push(i),e+=4}this.chunks=t}},{key:"toBlob",value:function(){return new Blob([new Uint8Array(this.buffer)],{type:"image/png"})}},{key:"toUrl",value:function(){return URL.createObjectURL(this.toBlob())}},{key:"toDataUri",value:function(){if(this.getDataUri)return this.getDataUri;const t=new FileReader;return t.readAsDataURL(this.toBlob()),this.getDataUri=new Promise(e=>t.addEventListener("load",t=>e(t.target.result))),this.getDataUri}}]),t}();t.Png=p,p.Pixel=u,p.Chunk=f}),require.register("tally/TallyBoard.js",function(t,e,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TallyBoard=void 0;var n=e("curvature/base/Bindable"),i=e("curvature/base/Mixin"),o=e("curvature/mixin/EventTargetMixin"),a=e("curvature/base/View"),s=e("../audio/Sfx"),c=(e("../audio/Bgm"),e("./TallyCounter")),l=e("../ui/CharacterString");function u(t){"@babel/helpers - typeof";return(u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function f(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function p(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,m(n.key),n)}}function h(t,e,r){return e&&p(t.prototype,e),r&&p(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function g(t,e){return(g=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function d(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=b(t);if(e){var i=b(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===u(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return y(t)}(this,r)}}function y(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function b(t){return(b=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function v(t,e,r){return(e=m(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function m(t){var e=function(t,e){if("object"!==u(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==u(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===u(e)?e:String(e)}let w=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&g(t,e)}(u,i.Mixin.with(function(){function t(){f(this,t)}return h(t)}(),o.EventTargetMixin));var r=d(u);function u(){var t;f(this,u);for(var e=arguments.length,i=new Array(e),o=0;o<e;o++)i[o]=arguments[o];return v(y(t=r.call(this,...i)),"totalLabel",new l.CharacterString({value:"Total:",color:"yellow"})),v(y(t),"totalValue",new l.CharacterString({value:"0"})),v(y(t),"inventoryCounter",new l.CharacterString({value:"-"})),v(y(t),"inventoryBump",""),v(y(t),"inventory",n.Bindable.make([])),v(y(t),"hasInventory",!1),v(y(t),"counters",n.Bindable.make([])),v(y(t),"totaling",!1),v(y(t),"totaled",!1),v(y(t),"total",0),v(y(t),"step",200),v(y(t),"age",0),v(y(t),"almostDone",!1),v(y(t),"done",!1),v(y(t),"doneAge",0),t}return h(u,[{key:"update",value:function(t){let e=!0,r=!1;this.hasInventory=!!t.args.inventory.length;for(const n of this.counters)if(45+15*n.index===this.age&&(s.Sfx.play("TALLY_SCORE"),n.started||(n.started=!0,n.display.args.value=n.points,n.display.args.color="white",n.bump="bump")),60+15*(this.counters.length+t.args.inventory.length)+15*n.index>this.age)e=!1;else if(n.started=!0,n.display.args.value>0){const i=Math.min(this.step,n.display.args.value);this.total+=i,t.controlActor.args.score+=i,n.display.args.value=Math.max(0,n.display.args.value-this.step),r=!0,e=!1}let n=0;for(const r of t.args.inventory)n++,30+15*(this.counters.length+n)>this.age?e=!1:r.tallied||(this.inventoryBump="",t.onFrameOut(1,()=>{s.Sfx.play("TALLY_SCORE"),this.inventoryBump="bump"}),this.inventory.push(r),this.inventoryCounter.args.value=(Number(this.inventoryCounter.args.value)||0)+r.points,r.tallied=!0);if(Number(this.inventoryCounter.args.value)>0){if(30+15*(this.counters.length+n+2)+30<this.age){const e=Math.min(this.step,Number(this.inventoryCounter.args.value)||0);this.total+=e,t.controlActor.args.score+=e,this.inventoryCounter.args.value=Math.max(0,(Number(this.inventoryCounter.args.value)||0)-this.step),r=!0}e=!1}r&&(this.totaling||(this.dispatchEvent("totalingstarted"),this.totaling=!0)),r||this.totaling&&this.dispatchEvent("totalingdone"),this.totaled=e,this.totaled&&this.totaling&&(s.Sfx.play("TOTAL_SCORE"),this.doneAge=this.age),this.doneAge&&this.age==this.doneAge+60&&(this.almostDone||(this.almostDone=!0,this.dispatchEvent("almostdone"))),this.doneAge&&this.age>this.doneAge+120&&(this.done||(this.done=!0,this.dispatchEvent("done"))),this.totalValue.args.value=this.total,e&&(this.totaling=!1),this.totaling&&!this.totaled&&s.Sfx.play("SWITCH_HIT"),this.age++}},{key:"view",value:function(){return a.View.from(e("./tally-board.html"),this)}},{key:"addCounter",value:function(t){t.type;let e=t.label,r=void 0===e?"counter":e,n=t.value,i=void 0===n?0:n,o=t.required;if(!i&&!(void 0===o||o))return;const a=new c.TallyCounter;a.display=new l.CharacterString({value:"-",color:"grey"}),a.points=i,a.label=new l.CharacterString({value:r,color:"yellow"}),a.index=this.counters.length,this.counters.push(a)}}]),u}();t.TallyBoard=w}),require.register("tally/TallyCounter.js",function(t,e,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TallyCounter=void 0;var n=e("curvature/base/Bindable");function i(t){"@babel/helpers - typeof";return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function o(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,s(n.key),n)}}function a(t,e,r){return(e=s(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function s(t){var e=function(t,e){if("object"!==i(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==i(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===i(e)?e:String(e)}let c=function(t,e,r){return e&&o(t.prototype,e),r&&o(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}(function t(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),a(this,"multiplier",1),a(this,"points",0),a(this,"value",0),a(this,"type",t.TYPE_LABEL),a(this,"label",""),a(this,"icon",""),a(this,"items",[]),a(this,"started",0),a(this,"display",0),a(this,"visible",0),a(this,"index",0),n.Bindable.make(this)});t.TallyCounter=c,c.TYPE_LABEL=0,c.TYPE_ICONS=1,c.TYPE_ITEMS=2}),require.register("tally/tally-board.html",function(t,e,r){r.exports='<div class = "tally-board">\n\t<div class = "tally-board-content" cv-each = "counters:counter">\n\t\t<div class = "tally-board-row">\n\t\t\t<div>[[counter.label]]</div>\n\t\t\t<div class = "tally-item [[counter.bump]]">[[counter.display]]</div>\n\t\t</div>\n\t</div>\n\t<div class = "tally-board-content tally-board-inventory" cv-if = "hasInventory">\n\t\t<div class = "tally-board-row">\n\t\t\t<div cv-each = "inventory:item"><img loading="lazy" src = "[[item.tallyIcon]]" class = "inventory-icon" /></div>\n\t\t\t<div class = "tally-item [[inventoryBump]]">[[inventoryCounter]]</div>\n\t\t</div>\n\t</div>\n\t</div>\n\t<div class = "tally-board-row tally-board-total">\n\t\t<div>[[totalLabel]]</div>\n\t\t<div>[[totalValue]]</div>\n\t</div>\n</div>\n'}),require.register("tileMap/Elicit.js",function(t,e,r){"use strict";function n(t){"@babel/helpers - typeof";return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(t,"__esModule",{value:!0}),t.Elicit=void 0;var i=e("curvature/base/Mixin"),o=e("curvature/mixin/EventTargetMixin"),a=e("curvature/mixin/PromiseMixin");function s(t,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,(o=i.key,void 0,"symbol"===n(a=function(t,e){if("object"!==n(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var i=r.call(t,e||"default");if("object"!==n(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(o,"string"))?a:String(a)),i)}var o,a}function c(t,e){return(c=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function l(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,i=u(t);if(e){var o=u(this).constructor;r=Reflect.construct(i,arguments,o)}else r=i.apply(this,arguments);return function(t,e){if(e&&("object"===n(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function u(t){return(u=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}let f=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&c(t,e)}(f,i.Mixin.with(o.EventTargetMixin,a.PromiseMixin));var e,r,n,u=l(f);function f(t){var e;let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,f),(e=u.call(this)).fetch=fetch(t,r).then(t=>e.handleFetch(t)),e}return e=f,(r=[{key:"headers",value:function(){return this.fetch.then(t=>{let e=t.response;t.stream;return e.headers})}},{key:"stream",value:function(t){arguments.length>1&&void 0!==arguments[1]&&arguments[1];return this.fetch.then(t=>{let e=t.response,r=t.stream;return new Response(r,{headers:e.headers})})}},{key:"objectUrl",value:function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.stream(t,e).then(t=>t.blob()).then(t=>URL.createObjectURL(t))}},{key:"emitProgressEvent",value:function(t,e){const r=t?e/t:0;this.dispatchEvent(new CustomEvent("progress",{detail:{length:t,received:e,done:r}}))}},{key:"iterateDownload",value:function(t,e,r){this.emitProgressEvent(r,0);let n=0;const i=()=>{t.read().then(t=>{let o=t.done,s=t.value;return o?(this[a.PromiseMixin.Accept](),void e.close()):(e.enqueue(s),n+=s.length,this.emitProgressEvent(r,n),i())})};return i()}},{key:"handleFetch",value:function(t){const e=t.body.getReader(),r=t.headers.get("Content-Length"),n=this;return{response:t,stream:new ReadableStream({start:function(t){n.iterateDownload(e,t,r)}})}}}])&&s(e.prototype,r),n&&s(e,n),Object.defineProperty(e,"prototype",{writable:!1}),f}();t.Elicit=f}),require.register("tileMap/TileMap.js",function(t,e,r){"use strict";function n(t){"@babel/helpers - typeof";return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(t,"__esModule",{value:!0}),t.TileMap=void 0;e("curvature/base/Tag");var i=e("curvature/base/Mixin"),o=(e("curvature/base/Bindable"),e("curvature/mixin/EventTargetMixin")),a=e("./Elicit");function s(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,i,o,a,s=[],c=!0,l=!1;try{if(o=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=o.call(r)).done)&&(s.push(n.value),s.length!==e);c=!0);}catch(t){l=!0,i=t}finally{try{if(!c&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(l)throw i}}return s}}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return c(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return c(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function c(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function l(t,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,(o=i.key,void 0,"symbol"===n(a=function(t,e){if("object"!==n(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var i=r.call(t,e||"default");if("object"!==n(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(o,"string"))?a:String(a)),i)}var o,a}function u(t,e){return(u=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function f(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,i=h(t);if(e){var o=h(this).constructor;r=Reflect.construct(i,arguments,o)}else r=i.apply(this,arguments);return function(t,e){if(e&&("object"===n(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return p(t)}(this,r)}}function p(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function h(t){return(h=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}let g=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&u(t,e)}(h,i.Mixin.with(o.EventTargetMixin));var e,r,n,c=f(h);function h(t,e){var r;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,h),(r=c.call(this)).preloaders=new Map,r.meta=new Map,r.heightMask=null,r.tileImages=new Map,r.tileNumberCache=new Map,r.tileSetCache=new Map,r.tileCache=new Map,r.heightMasks=new Map,r.heightMaskCache=new Map,r.prefixed=new Map,r.mapDirectory="/map",r.tileLayers=[],r.destructibleLayers=[],r.collisionLayers=[],r.objectLayers=[],r.mapVars=new Map;const n=t.mapUrl;if(r.mapData=null,r.mapUrl=n,r.maps=new Map,r.replacements=new Map,r.loaded=new Map,r.emptyCache=new Map,r.solidCache=new Map,"json"===String(n).substr(-4)){const t=new a.Elicit(n);t.addEventListener("progress",t=>{const e=t.detail,i=e.received,o=e.length,a=e.done;r.dispatchEvent(new CustomEvent("level-progress",{detail:{length:o,received:i,done:a,url:n}}))}),r.ready=t.stream().then(t=>t.json()).then(t=>{if(r.mapData=t,t&&t.properties)for(const e of t.properties){const t=e.name.replace(/-/g,"_");r.meta.set(t,e.value)}return r.desparseLayers(t),r.loadLayers(t),r.loadTilesets(t)})}else"png"===String(n).substr(-3)&&(r.ready=r.fromImage(n,32));return Object.preventExtensions(p(r)),r}return e=h,(r=[{key:"desparseLayers",value:function(t){for(const e of t.layers){if("tilelayer"!==e.type||!e.sparsed||e.data)continue;const t=e.data=Object.create(null);for(;e.sparsed.length;){const r=Number(e.sparsed.pop());t[Number(e.sparsed.pop())]=r}}}},{key:"preloadMap",value:function(t){if(this.preloaders.has(t))return this.preloaders.get(t);const e=new a.Elicit(t).stream().then(t=>t.json());return this.preloaders.set(t,e),e}},{key:"append",value:function(t,e,r){let n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;return this.preloadMap(t).then(t=>{const i=this.mapData.width,o=-i+e,a=i+t.width+o,s=this.mapData.height;Math.max(s,s+t.height+-Math.round(r/32));this.resize(a,s),this.desparseLayers(t);let c=0;for(const t of this.mapData.tilesets)c+=t.tilecount;for(const e of t.tilesets)e.firstgid+=c;for(const i of t.layers){const t=Object.create(null),o=this.mapData.width-i.width,a=e+r*this.mapData.width;if(i.data){for(let e of Object.keys(i.data)){const r=Number(e),n=Number(i.data[e]),s=Math.floor(r/i.width);delete i.data[e],t[s*o+a+r]=n+c}Object.assign(i.data,t);for(const t of this.mapData.layers)i.name===t.name&&(Object.assign(t.data,i.data),t.layer.setMeta(i,n))}}for(const e of t.tilesets)this.mapData.tilesets.push(e);return this.tileNumberCache.clear(),this.loadTilesets(t).then(()=>({defs:this.getObjectDefs(t,c),data:t}))})}},{key:"resize",value:function(t,e){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.tileLayers;const n=this.mapData,i=n.width;n.height;n.width=t,n.height=e;const o=t-i;for(const t of r){const e=Object.create(null);for(const r of Object.entries(t.data)){var a=s(r,2);const t=a[0],n=a[1],c=Number(t),l=Math.floor(c/i);e[t]=0,e[l*o+c]=n}t.data=e}this.tileNumberCache.clear()}},{key:"offset",value:function(t,e){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.tileLayers;const n=t+e*this.mapData.width;for(const t of r){const e=Object.create(null);for(const r of Object.entries(t.data)){var i=s(r,2);const t=i[0],o=i[1],a=Number(t);e[t]=0,e[n+a]=o}t.data=e}this.tileNumberCache.clear()}},{key:"loadTilesets",value:function(t){const e=[],r=new Map,n=new Map;this.emptyCache.clear(),this.solidCache.clear();for(const i of t.tilesets){const t=new Image;this.tileImages.set(i,t),this.prefixed.has(i)||this.prefixed.set(i,String(this.mapDirectory+"/"+i.image).replace(/\/\/+/g,"/"));const o=this.prefixed.get(i);i.original=i.image=o;const s=new a.Elicit(o);s.addEventListener("progress",t=>{const e=t.detail,i=e.received,a=e.length;e.done;r.set(s,i),n.set(s,a);const c=[...r.values()].reduce((t,e)=>Number(t)+Number(e)),l=[...n.values()].reduce((t,e)=>Number(t)+Number(e)),u=c/l;this.dispatchEvent(new CustomEvent("texture-progress",{detail:{length:l,received:c,done:u,url:o}}))});const c=s.objectUrl().then(e=>new Promise(r=>{i.cachedImage=e,t.addEventListener("load",n=>{this.replacements.has(o)||this.replacements.set(o,e),this.loaded.set(o,e);const a=document.createElement("canvas");a.width=t.width,a.height=t.height,a.getContext("2d").drawImage(t,0,0,t.width,t.height),this.heightMasks.set(i,a.getContext("2d").getImageData(0,0,a.width,a.height)),r(a)},{once:!0}),t.src=e}));e.push(c)}return Promise.all(e)}},{key:"loadLayers",value:function(t){const e=Object.create(null);t.layers;t.layers.forEach((t,e)=>{t.offsetX=!1,t.offsetY=!1,t.offsetXChanged=!1,t.offsetYChanged=!1,t.destroyed=!1,t.layer=null,t.index=null,Object.preventExtensions(t)}),this.objectLayers=t.layers.filter(t=>"objectLayers"===t.type),this.tileLayers=t.layers.filter(t=>"tilelayer"===t.type),this.tileLayers.forEach((t,e)=>t.index=e),e.tileLayers=this.tileLayers,this.collisionLayers=this.tileLayers.filter(t=>!!t.name.match(/^Collision\s\d+/)),this.destructibleLayers=this.tileLayers.filter(t=>!!t.name.match(/^Destructible\s\d+/)),e.destructibleLayers=this.destructibleLayers,e.collisionLayers=this.collisionLayers}},{key:"addMap",value:function(t){arguments.length>1&&void 0!==arguments[1]&&arguments[1],arguments.length>2&&void 0!==arguments[2]&&arguments[2];const e=new a.Elicit(t);e.stream().then(t=>t.json()).then(t=>{}),e.addEventListener("progress",t=>{const e=t.detail;e.received,e.length,e.done}),this.objectLayers=tilemapData.layers.filter(t=>"objectLayers"===t.type),this.tileLayers=tilemapData.layers.filter(t=>"tilelayer"===t.type),this.tileLayers.forEach((t,e)=>t.index=e),layerGroup.tileLayers=this.tileLayers,this.collisionLayers=this.tileLayers.filter(t=>!!t.name.match(/^Collision\s\d+/)),this.destructibleLayers=this.tileLayers.filter(t=>!!t.name.match(/^Destructible\s\d+/)),layerGroup.destructibleLayers=this.destructibleLayers,layerGroup.collisionLayers=this.collisionLayers}},{key:"coordsToTile",value:function(t,e,r){const n=this.blockSize;let i=0,o=0;var a,s;this.tileLayers[r]&&(i=null!==(a=this.tileLayers[r].offsetX)&&void 0!==a?a:0,o=null!==(s=this.tileLayers[r].offsetY)&&void 0!==s?s:0);return[Math.floor((t-i)/n),Math.floor((e-o)/n)]}},{key:"getTileNumber",value:function(t,e){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;const n=this.tileLayers;if(!n[r])return!1;const i=this.mapData,o=i.width,a=i.height;if(t>=o||t<0){if(t<0||!this.meta.get("wrapX"))return 0===r&&1;t<0&&t%o!=0&&e++,t%=o}if(e>=a||e<0){if(e<0||!this.meta.get("wrapY"))return 0===r&&1;e%=a}const s=e*o+t;if(s in n[r].data){const t=n[r].data[s],e=t>0?t-1:0;return!this.checkEmpty(e)&&e}return!1}},{key:"getObjectDefs",value:function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.mapData,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;if(t)return t.layers.filter(t=>"objectgroup"===t.type).map(t=>t.objects).flat().map(t=>(void 0!==t.gid&&(t.gid+=e),t))}},{key:"getTile",value:function(t){const e=this.tileCache.get(t);if(void 0!==e)return this.replacements.has(e[3])?e[2]=this.replacements.get(e[3]):this.loaded.has(e[3])&&(e[2]=this.loaded.get(e[3])),e;const r=this.blockSize;let n=0,i=0,o="",a="";const s=this.getTileset(t),c=this.tileImages.get(s);if(!s.meta&&s.properties){s.meta=Object.create(null);for(const t of s.properties)s.meta[t.name]=t.value}if(t){const e=t+-s.firstgid+1,l=Math.ceil(c.width/r);n=e%l,i=Math.floor(e/l),o=s.image,a=s.original}const l=[n,i,o,a,s];return Object.preventExtensions(l),this.tileCache.set(t,l),l}},{key:"getSolid",value:function(t,e){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;t=Math.trunc(t),e=Math.trunc(e);let n,i,o=0,a=0;r instanceof Map?i=r:((i=new Map).set(this.tileLayers[0],!0),i.set(this.tileLayers[r],!0));for(const r of i){var c=s(r,2);const i=c[0];if(!c[1])continue;const f=i.index;var l,u;if(this.tileLayers[f])o=null!==(l=this.tileLayers[f].offsetX)&&void 0!==l?l:0,a=null!==(u=this.tileLayers[f].offsetY)&&void 0!==u?u:0;n=this.getTileNumber(Math.floor((t-o)/this.blockSize),Math.floor((e-a)/this.blockSize),f);this.collisionLayers.length;if(f<=3){if(0===n)continue;if(1===n)return this.tileLayers[f]}const p=this.getTileset(n),h=this.mapData.tilewidth,g=this.getTile(n),d=g[0]*h,y=g[1]*h,b=d+Number(t)%h,v=y+Number(e)%h,m=this.heightMasks.get(p),w=4*(b+v*m.width);if(255===m.data[w+3])return this.tileLayers[f]}}},{key:"getColor",value:function(t,e,r){let n=0,i=0;var o,a;this.tileLayers[r]&&(n=null!==(o=this.tileLayers[r].offsetX)&&void 0!==o?o:0,i=null!==(a=this.tileLayers[r].offsetY)&&void 0!==a?a:0);const s=this.getTileNumber(Math.floor((t-n)/this.blockSize),Math.floor((e-i)/this.blockSize),r),c=this.getTileset(s),l=this.mapData.tilewidth,u=this.getTile(s),f=[u[0]*l,u[1]*l],p=Number(t)%l,h=Number(e)%l,g=f[0]+p,d=f[1]+h,y=this.heightMasks.get(c),b=4*(g+d*y.width);return(y.data[b+0]<<24)+(y.data[b+1]<<16)+(y.data[b+2]<<8)+(y.data[b+3]<<0)}},{key:"checkEmpty",value:function(t){if(this.emptyCache.has(t))return this.emptyCache.get(t);this.getTile(t);const e=this.getTileset(t),r=this.mapData.tilewidth,n=this.getTile(t),i=[n[0]*r,n[1]*r];for(let n=0;n<r;n++)for(let o=0;o<r;o++){const r=i[0]+n,a=i[1]+o,s=this.heightMasks.get(e),c=4*(r+a*s.width);if(s.data[c+3]>0)return this.emptyCache.set(t,!1),!1}return this.emptyCache.set(t,!0),!0}},{key:"checkFull",value:function(t){if(this.solidCache.has(t))return this.solidCache.get(t);this.getTile(t);const e=this.getTileset(t),r=this.mapData.tilewidth,n=this.getTile(t),i=[n[0]*r,n[1]*r];for(let n=0;n<r;n++)for(let o=0;o<r;o++){const r=i[0]+n,a=i[1]+o,s=this.heightMasks.get(e),c=4*(r+a*s.width);if(s.data[c+3]<255)return this.solidCache.set(t,!1),!1}return this.solidCache.set(t,!0),!0}},{key:"getTileset",value:function(t){t=Number(t);const e=this.tileSetCache;if(e.has(t)){const r=e.get(t);return this.replacements.has(r.original)&&(r.image=this.replacements.get(r.original)),r}if(this.mapData)for(const r in this.mapData.tilesets){const n=this.mapData.tilesets[r];if(t+1>=n.firstgid){const i=this.mapData.tilesets[Number(r)+1];if(!i)return e.set(t,n),this.replacements.has(n.original)&&(n.image=this.replacements.get(n.original)),n;if(t+1<i.firstgid)return e.set(t,n),this.replacements.has(n.original)&&(n.image=this.replacements.get(n.original)),n}}}},{key:"unreplace",value:function(){this.replacements.clear(),this.tileCache.clear()}},{key:"reset",value:function(){this.tileSetCache.clear(),this.replacements.clear(),this.tileCache.clear();for(let t=0;t<this.tileLayers.length;t++){this.tileLayers[t].destroyed=!1}for(const t of this.mapData.tilesets)t.image=t.original;this.loadTilesets(this.mapData)}},{key:"castRay",value:function(t,e,r){let n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:320,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0;const o=i instanceof Map?new Map([...i.entries()].filter(t=>t[1])):new Map,a=new Map,c=new Map;if(!(i instanceof Map))for(const t of this.tileLayers)t.layer&&t.layer.meta&&t.layer.meta.solid&&(t.layer.meta.switchable&&t.index!==i||(o.set(t,!0),a.set(t.index,Math.sign(t.layer.args.offsetX)),c.set(t.index,Math.sign(t.layer.args.offsetY))));n=Math.ceil(n);const l=Math.cos(r),u=Math.sin(r),f=t+(Math.abs(l)>Number.EPSILON?l:0)*n,p=e+(Math.abs(u)>Number.EPSILON?u:0)*n,h=this.blockSize,g=f-t,d=p-e,y=Math.sign(g),b=Math.sign(d),v=g?Math.hypot(1,d/g):0,m=d?Math.hypot(1,g/d):0;let w,S=0;if(this.getSolid(t,e,i))return[t,e];const O=this.coordsToTile(t,e,i)||this.coordsToTile(t,e,0);for(const t of o){var j=s(t,2);const e=j[0];if(j[1]&&(w=this.getTileNumber(O[0],O[1],e.index)))break}let x=w,P=w,k=!1,_=!1,R=1;let M=w?0:y>0?h-t%h:t%h+1,T=w?0:b>0?h-e%h:e%h+1,E=M*v*y,C=T*m*b;Math.abs(E),Math.abs(C);const A=new Set,B=new Set,D=new Set,I=new Set;window.logPoints&&console.time("rayCast");let F=0;for(;Math.abs(S)<n&&!D.size&&!I.size;){if(y&&(!b||Math.abs(E)<Math.abs(C))){const n=Math.abs(E);let l=t+n*Math.cos(r),u=e+n*Math.sin(r);y>0&&l%1>.99999&&(l=Math.round(l)),b>0&&u%1>.99999&&(u=Math.round(u)),y<0&&l%1<1e-5&&(l=Math.round(l)),b<0&&u%1<1e-5&&(u=Math.round(u));const f=s(this.coordsToTile(l,u,i),2),p=f[0],g=f[1];k=x;for(const t of o){var L=s(t,2);const e=L[0],r=L[1];{const t=e.index;if(!r)continue;if(x=this.getTileNumber(p,g,t))break;if(!x&&(a.has(t)||c.has(t))){if(x=this.getTileNumber(p+-a.get(t),g,t))break;if(x=this.getTileNumber(p,g+-c.get(t),t))break;if(x=this.getTileNumber(p+-a.get(t),g+-c.get(t),t))break}}}if(R=x?1:h,!x&&k&&(R=y<0?(t+-M+1)%h:h-(t+M)%h),window.logPoints&&A.add([l,u,`rayX tile-${p}-${g} mode-${x} bf-${R} layer-${i} `]),this.getSolid(l,u,o)){D.add([l,u]);break}S=Math.abs(E),E=(M+=R)*v*y}else{const n=Math.abs(C);let l=t+n*Math.cos(r),u=e+n*Math.sin(r);y>0&&l%1>.99999&&(l=Math.round(l)),y<0&&l%1<1e-5&&(l=Math.round(l)),b>0&&u%1>.99999&&(u=Math.round(u)),b<0&&u%1<1e-5&&(u=Math.round(u));const f=s(this.coordsToTile(l,u,i),2),p=f[0],g=f[1];_=P;for(const t of o){var N=s(t,2);const e=N[0],r=N[1];{const t=e.index;if(!r)continue;if(P=this.getTileNumber(p,g,t))break;if(!P&&(a.has(t)||c.has(t))){if(P=this.getTileNumber(p,g+-c.get(t),t))break;if(P=this.getTileNumber(p+-a.get(t),g,t))break;if(P=this.getTileNumber(p+-a.get(t),g+-c.get(t),t))break}}}if(R=P?1:h,!P&&_&&(R=b<0?(e+-T+1)%h:h-(e+T)%h),window.logPoints&&B.add([l,u,`rayY tile-${p}-${g} mode-${P} bf-${R} layer-${i} `]),this.getSolid(l,u,o)){I.add([l,u]);break}S=Math.abs(C),C=(T+=R)*m*b}F++}const z=[...D,...I],q=z.map(r=>Math.pow(r[0]-t,2)+Math.pow(r[1]-e,2)),U=Math.min(...q),H=z[q.indexOf(U)];return H&&(y>0&&H[0]%1>.99999&&(H[0]=Math.round(H[0])),y<0&&H[0]%1<1e-5&&(H[0]=Math.round(H[0])),b>0&&H[1]%1>.99999&&(H[1]=Math.round(H[1])),b<0&&H[1]%1<1e-5&&(H[1]=Math.round(H[1]))),window.logPoints&&console.timeEnd("rayCast"),window.logPoints&&console.log({iterations:F}),window.logPoints&&(window.logPoints(t,e,"start"),window.logPoints(f,p,"end"),[...A].map(t=>window.logPoints(t[0],t[1],t[2])),[...B].map(t=>window.logPoints(t[0],t[1],t[2])),H&&window.logPoints(H[0],H[1],"nearest")),Math.sqrt(U)>n?void 0:H}},{key:"getCollisionMap",value:function(){const t=new Map;for(const e of this.tileLayers){let r=!1;"Collision"===e.name.substr(0,9)?r=!0:"Moving"===e.name.substr(0,6)&&(r=!0),t.set(e,r)}return t}},{key:"negSafeMod",value:function(t,e){return t>=0?t%e:(e+t%e)%e}},{key:"blockSize",get:function(){return this.mapData.tilewidth}},{key:"fromImage",value:function(t,e){return new Promise(r=>{const n=new Image;n.addEventListener("load",i=>{const o=Math.floor(n.width*n.height/Math.pow(32,2)),a={columns:Math.floor(n.width/e),firstgid:1,image:t.substr(4),original:t.substr(4),imageheight:n.height,imagewidth:n.width,margin:0,name:"image-map",spacing:0,tileheight:e,tilewidth:e,tilecount:o},s={data:Object.assign(Object.create(null),[...Array(o)].map((t,e)=>e)),width:Math.floor(n.width/e),height:Math.floor(n.height/e),id:1,name:"Tile Layer 1",opacity:1,properties:[{name:"solid",type:"bool",value:!0}],type:"tilelayer",visible:!0,x:0,y:0},c={tilewidth:e,tileheight:e,layers:[s],tilesets:[a],width:Math.floor(n.width/e),height:Math.floor(n.height/e)};this.mapData=c,console.log(c),this.loadLayers(c),this.loadTilesets(c).then(r)},{once:!0}),n.src=t})}}])&&l(e.prototype,r),n&&l(e,n),Object.defineProperty(e,"prototype",{writable:!1}),h}();t.TileMap=g}),require.register("timer/Countdown.js",function(t,e,r){"use strict";function n(t){"@babel/helpers - typeof";return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function i(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,a(n.key),n)}}function o(t,e,r){return(e=a(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function a(t){var e=function(t,e){if("object"!==n(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var i=r.call(t,e||"default");if("object"!==n(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===n(e)?e:String(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.Countdown=void 0;let s=function(){function t(e,r){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),o(this,"time",0),o(this,"callback",()=>console.warn("No callback set!")),this.time=e,this.callback=r}var e,r,n;return e=t,(r=[{key:"extend",value:function(t){this.time+=t}},{key:"extendTo",value:function(t){this.time=Math.max(t,this.time)}},{key:"update",value:function(){this.time>0&&this.time--,this.time<=0&&(this.callback(),this.time=0)}}])&&i(e.prototype,r),n&&i(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();t.Countdown=s}),require.register("titlecard/Titlecard.js",function(t,e,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Titlecard=void 0;var n=e("curvature/base/View");function i(t){"@babel/helpers - typeof";return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function o(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,u(n.key),n)}}function a(t,e){return(a=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function s(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=l(t);if(e){var o=l(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===i(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return c(t)}(this,r)}}function c(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function l(t){return(l=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function u(t){var e=function(t,e){if("object"!==i(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==i(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===i(e)?e:String(e)}const f=Symbol("Accept");let p=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&a(t,e)}(h,n.View);var r,i,l,p=s(h);function h(){var t;let r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1?arguments[1]:void 0;var i,o,a;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,h),t=p.call(this,r,n),i=c(t),o="template",a=e("./titlecard.html"),(o=u(o))in i?Object.defineProperty(i,o,{value:a,enumerable:!0,configurable:!0,writable:!0}):i[o]=a,t.args.firstLine=r.firstLine||"First Line",t.args.secondLine=r.secondLine||"Second Line",t.args.creditLine=r.creditLine||"Credit Line",t.args.actNumber=r.actNumber||1,t.args.animation="start",t.played=new Promise(e=>t[f]=e),t}return r=h,(i=[{key:"replay",value:function(t){Object.assign(this.args,t),this.args.replay="replay";const e=new Promise(t=>{const e=this.args.waitFor||Promise.resolve();let r=75;this.onTimeout(r,()=>this.onNextFrame(()=>this.args.animation="")),r+=75,this.onTimeout(r,()=>this.onNextFrame(()=>this.args.animation="opening")),r+=500,e.finally(()=>{this.onTimeout(r,()=>this.onNextFrame(()=>this.args.animation="opening2")),r+=750,this.onTimeout(r,()=>this.onNextFrame(()=>this.args.animation="closing")),this.onTimeout(r,()=>{t([new Promise(t=>this.onTimeout(r+750,t))]),this[f]()}),r+=1e3,this.onTimeout(r,()=>this.onNextFrame(()=>this.args.animation="closed")),r+=2500,this.onTimeout(r,()=>this.onNextFrame(()=>{this.args.animation="done",this.playing=!1}))})});this.playing=e}},{key:"play",value:function(t){if(this.playing)return this.playing;const e=new Promise(t=>{const e=this.args.waitFor||Promise.resolve();let r=750;this.onTimeout(r,()=>this.onNextFrame(()=>this.args.animation="")),r+=750,this.onTimeout(r,()=>this.onNextFrame(()=>this.args.animation="opening")),r+=500,e.finally(()=>{this.onTimeout(r,()=>this.onNextFrame(()=>this.args.animation="opening2")),r+=750,this.onTimeout(r,()=>this.onNextFrame(()=>this.args.animation="closing")),this.onTimeout(r,()=>{t([new Promise(t=>this.onTimeout(r+750,t))]),this[f]()}),r+=1e3,r+=1e3,this.onTimeout(r,()=>this.onNextFrame(()=>this.args.animation="closed")),r+=2500,this.onTimeout(r,()=>this.onNextFrame(()=>{this.args.animation="done",this.playing=!1}))})});this.playing=e}}])&&o(r.prototype,i),l&&o(r,l),Object.defineProperty(r,"prototype",{writable:!1}),h}();t.Titlecard=p}),require.register("titlecard/titlecard.html",function(t,e,r){r.exports='<div class = "titlecard [[replay]] [[animation]]">\n\n\t<div class = "titlecard-field"></div>\n\n\t<div class = "titlecard-bottom-border">\n\t\t<div class = "titlecard-border-text">[[creditLine]]</div>\n\t</div>\n\n\t<div class = "titlecard-left-border">\n\t\t<div class = "titlecard-border-shadow"></div>\n\t\t<div class = "titlecard-border-color"></div>\n\t</div>\n\n\t<div class = "titlecard-title">\n\n\t\t<div class = "titlecard-title-box">\n\n\t\t\t<div class = "titlecard-title-line-1">[[firstLine]]</div>\n\n\t\t\t<div class = "titlecard-title-line-2">\n\t\t\t\t[[secondLine]]<div class = "titlecard-title-number">[[actNumber]]</div>\n\t\t\t</div>\n\n\t\t</div>\n\n\t</div>\n\n</div>\n'}),require.register("trace/Trace.js",function(t,e,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Trace=void 0;var n=e("curvature/base/Uuid"),i=e("curvature/model/Model");function o(t){"@babel/helpers - typeof";return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function a(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,h(n.key),n)}}function s(){return(s="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=f(t)););return t}(t,e);if(n){var i=Object.getOwnPropertyDescriptor(n,e);return i.get?i.get.call(arguments.length<3?t:r):i.value}}).apply(this,arguments)}function c(t,e){return(c=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function l(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=f(t);if(e){var i=f(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===o(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return u(t)}(this,r)}}function u(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function f(t){return(f=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function p(t,e,r){return(e=h(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function h(t){var e=function(t,e){if("object"!==o(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==o(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===o(e)?e:String(e)}const g=document.head.querySelector('meta[name="x-build-time"]'),d=g?g.getAttribute("content"):null;let y=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&c(t,e)}(g,i.Model);var e,r,o,h=l(g);function g(){var t;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,g);for(var e=arguments.length,r=new Array(e),i=0;i<e;i++)r[i]=arguments[i];return p(u(t=h.call(this,...r)),"class","Trace"),p(u(t),"uuid",String(new n.Uuid)),p(u(t),"created",Date.now()),p(u(t),"local",String(new Date)),p(u(t),"tz",Intl.DateTimeFormat().resolvedOptions().timeZone),p(u(t),"stack",""),p(u(t),"message",""),p(u(t),"timeStamp",null),p(u(t),"filename",null),p(u(t),"lineno",null),p(u(t),"colno",null),p(u(t),"buildTime",d),p(u(t),"replay",null),t}return e=g,(r=[{key:"consume",value:function(t){let e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];s(f(g.prototype),"consume",this).call(this,t,e),this.uuid=t.uuid||this.uuid||String(new n.Uuid)}}])&&a(e.prototype,r),o&&a(e,o),Object.defineProperty(e,"prototype",{writable:!1}),g}();t.Trace=y}),require.register("trace/TraceDatabase.js",function(t,e,r){"use strict";function n(t){"@babel/helpers - typeof";return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(t,"__esModule",{value:!0}),t.TraceDatabase=void 0;var i=e("curvature/model/Database");function o(t,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,(o=i.key,void 0,"symbol"===n(a=function(t,e){if("object"!==n(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var i=r.call(t,e||"default");if("object"!==n(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(o,"string"))?a:String(a)),i)}var o,a}function a(t,e){return(a=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function s(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,i=c(t);if(e){var o=c(this).constructor;r=Reflect.construct(i,arguments,o)}else r=i.apply(this,arguments);return function(t,e){if(e&&("object"===n(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function c(t){return(c=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}let l=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&a(t,e)}(l,i.Database);var e,r,n,c=s(l);function l(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,l),c.apply(this,arguments)}return e=l,(r=[{key:"_version_1",value:function(t){const e=this.createObjectStore("traces",{keyPath:"id",autoIncrement:!0});e.createIndex("position",["filename","lineno","colno"],{unique:!1}),e.createIndex("filename","uuid",{unique:!1}),e.createIndex("lineno","lineno",{unique:!1}),e.createIndex("colno","colno",{unique:!1}),e.createIndex("created","created",{unique:!1}),e.createIndex("uuid","uuid",{unique:!0}),e.createIndex("id","id",{unique:!0})}}])&&o(e.prototype,r),n&&o(e,n),Object.defineProperty(e,"prototype",{writable:!1}),l}();t.TraceDatabase=l}),require.register("ui/CharacterString.js",function(t,e,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CharacterString=void 0;var n=e("curvature/base/View"),i=e("curvature/base/Bindable");function o(t){"@babel/helpers - typeof";return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function a(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,f(n.key),n)}}function s(t,e){return(s=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function c(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=u(t);if(e){var i=u(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===o(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return l(t)}(this,r)}}function l(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function u(t){return(u=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function f(t){var e=function(t,e){if("object"!==o(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==o(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===o(e)?e:String(e)}let p=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&s(t,e)}(p,n.View);var e,r,o,u=c(p);function p(){var t;let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=arguments.length>1?arguments[1]:void 0;var n,o,a;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,p),e[i.Bindable.NoGetters]=!0,t=u.call(this,e,r),n=l(t),a='<div cv-ref = "main" class = "hud-character-string [[hide]] [[color]] [[font]] [[classes]]" cv-each = "chars:char:c"><span\n\t\t\t\tclass = "hud-character"\n\t\t\t\tdata-type  = "[[char.type]]"\n\t\t\t\tdata-value = "[[char.pos]]"\n\t\t\t\tdata-index = "[[c]]"\n\t\t\t\tstyle      = "--value:[[char.pos]];--index:[[c]];"\n\t\t\t>[[char.original]]</span></div>',(o=f(o="template"))in n?Object.defineProperty(n,o,{value:a,enumerable:!0,configurable:!0,writable:!0}):n[o]=a,t[i.Bindable.NoGetters]=!0;const s=[];s[i.Bindable.NoGetters]=!0,t.args.chars=s,t.args.classes=t.args.classes||"",t.args.scale=t.args.scale||1;t.args.high,t.args.med,t.args.low;return t.args.bindTo("value",e=>{const r=String(e).split("").map(t.characterToModel.bind(l(t)));if(r.length<t.args.chars.length)for(let e=r.length;e<t.args.chars.length;e++)t.characterToModel(-2,e);Object.assign(t.args.chars,r)}),t}return e=p,(r=[{key:"characterToModel",value:function(t,e){let r=t,n="number";if(" "===t||Number(t)!=t)switch(t){case" ":t=-1,n="number";break;case"-":t=11,n="number";break;case":":t=10,n="number";break;case".":t=12,n="number";break;case"/":t=13,n="number";break;case",":t=14,n="number";break;case"?":t=15,n="number";break;case"!":t=16,n="number";break;case"@":t=17,n="number";break;case"#":t=18,n="number";break;case"$":t=19,n="number";break;case"%":t=20,n="number";break;case"^":t=21,n="number";break;case"&":t=22,n="number";break;case"*":t=23,n="number";break;case"(":t=24,n="number";break;case")":t=25,n="number";break;case"⏺":t=0,n="symbol2";break;case"▶":t=1,n="symbol2";break;case"⏸":t=2,n="symbol2";break;case"⏹":t=3,n="symbol2";break;case"⏮":t=4,n="symbol2";break;case"⏭":t=5,n="symbol2";break;case"'":t=6,n="symbol2";break;case'"':t=7,n="symbol2";break;case'"':t=8,n="symbol2";break;case"=":t=9,n="symbol2";break;case"+":t=10,n="symbol2";break;case"[":t=11,n="symbol2";break;case"]":t=12,n="symbol2";break;case"{":t=13,n="symbol2";break;case"}":t=14,n="symbol2";break;case"\\":t=15,n="symbol2";break;case";":t=16,n="symbol2";break;case"~":t=17,n="symbol2";break;case"|":t=18,n="symbol2";break;case"_":t=19,n="symbol2";break;case">":t=20,n="symbol2";break;case"<":t=21,n="symbol2";break;case"⯇":t=22,n="symbol2";break;case"⯅":t=23,n="symbol2";break;case"⯆":t=24,n="symbol2";break;case"`":t=25,n="symbol2";break;default:t=String(t).toLowerCase().charCodeAt(0)-97,n="letter"}return this.args.chars[e]?(this.args.chars[e].original=r,this.args.chars[e].type=n,this.args.chars[e].pos=t,this.args.chars[e]):{pos:t,type:n,original:r}}}])&&a(e.prototype,r),o&&a(e,o),Object.defineProperty(e,"prototype",{writable:!1}),p}();t.CharacterString=p}),require.register("ui/ClickSwitch.js",function(t,e,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ClickSwitch=void 0;var n=e("curvature/base/View");function i(t){"@babel/helpers - typeof";return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function o(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,u(n.key),n)}}function a(t,e){return(a=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function s(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=l(t);if(e){var o=l(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===i(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return c(t)}(this,r)}}function c(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function l(t){return(l=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function u(t){var e=function(t,e){if("object"!==i(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==i(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===i(e)?e:String(e)}let f=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&a(t,e)}(p,n.View);var r,i,l,f=s(p);function p(){var t,r,n,i;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,p);for(var o=arguments.length,a=new Array(o),s=0;s<o;s++)a[s]=arguments[s];return t=f.call(this,...a),r=c(t),n="template",i=e("./click-switch.html"),(n=u(n))in r?Object.defineProperty(r,n,{value:i,enumerable:!0,configurable:!0,writable:!0}):r[n]=i,t}return r=p,(i=[{key:"toggle",value:function(){this.args.active=!this.args.active}}])&&o(r.prototype,i),l&&o(r,l),Object.defineProperty(r,"prototype",{writable:!1}),p}();t.ClickSwitch=f}),require.register("ui/HudFrame.js",function(t,e,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.HudFrame=void 0;var n=e("curvature/base/View");function i(t){"@babel/helpers - typeof";return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function o(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,u(n.key),n)}}function a(t,e){return(a=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function s(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=l(t);if(e){var o=l(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===i(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return c(t)}(this,r)}}function c(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function l(t){return(l=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function u(t){var e=function(t,e){if("object"!==i(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==i(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===i(e)?e:String(e)}let f=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&a(t,e)}(f,n.View);var e,r,i,l=s(f);function f(){var t,e,r,n;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,f);for(var i=arguments.length,o=new Array(i),a=0;a<i;a++)o[a]=arguments[a];return t=l.call(this,...o),e=c(t),n='<div class = "hud-frame [[type]] [[alert]]">\n\t\t<div class = "hud-value">[[value]]</div>\n\t</div>',(r=u(r="template"))in e?Object.defineProperty(e,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[r]=n,t}return e=f,r&&o(e.prototype,r),i&&o(e,i),Object.defineProperty(e,"prototype",{writable:!1}),e}();t.HudFrame=f}),require.register("ui/click-switch.html",function(t,e,r){r.exports='<div class = "switch" data-active = "[[active]]"  cv-on = "click:toggle(event)">\n\n\t<div class = "label labelOff">\n\t\t<img src = "/ui/mute.svg" />\n\t</div>\n\n\t<div class = "slide">\n\t\t<div class = "head"></div>\n\t</div>\n\n\t<div class = "label labelOn">\n\t\t<img src = "/ui/unmute.svg" />\n\t</div>\n\n</div>\n'}),require.register("viewport/Layer.js",function(t,e,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Layer=void 0;var n=e("curvature/base/Bindable"),i=e("curvature/base/View"),o=e("curvature/base/Tag"),a=e("curvature/base/Bag");e("../intro/TitleScreenCard");function s(t){"@babel/helpers - typeof";return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function c(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,h(n.key),n)}}function l(t,e){return(l=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function u(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=p(t);if(e){var i=p(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===s(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return f(t)}(this,r)}}function f(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function p(t){return(p=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function h(t){var e=function(t,e){if("object"!==s(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==s(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===s(e)?e:String(e)}let g=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&l(t,e)}(d,i.View);var r,s,p,g=u(d);function d(t,r){var i,o,s,c;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,d),t[n.Bindable.NoGetters]=!0,i=g.call(this,t,r),o=f(i),s="template",c=e("./layer.html"),(s=h(s))in o?Object.defineProperty(o,s,{value:c,enumerable:!0,configurable:!0,writable:!0}):o[s]=c,i[n.Bindable.NoGetters]=!0,i.args.width=t.width||320,i.args.height=t.height||200,i.args.blockSize=t.blockSize||32,i.x=0,i.y=0,i.viewport=t.viewport,i.hidden=!1,i.args.offsetX=0,i.args.offsetY=0,i.args.parallax=i.args.parallax||0,i.args.layerId=i.args.layerId,Object.defineProperty(f(i),"blocksXY",{value:new Map}),Object.defineProperty(f(i),"blocks",{value:new a.Bag}),Object.defineProperty(f(i),"blockMeta",{value:new Map}),Object.defineProperty(f(i),"blockSrcs",{value:new Map}),i.args.blocks=i.blocks.list,i.meta=Object.create(null);const l=i.args.viewport.tileMap.tileLayers[i.args.layerId];i.setMeta(l),i.meta.offsetX&&(i.args.offsetX=i.meta.offsetX),i.meta.offsetY&&(i.args.offsetY=i.meta.offsetY),l.offsetX=i.args.offsetX,l.offsetY=i.args.offsetY,l.layer=f(i),i.args.name.match(/^(Grinding)\s\d+/)&&(i.meta.grinding=!0),i.offsetXChanged=0,i.offsetYChanged=0,i.fallSpeed=0,Object.preventExtensions(f(i));const u=()=>[...i.blockMeta.values()].forEach(t=>t.reset=!0);return i.args.bindTo("width",u,{wait:0}),i.args.bindTo("height",u,{wait:0}),i}return r=d,(s=[{key:"setMeta",value:function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;if(t.properties)for(const r of t.properties)this.meta[r.name]=r.value,"object"===r.type&&(this.meta[r.name]+=e)}},{key:"move",value:function(){if(void 0===this.meta.controller)return;const t=this.args.viewport,e=t.tileMap.tileLayers[this.args.layerId],r=t.actorsById[this.meta.controller];if(this.offsetXChanged=0,this.offsetYChanged=0,e&&(e.offsetXChanged=0,e.offsetYChanged=0),r){e&&(e.offsetX=this.args.offsetX,e.offsetY=this.args.offsetY);const t=(r.args.xLayer||0)-this.args.offsetX,n=(r.args.yLayer||0)-this.args.offsetY;this.args.offsetX=r.args.xLayer||0,this.args.offsetY=r.args.yLayer||0,e&&(e.offsetXChanged=t,e.offsetYChanged=n),this.offsetXChanged=t,this.offsetYChanged=n}else this.args.offsetX=0,this.args.offsetY=0;this.fallSpeed=this.fallSpeed||0}},{key:"onAttach",value:function(t){const e=this.args.viewport,r=e.tileMap.tileLayers[this.args.layerId],n=e.actorsById[this.meta.controller];r&&this.args.bindTo("destroyed",t=>{this.args.viewport.tileMap.tileLayers[this.args.layerId].destroyed=!!t,n&&(n.args.destroyed=!!t)})}},{key:"update",value:function(t,e){const r=this.args.viewport;if(r.args.frameId%r.settings.frameSkip!=0)return;if(this.args.hidden)return void(this.hidden||(this.blocks.list.forEach(t=>{t.style({display:"none"}),t.remove()}),this.hidden=!0));if(this.args.destroyed&&this.tags.background){const t=r.tileMap,e=this.args.layerId;return t.tileLayers[e].destroyed=!0,this.tags.background.style({display:"none"}),void(this.args.hidden=!0)}const n=this.args.blockSize,i=Math.ceil(this.args.width/n)+1,a=Math.ceil(this.args.height/n)+1,s=this.blocksXY,c=this.blocks,l=this.blockMeta,u=(this.blockSrcs,this.args.offsetX),f=this.args.offsetY,p=this.args.layerId;let h=1+i,g=!0;for(let y=-1;y<h;y+=Math.sign(i)){const i=y+-Math.ceil(this.x/n)+-Math.ceil(u/n)+(u>0?1:0);for(let u=0;u<a;u+=Math.sign(a)){const a=u+Math.floor(-this.y/n)+(this.offsetYChange<0?-Math.ceil(f/n):-Math.floor(f/n))+(f<0?-1:0),h=t.getTileNumber(i,a,p),b=`${y},${u}`;let v,m;if(!s.has(b)||(m=l.get(b).reset)){if(m){const t=l.get(b);v=s.get(b),t.reset=!1,t.visible=!1,t.src=null,v.style({"background-image":"none",display:"none"})}else{v=new o.Tag(document.createElement("div"));const t=Object.create(null,{visible:{value:!1,writable:!0},reset:{value:!1,writable:!0},src:{value:null,writable:!0},x:{value:null,writable:!0},y:{value:null,writable:!0}});Object.preventExtensions(t),s.set(b,v),l.set(b,t)}const t=n*y,e=n*u,r="1.016";v.style({transform:`translate(${t}px, ${e}px) scale(${r}, ${r})`,display:"none",width:n+"px",height:n+"px",position:"absolute",left:0,top:0}),c.add(v)}else v=s.get(b);const w=l.get(b),S=e.get(b),O="Moving"!==String(this.args.name).substr(0,6);if(S>this.args.layerId&&O){w.visible&&v.style({display:"none"}),w.visible=!1,w.src=null;continue}!1!==h&&t.checkFull(h)&&O&&e.set(b,this.args.layerId);const j=[];p&&!1===h?(j[0]=-1,j[1]=-1):Object.assign(j,t.getTile(h));const x=j[4];if(x&&x.meta&&x.meta.animated){var d;const t=x.meta.frames,e=r.args.frameId,n=null!==(d=x.meta.speed)&&void 0!==d?d:1,i=Math.floor(e/n)%t;j[1]+=x.meta.frameSize*i}const P=j[0]*n*-1,k=j[1]*n*-1,_=j[2];if(!1!==h&&0!==h&&(g=!1),w.x!==P||w.y!==k||w.src!==_){if(!1!==h&&0!==h){const t=P+"px "+k+"px";v.style({display:"initial","background-position":t,"background-image":`url(${_})`}),w.visible=!0}else w.visible&&(v.style({display:"none"}),w.visible=!1);w.src=_,w.x=P,w.y=k}}0}if(this.tags.background){const t=this.tags.background;g?t.style({display:"none"}):this.tags.background&&t.style({display:"initial","--offsetX":-u%n,"--offsetY":-f%n,"--xPerspective":this.viewport.args.xPerspective,"--parallax":this.args.parallax})}}}])&&c(r.prototype,s),p&&c(r,p),Object.defineProperty(r,"prototype",{writable:!1}),d}();t.Layer=g}),require.register("viewport/Plot.js",function(t,e,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Plot=void 0;var n=e("curvature/base/View");function i(t){"@babel/helpers - typeof";return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function o(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,u(n.key),n)}}function a(t,e){return(a=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function s(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=l(t);if(e){var o=l(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===i(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return c(t)}(this,r)}}function c(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function l(t){return(l=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function u(t){var e=function(t,e){if("object"!==i(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==i(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===i(e)?e:String(e)}let f=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&a(t,e)}(f,n.View);var e,r,i,l=s(f);function f(t,e){var r,n,i,o;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,f),r=l.call(this,t,e),n=c(r),o='<svg style = "--x:[[x]];--y:[[y]]" cv-each = "points:point" class = "plot">\n\t\t<circle cx="[[point.x]]" cy="[[point.y]]" r="2" class="[[point.color]]" />\n\t</svg>',(i=u(i="template"))in n?Object.defineProperty(n,i,{value:o,enumerable:!0,configurable:!0,writable:!0}):n[i]=o,r.args.points=[],r.points=new Set,r.count=0,r.max=2048,r}return e=f,(r=[{key:"clearPoints",value:function(){for(const t of this.args.points)Object.assign(t,{x:0,y:0,color:"hidden"});this.count=0}},{key:"addPoint",value:function(t,e,r){r+=` point-${this.count}`;const n=this.count++%this.max;this.args.points.length>=this.max?Object.assign(this.args.points[n],{x:t,y:e,color:r}):this.args.points.push({x:t,y:e,color:r})}}])&&o(e.prototype,r),i&&o(e,i),Object.defineProperty(e,"prototype",{writable:!1}),f}();t.Plot=f}),require.register("viewport/Viewport.js",function(t,e,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Viewport=void 0;var n=e("curvature/base/Bindable"),i=e("curvature/base/Bag"),o=(e("curvature/base/Tag"),e("curvature/base/Uuid")),a=e("curvature/base/View"),s=e("curvature/base/Router"),c=e("curvature/input/Keyboard"),l=e("curvature/input/Sequence"),u=e("curvature/net/Elicit"),f=(e("../QuadCell"),e("../timer/Countdown")),p=e("../audio/Bgm"),h=e("../audio/Sfx"),g=e("../tileMap/TileMap"),d=e("../titlecard/Titlecard"),y=e("../particle/Particle3d"),b=(e("../backdrop/MarbleGarden"),e("../backdrop/ProtoLabrynth"),e("../backdrop/MysticCave"),e("../intro/Series")),v=(e("../intro/Card"),e("../intro/TitleScreenCard")),m=e("../intro/ThankYouCard"),w=e("../intro/LoadingCard"),S=e("../intro/BootCard"),O=e("../intro/DebianCard"),j=e("../intro/WebkitCard"),x=e("../intro/GamepadCard"),P=e("../intro/NewgroundsCard"),k=e("../intro/WarningCard"),_=e("../intro/SaneCard"),R=e("../intro/NoWayCard"),M=e("../intro/SeanCard"),T=e("../Menu/PauseMenu.js"),E=e("../Menu/MainMenu.js"),C=e("../actor/LayerSwitch"),A=e("../region/Region"),B=e("../ui/CharacterString"),D=(e("../ui/HudFrame"),e("./Layer")),I=(e("./Plot"),e("../controller/Controller")),F=e("../BackdropPalette"),L=e("../ObjectPalette"),N=e("../ScriptPalette"),z=e("../ui/ClickSwitch"),q=e("subspace-console/Console"),U=e("../console/task/Input"),H=e("../console/task/Impulse"),W=e("../console/task/Mark"),G=e("../console/task/Settings"),$=e("../console/task/Move"),V=e("../console/task/Pos"),K=e("../console/task/Spawn"),Y=e("../console/task/Chao"),J=e("subspace-client/Socket"),X=e("../network/RtcClient"),Z=e("../network/RtcServer"),Q=e("../Classifier"),tt=e("../network/ChatBox"),et=e("../actor/Platformer"),rt=e("../actor/Sonic"),nt=e("../actor/Tails"),it=e("../actor/Knuckles"),ot=(e("../actor/Seymour"),e("../actor/Chalmers"),e("../save/SaveDatabase"),e("../save/Save")),at=e("../trace/TraceDatabase"),st=e("../trace/Trace"),ct=e("../replay/ReplayDatabase"),lt=e("../replay/Replay"),ut=e("../behavior/Platformer"),ft=e("matrix-api/Matrix"),pt=e("../controller/GamepadConfig"),ht=e("../tally/TallyBoard"),gt=e("../actor/Emblem"),dt=e("../lib/Analytic");function yt(t){"@babel/helpers - typeof";return(yt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function bt(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,i,o,a,s=[],c=!0,l=!1;try{if(o=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=o.call(r)).done)&&(s.push(n.value),s.length!==e);c=!0);}catch(t){l=!0,i=t}finally{try{if(!c&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(l)throw i}}return s}}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return vt(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return vt(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function vt(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function mt(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Pt(n.key),n)}}function wt(t,e){return(wt=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function St(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=jt(t);if(e){var i=jt(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===yt(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return Ot(t)}(this,r)}}function Ot(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function jt(t){return(jt=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function xt(t,e,r){return(e=Pt(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Pt(t){var e=function(t,e){if("object"!==yt(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==yt(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===yt(e)?e:String(e)}const kt=Symbol("actor-point-cache"),_t=(Symbol("collision-cells-near"),Symbol("collision-cells")),Rt=Symbol("collision-cell"),Mt=Symbol("run");let Tt=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&wt(t,e)}(Pt,a.View);var r,yt,vt,jt=St(Pt);function Pt(){var t;let r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=arguments.length>1?arguments[1]:void 0;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,Pt),r[n.Bindable.NoGetters]=!0,xt(Ot(t=jt.call(this,r,a)),"secretsFound",new Set),xt(Ot(t),"template",e("./viewport.html")),t.listen(window,"error",e=>t.handleUncaughtException(e)),window.viewport=Ot(t),t.listen(window,"focus",e=>{t.focusDelay&&t.focusDelay(),t.focusDelay=t.onFrameOut(45,()=>t.args.focusMe.args.hide="hide hidden"),t.args.focusMe.args.hide="hide",t.args.windowFocused="window-focused"}),t.listen(window,"blur",e=>{t.focusDelay&&t.focusDelay(),t.gamepad?t.args.focusMe.args.hide="hide hidden":(t.focusDelay=t.onFrameOut(1,()=>t.args.focusMe.args.hide=""),t.args.focusMe.args.hide="hide",t.args.windowFocused="window-blurred")}),t.args.windowFocused=document.hasFocus()?"window-focused":"window-blurred",t[n.Bindable.NoGetters]=!0,s.Router.listen(Ot(t),{"":()=>""}),t.args.screenEffects=new i.Bag,t.meta={},t.customColor=n.Bindable.make({h:0,s:1,v:1}),t.args.combo=[],t.args.invert="",t.args.publishTime=0,t.netId=String(new o.Uuid),t.netPlayers=new Map,t.args.controlCardShown=new Set,t.bytesReceived=0,t.args.mainPallet="",t.args.customColor={h:0,s:1,v:1},t.args.inventory=[],t.loadSaves().then(e=>{e.length?t.currentSave=ot.Save.from(e[0]):t.currentSave=new ot.Save}),t.characters={Sonic:rt.Sonic,Tails:nt.Tails,Knuckles:it.Knuckles,platformer:et.PlatformActor},t.objectPalette=L.ObjectPalette,t.scriptPalette=N.ScriptPalette,t.zoneScript=null,t.timers=new Map,t.args.paused=!1,t.args.freeze=!1,t.quadCell=null,t.visible=new Set,t.callIntervals=new Map,t.callFrames=new Map,t.callRenderedFrames=new Map,t.willDetach=new Map,t.backdrops=new Map,t.checkpoints=new Map,t.zeroFrame=!1,t.spawnedDefs=new Map,t.defsByMap=new Map,t.actorsByMap=new Map,t.args.replayQuickExit=!1,t.args.replayBanners=!0,t.maxObjectId=0,t.maxGid=0,t.args.loadingMap=!1,t.maps=new Map,t.server=null,t.client=null,t.args.networked=!1,t.args.tallyBoard=null,t.args.mouse="moved",t.settings=n.Bindable.make({audio:!0,blur:!0,smoothing:!1,displace:!0,scaling:!0,rumble:!0,showHud:!0,shortcuts:!0,showFps:!0,debugOsd:!1,outline:1,frameSkip:1,musicVol:50,sfxVol:75,username:"player",graphicsLevel:"High",matrixUrl:"https://matrix.org/_matrix",matrixRoom:"!hJzXrccruagKGXTFUQ:matrix.org",iceServer1:"stun:stun1.l.google.com:19302",iceServer2:"stun:stun2.l.google.com:19302"}),t.defaults=Object.assign({},t.settings),t.args.shakeX=0,t.args.shakeY=0,t.args.level="";let c="";const u=s.Router.query.map;let g=!1;u&&u.match(/^\w/)&&(c="/map/"+u,g=!0),t.args.startFrameId=0,t.args.actStartFrameId=0,t.args.lastFrameId=-1,c&&t.loadMap({mapUrl:c}).catch(e=>{console.warn(e),t.args.titlecard=new b.Series({cards:[new R.NoWayCard({errorString:`Cannot load map "${u}"!`,timeout:-1})]},Ot(t)),t.args.titlecard.play()}),t.sprites=new i.Bag,t.world=null;let d=s.Router.query.nointro;const y=[];g&&(d=!0),d?y.push(new E.MainMenu({timeout:-1},Ot(t))):y.push(...t.introCards()),t.args.titlecard=new b.Series({cards:y},Ot(t)),c||t.args.titlecard.play(),t.args.noIntro=d?"no-intro":"";const v=new l.Sequence({keys:["Button12","Button12","Button13","Button13","Button12","Button12","Button12","Button12"],timing:750}),m=new l.Sequence({keys:["Button12","Button12","Button13","Button13","Button14","Button15","Button14","Button15","Button1201","Button14","Button1200"],timing:750}),w=new l.Sequence({keys:["Button12","Button12","Button13","Button13","Button14","Button15","Button14","Button15","Button1201","Button1200","Button1209"],timing:750});t.konamiSeqA=m,t.konamiSeqB=w,t.debugSeq=v;const S=new l.Sequence({keys:["KeyS","KeyV","KeyG","KeyR","KeyA","KeyV"],timing:750});t.sequences=[v,m,w,S],t.args.debugEnabled=s.Router.query.debugEnabled,t.args.debugEditMode=!1,t.args.debugObjectCursor=0,t.args.debugObjectName=new B.CharacterString({value:""}),t.debugBank={},t.args.interacted=!1,v.addEventListener("complete",e=>{t.args.debugEnabled||(t.args.debugEnabled=!0,console.log("Debug variable set."),t.args.topLine.args.value="",t.args.topLine.args.hide="hide hidden",t.onTimeout(1,()=>{t.args.topLine.args.value=" Debug variable set! ",t.args.topLine.args.hide=""}),t.onTimeout(1500,()=>{t.args.topLine.args.hide="hide"}),t.onTimeout(1750,()=>{t.args.topLine.args.hide="hide hidden"}))});const O=e=>{t.args.masterCheat||(t.args.masterCheat=!0,t.args.topLine.args.value="",t.args.topLine.args.hide="hide hidden",t.onTimeout(1,()=>{t.args.topLine.args.value=" Master cheat detected. ",t.args.topLine.args.hide=""}),console.log("Master cheat detected."),t.args.paused=!1,t.onTimeout(1500,()=>{t.args.topLine.args.value="",t.args.status.args.hide="hide"}),t.onTimeout(1750,()=>{t.args.topLine.args.hide="hide hidden"}))};m.addEventListener("complete",O),w.addEventListener("complete",O),S.addEventListener("complete",e=>{t.controlActor&&(t.controlActor.gravityCheat=!t.controlActor.gravityCheat,t.args.topLine.args.value="",t.args.topLine.args.hide="hide hidden",t.onTimeout(1,()=>{t.args.topLine.args.value=` Gravity cheat ${t.controlActor.gravityCheat?"on":"off"}. `,t.args.topLine.args.hide=""}),t.onTimeout(1500,()=>{t.args.topLine.args.value="",t.args.status.args.hide="hide"}),t.onTimeout(1750,()=>{t.args.topLine.args.hide="hide hidden"}),t.controlActor.gravityCheat?t.controlActor.args.gravity*=.5:t.controlActor.args.gravity*=2)}),t.args.pauseMenu=new T.PauseMenu({},Ot(t)),t.particleObserver=new IntersectionObserver((t,e)=>{for(const e of t)0===e.intersectionRation?(e.target.style.display="none",e.target.remove()):delete e.target.style.display},{threshold:0}),t.particles=new i.Bag((e,r,n)=>{n===i.Bag.ITEM_ADDED?(e.node&&t.particleObserver.observe(e.node),e.node&&t.tags.particles.appendChild(e.node)):n===i.Bag.ITEM_REMOVED&&e.remove()}),t[Mt]=0,t.effects=new i.Bag,t.maxCameraBound=64,t.cameraBound=64,t.args.particles=t.particles.list,t.args.effects=t.effects.list,t.args.maxFps=69,t.args.currentActor="",t.args.xMouse=0,t.args.YMouse=0,t.args.xMouseOffset=0,t.args.YMouseOffset=0,t.mouseState={position:[0,0],buttons:[]},t.args.xOffset=.5,t.args.yOffset=.5,t.args.xOffsetTarget=.5,t.args.yOffsetTarget=.75,t.args.topLine=new B.CharacterString({value:""}),t.args.status=new B.CharacterString({value:""}),t.args.focusMe=new B.CharacterString({value:""}),t.args.topLine.args.hide="hide hidden",t.args.status.args.hide="hide hidden",t.args.focusMe.args.hide="hide hidden",t.args.labelChar=new B.CharacterString({value:"Char: "}),t.args.labelX=new B.CharacterString({value:"x pos: "}),t.args.labelY=new B.CharacterString({value:"y pos: "}),t.args.demoIndicator=null,t.args.labelGround=new B.CharacterString({value:"Grounded: "}),t.args.labelCamera=new B.CharacterString({value:"Camera: "}),t.args.labelAngle=new B.CharacterString({value:"Gnd theta: "}),t.args.labelGSpeed=new B.CharacterString({value:"Gnd spd: "}),t.args.labelXSpeed=new B.CharacterString({value:"X air spd: "}),t.args.labelYSpeed=new B.CharacterString({value:"Y air spd: "}),t.args.labelLayer=new B.CharacterString({value:"Layer: "}),t.args.labelMode=new B.CharacterString({value:"Mode: "}),t.args.labelActors=new B.CharacterString({value:"Actors: "}),t.args.labelRegions=new B.CharacterString({value:"Regions: "}),t.args.labelFrame=new B.CharacterString({value:"Frame ID: "}),t.args.labelIgnore=new B.CharacterString({value:"Ignore: "}),t.args.labelFps=new B.CharacterString({value:"FPS: "}),t.args.labelAirAngle=new B.CharacterString({value:"Air theta: "}),t.args.char=new B.CharacterString({value:"..."}),t.args.xPos=new B.CharacterString({value:0}),t.args.yPos=new B.CharacterString({value:0}),t.args.layer=new B.CharacterString({value:0}),t.args.gSpeed=new B.CharacterString({value:0,high:199,med:99,low:49}),t.args.ground=new B.CharacterString({value:""}),t.args.xSpeed=new B.CharacterString({value:0}),t.args.ySpeed=new B.CharacterString({value:0}),t.args.mode=new B.CharacterString({value:0}),t.args.angle=new B.CharacterString({value:0}),t.args.ignore=new B.CharacterString({value:0}),t.args.actorCount=new B.CharacterString({value:0}),t.args.regionCount=new B.CharacterString({value:0}),t.args.xPerspective=0,t.args.cameraMode=new B.CharacterString({value:0}),t.args.airAngle=new B.CharacterString({value:0}),t.args.nowPlaying=new B.CharacterString({value:"Now playing"}),t.args.trackName=new B.CharacterString({value:""}),t.args.hideNowPlaying="hide-now-playing",t.args.hiddenNowPlaying="hidden-now-playing",h.Sfx.addEventListener("play",e=>{t.args.audio||e.preventDefault()}),p.Bgm.addEventListener("play",e=>{if(t.bgm=t.meta.bgm,!t.args.audio)return e.preventDefault(),t.args.hideNowPlaying="hide-now-playing",void t.onFrameOut(60,()=>{t.args.hideNowPlaying&&(t.args.hiddenNowPlaying="hidden-now-playing")});if(!e.detail)return t.args.trackName.args.value="",t.args.audioComment="",t.args.hideNowPlaying="hide-now-playing",void(t.args.hiddenNowPlaying="hidden-now-playing");{t.args.trackName.args.value=e.detail.TIT2+" by "+e.detail.TPE1,t.args.audioComment=e.detail.COMM;const r=Math.random();t.args.secretIcon=r>.99?100:r>.9?10:"0"}if(t.args.trackName.args.value){let e=Promise.resolve();t.args.zonecard&&(e=t.args.zonecard.played),e.then(()=>{t.args.started&&(t.args.hiddenNowPlaying="",t.onFrameOut(60,()=>t.args.hideNowPlaying=""),t.timers.has(p.Bgm)?t.timers.get(p.Bgm).extendTo(600):t.timers.set(p.Bgm,new f.Countdown(600,()=>{t.args.hideNowPlaying="hide-now-playing"})))})}}),p.Bgm.addEventListener("stop",t=>{}),p.Bgm.addEventListener("pause",t=>{}),p.Bgm.addEventListener("unpause",e=>{t.args.audio||e.preventDefault()}),t.args.fpsSprite=new B.CharacterString({value:0}),t.args.frame=new B.CharacterString({value:0}),t.args.scoreLabel=new B.CharacterString({value:"SCORE:",color:"yellow"}),t.args.timerLabel=new B.CharacterString({value:"TIME: ",color:"yellow"}),t.args.ringLabel=new B.CharacterString({value:"RINGS: ",color:"yellow"}),t.args.actClearLabel=new B.CharacterString({value:"",color:"yellow"}),t.args.dialogLines=[],t.args.perfectBonusLabel=new B.CharacterString({value:"PERFECT BONUS: ",color:"yellow"}),t.args.perfectBonus=new B.CharacterString({value:0}),t.args.speedBonusLabel=new B.CharacterString({value:"SPEED BONUS: ",color:"yellow"}),t.args.speedBonus=new B.CharacterString({value:0}),t.args.skidBonusLabel=new B.CharacterString({value:"SKID BONUS: ",color:"yellow"}),t.args.skidBonus=new B.CharacterString({value:0}),t.args.ringBonusLabel=new B.CharacterString({value:"RING BONUS: ",color:"yellow"}),t.args.ringBonus=new B.CharacterString({value:0}),t.args.timeBonusLabel=new B.CharacterString({value:"TIME BONUS: ",color:"yellow"}),t.args.timeBonus=new B.CharacterString({value:0}),t.args.airBonusLabel=new B.CharacterString({value:"AIR TIME: ",color:"yellow"}),t.args.airBonus=new B.CharacterString({value:"0%"}),t.args.totalBonusLabel=new B.CharacterString({value:"TOTAL: ",color:"yellow"}),t.args.totalBonus=new B.CharacterString({value:0}),t.args.rings=new B.CharacterString({value:0}),t.args.score=new B.CharacterString({value:0}),t.args.timer=new B.CharacterString({value:"00:00"}),t.args.prompt=new B.CharacterString({value:""}),t.args.ntsc="ntsc",t.args.frameId=-1,t.settings.bindTo("scaling",e=>t.fitScale(!1),{wait:0}),t.settings.bindTo("graphicsLevel",e=>{switch(e){case"High":t.settings.displace=!0,t.settings.scaling=!0,t.settings.blur=!0;break;case"Medium":t.settings.scaling=!0,t.settings.displace=!0,t.settings.blur=!1;break;case"Low":t.settings.scaling=!0,t.settings.displace=!1,t.settings.blur=!1;break;case"Very Low":t.settings.displace=!1,t.settings.scaling=!1,t.settings.blur=!1}}),t.settings.bindTo("displace",e=>t.args.displacement=e?"on":"off"),t.settings.bindTo("outline",e=>t.args.outline=e),t.settings.bindTo("debugOsd",e=>t.args.debugOsd=e),t.settings.bindTo("showHud",e=>t.args.showHud=e),t.settings.bindTo("shortcuts",e=>t.args.shortcuts=e),t.settings.bindTo("showFps",e=>t.args.showFps=e),t.settings.bindTo("smoothing",e=>t.args.smoothing=e),t.settings.bindTo("musicVol",t=>p.Bgm.setVolume(t/100)),t.settings.bindTo("sfxVol",t=>h.Sfx.setVolume(t/100)),t.args.emeralds=[];for(const e in t.settings){const r=localStorage.getItem("sonic-3000-setting-v0.0.0="+e);try{var j;t.settings[e]=null!==(j=JSON.parse(r))&&void 0!==j?j:t.settings[e]}catch(t){console.warn(t)}}t.settings.bindTo((t,e)=>{localStorage.setItem("sonic-3000-setting-v0.0.0="+e,JSON.stringify(t))});const x=!!s.Router.query.char&&String(s.Router.query.char).substr(0,1).toUpperCase()+String(s.Router.query.char).substr(1);t.args.selectedChar=t.args.selectedChar||x||"Sonic",t.args.blockSize=32,t.args.populated=!1,t.args.willStick=!1,t.args.stayStuck=!1,t.args.willStick=!0,t.args.stayStuck=!0,t.args.scale=1,t.args.tileScale=1,t.args.width=512,t.args.height=288,t.args.bindTo("tileScale",e=>{if(t.args.width=512*e,t.args.height=288*e,t.args.layers)for(const r of t.args.layers)r.args.width=512*e,r.args.height=288*e;if(t.args.fgLayers)for(const r of t.args.fgLayers)r.args.width=512*e,r.args.height=288*e;t.fitScale()},{wait:1}),t.collisionCache=new Map,t.collisions=new Map,t.args.x=t.args.x||0,t.args.y=t.args.y||0,t.args.fgLayers=[],t.args.layers=[],t.args.animation="",t.regions=new Set,t.spawn=new Set,t.auras=new Set,t.recent=new Set,t.actorsByName={},t.actorsById={},window.actors=t.actorsById,t.playable=new Set,t.actors=new i.Bag((e,r,n)=>{if(n==i.Bag.ITEM_ADDED)e.viewport=Ot(t),t.setColCell(e),e instanceof A.Region&&t.regions.add(e),e.controllable&&t.playable.add(e),t.actorsByName[e.args.name]=e,t.actorsById[e.args.id]=e,t.objectDb.add(e),e.onSpawned&&e.onSpawned(Ot(t));else if(n==i.Bag.ITEM_REMOVED){e.viewport=null,t.playable.delete(e),e instanceof A.Region&&t.regions.delete(e),delete t.actorsByName[e.args.name],delete t.actorsById[e.args.name],delete t.actorsById[e.args.id];for(const r of t.actorsByMap){delete bt(r,2)[1][e.oid]}t.recent.delete(e),t.auras.delete(e),t.updateStarted.delete(e),t.updateEnded.delete(e),t.updated.delete(e),t.objectDb.remove(e);const r=t.getColCell(e);e[Rt]&&e[Rt].delete(e),e[_t]&&e[_t].forEach(t=>t.delete(e)),r&&r.delete(e),delete e[Rt],!e.removed&&e.firstNode.isConnected&&e.remove(),e.onDespawned&&e.onDespawned(Ot(t))}});return t.layerDb=new Q.Classifier([/^Art\s+$/,/^Collision\s+$/,/^Destructible\s+$/],()=>{}),t.objectDb=new Q.Classifier(Object.values(L.ObjectPalette)),t.blocks=new i.Bag,t.args.blocks=t.blocks.list,t.args.actors=t.actors.list,t.listen(window,"gamepadconnected",e=>t.padConnected(e)),t.listen(window,"gamepaddisconnected",e=>t.padRemoved(e)),t.colCellDiv=.75*Math.max(t.args.width,t.args.height),t.colCellCache=new Map,t.colCells=new Map,t[kt]=new Map,t.startTime=null,t.args.audio=!1,t.nextControl=!1,t.updateStarted=new Set,t.updateEnded=new Set,t.updated=new Set,t.args.xBlur=0,t.args.yBlur=0,t.args.isReplaying=!1,t.args.isRecording=!1,t.args._isRecording=!1,t.replayFrames=new Map,t.replayOffset=0,t.replayStart=null,t.replay=null,t.maxReplayFrame=0,t.lastFrame={input:{},args:{}},t.args.standalone="",t.args.fullscreen="",t.args.initializing="initializing",t.args.muteSwitch=new z.ClickSwitch,t.args.muteSwitch.args.active=!1,t.args.bindTo("interacted",e=>{e&&(t.args.muteSwitch.args.active=t.getAudioSetting(),t.args.muteSwitch.args.bindTo("active",e=>t.args.audio=e),t.args.bindTo("audio",e=>{var r;localStorage.setItem("sonic-3000-audio-enabled",e);const n=t.args.frameId-t.args.startFrameId;t.onNextFrame(()=>e?h.Sfx.unpause():h.Sfx.pause()),n>(null!==(r=t.meta.bgm_delay)&&void 0!==r?r:0)&&t.onNextFrame(()=>e?p.Bgm.unpause():p.Bgm.pause()),t.args.muteSwitch.args.active=e}))}),t.args.showConsole=null,t.listen(document,"keydown",e=>{"Escape"===e.key&&(t.args.showConsole=!1),"F10"!==e.key&&"`"!==e.key||(t.args.subspace||(t.args.subspace=new q.Console({scroller:t.tags.subspace,path:{input:U.Input,mark:W.Mark,impulse:H.Impulse,move:$.Move,pos:V.Pos,set:G.Settings,spawn:K.Spawn,chao:Y.Chao}})),t.args.networked?t.args.showConsole=!1:t.args.showConsole=t.args.showConsole?null:"showConsole",e.preventDefault())}),t.args.bindTo("shakeY",(e,r,n,i,o)=>{t.controlActor&&t.controlActor.controller&&t.controlActor.controller.rumble&&(Math.abs(e)>40&&Math.abs(e)>Math.abs(o)?t.controlActor.controller&&t.controlActor.controller.rumble({duration:4*e,strongMagnitude:1,weakMagnitude:1}):Math.abs(e)>20&&Math.abs(e)>Math.abs(o)?t.controlActor.controller&&t.controlActor.controller.rumble({duration:8*e,strongMagnitude:e/20,weakMagnitude:1}):Math.abs(e)>1&&t.controlActor.controller&&t.controlActor.controller.rumble({duration:16*e,strongMagnitude:.1,weakMagnitude:1}))}),t.args.bindTo("showConsole",e=>{t.args.subspace&&(e?(t.onNextFrame(()=>t.args.subspace.focus()),t.args.showConsole="showConsole"):(t.onNextFrame(()=>t.tags.viewport.focus()),t.args.showConsole=null))}),t.controller=new I.Controller({deadZone:.2}),t.controller.zero(),t.matrix=new ft.Matrix(t.settings.matrixUrl,{interval:0}),t}return r=Pt,(yt=[{key:"loadWorld",value:function(t){let e=t.worldUrl,r=t.networked,n=void 0!==r&&r;new u.Elicit(e).json().then(t=>{const e=t.maps.sort((t,e)=>t.x===e.x?t.y-e.y:t.x-e.x);let r=Math.min(...e.map(t=>t.x)),i=Math.min(...e.map(t=>t.y)),o=Math.max(...e.map(t=>t.x+t.width)),a=Math.max(...e.map(t=>t.y+t.height));for(const t of e)t.x-=r,t.y-=i;const s=e.shift();this.loadMap({mapUrl:"/map/"+s.fileName,networked:n}).then(()=>{const t=this.tileMap.mapData.tilewidth;this.tileMap.resize(o,a);for(const r of e){console.log(r);const e="/map/"+r.fileName;this.appendMap(e,r.x/t,r.y/t)}})})}},{key:"loadSaves",value:function(){return arguments.length>0&&void 0!==arguments[0]&&arguments[0]||!this.getSaveIndex?this.getSaveIndex=ot.Save.index():this.getSaveIndex}},{key:"getZoneState",value:function(t){var e;const r=this.currentSave,n=null!==(e=this.currentMap)&&void 0!==e?e:"";return r?r.getZoneState(t||n):{}}},{key:"getCharacterState",value:function(t){const e=this.currentSave;if(t){return e.getCharacterState(t)}if(this.controlActor&&this.controlActor.args.canonical){return e.getCharacterState(this.controlActor.args.canonical)}}},{key:"loadMap",value:function(t){let e=t.mapUrl,r=t.networked,n=void 0!==r&&r,i=t.useCheckpoint,o=void 0===i||i;this.maps.clear(),this.maps.set(e,{x:0,y:0});const a=new g.TileMap({mapUrl:e});this.baseMap=this.currentMap=e,this.args.networked=n,this.tileMap=a,this.args.started=!1,this.args.running=!1;const c=new w.LoadingCard({timeout:-1,text:"loading ... 0%"},this);let l="kb";this.args.selectedChar&&"Sonic"!==this.args.selectedChar&&"Tails"!==this.args.selectedChar&&"Knuckles"!==this.args.selectedChar||("input-generic"===(l=this.args.inputType)&&(l="input-xbox"),this.controller&&this.controller.buttons&&this.controller.buttons[6]&&this.controller.buttons[7]&&this.controller.buttons[6].time>0&&this.controller.buttons[7].time>0?(this.args.controlCardShown.delete(this.args.selectedChar),l="input-dreamcast"):this.controller&&this.controller.buttons&&this.controller.buttons[10]&&this.controller.buttons[10].time>0?(this.args.controlCardShown.delete(this.args.selectedChar),l="input-gamecube"):this.controller&&this.controller.buttons&&this.controller.buttons[8]&&this.controller.buttons[8].time>0&&this.args.controlCardShown.delete(this.args.selectedChar));const u=new pt.GamepadConfig({inputType:l,char:this.args.selectedChar,timeout:-1,caption:"loading ... 0%"});a.addEventListener("level-progress",t=>{const e=t.detail,r=(e.received,e.length,e.done);c.args.text=`loading level ... ${(100*r).toFixed(4)}%`,u.args.caption=`loading level ... ${(100*r).toFixed(4)}%`}),a.addEventListener("texture-progress",t=>{const e=t.detail,r=(e.received,e.length,e.done);c.args.text=`loading textures ... ${(100*r).toFixed(4)}%`,u.args.caption=`loading textures ... ${(100*r).toFixed(4)}%`,1===r&&(c.args.text="initializing...",u.args.caption="initializing...")}),a.ready.then(()=>{const t=Object.create(null);if([...a.getObjectDefs()].forEach(e=>t[e.oid||e.id]=e),this.defsByMap.set(this.currentMap,t),this.tileMap.mapData&&this.tileMap.mapData.properties)for(const t of this.tileMap.mapData.properties){const e=t.name.replace(/-/g,"_");this.meta[e]=t.value}this.args.fgLayers.length=0,this.args.layers.length=0;const e=this.tileMap.tileLayers,r=e.length,n=this.tileMap.mapData.tilewidth;this.args.blockSize=n;for(let t=0;t<r;t++){const r=new D.Layer({layerId:t,blockSize:n,viewport:this,name:e[t].name,width:this.args.width,height:this.args.height,parallax:e[t].parallaxx,perspective:this.args.xPerspective});"Foreground"===e[t].name.substring(0,10)?this.args.fgLayers.push(r):this.args.layers.push(r),"Collision"===e[t].name.substring(0,9)?r.meta.solid=!0:"Moving"===e[t].name.substring(0,6)&&"Moving Art"!==e[t].name.substring(0,10)&&(r.meta.solid=!0),"construct"!==this.meta.theme&&("Collision"===e[t].name.substring(0,9)?r.args.hidden=!0:"Moving"===e[t].name.substring(0,6)&&"Moving Art"!==e[t].name.substring(0,10)?r.args.hidden=!0:r.args.hidden=!1)}});let f=new Promise(t=>setTimeout(t,7250));const p=!(this.args.controlCardShown.has(this.args.selectedChar)&&!this.args.networked||this.args.map||this.args.selectedChar&&"Sonic"!==this.args.selectedChar&&"Tails"!==this.args.selectedChar&&"Knuckles"!==this.args.selectedChar);this.replay||!p||s.Router.query.map?(this.args.titlecard=new b.Series({cards:[c]},this),f=Promise.resolve()):(this.args.titlecard=new b.Series({cards:[u]},this),this.args.controlCardShown.add(this.args.selectedChar)),this.args.titlecard.play();const h=Promise.all([a.ready,f]);return h.then(()=>c.args.text="starting level"),h.then(()=>this.startLevel({useCheckpoint:o})),h}},{key:"fullscreen",value:function(){this.exitFullscreen(),this.args.focusMe.args.hide="hide",this.initScale=this.args.scale,this.showStatus(3500," hit escape to revert. "),this.tags.frame.node.requestFullscreen().then(t=>{this.onTimeout(100,()=>{this.fitScale(),this.args.fullscreen="fullscreen"})}).catch(t=>console.error(t))}},{key:"exitFullscreen",value:function(){if(document.fullscreenElement)return document.exitFullscreen(),this.showStatus(0,""),this.args.focusMe.args.hide="",void(this.args.fullscreen="")}},{key:"fitScale",value:function(){let t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(this.settings.scaling){const e=window.innerHeight/this.args.height,r=window.innerWidth/this.args.width;this.args.scale=t?e>r?e:r:e>r?r:e}else this.args.scale=1;this.tags.frame&&this.tags.frame.style({"--width":this.args.width*this.args.tileScale,"--height":this.args.height*this.args.tileScale,"--scale":this.args.scale})}},{key:"showStatus",value:function(t,e){this.args.status.args.hide="",this.args.status.args.value="",this.args.status.args.value=e,t>=0&&(this.statusTimeout&&(clearTimeout(this.statusTimeout),this.statusTimeout=null),this.statusTimeout=this.onTimeout(t,()=>{this.args.status.args.hide="hide"}),this.statusTimeout=this.onTimeout(2*t,()=>{this.args.status.args.hide="hide hidden"}))}},{key:"getAudioSetting",value:function(){var t;return!!JSON.parse(null===(t=localStorage.getItem("sonic-3000-audio-enabled"))||void 0===t||t)}},{key:"onAttached",value:function(t){G.Settings.viewport=this,H.Impulse.viewport=this,U.Input.viewport=this,W.Mark.viewport=this,$.Move.viewport=this,V.Pos.viewport=this,K.Spawn.viewport=this,Y.Chao.viewport=this,this.buildDetect(),this.cpuDetect(),this.gpuDetect(),this.onTimeout(100,()=>this.fitScale(!1)),this.onTimeout(5500,()=>this.args.ntsc="");const e=this.getAudioSetting();this.onTimeout(s.Router.query.map||s.Router.query.nointro?0:36e3,()=>{this.args.bindTo("interacted",t=>{const r=!t&&e?" Click here to enable audio. ":" Click here to enable keyboard control. ";this.args.focusMe.args.value!==r&&(this.args.focusMe.args.value="",this.args.focusMe.args.value=r)},{wait:250})}),this.settings.bindTo("blur",t=>{t?(this.tags.blurDistance.setAttribute("style","filter:url(#motionBlur)"),this.tags.blurDistanceFg.setAttribute("style","filter:url(#motionBlur)")):(this.tags.blurDistance.setAttribute("style",""),this.tags.blurDistanceFg.setAttribute("style",""))}),this.listen(window,"resize",t=>{this.onTimeout(100,()=>this.fitScale(!1))}),this.listen(document,"fullscreenchange",t=>{if(this.onTimeout(100,()=>this.fitScale(!1)),!document.fullscreenElement)return this.args.scale=this.initScale,void(this.args.fullscreen="")}),this.tags.frame.style({"--width":this.args.width,"--height":this.args.height,"--scale":this.args.scale}),this.startTime||(this.startTime=0),this.args.started=!1,this.args.running=!1,this.args.paused=!1,this.listen(document.body,"click",t=>{let e=t.target;for(;e&&e.matches;){if(e.matches("[data-click-barrier]"))return;e=e.parentNode}this.tags.viewport.contains(document.activeElement)||this.tags.viewport.focus()},{capture:!0}),this.args.scale=this.args.scale||1;const r=c.Keyboard.get();r.listening=!0,r.focusElement=this.tags.viewport.node,r.codes.bindTo((t,e,r,n)=>{this.controller&&this.controller.keyIsMapped(e)||-1===t&&this.sequences.map(t=>t.check(e))}),this.tags.viewport.node.focus(),(window.matchMedia("(display-mode: standalone)").matches||window.matchMedia("(display-mode: fullscreen)").matches)&&(this.args.standalone="standalone",document.title="Sonic 3000",this.listen(window,"resize",()=>this.fitScale(!1)),this.onTimeout(100,()=>this.fitScale(!1))),this.onTimeout(100,()=>this.args.initializing="")}},{key:"setZoneCard",value:function(){let t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];t||(this.args.zonecard=new d.Titlecard({waitFor:this.tileMap.ready},this));const e=this.meta.titlecard_title_1,r=this.meta.titlecard_title_2,n=this.meta.titlecard_author,i=this.meta.titlecard_number;return this.args.zonecard.args.firstLine=e,this.args.zonecard.args.secondLine=r,this.args.zonecard.args.creditLine=n,this.args.zonecard.args.actNumber=i,this.args.actName=`${e} ${r} ${i}`,t?Promise.resolve():(this.args.titlecard=new b.Series({cards:[this.args.zonecard]},this),this.args.titlecard.play())}},{key:"fillBackground",value:function(){const t=F.BackdropPalette[this.meta.backdrop];delete this.args.backdrop,this.args.backdrop=t?new t:null,this.args.theme=this.meta.theme||"construct",this.args.bg=this.meta.backdrop}},{key:"startLevel",value:function(){let t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];if(performance.mark("init-start"),this.populateMap(),this.levelFinished=!1,this.args.isReplaying||(this.args._isRecording=!this.args.networked),this.args.debugEditMode=!1,this.clearDialog(),this.hideDialog(),this.args.mouse="hide",this.args.currentSheild=null,this.args.hasFire=!1,this.args.hasWater=!1,this.args.hasElectric=!1,this.args.hasNormal=!1,this.meta.zoneScript&&N.ScriptPalette[this.meta.zoneScript]&&(this.zoneScript=new N.ScriptPalette[this.meta.zoneScript]),p.Bgm.stop("MENU_THEME"),p.Bgm.playing&&this.meta.bgm!==this.bgm&&p.Bgm.stop(),this.meta.bgm||p.Bgm.fadeOut(250),this.args.audio||p.Bgm.pause(),t&&(this.setZoneCard(),this.zeroFrame=!1),this.fillBackground(),this.args.networked&&!this.remotePlayer){const t=new rt.Sonic({name:"Player 1",id:String(new o.Uuid)},this),e=new rt.Sonic({name:"Player 2",id:String(new o.Uuid)},this);1===this.args.playerId?(this.nextControl=t,this.remotePlayer=e,e.args.netplayer=!0):2===this.args.playerId&&(this.remotePlayer=t,this.nextControl=e,t.args.netplayer=!0);const r=this.defsByName.get("player-start");t.args.x=r.x,t.args.y=r.y,e.args.x=r.x,e.args.y=r.y,this.spawn.add({object:t}),this.spawn.add({object:e}),this.auras.add(t),this.auras.add(e),this.actors.add(t),this.actors.add(e)}for(const t of[...this.args.fgLayers,...this.args.layers])t.args.destroyed=!1;if(!this.args.networked){this.actors.list;this.playableIterator||(this.playableIterator=this.playable.entries()),Object.values(this.args.actors)[0]&&Object.values(this.args.actors)[0].controllable&&(this.nextControl=Object.values(this.args.actors)[0])}this.nextControl&&this.nextControl.controller&&this.nextControl.controller.zero(),this.controller&&this.controller.zero(),c.Keyboard.get().reset(),this.args.started=!1,p.Bgm.unpause(),this.args.zonecard.played.then(()=>{performance.mark("init-end"),performance.measure("init-marker","init-start","init-end");const t=this.getZoneState();if(!this.replay){for(const e of t.emblems){if(!this.actorsById[e])continue;const t=this.actorsByMap.get(this.currentMap)[e];t&&t.mapUrl===this.currentMap&&t instanceof gt.Emblem&&(t.existing="existing",this.nextControl&&!this.nextControl.args.emblems.includes(t)&&this.nextControl.args.emblems.push(t))}for(const t of this.currentSave.emeralds)this.args.emeralds.includes(t)||this.args.emeralds.push(t)}if(this.args.startFrameId=this.args.frameId-this.replayOffset,this.args.actStartFrameId=this.args.startFrameId,this.replayStart){if(this.nextControl){for(let t in this.replayStart[2]){Object.assign(this.nextControl.args,this.replayStart[2][t]);break}this.nextControl.controller.replay(this.replayStart[1]||{}),this.nextControl.readInput()}}else if(s.Router.query.start){const t=s.Router.query.start;if(t.match(/\d+(\.\d+)?,\d+(\.\d+)?/)){const e=bt(t.split(","),2),r=e[0],n=void 0===r?128:r,i=e[1],o=void 0===i?128:i;this.nextControl.args.x=Number(n),this.nextControl.args.y=Number(o)}else if(this.defsByName.has(t)){const e=this.defsByName.get(t);this.nextControl.args.x=Number(e.x),this.nextControl.args.y=Number(e.y)}Number(s.Router.query.noClip)&&(this.nextControl.args.float=-1,this.nextControl.noClip=1)}else if(!(this.replay||this.args.isReplaying||this.args.isRecording||this.args.networked)&&(this.args.demoIndicator=null,this.nextControl)){const t=this.getCheckpoint(this.nextControl.args.canonical);if(t){const e=t?this.actorsByMap.get(this.currentMap)[t.checkpointId]:null;e&&(this.args.startFrameId=this.args.frameId-t.frames,this.args.actStartFrameId=this.args.startFrameId,e.args.wasActive=!0,e.args.active=!0,this.nextControl.args.x=e.x,this.nextControl.args.y=e.y,this.nextControl.follower&&(this.nextControl.follower.args.x=e.x,this.nextControl.follower.args.y=e.y,this.setColCell(this.nextControl.follower)),this.args.xOffset=.5,this.args.yOffset=.5,p.Bgm.play(this.meta.bgm,{loop:!0}))}}if(Number(s.Router.query.pause)&&(this.args.pauseMenu.args.hideMenu="pause-menu-hide",this.args.paused=Number(s.Router.query.pause)),this.nextControl.follower&&(this.nextControl.follower.args.x=this.nextControl.x,this.nextControl.follower.args.y=this.nextControl.y,this.setColCell(this.nextControl.follower)),s.Router.query.impulse){const t=s.Router.query.impulse;if(console.log(t),t.match(/-?\d+(\.\d+)?,-?\d+(\.\d+)?/)){const e=bt(t.split(","),2),r=e[0],n=void 0===r?0:r,i=e[1],o=void 0===i?0:i;console.log({x:n,y:o}),this.nextControl.args.xSpeed=Number(n),this.nextControl.args.ySpeed=Number(o)}}s.Router.query.rings&&(this.nextControl.args.rings=Number(s.Router.query.rings)),this.args.level="level",this.args.fade=!1,this.args.started=!0,this.args.running=!0,this.startTime=Date.now(),this.onFrameOut(30,()=>this.args.fade="hide"),dt.Analytic.report({eventCategory:"zone",eventAction:"started",eventLabel:`${this.args.actName}`})})}},{key:"finishLevel",value:function(){this.replay||this.saveReplay("#008000").catch(()=>{}),this.levelFinished=!0}},{key:"saveReplay",value:function(t){const e=new lt.Replay;return e.consume({color:t,map:this.baseMap,frames:[...this.replayFrames.values()]}),e.lastFrame-e.firstFrame<30?Promise.reject():ct.ReplayDatabase.open("replays",3).then(t=>{delete e.id;const r=t.insert("replays",e).then(()=>e);return this.replayFrames=new Map,this.replayOffset=0,this.replayStart=null,this.replay=null,r})}},{key:"takeInput",value:function(t){const e=c.Keyboard.get();if(e.update(),this.gamepad||this.args.cutScene)if(this.args.cutScene)this.controlActor.args.idleTime=0;else{const r=navigator.getGamepads(),n=t.readInput({keyboard:e,gamepads:r});for(const t of n){if(t===e)continue;const r=t;if(r){this.gamepad=r;const t=String(r.id);t.match(/x-?bo?x/i)?this.args.inputType="input-xbox":t.match(/ps[345]/i)||t.match(/playstation/i)||t.match(/duals(hock|ense)/i)||t.match(/ds[45]/i)?this.args.inputType="input-playstation":this.args.inputType="input-generic"}else this.args.inputName="keyboard",this.args.inputType="input-keyboard"}}else t.readInput({keyboard:e}),this.args.inputType="input-keyboard";if(this.controlActor&&this.args.debugEditMode){if(t.buttons[0]&&1===t.buttons[0].time){const t=Object.keys(L.ObjectPalette)[this.args.debugObjectCursor];this.debugBank[t]||(this.debugBank[t]=new L.ObjectPalette[t]);const e=this.debugBank[t];this.spawn.add({object:e}),e.controllable&&(e.args.name="SPAWN",this.playable.add(e)),e[Mt]=this[Mt],e.args.x=this.controlActor.args.x,e.args.y=this.controlActor.args.y,delete this.debugBank[t]}if(t.buttons[1]&&1===t.buttons[1].time){this.args.debugObjectCursor++;const t=Object.keys(L.ObjectPalette);this.args.debugObjectCursor>=t.length&&(this.args.debugObjectCursor=0);const e=t[this.args.debugObjectCursor];for(this.debugBank[e]||(this.debugBank[e]=new L.ObjectPalette[e]);this.tags.spawnPreview.node.firstChild;)this.tags.spawnPreview.node.firstChild.remove();this.debugBank[e].render(this.tags.spawnPreview.node),this.args.debugObjectName.args.value=e}if(t.buttons[2]&&1===t.buttons[2].time){this.args.debugObjectCursor--;const t=Object.keys(L.ObjectPalette);this.args.debugObjectCursor<=0&&(this.args.debugObjectCursor=t.length-1);const e=t[this.args.debugObjectCursor];for(this.debugBank[e]||(this.debugBank[e]=new L.ObjectPalette[e]);this.tags.spawnPreview.node.firstChild;)this.tags.spawnPreview.node.firstChild.remove();this.debugBank[e].render(this.tags.spawnPreview.node),this.args.debugObjectName.args.value=e}}if(this.args.debugEnabled&&t.buttons[8]&&1===t.buttons[8].time&&(this.args.debugEditMode=!this.args.debugEditMode,this.settings.debugOsd=this.args.debugEditMode),t.buttons[2011]&&1===t.buttons[2011].time&&this.fullscreen(),t.buttons[2008]&&1===t.buttons[2008].time&&(this.args.muteSwitch.args.active=!this.args.muteSwitch.args.active),t.buttons[2009]&&1===t.buttons[2009].time&&(this.settings.debugOsd=!this.settings.debugOsd),t.buttons[1050]&&1===t.buttons[1050].time&&this.args.fullscreen&&this.exitFullscreen(),t.buttons[1020]&&1===t.buttons[1020].time&&this.args.started&&(this.args.paused?this.unpauseGame():this.pauseGame()),!this.args.networked&&t.buttons[1011]&&t.buttons[1011].time>0&&this.args.pauseMenu.input(t),this.replay&&this.replay.auto&&t.buttons[1209]&&t.buttons[1209].time>0&&this.quit(this.args.replayQuickExit?2:1),!this.args.networked&&!this.args.paused&&!this.dontSwitch&&t.buttons[11]&&1===t.buttons[11].time){this.playableIterator=this.playableIterator||this.playable.entries();let t=this.playableIterator.next();t.done&&(this.playableIterator=!1,this.playableIterator=this.playable.entries(),t=this.playableIterator.next()),t.value&&(this.nextControl=t.value[0],this.dontSwitch=3)}if(this.args.started){this.controlActor&&(this.args.currentSheild=this.controlActor.args.currentSheild?this.controlActor.args.currentSheild.type:"");const e=9;if(t.buttons[e]&&t.buttons[e].active&&1===t.buttons[e].time&&(this.args.paused?this.unpauseGame():this.pauseGame()),!this.args.isReplaying&&(this.args.isRecording||this.args._isRecording)){this.args.isRecording&&!this.args.demoIndicator&&(this.args.demoIndicator=new B.CharacterString({value:"⏺ REC",color:"red"}));const e=this.args.frameId-this.args.startFrameId,r=t.serialize();let n={},i={},o={};this.controlActor&&(n=xt({},this.controlActor.args.id,{x:this.controlActor.args.x,y:this.controlActor.args.y,mode:this.controlActor.args.mode,falling:this.controlActor.args.falling,groundAngle:this.controlActor.args.groundAngle,gSpeed:this.controlActor.args.gSpeed,xSpeed:this.controlActor.args.xSpeed,ySpeed:this.controlActor.args.ySpeed}));let a=!1;if(e%60==0||0===this.replayFrames.size)for(let t in n){i[t]=i[t]||{},this.lastFrame.args[t]=this.lastFrame.args[t]||{};let e=!1;for(let r in n[t])n[t][r]!==this.lastFrame.args[t][r]&&(this.lastFrame.args[t][r]=i[t][r]=n[t][r],a=e=!0);e||delete i[t]}for(let t in r){o[t]=o[t]||{},this.lastFrame.input[t]=this.lastFrame.input[t]||{};for(let e in r[t])r[t][e]!==this.lastFrame.input[t][e]&&(this.lastFrame.input[t][e]=o[t][e]=r[t][e],a=!0)}o.axes&&!Object.keys(o.axes).length&&delete o.axes,o.buttons&&!Object.keys(o.buttons).length?delete o.buttons:delete o.buttons[1011],a&&this.controlActor&&!this.controlActor.args.dead&&this.replayFrames.set(e,[e,o,i])}}t.update({gamepad:this.gamepad})}},{key:"moveCamera",value:function(){if(!this.controlActor)return;this.zeroFrame||(this.args.x=-this.controlActor.args.x,this.args.y=-this.controlActor.args.y),this.zeroFrame=!0,this.cameraBound<=this.maxCameraBound?this.cameraBound=this.maxCameraBound:this.cameraBound<1/0?this.cameraBound-=.05*this.cameraBound:this.maxCameraBound=this.cameraBound=Math.hypot(this.args.x+this.controlActor.args.x,this.args.y+this.controlActor.args.y);let t=25,e=this.controlActor,r=0;if(e.args.standingOn&&(r=e.args.standingOn.args.cameraBias,e.args.standingOn.isVehicle&&(e=e.args.standingOn)),e.focused){if("panning"!==this.cameraMode&&"panning"===e.args.cameraMode){const t=e.focused;this.cameraBound=this.maxCameraBound=Math.max(Math.abs(t.x-e.args.x),Math.abs(t.y-e.args.y)),this.args.x-=e.args.x-t.x,this.args.y-=e.args.y-t.y}this.cameraMode=e.args.cameraMode,e=e.focused}else this.cameraMode=e.args.cameraMode;const n=e.args.highJump,i=e.args.deepJump,o=(e.args.falling,e.args.ySpeed);switch(this.cameraMode){case"panning":this.args.xOffsetTarget=.5,this.args.yOffsetTarget=.85,t=8;break;case"boost-ring":const r=e.args.angle;!r||Math.abs(r-Math.PI)<.1?(this.args.xOffsetTarget=.5,this.args.yOffsetTarget=.5,t=24):(this.args.xOffsetTarget=.5-.5*Math.cos(r),this.args.yOffsetTarget=.5-.2*Math.sin(r),t=16);break;case"cross-cannon":this.args.xOffsetTarget=.5,this.args.yOffsetTarget=.4,t=18;break;case"cross-cannon-quick":this.args.xOffsetTarget=.5,this.args.yOffsetTarget=.4,t=5;break;case"cutScene":this.args.xOffsetTarget=[.5,.25,.5,.75][e.args.mode],this.args.yOffsetTarget=[.75,.5,.25,.5][e.args.mode],this.maxCameraBound=64,t=15;break;case"corkscrew":this.args.xOffsetTarget=.5,this.args.yOffsetTarget=.75,this.maxCameraBound=96,t=64;break;case"normal":this.args.xOffsetTarget=[.5,.45,.5,.55][e.args.mode],this.args.yOffsetTarget=[.5,.5,.5,.5][e.args.mode],this.maxCameraBound=96,t=24,0===e.args.mode&&(t=9);break;case"perspective":this.args.xOffsetTarget=[.5,.3,.5,.7][e.args.mode],this.args.yOffsetTarget=[.5,.5,.5,.5][e.args.mode],this.maxCameraBound=96,t=24;break;case"climbing":this.args.xOffsetTarget=[.5,.33,.5,.66][e.args.mode],this.args.yOffsetTarget=[.5,.5,.5,.5][e.args.mode],this.maxCameraBound=48,t=24;break;case"airplane":{const r=e.args.xSpeed,n=Math.abs(r);t=20;const i=Math.max(n/100,.45)*-Math.sign(r);this.args.xOffsetTarget=.5+i,this.args.yOffsetTarget=.5;break}case"aerial":this.args.xOffsetTarget=.5,t=24,e.args.flying||!i&&!n?this.args.yOffsetTarget=.5:this.args.yOffsetTarget=o<0?.75:.35;break;case"popping":this.args.xOffsetTarget=.5,this.args.yOffsetTarget=.25,this.maxCameraBound=64,t=6;break;case"hooked":this.args.xOffsetTarget=.5,this.args.yOffsetTarget=.6,this.maxCameraBound=1,t=25;break;case"tube":this.args.xOffsetTarget=.5,this.args.yOffsetTarget=.5,this.maxCameraBound=64,t=24;break;case"cinematic":this.args.xOffsetTarget=.5,this.args.yOffsetTarget=.5,this.maxCameraBound=1,t=0;break;case"cliff":this.args.xOffsetTarget=.5+-.1*e.args.direction,this.args.yOffsetTarget=.3,t=30;break;case"bridge":this.args.xOffsetTarget=.5,this.args.yOffsetTarget=.35,t=24;break;case"boss":this.args.xOffsetTarget=.5,this.args.yOffsetTarget=.72,this.maxCameraBound=64,t=24;break;case"draggable":this.args.xOffsetTarget=.5,this.args.yOffsetTarget=.5,this.maxCameraBound=48,t=3;break;case"locked":this.args.xOffsetTarget=.5,this.args.yOffsetTarget=.25,this.maxCameraBound=32,t=16;break;default:this.maxCameraBound=64,t=25}if(["normal","perspective","bridge","cliff","aerial","tube","hooked","cutScene","hooked","corkscrew"].includes(this.cameraMode)&&!e.args.pushing&&e.args.modeTime>0){let t=e;e.args.standingOn&&e.args.standingOn.invertsBias&&(t=e.args.standingOn);let r=t.args.gSpeed,n=t.args.xSpeed;e.args.hangingFrom&&(n=e.args.hangingFrom.args.xSpeed),t.args.standingLayer&&(r+=t.args.standingLayer.offsetXChanged);const i=!t.args.falling,o=Math.abs(i?r:n),a=17;let s=Math.abs(t.xLast-t.args.x)>1&&Math.min(o/a,1)*-Math.sign(r||n);switch(t!==e&&(s*=4),t.args.mode){case 0:this.args.xOffsetTarget+=.4*s;break;case 1:this.args.yOffsetTarget+=.4*s;break;case 2:this.args.xOffsetTarget-=.4*s;break;case 3:this.args.yOffsetTarget-=.4*s}this.args.speedBias=s}this.args.xOffsetTarget=Math.max(0,Math.min(1,this.args.xOffsetTarget)),e.args.jumping&&e.args.fallTime>15&&(this.maxCameraBound=128,(i||n)&&(t*=.75));let a=0,s=512,c=0;if("boss"!==this.cameraMode&&"rocket"!==this.cameraMode&&e.args.modeTime>0&&(e.args.falling||1!==e.args.mode?e.args.falling||3!==e.args.mode||(s=e.args.gSpeedMax,c=-e.args.gSpeed/12):(s=e.args.gSpeedMax,c=e.args.gSpeed/12),e.args.rolling&&(c/=4),e.args.falling&&e.args.ySpeed>0&&((i||n)&&(c=e.args.ySpeed),e.args.ySpeed>0?a+=e.args.ySpeed>24?.5:0:a+=e.args.deepJump||e.args.ySpeed<-24?-.5:0),e.args.hangingFrom&&(c=e.args.ySpeed),a+=c/s,e.args.hangingFrom&&(a+=.2)),e.args.climbing&&(a=-.33*Math.sign(e.args.gSpeed)*(Math.max(4,Math.abs(e.args.gSpeed))/4)*(1===e.args.mode?-1:1)),this.args.yOffsetTarget+=r+e.args.cameraBias-a,0===e.args.mode&&Math.abs(e.args.groundAngle- -Math.PI/4)<.001&&(this.args.yOffsetTarget-=.25),t){const e=this.args.xOffsetTarget-this.args.xOffset,r=this.args.yOffsetTarget-this.args.yOffset;this.args.xOffset+=e/t,this.args.yOffset+=r/t}else this.args.xOffset=this.args.xOffsetTarget,this.args.yOffset=this.args.yOffsetTarget;const l=e.rotatePoint(0,-e.args.height/2);e.cofocused?(e.cofocusPoint||(e.cofocusPoint={}),e.cofocusPoint.x=.5*(e.args.x+e.cofocused.args.x),e.cofocusPoint.y=.5*(e.args.y+e.cofocused.args.y)):e.cofocusPoint=null;const u=l[0]+(e.cofocused?-e.cofocusPoint.x:-e.args.x),f=l[1]+(e.cofocused?-e.cofocusPoint.y:-e.args.y),p=u+l[0]+this.args.width*Number(this.args.xOffset),h=f+l[1]+this.args.height*Number(this.args.yOffset),g=this.args.x+-p,d=this.args.y+-h,y=Math.hypot(g,d),b=Math.atan2(d,g),v=this.cameraBound,m=Math.min(v,y),w=Math.abs(m/v),S=m/("panning"===this.cameraMode?6:12);let O=p+m*Math.cos(b),j=h+m*Math.sin(b);w*S>.01&&(O-=w*Math.cos(b)*S,j-=w*Math.sin(b)*S/2);const x=e.screenLock?-(e.screenLock.xMin+0):0;O>x&&!this.meta.wrapX&&(O=x),j>0&&!this.meta.wrapY&&(j=0);const P=this.meta.deathLine||this.tileMap.mapData.height*this.tileMap.mapData.tileheight,k=e.screenLock?-(e.screenLock.xMax-this.args.width):-this.tileMap.mapData.width*this.tileMap.mapData.tilewidth+this.args.width,_=-P+this.args.height;O<k&&!this.meta.wrapX&&(O=k),j<_&&!this.meta.wrapY&&(j=_),this.args.shakeX*=-.95,this.args.shakeY*=-.95,this.args.shakeX=Math.abs(this.args.shakeX)<.1?0:this.args.shakeX,this.args.shakeY=Math.abs(this.args.shakeY)<.1?0:this.args.shakeY,e.args.dead&&!e.args.respawning?this.args.x=O+this.args.shakeX:(this.args.x=O+this.args.shakeX,this.args.y=j+this.args.shakeY)}},{key:"applyMotionBlur",value:function(){if(this.args.frameId%this.settings.frameSkip!=0)return;const t=this.controlActor;if(this.settings.blur&&t&&this.tags.blur){const t=this.args.x-this.xPrev,e=this.args.y-this.yPrev,r=6;let n=Math.pow(Number(t)/r,2),i=Math.pow(Number(e)/r,2);const o=32;n=n<o?n:o,i=i<o?i:o;let a=Math.max(0,.25*Math.hypot(n,i)-1);const s=Math.atan2(e,t);this.args.frozen>0&&(a=0),a>.5?(this.tags.blurAngle.setAttribute("style",`transform:rotate(calc(1rad * ${s}))`),this.tags.blurAngleFg.setAttribute("style",`transform:rotate(calc(1rad * ${s}))`),this.tags.blurAngleCancel.setAttribute("style",`transform:rotate(calc(-1rad * ${s}))`),this.tags.blurAngleCancelFg.setAttribute("style",`transform:rotate(calc(-1rad * ${s}))`),this.tags.blur.setAttribute("stdDeviation",`${a}, 0`)):(this.tags.blurAngle.setAttribute("style","transform:none;"),this.tags.blurAngleFg.setAttribute("style","transform:none;"),this.tags.blurAngleCancel.setAttribute("style","transform:none;"),this.tags.blurAngleCancelFg.setAttribute("style","transform:none;"),this.tags.blur.removeAttribute("stdDeviation")),this.xPrev=this.args.x,this.yPrev=this.args.y}else this.tags.blurAngle.setAttribute("style","transform:none;"),this.tags.blurAngleFg.setAttribute("style","transform:none;"),this.tags.blurAngleCancel.setAttribute("style","transform:none;"),this.tags.blurAngleCancelFg.setAttribute("style","transform:none;"),this.tags.blur.removeAttribute("stdDeviation")}},{key:"updateBackground",value:function(){if(this.args.frameId%this.settings.frameSkip!=0)return;let t=this.controlActor;t&&t.standingOn&&t.standingOn.isVehicle&&(t=this.controlActor.standingOn),this.tags.bgFilters.style({"--x":this.args.x,"--y":this.args.y}),this.args.plot&&(this.args.plot.args.x=Number(this.args.x).toFixed(2),this.args.plot.args.y=Number(this.args.y).toFixed(2)),this.tags.content.style({"--x":this.args.x,"--y":this.args.y,"--xPerspective":this.args.xPerspective,"--outlineWidth":this.settings.outline+"px"});const e=this.args.x<=0?this.args.x%this.args.blockSize:(-this.args.blockSize+this.args.x%this.args.blockSize)%this.args.blockSize,r=this.args.y<=0?this.args.y%this.args.blockSize:(-this.args.blockSize+this.args.y%this.args.blockSize)%this.args.blockSize;this.tags.background.style({transform:`translate( ${e.toFixed(2)}px, ${r.toFixed(2)}px )`}),this.tags.foreground.style({transform:`translate( ${e.toFixed(2)}px, ${r.toFixed(2)}px )`}),this.tags.frame.style({"--width":this.args.width,"--height":this.args.height,"--scale":this.args.scale})}},{key:"updateBackdrops",value:function(){if(this.args.frameId%this.settings.frameSkip!=0)return;for(const t of this.backdrops){const e=bt(t,2)[1];if(!e.view){const t={};let r="";for(const n of e.properties)"backdrop"!==n.name?t[n.name]=n.value:r=n.value;t.width=e.width,t.height=e.height,t.bX=e.x,t.bY=e.y;const n=F.BackdropPalette[r];n&&(e.view=new n(t,this),e.view.render(this.tags.backdrops))}this.args.width,this.args.x,e.x;const r=this.args.height+-this.args.y+-e.y,n=(e.width,this.args.x,e.x,-(-e.height-this.args.y-e.y)),i=this.tileMap?-32*this.tileMap.mapData.width:Math.pow(2,9);this.tileMap?this.tileMap.mapData.height:Math.pow(2,9);e.view&&Object.assign(e.view.args,{x:this.args.x,xOffset:-this.args.x-e.x,xPan:this.args.x+1.5*this.args.xPerspective,xMax:i,y:this.args.y+e.y,yMax:this.args.y+e.y+-e.view.stacked,stacked:-e.view.stacked+"px",frame:this.args.frameId,top:r,bottom:n})}this.tileMap.mapData.tilewidth;const t=this.tileMap.mapData.tileheight,e=this.tileMap.mapData.width,r=this.tileMap.mapData.height;this.tileMap&&this.tileMap.ready.then(()=>{const n=this.tileMap?-e*t:Math.pow(2,9),i=this.tileMap?-r*t:Math.pow(2,9);this.args.backdrop&&Object.assign(this.args.backdrop.args,{x:0,xPan:this.args.x+1.5*this.args.xPerspective,y:this.args.y+this.args.yOffset,xMax:null!==n&&void 0!==n?n:0,yMax:null!==i&&void 0!==i?i:0,frame:this.args.frameId,stacked:-this.args.backdrop.stacked+"px"})})}},{key:"spawnFromDef",value:function(t){const e=t.type||t.class||t.name;if(t.id>this.maxObjectId&&(this.maxObjectId=t.id),"particle"===e){const e=new y.Particle3d;e.style({"--x":t.x,"--y":t.y}),this.particles.add(e.node)}if("backdrop"===e)return void this.backdrops.set(t.id,t);if(!L.ObjectPalette[e])return;const r=L.ObjectPalette[e].fromDef(t);r[Mt]=this[Mt],r[n.Bindable.NoGetters]=!0;const i=n.Bindable.make(r);return i.oid=t.oid||t.id,i.name=i.name||t.name,i.startFrame=this.args.frameId||0,this.actors.add(i),i}},{key:"spawnInitialObjects",value:function(t,e){const r=new Set;for(let n in t){this.defsByName.set(t[n].name,t[n]),this.objDefs.set(t[n].id,t[n]);const i=this.spawnFromDef(t[n]);i&&(i.mapUrl=e,r.add(i),this.actorsByMap.has(e)||this.actorsByMap.set(e,Object.create(null)),this.actorsByMap.get(e)[i.oid]=i)}if(this.defsByName.has("player-start")&&!this.args.started){const t=this.defsByName.get("player-start");this.args.x=-t.x,this.args.y=-t.y}for(const t of this.actors.items())if(r.has(t)){for(const e in t.others)t.others[e]=this.actorsById[t.others[e]];if(t.objDef&&t.objDef.properties)for(const e of t.objDef.properties)"object"===e.type&&(t.otherDefs[e.name]=this.objDefs.get(e.value));this.actorIsOnScreen(t)?(t.args.display=t.defaultDisplay||null,t.render(this.tags.actors)):(t.args.display="none",t.render(),t.detach()),(t.onAttach&&!1===t.onAttach()||t.args.hidden)&&(t.args.display="none",t.detach()),t.controllable&&(t.args.display=t.defaultDisplay||null)}for(const t of this.actors.items())t.initialize&&t.initialize(),t.vizi=!1;this.args.started||(this.args.started=!0,this.update(),this.args.started=!1)}},{key:"appendMap",value:function(t,e,r){return this.maps.set(t,{x:e,y:r}),this.args.loadingMap=!0,this.tileMap.preloadMap(t).then(n=>{const i=r+n.height;if(i>this.tileMap.mapData.height){const t=i-this.tileMap.mapData.height;this.tileMap.resize(this.tileMap.mapData.width,i),this.offsetMap(0,t),r=0}return this.tileMap.append(t,e,r,this.maxObjectId)}).then(n=>{let i=n.defs,o=n.data;this.currentMap=t;const a=this.getZoneState();this.controlActor.args.emblems.splice(0);const s=this.maxObjectId;let c=0;for(const t of i)if(t.oid=t.id,t.id+=s,t.x+=e*this.tileMap.mapData.tilewidth,t.y+=r*this.tileMap.mapData.tileheight,c=Math.max(c,t.id),t.properties)for(const e of t.properties)"object"===e.type&&(e.value+=s);const l=Object.create(null);[...i].forEach(t=>l[t.oid]=t),this.defsByMap.set(this.currentMap,l),this.maxObjectId=c;for(const t of Object.values(o.properties)){const e=t.name.replace(/-/g,"_");this.meta[e]=t.value}const u=this.spawnInitialObjects(i,t),f=this.defsByName.get("player-start");f&&this.storeCheckpoint(this.controlActor.args.canonical,f.oid||f.args.id);for(const e of a.emblems){const r=this.actorsByMap.get(this.currentMap)[e];r&&r.mapUrl===t&&(r.existing="existing",this.controlActor&&!this.controlActor.args.emblems.includes(r)&&this.controlActor.args.emblems.push(r))}return u}).finally(()=>this.args.loadingMap=!1)}},{key:"offsetMap",value:function(t,e){for(const r of this.actors.items())r.args.x+=t*this.tileMap.blockSize,r.args.y+=e*this.tileMap.blockSize,this.setColCell(r);this.args.x-=t*this.tileMap.blockSize,this.args.y-=e*this.tileMap.blockSize,this.meta.deathLine&&(this.meta.deathLine+=e*this.tileMap.blockSize),this.tileMap.offset(t,e)}},{key:"populateMap",value:function(){if(this.args.populated)return;const t=32*this.tileMap.mapData.width+64,e=32*this.tileMap.mapData.height+64;this.args.populated=!0,this.defsByName=new Map,this.objDefs=new Map;for(const t of this.backdrops){var r=bt(t,2);const e=r[0],n=r[1];n.view&&(n.view.remove(),n.view=void 0),this.backdrops.delete(e)}for(const t of Object.entries(this.particles.list))t&&this.particles.remove(t);const n=String(this.args.selectedChar||s.Router.query.char||"Sonic").toLowerCase(),i=new(L.ObjectPalette[n]||rt.Sonic)({name:n},this);for(const t of this.defsByMap){var o=bt(t,2);const e=o[0],r=o[1];this.spawnInitialObjects(r,e)}if(!this.args.networked){var a;let r="player-start";!i.canRoll&&this.defsByName.has("wide-player-start")&&(r="wide-player-start");const n=this.defsByName.get(r);i.args.x=n?n.x:t/2,i.args.y=n?n.y:e/2,i.args.z=n&&null!==(a=n.z)&&void 0!==a?a:10,i.args.animation="dropping";const o=String(this.args.followerChar||s.Router.query.follower||"").toLowerCase();if(o){const t=new(L.ObjectPalette[o]||nt.Tails)({following:!0,name:o,x:i.args.x,y:i.args.y,z:i.args.z-1},this);this.spawn.add({object:t}),this.auras.add(t),this.actors.add(t),i.follower=t}if(this.spawn.add({object:i}),this.auras.add(i),this.actors.add(i),n&&n.properties)for(const t of n.properties)i.args[t.name]=t.value;this.nextControl=i}if(this.onFrameOut(1,()=>{i.follower&&(i.follower.args.x=i.args.x,i.follower.args.y=i.args.y)}),!this.replayStart)for(const t of Object.entries(this.actors.list)){var c=bt(t,2);c[0];const e=c[1];if(!e||e.args.npc)continue;if(!e.controllable)continue;const r=this.getCheckpoint(e.args.canonical);if(r&&r.checkpointId){const t=this.defsByMap.get(this.currentMap)[r.checkpointId],n=this.actorsByMap.get(this.currentMap)[r.checkpointId];t&&(e.args.x=t.x,e.args.y=t.y),n&&(n.args.active=!0)}}}},{key:"actorIsOnScreen",value:function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:512;if(!t)return;const r=this.args.width,n=this.args.height,i=-this.args.x-16-e,o=16-this.args.x+e+r,a=-this.args.y-e,s=-this.args.y+n+.5*e,c=t.args.width,l=t.args.y-t.args.height,u=t.args.x-(t.isRegion?0:c/2);return!(i>t.args.x+(t.isRegion?c:c/2)||u>o)&&!(a>t.args.y||l>s)}},{key:"spawnActors",value:function(){const t=new DocumentFragment;new DocumentFragment;let e=!1;for(const r of this.spawn)if(r.frame){if(r.frame<=this.args.frameId){this.spawn.delete(r),r.object[n.Bindable.NoGetters]=!0,r.object[Mt]=this[Mt],r.object.startFrame=this.args.frameId||0,r.object.args.id=++this.maxObjectId,this.actors.add(n.Bindable.make(r.object));r.object,A.Region;const i=t;r.object.render(i),r.object.onRendered(),r.object.onAttach&&!1===r.object.onAttach()&&(r.object.args.hidden||r.object.detach()),this.setColCell(r.object),e=!0,r.object.initialize&&r.object.initialize()}}else this.spawn.delete(r),r.object[n.Bindable.NoGetters]=!0,r.object[Mt]=this[Mt],r.object.startFrame=this.args.frameId||0,r.object.args.id=++this.maxObjectId,this.actors.add(n.Bindable.make(r.object)),r.object.render(t),r.object.onRendered(),r.object.onAttached&&r.object.onAttached(),r.object.onAttach&&!1===r.object.onAttach()&&r.object.detach(),e=!0,r.object.initialize&&r.object.initialize();e&&this.tags.actors.append(t)}},{key:"actorUpdateStart",value:function(t){this.updateStarted.has(t)||(this.updateStarted.add(t),t.updateStart(),t.colliding&&(t.colliding=!1),t.moved=!1)}},{key:"actorUpdate",value:function(t){this.updated.has(t)||(this.updated.add(t),t.update())}},{key:"actorUpdateEnd",value:function(t){this.updateEnded.has(t)||(this.updateEnded.add(t),t.args.colliding=t.colliding,t.updateEnd(),t.moved&&!t.removed&&this.setColCell(t))}},{key:"nearbyActors",value:function(t,e){let r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const n=this.getNearbyColCells(t,e),i=new Set;for(const t of n)for(const e of t)r&&!e.isRegion||i.add(e);return i}},{key:"update",value:function(){const t=this.args.frameId-this.args.startFrameId;if(this.zoneScript&&this.args.started&&!1===this.args.paused&&this.zoneScript.update(t,this),this.args.started&&this.meta.bgm&&t===(this.meta.bgm_delay||1)&&p.Bgm.play(this.meta.bgm,{loop:!0}),this.socket&&this.args.frameId%120==0&&this.socket.publish("keepalive",""),this.args.loadingMap)return;this.args.paused>0&&this.args.paused--,this.args.frozen>0&&this.args.frozen--,this.tallyBoard&&!this.args.paused&&(this.tallyBoard.update(this),this.args.score.args.value=String(this.controlActor.args.score).padStart(4," "),this.tallyBoard.done||(this.args.frozen=1));const e=this.controlActor?this.controlActor.controller:this.controller;for(const t in e.buttons)e.buttonIsMapped(t)||e.buttons[t].active&&1===e.buttons[t].time&&(this.debugSeq.check(`Button${t}`),this.konamiSeqA.check(`Button${t}`),this.konamiSeqB.check(`Button${t}`));if(this.args.frameId%600==0&&(ga("set","metric1",this.args.frameId/60),"function"==typeof ga&&dt.Analytic.report({eventCategory:"fps-check",eventAction:`fps-check::${navigator.platform}::cores_${navigator.hardwareConcurrency}`,eventLabel:`${this.args.actName}`,eventValue:Math.trunc(this.args.fps),Value:Math.trunc(this.args.fps)})),this.args.started||(this.startTime=Date.now(),e&&(this.takeInput(e),this.args.titlecard&&this.args.titlecard.input(e))),!1!==this.args.paused&&(this.takeInput(e),this.args.pauseMenu.input(e)),!1===this.args.paused||this.args.paused>0||this.args.networked){this.callFrameOuts(),this.callRenderedFrameOut(),this.callFrameIntervals();for(const t of this.timers){var r=bt(t,2);r[0];r[1].update()}this.args.lastFrameId=this.args.frameId,this.args.cutScene?(this.args.startFrameId++,this.args.showHud=!1):this.settings.showHud&&(this.args.showHud=!0),this.args.debugEditMode||this.args.frameId++,this.args.debugOsd&&(this.args.frame.args.value=this.args.frameId)}if(!this.args.networked&&this.args.started&&!1!==this.args.paused&&this.args.paused<=0)return;if(!this.args.networked&&this.args.frozen>0)return this.args.startFrameId++,void(this.args.blur=0);if(!this.args.started&&this.args.frameId>0)return;this.tileMap&&this.tileMap.mapData&&this.updateBackdrops();for(const t of this.willDetach){var n=bt(t,2);const e=n[0],r=n[1];this.willDetach.delete(e),r()}Number(this.args.rings.args.value)?this.args.ringLabel.args.color="yellow":this.args.ringLabel.args.color="red-alert",this.args.fpsSprite.args.value=Number(this.args.fps).toFixed(0).padStart(2,"0");const i=(this.args.frameId-this.args.actStartFrameId)/60;let o=String(Math.trunc(Math.abs(i)/60)).padStart(2,"0"),a=String(Math.trunc(Math.abs(i)%60)).padStart(2,"0");const s=i<0?"-":"";if(s&&(o=Number(o)),this.args.timer.args.value=`${s}${o}:${a}`,this.dontSwitch>0&&this.dontSwitch--,this.dontSwitch<0&&(this.dontSwitch=0),this.args.rippleFrame=this.args.frameId%128,this.args.displaceWater=this.args.frameId%128,this[kt].clear(),this.args.isReplaying||this.args.isRecording||(this.args.demoIndicator=null),this.updateBackground(),this.controlActor)if(this.args.isReplaying){c.Keyboard.get().getKeyCode("NumpadAdd")>0&&(this.focus(),this.args.paused=1,this.args.pauseMenu.args.hideMenu="pause-menu-hide"),this.args.demoIndicator||(this.args.demoIndicator=new B.CharacterString({value:"▶ PLAY",color:"green"})),this.onFrameOut(60,()=>{this.args.focusMe.args.hide&&(this.args.focusMe.args.hide="hide hidden")});const t=this.args.frameId-this.args.startFrameId;if(t<this.maxReplayFrame){const e=this.controlActor;if(this.lastInput=this.lastInput||{},this.lastInput.axes=this.lastInput.axes||{},this.lastInput.buttons=this.lastInput.buttons||{},this.replayFrames.has(t)){const r=bt(this.replayFrames.get(t),3),n={frame:r[0],input:r[1],args:r[2]};if(n.args)for(const t in n.args)Object.assign(e.args,n.args[t]),e.args.ignore=0,e.args.respawning=!1,e.args.dead=!1,e.noClip=!1;n.input&&n.input.buttons&&delete n.input.buttons[9],n.input?(Object.assign(this.lastInput.axes,n.input.axes||{}),Object.assign(this.lastInput.buttons,n.input.buttons||{}),e.controller.replay(this.lastInput),e.readInput()):(e.controller.replay(this.lastInput),e.readInput())}else e.controller.replay(this.lastInput),e.readInput();this.args.hasRecording=!0,this.args.replayBanners&&this.args.frameId-this.args.startFrameId<5&&(this.args.topLine.args.hide="hide hidden",this.args.status.args.hide="hide hidden",this.args.focusMe.args.hide="hide hidden",this.onTimeout(1,()=>{}))}else this.args.topLine.args.hide="hide hidden",this.args.status.args.hide="hide hidden",this.replayFrames=new Map,this.replayOffset=0,this.replayStart=null,this.args.isReplaying=!1,this.args._isRecording=!1,this.onFrameOut(30,()=>this.quit(this.args.replayQuickExit?2:1))}else this.gamepad&&(this.args.focusMe.args.hide="hide hidden"),this.controlActor.controller&&this.takeInput(this.controlActor.controller),this.args.cutScene||this.controlActor.readInput();this.controlActor&&this.controlActor.args.respawning&&!this.args.isReplaying&&(this.replay=null),!this.args.isReplaying&&this.controlActor&&this.controlActor.args.dead&&this.onFrameOut(30,()=>{this.replayFrames.size&&(this.saveReplay("#804000").catch(()=>{}),this.replayFrames=new Map)}),this.collisionCache=new Map,this.collisions=new Map,this.updateStarted.clear(),this.updated.clear(),this.updateEnded.clear(),this.controlActor&&this.controlActor.setCameraMode();const l=new Map,u=[...this.args.layers,...this.args.fgLayers];for(let t=u.length;t>0;t--){const e=u[t-1];e.x=this.args.x,e.y=this.args.y,e.update(this.tileMap,l)}for(let t=u.length;t>0;t--){u[t-1].move()}if(this.args.running&&!this.args.debugEditMode){const t=new Set;for(const e of this.regions)this.actorIsOnScreen(e,768)&&t.add(e);for(const e of this.auras){if(!e||e.removed){this.auras.delete(e);continue}e!==this.controlActor&&t.add(e);const r=this.nearbyActors(e.args.x,e.args.y);for(const e of r)e===this.controlActor||e.removed||t.add(e)}for(const e of t)e[Mt]!==this[Mt]||e.removed||this.actorUpdateStart(e);this.controlActor&&this.controlActor[Mt]===this[Mt]&&this.actorUpdateStart(this.controlActor);for(const e of t)e[Mt]!==this[Mt]||e.removed||this.actorUpdate(e);this.controlActor&&this.controlActor[Mt]===this[Mt]&&this.actorUpdate(this.controlActor);for(const e of t)e[Mt]!==this[Mt]||e.removed||this.actorUpdateEnd(e);this.controlActor&&this.controlActor[Mt]===this[Mt]&&this.actorUpdateEnd(this.controlActor);for(const e of t)e.moved&&!e.removed&&e[Mt]===this[Mt]&&this.setColCell(e);if(this.controlActor&&this.controlActor[Mt]===this[Mt]&&this.setColCell(this.controlActor),this.collisions)for(const t of this.collisions){var f=bt(t,2);f[0];const e=f[1];for(const t of e){var h=bt(t,2);const e=h[0];h[1];e&&e.pause(!1)}}if(this.controlActor&&(this.args.score.args.value=String(this.controlActor.args.score).padStart(4," "),this.args.rings.args.value=String(this.controlActor.args.rings).padStart(4," "),this.args.emblems=this.controlActor.args.emblems,this.args.hasRings=!!this.controlActor.args.rings,this.args.hasEmeralds=!!this.controlActor.args.emeralds,this.args.char.args.value=this.controlActor.args.name,this.args.charName=this.controlActor.args.name,this.args.debugOsd)){this.args.xPos.args.value=Number(this.controlActor.args.x).toFixed(3),this.args.yPos.args.value=Number(this.controlActor.args.y).toFixed(3),this.args.layer.args.value=Number(this.controlActor.args.layer),this.args.ground.args.value=this.controlActor.args.landed,this.args.gSpeed.args.value=Number(this.controlActor.args.gSpeed).toFixed(3),this.args.xSpeed.args.value=Number(this.controlActor.args.xSpeed).toFixed(3),this.args.ySpeed.args.value=Number(this.controlActor.args.ySpeed).toFixed(3),this.args.angle.args.value=(Math.round(1e3*this.controlActor.args.groundAngle)/1e3).toFixed(3),this.args.airAngle.args.value=(Math.round(1e3*this.controlActor.args.airAngle)/1e3).toFixed(3),this.args.actorCount.args.value=this.actors.size,this.args.regionCount.args.value=this.regions.size,this.args.ignore.args.value=this.controlActor.args.ignore;const t=["FLOOR (0)","L-WALL (1)","CEILING (2)","R-WALL (3)"];this.args.mode.args.value=t[Math.floor(this.controlActor.args.mode)]||Math.floor(this.controlActor.args.mode),this.args.cameraMode.args.value=this.controlActor.args.cameraMode}}else this.args.running&&this.args.debugEditMode&&this.controlActor&&(this.controlActor.args.x+=4*e.axes[0].magnitude,this.controlActor.args.y+=4*e.axes[1].magnitude,this.controlActor.args.respawning=!1,this.controlActor.args.dead=!1,this.controlActor.noClip=!1,this.controlActor.args.xSpeed=0,this.controlActor.args.ySpeed=0,this.controlActor.args.gSpeed=0);const g=this.args.width,d=this.args.height,y=(this.args.x,this.args.x,this.args.y,this.args.y,new WeakSet);if(this.controlActor){const t=new DocumentFragment,e=new DocumentFragment;let r=!1,n=!1,i=this.controlActor;this.controlActor.focused&&(i=this.controlActor.focused);const o=this.nearbyActors(i.args.x,i.args.y)||[],a=this.nearbyActors(i.args.x,i.args.y,!0)||[];for(const e of[o,a])for(const n of e){if(n[Mt]!==this[Mt])continue;n.args.hidden||n.nodes.length||n.render(this.tags.actors),!this.actorIsOnScreen(n)||n instanceof C.LayerSwitch||(n.args.display=n.defaultDisplay||null,n.vizi||(n.nodes.length||n.onAttach&&!1===n.onAttach()&&n.detach(),n.args.hidden||(A.Region,n.nodes.map(e=>t.append(e)),r=!0),n.wakeUp()),this.willDetach.delete(n),this.visible.add(n),n.args.hidden||(n.vizi=!0)),y.add(n),this.recent.add(n)}for(const t of new Set([...this.recent,...this.visible])){if(t.removed){this.visible.delete(t),this.recent.delete(t);continue}if(t[Mt]!==this[Mt]){this.recent.delete(t);continue}const e=!t.args.hidden&&this.actorIsOnScreen(t);t.vizi&&!e&&(this.willDetach.set(t,()=>{t.sleep(),t.args.display="none",t.detach(),this.visible.delete(t),t.vizi=!1,t.willhide=null,this.willDetach.delete(t)}),this.recent.delete(t))}r&&this.tags.actors.append(t),n&&this.tags.actors.append(e)}if(this.nextControl&&(!this.args.networked&&this.auras.clear(),this.controlActor&&this.controlActor.sprite&&this.controlActor.sprite.parentNode&&this.controlActor.sprite.parentNode.classList.remove("actor-selected"),this.controlActor&&(this.controlActor.args.selected=!1),this.controlActor=this.nextControl,this.controlActor.args.selected=!0,this.auras.add(this.controlActor),this.controlActor.args.display=this.controlActor.defaultDisplay||null,this.controlActor.nodes.map(t=>this.tags.actors.append(t)),this.visible.add(this.controlActor),this.controlActor.vizi=!0,this.args.maxSpeed=null,this.nextControl=null),this.updated.forEach(t=>{if(t.args.standingLayer){const e=t.args.standingLayer.offsetXChanged;if(e){const r=t.bMap("scanForward",e).get(ut.Platformer);t.args.x+=!1===r?e||0:r*Math.sign(e)}t.args.y+=t.args.standingLayer.offsetYChanged||0}}),this.controlActor){this.moveCamera(),this.applyMotionBlur(),this.args.popTopLine=this.args.popTopLine||this.getUnusedCharString({color:"yellow"}),this.args.popBottomLine=this.args.popBottomLine||this.getUnusedCharString({color:"yellow"});let t=0,e=0,r=this.controlActor.args.popChain.length>1,n=0;if(this.controlActor.args.popChain.length){this.controlActor.args.popChain[0].special&&(r=!0),n=this.controlActor.args.popChain.length;const i=Math.max(0,n-4);if(!n)for(const t of this.args.combo)this.pooledCharStringDetached(t.label);let o=!1;for(let r=0;r<n;r++){const n=this.controlActor.args.popChain[r];t+=n.multiplier,e+=n.points;const a=r+-i;r>=i?(this.args.combo[a]=this.args.combo[a]||{label:this.getUnusedCharString(),score:null,index:r},this.args.combo[a].label=this.args.combo[a].label||this.getUnusedCharString(),this.args.combo[a].index!==r&&(o=!0),this.args.combo[a].label.args.value=String(n.label).replace(/-/g," "),this.args.combo[a].index=r,n.color?this.args.combo[a].label.args.color=n.color:n.multiplier>1?this.args.combo[a].label.args.color="orange":this.args.combo[a].label.args.color="white"):r<i&&this.args.combo[a]&&this.pooledCharStringDetached(this.args.combo[a].label)}if(o){const t=this.args.combo[this.args.combo.length+-1];t.label.args.classes="pulse",this.onFrameOut(1,()=>t.label.args.classes="")}this.args.combo.length=Math.min(4,Math.max(0,-i+this.controlActor.args.popChain.length))}else{for(const t of this.args.combo)this.pooledCharStringDetached(t.label);this.args.combo.length=0}this.args.popTopLine.args.value=e+" x "+t,this.args.popBottomLine.args.value=n>4?"+"+(n-4):"",this.args.showCombo=r}if(this.args.networked&&this.controlActor){const t={frame:this.serializePlayer()};1===this.args.playerId?this.server.send(JSON.stringify(t)):2===this.args.playerId&&this.client.send(JSON.stringify(t))}this.socket&&this.args.publishTime<=0?(this.packPlayerFrame().arrayBuffer().then(t=>this.socket.publish(0,t)),this.args.publishTime=10):this.args.publishTime--,this.spawnActors(),this.controlActor&&this.controlActor.isSuper&&!this.controlActor.isHyper&&this.controlActor.args.rings&&this.controlActor.args.minRingsHyper&&this.controlActor.args.rings>=this.controlActor.args.minRingsHyper?this.args.prompt.args.value="❸ ℍ ":this.controlActor&&!this.controlActor.isSuper&&!this.controlActor.isHyper&&this.controlActor.args.rings&&this.controlActor.args.minRingsSuper&&this.controlActor.args.rings>=this.controlActor.args.minRingsSuper?this.args.prompt.args.value="❸ 𝕊 ":this.args.prompt.args.value="",this.args.fps<30?this.settings.frameSkip=3:this.args.fps<20?this.settings.frameSkip=2:this.settings.frameSkip=1;for(const t in this.mouseState.buttons)this.mouseState.buttons[t]&&this.mouseState.buttons[t]++}},{key:"populateCharStringPool",value:function(){if(!this.charStringPool){this.charStringPool=new Set,this.charStringOpen=new Set;for(let t=0;t<30;t++){const t=n.Bindable.make(new B.CharacterString({value:" ".repeat(10)}));t.preserve=!0,this.charStringPool.add(t),this.charStringOpen.add(t)}}}},{key:"getUnusedCharString",value:function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.populateCharStringPool();for(const e of this.charStringOpen)return this.charStringOpen.delete(e),Object.assign(e.args,t),t.value||(e.args.value=""),e}},{key:"pooledCharStringDetached",value:function(t){this.charStringOpen.add(t)}},{key:"resetCharStringPool",value:function(){this.populateCharStringPool();for(const t of this.charStringPool)this.charStringOpen.add(t)}},{key:"click",value:function(t){this.args.isReplaying&&(this.controlActor&&this.controlActor.controller.zero(),this.stop(),this.args.topLine.args.hide="hide hidden",this.args.status.args.hide="hide hidden",this.quit(this.args.replayQuickExit?2:1))}},{key:"regionsAtPoint",value:function(t,e){var r;let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;const i=new Set;n=null!==(r=n)&&void 0!==r?r:this.nearbyActors(t,e,!0);for(const r of n){if(!r.isRegion)continue;if(r[Mt]!==this[Mt]){this.regions.delete(r);continue}const n=r.args,o=n.x,a=n.y,s=n.width,c=n.height;Math.floor(s/2);t>=o&&o+s>t&&a>=e&&e>a-c&&i.add(r)}return i}},{key:"actorsAtPoint",value:function(t,e){var r;let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{ghosts:!1,nearbyActors:null};const a=null!==(r=o.nearbyActors)&&void 0!==r?r:this.nearbyActors(t,e);if(!a.size)return[];const s=new Set;for(const r of a){if(!o.ghosts&&r.isGhost)continue;const a=Math.max(Math.floor(n/2),0),c=r.isRegion,l=t-a,u=t+a,f=r.args,p=f.x,h=f.width,g=h/2;if(u<p-(c?0:g)||p+(c?h:g)<l)continue;const d=e-Math.max(i,0),y=e,b=f.y,v=f.height;b<d||y<b-v||s.add(r)}return Array.from(s.values())}},{key:"actorsAtLine",value:function(t,e,r,n){const i=new Set,o=Math.floor(t/this.colCellDiv),a=Math.floor(e/this.colCellDiv),s=Math.floor(r/this.colCellDiv),c=Math.floor(n/this.colCellDiv);for(let t=0;t<3+Math.abs(o+-s);t++)for(let e=0;e<3+Math.abs(a+-c);e++){const r=t+Math.min(o,s)+-1+":"+(e+Math.min(a,c)+-1);if(this.colCells.has(r))for(const t of this.colCells.get(r))i.add(t)}const l=new Map;for(const o of i){if(o.isGhost)continue;const i=this.actorIntersectsLine(o,t,e,r,n);if(!i)continue;const a=Math.hypot(t-i[0],e-i[1]);l.set(o,{intersection:i,distance:a})}return new Map(Array.from(l.entries()).sort((t,e)=>t[1].distance-e[1].distance))}},{key:"lineIntersectsLine",value:function(t,e,r,n,i,o,a,s){const c=r-t,l=n-e,u=a-i,f=s-o,p=c*f-l*u;if(0===p)return!1;const h=i-t,g=o-e,d=(h*l-g*c)/p;if(d<0||d>1)return!1;const y=(h*f-g*u)/p;return!(y<0||y>1)&&[t+y*c,e+y*l]}},{key:"actorIntersectsLine",value:function(t,e,r,n,i){const o=t.args,a=o.width,s=o.height,c=o.y,l=c-s,u=o.x-(t.isRegion?0:.5*a);if(u<e&&e<u+a&&l<r&&r<c)return[e,r];const f=t.getBoundingLines();let p,h=1/0;for(const t of f){const o=this.lineIntersectsLine(t[0],t[1],t[2],t[3],e,r,n,i);if(!o)continue;const a=Math.hypot(e-o[0],r-o[1]);a<h&&(h=a,p=o)}return p}},{key:"padConnected",value:function(t){this.gamepad=t.gamepad,console.log(this.gamepad);const e=String(this.gamepad.id).replace(/\(.\)/," ").replace(/\s?\(.+/,"");this.showStatus(2500," Gamepad connected: "+e+" "),this.args.focusMe.args.hide="hide",this.interact(),"function"==typeof ga&&dt.Analytic.report({eventCategory:"gamepad",eventAction:"connected",eventLabel:t.gamepad.id})}},{key:"padRemoved",value:function(t){if(!this.gamepad)return;const e=String(this.gamepad.id).replace(/\(.\)/," ").replace(/\s?\(.+/,"");this.showStatus(2500," Gamepad disconnected: "+e+" "),this.args.started&&this.pauseGame(),this.gamepad.index===t.gamepad.index&&(this.gamepad=null),"function"==typeof ga&&dt.Analytic.report({eventCategory:"gamepad",eventAction:"disconnected",eventLabel:t.gamepad.id})}},{key:"getColCell",value:function(t){const e=this.colCellDiv,r=this.colCells,n=`${Math.floor(t.x/e)}:${Math.floor(t.y/e)}`;if(!r.has(n)){const t=new Set;return r.set(n,t),t.name=n,t}return r.get(n)}},{key:"getColCells",value:function(t){const e=this.colCellDiv,r=t.args.y-t.args.height,n=t.args.width,i=t.args.x-(t.isRegion?0:n/2),o=t.args.x+(t.isRegion?n:n/2),a=-1+Math.floor(i/e),s=Math.ceil(o/e),c=-1+Math.floor(r/e),l=Math.ceil(t.args.y/e),u=new Set;for(let r=a;r<=s;r++)for(let n=c;n<=l;n++){const i=this.getColCell({x:r*e,y:n*e});i.add(t),u.add(i)}return u}},{key:"actorsInCells",value:function(t){const e=new Set;for(const r of t)for(const t of r)e.add(t);return e}},{key:"setColCell",value:function(t){if(t.removed)return;n.Bindable.isBindable(t)||console.log(t),t[n.Bindable.NoGetters]=!0,t=n.Bindable.make(t);const e=this.getColCell(t.args);if(t[Rt]&&t[Rt]!==e&&t[Rt].delete(t),e.add(t),t[Rt]=e,!t.isRegion)return e;const r=t[_t];if(t[_t]=this.getColCells(t),r)for(const e of r)t[_t].has(e)||e.delete(t);return e}},{key:"getNearbyColCells",value:function(t,e){const r=this.colCellDiv,n=`${Math.floor(t/r)}::${Math.floor(e/r)}`;let i=this.colCellCache.get(n);if(i)return i;const o=t-r,a=t,s=t+r,c=e-r,l=e,u=e+r;return this.colCellCache.set(n,i=[this.getColCell({x:o,y:c}),this.getColCell({x:o,y:l}),this.getColCell({x:o,y:u}),this.getColCell({x:a,y:c}),this.getColCell({x:a,y:l}),this.getColCell({x:a,y:u}),this.getColCell({x:s,y:c}),this.getColCell({x:s,y:l}),this.getColCell({x:s,y:u})]),i}},{key:"screenFilter",value:function(t){this.args.screenFilter=t}},{key:"reset",value:function(){if(console.clear(),this[Mt]++,this.stop(),this.args.currentSheild=null,this.args.hasFire=!1,this.args.hasWater=!1,this.args.hasElectric=!1,this.args.hasNormal=!1,this.clearDialog(),this.hideDialog(),this.replayFrames=new Map,this.visible.clear(),this.callFrames.clear(),this.callIntervals.clear(),this.collisionCache.clear(),this.collisions.clear(),this.colCellCache.clear(),this.colCells.clear(),this.regions.clear(),this.spawn.clear(),this.auras.clear(),this.updateStarted.clear(),this.updateEnded.clear(),this.updated.clear(),this[kt].clear(),this.objectDb=new Q.Classifier(Object.values(L.ObjectPalette)),this.args.actClear=!1,this.args.cutScene=!1,this.args.fade=!1,this.onFrameOut(30,()=>this.args.fade="hide"),this.args.xOffset=.5,this.args.yOffset=.5,this.args.screenEffects=new i.Bag,this.tileMap){this.tileMap.unreplace();const t=this.tileMap.tileLayers;for(const e of t)e.offsetX=0,e.offsetY=0,e.offsetXChanged=0,e.offsetYChanged=0;for(const t of[...this.args.layers,...this.args.fgLayers])t.args.destroyed=!1,t.args.offsetX=0,t.args.offsetY=0,t.args.offsetXChanged=0,t.args.offsetYChanged=0}for(const t of this.actors.items())this.actors.remove(t);this.controlActor&&this.actors.remove(this.controlActor),this.nextControl=null,this.actorsById={};for(const e of Object.entries(this.effects.list)){var t=bt(e,2);t[0];const r=t[1];r&&this.effects.remove(r)}for(const t of Object.entries(this.particles.list)){var e=bt(t,2);e[0];const r=e[1];r&&this.particles.remove(r)}this.spawn.clear(),this[kt].clear(),this.args.isRecording=!1,this.args.isReplaying=!1,this.args.populated=!1,this.controlActor=null,this.tags.viewport.focus(),this.args.paused=!0}},{key:"quit",value:function(){let t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.replay||this.levelFinished||this.saveReplay("#FFF").catch(()=>{}),this.baseMap=this.currentMap=null,this.args.networked&&(this.server&&this.server.close(),this.client&&this.client.close(),this.actors.remove(this.remotePlayer),this.actors.remove(this.controlActor),this.controlActor=this.remotePlayer=null),this.args.fade=!0===this.args.fade&&this.args.fade,this.onNextFrame(()=>this.args.fade=!0),this.onFrameOut(45,()=>{this.args.actClear=!1,this.args.cutScene=!1,this.args.screenEffects=new i.Bag,this.callFrames.clear(),this.callIntervals.clear(),this.collisionCache.clear(),this.collisions.clear(),this.colCellCache.clear(),this.colCells.clear(),this.regions.clear(),this.spawn.clear(),this.auras.clear(),this.replayFrames=new Map,this.replayOffset=0,this.replayStart=null,this.replay=null,this.args.timeBonus.args.value=0,this.args.ringBonus.args.value=0,this.args.speedBonus.args.value=0,this.args.totalBonus.args.value=0,this.defsByMap.clear(),this.actorsByMap.clear(),this.meta={},this.willDetach.clear(),this.objectDb.clear(),this.args.currentSheild=null,this.args.hasFire=!1,this.args.hasWater=!1,this.args.hasElectric=!1,this.args.hasNormal=!1,this.args.isRecording=!1,this.args.isReplaying=!1,this.playableIterator=!1,this.args.populated=!1,this.args.paused=!1,this.args.started=!1,this.controlActor=null,this.args.frameId=-1,this.args.timer.args.value="",this.args.rings.args.value=0,this.args.hasRings=!1,this.args.hasCoins=!1,this.args.hasEmeralds=!1,this.args.char.args.value="",this.args.charName="",this.args.level=!1;this.args.layers.length;this.recent.clear(),this.visible.clear(),this[kt].clear();for(const t of this.actors.items())this.actors.remove(t);for(const t of this.particles.items())this.particles.remove(t),t.remove();for(const t of[...this.args.layers,...this.args.fgLayers])t.args.destroyed=!1;for(const t of this.args.layers)t.remove();for(const t of this.args.fgLayers)t.remove();this.args.layers.splice(0),this.args.fgLayers.splice(0),this.args.bg=this.args.backdrop=null;for(const t of this.backdrops){var r=bt(t,2);r[0];r[1].view.remove()}if(this.backdrops.clear(),e)this.onFrameOut(15,()=>e());else{const e=[];if(2===t||this.args.networked){const t=new E.MainMenu({timeout:-1},this);this.args.networked&&(t.args.initialPath=["Multiplayer"]),e.push(t)}else t?(p.Bgm.fadeOut(2e3),e.push(...this.homeCards())):(p.Bgm.fadeOut(3e3),e.push(...this.returnHomeCards()));this.onFrameOut(15,()=>{this.args.titlecard=new b.Series({cards:e},this),this.args.titlecard.play()})}}),c.Keyboard.get().reset(),this.controller.zero()}},{key:"introCards",value:function(){return[new w.LoadingCard({timeout:3500,text:"loading"},this),new S.BootCard({timeout:3500}),new k.WarningCard({timeout:8500}),new O.DebianCard({timeout:4500}),new j.WebkitCard({timeout:3500}),new P.NewgroundsCard({timeout:2500}),new _.SaneCard({timeout:4500}),new x.GamepadCard({timeout:2500}),new M.SeanCard({timeout:5e3},this),...this.homeCards()]}},{key:"homeCards",value:function(){return[new v.TitleScreenCard({timeout:51e3},this),new E.MainMenu({timeout:-1},this)]}},{key:"returnHomeCards",value:function(){return[new m.ThankYouCard({timeout:5e3},this),...this.homeCards()]}},{key:"playCards",value:function(){this.args.titlecard.play()}},{key:"record",value:function(){this.args.demoIndicator=null,this.reset(),this.args.frameId=0,this.replayFrames=new Map,this.args.isRecording=!0,this.args.isReplaying=!1,this.args.hasRecording=!0,this.args.paused=!1,this.startLevel()}},{key:"playback",value:function(){this.args.demoIndicator=null,this.args.frameId=0,this.args.isReplaying=!0,this.args.isRecording=!1,this.lastInput={},this.startLevel(),this.args.paused=!1}},{key:"stop",value:function(){if(this.args.isRecording){const t=JSON.stringify(this.replayFrames.entries());localStorage.setItem("replay",t)}this.args.isReplaying=!1,this.args.isRecording=!1,this.args.paused=!1,this.controlActor&&this.controlActor.controller.zero(),this.tags.viewport.focus()}},{key:"focus",value:function(){this.tags.viewport&&this.tags.viewport.focus()}},{key:"getServer",value:function(){let t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(!t&&this.server&&this.server.peerServer&&"new"===this.server.peerServer.connectionState)return this.server;const e={iceServers:[{urls:this.settings.iceServer1},{urls:this.settings.iceServer2}]},r=t||!this.server?new Z.RtcServer(e):this.server||new Z.RtcServer(e);return this.listen(r,"open",t=>{this.args.chatBox=new tt.ChatBox({pipe:r}),this.args.playerId=1},{once:!0}),this.listen(r,"close",t=>{this.actors.remove(this.remotePlayer),this.quit(2)},{once:!0}),this.listen(r,"message",t=>{if(this.remotePlayer){const e=JSON.parse(t.detail),r=this.remotePlayer;e.frame&&(e.frame.frame>this.args.frameId&&(this.args.frameId=e.frame.frame),e.frame.input&&(r.controller.replay(e.frame.input),r.readInput()),e.frame.args&&Object.assign(r.args,e.frame.args),r.noClip=r.args.dead)}}),this.server=r,r}},{key:"getClient",value:function(){let t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(!t&&this.client&&this.client.peerClient&&"new"===this.client.peerClient.connectionState)return this.client;const e={iceServers:[{urls:this.settings.iceServer1},{urls:this.settings.iceServer2}]},r=t||!this.client?new X.RtcClient(e):this.client||new X.RtcClient(e);return this.listen(r,"open",t=>{this.args.chatBox=new tt.ChatBox({pipe:r}),this.args.playerId=2},{once:!0}),this.listen(r,"close",t=>this.quit(2),{once:!0}),this.listen(r,"message",t=>{if(this.remotePlayer){const e=JSON.parse(t.detail),r=this.remotePlayer;e.frame&&(e.frame.frame>this.args.frameId&&(this.args.frameId=e.frame.frame),e.frame.input&&(r.controller.replay(e.frame.input),r.readInput()),e.frame.args&&Object.assign(r.args,e.frame.args),r.noClip=r.args.dead)}}),this.client=r,r}},{key:"serializePlayer",value:function(){if(!this.controlActor||!this.controlActor.controller)return{};const t=this.args.frameId,e=this.controlActor.controller.serialize(),r=this.controlActor.args;return{frame:t,input:e,args:{x:r.x,y:r.y,gSpeed:r.gSpeed,xSpeed:r.xSpeed,ySpeed:r.ySpeed,direction:r.direction,facing:r.facing,falling:r.falling,rolling:r.rolling,jumping:r.jumping,flying:r.flying,float:r.float,angle:r.angle,mode:r.mode,rings:r.rings,groundAngle:r.groundAngle,respawning:r.respawning,dead:!!r.dead}}}},{key:"packPlayerFrame",value:function(){const t=this.controlActor.args,e=new Int8Array(8),r=new Int8Array(16),n=new Int32Array(11),i=new Float32Array(7),o=new Int32Array(1);n[0]=t.direction,n[1]="left"===t.facing?-1:1,n[2]=t.falling,n[3]=t.rolling,n[4]=t.jumping,n[5]=t.flying,n[6]=t.float,n[7]=t.mode,n[8]=t.rings,n[9]=t.respawning,n[10]=Number(t.dead),i[0]=t.x,i[1]=t.y,i[2]=t.gSpeed,i[3]=t.xSpeed,i[4]=t.ySpeed,i[5]=t.angle,i[6]=t.groundAngle,o[0]=this.args.frameId;const a=this.controlActor.controller.serialize(),s=a.axes,c=a.buttons;for(const t in e){var l;e[t]=127*(null!==(l=s[t])&&void 0!==l?l:0)}for(const t in r){var u;r[t]=127*(null!==(u=c[t])&&void 0!==u?u:0)}return new Blob([e.buffer,r.buffer,n.buffer,i.buffer,o.buffer])}},{key:"unpackPlayerFrame",value:function(t){const e=new DataView(t,0),r=new DataView(t,8),n=new DataView(t,24),i=new DataView(t,68),o=new DataView(t,96),a={axes:{},buttons:{}},s={};for(let t=0;t<8;t++)a.axes[t]=e.getInt8(t)/127;for(let t=0;t<16;t++)a.buttons[t]=r.getInt8(t)/127;return s.direction=n.getInt32(0,!0),s.facing=-1===n.getInt32(4,!0)?"left":"right",s.falling=n.getInt32(8,!0),s.rolling=n.getInt32(12,!0),s.jumping=n.getInt32(16,!0),s.flying=n.getInt32(20,!0),s.float=n.getInt32(24,!0),s.mode=n.getInt32(28,!0),s.rings=n.getInt32(32,!0),s.respawning=n.getInt32(36,!0),s.dead=n.getInt32(40,!0),s.x=i.getFloat32(0,!0),s.y=i.getFloat32(4,!0),s.gSpeed=i.getFloat32(8,!0),s.xSpeed=i.getFloat32(12,!0),s.ySpeed=i.getFloat32(16,!0),s.angle=i.getFloat32(20,!0),s.groundAngle=i.getFloat32(24,!0),{frame:{input:a,args:s,frame:o.getInt32(0,!0)}}}},{key:"onRenderedFrameOut",value:function(t,e){t<0?e():this.callRenderedFrames.set(e,t)}},{key:"onFrameOut",value:function(t,e){if(t<=0)return void e();const r=this.args.frameId+t;this.callFrames.has(r)||this.callFrames.set(r,new Set);const n=this.callFrames.get(r);return n.add(e),()=>n.delete(e)}},{key:"onFrameInterval",value:function(t,e){if(frames<=0)return;const r=t;this.callIntervals.has(r)||this.callIntervals.set(r,new Set);const n=this.callIntervals.get(r);return n.add(e),()=>n.delete(e)}},{key:"callFrameOuts",value:function(){for(let t=this.args.lastFrameId;t<=this.args.frameId;t++){if(!this.callFrames.has(t))continue;const e=this.callFrames.get(t);for(const t of e)t();this.callFrames.delete(t)}}},{key:"callRenderedFrameOut",value:function(){if(this.args.frameId%this.settings.frameSkip==0)for(const e of this.callRenderedFrames){var t=bt(e,2);const r=t[0];t[1]<=0?r():this.callRenderedFrames.set(r,-1+frames)}}},{key:"callFrameIntervals",value:function(){for(let e=this.args.lastFrameId;e<=this.args.frameId;e++)for(const r of this.callIntervals){var t=bt(r,2);const n=t[0],i=t[1];if(e%n==0)for(const t of i)t()}}},{key:"pauseGame",value:function(){this.focus(),this.args.mouse="moved",this.args.paused=-1,this.args.pauseMenu.focusFirst(),p.Bgm.pause(),this.onTimeout(6,()=>{this.controller&&this.controller.zero()})}},{key:"unpauseGame",value:function(){this.args.pauseMenu.reset(),p.Bgm.unpause(),this.args.mouse="hide",this.onTimeout(15,()=>{this.controller&&this.controller.zero()}),this.onTimeout(30,()=>{this.focus()}),this.onTimeout(60,()=>{this.args.paused=!1})}},{key:"mousemove",value:function(t){this.args.mouse="moved";const e=t.currentTarget.offsetLeft,r=t.currentTarget.offsetTop,n=(t.pageX+-e)/this.args.scale,i=(t.pageY+-r)/this.args.scale;this.args.xMouseOffset=n,this.args.yMouseOffset=i,this.onTimeout(800,()=>{this.args.mouse="hide"})}},{key:"mousedown",value:function(t){this.setMouseButtons(t)}},{key:"mouseup",value:function(t){this.setMouseButtons(t)}},{key:"setMouseButtons",value:function(t){for(let e=0;e<8;e++){const r=Math.pow(2,e);this.mouseState.buttons[e]=this.mouseState.buttons[e]||0,t.buttons&r?this.mouseState.buttons[e]++:this.mouseState.buttons[e]=0}}},{key:"hyphenate",value:function(t){return String(t).replace(/\s/g,"-").toLowerCase()}},{key:"storeCheckpoint",value:function(t,e){this.checkpoints[this.currentMap]||(this.checkpoints[this.currentMap]={}),this.checkpoints[this.currentMap][t]={checkpointId:e,frames:this.args.frameId-this.args.startFrameId},localStorage.setItem(`checkpoints:::${this.currentMap}`,JSON.stringify(this.checkpoints[this.currentMap]))}},{key:"getCheckpoint",value:function(t){if(!this.checkpoints[this.currentMap]){const t=localStorage.getItem(`checkpoints:::${this.currentMap}`)||"{}";this.checkpoints[this.currentMap]=JSON.parse(t)||{}}return this.checkpoints[this.currentMap][t]}},{key:"setCheckpoint",value:function(t,e){localStorage.setItem(`checkpoints:::${t}`,JSON.stringify(e))}},{key:"clearCheckpoints",value:function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;if(!this.controlActor)return;null===t&&(t=this.controlActor.args.canonical),this.checkpoints[this.currentMap]||(this.checkpoints[this.currentMap]={}),delete this.checkpoints[this.currentMap][t],localStorage.setItem(`checkpoints:::${this.currentMap}`,JSON.stringify(this.checkpoints[this.currentMap]))}},{key:"showCenterMessage",value:function(t,e){this.args.centerMessage=new B.CharacterString({value:t,color:e})}},{key:"hideCenterMessage",value:function(){this.args.centerMessage=!1}},{key:"showDialog",value:function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";this.args.dialog=!0,this.clearDialog(),t=t.map(t=>new B.CharacterString({value:t}));let r=0;for(const e of t)e.offset=r,r+=e.args.value.length;this.args.dialogLines=t,this.args.dialogClasses=e}},{key:"hideDialog",value:function(t){this.clearDialog(),this.args.dialog=!1}},{key:"clearDialog",value:function(){this.args.dialogLines=[]}},{key:"clearAct",value:function(t){let e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];const r=this.getZoneState();if(this.controlActor&&this.controlActor.args.canonical){const t=this.getCharacterState(this.controlActor.args.canonical);t&&(this.currentMap in t.cleared||(t.cleared[this.currentMap]={firstCleared:Date.now()}),t.cleared[this.currentMap].clearCount=t.cleared[this.currentMap].clearCount||0,t.cleared[this.currentMap].lastCleared=Date.now(),t.cleared[this.currentMap].clearCount++)}this.args.actClearLabel.args.value=t;const n=this.controlActor.args.rings,i=this.args.frameId-this.args.startFrameId,o=i/60,a=this.controlActor.args.airTimeTotal/(this.controlActor.args.airTimeTotal+this.controlActor.args.groundTimeTotal),s=Math.trunc(10*this.controlActor.args.clearSpeed),c=100*n,l=Math.round(1e4*(a||0));let u=0;const f=Math.trunc(Math.abs(o)),h=(u=f<30?5e4:f<45?1e4:f<60?5e3:f<90?4e3:f<120?3e3:f<180?2e3:f<240?1e3:500)+c+s+l;this.args.actClear=!0,this.args.skidBonusValue=this.controlActor.args.dragBonus||0;this.controlActor.args.dragBonus;const g=new ht.TallyBoard;return g.addCounter({label:"Time Bonus:",value:u}),g.addCounter({label:"Ring Bonus:",value:c}),s&&g.addCounter({label:"Speed Bonus:",value:s}),g.addCounter({label:"Air Bonus:",value:l}),p.Bgm.play("ACT_CLEAR",{interlude:!0}),g.update(this),e&&g.addEventListener("totalingdone",t=>this.setZoneCard(!0)),g.addEventListener("done",t=>{this.controlActor.args.clearSpeed=0,this.args.tallyBoard=null,this.tallyBoard=!1,this.args.actStartFrameId=this.args.frameId,this.args.actClear=!1,this.args.inventory.splice(0),p.Bgm.stop("ACT_CLEAR"),e&&this.args.zonecard.replay()}),this.tallyBoard=g,this.args.tallyBoard=g.view(),(!r.time||r.time>i)&&(r.time=i),(!r.rings||r.rings<n)&&(r.rings=n),(!r.air||r.air<a)&&(r.air=a),(!r.score||r.score<h)&&(r.score=h),this.currentSave.save(),g}},{key:"cpuDetect",value:function(){try{dt.Analytic.report({eventCategory:"cpu",eventAction:"cores",eventLabel:"core check",eventValue:navigator.hardwareConcurrency})}catch(t){dt.Analytic.report({eventCategory:"cpu",eventAction:"cpu detect fail",eventLabel:`Cpu Detect Failure: ${t}`})}}},{key:"gpuDetect",value:function(){try{this.gpuDetector=this.gpuDetector||document.createElement("canvas").getContext("webgl");const t=this.gpuDetector.getExtension("WEBGL_debug_renderer_info"),e=this.gpuDetector.getParameter(t.UNMASKED_VENDOR_WEBGL),r=this.gpuDetector.getParameter(t.UNMASKED_RENDERER_WEBGL);dt.Analytic.report({eventCategory:"gpu",eventAction:"gpu detect",eventLabel:`${e} :: ${r}`})}catch(t){dt.Analytic.report({eventCategory:"gpu",eventAction:"gpu detect fail",eventLabel:`Gpu Detect Failure: ${t}`})}}},{key:"buildDetect",value:function(){const t=document.head.querySelector('meta[name="x-build-time"]').getAttribute("content");dt.Analytic.report({eventCategory:"build",eventAction:"build check",eventLabel:t})}},{key:"interact",value:function(){this.args.interacted=!0}},{key:"matrixConnect",value:function(){let t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.settings.matrixUrl||console.error("No matrixUrl defined!!!");const e=location.origin+"/accept-sso";return!t&&this.matrix&&this.matrix.isLoggedIn?Promise.resolve(this.matrix):this.matrix.logIn(e).then(()=>this.matrix)}},{key:"subspaceConnect",value:function(){this.socket=J.Socket.get("ws://localhost:9998"),this.socket.subscribe("open",()=>{console.log("socket ready!"),fetch("http://localhost:2020/auth?api").then(t=>t.text()).then(t=>{console.log(t),this.socket.send(`auth ${t}`);this.socket.subscribe("message",(t,e,r,n,i,o)=>{if("user"===n)return;if(console.log(t.data),"{"!==t.data[0])return;const a=JSON.parse(t.data);"youruid"in a&&(this.netId=a.youruid)}),this.socket.send("uid"),this.socket.subscribe("message:0",(t,e,r,n,i,a)=>{if(this.bytesReceived+=e.length||e.byteLength,"user"!==n)return void console.log(e);if(!this.controlActor||i===this.netId)return;const s=this.unpackPlayerFrame(e);if(!this.netPlayers.has(i)){const t=new rt.Sonic({name:"Player "+i,id:String(new o.Uuid),netplayer:!0},this);this.netPlayers.set(i,t),this.spawn.add({object:t}),this.actors.add(t),this.auras.add(t)}const c=this.netPlayers.get(i);s.frame&&(s.frame.frame>this.args.frameId&&(this.args.frameId=s.frame.frame),s.frame.input&&(c.controller.replay(s.frame.input),c.readInput()),s.frame.args&&Object.assign(c.args,s.frame.args),c.noClip=c.args.dead)}),this.socket.publish("testing","This is the payload.")})}),this.socket.subscribe("close",()=>{console.log("socket closed!"),this.quit(2)})}},{key:"nowPlayingClicked",value:function(t){this.args.audioComment&&(console.log(this.args.audioComment),"https://"===this.args.audioComment.substr(0,8)&&(this.pauseGame(),window.open(this.args.audioComment,"audio-credit")))}},{key:"handleUncaughtException",value:function(t){console.error(t.error),dt.Analytic.report({eventCategory:"error",eventAction:`${t.error.message} @ ${t.filename}:${t.lineno}:${t.colno}`,eventLabel:t.error.stack}),at.TraceDatabase.open("traces",1).then(e=>{const r=st.Trace.from(t.error);delete r.id,console.log(JSON.stringify(r)),r.consume(t),console.log(JSON.stringify(r)),console.log(r,t),this.currentMap&&e.insert("traces",r).then(()=>{if(this.replay)return r.replay=this.replay.uuid,void e.update("traces",r);this.saveReplay("#FF0000").then(t=>{r.replay=t.uuid,e.update("traces",r)}).catch(()=>{})})})}},{key:"mouse",get:function(){return this.mouseState.position[0]=this.args.xMouseOffset+-this.args.x,this.mouseState.position[1]=this.args.yMouseOffset+-this.args.y,this.mouseState}}])&&mt(r.prototype,yt),vt&&mt(r,vt),Object.defineProperty(r,"prototype",{writable:!1}),Pt}();t.Viewport=Tt}),require.register("viewport/layer.html",function(t,e,r){r.exports='<div data-name = "[[name]]" class = "viewport-background" cv-each = "blocks:block:b" cv-ref = "background" data-layer = "[[layerId]]">[[block]]</div>\n'}),require.register("viewport/viewport.html",function(t,e,r){r.exports='<section class = "filters" cv-each = "effects:effect">[[effect]]</section>\n\n<div class = "viewport-frame [[initializing]] [[standalone]] [[secret]] [[level]] [[noIntro]] [[inputType]] [[ntsc]] [[windowFocused]]" data-theme = "[[theme]]" data-bg = "[[bg]]" cv-ref = "frame" data-paused = "[[paused]]" data-smoothing = [[smoothing]] data-character = "[[selectedChar]]" data-loading-map = "[[loadingMap]]" cv-on = "mousedown:interact:c;keydown:interact:c;">\n\t<div class = "viewport [[standalone]] [[fullscreen]] displacement-[[displacement]] mouse-[[mouse]] [[theme]] [[hideNowPlaying]] [[hiddenNowPlaying]] [[invert]]" cv-ref = "viewport" tabindex="0" cv-on = "click;mousemove;mousedown;mouseup;">\n\n\t\t<svg height="32" width="32">\n\t\t<defs>\n\t\t\t<filter id="motionBlur" x="0%"\n y="0%" width="100%" height="100%">\n\t\t\t\t<feGaussianBlur\n\t\t\t\t\tin = "SourceGraphic"\n\t\t\t\t\tedgeMode = "duplicate"\n\t\t\t\t\tstdDeviation = "0,0"\n\t\t\t\t\tcv-ref = "blur"\n\t\t\t\t/>\n\t\t\t</filter>\n\t\t</defs>\n\t\t</svg>\n\n\t\t<svg height="100" width="100">\n\t\t<defs>\n\t\t\t<filter id="waterBlur">\n\t\t\t\t<feGaussianBlur in="SourceGraphic" stdDeviation="0.25,0" />\n\t\t\t</filter>\n\n\t\t\t<filter id="dilate">\n\t\t\t\t<feMorphology operator="dilate" radius="0.25" result = "expanded"/>\n\t\t\t\t<feMerge>\n\t\t\t\t\t<feMergeNode in="expanded" />\n\t\t\t\t\t<feMergeNode in="SourceGraphic" />\n\t\t\t\t</feMerge>\n\t\t\t</filter>\n\n\t\t\t<filter id = "waves"\n\t\t\t\tcolor-interpolation-filters="sRGB"\n\t\t\t\tx      ="0%"\n\t\t\t\ty      ="0%"\n\t\t\t\theight ="100%"\n\t\t\t\twidth  ="100%"\n\t\t\t>\n\t\t\t\t<feFlood\n\t\t\t\t\tflood-color="#408000"\n\t\t\t\t\tresult = "DisplacementGreen"\n\t\t\t\t></feFlood>\n\n\t\t\t\t<feImage\n\t\t\t\t\txlink:href="/effects/wave.png"\n\t\t\t\t\tresult="DisplacementSource"\n\t\t\t\t\theight="64"\n\t\t\t\t\twidth="64"\n\t\t\t\t></feImage>\n\n\t\t\t\t<feTile\n\t\t\t\t\tin="DisplacementSource"\n\t\t\t\t\tresult="DisplacementTile"\n\t\t\t\t></feTile>\n\n\t\t\t\t<feComposite\n\t\t\t\t\tin  = "DisplacementTile"\n\t\t\t\t\tin2 = "DisplacementGreen"\n\t\t\t\t\tresult ="DisplacementField"\n\t\t\t\t\toperator ="over"\n\t\t\t\t></feComposite>\n\n\t\t\t\t<feOffset\n\t\t\t\t\tin  = "DisplacementField"\n\t\t\t\t\tout = "DisplacementOffset"\n\t\t\t\t\tdx  = "0"\n\t\t\t\t>\n\t\t\t\t\t<animate\n\t\t\t\t\t\tattributeName="dy"\n\t\t\t\t\t\tvalues = "0;-64"\n\t\t\t\t\t\tdur="1500ms"\n\t\t\t\t\t\trepeatCount="indefinite" />\n\n\t\t\t\t</feOffset>\n\n\t\t\t\t<feDisplacementMap\n\t\t\t\t\tin="SourceGraphic"\n\t\t\t\t\tin2="DisplacementOffset"\n\t\t\t\t\tresult="Displaced"\n\t\t\t\t\txChannelSelector="R"\n\t\t\t\t\tyChannelSelector="G"\n\t\t\t\t\tscale="4"\n\t\t\t\t></feDisplacementMap>\n\n\t\t\t\t<feGaussianBlur\n\t\t\t\t\tin="Displaced"\n\t\t\t\t\tstdDeviation="0.35"\n\t\t\t\t></feGaussianBlur>\n\t\t\t</filter>\n\n\t\t\t<filter id = "ntsc"\n\t\t\t\tcolor-interpolation-filters="sRGB"\n\t\t\t\tx      = "0%"\n\t\t\t\ty      = "0%"\n\t\t\t\twidth  = "100%"\n\t\t\t\theight = "200%"\n\t\t\t>\n\t\t\t\t<feFlood\n\t\t\t\t\tflood-color="#808000"\n\t\t\t\t\tresult = "DisplacementGreen"\n\t\t\t\t></feFlood>\n\n\t\t\t\t<feImage\n\t\t\t\t\txlink:href="/effects/ntsc-static.png"\n\t\t\t\t\tresult ="DisplacementSource"\n\t\t\t\t\twidth  = "128"\n\t\t\t\t\theight = "128"\n\t\t\t\t></feImage>\n\n\t\t\t\t<feTile\n\t\t\t\t\tin="DisplacementSource"\n\t\t\t\t\tresult="DisplacementTile"\n\t\t\t\t></feTile>\n\n\t\t\t\t<feComposite\n\t\t\t\t\tin  = "DisplacementTile"\n\t\t\t\t\tin2 = "DisplacementGreen"\n\t\t\t\t\tresult ="DisplacementField"\n\t\t\t\t\toperator ="over"\n\t\t\t\t></feComposite>\n\n\t\t\t\t<feOffset\n\t\t\t\t\tin  = "DisplacementField"\n\t\t\t\t\tout = "DisplacementOffset"\n\t\t\t\t\tdx  = "0"\n\t\t\t\t\tdy  = "0"\n\t\t\t\t>\n\t\t\t\t\t<animate\n\t\t\t\t\t\tattributeName="dy"\n\t\t\t\t\t\tvalues = "-128;0"\n\t\t\t\t\t\tbegin="2000ms"\n\t\t\t\t\t\tdur="2000ms"\n\t\t\t\t\t\trepeatCount="8"\n\t\t\t\t\t></animate>\n\n\t\t\t\t</feOffset>\n\n\t\t\t\t<feDisplacementMap\n\t\t\t\t\tin="SourceGraphic"\n\t\t\t\t\tin2="DisplacementOffset"\n\t\t\t\t\tresult="Displaced"\n\t\t\t\t\txChannelSelector="R"\n\t\t\t\t\tyChannelSelector="G"\n\t\t\t\t\tscale = "0"\n\t\t\t\t>\n\t\t\t\t\t<animate\n\t\t\t\t\t\tattributeName="scale"\n\t\t\t\t\t\tvalues = "512;192;0"\n\t\t\t\t\t\tbegin="2000ms"\n\t\t\t\t\t\tdur="2000ms"\n\t\t\t\t\t\trepeatCount="1"\n\t\t\t\t\t></animate>\n\n\t\t\t\t</feDisplacementMap>\n\t\t\t</filter>\n\n\t\t</defs>\n\t\t</svg>\n\n\t\t<div class = "viewport-zoom">\n\n\t\t\t[[backdrop]]\n\n\t\t\t<div class = "backdrops" cv-ref ="backdrops"></div>\n\n\t\t\t<div class = "blurAngle" cv-ref = "blurAngle">\n\t\t\t<div class = "blurDistance" cv-ref = "blurDistance">\n\t\t\t<div class = "blurAngleCancel" cv-ref = "blurAngleCancel">\n\t\t\t\t<div\n\t\t\t\t\tcv-ref  = "background"\n\t\t\t\t\tclass   = "viewport-bg-layers"\n\t\t\t\t\tcv-each = "layers:layer"\n\t\t\t\t>[[layer]]</div>\n\t\t\t</div>\n\t\t\t</div>\n\t\t\t</div>\n\n\t\t\t<div class = "filters filters-background" cv-ref = "bgFilters"></div>\n\n\t\t\t<div cv-ref = "content" class = "viewport-content">\n\t\t\t\t<div cv-ref = "actors" class = "viewport-actors"></div>\n\t\t\t\t<div cv-ref = "particles" class = "viewport-particles"></div>\n \t\t\t</div>\n\n\t\t\t<div class = "blurAngle" cv-ref = "blurAngleFg">\n\t\t\t<div class = "blurDistance" cv-ref = "blurDistanceFg">\n \t\t\t<div class = "blurAngleCancel" cv-ref = "blurAngleCancelFg">\n\t\t\t\t<div\n\t\t\t\t\tcv-ref  = "foreground"\n\t\t\t\t\tclass   = "viewport-bg-layers"\n\t\t\t\t\tcv-each = "fgLayers:layer"\n\t\t\t\t>[[layer]]</div>\n\t\t\t</div>\n\t\t\t</div>\n\t\t\t</div>\n \t\t</div>\n\n \t\t[[plot]]\n\n \t\t<div class = "viewport-overlay">\n \t\t\t<div class = "debug-spawn" cv-if = "debugEditMode">\n \t\t\t\t<div class = "debug-spawn" cv-ref = "spawnPreview"></div>\n \t\t\t\t<div class = "debug-spawn">[[debugObjectName]]</div>\n \t\t\t</div>\n\n\t\t\t<div class = "hud now-loading"></div>\n\n\t\t\t<div class = "hud hud-top-right hud-table combo-table">\n\t\t\t\t<span cv-if = "showCombo">\n\t\t\t\t\t<span>\n\t\t\t\t\t\t<span class = "combo-list" cv-each = "combo:pop:p">\n\t\t\t\t\t\t\t<div>[[pop.label]]</div>\n\t\t\t\t\t\t</span>\n\t\t\t\t\t\t<span class = "comboTopLine" cv-if = "combo">[[popBottomLine]]</span>\n\t\t\t\t\t</span>\n\t\t\t\t\t<span class = "comboTopLine" cv-if = "combo">[[popTopLine]]</span>\n\t\t\t\t</span>\n\t\t\t\t<span class = "comboFail">[[comboFail]]</span>\n\t\t\t\t<span class = "comboResult">[[comboResult]]</span>\n\t\t\t</div>\n\n\t\t\t<div class = "hud hud-top-right hud-table quick-form">[[quickForm]]</div>\n\n\t\t\t<div class = "hud hud-top-right hud-table"  cv-if = "debugOsd">\n\t\t\t\t<table>\n\t\t\t\t\t<tr>\n\t\t\t\t\t\t<td colspan = "2">[[char]]</td>\n\t\t\t\t\t</tr>\n\n\t\t\t\t\t<tr>\n\t\t\t\t\t\t<td>[[labelGround]]</td>\n\t\t\t\t\t\t<td>[[ground]]</td>\n\t\t\t\t\t</tr>\n\n\t\t\t\t\t<tr>\n\t\t\t\t\t\t<td>[[labelCamera]]</td>\n\t\t\t\t\t\t<td>[[cameraMode]]</td>\n\t\t\t\t\t</tr>\n\n\t\t\t\t\t<tr>\n\t\t\t\t\t\t<td>[[labelMode]]</td>\n\t\t\t\t\t\t<td>[[mode]]</td>\n\t\t\t\t\t</tr>\n\n\t\t\t\t\t<tr>\n\t\t\t\t\t\t<td>[[labelX]]</td>\n\t\t\t\t\t\t<td>[[xPos]]</td>\n\t\t\t\t\t</tr>\n\n\t\t\t\t\t<tr>\n\t\t\t\t\t\t<td>[[labelY]]</td>\n\t\t\t\t\t\t<td>[[yPos]]</td>\n\t\t\t\t\t</tr>\n\n\t\t\t\t\t<tr>\n\t\t\t\t\t\t<td>[[labelLayer]]</td>\n\t\t\t\t\t\t<td>[[layer]]</td>\n\t\t\t\t\t</tr>\n\n\t\t\t\t\t<tr>\n\t\t\t\t\t\t<td>[[labelGSpeed]]</td>\n\t\t\t\t\t\t<td>[[gSpeed]]</td>\n\t\t\t\t\t</tr>\n\n\t\t\t\t\t<tr>\n\t\t\t\t\t\t<td>[[labelXSpeed]]</td>\n\t\t\t\t\t\t<td>[[xSpeed]]</td>\n\t\t\t\t\t</tr>\n\n\t\t\t\t\t<tr>\n\t\t\t\t\t\t<td>[[labelYSpeed]]</td>\n\t\t\t\t\t\t<td>[[ySpeed]]</td>\n\t\t\t\t\t</tr>\n\n\t\t\t\t\t<tr>\n\t\t\t\t\t\t<td>[[labelAirAngle]]</td>\n\t\t\t\t\t\t<td>[[airAngle]]</td>\n\t\t\t\t\t</tr>\n\n\t\t\t\t\t<tr>\n\t\t\t\t\t\t<td>[[labelAngle]]</td>\n\t\t\t\t\t\t<td>[[angle]]</td>\n\t\t\t\t\t</tr>\n\n\t\t\t\t\t<tr>\n\t\t\t\t\t\t<td>[[labelActors]]</td>\n\t\t\t\t\t\t<td>[[actorCount]]</td>\n\t\t\t\t\t</tr>\n\n\t\t\t\t\t<tr>\n\t\t\t\t\t\t<td>[[labelRegions]]</td>\n\t\t\t\t\t\t<td>[[regionCount]]</td>\n\t\t\t\t\t</tr>\n\n\t\t\t\t\t<tr>\n\t\t\t\t\t\t<td>[[labelFrame]]</td>\n\t\t\t\t\t\t<td>[[frame]]</td>\n\t\t\t\t\t</tr>\n\n\t\t\t\t\t<tr>\n\t\t\t\t\t\t<td>[[labelIgnore]]</td>\n\t\t\t\t\t\t<td>[[ignore]]</td>\n\t\t\t\t\t</tr>\n\n\t\t\t\t</table>\n\t\t\t</div>\n\n\t\t\t<div class = "hud hud-top-right" cv-if = "showHud">\n\n\t\t\t\t<div class = "char-hud">\n\t\t\t\t\t[[prompt]] [[char]]\n\t\t\t\t\t<div class = "char-icon [[charName|hyphenate]]"></div>\n\t\t\t\t</div>\n\t\t\t\t<div>\n\t\t\t\t\t<div class = "emblem-hud" cv-each = "emblems:emblem:e">\n\t\t\t\t\t\t<img loading="lazy" src = "/custom/hud-emblem.png" class = "[[emblem.existing]]" />\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class = "collectible-hud" cv-each = "inventory:item">\n\t\t\t\t\t\t<span cv-if = "item.icon">\n\t\t\t\t\t\t\t<img loading="lazy" src = "[[item.icon]]" class = "inventory-icon" />\n\t\t\t\t\t\t</span>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<div class = "emerald-hud" cv-each = "emeralds:emerald:e">\n\t\t\t\t\t<img loading="lazy" src = "/Sonic/emerald-[[emerald]]-mini.png" />\n\t\t\t\t</div>\n\t\t\t</div>\n\n\t\t\t<div class = "hud hud-bottom-right">\n\n\t\t\t\t<div cv-if = "showHud" class ="sheild-hud [[currentSheild]] [[hasElectric]] [[hasFire]] [[hasWater]] [[hasNormal]]">\n\t\t\t\t\t<div class = "sheild-icon sheild-electric"></div>\n\t\t\t\t\t<div class = "sheild-icon sheild-normal"></div>\n\t\t\t\t\t<div class = "sheild-icon sheild-fire"></div>\n\t\t\t\t\t<div class = "sheild-icon sheild-water"></div>\n\t\t\t\t</div>\n\n\t\t\t\t<span class = "contents" cv-if = "showFps">\n\t\t\t\t\t<table>\n\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t<td>[[labelFps]]</td>\n\t\t\t\t\t\t\t<td>[[fpsSprite]]</td>\n\t\t\t\t\t\t</tr>\n\t\t\t\t\t</table>\n\t\t\t\t</span>\n\t\t\t</div>\n\n\t\t\t<div class = "hud hud-dark hud-bottom-left" cv-if = "showHud" data-extra = "[[audioComment]]" data-secret-icon = [[secretIcon]] cv-on = "click:nowPlayingClicked">\n\t\t\t\t[[nowPlaying]]\n\t\t\t\t[[trackName]]\n\t\t\t</div>\n\n\t\t\t<div class = "hud hud-top-left hud-table"  cv-if = "showHud">\n\t\t\t\t<table>\n\t\t\t\t\t<tr>\n\t\t\t\t\t\t<td>[[scoreLabel]]</td><td>[[score]]</td>\n\t\t\t\t\t</tr>\n\t\t\t\t\t<tr>\n\t\t\t\t\t\t<td>[[timerLabel]]</td><td>[[timer]]</td>\n\t\t\t\t\t</tr>\n\t\t\t\t\t<tr>\n\t\t\t\t\t\t<td>[[ringLabel]]</td><td>[[rings]]</td>\n\t\t\t\t\t</tr>\n\t\t\t\t</table>\n\t\t\t\t\x3c!-- <div class = "demo-hud" cv-if = "demoIndicator">[[demoIndicator]]</div> --\x3e\n\t\t\t</div>\n\n\t\t\t<div class = "hud hud-dark hud-centered" cv-if = "actClear">\n\t\t\t\t<div class = "centered act-cleared">[[actClearLabel]]</div>\n\t\t\t\t[[tallyBoard]]\n\t\t\t</div>\n\n\t\t\t<div class = "hud hud-dark hud-centered" cv-if = "centerMessage">\n\t\t\t\t[[centerMessage]]\n\t\t\t</div>\n\n\t\t\t<div class = "hud hud-dark hud-centered-raised" cv-if = "dialog">\n\t\t\t\t<div class = "dialog-frame [[dialogClasses]]">\n\t\t\t\t\t<div class = "dialog-icon">\n\t\t\t\t\t</div>\n\t\t\t\t\t<div cv-each = "dialogLines:line" class = "dialog-text">\n\t\t\t\t\t\t<span style = "--text-offset:[[line.offset]]">[[line]]</span>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\n\t\t\t<div class = "screen-effects" cv-each = "screenEffects:effect">\n\t\t\t\t[[effect]]\n\t\t\t</div>\n\n\t\t\t<section class = "pause-menu full" cv-if = "paused">[[pauseMenu]]</section>\n\n\t\t\t[[titlecard]]\n\n\t\t\t<div class = "topLine">\n\t\t\t\t<div class = "status-message">[[topLine]]</div>\n\t\t\t</div>\n\n\t\t\t<div class = "focus-me">\n\t\t\t\t<div class = "status-message">[[focusMe]]</div>\n\t\t\t</div>\n\n\t\t\t<div class = "status-message">[[status]]</div>\n\t\t\t<section class = "contents" cv-if = "networked">[[chatBox]]</section>\n\t\t\t\x3c!-- <div class = "filters filters-foreground" cv-ref = "fgFilters"></div> --\x3e\n\t\t\t<div class = "console [[showConsole]]" cv-ref = "subspace" tab-index = "0">[[subspace]]</div>\n\t\t\t<div class = "shade" data-fade = "[[fade]]"></div>\n\n\t\t</div>\n\n\t\t<div class = "quick-controls" cv-if = "shortcuts">\n\t\t\t[[muteSwitch]]\n\t\t\t<div class = "button" cv-on = "click:fullscreen()">\n\t\t\t\t<image src = "/ui/fullscreen.svg" />\n\t\t\t</div>\n\t\t</div>\n\n\t</div>\n</div>\n'}),require.register("zoneScripts/ChaoGarden.js",function(t,e,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ChaoGarden=void 0;e("../actor/Spring"),e("../actor/OrbSmall"),e("../actor/WoodenCrate"),e("../behavior/SkidDust");var n=e("../actor/Chao");function i(t){"@babel/helpers - typeof";return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function o(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(o=n.key,void 0,"symbol"===i(a=function(t,e){if("object"!==i(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==i(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(o,"string"))?a:String(a)),n)}var o,a}let a=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}var e,r,i;return e=t,(r=[{key:"update",value:function(t,e){if(0===t){const t=e.getZoneState();if(t.chao)for(const r of t.chao){const t=new n.Chao;t.load(r),e.spawn.add({object:t})}}}}])&&o(e.prototype,r),i&&o(e,i),Object.defineProperty(e,"prototype",{writable:!1}),t}();t.ChaoGarden=a}),require.register("zoneScripts/InfiniteRuin.js",function(t,e,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.InfiniteRuin=void 0;var n=e("../actor/Spring"),i=e("../actor/OrbSmall"),o=e("../actor/WoodenCrate"),a=e("../behavior/SkidDust");function s(t){"@babel/helpers - typeof";return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function c(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(i=n.key,void 0,"symbol"===s(o=function(t,e){if("object"!==s(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==s(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(i,"string"))?o:String(o)),n)}var i,o}let l=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}var e,r,s;return e=t,(r=[{key:"update",value:function(t,e){if(!e.controlActor)return;if(e.controlActor.args.dead||e.controlActor.args.startled)return;t<30&&e.controlActor&&(e.controlActor.args.gSpeed=15);let r=120;if(t<600&&(r=150),t>1200&&(r=100),t>1800&&(r=90),t>120&&t%r==0&&e.controlActor){let r=Math.random();t<900&&(r=0),t<900&&(r*=.79),e.objectDb.has(o.WoodenCrate)&&e.objectDb.get(o.WoodenCrate).size&&(r=0),r>.5?this.spawnBox(e):this.spawnOrb(e)}}},{key:"spawnOrb",value:function(t){let e;e=new i.OrbSmall;let r=Math.trunc(8*Math.random());switch(e.args.xSpeed=t.controlActor.args.gSpeed||t.controlActor.args.xSpeed,e.args.gSpeed=t.controlActor.args.gSpeed||t.controlActor.args.xSpeed,r){case 0:e.args.x=t.controlActor.args.x+320,e.args.y=608,e.args.friction=.75,e.args.bounce=.75;break;case 1:e.args.x=t.controlActor.args.x+320,e.args.y=608,e.args.friction=.7,e.args.bounce=.75;break;case 2:e.args.x=t.controlActor.args.x+400,e.args.y=928,e.args.decel=.05,e.args.bounce=0,e.args.gSpeed=18,e.args.xSpeed=18;break;case 3:e.args.x=t.controlActor.args.x+400,e.args.y=928,e.args.decel=.2,e.args.bounce=0,e.args.gSpeed=18,e.args.xSpeed=18;break;case 4:e.args.x=t.controlActor.args.x+400,e.args.y=880,e.args.friction=.9,e.args.decel=.15,e.args.bounce=.999;break;case 5:e.args.x=t.controlActor.args.x+400,e.args.y=904,e.args.friction=.8,e.args.decel=.15,e.args.bounce=.999;break;case 6:e.args.x=t.controlActor.args.x+320,e.args.y=608,e.args.friction=.75,e.args.bounce=.7;break;case 7:e.args.x=t.controlActor.args.x+320,e.args.y=608,e.args.friction=.7,e.args.bounce=.8}e.args.canHide=!0,t.spawn.add({object:e})}},{key:"spawnBox",value:function(t){let e;e=new o.WoodenCrate;Math.trunc(8*Math.random());e.args.x=t.controlActor.args.x+320,e.args.y=608,e.args.friction=.76,e.args.bounce=.65,e.args.contains="ring-monitor",e.alwaysSkidding=!0,e.dustFreq=5,e.behaviors.add(new a.SkidDust),e.args.xSpeed=t.controlActor.args.gSpeed||t.controlActor.args.xSpeed,e.args.gSpeed=t.controlActor.args.gSpeed||t.controlActor.args.xSpeed,t.spawn.add({object:e})}},{key:"spawnSpring",value:function(t){let e;e=new n.Spring;Math.trunc(8*Math.random());e.args.x=t.controlActor.args.x+320,e.args.y=608,e.args.decel=.03,e.args.power=10,e.args.width=32,e.args.height=16,e.args.angle=-Math.PI/2,e.args.groundAngle=0,e.args.static=!1,e.args.canHide=!0,e.alwaysSkidding=!0,e.float=0,e.dustFreq=5,e.behaviors.add(new a.SkidDust),e.args.xSpeed=t.controlActor.args.gSpeed||t.controlActor.args.xSpeed,e.args.gSpeed=t.controlActor.args.gSpeed||t.controlActor.args.xSpeed,t.spawn.add({object:e});e.sleep;e.sleep=(()=>t.actors.remove(e))}}])&&c(e.prototype,r),s&&c(e,s),Object.defineProperty(e,"prototype",{writable:!1}),t}();t.InfiniteRuin=l}),require.register("___globals___",function(t,e,r){})}(),require("___globals___");
